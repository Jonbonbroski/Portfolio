(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"+9CW":function(e,t,n){},"+BnW":function(e,t,n){},"+Lv6":function(e,t,n){"use strict";var a=n("wdd+"),r=n("DCka");n.d(t,"a",function(){return r.a}),t.b=a.a},"+ZNJ":function(e,t,n){},"+yrr":function(e,t,n){"use strict";var a=n("m1cH"),r=n.n(a),i=n("YEIV"),o=n.n(i),s=n("QbLZ"),l=n.n(s),c=n("c8Bs"),u=n("u3oV"),d=n("Z0Cl"),p=n("Fsnq"),h=n("3Hq1"),m=n("1Lli"),b=n("owWc"),f=n("zmn3"),_=n("lCmp"),g=n("m8R6"),v=n("AFNo"),y=n("peh1"),k=n("k55U"),O=n("iCc5"),j=n.n(O),C=n("V7oC"),E=n.n(C),w=["#FFE0E0","#DBEB8D","#B5E0FF","#FFE5B2","#BDE595","#D4D5FF","#F9EF6E","#D0F2ED","#FFCCFF"],S=function(){function e(){j()(this,e),this.startIndex=Math.floor(Math.random()*(w.length-1))}return E()(e,[{key:"getSelfColor",value:function(){return w[this.startIndex]}},{key:"getColorForJoinIndex",value:function(e){return w[(this.startIndex+1+e)%w.length]}}]),e}(),I=n("Fdc0"),T=n("1YQg"),N=n("4zXV"),R=n("TM4O"),A=Object(v.b)("Sends an invite to the web API from the call window",function(e,t,n){var a=n.id,r=n.invitedUserIds;return Object(k.f)(Object(R.a)(),"We expect this to run in a call window context"),Promise.all([r.map(function(t){return e(Object(N.a)({method:"screenhero.rooms.invite",reason:"calls-invite",args:{responder:t,room:a,should_share:!0,cancelable:!0}}))})])}),P=n("OX5w");n.d(t,"C",function(){return L}),n.d(t,"B",function(){return F}),n.d(t,"c",function(){return B}),n.d(t,"F",function(){return q}),n.d(t,"M",function(){return U}),n.d(t,"b",function(){return H}),n.d(t,"N",function(){return G}),n.d(t,"D",function(){return W}),n.d(t,"H",function(){return K}),n.d(t,"K",function(){return z}),n.d(t,"L",function(){return Y}),n.d(t,"J",function(){return Q}),n.d(t,"a",function(){return J}),n.d(t,"E",function(){return X}),n.d(t,"G",function(){return Z}),n.d(t,"p",function(){return te}),n.d(t,"w",function(){return ne}),n.d(t,"m",function(){return ae}),n.d(t,"n",function(){return re}),n.d(t,"g",function(){return le}),n.d(t,"y",function(){return ce}),n.d(t,"v",function(){return ue}),n.d(t,"t",function(){return de}),n.d(t,"s",function(){return he}),n.d(t,"u",function(){return me}),n.d(t,"j",function(){return be}),n.d(t,"q",function(){return fe}),n.d(t,"h",function(){return _e}),n.d(t,"A",function(){return ge}),n.d(t,"f",function(){return ve}),n.d(t,"e",function(){return ye}),n.d(t,"l",function(){return ke}),n.d(t,"k",function(){return Oe}),n.d(t,"x",function(){return je}),n.d(t,"i",function(){return Ce}),n.d(t,"r",function(){return Ee}),n.d(t,"o",function(){return we}),n.d(t,"I",function(){return Ie}),n.d(t,"z",function(){return Te});var M=new S;function D(e,t){return"Could not "+t+": problem with peerId "+e+"."}function x(e){return"self"===e.id}function L(e){return x(e)}function F(e){return x(e)}var B=Object(v.a)("Add a remote peer"),q=Object(v.a)("Remove a remote peer"),U=Object(v.a)("Update a peer"),H=Object(v.a)("Add an invited user"),G=Object(v.a)("Update a response for an invited user"),W=Object(v.a)("Remove an invited user"),K=Object(v.a)("Update a peer's connection"),V=Object(v.a)("Update the screen share of a peer"),z=Object(v.a)("Set the ID of the peer selected by the user"),Y=Object(v.a)("Set the ID of the peer selected by the user"),Q=Object(v.a)("Set the ID of the active speaker"),J=Object(v.a)("Add an emoji reaction"),X=Object(v.a)("Remove an emoji reaction"),Z=Object(v.a)("Send an emoji reaction"),$={self:{id:"self",isMicrophoneEnabled:!0,isDrawEnabled:!0,reactionColor:M.getSelfColor()},invitedUsers:{},byId:{},leftById:{},reacjis:[],reacjiShownCounter:0,remotePeerJoinedCounter:0},ee=Object(v.d)({},$,{persistenceEnabled:!1}).on(B,function(e,t){Object(k.f)(!e.byId[t.id],D(t.id,"addRemotePeer"));var n=e.remotePeerJoinedCounter;return l()({},e,{remotePeerJoinedCounter:e.remotePeerJoinedCounter+1,lastRemoteScreensharePeerId:Se(e,t),byId:l()({},e.byId,o()({},t.id,l()({},t,{joinIndex:n,reactionColor:M.getColorForJoinIndex(n)})))},e.invitedUsers[t.userId]?{invitedUsers:l()({},e.invitedUsers,o()({},t.userId,l()({},e.invitedUsers[t.userId],{isExpired:!0})))}:null)}).on(q,function(e,t){var n=e.byId[t];return Object(k.f)(!!n),l()({},e,{speakingPeerId:e.speakingPeerId===t?void 0:e.speakingPeerId,userSelectedPeerId:e.userSelectedPeerId===t?void 0:e.userSelectedPeerId,lastRemoteScreensharePeerId:e.lastRemoteScreensharePeerId===t?void 0:e.lastRemoteScreensharePeerId,byId:l()({},Object(g.a)(e.byId,t)),leftById:l()({},e.leftById,o()({},n.id,l()({},n)))})}).on(H,function(e,t){var n=t.userId,a=t.isCancelable,r=void 0===a||a;return l()({},e,{invitedUsers:l()({},e.invitedUsers,o()({},n,{response:"pending",isCancelable:r,isExpired:!1}))})}).on(G,function(e,t){var n=t.userId,a=t.response;return l()({},e,{invitedUsers:l()({},e.invitedUsers,o()({},n,l()({},e.invitedUsers[n],{response:a})))})}).on(W,function(e,t){return l()({},e,{invitedUsers:l()({},e.invitedUsers,o()({},t,l()({},e.invitedUsers[t],{isExpired:!0})))})}).on(U,function(e,t){return L(t)?l()({},e,{self:l()({},e.self,t,!Object(h.a)(t.isScreenshareEnabled)&&{isHostDrawEnabled:!1})}):(Object(k.f)(!!e.byId[t.id],D(t.id,"updatePeer")),l()({},e,{byId:l()({},e.byId,o()({},t.id,l()({},e.byId[t.id],t)))}))}).on(V,function(e,t){return Object(k.f)(!!e.byId[t.id],D(t.id,"setRemotePeerScreenshare")),l()({},e,{lastRemoteScreensharePeerId:Se(e,t),byId:l()({},e.byId,o()({},t.id,l()({},e.byId[t.id],t)))})}).on(K,function(e,t){var n=t.id,a=t.isConnected;return Object(k.f)(!!e.byId[n],D(n,"setRemotePeerIsConnected")),l()({},e,!a&&{lastRemoteScreensharePeerId:Se(e,{id:n,isScreenshareEnabled:!1})},{byId:l()({},e.byId,o()({},n,l()({},e.byId[n],{isConnected:a},!a&&{isCameraEnabled:!1,isScreenshareEnabled:!1})))})}).on(z,function(e,t){return"self"!==t&&Object(k.f)(!!e.byId[t],D(t,"setUserSelectedPeerId")),l()({},e,{userSelectedPeerId:t})}).on(Y,function(e){return l()({},e,{userSelectedPeerId:void 0})}).on(Q,function(e,t){return Object(k.f)(!!e.byId[t],D(t,"setSpeakingPeerId")),l()({},e,{speakingPeerId:t})}).on(J,function(e,t){var n=e.reacjiShownCounter+1;return l()({},e,{reacjiShownCounter:n,reacjis:[{peerId:t.peerId,emoji:t.emoji,id:n,isEmoji:t.isEmoji}].concat(r()(e.reacjis))})}).on(X,function(e,t){var n=e.reacjis.filter(function(e){return e.id!==t});return l()({},e,{reacjis:n})}),te=(t.d=ee,Object(v.e)(function(e,t){var n=e.peers;if("self"===t)return n.self;var a=n.byId[t];return Object(k.f)(!!a,D(t,"getPeer")),a})),ne=(Object(v.e)(function(e,t){var n=e.peers.byId[t];return Object(k.f)(!!n,D(t,"getPeer")),n}),Object(v.e)(function(e){return e.peers.self})),ae=Object(v.e)(function(e,t){return"self"===t?e.peers.self:re(e,t)}),re=Object(v.e)(function(e,t){var n=e.peers,a=n.byId[t],r=n.leftById[t];return Object(k.f)(!!a||!!r),a||r}),ie=Object(v.e)(function(e){return e.peers.leftById}),oe=Object(v.e)(function(e){return e.peers.invitedUsers}),se=Object(y.createSelector)(oe,function(e){return Object(u.a)(e,function(e){return!e.isExpired})}),le=Object(y.createSelector)(oe,function(e){return Object.keys(e)}),ce=Object(y.createSelector)(se,function(e){return Object.keys(e)}),ue=Object(v.e)(function(e){return e.peers.byId}),de=Object(y.createSelector)(ue,function(e){return Object(f.a)(e,"userId")}),pe=Object(y.createSelector)(ue,function(e){return Object(m.a)(e,"joinIndex","desc")}),he=Object(y.createSelector)(pe,function(e){return Object(f.a)(e,"id")}),me=Object(y.createSelector)(pe,function(e){return Object(f.a)(e,"userId")}),be=Object(v.e)(function(e){return!!Object.keys(e.peers.byId).length||!!Object.keys(e.peers.leftById).length}),fe=(Object(y.createSelector)(ue,function(e){return Object(_.a)(e,function(e){return!!e.isScreenshareEnabled})}),Object(y.createSelector)(se,function(e){return Object(b.a)(e,function(e,t,n){var a=t.response,r=t.isExpired;return("pending"===a||a===T.c.Accept&&!r)&&e.push(n),e},[])})),_e=Object(y.createSelector)(se,function(e){return Object(d.a)(e,function(e){return e.isCancelable})}),ge=Object(y.createSelector)(oe,ue,ie,P.c,function(e,t,n,a){return!Object(p.a)(t)&&!Object(p.a)(n)&&Object(p.a)(e)&&!!a&&!Object(T.m)(a)&&Object(c.a)(e,function(e){return"pending"!==e.response&&e.response!==T.c.Accept})}),ve=Object(v.e)(function(e){return e.peers.lastRemoteScreensharePeerId||je(e)||e.peers.speakingPeerId||Number(Object.keys(e.peers.byId)[0])}),ye=Object(y.createSelector)(fe,function(e){return e[0]}),ke=Object(v.e)(function(e){var t=ve(e);return!!t&&!!te(e,t).isScreenshareEnabled}),Oe=Object(v.e)(function(e){var t=ve(e);return!!t&&!!te(e,t).isCameraEnabled}),je=Object(v.e)(function(e){return e.peers.userSelectedPeerId}),Ce=Object(v.e)(function(e){var t=ne(e);if(t.isScreenshareEnabled&&t.screens)return t.screens[t.thumbnailIndex||0]}),Ee=Object(v.e)(function(e){return e.peers.reacjis}),we=Object(v.e)(function(e,t){return Object(I.Q)(e,re(e,t).userId)});function Se(e,t){var n=t.isScreenshareEnabled;if(e.lastRemoteScreensharePeerId!==t.id||n)return n&&t.id||e.lastRemoteScreensharePeerId}var Ie=Object(v.f)("Set the screen sharing of a peer. If screen sharing is turned on, turn off our screen share",function(e,t,n){var a=n.id,r=n.isScreenshareEnabled;e(V({id:a,isScreenshareEnabled:r})),r&&e(U({id:"self",isScreenshareEnabled:!1}))}),Te=Object(v.f)("Invite new members to an existing call",function(e,t,n){var a=t();Object(k.b)(a.activeCall.id,"Must have an active call to send an invite")&&(n.forEach(function(t){return e(H({userId:t}))}),e(A({id:a.activeCall.id,invitedUserIds:n})))})},"/6P7":function(e,t,n){},"/7Bh":function(e,t,n){},"/9ln":function(e,t,n){"use strict";var a=n("aK/h"),r=n("QbLZ"),i=n.n(r),o=n("4zXV"),s=n("om+M"),l=n("hOQf"),c=Object(s.a)("Deletes a message",function(e,t,n){var a=n.channelId,r=n.ts,s=n.broadcastDelete,u=n.attempts,d=void 0===u?0:u,p=n.reason;if(Object(l.qb)(r))return Promise.reject(new Error("message_not_found"));var h={channel:a,ts:r};return s&&(h.broadcast_delete=!0),e(Object(o.a)({method:"chat.delete",args:h,reason:p})).catch(function(t){var a=t.data,r=void 0===a?{}:a;if("message_not_found"===r.error&&d<10){return Promise.delay(175).then(function(){return e(c(i()({},n,{attempts:d+1})))})}return Promise.reject(new Error(r.error||"unknown_error"))})});c.propTypes={channelId:a.b.string,ts:a.b.string,broadcastDelete:a.b.bool,attempts:a.b.number,reason:a.b.string.isRequired};var u=c,d=Object(s.a)("Deletes a join/leave message rollup",function(e,t,n){var a={channel_id:n.channelId,first_message_ts:n.firstMessageTs,last_message_ts:n.lastMessageTs};return e(Object(o.a)({method:"chat.deleteBulkJoinLeave",args:a}))});d.propTypes={channelId:a.b.string,firstMessageTs:a.b.string,lastMessageTs:a.b.string};var p=d,h=n("XfeM"),m=n("clTI"),b=n("TcTh"),f=n("Iq6W"),_=n("smxp"),g=n("FLa3"),v=n("HO/Y"),y=n("MhQa"),k=Object(h.b)("Animate a message deletion as well as calling the delete API endpoint",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.ts,i=n.broadcastDelete,o=void 0!==i&&i,s=n.rollupTimestamps,c=t(),d=Object(_.a)(c,a,r),h=s&&s.length>1;if(!d)return Promise.resolve();if(h||Object(l.S)(d)||o||e(Object(g.a)({channelId:a,ts:r})),Object(l.qb)(r)||Object(l.bb)(d)){var k=Object(v.i)(c,"feature_react_threads");if(Object(l.jb)(d)&&!k){var O=Object(m.d)(c,a);Object(y.i)(O,d)}return Promise.resolve()}if(h){var j=s[0],C=s.pop();return e(p({channelId:a,firstMessageTs:j,lastMessageTs:C}))}return e(u({channelId:a,ts:r,broadcastDelete:o,reason:"animateAndDeleteMessageApi"})).then(function(){if(Object(v.i)(c,"feature_degraded_send")&&Object(l.jb)(d)&&!o){var e=Object(m.d)(c,a);Object(y.i)(e,d)}}).catch(function(t){throw"message_not_found"!==t.message&&(e(Object(g.a)({channelId:a,ts:r,isDeleting:!1})),o?e(Object(f.l)({channelId:a,ts:r})):(e(Object(b.b)({channelId:a,timestamps:[r]})),e(Object(f.a)([d])))),t})});k.propTypes={channelId:a.b.string.isRequired,ts:a.b.string.isRequired,broadcastDelete:a.b.bool,rollupTimestamps:a.b.array};t.a=k},"/FWe":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),h=n("XHGt"),m=n("aK/h"),b=n("TSYQ"),f=n.n(b),_=n("ypl0"),g=(n("G59f"),m.b.node,m.b.string,m.b.oneOf(["light","dense"]),{className:void 0,children:void 0,theme:"light"}),v=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.children;if("light"===e.theme)return t;var n=f()("c-message_kit__indent",this.props.className);return p.a.createElement("div",{className:n},t)}}]),t}(d.Component);v.displayName="MessageIndent",v.defaultProps=g,t.a=Object(h.b)(function(e){return{theme:Object(_.a)(e)}})(v)},"/Qam":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),h=n.n(p),m=n("XHGt"),b=n("aK/h"),f=n("nNoG"),_=n("MREy"),g=n("rz65"),v=n("4Twu"),y=n("llxT"),k=n("od5y"),O=n("RAhH"),j=n("HO/Y"),C=n("VjHM"),E=n("13mM"),w=n("AfrZ"),S=n("6kok"),I=n("/LVU"),T=n("qN/r"),N=n("jcvV"),R=n("dohy"),A=n("mqzt"),P=n("negh"),M=n("kOzZ"),D=new f.b("do_not_disturb"),x=(b.b.func.isRequired,b.b.object,b.b.object,b.b.func,b.b.func,b.b.func,b.b.object,b.b.func,b.b.bool,b.b.bool,b.b.bool.isRequired,b.b.bool.isRequired,{currentChannel:{},menuProps:{},openDndDialog:d.a,openChannelNotificationPrefsModal:d.a,openPrefsModal:d.a,clogger:{track:d.a},setUserPrefByApi:d.a,showNotificationScheduleNewBadge:!1,featureGranularDnd:!1}),L=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClickDoNotDisturbSchedule=n.onClickDoNotDisturbSchedule.bind(n),n.onClickNotificationPreferences=n.onClickNotificationPreferences.bind(n),n}return u()(t,e),o()(t,[{key:"onClickDoNotDisturbSchedule",value:function(){var e=this.props,t=e.featureGranularDnd,n=e.showNotificationScheduleNewBadge;this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"}),t&&n&&this.props.setUserPrefByApi({pref:"dnd_notification_schedule_new_badge_seen",value:!0})}},{key:"onClickNotificationPreferences",value:function(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"renderSettingsMenuItem",value:function(){var e=this,t=this.props.currentChannel;if(!t.id||Object(S.eb)(t))return null;var n=h.a.createElement(v.a,{channelId:t.id,iconProps:{inherit:!0,align:"baseline"},inline:!0}),a=D.rt("Settings for {name}\u2026",{name:h.a.createElement("strong",null,n),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return h.a.createElement(_.b,{label:a,onSelected:function(){return e.props.openChannelNotificationPrefsModal({channelId:t.id})}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.menuProps,a=t.clogger,r=t.featureGranularDnd,i=t.showNotificationScheduleNewBadge,o=t.featureOfflineMode,s=t.isOffline,l=void 0,c=void 0,u=void 0;return r&&(l=D.t("Do Not Disturb allows you to pause your Slack notifications"),c=h.a.createElement("span",{className:"p-dnd_menu__new_pill"},D.t("NEW")),u=i?h.a.createElement("span",null,D.t("Notification schedule\u2026")," ",c):D.t("Notification schedule\u2026")),h.a.createElement(_.f,n,h.a.createElement(_.c,{label:r?D.t("Do Not Disturb"):D.t("Pause notifications")}),r&&h.a.createElement(O.c,{tip:l,position:"right",zIndex:"above_fs"},h.a.createElement(y.a,{className:"p-dnd_menu_question_button"},h.a.createElement(k.b,{type:"question-circle"}))),h.a.createElement(_.b,{type:g.a.subheaderChild,label:D.t("30 minutes"),onSelected:function(){e.props.snoozeNotifications({duration:30,reason:"DndDisabledMenu:30m"}),a.track(P.k.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:30,dnd_preset:P.h.DURATION_30_MINUTES,dnd_snooze_type:P.i.SNOOZE_INITIAL})},"data-qa":"snooze_btn_30",disabled:o&&s,showOfflineIcon:o&&s}),h.a.createElement(_.b,{type:g.a.subheaderChild,label:D.t("1 hour"),onSelected:function(){e.props.snoozeNotifications({duration:60,reason:"DndDisabledMenu:1hr"}),a.track(P.k.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:60,dnd_preset:P.h.DURATION_1_HOUR,dnd_snooze_type:P.i.SNOOZE_INITIAL})},"data-qa":"snooze_btn_60",disabled:o&&s,showOfflineIcon:o&&s}),h.a.createElement(_.b,{type:g.a.subheaderChild,label:D.t("2 hours"),onSelected:function(){e.props.snoozeNotifications({duration:120,reason:"DndDisabledMenu:2hr"}),a.track(P.k.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:120,dnd_preset:P.h.DURATION_2_HOURS,dnd_snooze_type:P.i.SNOOZE_INITIAL})},"data-qa":"snooze_btn_120",disabled:o&&s,showOfflineIcon:o&&s}),h.a.createElement(_.b,{type:g.a.subheaderChild,label:D.t("4 hours"),onSelected:function(){e.props.snoozeNotifications({duration:240,reason:"DndDisabledMenu:4hr"}),a.track(P.k.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:240,dnd_preset:P.h.DURATION_4_HOURS,dnd_snooze_type:P.i.SNOOZE_INITIAL})},"data-qa":"snooze_btn_240",disabled:o&&s,showOfflineIcon:o&&s}),h.a.createElement(_.b,{type:g.a.subheaderChild,label:D.t("Until tomorrow"),onSelected:function(){var t=Object(A.d)();e.props.snoozeNotifications({duration:t,reason:"DndDisabledMenu:tomorrow"}),a.track(P.k.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:P.h.DURATION_TOMORROW,dnd_snooze_type:P.i.SNOOZE_INITIAL})},"data-qa":"snooze_btn_tomorrow",disabled:o&&s,showOfflineIcon:o&&s}),h.a.createElement(_.b,{type:g.a.subheaderChild,label:D.t("Until next week"),onSelected:function(){var t=Object(A.c)();e.props.snoozeNotifications({duration:t,reason:"DndDisabledMenu:week"}),a.track(P.k.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:P.h.DURATION_NEXT_WEEK,dnd_snooze_type:P.i.SNOOZE_INITIAL})},"data-qa":"snooze_btn_next_week",disabled:o&&s,showOfflineIcon:o&&s}),h.a.createElement(_.b,{type:g.a.subheaderChild,label:D.t("Custom\u2026"),onSelected:function(){e.props.openDndDialog(),a.track(P.k.DND_OPEN_CUSTOM_SNOOZE_DIALOG)},"data-qa":"snooze_btn_custom",disabled:o&&s,showOfflineIcon:o&&s}),h.a.createElement(_.d,null),h.a.createElement(_.b,{label:r?u:D.t("Do Not Disturb schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule}),!r&&h.a.createElement(_.d,null),!r&&this.renderSettingsMenuItem(),!r&&h.a.createElement(_.b,{label:D.t("Your notification preferences\u2026"),onSelected:this.onClickNotificationPreferences}))}}]),t}(p.PureComponent);L.displayName="DndDisabledMenu",L.defaultProps=x;t.a=Object(m.b)(function(e){return{clogger:Object(M.a)({state:e}),featureGranularDnd:Object(j.i)(e,"feature_granular_dnd"),showNotificationScheduleNewBadge:!Object(C.h)(e,"dnd_notification_schedule_new_badge_seen"),featureOfflineMode:Object(j.i)(e,"feature_offline_mode"),isOffline:!Object(E.c)(e)}},function(e){return{snoozeNotifications:function(t){return e(Object(I.e)(t))},openDndDialog:function(){return e(Object(R.a)())},openChannelNotificationPrefsModal:function(t){return e(Object(N.a)(t))},setUserPrefByApi:function(t){return e(Object(w.f)(t))},openPrefsModal:function(t){return e(Object(T.a)(t))}}})(L)},"/VNe":function(e,t,n){},"/X+W":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("P1FA");function r(e){return Object(a.a)((e||"").trim().toLowerCase())}},"/e6G":function(e,t,n){},"/xs0":function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("m1cH"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),h=n("mRg0"),m=n.n(h),b=n("+Z1G"),f=n("qAkX"),_=n("kxpR"),g=n("aK/h"),v=n("XHGt"),y=n("RMmo"),k=n("uf9I"),O=n("nNoG"),j=n("lhZz"),C=n("yHhI"),E=n("LWrH"),w=(g.b.array.isRequired,g.b.string.isRequired,g.b.string,g.b.func.isRequired,g.b.object.isRequired,!1),S=function(e){function t(){return l()(this,t),p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.props.logger;w?e.error("More than one global key command handler was mounted"):this.initializeKeyCommands()}},{key:"componentDidUpdate",value:function(e){e.keyboardLocale!==this.props.keyboardLocale&&this.keyCommands&&(this.destroyKeyCommands(),this.initializeKeyCommands())}},{key:"componentWillUnmount",value:function(){this.keyCommands&&this.destroyKeyCommands()}},{key:"getFilterFunctionWithInjectedState",value:function(e){var t=this;return function(n){return e(Object(j.getStateByTeamId)(t.props.teamId),t.getMetaDataPayload(n))}}},{key:"getMetaDataPayload",value:function(e){return{event:e,keyCode:Object(O.f)(e.keyCode,{kb:this.props.keyboardLocale,useReverseMap:!0})}}},{key:"getLocalizedKeys",value:function(e){var t=this.props.keyboardLocale;return e.map(function(e){var n=e.split("+"),a=Object(O.g)(Object(f.a)(n),{kb:t});return[].concat(o()(Object(b.a)(n,1)),[a]).join("+")})}},{key:"initializeKeyCommands",value:function(){var e=this.props.commands;this.keyCommands=new y.a(window),this.keyCommands.bindAll(this.connectCommandsWithRedux(e)),w=!0}},{key:"destroyKeyCommands",value:function(){this.keyCommands.reset(),this.keyCommands=null,w=!1}},{key:"connectCommandsWithRedux",value:function(e){var t=this;return e.map(function(e){return r()({},e,{keys:t.getLocalizedKeys(e.keys),handler:function(n){t.props.dispatch(e.handler(t.getMetaDataPayload(n)))},filter:e.ignoreIf?t.getFilterFunctionWithInjectedState(e.ignoreIf):void 0})})}},{key:"render",value:function(){return!1}}]),t}(_.PureComponent);S.displayName="GlobalKeyCommandHandler",S.defaultProps={keyboardLocale:null};var I=Object(v.b)(function(e){return{teamId:Object(k.b)(e),logger:Object(C.a)(e)}})(S);t.a=Object(E.a)(I)},"05X0":function(e,t,n){},"0BC7":function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("m1cH"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),h=n("mRg0"),m=n.n(h),b=n("xWuZ"),f=n("lE2N"),_=n("7EGn"),g=n("kxpR"),v=n.n(g),y=n("aK/h"),k=n("XHGt"),O=n("D4L/"),j=n("DtX9"),C=n("HO/Y"),E=n("KGMq"),w=n("5mKg"),S=n("nNoG"),I=n("Smdl"),T=n("x4bP"),N=n("um7Q"),R=n("MREy"),A=new S.b("global_nav"),P=(y.b.object,y.b.arrayOf(y.b.shape({id:y.b.string,name:y.b.string,teams:y.b.arrayOf(y.b.object)})),y.b.arrayOf(y.b.shape({id:y.b.string,name:y.b.string,url:y.b.string})),y.b.string,y.b.string,y.b.string,y.b.bool,y.b.bool,y.b.func.isRequired,{menuProps:void 0,enterprises:[],others:[],currentEnterpriseId:void 0,currentUserId:void 0,signinURL:void 0,featureGlobalNav:!1,featureClassicNav:!1}),M=function(e){function t(e){l()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getTeamItem=n.getTeamItem.bind(n),n.getEnterpriseItems=n.getEnterpriseItems.bind(n),n.getOtherItems=n.getOtherItems.bind(n),n}return m()(t,e),u()(t,[{key:"getTeamItem",value:function(e){var t=this.props,n=t.featureGlobalNav,a=t.featureClassicNav;if(!n&&!a)return null;if(!e.url)return null;var r=Object(I.a)()?Object(w.o)({domain:"app"},"client/"+e.id):e.url+("/"===e.url.substr(-1)?"messages":"/messages"),i=e.icons&&(e.icons.image_44||e.icons.image_88);return{label:v.a.createElement(g.Fragment,null,v.a.createElement("div",{className:"p-global_nav__top_switch_workspaces_icon",style:{backgroundImage:"url("+i+")"}}),v.a.createElement("strong",null,e.name)),href:r,target:"_self",showLinkIndicatorIcon:!1}}},{key:"getEnterpriseItems",value:function(){var e=this,t=this.props,n=t.enterprises,a=t.currentEnterpriseId,r=t.currentUserId,i=t.featureGlobalNav,s=t.featureClassicNav;return i||s?Object(b.a)(n.map(function(t){var n=t.teams.map(e.getTeamItem),i=t.id===a&&t.overLimit?{label:A.rt("See all <strong>{enterpriseName}</strong> workspaces",{enterpriseName:t.name}),click:function(){return e.props.openFindMoreWorkspacesModal(r)}}:null;return[{type:"header",label:t.name}].concat(o()(n),[i,{type:"separator"}])})):[]}},{key:"getOtherItems",value:function(){var e=this,t=this.props,n=t.others,a=t.featureGlobalNav,r=t.featureClassicNav;if(!a&&!r)return[];if(!n||!n.length)return[];var i=n.map(function(t){return e.getTeamItem(t)});return[{type:"header",label:A.t("Your other workspaces")}].concat(o()(i))}},{key:"render",value:function(){var e=this.props,t=e.signinURL,n=e.featureGlobalNav,a=e.featureClassicNav,i=e.menuProps;if(!n&&!a)return null;var s=t&&[{type:"separator"},{label:A.t("Sign in to another workspace"),href:t}],l=[].concat(o()(this.getEnterpriseItems()),o()(this.getOtherItems()),o()(s||[]));return v.a.createElement(R.a,r()({},i,{template:l,stripTerminalSeparators:!0}))}}]),t}(g.Component);M.displayName="SwitchWorkspacesSubmenu",M.defaultProps=P;var D={openFindMoreWorkspacesModal:function(){return E.a.apply(void 0,arguments)}};t.a=Object(k.b)(function(e){var t=function(e){var t=Object(C.f)(e).map(function(e){return{id:e.team_id,enterpriseId:e.enterprise_id,url:e.team_url,name:e.team_name,enterpriseName:e.enterprise_name,icons:e.team_icon}});if(!Object(T.a)()){var n=Object(j.b)(e);(Object(_.a)(n,"enterprise_user.teams")||[]).map(function(t){return Object(O.i)(e,t)}).forEach(function(a){t.push({id:a.id,enterpriseId:Object(_.a)(n,"enterprise_user.enterprise_id")||a.enterprise_id,url:Object(N.b)(e,a.domain),name:Object(w.e)(a),enterpriseName:Object(_.a)(n,"enterprise_user.enterprise_name")||a.enterprise_name,icons:a.icon,isUnknown:Object(w.L)(a)})})}var a=Object(O.d)(e),r=a.enterprise_id;t=t.sort(function(e,t){if(r){if(e.enterpriseId===r&&t.enterpriseId!==r)return-1;if(t.enterpriseId===r&&e.enterpriseId!==r)return 1}return!e.isUnknown&&t.isUnknown?-1:!t.isUnknown&&e.isUnknown?1:Object(S.o)(e.name,t.name)});var i=a.id;return t=t.filter(function(e){return e.id!==i}),Object(f.a)(t,"id")}(e);return{enterprises:function(e){var t={};return e.filter(function(e){return e.enterpriseId}).forEach(function(e){var n=e.enterpriseId;t[n]?t[n].teams.length<3?t[n].teams.push(e):t[n].overLimit=!0:t[n]={id:n,name:e.enterpriseName,teams:[e]}}),Object.values(t)}(t),others:t.filter(function(e){return!e.enterpriseId}),currentEnterpriseId:Object(O.d)(e).enterprise_id,currentUserId:Object(C.b)(e),signinURL:Object(C.d)(e,"signin_url"),featureGlobalNav:Object(C.i)(e,"feature_global_nav"),featureClassicNav:Object(C.i)(e,"feature_classic_nav")}},D)(M)},"0Eo7":function(e,t,n){},"0Mct":function(e,t,n){"use strict";var a=n("XfeM"),r=n("cTgs"),i=n("5tH5"),o=Object(a.b)("Switches to the All Threads view",function(e){e(Object(r.a)({id:i.a.allThreads}))});t.a=o},"0Tme":function(e,t,n){e.exports=n.p+"confirm_delivery-99baed3.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},"0agN":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),h=n.n(p),m=n("aK/h"),b=n("tn36"),f=n("XHGt"),_=n("HO/Y"),g=n("x3CK"),v=n("rWF5"),y=n("nNoG"),k=n("VjHM"),O=n("Zr7G"),j=n("Smdl"),C=n("LWrH"),E=n("x4bP"),w=n("XfeM"),S=n("vVZ5"),I=n("eqKo"),T=n("d24p"),N=n("QOdn"),R=n("qN/r"),A=n("0Mct"),P=n("Nc5J"),M=n("ROZo"),D=Object(M.b)("TS.ui.react_keyboard_shortcuts.executeShortcut",function(){return null}),x=Object(w.b)("Run a keyboard shortcut without the keyboard",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).id,a=t();"browse_dms"===n&&Object(_.i)(a,"feature_sonic_dm_browser")?e(Object(T.a)()):"open_preferences"!==n?"open_all_threads"===n&&Object(_.i)(a,"feature_react_all_threads")?e(Object(A.a)()):"open_all_unreads"===n&&Object(_.i)(a,"feature_react_all_unreads")?e(Object(P.a)()):Object(E.a)()?"set_a_status"===n?e(Object(I.a)()):"quick_switcher"===n?e(Object(S.a)()):"open_all_unreads"===n?e(Object(P.a)()):"browse_channels"===n&&e(Object(N.a)()):D(n):e(Object(R.a)())});x.propTypes={id:m.b.oneOf(["open_all_unreads","set_a_status","browse_dms","browse_channels","quick_switcher","open_preferences","open_all_threads"]).isRequired};var L=x,F=n("CpTu"),B=n("HI9p"),q=n("g5qt"),U=new y.b("shortcuts_flexpane");var H=n("s/YD"),G=n("m1cH"),W=n.n(G),K=n("QbLZ"),V=n.n(K),z=n("NFsq"),Y=n("uPpK"),Q=n("TSYQ"),J=n.n(Q),X=n("oUPN"),Z=n("fp5s"),$=n("RAhH"),ee=n("od5y"),te=n("ynxK"),ne=(n("/e6G"),n("OiOg"),m.b.oneOfType([m.b.string,m.b.object]),m.b.array,m.b.array,m.b.array,m.b.bool,m.b.string,m.b.string,m.b.func,m.b.object,{title:"Basic",keys:[],keysLinux:null,keysWin:null,hasInfoButton:!1,infoButtonMessage:"",id:null,executeKeyboardShortcut:d.a,telemeter:{count:d.a}}),ae={"\u2191":"arrow_up_medium","\u2193":"arrow_down_medium","\u2190":"arrow_left_medium","\u2192":"arrow_right_medium"},re=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"getKeys",value:function(){var e=this.props,t=e.keys,n=e.keysWin,a=e.keysLinux;return null!=n&&Object(v.B)()?n:null!=a&&Object(v.o)()?a:t}},{key:"execShortcut",value:function(e){this.props.executeKeyboardShortcut({id:e}),this.props.telemeter.count("clicked_keyboard_shortcut")}},{key:"renderKeyLabel",value:function(e){var t=Object(v.B)()||Object(v.o)();return ae[e]?h.a.createElement(ee.a,{type:ae[e]}):"Cmd"!==e&&"Control"!==e||!t?"Option"===e&&t?"Alt":"CtrlAlternative"===e?"Ctrl":"ShiftAlternative"===e?"Shift":e:"Ctrl"}},{key:"renderKeys",value:function(){var e=this;return this.getKeys().map(function(t){var n=t.split("key_")[1];if(!n)return t;var a=!!ae[n],r=J()({"p-shortcuts_flexpane__arrow_key":a,"c-keyboard_key":!0});return h.a.createElement("div",{key:e.props.title+" "+t+" "+Object(Z.a)(),className:r},e.renderKeyLabel(n))})}},{key:"renderInfoButton",value:function(){return h.a.createElement($.c,{tip:this.props.infoButtonMessage,delay:$.b},h.a.createElement(ee.a,{align:"top",className:"p-shortcuts_flexpane__tip",type:"question_circle"}))}},{key:"renderTitle",value:function(){var e=this,t=this.props.hasInfoButton?this.renderInfoButton():null,n=this.props.title;return null==this.props.id?h.a.createElement(p.Fragment,null,n,t):h.a.createElement(te.a,{type:"button",onClick:function(){return e.execShortcut(e.props.id)}},n,t)}},{key:"render",value:function(){var e=J()("p-shortcuts_flexpane__shortcut",{"p-shortcuts_flexpane__shortcut_hoverable":null!==this.props.id});return h.a.createElement("div",{className:e},h.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title"},this.renderTitle()),h.a.createElement("span",{className:"p-shortcuts_flexpane__shortcut_keys"},this.renderKeys()))}}]),t}(h.a.PureComponent);re.displayName="Shortcut",re.defaultProps=ne;var ie=re,oe=(n("fHJC"),new y.b("shortcuts_flexpane")),se=(m.b.arrayOf(m.b.object.isRequired),m.b.string,m.b.bool,m.b.func,m.b.object,m.b.func,{items:[],keyboardLocale:null,enableUnreadView:!1,executeKeyboardShortcut:d.a,telemeter:{count:d.a},onItemTabWithin:d.a}),le=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(b.a)(n,["renderItem","isFocusableItem","focus","includeShortcut"]),n.list=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"getItemKeys",value:function(){return this.rows.map(function(e){return e.key})}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"isFocusableItem",value:function(e){var t=e.index,n=this.rows[t];return n&&"shortcut"===n.type}},{key:"includeShortcut",value:function(e){var t=Object(v.i)(),n=Object(v.g)(),a=this.props,r=a.keyboardLocale,i=a.enableUnreadView;if(e.isSsbOnly&&!q.V)return!1;var o=e.browserBlackList||[];return!(Object(z.a)(o,n)||Object(z.a)(o,t))&&(!Object(z.a)(e.localeBlackList,r)&&!("open_all_unreads"===e.id&&!i))}},{key:"createRows",value:function(){var e=this;return this.props.items.reduce(function(t,n,a){var r=n.shortcuts.filter(e.includeShortcut).map(function(e,t){return V()({type:"shortcut",key:"shortcut-"+a+"-"+t},e)});return[].concat(W()(t),[{type:"header",key:"header-"+a,title:n.title,subtitle:n.subtitle}],W()(r))},[])}},{key:"renderItem",value:function(e){var t=this.rows[e];if(!t||!t.type)return null;var n=this.props,a=n.executeKeyboardShortcut,r=n.telemeter;if("shortcut"===t.type)return h.a.createElement(ie,{title:t.title,keys:t.keys,keysLinux:t.keysLinux,keysWin:t.keysWin,hasInfoButton:t.hasInfoButton,infoButtonMessage:t.infoButtonMessage,id:t.id,executeKeyboardShortcut:a,telemeter:r});var i=J()("p-shortcuts_flexpane__shortcut_heading",{"p-shortcuts_flexpane__shortcut_heading_first":0===e});return"header"===t.type?h.a.createElement(p.Fragment,null,h.a.createElement("h3",{className:i},t.title),t.subtitle&&h.a.createElement("h4",{className:"p-shortcuts_flexpane__shortcut_sub_heading"},t.subtitle)):null}},{key:"render",value:function(){var e=this;this.rows=this.createRows();var t=this.getItemKeys();return h.a.createElement(Y.a,null,function(n){var a=n.width,r=n.height;return h.a.createElement(X.a,{className:"p-shortcuts_flexpane__list",ref:e.list,width:a,height:r,keys:t,rowRenderer:e.renderItem,animateOnScroll:!1,ariaLabel:oe.t("Keyboard Shortcuts"),isFocusableItem:e.isFocusableItem,onItemTabWithin:e.props.onItemTabWithin})})}}]),t}(p.PureComponent);le.displayName="KeyboardShortcutsList",le.defaultProps=se;var ce=le;n("445Q");n.d(t,"a",function(){return he});m.b.string,m.b.arrayOf(m.b.shape({title:m.b.string,shortcuts:m.b.arrayOf(m.b.shape({os:m.b.oneOf(["windows","mac","linux"]),browser:m.b.string,title:m.b.oneOfType([m.b.string,m.b.object]),keys:m.b.array,keysLinux:m.b.array,keysWin:m.b.array,hasInfoButton:m.b.bool,infoButtonMessage:m.b.string,id:m.b.string,isSsbOnly:m.b.bool,browserBlackList:m.b.array}))})),m.b.bool,m.b.bool,m.b.func,m.b.object;var ue={sections:void 0,keyboardLocale:null,featureReactAllUnreads:!1,enableUnreadView:!1,executeKeyboardShortcut:d.a,telemeter:{count:d.a}},de=new y.b("shortcuts_flexpane"),pe=Object(v.i)(),he=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(b.a)(n,["renderBody","renderSubtitle","focus","onItemTabWithin"]),n.list=h.a.createRef(),n.flexpane=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"renderSubtitle",value:function(){var e="mac"===pe?de.t("Cmd"):de.t("Ctrl"),t=Object(g.c)("/",{kb:this.props.keyboardLocale});return de.rt('Press <span className="c-keyboard_key c-keyboard_key--slim">{headerCmdButton}</span><span className="c-keyboard_key c-keyboard_key--slim">{headerSlashButton}</span> to toggle this panel.',{headerCmdButton:e,headerSlashButton:t})}},{key:"renderBody",value:function(){var e=this.props,t=e.keyboardLocale,n=e.featureReactAllUnreads,a=this.props.sections||function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).featureReactAllUnreads,n=[{title:U.t("Basics"),id:"basics",shortcuts:[{title:U.t("Quick Switcher"),keys:q.V?["key_Cmd","key_K","  or  ","key_T"]:["key_Cmd","key_K"],hasInfoButton:!0,infoButtonMessage:U.t("Jump to another conversation by just typing its name"),id:"quick_switcher"},{title:U.t("Browse DMs"),keys:["key_Cmd","key_Shift","key_K"],id:"browse_dms"},{title:U.t("Browse channels",{ns:"channel_browser"}),keys:["key_Cmd","key_Shift","key_L"],id:"browse_channels"},{title:U.t("Edit last message (in empty text input)"),keys:["key_\u2191"]},{title:U.t("Back in history"),keys:["key_Cmd","key_["],keysWin:["key_Alt","key_\u2190"],keysLinux:["key_Alt","key_\u2190"],localeBlackList:["de","es","fr","ja"]},{title:U.t("Forward in history"),keys:["key_Cmd","key_]"],keysWin:["key_Alt","key_\u2192"],keysLinux:["key_Alt","key_\u2192"],localeBlackList:["de","es","fr","ja"]},{title:U.t("All Unreads"),keys:["key_Cmd","key_Shift","key_A"],id:"open_all_unreads"},{title:U.t("Threads"),keys:["key_Cmd","key_Shift","key_T"],id:"open_all_threads",isSsbOnly:!0},{title:U.t("Search"),keys:["key_Cmd","key_F"],isSsbOnly:!0},{title:U.t("Dismiss dialogs"),keys:["key_Esc"]}]},{title:U.t("Navigation"),id:"navigation",shortcuts:[{title:U.t("Move focus to the next element"),keys:["key_Tab"]},{title:U.t("Move focus to the previous element"),keys:["key_Shift","key_Tab"]},{title:U.t("Move focus through messages"),keys:["key_\u2191","  or  ","key_\u2193"]},{title:U.t("Move focus to the next section"),keys:q.V?["key_F6"]:["key_Cmd","key_F6"]},{title:U.t("Move focus to the previous section"),keys:q.V?["key_Shift","key_F6"]:["key_Cmd","key_Shift","key_F6"]},{title:U.t('Take action or "click" on selected element'),keys:["key_Enter"]},{title:U.t("Increase text size"),keys:["key_Cmd","key_+"]},{title:U.t("Decrease text size"),keys:["key_Cmd","key_-"]},{title:U.t("Scroll up"),keys:["key_fn","key_\u2191","  or  ","key_Page Up"]},{title:U.t("Scroll down"),keys:["key_fn","key_\u2193","  or  ","key_Page Down"]},{title:U.t("Scroll to previous day"),keys:["key_Shift","key_Page Up"]},{title:U.t("Scroll to next day"),keys:["key_Shift","key_Page Down"]},{title:U.t("Preferences"),keys:["key_Cmd","key_,"],id:"open_preferences",isSsbOnly:!0,browserBlackList:["windows","linux"]},{title:U.t("Open or close right pane"),keys:["key_Cmd","key_"+Object(g.c)(".",{kb:e})]},{title:U.t("Channel Info"),keys:["key_Cmd","key_Shift","key_I"],isSsbOnly:!0},{title:U.t("Activity"),keys:["key_Cmd","key_Shift","key_M"],browserBlackList:["chrome"]},{title:U.t("Directory"),keys:["key_Cmd","key_Shift","key_E"],browserBlackList:["firefox"]},{title:U.t("Starred items"),keys:["key_Cmd","key_Shift","key_S"]},{title:U.t("Toggle full screen"),keys:["key_Ctrl","key_Cmd","key_F"],keysWin:["key_Ctrl","key_Shift","key_F"],keysLinux:["key_Ctrl","key_Shift","key_F"]}]},{title:U.t("Messaging"),id:"messaging",shortcuts:[{title:U.t("Select text to beginning of current line"),keys:["key_Shift","key_\u2191"]},{title:U.t("Select text to end of current line"),keys:["key_Shift","key_\u2193"]},{title:U.t("Start a new line"),keys:["key_Shift","key_Enter"]},{title:U.t("React to last message (or message with focus)"),keys:["key_Cmd","key_Shift","key_"+Object(g.c)("\\",{kb:e})]},{title:U.t("Autocomplete @username"),keys:["key_@"]},{title:U.t("Autocomplete channel"),keys:["key_#"]},{title:U.t("Autocomplete emoji"),keys:["key_:"]}]},{title:U.t("Mark Messages Read and Unread"),shortcuts:[{title:U.t("Mark all messages in current channel as read"),keys:["key_Esc"]},{title:U.t("Mark all messages as read"),keys:["key_Shift","key_Esc"]},{title:U.t("Mark a message as unread"),keys:["key_Option",U.t("  and click message")],keysWin:["key_Alt",U.t("  and click message")],keysLinux:["key_Alt",U.t("  and click message")]}]},{title:U.t("Channels & Direct Messages"),shortcuts:[{title:U.t("Previous channel or DM"),keys:["key_Option","key_\u2191"]},{title:U.t("Next channel or DM"),keys:["key_Option","key_\u2193"]},{title:U.t("Previous unread channel or DM"),keys:["key_Option","key_Shift","key_\u2191"]},{title:U.t("Next unread channel or DM"),keys:["key_Option","key_Shift","key_\u2193"]}]},{title:U.t("All Unreads"),id:"all_unreads",shortcuts:[{title:t?U.t("Expand channel"):U.t("Next channel"),keys:["key_\u2192"]},{title:t?U.t("Collapse channel"):U.t("Previous channel"),keys:["key_\u2190"]},{title:U.t("Mark channel as read"),keys:t?["key_Esc"]:["key_R"]}]},{title:U.t("Files and Snippets"),shortcuts:[{title:U.t("Upload a file"),keys:["key_Cmd","key_U"]},{title:U.t("Create a snippet"),keys:["key_Cmd","key_Shift","key_Enter"]}]},{title:U.t("Calls"),shortcuts:[{title:U.t("Toggle mute"),keys:["key_M"]},{title:U.t("Toggle video"),keys:["key_V"]},{title:U.t("Invite list"),keys:["key_+",U.t("  or  "),"key_A"]},{title:U.t("Emoji reactions"),keys:["key_E",U.t("  then 1-9")]}]},{title:U.t("Workspace Switching"),id:"workspaces",shortcuts:[{title:U.t("Next workspace"),keys:["key_Cmd","key_Shift","key_["],keysWin:["key_Ctrl","key_Tab"]},{title:U.t("Previous workspace"),keys:["key_Cmd","key_Shift","key_]"],keysWin:["key_Ctrl","key_Shift","key_Tab"]},{title:U.t("A specific workspace"),keys:["key_Cmd",U.t("  and 1-9")]}]}],a=n[Object(B.a)(n,["id","basics"])].shortcuts,r=n[Object(B.a)(n,["id","navigation"])].shortcuts,i=n[Object(B.a)(n,["id","messaging"])].shortcuts;if(q.V&&r.push({title:U.t("Jump to unread messages"),keys:["key_Cmd","key_J"]}),i.push({title:U.t("Bold text"),keys:["key_Cmd","key_B"]}),i.push({title:U.t("Italic text"),keys:["key_Cmd","key_I"]}),i.push({title:U.t("Strikethrough text"),keys:["key_Cmd","key_Shift","key_X"]}),i.push({title:U.t("Format text as code"),keys:["key_Cmd","key_Shift","key_C"]}),q.V&&!Object(v.v)("3.0.0")||(i.push({title:U.t("Format selection as bullet list"),keys:["key_Cmd","key_Shift","key_8"]}),i.push({title:U.t("Format selection as numbered list"),keys:["key_Cmd","key_Shift","key_7"]})),i.push({title:U.t("Format selection as quote"),keys:["key_Cmd","key_Shift","key_>"]}),a.push({title:U.t("Set a status"),keys:["key_Cmd","key_Shift","key_Y"],id:"set_a_status"}),t){var o=Object(F.a)(n,{id:"all_unreads"});o&&(o.shortcuts.push({title:U.t("Previous channel"),keys:["key_Shift","key_Page Up"]}),o.shortcuts.push({title:U.t("Next channel"),keys:["key_Shift","key_Page Down"]}))}return n}(t,{featureReactAllUnreads:n});return h.a.createElement(ce,{ref:this.list,items:a,keyboardLocale:this.props.keyboardLocale,enableUnreadView:this.props.enableUnreadView,executeKeyboardShortcut:this.props.executeKeyboardShortcut,telemeter:this.props.telemeter,onItemTabWithin:this.onItemTabWithin})}},{key:"render",value:function(){var e=de.t("Keyboard Shortcuts");return h.a.createElement(H.b,{ref:this.flexpane,focus:this.focus,renderSubtitle:this.renderSubtitle,renderBody:this.renderBody,title:e,kbNavOrder:Object(j.a)()?void 0:4.6,viewId:"shortcuts"})}}]),t}(h.a.PureComponent);he.displayName="KeyboardShortcutsFlexpane",he.defaultProps=ue;var me={executeKeyboardShortcut:function(){return L.apply(void 0,arguments)}},be=Object(f.b)(function(e){return{featureReactAllUnreads:Object(_.i)(e,"feature_react_all_unreads"),enableUnreadView:Object(k.h)(e,"enable_unread_view"),telemeter:Object(O.c)({state:e})}},me)(he);t.b=Object(C.a)(be)},"0dCl":function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return Q});var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),h=n.n(p),m=n("Qaea"),b=n.n(m),f=n("9rZX"),_=n.n(f),g=n("7B0+"),v=n("aK/h"),y=n("TSYQ"),k=n.n(y),O=n("XHGt"),j=n("lhZz"),C=n("yHhI"),E=n("+Lv6"),w=n("KQjq"),S=n("BDy0"),I=n("mNhP"),T=n("Z7Ay"),N=n("iPNN"),R=n("4lvZ"),A=n("t1Oe"),P=n("jfx7"),M=n("p9qW"),D=n("9/DQ"),x=n("L6kU"),L=n("Gogr"),F=n("yw6X"),B=n("R//h"),q=n("7R01"),U=n("fj0Z"),H=n("DEaQ"),G=n("xRgT"),W=n("lV17"),K=(n("ztz9"),v.b.string,v.b.number,v.b.object,v.b.func,v.b.func,v.b.func,v.b.bool,v.b.bool,v.b.bool,v.b.bool,v.b.bool,v.b.bool,{teamId:"",numTeams:0,teamStore:null,handleWindowFocusEvent:d.a,handleWindowUnloadingEvent:d.a,handleWindowMouseDownEvent:d.a,isScreenReaderEnabled:!1,isCustomTitlebarShown:!1,workspaceFailedToBoot:!1,workspaceIsMigrating:!1,workspaceIsAccessLimited:!1,willNavigateToUnbootedWorkspace:!1}),V=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showTeamSidebar:Object(M.a)({numTeams:n.props.numTeams}),isMockingTeamSwitch:!1},Object(T.a)("mockSwitchTeams",function(){n.setState(function(){return{isMockingTeamSwitch:!0}}),setTimeout(function(){n.setState(function(){return{isMockingTeamSwitch:!1}})},500)}),n.signalBootToDesktop=n.signalBootToDesktop.bind(n),n.handleWindowFocus=n.handleWindowFocus.bind(n),n.handleWindowBlur=n.handleWindowBlur.bind(n),n.handleWindowBeforeUnload=n.handleWindowBeforeUnload.bind(n),n.handleWindowDragOver=n.handleWindowDragOver.bind(n),n.handleWindowDrop=n.handleWindowDrop.bind(n),n.handleWindowMouseDown=n.handleWindowMouseDown.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){window.addEventListener("focus",this.handleWindowFocus),window.addEventListener("blur",this.handleWindowBlur),window.addEventListener("beforeunload",this.handleWindowBeforeUnload),window.addEventListener("dragover",this.handleWindowDragOver),window.addEventListener("drop",this.handleWindowDrop),window.addEventListener("mousedown",this.handleWindowMouseDown);var e=!!(document&&document.hasFocus&&document.hasFocus());this.props.handleWindowFocusEvent({isFocused:e}),requestAnimationFrame(this.signalBootToDesktop)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("focus",this.handleWindowFocus),window.removeEventListener("blur",this.handleWindowBlur),window.removeEventListener("beforeunload",this.handleWindowBeforeUnload),window.removeEventListener("dragover",this.handleWindowDragOver),window.removeEventListener("drop",this.handleWindowDrop),window.removeEventListener("mousedown",this.handleWindowMouseDown)}},{key:"signalBootToDesktop",value:function(){Object(j.dispatchForTeamId)(this.props.teamId,Object(N.a)())}},{key:"handleWindowFocus",value:function(){Object(C.b)().info("FOCUS-EVENT","Client window focused"),this.props.handleWindowFocusEvent({isFocused:!0})}},{key:"handleWindowBlur",value:function(){Object(C.b)().info("FOCUS-EVENT","Client window blurred"),this.props.handleWindowFocusEvent({isFocused:!1})}},{key:"handleWindowBeforeUnload",value:function(){Object(C.b)().info("WINDOW-UNLOADING","Client window is unloading"),this.props.handleWindowUnloadingEvent({isUnloading:!0})}},{key:"handleWindowDragOver",value:function(e){return e.preventDefault(),!1}},{key:"handleWindowDrop",value:function(e){return e.preventDefault(),!1}},{key:"handleWindowMouseDown",value:function(){this.props.handleWindowMouseDownEvent()}},{key:"renderMockSwitchTeamsDisplay",value:function(){return h.a.createElement("div",{style:{height:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center"}},h.a.createElement("h1",null,"Pretending to switch teams, will switch back shortly"))}},{key:"renderActiveMigrationView",value:function(){var e=this.props,t=e.teamId;if(!e.workspaceFailedToBoot)return null;var n=Object(L.d)(t,"name"),a=Object(L.d)(t,"enterprise_name");return h.a.createElement("span",{id:"migration_blocker_page__wrapper",className:"p-migration_blocker_page__wrapper"},h.a.createElement(F.a,{enterpriseName:a,teamName:n}))}},{key:"renderBootErrorView",value:function(){var e=this.props,t=e.workspaceFailedToBoot,n=e.workspaceIsAccessLimited;return t?h.a.createElement(U.a,{featureBootFallbackViewV1:x.a.feature_boot_fallback_view_v1,isAccessLimited:n,shouldRetry:!0}):null}},{key:"renderWorkspace",value:function(){var e=this.props,t=e.workspaceFailedToBoot;if(e.workspaceIsMigrating)return this.renderActiveMigrationView();if(t)return this.renderBootErrorView();return h.a.createElement(W.a,{teamId:this.props.teamId,renderSonicMenu:function(e){return h.a.createElement(H.a,{menuProps:e})}})}},{key:"renderMainContent",value:function(){var e=this.state.isMockingTeamSwitch,t=this.props.willNavigateToUnbootedWorkspace;return e?this.renderMockSwitchTeamsDisplay():t?h.a.createElement(P.a,null):this.renderWorkspace()}},{key:"render",value:function(){var e=this.props,t=e.teamId,n=e.teamStore,a=Object(j.getClientStoreInstance)(),r=this.state.showTeamSidebar?h.a.createElement(O.a,{store:a},h.a.createElement(G.a,{className:"p-client__team_sidebar",selectedTeamId:t})):null,i=k()("p-client",{"p-client--show-team-sidebar":this.state.showTeamSidebar,"p-client--custom-titlebar":this.props.isCustomTitlebarShown});return h.a.createElement(A.a,{isScreenReaderEnabled:this.props.isScreenReaderEnabled},h.a.createElement(O.a,{key:t,store:n},h.a.createElement(B.a,null,h.a.createElement(R.a,{store:n},h.a.createElement(q.a,null,h.a.createElement("div",{className:i},h.a.createElement(E.b,null,r,h.a.createElement(E.b,null,this.renderMainContent()))))))))}}]),t}(p.Component);V.displayName="Client",V.defaultProps=K;var z={handleWindowFocusEvent:function(){return I.a.apply(void 0,arguments)},handleWindowUnloadingEvent:function(){return I.c.apply(void 0,arguments)},handleWindowMouseDownEvent:function(){return I.b.apply(void 0,arguments)}},Y=Object(g.hot)(e)(Object(O.b)(function(e){var t=Object(w.i)(e),n=Object(w.j)(e),a=Object(j.getStoreInstanceByTeamId)(t),r=a&&a.getState();return{teamId:t,teamStore:a,numTeams:n,isScreenReaderEnabled:Object(S.b)(r),workspaceIsMigrating:Object(w.s)(e,t),workspaceIsAccessLimited:Object(w.q)(e,t),isCustomTitlebarShown:Object(D.i)(e),workspaceFailedToBoot:Object(w.o)(e,t),willNavigateToUnbootedWorkspace:!!Object(w.l)(e)}},z)(V));function Q(e,t){var n=Object(j.getClientStoreInstance)(),a=Object(w.i)(n.getState()),r=function(){b.a.render(h.a.createElement(O.a,{store:n},h.a.createElement(Y,null)),e,t)};Object(C.a)({teamId:a}).info("BOOT","("+a+") Mounting client"),r(),_.a.setAppElement(e),Object(T.a)("mountClient",function(){r()}),Object(T.a)("unmountClient",function(){b.a.unmountComponentAtNode(e)})}}).call(this,n("3UD+")(e))},"0gKA":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),h=n.n(p),m=n("aK/h"),b=n("XHGt"),f=n("tn36"),_=n("TSYQ"),g=n.n(_),v=n("yPgC"),y=n("negh"),k=n("kOzZ"),O=n("1tet"),j=n("0F/N"),C=n("HO/Y"),E=n("P2f5"),w=n("clTI"),S=n("smxp"),I=n("HvGc"),T=n("gEbr"),N=n("uf9I"),R=n("zfae"),A=n("13mM"),P=n("iZHp"),M=n("hhak"),D=n("QbLZ"),x=n.n(D),L=n("4zXV"),F=n("om+M"),B=n("Y/4G"),q=Object(F.a)("Adds a reminder for a message via API call",function(e,t,n){var a=B.a.generateAndEnqueue(),r=x()({},n,{client_token:a});return e(Object(L.a)({method:"reminders.addFromMessage",args:r}))});q.propTypes={time:m.b.oneOf(["In 20 minutes","In 1 hour","In 3 hours","Tomorrow","Next week","Custom"]).isRequired,message_channel:m.b.string.isRequired,message_ts:m.b.string.isRequired,respond_in_channel:m.b.bool};var U=n("hOQf"),H=n("8dKT"),G=n("ICFZ"),W=n("nNoG"),K=n("B/i4"),V=n("M4yy"),z=n("Smdl"),Y=n("PM8X"),Q=n("ESFG"),J=n("2Zgd"),X=n("wMtF"),Z=n("J19L"),$=n("1yga"),ee=n("auxT"),te=n("aLpA"),ne=n("DTT0"),ae=n("MREy"),re=n("jo6Y"),ie=n.n(re),oe=n("m1cH"),se=n.n(oe),le=n("TGBA"),ce=n("m8R6"),ue=n("NFsq"),de=n("Z0Cl"),pe=n("6FZx"),he=n("BWAg"),me=n("XfeM"),be=n("zmn3"),fe=n("hbEN"),_e=n("qcAq"),ge=n("U/ze"),ve=n("n2GJ"),ye=new W.b("message"),ke={ts:m.b.string.isRequired,channelId:m.b.string.isRequired},Oe=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=Object(S.a)(e,a,n);if(!r)return null;var i=Object(C.i)(e,"feature_file_threads");return Object(U.e)(r,i)?{id:te.J.addReaction,name:ye.t("Add reaction"),iconType:"add-reaction","data-qa":"add_reaction_menu_item",frecencyId:Object(ve.f)("add_reaction"),uiElement:y.y.ADD_REACTION_BUTTON}:null});Oe.propTypes=ke;var je=Oe,Ce=new W.b("message"),Ee={ts:m.b.string.isRequired,channelId:m.b.string.isRequired},we=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=Object(S.a)(e,a,n);if(!r)return null;var i=Object(C.i)(e,"feature_file_threads"),o=i?null:r.file;if(Object(E.m)(e,o))return null;var s=Object(w.d)(e,a);if(!Object(U.r)(e,{message:r,channel:s}))return null;var l=Ce.t("Start a thread"),c=y.y.START_A_THREAD_BUTTON;return o&&!i?l=Ce.t("Add comment",{fallbackHash:"17279ab497dcbdcde85b46254a98e8017a95cebe"}):(Object(U.rb)(r)||Object(U.S)(r))&&(l=Ce.t("Reply to thread"),c=y.y.REPLY_TO_THREAD_BUTTON),{id:te.J.comment,name:l,iconType:"comment-alt","data-qa":"start_thread_menu",frecencyId:Object(ve.f)("thread_reply"),uiElement:c}});we.propTypes=Ee;var Se=we,Ie=new W.b("message"),Te={ts:m.b.string.isRequired,channelId:m.b.string.isRequired},Ne=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=Object(S.a)(e,a,n);if(!r)return null;var i=Object(w.d)(e,a);return Object(U.h)(e,{message:r,channel:i})?{id:te.J.copyLink,name:Object(C.i)(e,"feature_desktop_copy_text")?Ie.t("Copy link to message"):Ie.t("Copy link"),iconType:"link","data-qa":"copy_link",frecencyId:Object(ve.f)("copy_link"),uiElement:y.y.COPY_LINK_BUTTON}:null});Ne.propTypes=Te;var Re=Ne,Ae=new W.b("message"),Pe={ts:m.b.string.isRequired,channelId:m.b.string.isRequired,disabled:m.b.bool.isRequired,showOfflineIcon:m.b.bool.isRequired},Me=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=t.messageContainerType,i=t.disabled,o=void 0!==i&&i,s=t.showOfflineIcon,l=void 0!==s&&s,c=Object(S.a)(e,a,n);if(!c)return null;var u=Object(w.d)(e,a);return Object(U.k)(e,{message:c,channel:u,messageContainerType:r})?{id:te.J.deleteMessage,name:Ae.t("Delete message"),iconType:"trash",danger:!0,"data-qa":"delete_message",frecencyId:Object(ve.f)("delete"),uiElement:y.y.DELETE_MESSAGE_BUTTON,disabled:o,showOfflineIcon:l}:null});Me.propTypes=Pe;var De=Me,xe=n("FN36"),Le=new W.b("message"),Fe={ts:m.b.string.isRequired,channelId:m.b.string.isRequired,disabled:m.b.bool.isRequired,showOfflineIcon:m.b.bool.isRequired},Be=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=t.disabled,i=void 0!==r&&r,o=t.showOfflineIcon,s=void 0!==o&&o,l=Object(S.a)(e,a,n);if(!l)return null;var c=Object(w.d)(e,a),u=Object(C.b)(e),d=Object(xe.a)(e,"msg_edit_window_mins");return Object(U.l)(e,u,l,c,d)?{id:te.J.editMessage,name:Le.t("Edit message"),iconType:"pencil","data-qa":"edit_message",frecencyId:Object(ve.f)("edit"),uiElement:y.y.EDIT_MESSAGE_BUTTON,disabled:i,showOfflineIcon:s}:null});Be.propTypes=Fe;var qe=Be,Ue=new W.b("message"),He=new W.b("messages_action_items"),Ge={ts:m.b.string.isRequired,channelId:m.b.string.isRequired,allUnreads:m.b.string.isRequired},We=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=t.allUnreads,i=Object(S.a)(e,a,n);if(!i)return null;var o=Object(w.d)(e,a);return Object(U.m)(e,{message:i,channel:o})?{id:te.J.markUnread,name:r?He.t("Mark above as read"):Ue.t("Mark unread"),iconType:"mark-unread","data-qa":"mark_unread",frecencyId:Object(ve.f)("mark_unread"),uiElement:y.y.MARK_UNREAD_BUTTON}:null});We.propTypes=Ge;var Ke=We,Ve=n("6kok"),ze=new W.b("message");function Ye(e,t,n,a){var r="#"+t;switch(n){case"channel":return e?ze.t("Un-pin from {channelName}",{channelName:r}):a?ze.t("Pin to {channelName}",{channelName:r,fallbackHash:"d8191c4354e474f5ec36b8cb35ee970f5c624260"}):ze.t("Pin to {channelName}\u2026",{channelName:r});case"private":return e?ze.t("Un-pin from {channelName}",{channelName:t}):a?ze.t("Pin to {channelName}",{channelName:t,fallbackHash:"d8191c4354e474f5ec36b8cb35ee970f5c624260"}):ze.t("Pin to {channelName}\u2026",{channelName:t});default:return e?ze.t("Un-pin from this conversation"):a?ze.t("Pin to this conversation",{fallbackHash:"26463acec4f15a90924c42970bb258dae75e73f9"}):ze.t("Pin to this conversation\u2026")}}var Qe={ts:m.b.string.isRequired,channelId:m.b.string.isRequired,disabled:m.b.bool.isRequired,showOfflineIcon:m.b.bool.isRequired},Je=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=t.disabled,i=void 0!==r&&r,o=t.showOfflineIcon,s=void 0!==o&&o,l=Object(S.a)(e,a,n);if(!l)return null;var c=Object(w.d)(e,a);if(!Object(U.o)(e,{message:l,channel:c}))return null;var u=Object(O.j)(e,{channelId:a,ts:n}),d=Object(Ve.x)(e,c,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),p=Object(Ve.v)(c),h=u?y.y.PIN_TO_THIS_CONVERSATION_BUTTON:y.y.UNPIN_FROM_THIS_CONVERSATION_BUTTON,m=Object(C.i)(e,"feature_sonic_pins");return{id:te.J.pin,name:Ye(u,d,p,m),iconType:"thumb-tack","data-qa":"pin_message",frecencyId:Object(ve.f)(u?"unpin":"pin"),uiElement:h,disabled:i,showOfflineIcon:s}});Je.propTypes=Qe;var Xe=Je,Ze=n("JS8a"),$e=n("J47P"),et=n("hcpk"),tt=Object(me.b)("Add a reminder for a message",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.time,r=n.channelId,i=n.ts,o=Object(S.a)(t(),r,i);return e(q({time:a,message_channel:r,message_ts:i,respond_in_channel:Object(U.vb)(o)}))});tt.propTypes={channelId:m.b.string.isRequired,ts:m.b.string.isRequired,time:m.b.string.isRequired};var nt=tt,at=new W.b("message"),rt=(m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.func.isRequired,m.b.object.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSelected=n.onSelected.bind(n),n}return u()(t,e),o()(t,[{key:"onSelected",value:function(){var e=this.props,t=e.remind,n=e.ts,a=e.channelId,r=e.time,i=e.clogger;t({ts:n,channelId:a,time:r}),i.track(y.k.MSG_ACTION,{contexts:{ui_context:{action:y.v.CLICK,step:y.z.MORE_ACTIONS_MENU,ui_element:y.y.REMIND_ME_BUTTON}}})}},{key:"render",value:function(){var e=this.props,t=(e.remind,e.ts,e.channelId,e.time,ie()(e,["remind","ts","channelId","time"]));return h.a.createElement(he.a,x()({},t,{onSelected:this.onSelected}))}}]),t}(p.PureComponent));rt.displayName="RemindMenuItem";var it={remind:nt},ot=Object(b.b)(function(e){return{clogger:Object(k.a)({state:e})}},it)(rt),st=Object(pe.b)(ot),lt=(m.b.string.isRequired,m.b.string.isRequired,m.b.bool,m.b.bool,m.b.bool,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSubmenu=n.renderSubmenu.bind(n),n}return u()(t,e),o()(t,[{key:"renderSubmenu",value:function(e){var t=this.props,n=t.channelId,a=t.ts,r=t.featureAppViewsV1,i=t.featureAppViewsReminders,o={channelId:n,ts:a};return h.a.createElement(Ze.a,x()({},e,{"data-qa":"remind_submenu",width:"auto"}),h.a.createElement(st,x()({},o,{label:at.t("In 20 minutes",{fallbackHash:"c473e4622b51d4d86dabe29940fee9c1796bb93d"}),time:"In 20 minutes"})),h.a.createElement(st,x()({},o,{label:at.t("In 1 hour",{fallbackHash:"e2e5de960f1c2c574aaeac98339a787a5bdab8e6"}),time:"In 1 hour"})),h.a.createElement(st,x()({},o,{label:at.t("In 3 hours",{fallbackHash:"9ec09cee220ff97e87efe884ad910bc050c301cb"}),time:"In 3 hours"})),h.a.createElement(st,x()({},o,{label:at.t("Tomorrow"),time:"Tomorrow"})),h.a.createElement(st,x()({},o,{label:at.t("Next week",{fallbackHash:"fdc2b827d9b1e8ed62eeb53c174f0ba91f90f490"}),time:"Next week"})),r&&i&&h.a.createElement(st,x()({},o,{label:r?at.t("Custom\u2026"):"",time:"Custom"})))}},{key:"render",value:function(){var e=this.props,t=(e.channelId,e.ts,ie()(e,["channelId","ts"]));return h.a.createElement(et.a,x()({},t,{renderSubmenu:this.renderSubmenu}))}}]),t}(p.PureComponent));lt.displayName="Remind",lt.defaultProps={featureAppViewsV1:!1,featureAppViewsReminders:!1,renderLegacySubmenu:!0};var ct=Object($e.a)(lt),ut=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=t.disabled,i=void 0!==r&&r,o=t.showOfflineIcon,s=void 0!==o&&o,l=Object(S.a)(e,a,n);if(!l)return null;var c=Object(w.d)(e,a);if(!Object(U.f)(e,{message:l,channel:c}))return null;var u=Object(C.i)(e,"feature_app_views_v1"),d=Object(C.i)(e,"feature_app_views_reminders");return h.a.createElement(ct,{key:"remind_submenu",label:at.t("Remind me about this"),"data-qa":"remind_me",frecencyId:Object(ve.f)("remind"),ts:n,channelId:a,featureAppViewsV1:u,featureAppViewsReminders:d,renderLegacySubmenu:!0,disabled:i,showOfflineIcon:s})}),dt=new W.b("message"),pt={ts:m.b.string.isRequired,channelId:m.b.string.isRequired,messageContainerType:m.b.oneOf(Object(le.a)(te.y)),disabled:m.b.bool.isRequired,showOfflineIcon:m.b.bool.isRequired},ht=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=t.messageContainerType,i=t.disabled,o=void 0!==i&&i,s=t.showOfflineIcon,l=void 0!==s&&s,c=Object(S.a)(e,a,n);if(!c)return null;var u=Object(w.d)(e,a);if(!Object(U.p)(e,{message:c,channel:u,messageContainerType:r}))return null;var d=Object(Ve.yb)(u)||Object(Ve.xb)(u)?dt.t("Remove from channel"):dt.t("Remove from conversation");return{id:te.J.removeBroadcast,name:d,iconType:"times","data-qa":"remove_broadcast",frecencyId:Object(ve.f)("remove"),uiElement:y.y.REMOVE_FROM_CONVERSATION_BUTTON,disabled:o,showOfflineIcon:l}});ht.propTypes=pt;var mt=ht,bt=new W.b("message"),ft={ts:m.b.string.isRequired,channelId:m.b.string.isRequired},_t=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=Object(C.i)(e,"feature_file_threads"),i=Object(S.a)(e,a,n);if(!i)return null;if(!Object(U.g)(i,r))return null;var o=Object(U.mb)(i)?bt.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):bt.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});return{id:te.J.shareMessage,name:o,iconType:"share-action","data-qa":"share_message_menu",frecencyId:Object(ve.f)("share"),uiElement:y.y.SHARE_MESSAGE_BUTTON}});_t.propTypes=ft;var gt=_t,vt=n("F294"),yt=new W.b("message"),kt={ts:m.b.string.isRequired,channelId:m.b.string.isRequired},Ot=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=Object(S.a)(e,a,n);if(!r)return null;if(!Object(U.t)(r))return null;var i=Object(C.i)(e,"feature_file_threads"),o=Object(U.A)(r,i),s=Object(U.ob)(r),l=s?yt.t("Unstar message"):yt.t("Star message");if(Object(U.cb)(r)){var c=o||Object(vt.a)(r.files);r.comment&&Object(E.i)(e,c,r.comment.id)&&(l=s?yt.t("Unstar file comment"):yt.t("Star file comment"))}else o&&(l=(s=Object(U.ob)(r,Object(E.h)(e,o),null))?yt.t("Unstar file"):yt.t("Star file"));var u=s?y.y.UNSTAR_MESSAGE_BUTTON:y.y.STAR_MESSAGE_BUTTON;return{id:te.J.star,name:l,iconType:s?"unstar-o":"star-o","data-qa":"star_message_menu",frecencyId:Object(ve.f)(s?"unstar":"star"),uiElement:u}});Ot.propTypes=kt;var jt=Ot,Ct=n("Ypgw"),Et=n("VjHM"),wt=new W.b("message"),St=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=t.disabled,i=void 0!==r&&r,o=t.showOfflineIcon,s=void 0!==o&&o,l=Object(S.a)(e,a,n),c=Object(w.d)(e,a),u=Object(Ve.V)(c),d=Object(Ct.b)(e,{ts:n,channelId:a}),p=u&&d;if(!Object(U.r)(e,{message:l,channel:c,ignoreMembership:p}))return null;var h=Object(Et.h)(e,"threads_everything"),m=Object(U.S)(l),b=wt.t("Follow message"),f=wt.t("You\u2019ll be notified about any replies"),_=y.y.FOLLOW_MESSAGE_BUTTON,g=void 0,v=Object(Ct.c)(e,{ts:n,channelId:a});return!v||i&&s?d?(m?(b=wt.t("Unfollow thread"),g=wt.t("This will be removed from Threads"),f=h?wt.t("You won\u2019t be notified about new replies"):g):(b=wt.t("Unfollow message"),g=wt.t("Replies will be excluded from Threads"),f=h?wt.t("You won\u2019t be notified about replies"):g),_=y.y.UNFOLLOW_MESSAGE_BUTTON):m?(b=wt.t("Follow thread"),g=wt.t("New replies will appear in Threads"),f=h?wt.t("You\u2019ll be notified about new replies"):g):(b=wt.t("Follow message"),g=wt.t("Any replies will show up in Threads"),f=h?wt.t("You\u2019ll be notified about any replies"):g):(b=wt.t("Loading\u2026",{fallbackHash:"0e140d567d90b0014d95ffec7a755e52355079f3"}),f=""),{id:te.J.subscribe,name:b,description:f,isLoading:v,iconType:"message-notification","data-qa":"follow_message",frecencyId:Object(ve.f)(d?"thread_unfollow":"thread_follow"),uiElement:_}});St.propTypes={ts:m.b.string.isRequired,channelId:m.b.string.isRequired,disabled:m.b.bool.isRequired,showOfflineIcon:m.b.bool.isRequired};var It=St,Tt=n("qSXi"),Nt=n("9gxL"),Rt=n("/X+W"),At=n("rtjy"),Pt=new W.b("app_actions"),Mt=function(e){return x()({},e,{danger:!1,description:Pt.t("Slack")})},Dt=function(e){return{id:e.frecencyId,action:e}},xt=Object(me.b)("Search message actions (app + Slack) in Redux store",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.query,r=void 0===a?"":a,i=ie()(n,["query"]),o=t(),s=Object(Nt.c)(o).actions,l=function(e,t){return[je(e,t),Se(e,t),Re(e,t),De(e,t),qe(e,t),Ke(e,t),Xe(e,t),mt(e,t),gt(e,t),jt(e,t),It(e,t)]}(o,i).filter(function(e){return e&&!e.isLoading}),c=[].concat(se()(l.map(Mt)),se()(s.map(Tt.a)));return c=c.filter(function(e){return Object(Tt.b)(e,Object(Rt.a)(r))}),c=(c=Object(At.d)(o,{query:r,list:c.map(Dt)})).map(function(e){return e.action})});xt.propTypes={channelId:m.b.string.isRequired,ts:m.b.string.isRequired,messageContainerType:m.b.oneOf(Object(le.a)(te.y)),query:m.b.string};var Lt=Object(me.b)("Search message actions (app + Slack), returns as Promise",function(e,t,n){var a=e(xt(n));return Promise.resolve(a)});Lt.propTypes=xt.propTypes;var Ft=Lt,Bt=n("YfA1"),qt=n("ntJl"),Ut=n("yHhI"),Ht=n("Q+UV"),Gt=function(e,t,n){var a=t.channelId,r=t.ts;return n(function(t,n){var i=n(),o=Object(S.a)(i,a,r),s=Object(E.j)(i,o),l=Object(Ht.b)(o,s);return Object(Y.a)({e:e,rxn_key:l})})},Wt=Object(me.b)("Comment on a message or file",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.ts,i=t(),o=Object(S.a)(i,a,r),s=Object(C.i)(i,"feature_file_threads"),l=Object(U.A)(o,s);if(l&&!s)e(Object(I.c)({fileId:l}));else{var c=o.thread_ts||r;e(Object(I.l)({channelId:a,threadTs:c}))}});Wt.propTypes={channelId:m.b.string.isRequired,ts:m.b.string.isRequired};var Kt=Wt,Vt=n("D4L/"),zt=n("jLdI"),Yt=n("GTwG"),Qt=Object(me.b)("Copy link to message",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.ts,i=t(),o=Object(S.a)(i,a,r),s=o.thread_ts,l=Object(Vt.d)(i),c=l&&l.domain,u=Object(E.j)(i,o),d=u&&!Object(U.cb)(o)?u.permalink:Object(U.u)({teamDomain:c,channelId:a,ts:r,threadTs:s});e(u?Object(Yt.a)({file:u,payload:{subtype:"copy_link"}}):Object(zt.a)({msg:o,payload:{subtype:"copy_link"}})),Object(G.b)(d)});Qt.propTypes={channelId:m.b.string.isRequired,ts:m.b.string.isRequired};var Jt=Qt,Xt=n("pWPO"),Zt=n("+z37"),$t=Object(me.b)("Copy message text",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.ts,i=t(),o=Object(S.a)(i,a,r),s=Object(E.j)(i,o);e(s?Object(Yt.a)({file:s,payload:{subtype:"copy_text"}}):Object(zt.a)({msg:o,payload:{subtype:"copy_text"}}));var l=Object(Xt.a)(Object(Zt.a)(i,{text:o.text,tsf_mode:"EDIT"}));Object(G.b)(l)});$t.propTypes={channelId:m.b.string.isRequired,ts:m.b.string.isRequired};var en=$t,tn=Object(me.b)("Delete message",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.ts,i=n.rollup,o=h.a.createElement($.a,{channelId:a,ts:r,rollup:i});Promise.resolve().then(function(){return e(Object(ne.e)({element:o}))})});tn.propTypes={channelId:m.b.string.isRequired,ts:m.b.string.isRequired};var nn=tn,an=Object(me.b)("Remove message broadcast",function(e,t,n){var a=h.a.createElement(Z.a,n);Promise.resolve().then(function(){return e(Object(ne.e)({element:a}))})});an.propTypes={channelId:m.b.string.isRequired,ts:m.b.string.isRequired};var rn=an,on=Object(me.b)("Copy link to message",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.ts,i=t(),o=Object(S.a)(i,a,r),s=Object(C.i)(i,"feature_file_threads"),l=Object(U.A)(o,s);l&&Object(U.cb)(o)?e(Object(P.a)({fileId:l})):e(Object(P.a)({ts:r,channelId:a}))});on.propTypes={channelId:m.b.string.isRequired,ts:m.b.string.isRequired};var sn=on,ln=n("MYD1"),cn=Object(me.b)("Toggle message pinned status, with a confirmation dialog before un-pinning",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.ts,r=n.channelId,i=t();if(Object(O.j)(i,{ts:a,channelId:r})){var o=Object(O.g)(i,{type:O.a.MESSAGE,channel:r,ts:a});e(Object(ne.e)({element:h.a.createElement(ln.a,{pin:o,channelId:r})}))}else e(Object(O.m)({ts:a,channelId:r}))});cn.propTypes={ts:m.b.string.isRequired,channelId:m.b.string.isRequired};var un=function(e,t,n,a){var r=n.ts,i=n.channelId,o=n.rollup,s=n.messageContainerType,l=Object(Ut.b)();if(t.appId)return a(Object(Bt.c)({actionId:t.id,appId:t.appId,messageTs:r,channelId:i}));switch(t.id){case te.J.addReaction:return Gt(e,n,a);case te.J.comment:return a(Kt({ts:r,channelId:i}));case te.J.copyLink:return a(Jt({ts:r,channelId:i}));case te.J.copyText:return a(en({ts:r,channelId:i}));case te.J.deleteMessage:return a(nn({ts:r,channelId:i,rollup:o}));case te.J.editMessage:return l.warn("Edit message is an unhandled case"),null;case te.J.markUnread:return a(Object(qt.setUnreadPoint)({channelId:i,unreadTs:r}));case te.J.pin:return Object(z.a)()?a(cn({ts:r,channelId:i})):a(Object(O.o)({ts:r,channelId:i}));case te.J.remind:return l.warn("Remind is an unhandled case"),null;case te.J.removeBroadcast:return a(rn({ts:r,channelId:i}));case te.J.shareMessage:return a(sn({ts:r,channelId:i}));case te.J.star:return a(Object(j.b)({ts:r,channelId:i}));case te.J.subscribe:return a(Object(Ct.h)({ts:r,channelId:i,messageContainerType:s}));default:return l.warn("Unknown action type "+t.id),null}},dn=n("U3Q0"),pn=n("cD5Y"),hn=n("cTBa"),mn=n("YEIV"),bn=n.n(mn),fn=n("Rrdp"),_n=n("od5y"),gn=n("1zbP"),vn=n("1VpL"),yn=n("V/As"),kn=(v.a.MessageAction.isRequired,m.b.string,m.b.string,v.a.maybeUnknown(v.a.App),m.b.string.isRequired,{className:"",pillarClassName:"",app:void 0}),On=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(f.a)(n,["renderEnter","renderIcon","renderIconMaybe"]),n}return u()(t,e),o()(t,[{key:"renderIcon",value:function(){var e=this.props,t=e.action,n=e.app,a=e.defaultAppIcon,r=n&&n.icons||t.iconSet;if(r){var i=Object(yn.a)({icons:r},56,a);return h.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:i})}return t.iconType?h.a.createElement(_n.b,{type:t.iconType}):null}},{key:"renderIconMaybe",value:function(e){return e?h.a.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},e):null}},{key:"renderEnter",value:function(){var e=this.props,t=e.className,n=e.pillarClassName,a=g()(t,"c-menu_item__enter",bn()({},n+"__enter",n));return h.a.createElement(_n.a,{type:"enter",className:a,"data-qa":"menu_item_enter",role:"presentation"})}},{key:"render",value:function(){var e,t=this.props,n=t.action,a=t.app,r=t.className,i=t.pillarClassName,o=g()(r,"c-menu_item__button","c-button-unstyled",(e={"c-menu_item__button--danger":n.danger},bn()(e,""+i,i),bn()(e,i+"--danger",n.danger&&i),e)),s=a&&a.name||n.description;return!s&&a&&(s=h.a.createElement(fn.a,{type:Object(gn.d)(a)?"unknown":"non-existent"})),h.a.createElement("div",{className:"c-menu_item__li",role:"presentation"},h.a.createElement("div",{className:o,"data-qa":n["data-qa"],key:n.id,id:n.id},this.renderIconMaybe(this.renderIcon()),h.a.createElement("div",{className:"c-menu_item__label",role:"presentation"},n.label||n.name,h.a.createElement("div",{className:"c-menu_item__description"},s)),this.renderEnter()))}}]),t}(p.PureComponent);On.displayName="AppActionsDialogItem",On.defaultProps=kn;var jn=Object(b.b)(function(e,t){var n=t.action;return{app:n&&n.appId&&Object(vn.d)(e,n.appId),defaultAppIcon:Object(vn.e)(e)}})(On),Cn=n("Qaea"),En=n("ypl0"),wn=n("Bekf"),Sn=n("t3QL"),In=n("Lr9k"),Tn=n("CaXY"),Nn=n("lek6"),Rn=n("3dqR"),An=n("NvKv"),Pn=n("lV3N"),Mn=n("y7mK"),Dn=(n("pic6"),m.b.string.isRequired,m.b.string.isRequired,m.b.object.isRequired,m.b.string,m.b.bool,m.b.string,m.b.string,m.b.string,m.b.string,m.b.arrayOf(m.b.object),m.b.string,v.a.BlockKitBlocks,m.b.bool,{theme:"light",hasAdHocSender:!1,userId:null,username:null,botId:null,attachments:[],blocks:void 0,blocksContainerContext:Tn.a.app_actions,featureAttachmentsV2:!1,text:void 0}),xn=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={gradient:!1},n.renderAttachment=n.renderAttachment.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.maybeSetGradient()}},{key:"maybeSetGradient",value:function(){var e=Object(Cn.findDOMNode)(this);e&&e.scrollHeight>e.clientHeight&&this.setState(function(){return{gradient:!0}})}},{key:"renderContent",value:function(){var e=this.props,t=e.text,n=e.blocks,a=e.ts,r=e.blocksContainerContext,i=e.featureAttachmentsV2;return n&&i?h.a.createElement(In.a,{blocks:n,containerId:a,blocksContainerContext:r}):h.a.createElement(Nn.a,{"data-qa":"app-actions-pillow-message-text",text:t})}},{key:"renderAvatar",value:function(){var e=this.props,t=e.userId,n=e.hasAdHocSender,a=e.botId;return h.a.createElement(Rn.b,{className:"p-app_actions_pillow__avatar",userId:t,isAdHocMember:n,botId:a,size:24,isInteractive:!1,showCard:!1,showTooltip:!1,tabIndex:"-1"})}},{key:"renderTimestamp",value:function(){var e=this.props.ts;return h.a.createElement(An.b,{timestamp:e,relative:!1,full:!0})}},{key:"renderAttachment",value:function(e,t){var n=this.props,a=n.ts,r=n.channelId,i=n.blocksContainerContext;return h.a.createElement(Pn.a,x()({key:t},Object(Sn.b)(e),{messageTs:a,activeChannelId:r,showDelete:!1,blocksContainerContext:i}))}},{key:"renderAttachments",value:function(){var e=this.props.attachments;return e&&e.length?h.a.createElement("div",{className:"p-app_actions_pillow__attachments"},e.map(this.renderAttachment)):null}},{key:"renderGutter",value:function(){return"light"===this.props.theme?h.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderAvatar()):h.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderTimestamp())}},{key:"renderContentHeader",value:function(){var e=this.props,t=e.userId,n=e.botId,a=e.username,r=e.theme,i=e.channel;return h.a.createElement("div",{className:"p-app_actions_pillow__content_header"},h.a.createElement(Mn.a,{userId:t,botId:n,username:a,channelName:Object(Ve.w)(i),isInteractive:!1}),"light"===r&&this.renderTimestamp())}},{key:"render",value:function(){var e=this.props.theme,t=g()("p-app_actions_pillow","p-app_actions_pillow--"+e,{"p-app_actions_pillow--gradient":this.state.gradient});return h.a.createElement("div",{className:t,role:"presentation","data-qa":"app_action_pillow"},this.renderGutter(),h.a.createElement("div",{className:"p-app_actions_pillow__content"},this.renderContentHeader(),h.a.createElement("div",{className:"p-app_actions_pillow__body",id:"p-app_actions_pillow__body"},this.renderContent(),this.renderAttachments(),h.a.createElement("span",{className:"p-app_actions_pillow__blocker"}))))}}]),t}(p.PureComponent);xn.displayName="AppActionsPillow",xn.defaultProps=Dn;var Ln=Object(b.b)(function(e,t){var n=t.ts,a=t.channelId,r=Object(S.a)(e,a,n),i=Object(w.d)(e,a),o=Object(U.H)(r),s=Object(U.R)(e,r),l=s.botId;return{channel:i,userId:o,username:s.username,botId:l,theme:Object(En.a)(e),hasAdHocSender:Object(wn.a)(r),text:r.text,attachments:r.attachments,blocks:r.blocks,featureAttachmentsV2:Object(C.i)(e,"feature_attachments_v2")}})(xn),Fn=(n("qiqk"),new W.b("app_actions")),Bn=(m.b.string.isRequired,m.b.func,m.b.string.isRequired,m.b.func,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.object.isRequired,{onClose:d.a,onSelectAction:d.a}),qn=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={filterQuery:"",isLoading:!0,isError:!1,actions:[]},n.initClogged=!1,Object(f.a)(n,["onFilterUpdate","onFooterLinkClick","onSelectAction","renderSingleAction","handleSelectEvent","searchActions"]),n.searchActionsDebounced=Object(fe.a)(n.searchActions,200,{leading:!0}),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.searchActionsDebounced()}},{key:"componentDidUpdate",value:function(){this.initClogged||this.state.isLoading||this.state.isError||(this.props.clogger.track(y.k.MSG_ACTION,{contexts:{ui_context:{action:y.v.IMPRESSION,step:y.z.MESSAGE_ACTION_DIALOG,ui_element:y.y.MESSAGE_ACTION_DIALOG},platform:{app_actions_showing:this.state.actions.length}}}),this.initClogged=!0)}},{key:"componentWillUnmount",value:function(){this.activePromise&&delete this.activePromise}},{key:"onFooterLinkClick",value:function(){this.props.clogger.track(y.k.MSG_ACTION,{contexts:{ui_context:{action:y.v.CLICK,step:y.z.MESSAGE_ACTION_DIALOG,ui_element:y.y.GET_MORE_APP_ACTIONS},platform:{app_actions_showing:this.state.actions.length}}})}},{key:"onSelectAction",value:function(e,t){var n=this.props,a=n.ts,r=n.channelId,i=n.closeModal,o=n.handleMessageAction,s=n.onSelectAction,l=n.clogger;i(),this.props.onClose&&this.props.onClose(e),s(e,t,{ts:a,channelId:r})||o(e,t,{ts:a,channelId:r}),this.props.recordMessageActionFrecencyEvent({action:t,query:this.state.filterQuery});var c={ui_context:{action:y.v.CLICK,step:y.z.MESSAGE_ACTION_DIALOG,ui_element:t.uiElement}};t.appId&&(c.platform={app_id:t.appId,action_id:t.id}),l.track(y.k.MSG_ACTION,{contexts:c})}},{key:"onFilterUpdate",value:function(e){this.setState(function(){return{filterQuery:e}},this.searchActionsDebounced)}},{key:"searchActions",value:function(){var e=this,t=this.props.searchMessageActions({channelId:this.props.channelId,ts:this.props.ts,query:this.state.filterQuery}).then(function(n){e.activePromise===t&&e.setState(function(){return{actions:n,isError:!1,isLoading:!1}})}).catch(function(){e.setState(function(){return{isError:!0,isLoading:!1}})});this.activePromise=t}},{key:"handleSelectEvent",value:function(e,t,n){this.onSelectAction(n,t.props.action)}},{key:"renderTitle",value:function(e){return h.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":!0},h.a.createElement("div",{className:"p-app_actions_dialog__title_text"},e))}},{key:"renderMessagePreview",value:function(){var e=this.props,t=e.channelId,n=e.ts;return h.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":!0},h.a.createElement(Ln,{channelId:t,ts:n}))}},{key:"renderLoading",value:function(){return h.a.createElement("div",{className:"p-app_actions_dialog__loader"},h.a.createElement(pn.a,null))}},{key:"renderSingleAction",value:function(e){return{label:h.a.createElement(jn,{key:e.id,pillarClassName:"p-app_actions_dialog_option",action:e}),value:e.id}}},{key:"renderSelect",value:function(){var e=Fn.t("Search message actions\u2026");return h.a.createElement(hn.b,{"data-qa":"app-actions-dialog-list",isAlwaysOpen:!0,usePlaceholderOption:!1,autoSelectFirstOption:!0,focusInputOnMount:!0,placeholder:e,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(be.a)(this.state.actions,this.renderSingleAction),optionsRowHeight:64})}},{key:"render",value:function(){var e=this.state.isLoading,t=Fn.t("Get more message actions"),n=Fn.t("Use an action");return h.a.createElement(dn.a,{contentLabel:n,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:"/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-get_more_app_actions-message_action_dialog-click",onFooterLinkClick:this.onFooterLinkClick,footerText:t,goOnEnterPressed:!1,onCancel:this.props.onClose,showCancelButton:!1,showGoButton:!1,title:this.renderTitle(n),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:!1},this.renderMessagePreview(),e?this.renderLoading():this.renderSelect())}}]),t}(p.PureComponent);qn.displayName="AppActionsDialog",qn.defaultProps=Bn;var Un=Object(b.b)(function(e){return{clogger:Object(k.a)({state:e})}},function(e){return{closeModal:function(){return e(Object(ne.a)())},handleMessageAction:function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return un.apply(void 0,n.concat([e]))},searchMessageActions:function(){return e(Ft.apply(void 0,arguments))},recordMessageActionFrecencyEvent:function(t){return e(Object(_e.a)(t))}}})(qn),Hn=n("CpTu"),Gn=n("DecA"),Wn=Nt.c,Kn=new W.b("app_actions"),Vn=(m.b.string.isRequired,m.b.func,m.b.string.isRequired,m.b.func,m.b.arrayOf(v.a.MessageAction).isRequired,m.b.arrayOf(v.a.AppActionMenuItem),m.b.bool.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.object.isRequired,{appActions:[],onClose:d.a,onSelectAction:d.a}),zn=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={normalizedFilterQuery:""},Object(f.a)(n,["onFilterUpdate","onFooterLinkClick","onSelectAction","filterAction","formatSlackAction","renderSingleAction","handleSelectEvent"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track(y.k.MSG_ACTION,{contexts:{ui_context:{action:y.v.IMPRESSION,step:y.z.MESSAGE_ACTION_DIALOG,ui_element:y.y.MESSAGE_ACTION_DIALOG},platform:{app_actions_showing:this.props.appActions.length}}}),this.props.onLoad()}},{key:"shouldComponentUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelId,n=e.ts,a=e.isLoading,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).normalizedFilterQuery;return this.state.normalizedFilterQuery!==r||(!(!this.props.isLoading||a)||(this.props.channelId!==t||this.props.ts!==n))}},{key:"onFooterLinkClick",value:function(){this.props.clogger.track(y.k.MSG_ACTION,{contexts:{ui_context:{action:y.v.CLICK,step:y.z.MESSAGE_ACTION_DIALOG,ui_element:y.y.GET_MORE_APP_ACTIONS},platform:{app_actions_showing:this.props.appActions.length}}})}},{key:"onSelectAction",value:function(e,t){var n=this.props,a=n.ts,r=n.channelId,i=n.closeModal,o=n.handleMessageAction,s=n.onSelectAction,l=n.clogger;i(),this.props.onClose&&this.props.onClose(e),s(e,t,{ts:a,channelId:r})||o(e,t,{ts:a,channelId:r}),Object(ve.b)(t,this.state.normalizedFilterQuery);var c={ui_context:{action:y.v.CLICK,step:y.z.MESSAGE_ACTION_DIALOG,ui_element:t.uiElement}};t.appId&&(c.platform={app_id:t.appId,action_id:t.id}),l.track(y.k.MSG_ACTION,{contexts:c})}},{key:"onFilterUpdate",value:function(e){var t=Object(Rt.a)(e);this.setState(function(){return{normalizedFilterQuery:t}})}},{key:"getActions",value:function(){var e=[].concat(se()(Object(be.a)(this.props.slackActions,this.formatSlackAction)),se()(Object(be.a)(this.props.appActions,Tt.a)));return e=Object(de.a)(e,this.filterAction),e=Object(ve.c)(e,this.state.normalizedFilterQuery)}},{key:"handleSelectEvent",value:function(e,t,n){this.onSelectAction(n,t.props.action)}},{key:"filterAction",value:function(e){return Object(Tt.b)(e,this.state.normalizedFilterQuery)}},{key:"formatSlackAction",value:function(e){return x()({},e,{danger:!1,description:Kn.t("Slack")})}},{key:"renderTitle",value:function(e){return h.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":!0},h.a.createElement("div",{className:"p-app_actions_dialog__title_text"},e))}},{key:"renderMessagePreview",value:function(){var e=this.props,t=e.channelId,n=e.ts;return h.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":!0},h.a.createElement(Ln,{channelId:t,ts:n}))}},{key:"renderLoading",value:function(){return h.a.createElement("div",{className:"p-app_actions_dialog__loader"},h.a.createElement(pn.a,null))}},{key:"renderSingleAction",value:function(e){return{label:h.a.createElement(jn,{key:e.id,pillarClassName:"p-app_actions_dialog_option",action:e}),value:e.id}}},{key:"renderSelect",value:function(){var e=Kn.t("Search message actions\u2026");return h.a.createElement(hn.b,{"data-qa":"app-actions-dialog-list",isAlwaysOpen:!0,usePlaceholderOption:!1,autoSelectFirstOption:!0,focusInputOnMount:!0,placeholder:e,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(be.a)(this.getActions(),this.renderSingleAction),optionsRowHeight:64})}},{key:"render",value:function(){var e=this.props.isLoading,t=Kn.t("Get more message actions"),n=Kn.t("Use an action");return h.a.createElement(dn.a,{contentLabel:n,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:"/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-get_more_app_actions-message_action_dialog-click",onFooterLinkClick:this.onFooterLinkClick,footerText:t,goOnEnterPressed:!1,onCancel:this.props.onClose,showCancelButton:!1,showGoButton:!1,title:this.renderTitle(n),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:!1},this.renderMessagePreview(),e?this.renderLoading():this.renderSelect())}}]),t}(p.Component);zn.displayName="AppActionsDialog",zn.defaultProps=Vn;var Yn=Object(b.b)(function(e,t){var n=Wn(e),a=n.loading,r=n.actions,i=Object(de.a)([je(e,t),Se(e,t),Re(e,t),De(e,t),qe(e,t),Ke(e,t),Xe(e,t),mt(e,t),gt(e,t),jt(e,t),It(e,t)]);return{slackActions:i,appActions:r,isLoading:!(!a&&!Object(Hn.a)(i,"isLoading")),clogger:Object(k.a)({state:e})}},function(e){return{closeModal:function(){return e(Object(ne.a)())},onLoad:function(){return e(Object(Gn.b)())},handleMessageAction:function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return un.apply(void 0,n.concat([e]))}}})(zn),Qn=function(e){var t=e.featureAppActionsFeRefactor,n=ie()(e,["featureAppActionsFeRefactor"]);return t?h.a.createElement(Un,n):h.a.createElement(Yn,n)};Qn.displayName="AppActionsSwitcher";var Jn=Object(b.b)(function(e){return{featureAppActionsFeRefactor:Object(C.i)(e,"feature_app_actions_fe_refactor")}})(Qn),Xn=Object(me.b)("Open app actions dialog",function(e,t,n){var a=h.a.createElement(Jn,n);e(Object(ne.e)({element:a}))});Xn.propTypes={channelId:m.b.string.isRequired,ts:m.b.string.isRequired,onSelectAction:m.b.func.isRequired};var Zn=Xn,$n=new W.b("message"),ea="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-more_message_actions_button-more_actions_menu-click",ta=(m.b.string.isRequired,m.b.string.isRequired,m.b.func.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.func.isRequired,m.b.object.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSelected=n.onSelected.bind(n),n.state={hasActions:e.hasActions},n}return u()(t,e),o()(t,[{key:"onSelected",value:function(e){var t=this.props,n=t.ts,a=t.channelId,r=t.onSelectAction,i=t.clogger;this.props.hasOverflow?this.props.browseAppActions({ts:n,channelId:a,onSelectAction:r}):e&&"click"!==e.type&&window.open(ea,"_blank"),i.track(y.k.MSG_ACTION,{contexts:{ui_context:{action:y.v.CLICK,step:y.z.MORE_ACTIONS_MENU,ui_element:y.y.MORE_MESSAGE_ACTIONS_BUTTON}}})}},{key:"render",value:function(){var e=this.props,t=(e.ts,e.channelId,e.onSelectAction,e.hasActions,e.browseAppActions,e.featureOfflineMode),n=e.isOffline,a=ie()(e,["ts","channelId","onSelectAction","hasActions","browseAppActions","featureOfflineMode","isOffline"]),r=this.state.hasActions?$n.t("More message actions\u2026"):$n.t("Add a message action\u2026");return h.a.createElement(he.a,x()({},a,{label:r,"data-qa":this.props.hasOverflow?"app_message_actions_dialog":"app_directory_link",onSelected:this.onSelected,href:this.props.hasOverflow?void 0:ea,disabled:t&&n,showOfflineIcon:t&&n}))}}]),t}(p.Component));ta.displayName="BrowseAppActions";var na=Object(pe.b)(Object(b.b)(function(e){var t=Object(Nt.c)(e),n=t.actions,a=t.loading,r=n.length;return{hasActions:a||!!r,hasOverflow:a||r>3,clogger:Object(k.a)({state:e}),featureOfflineMode:Object(C.i)(e,"feature_offline_mode"),isOffline:!Object(A.c)(e)}},function(e){return{browseAppActions:function(){return e(Zn.apply(void 0,arguments))}}})(ta)),aa=n("rz65"),ra=new W.b("message"),ia={ts:m.b.string.isRequired,channelId:m.b.string.isRequired},oa=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=Object(S.a)(e,a,n);return r&&Object(U.i)(e,{message:r})?{id:te.J.copyText,name:ra.t("Copy text"),iconType:"link","data-qa":"copy_text",frecencyId:Object(ve.f)("copy_text"),uiElement:y.y.COPY_LINK_BUTTON}:null});oa.propTypes=ia;var sa=oa,la=n("Fdc0"),ca=(m.b.oneOf(Object(le.a)(aa.a)),v.a.MessageAction.isRequired,m.b.func.isRequired,v.a.maybeUnknown(v.a.App),m.b.string.isRequired,{type:aa.a.default,app:void 0}),ua=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSelected=n.onSelected.bind(n),n}return u()(t,e),o()(t,[{key:"onSelected",value:function(e){var t=this.props,n=t.action,a=t.onSelected;a(e,n)}},{key:"renderIcon",value:function(){var e=this.props,t=e.action,n=e.app,a=e.type,r=e.defaultAppIcon,i=n&&n.icons||t.iconSet;if(i){var o=a===aa.a.compactItem?40:56,s=Object(yn.a)({icons:i},o,r);return h.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:s})}return t.iconType?h.a.createElement(_n.b,{type:t.iconType}):null}},{key:"render",value:function(){var e=this.props,t=e.action,n=e.app,a=(e.onSelected,e.type),r=ie()(e,["action","app","onSelected","type"]),i=n&&n.name||t.description;return!i&&n&&(i=h.a.createElement(fn.a,{type:Object(gn.d)(n)?"unknown":"non-existent"})),h.a.createElement(he.a,x()({type:a,label:t.label||t.name,description:i,icon:this.renderIcon(),danger:t.danger,onSelected:this.onSelected,"data-qa":t["data-qa"]},r))}}]),t}(p.PureComponent);ua.displayName="MessageActionMenuItem",ua.defaultProps=ca;var da=Object(b.b)(function(e,t){var n=t.action;return{app:n&&n.appId&&Object(vn.d)(e,n.appId),defaultAppIcon:Object(vn.e)(e)}})(ua),pa=Object(pe.b)(da),ha=(n("FeTz"),m.b.string.isRequired,m.b.string.isRequired,v.a.Rollup(),m.b.oneOf(Object(le.a)(te.y)),m.b.func,m.b.func,m.b.func,m.b.arrayOf(m.b.oneOfType([v.a.MessageAction,m.b.node])).isRequired,m.b.bool,m.b.array,m.b.func.isRequired,m.b.func.isRequired,m.b.object.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,{messageContainerType:te.y.MESSAGE_PANE,onSelectAction:d.a,onMenuItemSelected:d.a,onLoad:d.a,canRunAppAction:!1,appActions:[],rollup:void 0}),ma=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={appActions:e.appActions},Object(f.a)(n,["onSelectAction","renderSingleAppAction","renderSingleSlackAction"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.onLoad(),this.props.clogger.track(y.k.MSG_ACTION,{contexts:{ui_context:{action:y.v.IMPRESSION,step:y.z.MORE_ACTIONS_MENU,ui_element:y.y.MORE_ACTIONS_MENU},platform:{app_actions_showing:Math.min(this.state.appActions.length,3)}}})}},{key:"onSelectAction",value:function(e,t){var n=this.props,a=n.ts,r=n.channelId,i=n.handleMessageAction,o=n.onSelectAction,s=n.rollup,l=n.clogger,c=n.messageContainerType;o(e,t,{ts:a,channelId:r})||i(e,t,{ts:a,channelId:r,rollup:s,messageContainerType:c}),this.props.recordMessageActionFrecencyEvent({action:t});var u={ui_context:{action:y.v.CLICK,step:y.z.MORE_ACTIONS_MENU,ui_element:t.uiElement}};t.appId&&(u.platform={app_id:t.appId,action_id:t.id}),l.track(y.k.MSG_ACTION,{contexts:u})}},{key:"renderAppActions",value:function(){var e=this.props,t=e.onSelectAction,n=e.ts,a=e.channelId,r=this.state.appActions.slice(0,3).map(this.renderSingleAppAction);return[].concat(se()(r),[h.a.createElement(na,{key:"browse_app_actions",ts:n,channelId:a,onSelectAction:t})])}},{key:"renderSingleAppAction",value:function(e){var t=this.props,n=t.featureOfflineMode,a=t.isOffline,r=Object(Tt.a)(e);return h.a.createElement(pa,{key:r.id,type:aa.a.compactItem,action:r,onSelected:this.onSelectAction,disabled:n&&a,showOfflineIcon:n&&a})}},{key:"renderSlackActions",value:function(){return this.props.slackActions.map(this.renderSingleSlackAction)}},{key:"renderSingleSlackAction",value:function(e,t){if(!e)return null;if(h.a.isValidElement(e))return h.a.cloneElement(e,{key:t});var n=Object(ce.a)(e,["iconType","iconSet"]);return h.a.createElement(pa,{key:n.id,className:"p-message_actions_menu__"+n.id,action:n,onSelected:this.onSelectAction,disabled:n.disabled,showOfflineIcon:n.showOfflineIcon})}},{key:"render",value:function(){var e=this.props,t=(e.ts,e.channelId,e.messageContainerType,e.onLoad,e.onMenuItemSelected),n=(e.onSelectAction,e.canRunAppAction),a=(e.appActions,e.slackActions,e.handleMessageAction,ie()(e,["ts","channelId","messageContainerType","onLoad","onMenuItemSelected","onSelectAction","canRunAppAction","appActions","slackActions","handleMessageAction"]));return h.a.createElement(ae.f,x()({menuClassNames:"p-message_actions_menu",onMenuItemSelected:t,stripTerminalSeparators:!0},a),this.renderSlackActions(),h.a.createElement(ae.d,null),n&&this.renderAppActions())}}]),t}(p.PureComponent);ma.displayName="MessageActionsMenu",ma.defaultProps=ha;var ba=Object(b.b)(function(e,t){var n=t.channelId,a=t.ts,r=t.messageContainerType||te.y.MESSAGE_PANE,i=Object(S.a)(e,n,a),o=Object(C.i)(e,"feature_file_threads"),s=Object(U.s)(i,o),l=Object(la.k)(e),c=Object(Nt.c)(e).actions,u=Object(C.i)(e,"feature_offline_mode"),d=!Object(A.c)(e),p=l&&s,m=u?x()({},t,{disabled:d,showOfflineIcon:d}):t;return{slackActions:Object(de.a)([It(e,m),h.a.createElement(ae.d,null),Object(ue.a)([te.y.THREADS_FLEXPANE,te.y.THREADS_VIEW,te.y.SLI_BRIEFING],r)&&gt(e,t),Re(e,t),sa(e,t),Object(ue.a)([te.y.MESSAGE_PANE,te.y.UNREAD_VIEW],r)&&Ke(e,x()({},t,{allUnreads:r===te.y.UNREAD_VIEW})),ut(e,m),Xe(e,m),qe(e,m),mt(e,m),De(e,m)]),appActions:c,canRunAppAction:p,clogger:Object(k.a)({state:e}),featureOfflineMode:u,isOffline:d}},function(e){return{onLoad:function(){return e(Object(Gn.b)())},handleMessageAction:function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return un.apply(void 0,n.concat([e]))},recordMessageActionFrecencyEvent:function(t){return e(Object(_e.a)(t))}}})(ma),fa=n("X28p"),_a=n("UceB"),ga=new W.b("message"),va=(m.b.string,m.b.string,m.b.arrayOf(m.b.string),m.b.string,m.b.arrayOf(m.b.shape({ts:m.b.string,user:m.b.string})),m.b.string.isRequired,m.b.number,m.b.string,v.a.Rollup(),m.b.string,m.b.object,m.b.object,m.b.string,m.b.string,m.b.oneOf(["dense","light"]),m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.string,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.string,m.b.func,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.bool,m.b.bool.isRequired,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.object.isRequired,m.b.func,m.b.func,{reactionKey:null,fileId:null,fileIds:null,comment:null,replies:[],replyCount:0,ts:null,rollup:void 0,threadTs:null,channel:null,file:null,subtype:null,channelId:null,theme:"light",isStarred:!1,isPinned:!1,isEphemeral:!1,isFileAuthorExternal:!1,isReply:!1,canUserReplyToMessage:!1,messageContainerType:void 0,editHandler:d.a,unreadHandler:d.a,onMenuOpen:d.a,onMenuClose:d.a,onEmojiPickerOpen:d.a,onEmojiPickerClose:d.a,showComment:!0,showShare:!0,showReact:!0,showJump:!1,showStar:!0,showMoreActions:!0,jumpOrigin:null,changeReactionFromUserAction:d.a,pinMessage:d.a,unpinMessage:d.a,updateStar:d.a,featureFileThreads:!1,renderMenuBelowTrigger:!0,openModal:d.a,previewFile:d.a,showThread:d.a,showThreadOrRefresh:d.a,addReminderForMessage:d.a,openShareDialog:d.a,jumpToMessage:d.a,featureOfflineMode:!1,wasRecentlyOnline:!1,featureSonicEmoji:!1,featureReactAllThreads:!1,featureJumpToMessage:!1,featureAnnounceOnly:!1,clogLinkClick:d.a,clogThreadEvent:d.a}),ya=0,ka=-8,Oa=4,ja=-16,Ca=50,Ea=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={moreActionsMenuOpen:!1,subscribed:"loading"},Object(f.a)(n,["onAddReaction","onEmojiSelected","onComment","onCopyLink","onDelete","onEdit","onMarkUnread","onMenuSelectAction","onMoreActionsMenuClose","onMoreActionsMenuOpen","onPin","onRemind","onRemoveBroadcast","onShare","onStar","onJump","onSubscribe","renderMoreActionsMenu"]),n}return u()(t,e),o()(t,[{key:"onStar",value:function(){var e=this.props,t=e.channelId,n=e.ts,a=e.fileId,r=e.fileIds,i=e.featureFileThreads,o=e.comment,s=e.subtype,l=e.isStarred,c={channel:t,timestamp:n};(a&&(c={file:a}),o&&"file_comment"===s)&&(c={file_comment:o,file_comment_file:i&&r&&r[0]||a});this.props.updateStar(!l,c);var u=l?y.y.UNSTAR_MESSAGE_BUTTON:y.y.STAR_MESSAGE_BUTTON;this.trackAction(u),n&&Object(z.a)()&&this.clogMsgStarClick()}},{key:"onAddReaction",value:function(e){this.props.reactionKey&&(Object(Y.a)({e:e,rxn_key:this.props.reactionKey}),this.trackAction(y.y.ADD_REACTION_BUTTON))}},{key:"onEmojiSelected",value:function(e,t){var n=this.props.reactionKey;this.props.changeReactionFromUserAction({key:n,name:t})}},{key:"onComment",value:function(){if(this.props.fileId&&!this.props.featureFileThreads)this.props.previewFile({fileId:this.props.fileId});else{var e=this.props.threadTs||this.props.ts;this.props.showThreadOrRefresh({channelId:this.props.channel.id,threadTs:e})}var t=this.state.subscribed?y.y.REPLY_TO_THREAD_BUTTON:y.y.START_A_THREAD_BUTTON;this.trackAction(t)}},{key:"onShare",value:function(){var e=this.props,t=e.ts,n=e.channelId,a=e.fileId;this.props.fileId&&"file_comment"!==this.props.subtype?this.props.openShareDialog({fileId:a}):this.props.openShareDialog({ts:t,channelId:n}),this.trackAction(y.y.SHARE_MESSAGE_BUTTON)}},{key:"onEdit",value:function(e){this.props.onMenuClose(),this.props.editHandler(),e.stopPropagation(),this.trackAction(y.y.EDIT_MESSAGE_BUTTON,!0)}},{key:"onDelete",value:function(){var e=this.props,t=e.channelId,n=e.ts;this.props.openModal({element:h.a.createElement($.a,{channelId:t,ts:n})}),this.trackAction(y.y.DELETE_MESSAGE_BUTTON,!0)}},{key:"onMarkUnread",value:function(){this.props.unreadHandler({channelId:this.props.channel.id,unreadTs:this.props.ts}),this.trackAction(y.y.MARK_UNREAD_BUTTON,!0)}},{key:"onRemind",value:function(e){var t=this,n=this.props,a=n.channel,r=n.ts,i=n.subtype;return this.trackAction(y.y.REMIND_ME_BUTTON,!0),function(){t.props.addReminderForMessage({time:e,message_channel:a.id,message_ts:r,respond_in_channel:"thread_broadcast"===i})}}},{key:"onSubscribe",value:function(){var e=this.props,t=e.replies,n=e.ts,a=e.channel,r=this.state.subscribed,i=t.length&&t[t.length-1].ts;Object(Q.d)(a.id,n,!r,i);var o=r?y.y.UNFOLLOW_MESSAGE_BUTTON:y.y.FOLLOW_MESSAGE_BUTTON;this.trackAction(o,!0)}},{key:"onPin",value:function(){var e=this.props,t=e.ts,n=e.channel,a=e.isPinned,r=e.pinMessage,i=e.unpinMessage;a?(i({ts:t,channelId:n.id}),this.trackAction(y.y.UNPIN_FROM_THIS_CONVERSATION_BUTTON,!0)):(r({ts:t,channelId:n.id}),this.trackAction(y.y.PIN_TO_THIS_CONVERSATION_BUTTON,!0))}},{key:"onCopyLink",value:function(){var e=this.props,t=e.channel,n=e.ts,a=e.threadTs,r=e.file,i=e.subtype,o=Object(J.a)(t.id,n,a);r&&"file_comment"!==i&&(o=r.permalink),Object(G.b)(o),this.trackAction(y.y.COPY_LINK_BUTTON,!0)}},{key:"onJump",value:function(){var e=this.props,t=e.channel,n=e.ts,a=e.teamId,r=e.isReply,i=e.jumpOrigin,o=e.clogLinkClick,s=e.featureJumpToMessage,l=this.props.threadTs||this.props.ts;if(s)this.props.jumpToMessage({channelId:t&&t.id,ts:n,threadTs:r&&l});else if(r)this.props.showThread({channelId:t.id,threadTs:l,highlightTs:n,origin:i});else{var c=Object(K.a)({channelId:t.id,ts:n,threadTs:l});Object(K.d)(a,c)}this.props.messageContainerType===te.y.THREADS_VIEW&&this.props.featureReactAllThreads&&o("OPEN_IN_CHANNEL")}},{key:"onRemoveBroadcast",value:function(){var e=this.props,t=e.channelId,n=e.ts;this.props.openModal({element:h.a.createElement(Z.a,{channelId:t,ts:n})}),this.trackAction(y.y.REMOVE_FROM_CONVERSATION_BUTTON,!0)}},{key:"onMoreActionsMenuOpen",value:function(){this.setState(function(){return{moreActionsMenuOpen:!0}}),this.props.onMenuOpen(),this.trackAction(y.y.MORE_ACTIONS_BUTTON)}},{key:"onMoreActionsMenuClose",value:function(){this.setState(function(){return{moreActionsMenuOpen:!1}}),this.props.onMenuClose()}},{key:"onMenuSelectAction",value:function(e,t){return t.id===te.J.editMessage&&(this.onEdit(e),!0)}},{key:"isAutomated",value:function(){return Object(H.a)(this.props.subtype)}},{key:"isTemp",value:function(){return this.props.ts.indexOf("x")>-1}},{key:"trackAction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={action:y.v.CLICK,ui_element:e};t&&(n.step=y.z.MORE_ACTIONS_MENU),this.props.clogger.track(y.k.MSG_ACTION,{contexts:{ui_context:n}})}},{key:"clogMsgStarClick",value:function(){var e=this.props,t=e.channelId,n=e.isStarred,a=e.messageContainerType,r=e.threadTs,i=e.clogger,o=e.clogThreadEvent,s=n?y.k.STAR_REMOVE_CLICKED:y.k.STAR_ADD_CLICKED,l={channel_id:t,parent_message_id:r};a===te.y.THREADS_VIEW?o({event:s,metadata:l}):i.track(s,l)}},{key:"renderStar",value:function(){var e=this.props,t=e.fileId,n=e.subtype,a=e.isStarred,r=e.isEphemeral,i=e.channel;if(!e.showStar)return null;if(r||"tombstone"===n&&!a)return null;var o="message";t&&(o="file_comment"===n?"file comment":"file");var s=void 0;return s=a?"file"===o?ga.t("Unstar file"):"file comment"===o?ga.t("Unstar file comment"):ga.t("Unstar message"):"file"===o?ga.t("Star file"):"file comment"===o?ga.t("Star file comment"):ga.t("Star message"),h.a.createElement(_a.a,{iconType:a?"small-star-filled":"small-star",label:s,onClick:this.onStar,"data-qa":"star_message",tooltipPosition:i?"top":"top-right"})}},{key:"renderShare",value:function(){if(!this.props.showShare)return null;var e=this.props,t=e.ts,n=e.subtype,a=e.featureFileThreads,r=e.isEphemeral,i=e.featureOfflineMode,o=e.wasRecentlyOnline;if(r||"tombstone"===n||Object(U.qb)(t))return null;if(a&&"file_comment"===n)return null;var s="file_share"===n||"file_mention"===n?ga.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):ga.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});return i&&!o&&(s=h.a.createElement(ee.a,{tooltipLabel:s})),h.a.createElement(_a.a,{iconType:"share-action",label:s,onClick:this.onShare,"data-qa":"share_message"})}},{key:"renderReaction",value:function(){return this.props.showReact?"tombstone"===this.props.subtype||this.props.isEphemeral?null:"file_comment"===this.props.subtype&&this.props.featureFileThreads?null:this.props.featureSonicEmoji?h.a.createElement(X.a,{onEmojiSelected:this.onEmojiSelected,onClick:this.props.onEmojiPickerOpen,onClose:this.props.onEmojiPickerClose,showHandyReactions:!0},h.a.createElement(_a.a,{iconType:"small-reaction",label:ga.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),"data-qa":"add_reaction_action"})):h.a.createElement(_a.a,{iconType:"small-reaction",label:ga.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),onClick:this.onAddReaction,"data-qa":"add_reaction_action"}):null}},{key:"renderJump",value:function(){if(!this.props.showJump)return null;if(!this.props.channel)return null;var e=ga.t("Jump");return(this.props.messageContainerType===te.y.THREADS_VIEW&&this.props.featureReactAllThreads||this.props.messageContainerType===te.y.THREADS_FLEXPANE)&&(e=ga.t("Open in channel",{fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"})),h.a.createElement(_a.a,{iconType:"jump",label:e,onClick:this.onJump,"data-qa":"jump_to_message"})}},{key:"renderComment",value:function(){var e=this.props,t=e.showComment,n=e.isEphemeral,a=e.featureAnnounceOnly,r=e.canUserReplyToMessage,i=e.replyCount,o=e.featureFileThreads,s=e.subtype,l=e.fileId,c=e.messageContainerType,u=e.featureOfflineMode,d=e.wasRecentlyOnline,p=i||"thread_broadcast"===s;if(!t)return null;if(this.props.isFileAuthorExternal)return null;if(this.isAutomated()||this.isTemp()||n)return null;if(a&&!r&&!p)return null;if(o&&Object(V.a)(s))return null;var m=void 0;return l&&!o?m=ga.t("Add comment",{fallbackHash:"17279ab497dcbdcde85b46254a98e8017a95cebe"}):c===te.y.THREADS_VIEW?m=ga.t("View thread in sidebar"):a&&!r&&p?m=ga.t("View thread"):p?(m=ga.t("Reply to thread"),u&&!d&&(m=h.a.createElement(ee.a,{tooltipLabel:m}))):(m=ga.t("Start a thread"),u&&!d&&(m=h.a.createElement(ee.a,{tooltipLabel:m}))),h.a.createElement(_a.a,{iconType:"small-reply",label:m,onClick:this.onComment,ariaHasPopup:null,"data-qa":"start_thread"})}},{key:"renderEllipsis",value:function(){var e=this.props,t=e.renderMenuBelowTrigger,n=e.channel,a=e.featureOfflineMode,r=e.wasRecentlyOnline,i=e.showMoreActions;if(!n||!i)return null;var o=ga.t("More actions",{fallbackHash:"3a91b1007dce1af87db6afdb266966dd5d7a3df1"});return a&&!r&&(o=h.a.createElement(ee.a,{tooltipLabel:ga.t("More actions")})),h.a.createElement(ae.e,{renderMenu:this.renderMoreActionsMenu,position:t?"right-bottom":"top-right",allowanceX:t?Ca:0,offsetX:t?Oa:ya,offsetY:t?ja:ka,onOpen:this.onMoreActionsMenuOpen,onClose:this.onMoreActionsMenuClose},h.a.createElement(_a.a,{iconType:"small-ellipsis",label:o,tooltipPosition:"top-right","data-qa":"more_message_actions"}))}},{key:"renderMoreActionsMenu",value:function(e){var t=this.props,n=t.channel,a=t.ts,r=t.messageContainerType,i=t.rollup,o=e.onTriggerClose,s=e.onMenuItemSelected;return h.a.createElement(ba,{rollup:i,ts:a,channelId:n.id,onSelectAction:this.onMenuSelectAction,onTriggerClose:o,onMenuItemSelected:s,messageContainerType:r})}},{key:"render",value:function(){var e=g()("c-message__actions",{"c-message__actions--menu-showing":this.state.moreActionsMenuOpen,"c-message__actions--dense":"dense"===this.props.theme,"c-message__actions--offscreen":this.props.renderOffscreen}),t=ga.t("Message actions");return h.a.createElement(fa.a,{className:e,ariaLabel:t},this.renderReaction(),this.renderJump(),this.renderComment(),this.renderShare(),this.renderStar(),this.renderEllipsis())}}]),t}(p.PureComponent);Ea.displayName="MessageActions",Ea.defaultProps=va;var wa={changeReactionFromUserAction:R.c,pinMessage:O.m,unpinMessage:O.q,updateStar:j.a,openModal:ne.e,previewFile:function(){return I.c.apply(void 0,arguments)},showThread:I.l,showThreadOrRefresh:function(){return T.n.apply(void 0,arguments)},addReminderForMessage:q,openShareDialog:P.a,jumpToMessage:function(){return M.a.apply(void 0,arguments)}};t.a=Object(b.b)(function(e,t){var n=t.fileId,a=t.channelId,r=t.ts,i=Object(w.d)(e,a),o=Object(S.a)(e,a,r);return{channel:i,file:Object(E.h)(e,n),isFileAuthorExternal:Object(E.m)(e,n),featureFileThreads:Object(C.i)(e,"feature_file_threads"),featureSonicEmoji:Object(C.i)(e,"feature_sonic_emoji"),teamId:Object(N.b)(e),clogger:Object(k.a)({state:e}),featureOfflineMode:Object(C.i)(e,"feature_offline_mode"),wasRecentlyOnline:Object(A.h)(e),canUserReplyToMessage:Object(U.r)(e,{message:o,channel:i}),featureReactAllThreads:Object(C.i)(e,"feature_react_all_threads"),featureJumpToMessage:Object(C.i)(e,"feature_jump_to_message"),featureAnnounceOnly:Object(C.i)(e,"feature_announce_only")}},wa)(Ea)},"0xwB":function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"a",function(){return s});var a=n("ROZo"),r=Object(a.b)("TS.permissions.members.canPostInModelOb",function(){return!1}),i=Object(a.b)("TS.permissions.members.canCreateConvertOrgSharedChannels",function(){return!1}),o=Object(a.b)("TS.permissions.members.canUserInviteToWorkspace",function(){return!1}),s=(Object(a.b)("TS.permissions.members.canEditUserGroups",function(){return!1}),Object(a.b)("TS.permissions.members.canCreateAndDeleteUserGroups",function(){return!1}))},"1Uzj":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n("kxpR"),r=n.n(a),i=n("XHGt"),o=n("P2f5"),s=function(e,t){var n=t.fileId;return{file:Object(o.h)(e,n)}};function l(e){return Object(i.b)(s)(function(t){return t&&t.file?r.a.createElement(e,t):null})}},"1YQg":function(e,t,n){"use strict";n.d(t,"f",function(){return c}),n.d(t,"j",function(){return u}),n.d(t,"k",function(){return d}),n.d(t,"l",function(){return p}),n.d(t,"m",function(){return h}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return m}),n.d(t,"b",function(){return i}),n.d(t,"e",function(){return b}),n.d(t,"i",function(){return f}),n.d(t,"g",function(){return o}),n.d(t,"h",function(){return _}),n.d(t,"n",function(){return g});var a,r,i,o,s=n("Z0Cl"),l=n("k55U"),c="calls_server_credentials";function u(e){return e.startsWith("R")}function d(e){return e.startsWith("C")||e.startsWith("D")||e.startsWith("G")}function p(e){return e.startsWith("D")}function h(e){return e.startsWith("C")}function m(e){return void 0!==e.slack_id}function b(e){return void 0!==e.slackId}function f(e){return Object(s.a)(e,function(e){return b(e)})}function _(e){switch(e){case 0:return"good";case 1:return"fair";case 2:return"bad";case 3:return"worst";default:return Object(l.a)(e),"good"}}function g(e){return{token:e.token,tokenExpiry:e.token_expiry,hostname:e.hostname,port:e.port,turn:{username:e.turn_auth.username,password:e.turn_auth.password,ports:e.turn_ports}}}!function(e){e.Cleanup="cleanup",e.Timeout="timeout",e.InviterCancel="inviter_cancel",e.AcceptedTimeout="accepted_timeout",e.CallerHangup="caller_hangup"}(a||(a={})),function(e){e.Accept="accept",e.Reject="reject",e.DoNotDisturb="dnd",e.OnCall="on_call",e.Hangup="hangup",e.Missed="missed"}(r||(r={})),function(e){e.Outgoing="outgoing",e.Incoming="incoming"}(i||(i={})),function(e){e.UserEndedOrphanedCall="UserEndedOrphanedCall",e.OutgoingInviteRejected="OutgoingInviteRejected",e.MaxTeams="rooms_max_teams",e.CallEnded="rooms_call_ended",e.MaxParticipants="rooms_max_participants",e.UnauthorizedRoom="rooms_invalid_room",e.InvalidParameters="rooms_invalid_parameters",e.NoServersAvailable="rooms_no_servers_available",e.UnauthorizedChannel="rooms_invalid_channel"}(o||(o={}))},"1iAE":function(e,t,n){},"1yga":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("owWc"),p=n("F294"),h=n("ifKl"),m=n("kxpR"),b=n.n(m),f=n("aK/h"),_=n("XHGt"),g=n("yPgC"),v=n("tbBR"),y=n("aLpA"),k=n("smxp"),O=n("hOQf"),j=n("HO/Y"),C=n("P2f5"),E=n("nNoG"),w=n("/9ln"),S=n("U3Q0"),I=n("H3xq"),T=n("CaXY"),N=n("DTT0"),R=new E.b("msg_edit"),A=(f.b.string.isRequired,f.b.string.isRequired,f.b.bool,f.b.string,f.b.func,f.b.bool,f.b.string,g.a.Rollup(),f.b.bool,f.b.func,{messageExists:!0,removeMessage:h.a,subtype:void 0,hasFile:!1,fileMode:void 0,rollup:void 0,useBulkDelete:!1,closeModal:h.a}),P=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onGo=e.onGo.bind(e),e}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.maybeCloseModal()}},{key:"componentDidUpdate",value:function(){this.maybeCloseModal()}},{key:"onGo",value:function(){var e=this.props,t=e.ts,n=e.channelId,a=e.removeMessage,r=e.useBulkDelete,i=e.rollup,o=r?Object(d.a)(i,function(e,t){return e.concat(t.timestamps)},[]):[];o.sort(),a({channelId:n,ts:t,rollupTimestamps:r&&o?o:[]}).catch(h.a)}},{key:"getBodyText",value:function(){var e=this.props.subtype;if(!e)return null;var t=this.getFileLabel();if("file_upload"===e){if("file"===t)return R.t("Note that deleting this message will not delete the file that was uploaded.");if("snippet"===t)return R.t("Note that deleting this message will not delete the snippet that was uploaded.");if("post"===t)return R.t("Note that deleting this message will not delete the post that was uploaded.")}else if("file_share"===e){if("file"===t)return R.t("Note that deleting this message will not unshare the file.");if("snippet"===t)return R.t("Note that deleting this message will not unshare the snippet.");if("post"===t)return R.t("Note that deleting this message will not unshare the post.")}else if("file_comment"===e)return R.t("Note that deleting this message will not delete the comment.");return null}},{key:"getFileLabel",value:function(){var e=this.props,t=e.hasFile,n=e.fileMode;return t?"snippet"===n?"snippet":"post"===n?"post":"file":null}},{key:"maybeCloseModal",value:function(){this.props.messageExists||this.props.closeModal()}},{key:"render",value:function(){var e=this.props,t=e.ts,n=e.channelId,a=e.rollup,r=e.useBulkDelete;if(!e.messageExists)return null;var i=this.getBodyText();return b.a.createElement(v.a,{id:y.y.DELETE_MSG_DIALOG},b.a.createElement(S.a,{title:R.t("Delete message"),goButtonText:R.t("Delete"),goButtonType:"danger",onGo:this.onGo},R.t("Are you sure you want to delete this message? This cannot be undone."),i&&b.a.createElement("div",{className:"margin_top_50"},i),b.a.createElement("div",{className:"margin_top_100"},b.a.createElement(I.a,{ts:t,channelId:n,rollup:r&&a?a:null,blocksContainerContext:T.a.delete_dialog,isStandalone:!0}))))}}]),t}(m.PureComponent);P.displayName="BaseDeleteMessageDialog",P.defaultProps=A;var M={removeMessage:function(){return w.a.apply(void 0,arguments)},closeModal:function(){return N.a.apply(void 0,arguments)}},D=Object(_.b)(function(e,t){var n=t.channelId,a=t.ts,r=t.rollup,i=Object(j.i)(e,"feature_file_threads"),o=Object(j.i)(e,"feature_allow_bulk_delete_join_leave_messages"),s=Object(k.a)(e,n,a);if(!s)return{messageExists:!1};var l=i?null:s.file,c=i?s.files:null,u=i?Object(C.h)(e,Object(p.a)(c)):Object(C.h)(e,l),d=!1,h=void 0;u&&(d=!0,h=u.mode);var m=!(!o||!r);return{messageExists:!0,hasFile:d,fileMode:h,subtype:Object(O.N)(s),rollup:r,useBulkDelete:m}},M)(P);D.propTypes={channelId:f.b.string.isRequired,ts:f.b.string.isRequired},t.a=D},"20nV":function(e,t,n){},"2Dlx":function(e,t,n){},"2FVR":function(e,t,n){},"2LCd":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),h=n("aK/h"),m=n("MIIS"),b=n("OZf9"),f=n("CpTu"),_=n("XHGt"),g=n("yHhI"),v=n("UF3u"),y=(h.b.string.isRequired,h.b.string,h.b.string,h.b.object.isRequired,0),k=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.originalFavicon=n.findFavicon(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){y&&this.props.logger.error("Multiple Favicons mounted"),y+=1,this.updateFavicon()}},{key:"componentDidUpdate",value:function(e){Object(v.a)(this.getFaviconProps(e),this.getFaviconProps(this.props))||this.updateFavicon()}},{key:"componentWillUnmount",value:function(){y-=1,this.setOrRemoveFavicon(this.originalFavicon)}},{key:"getFaviconProps",value:function(e){return{rel:"shortcut icon",href:e.href,sizes:e.sizes,type:e.type}}},{key:"setOrRemoveFavicon",value:function(e){var t=document.querySelector("head");if(t){var n=this.findFavicon();n?e?t.replaceChild(e,n):n.remove():e&&t.appendChild(e)}else this.logger.error("<head> not found")}},{key:"findFavicon",value:function(){var e=document.querySelectorAll("head > link");return Object(f.a)(e,function(e){var t=e.getAttribute("rel");return!(!t||!t.split(" ").includes("icon"))})}},{key:"updateFavicon",value:function(){var e=document.createElement("link");Object(b.a)(this.getFaviconProps(this.props),function(t,n){e.setAttribute(n,t)}),this.setOrRemoveFavicon(e)}},{key:"render",value:function(){return null}}]),t}(d.PureComponent);k.displayName="Favicon",k.defaultProps={sizes:"16x16 32x32 48x48",type:"image/png"};var O=Object(_.b)(function(e){return{logger:Object(g.a)({state:e})}})(k),j=n("13mM"),C=n("0NgK"),E=n("9kTo"),w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABNVBMVEVKFEz///9NGE+EX4VLFU3w7PD9/f1SH1Tb0Nv59/n18/W4orhZKFt2TnhwRXF2TXdpPGqghKFMFk7FtMZTIFVhMmNxR3PHt8hfL2F6U3xpPWt/WYD+/v5nOWhWI1edgJ7z8POBW4LIuMhySHS6pruHZIl/WoGJZopuQ3CObI/Vydba0NtsQW7ArcHw6/DEs8VYJlqojqnx7fH8/PyfgqDGtcbg1+Du6e7e1N5kN2Z8VX2fg6BbKlxOGVBxRnJ4T3ljNWV6UnuDXoSLaIyih6NMF07az9qWd5f8+/zUx9Ts5+zj2+Pv6u/t5+13Tni1n7WYeZlTH1XYzdn49vjLu8uIZYm5pLpmOGipkKqMaY2UdJXr5euZe5prP2xsQG2JZovTxtSnjahOGlDSxdOQcJKHY4hXJVnkajHYAAABJUlEQVR4Xr3PNXbFMBCF4Tvmx8wYZmZmZmaG/S8hHke2UuikfF9xp9DfCC3V4YQzUeB01umDStYkogKS5EpCIUGukLHOZwMKRYsLrYv3EyqTljqQcm26DmWQXen2HNsIgrNEUf7PJGGm1w/yJlkLEBwK9PvBgLtWTgRhGQxD53OHCT5rIpiSwRCe+QyCt1kXQbQQIk9oZBQYGz9sAETV6RgChuaBpGlpSHPzlcoilpZLqwDikXZPZtOG0CCXvrXt7g7iu+TbM0Sw7wUx3gNESCqL4IiDfA9vGCck1USQIqLztAjKF+S7hO/qOmVDBLi57fRE7jX8FQRqMugienj8P3A9QeGLg+bveYFCjYNXxPiUoPJWJTOOd4foQ4OSHeUH47uO1voBEO4eo1Zt+vMAAAAASUVORK5CYII=",I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAC9UlEQVR4AdSVA4wfXxDH/7H/rm3bttvzVWfbtm3btm3bVnC27Wk23dvu/VxPvsGbTOaz7w32j5f/v6ZKz/97mXSQoeIIM4WiGvDsvxeFh5l+H4Dsc/m26raZqZmC+MIPx9kQQNaZ998GwLyfdXx4fO2zFSUVg1PwplAZs/y3ASi+UVrD2MLcwqstb7TYtCuNXL8NgOscz8rKCpbxZju9Pq9he2lVxTHWb1MDL11vLAMABnxGY2NjRTwa36yLeC7y6bDp6nMZgOBoxG+ysLBQl1tUDqWmFgBVVaZX0fqog5MSnTLTPhYIQABwJ7hEga13xVEWKgDQkdiewdnowKjkI2kEAMelpaWurq58NatyygHQ72skraGkEQWsrq7CQ3V0dBg/4S84zEgRAKaJNGB8aBzCoBLIEWGoc2g8++d2HocK9BUZQGFCIWlAdkQOhInfl0A9wBC9J/7k32f19fXZkXG5apZF9NLFN7gLjzDBOkk8SO+779UGADYBzCpM0+bU4MyPK3h/9CMSGWwZMjEyMTY45qHtCccX/72Cq0DZ4cXiI+LZbrNf++sG6MZfN2/9fQffpjCr0Ow4kW1liHm9je7llk/LHJYVKjh+AeC/JqjOqqH1QRvEdpIdPHQ7GGSeyqoyq/NdEUDDpJ/IJPsmFycX4wQL0dfID21oRBsAuO8axqCY8FGtVa2ox1HJCcm+vLRMolT1RfXwDAQAw33DOIAinTLW09XWBWHw7WvkTOSOGAHASN8INkjmmZyJoCnWA30MYQleCWQBQjeECQC89X3QiOaKltdb6QgC4OvmZ+dJZC9LKyNcA5CxgEmKfyqQkEIRBIAErwuHWIemBqbhBK9nL++A6zoS25QwgFpRDUB2EdhQz5CLmut3BCAmdk+cdoARnzE219T41GaniaAZ7QDoNmyuusJ6cOKGA4acdgAoyCIYViYkgn8RzDB46HYyoH+O2oI6sptqfYTrZGCSBRa0YIMQBWK4amSYcjiFqYgwGhkWAAA494XLYBFPegAAAABJRU5ErkJggg==",T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABSlBMVEVKFEyScpNLFU1iNGSMao17VH2Qb5FZKFtNGE9hMmPGJFKObZCOb4+EX4WRcZJjNWVHE0lcK15sQG2Iaol2TXdIE0pQHFJaKVxVIlfMJVNwRXHMJVRdLV98VX1WI1dsQW5WJFhOGVA3DzlMFk5PG1FfL2GLaIzNJVOBW4J3Tnh9Vn5gMGGIXXu6JlKPcJCaRWdYJ1pbK11TIFV+Yn9zKE/FJFFSH1SCXINTI1WzNFxYJlpWJVhFEke3IlB3T2uTP2CwMlq+K1a2Ik+WP2FHETylNlyNa46MaY1/Y39sT21HIUheMGA5Dzo7ED1JFEtgM2JeLmBZMFpRHVNhM2N5UXunN11UIVZgMWJ5XnptQm9pPGqBWHbIKFSHZImiH0uQcZF1THaMR2dJE0uDXoR9V392TniBZYJnOmmKZ4tpPWtXJVmObI9vRHFOGlBSjo4eAAABPUlEQVR4Xr3QNWPrQBCF0TtiMzNTmJmZmZnh8fv/bVYrGWRbKVLka+c0c9FcZL7TUgvwO78OYh6XHIW/3w4UJCLKYGraDgwTS8HuoB2YID3hsC9lAxDk4DR0bgcwculwQHTf3rWAQqCXF9AA8TH0nGgCMYnMNocg0sCP1YQVeKjWJANe9+jYuAW46kCCg5g4XltPNQC5Ds4wQ0zMzl0tLC4tO50rD2BFM4oBFLkMJDekIF7coa3tnWJxbx9GAg/1BBxE/KwIB/GjSuUEJTV9AUAN9/Dka80yoUPQn7mB6qVqXTDr4CCgs3uEqV6+EcR8OnDhqQFkTZBj4FUwQV6pgTdU873nNJgA8WQ3L/xTgCUT2GcCkejX788B6w9aMy5/DeBrB7LGNnyONNr1j0hSUfIwJqBtWpQfyv/xvX0AvdA4SuBm2+sAAAAASUVORK5CYII=",A="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAw0lEQVR4AWOAg4IAAYaqqHqG6sj9QPo/jfB5IE5gwAAVEQpAifsgRXTC98F2wgB9LUc4AhzqoCCBC9IfNzAwVEefHzAHVALTG4gxoJiQglEHJKyZ8b9hzxpyMEgv5Q64//71f3LB/XevaRwFo2lgNA2MpoHRNDCaBgjHOZ3SACLOh2IUjDpg1AGV0fsHrlkO7KqBOgcD5oCKCGA/sSFBANhBoHvXDGQnSucUJEBPy8F2ogNwkFRH0ayrBu36N4A7pVAAAK813oG8J1mnAAAAAElFTkSuQmCC",P=(h.b.shape({getState:h.b.func.isRequired,subscribeImmediate:h.b.func,subscribe:h.b.func.isRequired}).isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderWithState=n.renderWithState.bind(n),n}return u()(t,e),o()(t,[{key:"renderWithState",value:function(e){var t=Object(j.d)(e),n=!!Object(C.f)(e),a=Object(C.o)(e),r=void 0;return t?r=n?I:a?S:Object(E.a)()?A:w:(r=T,r=n?R:a?N:T),p.a.createElement(O,{href:r})}},{key:"render",value:function(){return p.a.createElement(m.a,{render:this.renderWithState,store:this.props.store})}}]),t}(d.Component));P.displayName="WorkspaceFavicon";var M=P;t.a=M},"2QQA":function(e,t,n){e.exports=n.p+"pop_v2-d2b79fa.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},"2XjY":function(e,t,n){},"2ekl":function(e,t,n){},"2ojh":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=new(n("nNoG").b)("message");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentUserId,n=e.pinnedBy,r=e.renderPinnedBy;return n?n===t?a.t("Pinned by you"):a.rt("Pinned by {member}",{member:r(n)}):a.t("Pinned")}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.long,n=void 0!==t&&t,r=e.renderStarButton,i=e.featureMessageLabelsCopy;return n?a.rt("<star>Added to your starred items</star>",null,r):i?a.rt("<star>Starred</star>",null,r):a.rt("<star>starred</star>",null,r)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,n=e.isStarred,o=e.isEphemeral,s=e.isBroadcast,l=e.isCustomResponse,c=e.isSliHighlight,u=e.isSelfIm,d=e.isSlackbotIm,p=e.currentUserId,h=e.pinnedBy,m=e.renderPinnedBy,b=e.renderStarButton,f=e.renderHighlight,_=e.renderBroadcast,g=e.featureMessageLabelsCopy;return o?u||d?null:a.t("Only visible to you"):g&&s?t&&n?a.rt("<a>Also sent to the channel</a> \u2219 {pinned} \u2219 {starred}",{pinned:r({currentUserId:p,pinnedBy:h,renderPinnedBy:m}),starred:i({renderStarButton:b,featureMessageLabelsCopy:g}),fallbackHash:"d2f0c6a83913776accbe386c64ce06300680f44f"},_):n?a.rt("<a>Also sent to the channel</a> \u2219 {starred}",{starred:i({renderStarButton:b,featureMessageLabelsCopy:g}),fallbackHash:"aead0d7a1eed4a8c18d29d9377a3f4fabc60f2cc"},_):t?a.rt("<a>Also sent to the channel</a> \u2219 {pinned}",{pinned:r({currentUserId:p,pinnedBy:h,renderPinnedBy:m}),fallbackHash:"b25a074514a36f2157703e7f0f332143878f55a8"},_):a.rt("<a>Also sent to the channel</a>",{fallbackHash:"5ee7c5390f0e1abffe537265bbbbb3316238001a"},_):l?t&&n?a.rt("{pinned} \u2219 {starred} \u2219 Custom response",{pinned:r({currentUserId:p,pinnedBy:h,renderPinnedBy:m}),starred:i({renderStarButton:b,featureMessageLabelsCopy:g})}):n?a.rt("{starred} \u2219 Custom response",{starred:i({long:!0,renderStarButton:b,featureMessageLabelsCopy:g})}):t?a.rt("{pinned} \u2219 Custom response",{pinned:r({currentUserId:p,pinnedBy:h,renderPinnedBy:m})}):a.t("Custom response"):c?t&&n?a.rt("{pinned} \u2219 {starred} \u2219 {highlight}",{highlight:f(),pinned:r({currentUserId:p,pinnedBy:h,renderPinnedBy:m}),starred:i({renderStarButton:b,featureMessageLabelsCopy:g})}):n?a.rt("{starred} \u2219 {highlight}",{highlight:f(),starred:i({long:!0,renderStarButton:b,featureMessageLabelsCopy:g})}):t?a.rt("{pinned} \u2219 {highlight}",{highlight:f(),pinned:r({currentUserId:p,pinnedBy:h,renderPinnedBy:m})}):a.rt("{highlight}",{highlight:f()}):t&&n?a.rt("{pinned} \u2219 {starred}",{pinned:r({currentUserId:p,pinnedBy:h,renderPinnedBy:m}),starred:i({renderStarButton:b,featureMessageLabelsCopy:g})}):t?r({currentUserId:p,pinnedBy:h,renderPinnedBy:m}):n?i({long:!0,renderStarButton:b,featureMessageLabelsCopy:g}):null}},"34TR":function(e,t,n){},"3K8Y":function(e,t,n){e.exports=n.p+"confirmation_v2-de3a4ae.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},"3dej":function(e,t,n){},"3ise":function(e,t,n){},"3lVB":function(e,t,n){"use strict";n.d(t,"b",function(){return r});var a=null;function r(){return a}t.a=function(e){var t=e.prevTeamId,n=e.nextTeamId,r=e.navigationTimestamp;return t===n?Promise.resolve():(a=r,Promise.resolve())}},"3rHJ":function(e,t,n){},"445Q":function(e,t,n){},"4EIq":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("vJtL"),p=n("aK/h"),h=n("kxpR"),m=n("XHGt"),b=n("uf9I"),f=function(e,t){return e+"-"+t},_={add:function(e,t,n){this.sections||(this.sections={});var a=f(e,t);this.sections[a]||(this.sections[a]=n)},remove:function(e,t){if(this.sections){var n=f(e,t);this.sections[n]&&(this.sections[n]=null,delete this.sections[n])}},get:function(e,t){if(this.sections)return this.sections[f(e,t)]}},g=(p.b.string.isRequired,p.b.number.isRequired,p.b.object.isRequired,p.b.node,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=e.component,i=a.focus,o=a.blur;if(Object(d.a)(i)&&Object(d.a)(o))return l()(n);throw new Error("FocusableSection requires a single child that implements focus and blur methods.")}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.teamId,n=e.order,a=e.component;_.add(t,n,a)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.teamId,n=e.order;_.remove(t,n)}},{key:"render",value:function(){return this.props.children}}]),t}(h.PureComponent));g.displayName="FocusableSection",g.defaultProps={children:null};var v=Object(m.b)(function(e){return{teamId:Object(b.b)(e)}})(g);n.d(t,"a",function(){return v})},"4RH7":function(e,t,n){"use strict";var a=n("uXhx"),r=n("NFsq"),i=n("4Ok1"),o=n("aK/h"),s=n("kxpR"),l=n.n(s),c=n("XHGt"),u=n("MnCE"),d=n("TSYQ"),p=n.n(d),h=n("HO/Y"),m=n("RAhH"),b=n("nNoG"),f=n("05v1"),_=n("Fdc0"),g=new b.b("threads"),v=(o.b.string,o.b.arrayOf(o.b.string).isRequired,o.b.number.isRequired,o.b.number,o.b.bool,o.b.bool,o.b.bool,{className:void 0,replyCount:0,prefixWithReplyCount:!1,includesSelf:!1,broadcastPreabmle:!1});function y(e){var t=e.className,n=e.participantNames,a=e.replyUsersCount,r=e.replyCount,o=e.prefixWithReplyCount,s=e.includesSelf,c=e.broadcastPreabmle;if(0===a)return null;var u=p()("p-thread_participant_list",t);return l.a.createElement("span",{className:u,"data-qa":"thread_participant_list"},a<=3?function(e){var t=e.participantNames,n=e.includesSelf,a=e.replyCount,r=e.replyUsersCount,i=e.prefixWithReplyCount;if(e.broadcastPreabmle&&1===a)return g.rt("1 reply");if(n)switch(r){case 1:return i?g.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from you",{replyCount:a}):g.t("Just you");case 2:return i?g.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName} and you",{replyCount:a,userName:t[0]}):g.rt("{userName} and you",{userName:t[0]});default:return i?g.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and you",{replyCount:a,userName1:t[0],userName2:t[1]}):g.rt("{userName1}, {userName2}, and you",{userName1:t[0],userName2:t[1]})}var o=Object(b.h)(t,{noEscape:!0}).join("");return i?g.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {names}",{replyCount:a,names:o}):o}({participantNames:n,replyCount:r,replyUsersCount:a,prefixWithReplyCount:o,includesSelf:s,broadcastPreabmle:c}):function(e){var t=e.participantNames,n=e.replyUsersCount,a=e.replyCount,r=e.prefixWithReplyCount,o=n-2,s=Object(i.a)(t,2);s.length<o&&s.push(g.rt("others"));var c=Object(b.h)(s,{noEscape:!0}).join("");return r?g.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{replyCount:a,userName1:t[0],userName2:t[1],numOthers:o},function(e){var t=e.text;return l.a.createElement(m.c,{tip:c},l.a.createElement("span",null,t))}):g.rt("{userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{userName1:t[0],userName2:t[1],numOthers:o},function(e){var t=e.text;return l.a.createElement(m.c,{tip:c},l.a.createElement("span",null,t))})}({participantNames:n,replyCount:r,replyUsersCount:a,prefixWithReplyCount:o}))}y.displayName="ThreadParticipantList",y.defaultProps=v;Object(u.a)(y);var k=Object(c.b)(function(e,t){var n=t.replyUsers,i=t.replyUsersCount,o=Object(h.b)(e),s=Object(r.a)(n,o),l=Object(r.a)(n,_.a),c=Object(f.a)(e,n);return i||(i=n.length),{participantNames:l?Object(a.a)(c,function(e){return e===_.b}):c,replyUsersCount:l?i-1:i,includesSelf:s}})(y);t.a=k},"4lvZ":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=(n("aK/h"),n("OZf9")),h=n("UXvI"),m=n("ifKl"),b=n("HO/Y"),f=n("WDWG"),_=n("kOzZ"),g=n("/V1y"),v=0,y=6e4,k=["focus","focusin","touchstart","mousedown","mouseup","wheel","keydown","keyup","beforeinput","input","scroll","compositionstart","compositionupdate","compositionend"];function O(e){if(!Object(b.i)(e(),"feature_track_time_spent"))return m.a;var t={capture:!0,passive:!0},n=setInterval(function(){return function(e){var t=e(),n=Object(g.a)(Object(g.c)(t)),a=Object(_.a)({state:t});Object(p.a)(n,function(e){null===e.lastLogged?a.track("SESSION_START",{client_session:j(e)}):e.isActive&&e.needsRefresh&&a.track("SESSION_REFRESH",{client_session:j(e)}),e.isActive||a.track("SESSION_END",{client_session:j(e)})})}(e)},y),a=Object(h.a)(function(){document.hasFocus&&document.hasFocus()&&Object(g.e)(Object(g.c)(e()))},5e3,{leading:!0,trailing:!0});k.forEach(function(e){window.addEventListener(e,a,t)});return function(){k.forEach(function(e){window.removeEventListener(e,a,t)}),clearInterval(n)}}function j(e){return{uid:e.id,timestamp_start:Object(f.a)(e.startTime),timestamp_refresh:Object(f.a)(e.lastActivity),version:v}}var C=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.removeListener=null,n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this;this.removeListener=O(function(){return e.props.store.getState()})}},{key:"componentWillUnmount",value:function(){this.removeListener&&(this.removeListener(),this.removeListener=null)}},{key:"render",value:function(){return this.props.children}}]),t}(d.Component);C.displayName="TrackTimeSpent";t.a=C;C.defaultProps={children:null}},"4tN7":function(e,t,n){},"533h":function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("jo6Y"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),h=n("mRg0"),m=n.n(h),b=n("ifKl"),f=n("kxpR"),_=n.n(f),g=(n("aK/h"),n("XHGt")),v=n("TSYQ"),y=n.n(v),k=n("HvGc"),O=n("18Pa"),j=n("RAhH"),C=n("nNoG"),E=(n("LFzE"),new C.b("flexpane")),w=function(e){function t(e){l()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.closeButtonRef=_.a.createRef(),n.focus=n.focus.bind(n),n}return m()(t,e),u()(t,[{key:"focus",value:function(){var e=this.closeButtonRef.current;e&&e.focus()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.onOptionsClick,r=e.optionsHref,i=e.optionsIconType,o=e.optionsTooltipText,s=e.renderSecondary,l=a||r,c=l?j.a:1e3,u=s(),d=o||E.t("View options",{fallbackHash:"a09052c3b42360a3492e17c37d74b78324785541",fallbackHashNs:"mentions"});return _.a.createElement("div",{className:y()("p-flexpane_header",n)},_.a.createElement("div",{className:"p-flexpane_header__primary"},_.a.createElement("div",{className:"p-flexpane_header__primary_content"},t),l&&_.a.createElement(j.c,{delay:c,tip:d},_.a.createElement(O.a,{"aria-label":E.t("View options",{fallbackHash:"a09052c3b42360a3492e17c37d74b78324785541",fallbackHashNs:"mentions"}),className:"p-flexpane_header__control",icon:i,href:r,onClick:a})),_.a.createElement(j.c,{delay:c,tip:E.t("Close",{fallbackHash:"1f863990d6ec5b308a2330f10e271f087ccf0bf7"})},_.a.createElement(O.a,{"aria-label":E.t("Close Right Sidebar"),className:"p-flexpane_header__control",onClick:this.props.closeFlexpane,"data-qa":"close_flexpane",icon:"times",ref:this.closeButtonRef}))),u&&_.a.createElement("div",{className:"p-flexpane_header__secondary"},u))}}]),t}(f.PureComponent);w.displayName="FlexpaneHeader",w.defaultProps={children:null,className:void 0,closeFlexpane:b.a,onOptionsClick:void 0,optionsHref:void 0,optionsIconType:"filters",optionsTooltipText:void 0,renderSecondary:b.a};var S=Object(g.b)(null,{closeFlexpane:k.a})(function(e){var t=e.forwardedRef,n=o()(e,["forwardedRef"]);return _.a.createElement(w,r()({ref:t},n))});t.a=_.a.forwardRef(function(e,t){return _.a.createElement(S,r()({forwardedRef:t},e))})},"59b6":function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return p});var a=n("nNoG"),r=n("HO/Y"),i=n("AFNo"),o=n("Fdc0"),s=n("+yrr"),l=n("OX5w"),c=n("7Ztl"),u=new a.b("calls"),d=Object(i.e)(function(e){if(Object(r.i)(e,"feature_spock_calls_a11y")){var t=e.activeCall.incomingInviterUserId&&Object(o.Q)(e,e.activeCall.incomingInviterUserId),n=e.activeCall.name,a=Object(l.c)(e),i=e.activeCall.hasJoined,c=Object(s.u)(e),d=c.length,p=Object(l.d)(e),h=Object(s.g)(e);if(n&&i)return n;if(p)return u.t("{inviterName} is calling you",{inviterName:t});if(a&&!d&&h.length){var m=Object(o.Q)(e,h[0]),b=h.length-1;return h.length>1?u.t("Calling {namedInvitedUser} and {remainingInvitedUserCount,plural,=1{# other person}other{# other people}}",{namedInvitedUser:m,remainingInvitedUserCount:b,fallbackHash:"1f193c850fe96a988a352bb5c38247343e49f235"}):u.t("Calling {namedInvitedUser}",{namedInvitedUser:m})}if(!d)return u.t("Slack call, waiting for others to join");var f=Object(o.Q)(e,c[0]),_=c.length-1;return c.length>1?u.t("Slack call with {namedPeer} and {remainingJoinedPeers,plural,=1{# other person}other{# other people}}",{namedPeer:f,remainingJoinedPeers:_,fallbackHash:"6f6600f1cf4eef0e7f75926baabfc8baf445c5c8"}):u.t("Slack call with {namedPeer}",{namedPeer:f})}}),p=Object(i.e)(function(e){if(Object(r.i)(e,"feature_spock_calls_a11y")){var t=Object(c.c)(e),n=t&&t.incomingInvite&&Object(o.Q)(e,t.incomingInvite.userId);return n?u.t("{inviterName} is calling you",{inviterName:n}):u.t("Incoming call")}})},"5APj":function(e,t,n){"use strict";var a=n("ZGcR"),r=n("kxpR"),i=n.n(r),o=n("XHGt"),s=n("aK/h"),l=/(^_+|_+$|[^\w])/g,c=/_+(\w)/g;var u=n("HO/Y"),d=n("xsFx"),p=n("OYPW");s.b.node.isRequired,s.b.object.isRequired;function h(e){var t=e.featureFlags,n=e.children,r=Object(p.a)(function(){return Object(a.a)(t,function(e,t){return(n=t)?n.toLowerCase().replace(l,"").replace(c,function(e,t){return t.toUpperCase()}):"";var n})},[t]);return i.a.createElement(d.a.Provider,{value:r},n)}h.displayName="FeatureFlagContextProvider";t.a=Object(o.b)(function(e){return{featureFlags:Object(u.c)(e)}})(h)},"5DNE":function(e,t,n){},"5NHF":function(e,t,n){},"5g6K":function(e,t,n){},"5oz1":function(e,t,n){},"67Ky":function(e,t,n){},"6EwF":function(e,t,n){"use strict";n.r(t);var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),h=n("NZ+B"),m=n("tn36"),b=n("kxpR"),f=n.n(b),_=n("aK/h"),g=n("XHGt"),v=n("TSYQ"),y=n.n(v),k=n("sJy+"),O=n("U3Q0"),j=n("Rszm"),C=n("O0RF"),E=n("8wro"),w=n("XfeM"),S=n("HO/Y"),I=n("uf9I"),T=n("cTgs"),N=n("h9dl"),R=n("H2PH"),A=n("nNoG"),P=n("oLrU"),M=n("e+d/"),D=new A.b("snippet-dialog"),x=Object(w.b)("Upload a Snippet, maybe share it too",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.broadcast,r=n.fileName,i=n.fileType,o=n.fileContent,s=n.channelOrMemberId,l=n.threadTs,c=n.introMessage,u=t(),d=Object(S.i)(u,"feature_sonic_snippets"),p=r||(d?D.t("Untitled"):""),h=M.a[i],m=h&&h.mimeType||"text/plain",b=new Blob([o],{type:m});b.name=p,b.snippetType=i;var f=Object(I.b)(u),_=Object(R.a)(f);return s?e(Object(N.a)({channelOrMemberId:s})).then(function(t){return _.uploadFiles({files:[b],shareData:{channelId:t,threadTs:t?l:void 0,clientMsgId:t?Object(P.a)():void 0,introMessage:c,broadcast:!(!t||!l)&&a}}).then(function(){return e(Object(T.a)({id:t}))})}):_.uploadFiles({files:[b]})});x.propTypes={fileName:_.b.string,fileType:_.b.string,fileContent:_.b.string.isRequired,channelOrMemberId:_.b.string,threadTs:_.b.string,introMessage:_.b.string,broadcast:_.b.bool};var L=x,F=n("aLpA"),B=n("RB1+"),q=n("JvzI"),U=n("+1yX"),H=n("XoJV"),G=n("DTT0"),W=n("IyaR"),K=n("Y6FH"),V=n("Hvpu"),z=n("Zwlx"),Y=n("iJ4v"),Q=n("r6UO");n("T/b3");n.d(t,"BaseSnippetDialog",function(){return Z});var J=new A.b("snippet-dialog"),X=(_.b.string,_.b.string,_.b.string,_.b.string,_.b.bool,_.b.string,_.b.string,_.b.string,_.b.string,_.b.func.isRequired,_.b.func.isRequired,_.b.func.isRequired,_.b.bool,_.b.string,_.b.func.isRequired,_.b.string,_.b.func.isRequired,_.b.string,_.b.oneOf(["mpim","im","channel","private"]),_.b.node.isRequired,_.b.bool.isRequired,_.b.bool.isRequired,{initialName:"",initialType:void 0,initialSnippetText:"",initialChannelId:void 0,initialShareWith:void 0,threadTs:void 0,viewContext:void 0,resetSnippetText:void 0,resetChannelId:void 0,featureSonicSnippets:!1,msgText:"",channelType:null,selectedChannelId:null,disallowedKeywordInMsgText:null}),Z=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(m.a)(n,["handleBroadcastChange","handleFileNameChange","handleFileTypeChange","handleFileContentChange","handleShareWithChange","handleMsgTextChange","handleSubmit","handleSubmitError","shouldShowSpeedBump","handleCancel"]),n.state={fileName:e.initialName,fileType:e.initialType,fileContent:e.initialSnippetText,shareWith:Object(h.a)(e.initialShareWith)?e.initialShareWith:!!e.initialChannelId,overMsgLengthLimit:!1,broadcast:!1},n}return p()(t,e),l()(t,[{key:"isGoButtonDisabled",value:function(){var e=this.props,t=e.disallowedKeywordInMsgText,n=e.canPostInSelectedChannel,a=e.threadTs,r=e.canThread,i=this.state,o=i.overMsgLengthLimit,s=i.fileName,l=i.fileContent,c=i.shareWith,u=s.length>F.r;return c&&!n&&!a||c&&a&&!r||!!t||!l||o||u}},{key:"shouldShowSpeedBump",value:function(e){return("cancel"===e||"close"===e)&&this.state.fileContent!==this.props.resetSnippetText}},{key:"handleBroadcastChange",value:function(e){this.setState(function(){return{broadcast:e}})}},{key:"handleFileNameChange",value:function(e){this.setState(function(){return{fileName:e}})}},{key:"handleFileTypeChange",value:function(e){this.setState(function(){return{fileType:e}})}},{key:"handleFileContentChange",value:function(e){this.setState(function(){return{fileContent:e}})}},{key:"handleShareWithChange",value:function(e){var t=e.target.checked;this.setState(function(){return{shareWith:!!t}})}},{key:"handleMsgTextChange",value:function(e){var t=e.text,n=e.overLimit;this.props.setMsgText(t),this.setState(function(){return{overMsgLengthLimit:n}})}},{key:"handleSubmit",value:function(){var e=this.props,t=e.selectedChannelId,n=e.msgText,a=e.threadTs,r=this.state,i=r.broadcast,o=r.fileName,s=r.fileType,l=r.fileContent,c=r.shareWith;this.props.uploadSnippet({fileName:Object(H.c)({locale:Object(q.a)(),text:o}),fileType:s,fileContent:l,channelOrMemberId:c?t:void 0,threadTs:c?a:void 0,introMessage:n,broadcast:i}).catch(this.handleSubmitError),this.props.closeModal()}},{key:"handleSubmitError",value:function(){var e=this.props,t=e.selectedChannelId,n=e.threadTs,a=e.msgText,r=e.resetSnippetText,i=e.resetChannelId,o=e.viewContext,s=this.state,l=s.fileName,c=s.fileType,u=s.fileContent,d=s.shareWith;this.props.openModal({element:f.a.createElement(ee,{initialName:l,initialType:c,initialSnippetText:u,initialChannelId:t,initialShareWith:d,initialText:a,threadTs:n,resetSnippetText:r,resetChannelId:i,viewContext:o})})}},{key:"handleCancel",value:function(){var e=this.props,t=e.resetSnippetText,n=e.resetChannelId,a=e.threadTs,r=e.viewContext;if(t){var i=Object(B.a)({channelId:n,threadTs:a,viewContext:r});i&&i.setText&&i.setText(t)}}},{key:"maybeRenderBroadcast",value:function(){var e=this.props,t=e.threadTs,n=e.canPostInSelectedChannel,a=e.channelType,r=e.selectedChannelName,i=this.state.broadcast;return t&&n?f.a.createElement("div",{className:"p-snippet_dialog__broadcast_section"},f.a.createElement(Q.a,{channelType:a,selectedChannelName:r,value:i,onChange:this.handleBroadcastChange})):null}},{key:"renderShareWith",value:function(){var e=this.state.shareWith,t=J.t("Share with:",{fallbackHash:"134bfa9822f411e84749498f9747ec887fd5d0fd",fallbackHashNs:"share-dialog"});return f.a.createElement(C.a,{text:t,htmlFor:"create-snippet-share-with-checkbox",type:"inline"},f.a.createElement(j.a,{id:"create-snippet-share-with-checkbox","data-qa":"share_with",checked:e,onChange:this.handleShareWithChange}))}},{key:"renderChannelPicker",value:function(){var e=this.props,t=e.selectedChannelId,n=e.setSelectedChannel,a=this.state.shareWith;return f.a.createElement(K.a,{onChange:n,initialChannelId:t,isDisabled:!a,optionsListOffsetBottom:window.innerHeight})}},{key:"renderShareWithPicker",value:function(){var e=this.props,t=e.selectedChannelId,n=e.featureSonicSnippets,a=e.threadTs;return a?f.a.createElement(Y.a,{label:n?J.t("Sharing snippet in a thread"):"",channelId:t,threadTs:a}):f.a.createElement("div",{className:"p-snippet_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderShareAlert",value:function(){if(!this.state.shareWith)return null;var e=Object(z.a)(r()({},this.props));return e?f.a.createElement("div",{className:"p-share_dialog__section"},f.a.createElement(k.d,{type:"inline",level:"warning",className:"margin_bottom_100"},e)):null}},{key:"renderMessageInput",value:function(){var e=this.props,t=e.selectedChannelId,n=e.msgText,a=this.state.shareWith,r=J.t("Add a message, if you\u2019d like.",{fallbackHash:"23c9aa1fa55b5fbe8da1b3748ad70b595d6fadc5",fallbackHashNs:"share-dialog"}),i=y()("p-share_dialog__section","p-share_dialog__create_snippet_message_input",{"p-share_dialog__create_snippet_message_input--hide":!a}),o=Object(U.a)(t)?t:void 0;return f.a.createElement("div",{className:i},f.a.createElement(W.a,{text:n,channelId:o,onTextChange:this.handleMsgTextChange,enabled:a,placeholder:r,ariaLabel:r,onEnter:this.onGo}),this.maybeRenderBroadcast())}},{key:"render",value:function(){var e=this.state,t=e.fileName,n=e.fileType,a=e.fileContent;if(!this.props.featureSonicSnippets)return null;var r=J.t("Create snippet"),i=J.t("Create Snippet");return f.a.createElement(O.a,{className:"p-snippet_dialog",title:r,goButtonText:i,useSlackScrollbarWithPadding:!0,shouldCloseOnGo:!1,onGo:this.handleSubmit,onClose:this.handleCancel,footerText:this.renderShareWithPicker(),goButtonIsDisabled:this.isGoButtonDisabled(),getShouldShowSpeedBump:this.shouldShowSpeedBump,speedBumpBodyText:J.t("Are you sure you want to discard this snippet permanently?"),speedBumpCancelButtonText:J.t("No, keep it"),speedBumpContinueButtonText:J.t("Yes, discard this snippet"),showCancelButton:!1},f.a.createElement(E.a,{fileName:t,onFileNameChange:this.handleFileNameChange,fileType:n,onFileTypeChange:this.handleFileTypeChange,fileContent:a,onFileContentChange:this.handleFileContentChange}),this.renderShareAlert(),this.renderMessageInput())}}]),t}(b.PureComponent);Z.displayName="SnippetDialog",Z.defaultProps=X;var $=Object(g.b)(function(e,t){return r()({},Object(V.b)(e,t),{featureSonicSnippets:Object(S.i)(e,"feature_sonic_snippets")})},function(e){return{uploadSnippet:function(){return e(L.apply(void 0,arguments))},closeModal:function(){return e(G.a.apply(void 0,arguments))},openModal:function(){return e(G.e.apply(void 0,arguments))}}})(Z),ee=Object(V.a)($);t.default=ee},"6S4m":function(e,t,n){},"7yuZ":function(e,t,n){},"8Cw3":function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("fvjX"),o=n("aK/h"),s=n("Z0v/");t.a=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var l=i.c.apply(void 0,[e].concat(n)),c=Object.keys(e).reduce(function(t,n){var a=e[n];return a&&a.propTypes&&(t[n]=a.propTypes),t},{});l.propTypes=o.b.shape(c),Object(s.B)({reducer:l,reducerConfig:e}),l[s.b]=!0;var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e),n=[],a={},i={};t.forEach(function(t){var r=e[t];Object(s.w)(r)?Object(s.j)(r)&&(a[t]=Object(s.j)(r)):n.push(t),Object(s.i)(r)&&(i[t]=Object(s.i)(r))});var o={persistenceEnabled:!0};return(Object.keys(a).length||n.length)&&(o.beforeWriteTransform=function(e){var t=r()({},e);return n.forEach(function(e){delete t[e]}),Object.keys(a).forEach(function(e){var n=a[e];t[e]=n(t[e])}),t}),Object.keys(i).length&&(o.afterReadTransform=function(e){var t=r()({},e);return Object.keys(i).forEach(function(e){var n=i[e];t[e]=n(t[e])}),t}),o}(e);return Object(s.D)({reducer:l,reducerOptions:u}),l}},"8Mhq":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),h=n.n(p),m=n("XHGt"),b=n("aK/h"),f=n("iqSe"),_=n("HvGc"),g=n("D4L/"),v=n("kOzZ"),y=n("tn36"),k=n("aolG"),O=n("nNoG"),j=n("5mKg"),C=n("81nI"),E=n("ynxK"),w=new O.b("help"),S=(b.b.shape({open:b.b.number,closed:b.b.number,unread:b.b.number}),b.b.object.isRequired,b.b.object.isRequired,b.b.string,{tickets:{open:0,closed:0,unread:0},helpCenterToken:b.b.string}),I=function(e,t,n,a){return e.closed>0&&0===e.unread&&0===e.open?h.a.createElement("div",null,h.a.createElement("span",null,w.t("No pending requests.")),h.a.createElement(E.a,{className:"p-help_modal__requests",onClick:function(){return function(e,t,n){e.track("HELP_MODAL_ACTION",{action:"view_request_history",trigger:"click_view_request_history"});var a=Object(j.o)(n,Object(C.a)("/help",t));window.open(a)}(t,n,a)},"data-qa":"help_modal_requests_closed"},h.a.createElement("span",{className:"p-help_modal__requests__message bold"},w.t("View your help request history"),"."))):null},T=function(e,t,n,a){if(e>0){var r=e>1?w.t("You have new replies to your help requests."):w.t("You have a new reply to your help request.");return h.a.createElement(E.a,{className:"p-help_modal__requests",onClick:function(){return function(e,t,n){e.track("HELP_MODAL_ACTION",{action:"view_new_replies",trigger:"click_view_new_replies"});var a=Object(j.o)(n,Object(C.a)("/help",t));window.open(a)}(t,n,a)},"data-qa":"help_modal_requests_unread"},h.a.createElement("span",{className:"p-help_modal__requests_badge unread"},e),h.a.createElement("span",{className:"p-help_modal__requests__message bold"},r))}return null},N=function(e,t,n,a){if(e>0){var r=e>1?w.t("You have open help requests."):w.t("You have an open help request.");return h.a.createElement(E.a,{className:"p-help_modal__requests",onClick:function(){return function(e,t,n){e.track("HELP_MODAL_ACTION",{action:"view_open_requests",trigger:"click_view_open_requests"});var a=Object(j.o)(n,Object(C.a)("/help",t));window.open(a)}(t,n,a)},"data-qa":"help_modal_requests_read"},h.a.createElement("span",{className:"p-help_modal__requests_badge read"},e),h.a.createElement("span",{className:"p-help_modal__requests__message read bold"},r))}return null},R=function(e){return h.a.createElement("div",{className:"display_flex flex_direction_column"},I(e.tickets,e.clogger,e.helpCenterToken,e.team),h.a.createElement("div",{className:e.tickets.unread>0?"padding_top_50":""},T(e.tickets.unread,e.clogger,e.helpCenterToken,e.team)),h.a.createElement("div",{className:e.tickets.closed>0||e.tickets.unread>0?"padding_top_50":""},N(e.tickets.open,e.clogger,e.helpCenterToken,e.team)))};R.displayName="TicketsStatus",R.defaultProps=S;var A=R,P=n("+6YQ"),M=n("7nxQ"),D=n("od5y"),x=n("ftfc"),L=(n("zG9j"),new O.b("help")),F=(b.b.string,b.b.string,b.b.object.isRequired,b.b.shape({open:b.b.number,closed:b.b.number,unread:b.b.number}),b.b.func,b.b.func,b.b.string.isRequired,b.b.object.isRequired,{query:"",helpCenterToken:"",tickets:{closed:0,read:0,unread:0},onClose:d.a,showKeyboardShortcuts:d.a}),B=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isModalOpen:!0,query:e.query},n.zdLocale=Object(M.a)(),Object(y.a)(n,["onClickBrowseLink","onClickContactUsButton","onClickShortcutsButton","onOpenSearchLink","onQueryChange"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.trigger;e.clogger.track("HELP_MODAL_ACTION",{action:"open_modal",trigger:t})}},{key:"onClickBrowseLink",value:function(){var e=this.state.query,t=this.props.clogger,n=Object(C.b)({zdLocale:this.zdLocale,query:e,sidTrackingToken:this.props.helpCenterToken});e&&t.track("HELP_MODAL_SEARCH",{search_terms:e}),t.track("HELP_MODAL_ACTION",{action:"browse_all",trigger:"click_browse_all"}),window.open(n)}},{key:"onClickContactUsButton",value:function(){var e=this.props,t=e.clogger,n=e.team;t.track("HELP_MODAL_ACTION",{action:"submit_new_request",trigger:"click_submit_new_request"});var a=Object(j.o)(n,Object(C.a)("/help/requests/new",this.props.helpCenterToken));window.open(a)}},{key:"onClickShortcutsButton",value:function(){var e=this.props.clogger;this.setState(function(){return{isModalOpen:!1}}),e.track("HELP_MODAL_ACTION",{action:"keyboard_shorcuts",trigger:"click_keyboard_shorcuts"}),this.props.showKeyboardShortcuts()}},{key:"onOpenSearchLink",value:function(e,t){var n=this.props.clogger;t&&n.track("HELP_MODAL_SEARCH",{search_terms:this.state.query,locale:this.zdLocale}),n.track("HELP_MODAL_ZD_HIT",{zd_article_url:e})}},{key:"onQueryChange",value:function(e){this.setState(function(){return{query:e}})}},{key:"render",value:function(){var e=this.state.isModalOpen,t=this.props,n=t.tickets,a=t.clogger,r=t.onClose,i=t.team,o=t.query;return h.a.createElement(k.a,{isOpen:e,showCancelButton:!1,showGoButton:!1,onCancel:r,modalClasses:"p-help_modal",contentLabel:"help-modal","data-qa":"help_modal"},h.a.createElement(P.a,{className:"p-help_modal__shortcuts__button c-button--outline",type:"outline",onClick:this.onClickShortcutsButton,"data-qa":"help_modal_shortcuts_button"},h.a.createElement(D.b,{type:"keyboard",className:"small_right_margin"}),h.a.createElement("strong",null,L.t("Keyboard shortcuts"))),h.a.createElement("div",{className:"display_flex align_items_baseline justify_content_between padding_top_200"},h.a.createElement("h1",{className:"p-help_modal_title"},L.t("How can we help?")),h.a.createElement(E.a,{className:"p-help_modal__browse display_flex align_items_end",onClick:this.onClickBrowseLink,"data-qa":"help_modal_browse"},h.a.createElement("span",{className:"p-help_modal__browse__text"},L.t("Browse all answers")),h.a.createElement(D.b,{type:"arrow-large-right",className:"padding_left_100 p-help_modal__browse__icon"}))),h.a.createElement(x.a,{query:o,onOpenLink:this.onOpenSearchLink,autoFocus:!0,onQueryChange:this.onQueryChange}),h.a.createElement("div",{className:"p-help_modal__footer display_flex align_items_center justify_content_between"},h.a.createElement("div",{className:"p-help_modal__footer_tickets display_flex flex_direction_column"},h.a.createElement(A,{tickets:n,team:i,clogger:a,helpCenterToken:this.props.helpCenterToken})),h.a.createElement("div",{className:"p-help_modal__footer_contact"},h.a.createElement("div",null,h.a.createElement("span",{className:"p-help_modal__contact_us__message"},L.t("Can\u2019t find what you need, or have some feedback?")),h.a.createElement(P.a,{type:"primary",size:"medium",className:"margin_left_100 p-help_modal__contact_us__button",onClick:this.onClickContactUsButton,"data-qa":"help_modal_contact_button"},L.t("Contact Us"))))))}}]),t}(p.Component);B.displayName="HelpModal",B.defaultProps=F;var q=B,U=(b.b.string,b.b.string,b.b.object.isRequired,b.b.func,b.b.string.isRequired,b.b.shape({open:b.b.number,closed:b.b.number,unread:b.b.number}).isRequired,b.b.object.isRequired,b.b.func,{query:"",helpCenterTrackingToken:"",showKeyboardShortcuts:d.a,onClose:d.a}),H=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.trigger,n=e.clogger,a=e.onClose,r=e.team,i=e.tickets,o=e.query;return h.a.createElement(q,{query:o,team:r,helpCenterToken:this.props.helpCenterTrackingToken,tickets:i,onClose:a,showKeyboardShortcuts:this.props.showKeyboardShortcuts,trigger:t,clogger:n})}}]),t}(p.Component);H.displayName="HelpModalContainer",H.defaultProps=U;var G={showKeyboardShortcuts:_.h},W=Object(m.b)(function(e){return{clogger:Object(v.a)({state:e}),helpCenterTrackingToken:Object(f.b)(e),team:Object(g.d)(e),tickets:Object(f.c)(e)}},G)(H);t.a=W},"8XR2":function(e,t,n){},"8laU":function(e,t,n){e.exports=n.p+"knock_brush-338221a.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},"8oj5":function(e,t,n){e.exports=n.p+"been_tree-294678b.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},"8vJI":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("kxpR"),r=n.n(a),i=n("aK/h"),o=n("XfeM"),s=n("DTT0"),l=n("8Mhq"),c=Object(o.b)("Opens the help modal",function(e,t,n){e(Object(s.e)({element:r.a.createElement(l.a,n)}))});c.propTypes={trigger:i.b.string.isRequired}},"9AGP":function(e,t,n){},"9m5W":function(e,t,n){},ABxf:function(e,t,n){},AByf:function(e,t,n){},AFNo:function(e,t,n){"use strict";var a=n("EzZj");n.d(t,"a",function(){return a.b});var r=n("om+M");n.d(t,"b",function(){return r.a});var i=n("YS90");n.d(t,"c",function(){return i.b});var o=n("MNvw");n.d(t,"d",function(){return o.b});var s=n("U/ze");n.d(t,"e",function(){return s.b});var l=n("XfeM");n.d(t,"f",function(){return l.b});n("IhRS"),n("8Cw3")},ALaB:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("aK/h"),h=n("kxpR"),m=n.n(h),b=n("XHGt"),f=n("TSYQ"),_=n.n(f),g=n("smxp"),v=n("HO/Y"),y=n("hOQf"),k=n("HvGc"),O=n("nNoG"),j=n("ynxK"),C=new O.b("message"),E=(p.b.string.isRequired,p.b.string.isRequired,p.b.string.isRequired,p.b.string.isRequired,p.b.string,p.b.func,p.b.bool,{className:void 0,showThread:d.a,featureNewRepliesAfterBcast:!1}),w=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(e){var t=this.props,n=t.channelId,a=t.threadTs,r=t.ts;e.preventDefault(),this.props.showThread({channelId:n,threadTs:a,highlightTs:r})}},{key:"render",value:function(){var e=this.props,t=e.ts,n=e.latestReply;if(!e.featureNewRepliesAfterBcast||!n)return null;if(n<=t)return null;var a=_()("c-message__broadcast_footer",this.props.className);return m.a.createElement(j.a,{className:a,onClick:this.onClick},C.t("View newer replies"))}}]),t}(h.PureComponent);w.displayName="ThreadBroadcastFooter",w.defaultProps=E;t.a=Object(b.b)(function(e,t){var n=t.channelId,a=t.threadTs,r=Object(g.a)(e,n,a);return{latestReply:Object(y.D)(r),featureNewRepliesAfterBcast:Object(v.i)(e,"feature_new_replies_after_bcast")}},{showThread:k.l})(w)},B5am:function(e,t,n){e.exports=n.p+"item_pickup-8845498.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},BfV3:function(e,t,n){},BuFM:function(e,t,n){},C8Zo:function(e,t,n){},"C9/x":function(e,t,n){"use strict";var a=n("FLa3");t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,n=void 0!==t&&t,r=e.isEphemeral,i=void 0!==r&&r,o=e.isStarred,s=void 0!==o&&o,l=e.isBroadcast,c=void 0!==l&&l,u=e.subtype,d=e.sliHighlight;return{isPinned:n,isStarred:s,isEphemeral:i,isBroadcast:c,isCustomResponse:"slackbot_response"===u,isSliHighlight:Object(a.i)(d)}}},CDdZ:function(e,t,n){},"Ckp+":function(e,t,n){e.exports=n.p+"hi_flowers_hit-1b0583a.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},CsEc:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),h=n("ifKl"),m=n("kxpR"),b=n.n(m),f=n("XHGt"),_=n("aK/h"),g=n("TSYQ"),v=n.n(g),y=n("clTI"),k=n("FLa3"),O=n("HO/Y"),j=n("ypl0"),C=n("aW/o"),E=n("cTgs"),w=n("b+9+"),S=n("HvGc"),I=n("hOQf"),T=n("6kok"),N=n("C9/x"),R=n("YmYS"),A=n("2ojh"),P=n("od5y"),M=n("0f2Y"),D=n("o4CG"),x=n("tMdt"),L=n("Q/6m"),F=(n("GZud"),{pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled",broadcast:"jump"}),B=(_.b.object.isRequired,_.b.string,_.b.node,_.b.bool,_.b.bool,_.b.bool,_.b.oneOf(["light","dense"]),_.b.object,_.b.string,_.b.string,_.b.bool,_.b.bool,_.b.func,_.b.func,{className:void 0,children:void 0,showPinned:!0,showStarred:!0,showBroadcast:!1,theme:"light",sliHighlight:void 0,currentUserId:void 0,primaryView:void 0,isSelfIm:!1,isSlackbotIm:!1,dispatch:h.a,setBackground:h.a}),q=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onBroadcastClick=n.onBroadcastClick.bind(n),n.renderHighlight=n.renderHighlight.bind(n),n.renderStarButton=n.renderStarButton.bind(n),n.renderBroadcast=n.renderBroadcast.bind(n),n.onStarClick=n.onStarClick.bind(n),n.labelText=null,n.primaryLabelType=null,n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.setBackground()}},{key:"componentDidUpdate",value:function(){this.setBackground()}},{key:"onStarClick",value:function(){(0,this.props.dispatch)(Object(S.k)())}},{key:"onBroadcastClick",value:function(e){var t=this.props,n=t.dispatch,a=t.msg,r=t.primaryView;e.preventDefault(),r!==a.channel?n(Object(E.a)({id:a.channel,startTs:a.ts})):n(Object(w.c)({ts:a.ts,highlight:!0}))}},{key:"setBackground",value:function(){var e=this.props.setBackground;e({labels:this.labelText&&this.primaryLabelType})}},{key:"getLabelTypes",value:function(){var e=this.props,t=e.msg,n=e.sliHighlight,a=e.showPinned,r=e.showStarred,i=e.showBroadcast,o=Object(I.K)(t);return Object(N.a)({isPinned:a&&!!o,isEphemeral:Object(I.bb)(t),isStarred:r&&Object(I.ob)(t),isBroadcast:i&&Object(I.rb)(t),subtype:t.subtype,sliHighlight:!!n})}},{key:"renderPinnedBy",value:function(e){return b.a.createElement(D.a,{className:"c-message_kit__labels__link",id:e})}},{key:"renderStarButton",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).text;return e?b.a.createElement(M.a,{onClick:this.onStarClick,className:"c-message_kit__labels__link"},e):null}},{key:"renderBroadcast",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).text;return e?b.a.createElement(M.a,{onClick:this.onBroadcastClick,className:"c-message_kit__labels__link"},e):null}},{key:"renderLabelText",value:function(e){var t=this.props,n=t.msg,a=t.currentUserId,i=t.isSelfIm,o=t.isSlackbotIm,s=Object(I.K)(n),l=s&&s.pinnedBy,c=Object(A.a)(r()({},e,{isSelfIm:i,isSlackbotIm:o,currentUserId:a,pinnedBy:l,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton,renderHighlight:this.renderHighlight,renderBroadcast:this.renderBroadcast,featureMessageLabelsCopy:!0}));return c?b.a.createElement("span",{className:"c-message_kit__labels__text"},c):null}},{key:"renderLabelIcon",value:function(e){var t=F[e];return t?b.a.createElement("div",{className:"c-message_kit__labels__icon"},b.a.createElement(P.b,{type:t,size:"inherit"})):null}},{key:"renderHighlight",value:function(){var e=this.props,t=e.msg,n=e.sliHighlight,a=t.channel,r=t.ts;return Object(k.i)(n)?b.a.createElement(x.a,{sliHighlight:n,channelId:a,ts:r}):null}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.theme,a=this.getLabelTypes(),r=Object(R.a)(a),i=this.renderLabelIcon(r),o=this.renderLabelText(a);if(this.labelText=o,this.primaryLabelType=r,!o)return t;var s=v()(this.props.className,"c-message_kit__labels","c-message_kit__labels--"+r,"c-message_kit__labels--"+n);return b.a.createElement("div",{className:s},b.a.createElement("div",{className:"c-message_kit__labels__label"},i,o),t)}}]),t}(m.PureComponent);q.displayName="MessageLabels",q.defaultProps=B;t.a=Object(L.b)(Object(f.b)(function(e,t){var n=t.msg;if(!n)return null;var a=n.channel,r=n.ts,i=Object(O.b)(e),o=Object(y.d)(e,a),s=Object(C.a)(e),l=Object(k.e)(e,{channelId:a,ts:r}).sliHighlight,c=Object(T.Eb)(o),u=Object(T.Qb)(i,o);return{theme:Object(j.a)(e),currentUserId:i,primaryView:s,sliHighlight:l,isSlackbotIm:c,isSelfIm:u}})(q))},D3dR:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),h=n("XHGt"),m=n("aK/h"),b=n("clTI"),f=n("FN36"),_=n("wuO/"),g=n("V/Wy"),v=n("6kok"),y=n("Fp75"),k=n("Rszm"),O=n("O0RF"),j=n("KEK+"),C=n("od5y"),E=n("RAhH"),w=n("ynxK"),S=n("nNoG"),I=n("ITcr"),T=(n("e74f"),new S.b("prefs")),N=(m.b.string.isRequired,m.b.string.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.bool.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMutedChanged=n.onMutedChanged.bind(n),n.onSuppressedChanged=n.onSuppressedChanged.bind(n),n.onDesktopSettingChanged=n.onDesktopSettingChanged.bind(n),n.onMobileSettingChanged=n.onMobileSettingChanged.bind(n),n.onOpenPreferences=n.onOpenPreferences.bind(n),n}return u()(t,e),o()(t,[{key:"onMutedChanged",value:function(e){var t=this.props,n=t.channelId;(0,t.setMuted)(n,!!e.target.checked)}},{key:"onSuppressedChanged",value:function(e){var t=this.props,n=t.channelId;(0,t.setSuppressed)(n,!!e.target.checked)}},{key:"onDesktopSettingChanged",value:function(e){var t=this.props,n=t.channelId;(0,t.setDesktopSetting)(n,e.target.value)}},{key:"onMobileSettingChanged",value:function(e){var t=this.props,n=t.channelId;(0,t.setMobileSetting)(n,e.target.value)}},{key:"onOpenPreferences",value:function(){this.props.openPrefsModal()}},{key:"renderMutingOptions",value:function(){var e=this.props,t=e.channelName,n=e.isMuted,a=e.isAtChannelSuppressed,r=e.isGroupDm,i=e.isGeneral,o=e.whoCanAtEveryone,s=e.whoCanAtChannel,l=e.whoCanPostGeneral,c="";i?"owner"===l||"admin"===l?c=T.t("A Workspace Owner has restricted who can post to {channelName} to admins and/or owners. These notifications can not be ignored.",{atChannel:"@"+Object(I.b)({ms_name:"channel"}),atEveryone:"@"+Object(I.b)({ms_name:"everyone"}),channelName:Object(S.n)(t)}):"admin"!==o&&"owner"!==o||(c=T.t("A Workspace Owner has restricted the use of {atChannel} and/or {atEveryone} to admins and/or owners. These notifications can not be ignored.",{atChannel:"@"+Object(I.b)({ms_name:"channel"}),atEveryone:"@"+Object(I.b)({ms_name:"everyone"})})):"admin"!==s&&"owner"!==s||(c=T.t("A Workspace Owner has restricted the use of {atChannel} to admins and/or owners. These notifications can not be ignored.",{atChannel:"@"+Object(I.b)({ms_name:"channel"})}));var u=p.a.createElement(O.a,{type:"inline",text:T.t("Ignore notifications for {atChannel} and {atHere}",{atChannel:"@"+Object(I.b)({ms_name:i?"everyone":"channel"}),atHere:"@"+Object(I.b)({ms_name:"here"})}),isDisabled:!!c,cursor:"pointer"},c?p.a.createElement(E.c,{tip:c},p.a.createElement("span",null,p.a.createElement(k.a,{disabled:!0}))):p.a.createElement(k.a,{checked:a,onChange:this.onSuppressedChanged}));return p.a.createElement("div",null,p.a.createElement(O.a,{type:"inline",text:r?T.t("Mute entire conversation"):T.t("Mute entire channel"),subtext:T.t("You won't receive notifications for muted channels, and they'll appear grayed out in your channel list."),cursor:"pointer"},p.a.createElement(k.a,{checked:n,onChange:this.onMutedChanged})),r?null:u)}},{key:"renderPermissionPrompt",value:function(){var e=this;return p.a.createElement("div",{className:"margin_top_100"},p.a.createElement("div",null,p.a.createElement(C.b,{type:"desktop-notification",className:"p-channel_notification_prefs__platform_icon",size:"inherit"}),p.a.createElement("strong",null,T.t("Desktop notifications"))),p.a.createElement("div",null,T.rt("You have not yet allowed desktop notifications. Open the <a>Preferences Dialog</a> and follow the instructions to set them up.",null,function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).text;return p.a.createElement(w.a,{onClick:e.onOpenPreferences},t)})))}},{key:"renderNotificationsOptions",value:function(){var e=this.props,t=e.isMuted,n=e.desktopSetting,a=e.mobileSetting,r=e.notificationsAllowed;if(t)return null;if(!r)return this.renderPermissionPrompt();var i=T.t("All new messages"),o=T.t("Just mentions*"),s=T.t("Nothing");return p.a.createElement("div",null,p.a.createElement("table",{className:"p-channel_notification_prefs__table"},p.a.createElement("thead",null,p.a.createElement("tr",null,p.a.createElement("th",{scope:"col"},T.t("Notifications")),p.a.createElement("th",{scope:"col"},i),p.a.createElement("th",{scope:"col"},o),p.a.createElement("th",{scope:"col"},s))),p.a.createElement("tbody",null,p.a.createElement("tr",null,p.a.createElement("th",{scope:"row"},p.a.createElement(C.b,{type:"desktop-notification",className:"p-channel_notification_prefs__platform_icon"}),T.t("Desktop")),p.a.createElement("td",null,p.a.createElement(O.a,{text:p.a.createElement("span",{className:"p-channel_notification_prefs__offscreen_label"},i)},p.a.createElement(j.a,{name:"desktop_notification_setting",value:"everything",checked:"everything"===n,onChange:this.onDesktopSettingChanged}))),p.a.createElement("td",null,p.a.createElement(O.a,{text:p.a.createElement("span",{className:"p-channel_notification_prefs__offscreen_label"},o)},p.a.createElement(j.a,{name:"desktop_notification_setting",value:"mentions_dms",checked:"mentions_dms"===n,onChange:this.onDesktopSettingChanged}))),p.a.createElement("td",null,p.a.createElement(O.a,{text:p.a.createElement("span",{className:"p-channel_notification_prefs__offscreen_label"},s)},p.a.createElement(j.a,{name:"desktop_notification_setting",value:"nothing",checked:"nothing"===n,onChange:this.onDesktopSettingChanged})))),p.a.createElement("tr",null,p.a.createElement("th",{scope:"row"},p.a.createElement(C.b,{type:"mobile-notification",className:"p-channel_notification_prefs__platform_icon"}),T.t("Mobile")),p.a.createElement("td",null,p.a.createElement(O.a,{text:p.a.createElement("span",{className:"p-channel_notification_prefs__offscreen_label"},i)},p.a.createElement(j.a,{name:"mobile_notification_setting",value:"everything",checked:"everything"===a,onChange:this.onMobileSettingChanged}))),p.a.createElement("td",null,p.a.createElement(O.a,{text:p.a.createElement("span",{className:"p-channel_notification_prefs__offscreen_label"},o)},p.a.createElement(j.a,{name:"mobile_notification_setting",value:"mentions_dms",checked:"mentions_dms"===a,onChange:this.onMobileSettingChanged}))),p.a.createElement("td",null,p.a.createElement(O.a,{text:p.a.createElement("span",{className:"p-channel_notification_prefs__offscreen_label"},s)},p.a.createElement(j.a,{name:"mobile_notification_setting",value:"nothing",checked:"nothing"===a,onChange:this.onMobileSettingChanged})))))),p.a.createElement("p",{className:"p-channel_notification_prefs__hint"},T.t("* Includes mentions of your name or any of your keywords")))}},{key:"render",value:function(){return p.a.createElement("div",{className:"p-channel_notification_prefs"},this.renderMutingOptions(),this.renderNotificationsOptions())}}]),t}(d.Component));N.displayName="ChannelNotificationPrefs",t.a=Object(h.b)(function(e,t){var n=t.channelId,a=Object(b.d)(e,n),r=Object(g.b)(e,n)||{};return{channelName:Object(v.x)(e,a),isGroupDm:Object(v.lb)(a),isGeneral:Object(v.cb)(a),isMuted:r.muted||!1,isAtChannelSuppressed:r.suppress_at_channel||!1,desktopSetting:Object(y.g)(e,n),mobileSetting:Object(y.h)(e,n),notificationsAllowed:Object(y.f)(),whoCanAtChannel:Object(f.a)(e,"who_can_at_channel"),whoCanAtEveryone:Object(f.a)(e,"who_can_at_everyone"),whoCanPostGeneral:Object(f.a)(e,"who_can_post_general")}},function(e){var t=function(t,n,a){e(Object(_.b)({name:n,value:a,channelId:t}))};return{setMuted:function(e,n){return t(e,"muted",n)},setSuppressed:function(e,n){return t(e,"suppress_at_channel",n)},setDesktopSetting:function(e,n){return t(e,"desktop",n)},setMobileSetting:function(e,n){return t(e,"mobile",n)}}})(N)},DBPf:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n("XHGt"),h=n("aK/h"),m=n("yHhI"),b=new(n("nNoG").b)("view"),f=(h.b.string.isRequired,h.b.object.isRequired,0),_=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){f&&this.props.logger.error("Multiple DocumentTitles mounted"),f+=1,this.originalTitle=document.title,this.updateTitle()}},{key:"componentDidUpdate",value:function(e){e.title!==this.props.title&&this.updateTitle()}},{key:"componentWillUnmount",value:function(){f-=1,document.title=this.originalTitle}},{key:"updateTitle",value:function(){document.title=this.props.title||b.t("Slack",{fallbackHash:"430b38bf6daa7f9164b164b2ffd540b5a3afe2fd",fallbackHashNs:"migration_status_page"})}},{key:"render",value:function(){return null}}]),t}(d.PureComponent);_.displayName="DocumentTitle",_.defaultProps={};var g=Object(p.b)(function(e){return{logger:Object(m.a)({state:e})}})(_);t.a=g},DEaQ:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),h=n("kxpR"),m=n.n(h),b=n("aK/h"),f=n("XHGt"),_=n("MREy"),g=n("od5y"),v=n("Gogr"),y=n("D4L/"),k=n("aW/o"),O=n("Gmrf"),j=n("rWF5"),C=n("YB7p"),E=n("ICFZ"),w=n("GNdI"),S=n("rb67"),I=n("4ULK"),T=n("rz65"),N=(b.b.object,b.b.string.isRequired,b.b.string,b.b.string.isRequired,b.b.string.isRequired,b.b.object.isRequired,{menuProps:void 0,lastError:void 0}),R="not registered",A=document&&document.documentElement&&document.documentElement.dataset,P={versionTs:A.versionTs,versionHash:A.versionHash,minVersionDataTs:A.minVersionDataTs},M=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.resetCredentials=n.resetCredentials.bind(n),n.copyVersionInfo=n.copyVersionInfo.bind(n),n.debugMenuPurgeStoredModel=n.debugMenuPurgeStoredModel.bind(n),n.state={sw:R,cachedRequests:{},storageQuota:0,storageUsage:0},n}return p()(t,e),l()(t,[{key:"componentWillMount",value:function(){var e=this;this.serviceWorkerP=Object(S.c)().then(function(t){void 0!==t&&t.active&&e.setState(function(){return{sw:t.active.state}})}),this.cachedRequestsP=Object(S.b)().then(function(t){t&&e.setState(function(){return{cachedRequests:t}})}),Object(j.q)()&&(this.storageEstimateP=navigator.storage.estimate().then(function(t){e.setState(function(){return{storageQuota:t.quota,storageUsage:t.usage}})}))}},{key:"componentWillUnmount",value:function(){this.serviceWorkerP&&this.serviceWorkerP.cancel&&this.serviceWorkerP.cancel(),this.cachedRequestsP&&this.cachedRequestsP.cancel&&this.cachedRequestsP.cancel(),this.storageEstimateP&&this.storageEstimateP.cancel&&this.storageEstimateP.cancel()}},{key:"resetCredentials",value:function(){Object(v.g)(),Object(C.b)({reason:"Reload initiated from user clicking reset credentials in sonic debug menu",reasonKey:"sonic_debug_menu",noCache:!0})}},{key:"copyVersionInfo",value:function(){Object(E.b)("Version TS: "+P.versionTs+", Version Hash: "+P.versionHash+", Min Version Data TS: "+P.minVersionDataTs)}},{key:"debugMenuPurgeStoredModel",value:function(){return Object(I.a)(Object(w.a)())}},{key:"renderSWStorage",value:function(){return Object(j.q)()&&this.state.storageUsage&&this.state.storageQuota?m.a.createElement(m.a.Fragment,null,"Storage: ",(this.state.storageUsage/1024/1024).toFixed(1)," of"," ",Math.round(this.state.storageQuota/1024/1024),"MB (",(this.state.storageUsage/this.state.storageQuota).toFixed(2),"%)"):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.menuProps,a=t.lastError,i=t.version,o=Object.keys(this.state.cachedRequests).map(function(t){return{label:t+": "+e.state.cachedRequests[t].length}}),s=[{children:m.a.createElement("div",{style:{whiteSpace:"normal"}},m.a.createElement(g.b,{type:"warning",inline:!0})," ",a),hide:!a,key:"last-error"},{label:"Cold boot",click:function(){return Object(C.a)({reason:"debug-menu",reasonKey:"debug_menu"})}},{label:"Cold boot immediately",click:function(){return Object(C.a)({reason:"debug-menu-immediate",reasonKey:"debug_menu",immediate:!0})}},{label:"Re-fetch credentials",click:this.resetCredentials},{label:"Copy Version Info",click:this.copyVersionInfo},{type:"separator"},{children:m.a.createElement("div",{style:{whiteSpace:"normal",opacity:.7}},"Version TS: ",i.versionTs,m.a.createElement("br",null),"Data Version: ",i.minVersionDataTs),click:this.copyVersionInfo,key:"version-info"},{type:"separator",hide:"not registered"===this.state.sw},{label:"Service Worker",type:T.a.submenu,template:[{children:m.a.createElement("div",{style:{whiteSpace:"normal",opacity:.7}},"State: ",this.state.sw,m.a.createElement("br",null),this.renderSWStorage()),key:"sw-state"},{type:"separator"},{label:"Cached Requests",type:T.a.submenu,template:o.length>0?o:[{label:"None"}]},{type:"separator"},{label:"Register SW",click:S.d,hide:"not registered"!==this.state.sw},{label:"Unregister SW",click:S.e,hide:"not registered"===this.state.sw},{label:"Update SW",click:S.f,hide:"not registered"===this.state.sw},{label:"Clear the SW cache",click:S.a,hide:0===Object.keys(this.state.cachedRequests).length}].filter(function(e){return!e.hide})},{label:"IndexedDB",type:T.a.submenu,template:[{label:"Purge Stored Model for this Workspace",click:this.debugMenuPurgeStoredModel}]}].filter(function(e){return!e.hide});return m.a.createElement(_.a,r()({},n,{template:s}))}}]),t}(h.Component);M.displayName="DebugMenu",M.defaultProps=N,t.a=Object(f.b)(function(e){var t=Object(k.a)(e),n=Object(y.d)(e),a=Object(O.b)(e);return{channelId:t,lastError:a?a.message:"",teamDomain:n.domain,teamId:n.id,version:P}})(M)},Drpm:function(e,t,n){},EAGK:function(e,t,n){},EnhK:function(e,t,n){},FXxD:function(e,t,n){},FeTz:function(e,t,n){},FghR:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("oaNE"),h=n("aK/h"),m=n("kxpR"),b=n.n(m),f=n("9rZX"),_=n.n(f),g=n("TSYQ"),v=n.n(g),y=n("18Pa"),k=n("yg0S"),O=n("QbLZ"),j=n.n(O),C=n("jo6Y"),E=n.n(C),w=n("+6YQ"),S=(h.b.node,h.b.func,{children:void 0,onClick:d.a}),I=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.buttonRef=b.a.createRef(),n.focusOnButton=n.focusOnButton.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.focusOnButton()}},{key:"focusOnButton",value:function(){this.buttonRef.current.focus()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.onClick,a=E()(e,["children","onClick"]);return b.a.createElement(w.a,j()({ref:this.buttonRef,"data-qa":"coachmark_close_button",onClick:n},a),t)}}]),t}(m.PureComponent);I.displayName="CoachmarkCloseButton",I.defaultProps=S;var T=I,N=n("cnLP"),R=(n("KwLZ"),h.b.instanceOf(Element),h.b.oneOf([10,20,30,40,50,60,70,80,90]),h.b.node.isRequired,h.b.string,h.b.string,h.b.bool.isRequired,h.b.func,h.b.number,h.b.number,h.b.func,h.b.func,h.b.string,h.b.string,h.b.oneOf(N.a).isRequired,h.b.object,{anchorElement:null,arrowPosition:50,closeCoachmark:d.a,coachmarkClassNames:void 0,"data-qa":"coachmark",offsetX:0,offsetY:0,onClickPrimaryButton:d.a,onClickSecondaryButton:d.a,primaryCallToActionText:void 0,secondaryCallToActionText:void 0,style:{}}),A=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.contentRef=b.a.createRef(),n}return u()(t,e),o()(t,[{key:"getComputedStyles",value:function(e,t){var n=this.props,a=n.offsetX,r=n.offsetY,i=window.scrollX||window.pageXOffset,o=window.scrollY||window.pageYOffset,s={};switch(t){case"top":s.left=e.left+i+parseInt(a,10),s.top=e.top+o-e.height+parseInt(r,10);break;case"bottom":s.left=e.left+i+parseInt(a,10),s.top=e.top+o+e.height+20+parseInt(r,10);break;case"right":s.left=e.left+i+e.width+20+parseInt(a,10),s.top=e.top+o+e.height/2+parseInt(r,10);break;case"left":s.left=e.left+i+parseInt(a,10),s.top=e.top+o+e.height/2+parseInt(r,10)}return s}},{key:"render",value:function(){var e=this.props,t=e.anchorElement,n=e.arrowPosition,a=e.children,r=e.closeCoachmark,i=e.coachmarkClassNames,o=e["data-qa"],s=e.isOpen,l=e.onClickPrimaryButton,c=e.onClickSecondaryButton,u=e.orientation,d=e.primaryCallToActionText,h=e.secondaryCallToActionText,m=e.style;if(!s||!t)return null;var f=v()("c-coachmark","c-coachmark--"+u,"c-coachmark--"+n,i),g=t.getBoundingClientRect?this.getComputedStyles(t.getBoundingClientRect(),u):{},O=Object(p.a)({},g,m);return b.a.createElement(_.a,{"data-qa":o,className:f,isOpen:s,onRequestClose:r,overlayClassName:"c-coachmark__overlay",ref:this.contentRef,shouldCloseOnEsc:!0,style:{overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",zIndex:1e3},content:O}},b.a.createElement(k.a,null,b.a.createElement(y.a,{className:"c-coachmark__close",icon:"times",onClick:r,"aria-label":"Close Coachmark"}),a,b.a.createElement("div",{className:"c-coachmark__footer"},h&&b.a.createElement(T,{onClick:c,type:"outline",className:"margin_right_75"},h),d&&b.a.createElement(T,{onClick:l,type:"primary"},d))))}}]),t}(m.PureComponent);A.displayName="Coachmark",A.defaultProps=R;t.a=A},G4eq:function(e,t,n){},G59f:function(e,t,n){},GZud:function(e,t,n){},GdkL:function(e,t,n){},GhVE:function(e,t,n){},Gmrf:function(e,t,n){"use strict";n.d(t,"b",function(){return p});var a=n("YEIV"),r=n.n(a),i=n("aK/h"),o=n("EzZj"),s=n("MNvw"),l=n("lhZz"),c=n("Z7Ay"),u=Object(o.b)("Stores an Error object");u.propTypes=i.b.string;var d=Object(s.b)(r()({},u,function(e,t){return{lastError:t}}),{lastError:null},{persistenceEnabled:!1});d.propTypes={lastError:i.b.object};var p=function(e){return e&&e.error&&e.error.lastError};t.a=d,Object(c.a)("setLastError",function(e,t){Object(l.dispatchForTeamId)(e,u(t))})},H3xq:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("F294"),o=n("XHGt"),s=n("kOzZ"),l=n("yHhI"),c=n("jLdI"),u=n("NuWb"),d=n("smxp"),p=n("qnZ7"),h=n("0wDQ"),m=n("N52Z"),b=n("DtX9"),f=n("uf9I"),_=n("D4L/"),g=n("clTI"),v=n("P2f5"),y=n("VjHM"),k=n("ypl0"),O=n("FLa3"),j=n("M+2+"),C=n("h0LD"),E=n("0sSB"),w=n("hAjP"),S=n("HO/Y"),I=n("1tet"),T=n("6kok"),N=n("hOQf"),R=n("P9LH"),A=n("Q+UV"),P=n("Bekf"),M=n("mVkb"),D=n("tVnY"),x=n("Smdl"),L=n("YEIV"),F=n.n(L),B=n("sk9p"),q=n.n(B),U=n("iCc5"),H=n.n(U),G=n("V7oC"),W=n.n(G),K=n("FYw3"),V=n.n(K),z=n("mRg0"),Y=n.n(z),Q=n("fujP"),J=n("qAkX"),X=n("TGBA"),Z=n("bPB8"),$=n("S1sa"),ee=n("x91h"),te=n("Z0Cl"),ne=n("CpTu"),ae=n("ifKl"),re=n("zmn3"),ie=n("aK/h"),oe=n("kxpR"),se=n.n(oe),le=n("TSYQ"),ce=n.n(le),ue=n("8dKT"),de=n("HHn2"),pe=n("Jnln"),he=n("YmYS"),me=n("C9/x"),be=n("yPgC"),fe=n("aLpA"),_e=n("lfjV"),ge=n("t3QL"),ve=n("VymY"),ye=n("qc8s"),ke=n("/MYD"),Oe=n("UF3u"),je=n("nNoG"),Ce=n("HOOb"),Ee=n("L8el"),we=n("EHyS"),Se=n("s19S"),Ie=n("gtcZ"),Te=n("ubOb"),Ne=n("XLFM"),Re=n("lV3N"),Ae=n("3dqR"),Pe=n("oqAd"),Me=n("lek6"),De=n("RAhH"),xe=n("FXaq"),Le=n("VwYs"),Fe=n("m36V"),Be=n("cAy8"),qe=n("od5y"),Ue=n("Lr9k"),He=n("CaXY"),Ge=n("Aeia"),We=n("f+8a"),Ke=n("y7mK"),Ve=n("qYtJ"),ze=n("NvKv"),Ye=n("y/l/"),Qe=n("Wzrj"),Je=n("yk+1"),Xe=n("RjVJ"),Ze=n("ALaB"),$e=n("0gKA"),et=n("Y6eO"),tt=n("xUg9"),nt=n("HvGc"),at=n("2ojh"),rt=n("tMdt"),it=n("Atrf"),ot={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled"},st=(ie.b.bool,ie.b.bool,ie.b.bool,ie.b.bool,ie.b.bool,ie.b.bool,ie.b.bool,ie.b.oneOf(["ephemeral","custom_response","pinned","starred","sli_highlight"]),ie.b.shape({loading:ie.b.bool,isHighlight:ie.b.bool,feedbackOptions:ie.b.object,justification:ie.b.string,feedback:ie.b.string}),ie.b.bool,ie.b.string,ie.b.string,ie.b.string,ie.b.string,ie.b.bool.isRequired,ie.b.func,{isPinned:!1,isStarred:!1,isEphemeral:!1,isCustomResponse:!1,isSliHighlight:!1,isSelfIm:!1,isSlackbotIm:!1,primaryType:void 0,sliHighlight:void 0,isHovered:!1,channelId:void 0,ts:void 0,currentUserId:void 0,pinnedByMemberId:void 0,showStarredItemsList:ae.a}),lt=function(e){function t(e){H()(this,t);var n=V()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderHighlight=n.renderHighlight.bind(n),n.renderStarButton=n.renderStarButton.bind(n),n}return Y()(t,e),W()(t,[{key:"renderHighlight",value:function(){var e=this.props,t=e.sliHighlight,n=e.channelId,a=e.ts,r=e.isHovered;return Object(O.i)(t)?se.a.createElement(rt.a,{channelId:n,ts:a,isHovered:r,sliHighlight:t}):null}},{key:"renderPinnedBy",value:function(e){return se.a.createElement(it.a,{id:e,className:"c-message__label_link"})}},{key:"renderStarButton",value:function(e){var t=e.text;return se.a.createElement(Ne.c,{onClick:this.props.showStarredItemsList,className:"c-message__label_button"},t)}},{key:"render",value:function(){var e=this.props,t=e.primaryType,n=e.isPinned,a=e.isStarred,r=e.isEphemeral,i=e.isCustomResponse,o=e.isSliHighlight,s=e.isSelfIm,l=e.isSlackbotIm,c=e.currentUserId,u=e.pinnedByMemberId,d=e.featureSonicInputs,p=Object(at.a)({isPinned:n,isStarred:a,isEphemeral:r,isCustomResponse:i,isSliHighlight:o,isSelfIm:s,isSlackbotIm:l,currentUserId:c,pinnedBy:u,renderHighlight:this.renderHighlight,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton});if(!p)return null;var h=ot[t],m=ce()("c-message__label__gutter",{"c-message__label__gutter--feature_sonic_inputs":d});return se.a.createElement("div",{className:"c-message__label"},se.a.createElement("div",{className:m},h&&se.a.createElement(qe.b,{type:h,className:"c-message__label__icon",size:"inherit",inline:!0})),se.a.createElement("div",{className:"c-message__label__text"},p))}}]),t}(oe.PureComponent);lt.displayName="MessageLabel",lt.defaultProps=st;var ct=Object(o.b)(function(e){return{featureSonicInputs:Object(S.i)(e,"feature_sonic_inputs")}},function(e){return{showStarredItemsList:function(){return e(nt.k.apply(void 0,arguments))}}})(lt),ut=(n("67Ky"),new je.b("message")),dt={quote:!0,pre:!0},pt=(ie.b.object,ie.b.object,ie.b.string,ie.b.bool,ie.b.string,ie.b.string,ie.b.string,ie.b.string,ie.b.bool,ie.b.oneOf(["dense","light"]),ie.b.string,ie.b.string,ie.b.string,ie.b.string,ie.b.bool,ie.b.string,ie.b.string,ie.b.arrayOf(ie.b.shape({ts:ie.b.string,user:ie.b.string})),ie.b.number,ie.b.arrayOf(ie.b.string),ie.b.number,ie.b.string,ie.b.bool,ie.b.bool,ie.b.bool,ie.b.string,ie.b.arrayOf(ie.b.shape({color:ie.b.string,fallback:ie.b.string})),ie.b.string,ie.b.arrayOf(ie.b.string),ie.b.shape({id:ie.b.string,user:ie.b.string,comment:ie.b.string,is_starred:ie.b.bool}),ie.b.bool,ie.b.bool,ie.b.bool,ie.b.bool,ie.b.bool,ie.b.func,ie.b.shape({ts:ie.b.string,user:ie.b.string}),ie.b.bool,be.a.Rollup(),ie.b.func,ie.b.func,ie.b.bool,ie.b.bool,ie.b.bool,ie.b.string,ie.b.string,ie.b.shape({loading:ie.b.bool,isHighlight:ie.b.bool,feedbackOptions:ie.b.object,justification:ie.b.string,feedback:ie.b.string}),ie.b.bool,ie.b.bool,ie.b.bool,ie.b.bool,ie.b.shape({emoji:ie.b.string}),ie.b.object,ie.b.string,ie.b.bool,ie.b.func,ie.b.bool,ie.b.bool,ie.b.bool,ie.b.string,ie.b.func,ie.b.func,ie.b.bool,ie.b.bool,ie.b.bool,ie.b.bool,ie.b.bool,ie.b.string,ie.b.bool.isRequired,ie.b.bool.isRequired,ie.b.bool.isRequired,ie.b.bool,ie.b.bool,ie.b.bool,ie.b.string,ie.b.bool,ie.b.bool,ie.b.bool,ie.b.string,ie.b.object,ie.b.string,ie.b.bool,ie.b.bool,ie.b.string,ie.b.bool,be.a.BlockKitBlocks,ie.b.string,ie.b.bool,ie.b.func,ie.b.func,ie.b.bool,ie.b.string,ie.b.func,ie.b.oneOf(Object(X.a)(He.a)),ie.b.bool,ie.b.func,ie.b.func,{logger:{info:ae.a,warn:ae.a,error:ae.a},message:null,ts:null,messageNotFound:!1,channelId:void 0,text:null,noSpecials:!1,alertType:null,subtype:null,theme:"light",userId:null,botId:null,appId:null,username:null,hasAdHocSender:!1,reactionKey:null,reactionKeyForInitialFileComment:null,replies:[],replyCount:0,replyUsers:[],replyUsersCount:0,latestReply:null,threadsEverythingPref:null,expandInlineImgsPref:!1,expandNonMediaAttachmentsPref:!1,threadTs:null,attachments:[],fileId:null,fileIds:null,comment:null,isUpload:!1,showUser:!0,isFileFollowup:!1,isEditing:!1,isHovered:!1,maybeStartEditingMessage:ae.a,edited:null,isLast:!1,rollup:null,logMessage:ae.a,setUnreadPoint:ae.a,isStarred:!1,isStandalone:!1,isPinned:!1,currentUserId:void 0,pinnedByMemberId:void 0,sliHighlight:null,isEphemeral:!1,isRichTextMessage:!1,shouldRenderBlocks:!1,isDeleting:!1,icons:null,botProfile:null,slackbotFeels:null,fadeAwayHighlight:!1,doneHighlighting:ae.a,isUnprocessed:!1,showResend:!1,showCancel:!1,sourceTeamId:"",resendMsg:ae.a,removeMsg:ae.a,shouldJumpToTimestamp:!1,isSelfIm:!1,isSlackbotIm:!1,isEKMDeniedMessage:!1,isEKMError:!1,featureAttachmentsV2:!1,teamDomain:void 0,useGlobalNav:!1,renderFileThread:!1,channelSessionId:null,previousMessageIsPinned:void 0,previousMessageIsEphemeral:void 0,previousMessageIsStarred:void 0,previousMessageSubtype:void 0,previousMessageSliHighlight:void 0,previousMessagePinnedByMemberId:void 0,renderActions:!1,renderActionsOffscreen:!1,messageContainerType:void 0,ariaAssertive:void 0,blocks:void 0,serviceTeamId:void 0,featureSonicInputs:!1,clogMessageClick:ae.a,clogUserClick:ae.a,isThreadExpanded:!1,threadListId:void 0,showThreadIfThreadable:ae.a,blocksContainerContext:He.a.message,hasKeyboardFocusWithin:!1,onFocus:ae.a,onBlur:ae.a}),ht=function(e){function t(e){H()(this,t);var n=V()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setRef=n.setRef.bind(n),n.onContainerClick=n.onContainerClick.bind(n),n.onTimestampClick=n.onTimestampClick.bind(n),n.startEditing=n.startEditing.bind(n),n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n.onMenuToggle=n.onMenuToggle.bind(n),n.startHighlightingTimer=n.startHighlightingTimer.bind(n),n.onDoneHighlighting=n.onDoneHighlighting.bind(n),n.onDeleteAnimationTick=n.onDeleteAnimationTick.bind(n),n.onDeleteAnimationEnd=n.onDeleteAnimationEnd.bind(n),n.resendMsg=n.resendMsg.bind(n),n.removeMsg=n.removeMsg.bind(n),n.formatInlineAttachmentMaybe=n.formatInlineAttachmentMaybe.bind(n),n.formatThemeInstallButton=n.formatThemeInstallButton.bind(n),n.customFormatHandler=n.customFormatHandler.bind(n),n.customContentHandler=n.customContentHandler.bind(n),n.clogLinkClick=n.clogLinkClick.bind(n),n.clogUserClick=n.clogUserClick.bind(n),n.shouldShowAttachment=n.shouldShowAttachment.bind(n),n.messageRef=null,n.deleteAnimation=null,n.hasDisplayedContent=!0,n.inlineAttachmentsKey=0,n.setAttachmentsSorted(),n.state={isHovered:e.isHovered,actionsMenuOpen:!1,height:null},n}return Y()(t,e),W()(t,[{key:"componentDidMount",value:function(){this.props.fadeAwayHighlight&&this.startHighlightingTimer(),this.isDeleting()&&this.onDeleteAnimationEnd()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.fadeAwayHighlight;e.fadeAwayHighlight&&!t&&this.startHighlightingTimer(),this.isDeleting(e)&&!this.isDeleting()&&this.startDeleteAnimation(),this.setAttachmentsSorted(e),this.setState(function(){return{isHovered:e.isHovered}})}},{key:"componentWillUnmount",value:function(){this.highlightTimer&&(clearTimeout(this.highlightTimer),this.onDoneHighlighting()),this.deleteAnimation&&(this.deleteAnimation.cancel(),this.onDeleteAnimationEnd())}},{key:"onContainerClick",value:function(e){if(e.shiftKey&&Object(we.a)(e)&&!Object(Ce.a)(e.target))return e.stopPropagation(),void this.props.logMessage({channelId:this.props.channelId,ts:this.props.ts});e.altKey&&(e.preventDefault(),this.props.setUnreadPoint({channelId:this.props.channelId,unreadTs:this.props.ts}))}},{key:"onMouseEnter",value:function(){this.setState(function(){return{isHovered:!0}})}},{key:"onMouseLeave",value:function(){this.setState(function(){return{isHovered:!1}})}},{key:"onMenuToggle",value:function(e){var t=this;e?this.setState(function(){return{actionsMenuOpen:e}}):setTimeout(function(){t.setState(function(){return{actionsMenuOpen:!1}})},100)}},{key:"onDoneHighlighting",value:function(){this.props.doneHighlighting(),this.highlightTimer=null}},{key:"onDeleteAnimationTick",value:function(e){var t=e.value,n=e.nextTick;this.messageRef&&this.setState(function(){return{height:t}},n)}},{key:"onDeleteAnimationEnd",value:function(){this.removeMsg(),this.deleteAnimation=null}},{key:"onTimestampClick",value:function(e){e.preventDefault(),this.props.shouldJumpToTimestamp&&Object(Se.q)(this.props.channelId,this.props.ts,this.props.threadTs)}},{key:"setAttachmentsSorted",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=t.attachments,a=t.text,r=Object($.a)(Object(re.a)(Object(te.a)(n,this.shouldShowAttachment),ge.b),function(t){return e.isInlineImage(t,a)}),i=q()(r,2),o=i[0],s=i[1];this.attachmentsInline&&o&&!Object(Oe.a)(this.attachmentsInline,o,2)&&(this.inlineAttachmentsKey+=1),this.attachmentsInline=o,this.attachmentsBelow=s}},{key:"setRef",value:function(e){this.messageRef=e}},{key:"getTextWithThemes",value:function(){if(!this.props.text)return this.props.text;var e=this.props.useGlobalNav?/((?:#[A-Fa-f0-9]{6} {0,}, {0,}){8})(#[A-Fa-f0-9]{6})(\b)/g:/((?:#[A-Fa-f0-9]{6} {0,}, {0,}){7})(#[A-Fa-f0-9]{6})(\b)/g;return this.props.text.replace(e,function(e){return e+" <theme_install_button|"+e+">"})}},{key:"getUrlsToHide",value:function(){var e=this.props,t=e.attachments;return e.featureHideUnfurlUrls?Object(Z.a)(Object(re.a)(Object(re.a)(Object(te.a)(Object(re.a)(Object(te.a)(t,this.shouldShowAttachment),ge.b),"isMsgUnfurl"),"fromUrl"),ee.a)):[]}},{key:"getResendText",value:function(){return this.props.isEKMError?ut.t("Your message couldn\u2019t be sent because your admins have disabled sending messages to this channel."):ut.t("Slack couldn\u2019t send this message")}},{key:"componentDidCatch",value:function(e){this.setState(function(){return{caughtError:!0}});var t=e?e.message:"",n=e?e.stack:"",a=this.props||{},r=a.channel&&a.channelId,i=a.logger;i.error("Message componentDidCatch: "+a.subtype+" "+a.ts+" in "+r+", "+t),n&&i.error(n)}},{key:"clogLinkClick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=t.ts,a=t.channelId,i={ts:n,user:t.userId,channel:a,bot_id:t.botId},o=r()({},e,{request_id:null});"user_link"===e.type?this.props.clogUserClick({msg:i,payload:o}):this.props.clogMessageClick({msg:i,payload:o})}},{key:"clogUserClick",value:function(e){this.clogLinkClick(r()({type:"user_link"},e))}},{key:"isInlineImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.text;return t&&-1!==Object(ee.a)(t).indexOf(e.fromUrl)&&Object(xe.m)(e)}},{key:"shouldShowAttachment",value:function(e){var t=this.props,n=t.text,a=t.subtype,r=t.isStandalone,i=t.expandInlineImgsPref,o=t.expandNonMediaAttachmentsPref;return Object(pe.h)({attachment:e,messageText:n,messageSubtype:a,messageIsStandalone:r,expandInlineImgsPref:i,expandNonMediaAttachmentsPref:o})}},{key:"isDeleting",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.isDeleting,n=e.isStandalone;return t&&!n}},{key:"startHighlightingTimer",value:function(){this.highlightTimer||(this.highlightTimer=setTimeout(this.onDoneHighlighting,4500))}},{key:"startDeleteAnimation",value:function(){if(this.messageRef){var e=this.messageRef.clientHeight;this.deleteAnimation=Object(_e.a)({fromValue:e,toValue:0,duration:200,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}}},{key:"startEditing",value:function(){var e=this.props;(0,e.maybeStartEditingMessage)({channelId:e.channelId,ts:e.ts})}},{key:"formatInlineAttachmentMaybe",value:function(e){var t=e.item,n=e.getDefaultOutput,a=this.props,i=a.ts,o=a.channelId,s=a.sourceTeamId,l=t.url,c=Object(ne.a)(this.attachmentsInline,{fromUrl:Object(ee.a)(l)});return c?se.a.createElement(oe.Fragment,null,n(),se.a.createElement(Re.a,r()({},c,{messageTs:i,activeChannelId:o,sourceTeamId:s,clogLinkClick:this.clogLinkClick,isInline:!0}))):n()}},{key:"formatThemeInstallButton",value:function(e){var t=e.item.contents[0].text.replace(/\s/g,"").split(",");return se.a.createElement("div",{className:"c-message__theme_button_container"},se.a.createElement(tt.a,{colors:t,clogLinkClick:this.clogLinkClick}))}},{key:"customContentHandler",value:function(e){var t=this.props.edited,n=e,a=this.getUrlsToHide();if(a.length&&(n=Object(We.a)({content:e,urls:a})),t){var r=Object(J.a)(n)||{};n.push({type:"custom_edited_label",omitWhitespace:!!dt[r.type]})}return this.hasDisplayedContent=!!n.length,n}},{key:"customFormatHandler",value:function(e){var t=e.item,n=e.getDefaultOutput,a=void 0;return"link"===t.type?a="theme_install_button"===t.url?this.formatThemeInstallButton(e):this.formatInlineAttachmentMaybe(e):"custom_edited_label"===t.type&&(a=this.renderEditedLabel({omitWhitespace:t.omitWhitespace})),a||n()}},{key:"focusFirst",value:function(e){this.focusNode(Object(ve.b)(e))}},{key:"focusLast",value:function(e){this.focusNode(Object(ve.c)(e))}},{key:"focusNode",value:function(e){e&&document.activeElement!==e&&(e.focus(),e.classList.add("focus-ring"))}},{key:"isTombstone",value:function(){return"tombstone"===this.props.subtype}},{key:"shouldShowResendControls",value:function(){var e=this.props,t=e.showResend,n=e.showCancel;return t||n}},{key:"resendMsg",value:function(){var e=this.props,t=e.ts,n=e.channelId;this.props.resendMsg(n,t)}},{key:"removeMsg",value:function(){var e=this.props,t=e.ts,n=e.channelId,a=e.messageContainerType,r="thread_broadcast"===e.subtype&&a===fe.y.THREADS_FLEXPANE;this.props.removeMsg({channelId:n,ts:t,broadcastDelete:r})}},{key:"shouldShowMessageLabel",value:function(e){var t=e.labelTypes,n=this.props,a=n.showUser,r=n.isFileFollowup,i=n.pinnedByMemberId,o=n.previousMessageIsStarred,s=n.previousMessageIsPinned,l=n.previousMessageIsEphemeral,c=n.previousMessageSubtype,u=n.previousMessageSliHighlight,d=n.previousMessagePinnedByMemberId;if(Object(Q.a)(t))return!1;if(t.sliHighlight)return!0;if(!a||r){var p=Object(me.a)({isStarred:o,isPinned:s,isEphemeral:l,subtype:c,sliHighlight:u});if(Object(Oe.a)(t,p))return t.isPinned&&p.isPinned&&d!==i}return!0}},{key:"renderTimestamp",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isHiddenFromCopy,t=void 0!==e&&e,n=this.props,a=n.teamDomain,i=n.channelId,o=n.ts,s=n.threadTs,l=n.isStandalone,c=n.isEKMDeniedMessage;if(!o||!i||c)return null;var u=void 0,d=void 0;l||(u=Object(N.u)({teamDomain:a,channelId:i,ts:o,threadTs:s}),d=this.onTimestampClick);var p={};return t&&(p["data-stringify-text"]=""),se.a.createElement(ze.b,r()({timestamp:o,relative:!1,full:!1,link:u,onClick:d},p))}},{key:"renderAvatar",value:function(){if(this.isTombstone())return se.a.createElement("div",{className:"c-message__tombstone_icon"},se.a.createElement(qe.a,{type:"trash",align:"top"}));var e=this.props,t=e.userId,n=e.hasAdHocSender,a=e.botId,r=e.botProfile,i=e.isStandalone,o=e.icons,s=e.slackbotFeels,l=e.isEKMDeniedMessage;return se.a.createElement(Ae.b,{className:"c-message__avatar",userId:t,isAdHocMember:n,botId:a,botProfile:r,slackbotFeels:s,size:36,icons:o,isInteractive:!l&&!i,showCard:!0,showTooltip:!0,clogLinkClick:this.clogUserClick,ariaHidden:"true",tabIndex:"-1"})}},{key:"renderGutter",value:function(){var e=ce()("c-message__gutter",{"c-message__gutter--feature_sonic_inputs":this.props.featureSonicInputs});if("light"===this.props.theme){if(this.props.isFileFollowup)return se.a.createElement("div",{className:ce()(e,"c-message__gutter--empty")});if(this.props.isEditing||this.props.showUser)return se.a.createElement("div",{className:e},this.renderAvatar())}return se.a.createElement("div",{className:e},this.renderTimestamp({isHiddenFromCopy:"dense"===this.props.theme}))}},{key:"renderContent",value:function(){var e=this.props,t=e.showUser,n=e.theme,a=e.isStandalone,r=e.reactionKey,i=e.reactionKeyForInitialFileComment,o=ce()("c-message__content",{"c-message__content--feature_sonic_inputs":this.props.featureSonicInputs});return se.a.createElement("div",{className:o,"data-qa":"message_content"},t&&this.renderContentHeader(),"light"===n&&this.renderThreadBroadcastPreamble(),this.renderBody(),this.renderFile(),this.renderFileThreads(),this.renderAttachments(),!a&&!this.isTombstone()&&this.renderReactions(r),!a&&!this.isTombstone()&&this.renderReactions(i),!a&&this.renderReplyBar(),this.renderThreadBroadcastFooter(),this.shouldShowResendControls()&&this.renderResendControls())}},{key:"renderContentHeader",value:function(){var e=this.props,t=e.userId,n=e.botId,a=e.username,r=e.theme,i=e.isUpload,o=e.isStandalone,s=e.isEKMDeniedMessage,l=e.botProfile;if(this.isTombstone())return null;var c=s?Object(Ee.a)({upload:i}):void 0;return se.a.createElement("div",{className:"c-message__content_header"},se.a.createElement(Ke.a,{overrideNameText:c,userId:t,botId:n,username:a,isInteractive:!o&&!s,botProfile:l,clogLinkClick:this.clogUserClick})," ","light"===r&&this.renderTimestamp(),"dense"===r&&se.a.createElement("span",{className:"c-message__dense_copy_timestamp copy_only"},this.renderTimestamp(),se.a.createElement("br",null)),"dense"===r&&"\xa0","dense"===r&&this.renderThreadBroadcastPreamble())}},{key:"renderThreadBroadcastPreamble",value:function(){var e=this.props,t=e.ts,n=e.threadTs,a=e.channelId,r=e.subtype,i=e.isStandalone;return t&&a&&!i&&"thread_broadcast"===r?se.a.createElement(Xe.a,{ts:t,threadTs:n,channelId:a}):null}},{key:"renderThreadBroadcastFooter",value:function(){var e=this.props,t=e.ts,n=e.threadTs,a=e.channelId,r=e.subtype,i=e.isStandalone;return t&&a&&n&&!i&&"thread_broadcast"===r?se.a.createElement(Ze.a,{ts:t,threadTs:n,channelId:a}):null}},{key:"renderEditedLabel",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).omitWhitespace,t=void 0!==e&&e,n=this.props.edited.ts,a=se.a.createElement("span",{key:"edited",className:"c-message__edited_label",dir:"ltr"},!t&&"\xa0",ut.t("(edited)"),!t&&"\xa0");if(n){var r=ut.t("{date} at {time}",{date:Object(ke.a)(n,{shortenMonth:!0}),time:Object(ye.a)(n)});return se.a.createElement(De.c,{key:"edited",delay:De.a,tip:r},a)}return a}},{key:"renderReplyBar",value:function(){var e=this.props,t=e.replies,n=e.replyCount,a=e.replyUsers,r=e.replyUsersCount,i=e.latestReply,o=e.channelId,s=e.threadTs,l=e.isThreadExpanded,c=e.threadListId,u=e.showThreadIfThreadable;return o&&n?se.a.createElement(Ve.a,{channelId:o,threadTs:s,replies:t,replyCount:n,replyUsers:a,replyUsersCount:r,latestReply:i,isThreadExpanded:l,threadListId:c,showThreadIfThreadable:u}):null}},{key:"renderReactions",value:function(e){return"file_comment"===this.props.subtype&&this.props.featureFileThreads?null:e?se.a.createElement(Pe.a,{reactionKey:e}):null}},{key:"renderAttachments",value:function(){var e=this,t=this.props,n=t.ts,a=t.channelId,i=t.blocks,o=t.text,s=t.blocksContainerContext,l=t.sourceTeamId,c=this.attachmentsBelow;if(!c||!c.length)return null;var u=20,d=Object(re.a)(c,function(t,c){var d=t.id||c+1,p=t.botId||e.props.botId;return t.blocks&&(u=10),se.a.createElement(Re.a,r()({},t,{service:p,messageTs:n,activeChannelId:a,sourceTeamId:l,key:d,clogLinkClick:e.clogLinkClick,isOnlyMessageContent:!e.hasDisplayedContent||!i&&!o,blocksContainerContext:s}))}),p=d.splice(u);return se.a.createElement("div",{className:"c-message__attachments"},d,this.renderAttachmentsOverLimitMaybe(p,u))}},{key:"renderAttachmentsOverLimitMaybe",value:function(e,t){if(!e.length)return null;var n={useAttachmentRules:!1,shouldBeExpandedByDefault:!1,expandableKey:Object(de.a)("attachmentsOverLimit",this.props.ts,{limit:t})};return se.a.createElement("div",null,se.a.createElement(Le.a,n,e),se.a.createElement(Fe.a,r()({},n,{render:function(t,n){return se.a.createElement(Be.a,{isExpanded:t.isExpanded,onClick:n,attachmentsOverLimitCount:e.length})}})))}},{key:"renderFile",value:function(){var e=this.props,t=e.fileId,n=e.comment,a=e.subtype;return t&&n&&"file_comment"===a?this.renderFileComment():null}},{key:"renderFileComment",value:function(){var e=this.props,t=e.fileId,n=e.comment,a=e.isFileFollowup,r=e.theme,i=e.subtype,o=e.userId;return t&&n?["file_comment"===i&&(!a||"dense"===r)&&se.a.createElement(Ye.a,{fileId:t,comment:n,followup:a,key:n.id+"-meta"})||null,se.a.createElement(Me.a,{text:n.comment,memberId:o,className:"c-message__comment c-message__body",key:n.id+"-body",clogLinkClick:this.clogLinkClick})]:null}},{key:"renderFileThreads",value:function(){if(!this.props.renderFileThread)return null;var e=this.props,t=e.fileIds,n=e.channelId,a=e.subtype,r=e.text;if(!t||!t.length||!n)return null;if("file_comment"===a)return null;var i=se.a.createElement(Ge.b,{msg:this.props.message}),o=ce()("c-message__files","c-message__files--file_threads_meta_data","c-message__files--pillow",{"c-message__files--empty_body":!r||"file_mention"===a});return se.a.createElement("div",{className:o},i)}},{key:"renderRollup",value:function(){var e=this.props,t=e.rollup,n=e.channelId,a=e.userId;return t&&n?se.a.createElement(Qe.a,{rollup:t,channelId:n,user:a}):null}},{key:"renderAutomatedSubtype",value:function(){return se.a.createElement(Je.a,{subtype:this.props.subtype,channelId:this.props.channelId,timestamp:this.props.ts})}},{key:"renderBody",value:function(){var e=this,t=this.props,n=t.ts,a=t.fileId,r=t.subtype,i=t.rollup,o=t.userId,s=t.edited,l=t.noSpecials,c=t.ariaAssertive,u=t.attachments,d=t.blocks,p=t.featureAttachmentsV2,h=t.channelId,m=t.botId,b=t.isEphemeral,f=t.isRichTextMessage,_=t.shouldRenderBlocks,g=t.serviceTeamId,v=t.blocksContainerContext;if(this.isTombstone())return se.a.createElement("span",{className:"c-message__body c-message__body--tombstone"},ut.t("This message was deleted."));if(!n)return se.a.createElement("span",{className:"c-message__body c-message__body--unknown"});if(a||"file_comment"===r||"file_mention"===r)return null;if(i)return this.renderRollup();if(Object(ue.a)(r))return this.renderAutomatedSubtype();var y=ce()("c-message__body",{"c-message__body--me":"me_message"===r}),k=ce()("c-message__message_blocks",{"c-message__message_blocks--rich_text":f&&_});if(d&&p&&_){var O={serviceId:m,serviceTeamId:g,container:{type:He.a.message,messageTs:n,channelId:h,isEphemeral:b}};return se.a.createElement("div",{className:k},se.a.createElement(Ue.a,{containerActionsPayload:O,blocks:d,service:m,containerId:n,blocksContainerContext:v,clogLinkClick:function(){return e.clogLinkClick()}}))}var j=parseInt(n,10)>1541628e3;return se.a.createElement(Me.a,{"data-qa":"message-text",className:y,text:this.getTextWithThemes(),memberId:o,customFormatHandler:this.customFormatHandler,customContentHandler:this.customContentHandler,key:this.inlineAttachmentsKey,doSlackActionLinks:!0,clogLinkClick:this.clogLinkClick,noSpecials:l,ariaAssertive:c,ignoredPropEdited:s,ignoredPropAttachments:u,addDirectionAttr:j})}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.ts,a=t.reactionKey,r=t.fileId,i=t.fileIds,o=t.comment,s=t.replies,l=t.replyCount,c=t.rollup,u=t.threadsEverythingPref,d=t.threadTs,p=t.channelId,h=t.subtype,m=t.isStarred,b=t.isPinned,f=t.isEphemeral,_=t.isDeleting,g=t.isStandalone,v=t.setUnreadPoint,y=t.theme,k=t.renderActions,O=t.renderActionsOffscreen,j=t.messageContainerType,C=t.hasKeyboardFocusWithin,E=this.state,w=E.actionsMenuOpen,S=E.isHovered;if(!n||!p)return null;var I=O&&!C&&!S&&!k;return w||S||C||I||k?_||g?null:se.a.createElement($e.a,{reactionKey:a,fileId:r,fileIds:i,comment:o&&o.id,replies:s,replyCount:l,rollup:c,ts:n,threadsEverythingPref:u,threadTs:d,channelId:p,subtype:h,isStarred:m,isPinned:b,isEphemeral:f,editHandler:this.startEditing,unreadHandler:v,onMenuOpen:function(){return e.onMenuToggle(!0)},onMenuClose:function(){return e.onMenuToggle(!1)},theme:y,renderOffscreen:I,messageContainerType:j}):null}},{key:"renderEdit",value:function(){var e=this.props,t=e.channelId,n=e.ts,a=e.messageContainerType;return n&&t?se.a.createElement("div",{className:"c-message__content"},se.a.createElement(et.a,{channelId:t,ts:n,messageContainerType:a})):null}},{key:"renderResendControls",value:function(){var e=this.props,t=e.isEKMError,n=e.showResend,a=e.showCancel,r=null;n&&(r=se.a.createElement(Ne.c,{className:"c-message__resend",onClick:this.resendMsg},ut.t("Try again")));var i=null;a&&(i=se.a.createElement(Ne.c,{className:"c-message__cancel",onClick:this.removeMsg},t?ut.t("Clear"):ut.t("Cancel")));var o=null;return n&&a&&(o=" | "),se.a.createElement("div",{className:"c-message__resend_controls"},se.a.createElement("div",{className:"c-message__resend_column"}),this.getResendText(),r,o,i)}},{key:"renderError",value:function(){if(!this.props.featureTinyspeck)return null;var e=this.props,t=e.ts,n=e.channelId;return se.a.createElement("div",{style:{background:"#FFCFCF",padding:"24px"}},se.a.createElement("strong",null,"TS-ONLY: Message ",t," in ",n," failed to render.")," ","Please go to #escal-messages and read up to see if this was already reported. If not, please make a report including a link to the message before this one (if in a public channel.)")}},{key:"renderMessageLabel",value:function(e){var t=e.labelTypes,n=e.primaryLabelType,a=this.props,i=a.sliHighlight,o=a.isSlackbotIm,s=a.isSelfIm,l=a.channelId,c=a.ts,u=a.currentUserId,d=a.pinnedByMemberId,p=a.sourceTeamId,h=this.state.isHovered;return this.shouldShowMessageLabel({labelTypes:t})?se.a.createElement(ct,r()({},t,{primaryType:n,channelId:l,ts:c,isHovered:h,isSlackbotIm:o,isSelfIm:s,sliHighlight:i,currentUserId:u,pinnedByMemberId:d,sourceTeamId:p})):null}},{key:"render",value:function(){var e;if(this.state.caughtError)return this.renderError();if(this.props.messageNotFound)return null;var t=this.props,n=t.theme,a=t.isEditing,r=t.showUser,i=t.alertType,o=t.fadeAwayHighlight,s=t.isLast,l=t.isStandalone,c=t.isUnprocessed,u=t.subtype,d=t.rollup,p=t.sliHighlight,h=t.ts,m=t.isPinned,b=t.isEphemeral,f=t.isStarred,_=t.isEKMDeniedMessage,g=t.isEKMError,v=t.hasKeyboardFocusWithin,y=this.state,k=y.isHovered,j=y.actionsMenuOpen,C=y.height,E=Object(me.a)({isPinned:m,isEphemeral:b,isStarred:f,subtype:u,sliHighlight:p}),w=Object(he.a)(E),S=ce()("c-message",(e={},F()(e,"c-message--"+n,n),F()(e,"c-message--hover",k||j),F()(e,"c-message--focus-within",v),F()(e,"c-message--adjacent",!a&&!r&&!l),F()(e,"c-message--thread_broadcast","thread_broadcast"===u),F()(e,"c-message--highlight_yellow_bg","shared_channel_join"===i),F()(e,"c-message--highlight",!l&&a),F()(e,"c-message--fade_highlight",o&&!w),F()(e,"c-message--last",s),F()(e,"c-message--rollup",d),F()(e,"c-message--standalone",l),F()(e,"c-message--unprocessed",c),F()(e,"c-message--resend",this.shouldShowResendControls()),F()(e,"c-message--deleting",this.isDeleting()),F()(e,"c-message--editing",a),F()(e,"c-message--sli_highlight_negative",Object(O.f)(p)),F()(e,"c-message--"+w,w),e)),I={};return null!==C&&(I={height:C}),se.a.createElement("div",{ref:this.setRef,className:S,onClick:this.onContainerClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseEnter,onFocus:this.props.onFocus,onBlur:this.props.onBlur,style:I,role:"document","data-qa":"message_container","data-qa-placeholder":Object(N.qb)(h)},this.renderMessageLabel({labelTypes:E,primaryLabelType:w}),this.renderGutter(),!l&&a&&this.renderEdit(),(l||!a)&&this.renderContent(),!_&&!g&&!l&&!a&&this.renderActions())}}]),t}(oe.PureComponent);ht.displayName="Message",ht.defaultProps=pt;var mt=Object(Te.a)(Object(Ie.a)(ht));function bt(e,t){var n=t.message,a=Object(N.zb)(n,{featureFileThreads:Object(S.i)(e,"feature_file_threads"),featureFileThreadsDarkLaunch:Object(S.i)(e,"feature_file_threads_dark_launch")}),r=a?null:n.file,o=a?n.files:null;return{fileId:r,fileIds:o,file:a?Object(v.h)(e,Object(i.a)(o)):Object(v.h)(e,r)}}var ft={logMessage:function(){return C.a.apply(void 0,arguments)},clogMessageClick:function(){return c.a.apply(void 0,arguments)},clogUserClick:function(){return u.a.apply(void 0,arguments)},maybeStartEditingMessage:function(){return w.e.apply(void 0,arguments)},removeMsg:function(){return h.a.apply(void 0,arguments)},resendMsg:function(){return p.a.apply(void 0,arguments)}};t.a=Object(o.b)(function(e,t){var n=t.ts,a=t.channelId,i=t.previousMessageTs,o=Object(d.a)(e,a,n),c=Object(k.a)(e),u=Object(y.h)(e,"threads_everything"),p=Object(y.h)(e,"expand_inline_imgs"),h=Object(y.h)(e,"expand_non_media_attachments"),C=Object(g.d)(e,a),L=Object(S.i)(e,"feature_file_threads"),F=Object(S.i)(e,"feature_file_threads_dark_launch"),B=Object(S.i)(e,"feature_hide_unfurl_urls"),q=Object(S.i)(e,"feature_attachments_v2"),U=Object(S.i)(e,"feature_sonic_inputs"),H=Object(S.i)(e,"feature_tinyspeck"),G=Object(S.i)(e,"feature_message_history_cfm"),W=Object(s.a)({state:e}),K=Object(l.a)({state:e});if(!o)return{channelId:a,clogger:W,logger:K,featureTinyspeck:H,featureFileThreads:L,featureHideUnfurlUrls:B,messageNotFound:!0};if(G){var V=Object(f.b)(e);n&&Object(j.d)(V,a,n),i&&Object(j.d)(V,a,i)}var z=Object(N.zb)(o,{featureFileThreads:L,featureFileThreadsDarkLaunch:F}),Y=bt(e,{message:o}),Q=Y.file,J=Y.fileId,X=Y.fileIds,Z=Object(d.a)(e,a,i),$=!Object(N.X)(e,o,Z),ee=Object(M.a)(o,Z),te=Object(A.b)(o,Q),ne=Object(A.c)(o,Q),ae=Object(N.R)(e,o),re=ae.botId&&Object(m.d)(e,o),ie=re?re.app_id:null,oe=o.slackbot_feels||null,se=o.comment&&Q&&Object(v.i)(e,Q.id,o.comment.id)||o.comment;Q&&"file_share"===o.subtype&&o.upload&&(se=Q.initial_comment);var le=Object(O.e)(e,{channelId:a,ts:n}),ce=le.isDeleting,ue=le.sliHighlight,de=Object(w.d)(e,{channelId:a,ts:n}).isEditing,pe=void 0,he=(pe=z?Object(N.K)(o):Q?Object(R.n)({file:Q,channelId:a}):Object(N.K)(o))?pe.pinnedBy:null,me=void 0;if(Z){var be=void 0;if(z)be=Object(N.K)(Z);else{var fe=bt(e,{message:Z});be=fe.file?Object(R.n)({file:fe.file,channelId:a}):Object(N.K)(Z)}var _e=be?be.pinnedBy:null;me={previousMessageIsStarred:Object(N.ob)(Z),previousMessageIsPinned:Object(I.j)(e,{channelId:a,ts:i}),previousMessageIsEphemeral:Object(N.bb)(Z),previousMessageSubtype:Z.subtype,previousMessageSliHighlight:Z.sliHighlight,previousMessagePinnedByMemberId:_e}}var ge=o.thread_ts,ve=void 0;ge&&(ve={replyCount:o.reply_count},Object(x.a)()?o.reply_users?(ve.replyUsers=o.reply_users,ve.replyUsersCount=o.reply_users_count,ve.latestReply=o.latest_reply):o.replies&&(ve.replies=o.replies):o.replies?ve.replies=o.replies:(ve.replyUsers=o.reply_users,ve.replyUsersCount=o.reply_users_count,ve.latestReply=o.latest_reply));var ye=Object(S.b)(e),ke=Object(_.d)(e),Oe=Object(f.b)(e),je=ke&&ke.domain,Ce=void 0;if(re){var Ee=Object(b.c)(e,o.user),we=Object(E.c)({bot:re,botProfile:o.bot_profile,member:Ee,teamId:Oe});Ce=Object(E.b)(Ee,we)}return r()({message:o,channelId:a,clogger:W,logger:K,blocks:o.blocks,alertType:o.alert_type,subtype:o.subtype,text:o.text,noSpecials:!1===o.mrkdwn,theme:c},ae,{appId:ie,hasAdHocSender:Object(P.a)(o)},ve,{threadTs:ge,threadsEverythingPref:u,expandInlineImgsPref:p,expandNonMediaAttachmentsPref:h,attachments:o.attachments,fileId:J,fileIds:X,comment:se,isUpload:o.upload,reactionKey:te,reactionKeyForInitialFileComment:ne,showUser:$,isFileFollowup:ee,edited:o.edited,isStarred:Object(N.ob)(o,Q,"file_comment"===o.subtype&&se,L),isPinned:Object(I.j)(e,{channelId:a,ts:n}),currentUserId:ye,pinnedByMemberId:he,sliHighlight:ue,botProfile:o.bot_profile,slackbotFeels:oe,icons:o.icons,isEditing:de,isUnprocessed:Object(N.pb)(o)&&!Object(N.bb)(o),isEphemeral:Object(N.bb)(o),isDeleting:ce,showResend:o.showResend,showCancel:o.showCancel,isSlackbotIm:Object(T.Eb)(C),isRichTextMessage:Object(N.kb)(o),shouldRenderBlocks:Object(N.yb)(e,o),sourceTeamId:Object(N.V)(o)||Object(f.b)(e),isSelfIm:Object(T.Qb)(ye,C),isEKMDeniedMessage:Object(N.ab)(o),isEKMError:o.isEKMError,teamDomain:je},me,{featureTinyspeck:H,featureFileThreads:L,featureHideUnfurlUrls:B,useGlobalNav:Object(D.b)(e),renderFileThread:z,featureAttachmentsV2:q,ariaAssertive:Object(N.Z)(o),serviceTeamId:Ce,featureSonicInputs:U})},ft)(mt)},H9m0:function(e,t,n){"use strict";var a=n("13mM"),r=n("9D+4"),i=n("St+r"),o=n("XfeM"),s=n("BeG2"),l=n("DtX9"),c=n("Fdc0"),u=n("yHhI"),d=n("6TBL"),p=Object(o.b)("Ping the message server if necessary",function(e,t){var n=t(),o=Object(l.b)(n),p=Object(u.a)({state:n});o?Object(i.i)(n)&&Object(c.v)(o)!==r.b&&(Date.now()-Object(a.g)(n)<2e4||e(Object(s.h)({type:"tickle"})).catch(function(n){n&&n.message===d.c?(p.warn("TICKLE-MS","Sending tickle event failed; will try again the next time we get reconnected"),Object(i.r)(t()).then(function(){p.info("TICKLE-MS","Retrying tickle event that failed earlier"),e(Object(s.h)({type:"tickle"})).then(function(){p.info("TICKLE-MS","Tickle sent successfully after retry")}).catch(function(e){p.warn("TICKLE-MS","Tickle retry failed with error: "+e)})})):p.warn("TICKLE-MS","Send tickle event failed with error = "+n)})):p.info("TICKLE-MS","Skipping tickle because no user exists")});t.a=p},"HAG/":function(e,t,n){},HOOb:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("yZHI");function r(e){return Object(a.a)(e,function(e){return"A"===e.nodeName})}},HQme:function(e,t,n){},Ho8D:function(e,t,n){},HyiT:function(e,t,n){},Hza5:function(e,t,n){},ISfF:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("aK/h"),o=n("XHGt"),s=n("TSYQ"),l=n.n(s),c=n("HO/Y"),u=n("VjHM"),d=n("nNoG"),p=n("rWF5"),h=n("Smdl"),m=n("QbLZ"),b=n.n(m),f=n("iCc5"),_=n.n(f),g=n("V7oC"),v=n.n(g),y=n("FYw3"),k=n.n(y),O=n("mRg0"),j=n.n(O),C=n("lE2N"),E=n("ifKl"),w=n("od5y"),S=n("MREy"),I=n("HX+W"),T=n("v8Qo"),N=n("Ejsr"),R=n("yHhI"),A=n("kOzZ"),P=n("RMmo"),M=n("2fzK"),D=n("2Y1Y"),x=n("tVnY"),L=n("XLFM"),F=n("RAhH"),B=(i.b.node,i.b.string,i.b.bool,i.b.oneOfType([i.b.string,i.b.func]),i.b.string.isRequired,i.b.func.isRequired,i.b.func,{children:null,className:void 0,disabled:!1,tooltip:void 0,onTrigger:E.a}),q=function(e){function t(e){_()(this,t);var n=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseDown=n.onMouseDown.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n.pressTimer=void 0,n}return j()(t,e),v()(t,[{key:"componentWillUnmount",value:function(){this.pressTimer&&clearTimeout(this.pressTimer),window.removeEventListener("mouseup",this.onMouseUp)}},{key:"onMouseDown",value:function(e){var t=this;this.props.disabled||0===e.button&&(e.persist(),this.pressTimer=setTimeout(function(){return t.props.onTrigger(e)},300),window.addEventListener("mouseup",this.onMouseUp))}},{key:"onMouseUp",value:function(){this.pressTimer&&clearTimeout(this.pressTimer),window.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.tooltip,a=e["aria-label"],i=l()("p-global_nav__top_button",this.props.className,{"p-global_nav__top_button--disabled":t});return r.a.createElement(function(e){var n=e.tip,a=e.children;return t||!n?a:r.a.createElement(F.c,{tip:n,delay:800,position:"bottom",offsetY:Sn,tipClassName:"p-global_nav__top_history_tip"},a)},{tip:n},r.a.createElement(L.c,{className:i,disabled:t,onClick:this.props.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,"aria-label":a},this.props.children))}}]),t}(a.PureComponent);q.displayName="HistoryButton",q.defaultProps=B;var U=q,H=n("uf9I"),G=n("4Twu"),W=new d.b("global_nav"),K=(i.b.string,i.b.string,i.b.string,i.b.string,i.b.string,i.b.string,i.b.bool,{viewId:void 0,viewName:void 0,teamId:void 0,teamName:void 0,teamIcon:void 0,currentTeamId:void 0,featureGlobalNav:!1}),V=function(e){function t(){return _()(this,t),k()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j()(t,e),v()(t,[{key:"renderTeamIcon",value:function(){var e=this.props,t=e.teamIcon,n=e.teamName;return r.a.createElement(F.c,{tip:n,position:"bottom",zIndex:"above_fs"},r.a.createElement("div",{className:"p-global_nav__top_history_item_team_icon",style:{backgroundImage:"url("+t+")"}}))}},{key:"renderThreads",value:function(){var e=this.props,t=e.teamId,n=e.currentTeamId;if(!e.featureGlobalNav)return null;var i=t===n?r.a.createElement(w.b,{type:"small-reply",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon(),o=W.t("Threads");return r.a.createElement(a.Fragment,null,i,o)}},{key:"renderUnreads",value:function(){var e=this.props,t=e.teamId,n=e.currentTeamId;if(!e.featureGlobalNav)return null;var i=t===n?r.a.createElement(w.b,{type:"list",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon(),o=W.t("All Unreads");return r.a.createElement(a.Fragment,null,i,o)}},{key:"render",value:function(){var e=this.props,t=e.viewId,n=e.viewName,i=e.teamId,o=e.currentTeamId;return"Vall_threads"===t?this.renderThreads():"Vall_unreads"===t?this.renderUnreads():i===o?r.a.createElement(G.a,{channelId:t,className:"p-global_nav__top_history_item_channel_name"}):r.a.createElement(a.Fragment,null,this.renderTeamIcon(),n)}}]),t}(a.Component);V.displayName="HistoryItem",V.defaultProps=K;var z=Object(o.b)(function(e){return{currentTeamId:Object(H.b)(e),featureGlobalNav:Object(c.i)(e,"feature_global_nav")}})(V),Y=new d.b("global_nav"),Q=(i.b.object.isRequired,i.b.func,i.b.func,i.b.func,i.b.func,i.b.func,i.b.bool,i.b.object.isRequired,{back:E.a,forward:E.a,index:E.a,sync:E.a,action:i.b.func,featureGlobalNav:!1}),J=function(e){function t(e){_()(this,t);var n=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onBackClick=n.onBackClick.bind(n),n.onForwardClick=n.onForwardClick.bind(n),n.renderBackMenu=n.renderBackMenu.bind(n),n.renderForwardMenu=n.renderForwardMenu.bind(n),n.renderBackTooltip=n.renderBackTooltip.bind(n),n.renderForwardTooltip=n.renderForwardTooltip.bind(n),n}return j()(t,e),v()(t,[{key:"componentDidMount",value:function(){var e=this;if(Object(x.c)()){window.requestIdleCallback&&window.requestIdleCallback(function(){return e.props.sync()});var t=Object(p.B)(),n=[{keys:t?"alt+left":["command+[","command+left"],handler:function(t){e.shouldPreventShortcut(t)||(t.preventDefault(),e.props.action("GLOBAL-NAV","Navigating back in history with key command"),e.props.back(),e.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"KEYDOWN",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_KEYBOARD_BACK"}}}))}},{keys:t?"alt+right":["command+]","command+right"],handler:function(t){e.shouldPreventShortcut(t)||(t.preventDefault(),e.props.action("GLOBAL-NAV","Navigating forward in history with key command"),e.props.forward(),e.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"KEYDOWN",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_KEYBOARD_FORWARD"}}}))}}];this.keyCommands||(this.keyCommands=new P.a),this.keyCommands.bindAll(n)}}},{key:"componentWillUnmount",value:function(){this.keyCommands&&this.keyCommands.reset()}},{key:"onBackClick",value:function(){this.props.back(),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_BACK"}}})}},{key:"onForwardClick",value:function(){this.props.forward(),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_FORWARD"}}})}},{key:"shouldPreventShortcut",value:function(e){if(e.metaKey&&("ArrowRight"===e.key||"ArrowLeft"===e.key)&&!(Object(M.a)()&&Object(D.g)(document.activeElement)||document.activeElement===document.body))return!0;return!1}},{key:"renderStackMenu",value:function(e,t){var n=this,a=function(e){return e.viewId+":"+e.teamId},i=Object(C.a)(e,a).map(function(e){return{label:r.a.createElement(z,e),key:a(e),click:function(){n.props.index({target:e.index}),n.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_STACK_ITEM"}}})},className:"p-global_nav__top_history_item"}});return r.a.createElement(S.a,b()({},t,{template:i}))}},{key:"renderBackMenu",value:function(e){var t=Object(N.a)(this.props.history);return t?(this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_BACK_STACK"}}}),this.renderStackMenu(t.reverse(),e)):null}},{key:"renderForwardMenu",value:function(e){var t=Object(N.b)(this.props.history);return t?(this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_FORWARD_STACK"}}}),this.renderStackMenu(t,e)):null}},{key:"renderBackTooltip",value:function(){if(!this.props.featureGlobalNav)return null;var e=Object(p.p)()?"\u2318[":Y.t("Alt+Left Arrow");return r.a.createElement(a.Fragment,null,Y.t("Go back"),r.a.createElement("span",{className:"p-global_nav__tip_shortcut"},e))}},{key:"renderForwardTooltip",value:function(){if(!this.props.featureGlobalNav)return null;var e=Object(p.p)()?"\u2318]":"Alt+Right Arrow";return r.a.createElement(a.Fragment,null,Y.t("Go forward"),r.a.createElement("span",{className:"p-global_nav__tip_shortcut"},e))}},{key:"render",value:function(){var e=this.props,t=e.history;if(!e.featureGlobalNav)return null;if(!Object(x.c)())return null;var n=!Object(N.a)(t)||!Object(N.a)(t).length,i=!Object(N.b)(t)||!Object(N.b)(t).length,o={position:"bottom-left",offsetX:-12,offsetY:In,customTrigger:!0};return r.a.createElement(a.Fragment,null,r.a.createElement(S.e,b()({renderMenu:this.renderBackMenu},o),r.a.createElement(U,{className:"p-global_nav__top_history p-global_nav__top_history--back",onClick:this.onBackClick,disabled:n,tooltip:this.renderBackTooltip,"aria-label":Y.t("Go back")},r.a.createElement(w.b,{type:"chevron-large-left",className:"p-global_nav__top_button_icon"}))),r.a.createElement(S.e,b()({renderMenu:this.renderForwardMenu},o),r.a.createElement(U,{className:"p-global_nav__top_history",onClick:this.onForwardClick,disabled:i,tooltip:this.renderForwardTooltip,"aria-label":Y.t("Go forward")},r.a.createElement(w.b,{type:"chevron-large-right",className:"p-global_nav__top_button_icon"}))))}}]),t}(a.Component);J.displayName="History",J.defaultProps=Q;var X={back:T.a,forward:T.b,index:T.c,sync:T.f},Z=Object(o.b)(function(e){return{history:Object(I.b)(e),featureGlobalNav:Object(c.i)(e,"feature_global_nav"),action:Object(R.a)({state:e}).action,clogger:Object(A.a)({state:e})}},X)(J),$=n("D4L/"),ee=n("5mKg"),te=n("bmfP"),ne=n("jo6Y"),ae=n.n(ne),re=n("g5qt"),ie=n("35v0"),oe=n("SQvH"),se=n("XUHR"),le=n("qN/r"),ce=n("Lts7"),ue=n("ROZo"),de=Object(ue.b)("TS.ui.workspaces.start"),pe=n("8vJI"),he=n("N/g+"),me=Object(ue.b)("TS.magic_login.execute"),be=n("Sh1l"),fe=(i.b.string.isRequired,i.b.string,i.b.string,i.b.string,{org:void 0,icon:void 0,url:void 0}),_e=function(e){var t=e.name,n=e.icon,a=e.org,i=e.url;return r.a.createElement("div",{className:"p-global_nav__top_menu_header"},r.a.createElement("div",{className:"p-global_nav__top_menu_header_icon",style:{backgroundImage:n&&"url("+n+")"}}),r.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},r.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},t),r.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},a||i)))};_e.displayName="TeamHeader",_e.defaultProps=fe;var ge=Object(o.b)(function(e){var t=Object($.d)(e);return{name:Object(ee.e)(t),org:t.enterprise_name,icon:t.icon&&t.icon.image_88||void 0,url:t.domain+".slack.com"}})(_e),ve=n("DtX9"),ye=n("syB0"),ke=n("Qaea"),Oe=n.n(ke),je=n("wvq5"),Ce=n("lhZz"),Ee=n("QLy6").a,we=n("yg0S"),Se=function(e,t){var n=document.getElementById("connected_workspaces_dialog_mount_point");if(!e)throw new Error("mountChannelOptions must be called with a teamId parameter");var a=Object(Ce.getStoreInstanceByTeamId)(e);Object(je.a)(r.a.createElement(o.a,{store:a},r.a.createElement(we.a,null,r.a.createElement(Ee,b()({},t,{onClose:function(){Object(ye.a)(function(){Oe.a.unmountComponentAtNode(n)})}})))),n)},Ie=n("ONPw"),Te=new d.b("global_nav"),Ne=(i.b.object,i.b.object.isRequired,i.b.bool,i.b.string,i.b.bool,i.b.bool,{menuProps:void 0,isEnterprise:!1,enterpriseURL:void 0,isAppmin:!1,featureGlobalNav:!1}),Re=function(e){var t=e.featureGlobalNav,n=e.team,a=e.isEnterprise,i=e.enterpriseURL,o=e.isAppmin,s=e.menuProps;if(!t)return null;var l=[{label:Te.t("Manage members"),href:Object(ee.o)(n,"/admin")},{label:Te.t("Workspace settings"),href:Object(ee.o)(n,"/admin/settings")},{label:Te.t("Organization settings"),href:"https://"+i+"/manage",hide:!a},{label:Te.t("Manage apps"),href:Object(ee.o)(n,"/apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"),hide:a||!o},{label:Te.t("Manage shared channels"),click:function(){return Se(n.id)},hide:!Object(Ie.a)()}].filter(function(e){return!e.hide});return r.a.createElement(S.a,b()({},s,{template:l}))};Re.displayName="TeamAdminSubmenu",Re.defaultProps=Ne;var Ae=Object(o.b)(function(e){var t=Object($.d)(e);return{team:t,isEnterprise:Object(ee.q)(t),enterpriseURL:Object(c.d)(e,"enterprise_url"),isAppmin:Object(ve.j)(e),featureGlobalNav:Object(c.i)(e,"feature_global_nav")}})(Re),Pe=n("0BC7"),Me=n("7EGn"),De=n("FN36"),xe=n("1VpL"),Le=n("Fdc0"),Fe=n("x4bP"),Be=n("Qrgz"),qe=n("0xwB");function Ue(e){var t=Object(ve.b)(e),n=Object($.d)(e),a=Object(Le.X)(t),r=Object(Le.vb)(t),i=Object(Le.xb)(t),o=Object(c.l)(e),s=Object(ee.B)(n),l=a,d=Object(qe.d)(),h=Object(c.i)(e,"feature_builder_can_access"),m=a||!i&&(!Object(De.a)(e,"emoji_only_admins")||!Object(De.a)(e,"slackbot_responses_only_admins")||!Object(De.a)(e,"loading_only_admins")),b=o&&Object(xe.f)(e)&&Object(ve.j)(e),f=a||!Object(De.a)(e,"stats_only_admins")&&!i,_=(r||Object(u.h)(e,"purchaser")||Object(De.a)(e,"all_users_can_purchase"))&&s,g=!s&&!Object(re.T)(),v=o&&!Object(Le.xb)(t),y=s&&Object(Be.l)(e),k=Object(c.d)(e,"help_url"),O=Object(c.i)(e,"feature_tinyspeck")||p.k,j=o&&!i,C=Object(c.f)(e).length-1,E=(Object(Fe.a)()?C:C+Object(Me.a)(t,"enterprise_user.teams.length",1))>=1&&!re.V;return{administration:l,invite:d,launchWorkflowBuilder:h,customize:m,manageApps:b,analytics:f,billing:_,plans:g,orgShared:v,externalShared:y,help:k,version:O,findWorkspaces:j,switchWorkspaces:E,signin:!E&&!!Object(c.d)(e,"signin_url")}}var He=n("KQjq"),Ge=new d.b("global_nav"),We=(i.b.object,i.b.object.isRequired,i.b.func,i.b.func,i.b.string.isRequired,i.b.string,i.b.string,i.b.func,i.b.func,i.b.func,i.b.bool,i.b.bool,{actions:{},signOut:E.a,openPrefsModal:E.a,launchWorkflowBuilder:E.a,openSharedChannelIntroductionModal:E.a,signoutURL:void 0,signinURL:void 0,renderSonicMenu:void 0,featureGlobalNav:!1,featureSharedChannelsRemoveBetaLabel:!1}),Ke=function(e){function t(e){_()(this,t);var n=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSigninClick=n.onSigninClick.bind(n),n.onOpenAppClick=n.onOpenAppClick.bind(n),n.renderAdminSubmenu=n.renderAdminSubmenu.bind(n),n.renderWorkspacesSubmenu=n.renderWorkspacesSubmenu.bind(n),n}return j()(t,e),v()(t,[{key:"onSigninClick",value:function(e){re.V&&(e.preventDefault(),Object(re.Eb)())}},{key:"onOpenAppClick",value:function(e){e.preventDefault(),me({fallback_to_browser:!0,browser_uri:"/downloads",app_uri:"/ssb/open"})}},{key:"renderAdminSubmenu",value:function(e){return r.a.createElement(Ae,{menuProps:e})}},{key:"renderWorkspacesSubmenu",value:function(e){return r.a.createElement(Pe.a,{menuProps:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.actions,a=t.renderSonicMenu,i=t.featureGlobalNav,o=t.signoutName,s=t.signoutURL,l=t.signinURL,c=t.team,u=t.launchWorkflowBuilder,d=(t.featureSharedChannelsRemoveBetaLabel,ae()(t,["actions","renderSonicMenu","featureGlobalNav","signoutName","signoutURL","signinURL","team","launchWorkflowBuilder","featureSharedChannelsRemoveBetaLabel"]));if(!i)return null;var m=[{type:"submenu",label:"Sonic",renderSubmenu:a,hide:!a},{type:"separator"},{type:"custom",children:r.a.createElement(ge,{key:"team-header"})},{type:"separator"},{label:Ge.t("Preferences"),shortcut:Object(p.p)()&&re.V&&"\u2318,",click:function(){return e.props.openPrefsModal()}},{type:"separator"},{type:"submenu",label:Ge.t("Administration"),renderSubmenu:this.renderAdminSubmenu,hide:!n.administration},{label:Ge.t("Analytics"),hide:!n.analytics,href:Object(ee.o)(c,"/stats")},{label:Ge.t("Billing"),hide:!n.billing,href:Object(ee.o)(c,"/admin/billing")},{label:Ge.t("See paid plans"),hide:!n.plans,href:Object(ee.o)(c,"/pricing")},{key:"launch-workflow-builder",hide:!n.launchWorkflowBuilder,click:u,children:r.a.createElement(be.a,null)},{label:Ge.t("Customize Slack"),hide:!n.customize,href:Object(ee.o)(c,"/customize?utm_source=in-prod&utm_medium=inprod-customize_link-slack_menu-click"),target:"_blank"},{type:"separator"},{label:Ge.t("Invite people"),hide:!n.invite,click:function(){return Object(ie.a)({source:"team_menu"})}},{label:Ge.t("Manage apps"),hide:!n.manageApps,href:"/apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"},{label:Ge.t("Shared channels (beta)"),hide:!n.externalShared,click:function(){return Object(h.a)()?e.props.openSharedChannelIntroductionModal():Object(oe.a)()}},{type:"separator"},{label:Ge.t("Help & feedback"),hide:!n.help,click:pe.a},{label:"Version info (TS only)",hide:!n.version,click:he.a},{type:"separator"},{label:Ge.t("Find more workspaces"),hide:!n.findWorkspaces,click:function(){return de()}},{type:"submenu",label:Ge.t("Switch workspaces"),hide:Object(h.a)()||!n.switchWorkspaces,renderSubmenu:this.renderWorkspacesSubmenu},{label:Ge.t("Sign in to another workspace"),hide:!n.signin,href:l,click:this.onSigninClick},{label:Ge.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:o}),hide:!Object(h.a)(),click:function(){return e.props.signOut(c.id)},dataQa:"logout"},{label:Ge.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:o}),hide:Object(h.a)(),href:s,target:"_self",dataQa:"logout"},{type:"separator"},{label:Ge.rt("Open the Slack App"),hide:re.V,href:Object(ee.o)(c,"/ssb/open"),click:this.onOpenAppClick}].filter(function(e){return!e.hide});return r.a.createElement(S.a,b()({},d,{template:m,menuClassNames:"p-global_nav__top_team_menu",stripTerminalSeparators:!0}))}}]),t}(a.Component);Ke.displayName="TeamMenu",Ke.defaultProps=We;var Ve=Object(o.b)(function(e){var t=Object($.d)(e);return{actions:Ue(e),team:t,signoutName:t.enterprise_name||Object(ee.e)(t),signoutURL:Object(ee.q)(t)?Object(c.d)(e,"enterprise_logout_url"):Object(c.d)(e,"logout_url"),signinURL:Object(c.d)(e,"signin_url"),featureGlobalNav:Object(c.i)(e,"feature_global_nav"),featureSharedChannelsRemoveBetaLabel:Object(c.i)(e,"feature_shared_channels_remove_beta_label")}},function(e){return{signOut:function(){return e(He.u.apply(void 0,arguments))},openPrefsModal:function(){return e(Object(le.a)())},launchWorkflowBuilder:function(){return e(Object(ce.a)())},openSharedChannelIntroductionModal:function(){return e(se.a.apply(void 0,arguments))}}})(Ke),ze=new d.b("global_nav"),Ye=(i.b.string,i.b.bool,i.b.bool,i.b.object.isRequired,i.b.func,{name:void 0,featureGlobalNav:!1,featureOfflineMode:!1,renderSonicMenu:void 0}),Qe=function(e){function t(e){_()(this,t);var n=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.renderMenu=n.renderMenu.bind(n),n.renderIcon=n.renderIcon.bind(n),n}return j()(t,e),v()(t,[{key:"onClick",value:function(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_TEAM_MENU"}}})}},{key:"renderMenu",value:function(e){return r.a.createElement(Ve,b()({},e,{renderSonicMenu:this.props.renderSonicMenu}))}},{key:"renderIcon",value:function(){return this.props.featureOfflineMode?r.a.createElement(a.Fragment,null,r.a.createElement(te.b,null,r.a.createElement(w.b,{type:"chevron-down",className:"p-global_nav__top_name_icon"})),r.a.createElement(te.a,null,r.a.createElement(F.c,{tip:ze.t("No network connection"),position:"bottom"},r.a.createElement(w.b,{type:"cloud-offline-small",className:"p-global_nav__top_name_icon margin_left_25"})))):r.a.createElement(w.b,{type:"chevron-down",className:"p-global_nav__top_name_icon"})}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.featureGlobalNav;return t&&n?r.a.createElement(S.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:-4,allowanceX:12,onClick:this.onClick},r.a.createElement(L.c,{className:"p-global_nav__top_name","data-qa":"team_menu","aria-label":ze.t("Team menu")},r.a.createElement("div",{className:"overflow_ellipsis"},t),this.renderIcon())):null}}]),t}(a.Component);Qe.displayName="Name",Qe.defaultProps=Ye;var Je=Object(o.b)(function(e){var t=Object($.d)(e);return{name:t?Object(ee.e)(t):void 0,featureGlobalNav:Object(c.i)(e,"feature_global_nav"),featureOfflineMode:Object(c.i)(e,"feature_offline_mode"),clogger:Object(A.a)({state:e})}})(Qe),Xe=n("eqKo"),Ze=n("3dqR"),$e=n("6avh"),et=n("ZYn4"),tt=n("/LVU"),nt=n("8bBs"),at=n("9D+4"),rt=n("aW/o"),it=n("clTI"),ot=n("BicV"),st=n("s19S"),lt=n("/Qam"),ct=(i.b.string,i.b.string,i.b.string,i.b.bool,i.b.bool,{name:void 0,secondary:void 0,userId:void 0,inDnd:!1,inDndBySnooze:!1}),ut=function(e){var t=e.name,n=e.secondary,a=e.userId,i=e.inDnd,o=e.inDndBySnooze,s=n?r.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},n):null,c=l()("p-global_nav__top_menu_header","p-global_nav__top_menu_header--full","p-global_nav__top_menu_header--user",{"p-global_nav__top_menu_snooze_background":i&&o,"p-global_nav__top_menu_schedule_background":i&&!o});return r.a.createElement("div",{className:c},r.a.createElement(Ze.b,{userId:a,size:36,isInteractive:!1,className:"p-global_nav__top_menu_header_icon",tabIndex:"-1"}),r.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},r.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},t),s))};ut.displayName="UserHeader",ut.defaultProps=ct;var dt=Object(o.b)(function(e){var t=Object(ve.b)(e),n=Object(ot.f)(e).snoozeEnabled;return{name:Object(Le.P)(e,t),secondary:Object(Le.G)(e,t),userId:t.id,inDnd:!!Object(ot.d)(e,t.id),inDndBySnooze:n}})(ut),pt=n("mqzt"),ht=(n("1iAE"),new d.b("do_not_disturb")),mt=(i.b.bool.isRequired,i.b.number,i.b.number,i.b.bool,{snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:!1}),bt=function(e){function t(){return _()(this,t),k()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j()(t,e),v()(t,[{key:"render",value:function(){var e=this.props,t=e.inDndBySnooze,n=e.snoozeEndTs,a=e.dndEndTs,i=e.do24hrTime,o=l()("p-dnd_header",{"p-dnd_header__snooze_background":t,"p-dnd_header__schedule_background":!t}),s=t?n:a,c=Object(pt.b)(s,{do24hrTime:i});return r.a.createElement("div",{className:o},r.a.createElement("div",{className:"p-dnd_header__status"},r.a.createElement("div",null,r.a.createElement("strong",null,ht.t("Do Not Disturb: ON",{fallbackHash:"e9f808845f44c3345ade56f562f58e9da896e00e"}))),r.a.createElement("div",{className:"p-dnd_header__sub_text"},c)))}}]),t}(a.PureComponent);bt.displayName="DndHeader",bt.defaultProps=mt;var ft=Object(o.b)(function(e){var t=Object(c.b)(e),n=Object(ot.e)(e,t).nextDndEndTs,a=Object(ot.f)(e);return{inDndBySnooze:a.snoozeEnabled,snoozeEndTs:a.snoozeEndTs,dndEndTs:n,do24hrTime:Object(u.h)(e,"time24")}})(bt);function _t(e){var t=Object(c.i)(e,"feature_tinyspeck");return{help:Object(c.d)(e,"help_url"),version:t||p.k}}var gt=new d.b("global_nav"),vt=(i.b.object,i.b.object,i.b.string,i.b.func,i.b.func,i.b.object,i.b.bool,i.b.bool,i.b.func,i.b.func,i.b.bool,i.b.func,i.b.func,i.b.func,{actions:void 0,currentMember:void 0,currentPresence:void 0,onTriggerClose:E.a,openCustomStatusDialog:E.a,currentChannel:void 0,inDnd:!1,inDndBySnooze:!1,endDndSnooze:E.a,endDndSchedule:E.a,featureGlobalNav:!1,toggleUserPresence:E.a,updateCurrentMemberProfile:E.a,openPrefsModal:E.a}),yt=function(e){function t(e){_()(this,t);var n=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderDndMenu=n.renderDndMenu.bind(n),n.renderPresenceLabel=n.renderPresenceLabel.bind(n),n}return j()(t,e),v()(t,[{key:"renderDndMenu",value:function(e){var t=this.props.currentChannel;return r.a.createElement(lt.a,{currentChannel:t,menuProps:e,useGlobalNav:!0})}},{key:"renderPresenceLabel",value:function(){var e=this.props,t=e.currentPresence;if(!e.featureGlobalNav)return null;switch(t){case"active":return gt.rt("Set yourself to <strong>away</strong>",null,function(e){var t=e.text,n=e.key;return r.a.createElement("strong",{key:n},t)});case"away":return gt.rt("<status>Away</status> Set yourself to <strong>active</strong>",null,function(e){var t=e.tag,n=e.text,a=e.key;switch(t){case"status":return r.a.createElement("strong",{className:"half_opacity",key:a},n);case"strong":return r.a.createElement("strong",{key:a},n);default:return null}});default:return null}}},{key:"render",value:function(){var e=this,t=this.props,n=(t.actions,t.currentMember),a=t.inDnd,i=t.inDndBySnooze,o=t.featureGlobalNav,s=ae()(t,["actions","currentMember","inDnd","inDndBySnooze","featureGlobalNav"]);if(!o)return null;var c=[{type:"custom",children:r.a.createElement(dt,{key:"user-header"})},{type:"custom",children:r.a.createElement(ft,{key:"dnd-header"}),hide:!a},{type:"submenu",label:gt.rt("Turn on <strong>Do Not Disturb</strong>"),renderSubmenu:this.renderDndMenu,hide:a},{label:gt.t("Resume notifications now"),key:"turn-off-dnd",hide:!a,click:i?this.props.endDndSnooze:this.props.endDndSchedule},{type:"submenu",label:gt.t("Adjust time"),renderSubmenu:this.renderDndMenu,hide:!a||a&&!i},{label:gt.t("Adjust schedule\u2026",{fallbackHash:"ce0d0efeb198eef758ed1a5393ca0a0f33012be6"}),key:"adjust-dnd-schedule",hide:!a||a&&i,click:function(){return e.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"})}},{type:"separator",key:"dnd-separator",hide:!a},{label:gt.t("Clear status"),hide:!Object(Le.T)(n),click:function(){e.props.updateCurrentMemberProfile({profile:{status_text:"",status_emoji:"",status_text_canonical:"",status_expiration:0}})}},{label:Object(Le.T)(n)?gt.t("Edit status"):gt.t("Set a status"),shortcut:Object(p.p)()?"\u2318\u21e7Y":"Ctrl+Shift+Y",click:this.props.openCustomStatusDialog},{label:this.renderPresenceLabel(),key:"set-active-away",click:this.props.toggleUserPresence},{type:"separator",key:"header-separator"},{label:gt.t("Profile & account"),click:function(){return Object(st.i)(n.id)}},{label:gt.rt("Notification preferences"),key:"notification-preferences",click:function(){return e.props.openPrefsModal({activeSection:"notifications"})}},{type:"custom",children:r.a.createElement("div",{className:"p-global_nav__top_menu_cap",key:"user-menu-bottom-cap"})}].filter(function(e){return!e.hide}),u=l()({"p-global_nav__top_user_menu":!0,"p-global_nav__top_user_menu--dnd":a});return r.a.createElement(S.a,b()({},s,{template:c,menuClassNames:u,noMargin:!0}))}}]),t}(a.Component);yt.displayName="UserMenu",yt.defaultProps=vt;var kt={openCustomStatusDialog:Xe.a,toggleUserPresence:at.h,updateCurrentMemberProfile:nt.a,endDndSnooze:tt.b,endDndSchedule:tt.a,openPrefsModal:le.a},Ot=Object(o.b)(function(e){var t=Object(ve.b)(e),n=Object(rt.a)(e),a=Object(ot.f)(e).snoozeEnabled;return{actions:_t(e),currentMember:t,currentPresence:Object(at.e)(e),currentChannel:Object(it.d)(e,n,!1)||void 0,inDnd:!!Object(ot.d)(e,t.id),inDndBySnooze:a,featureGlobalNav:Object(c.i)(e,"feature_global_nav")}},kt)(yt),jt=new d.b("global_nav"),Ct=(i.b.string,i.b.bool,i.b.func,i.b.bool,i.b.object.isRequired,{userId:void 0,hasCustomStatus:!1,openCustomStatusDialog:E.a,featureGlobalNav:!1}),Et=function(e){function t(e){_()(this,t);var n=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onUserClick=n.onUserClick.bind(n),n.onStatusClick=n.onStatusClick.bind(n),n.renderMenu=n.renderMenu.bind(n),n}return j()(t,e),v()(t,[{key:"onUserClick",value:function(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_USER_MENU"}}})}},{key:"onStatusClick",value:function(){this.props.openCustomStatusDialog(),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CUSTOM_STATUS"}}})}},{key:"renderMenu",value:function(e){return r.a.createElement(Ot,e)}},{key:"render",value:function(){var e=this.props,t=e.userId,n=e.hasCustomStatus,a=e.featureGlobalNav;if(!t||!a)return null;var i=n&&r.a.createElement(L.c,{onClick:this.onStatusClick,className:"p-global_nav__top_user_status_button","aria-label":jt.t("Edit status")},r.a.createElement($e.b,{memberId:t,tipPosition:"bottom-right",className:"p-global_nav__top_user_status"}),r.a.createElement(w.b,{type:"pencil",className:"p-global_nav__top_user_status_edit"}));return r.a.createElement("div",{className:"p-global_nav__top_user"},i,r.a.createElement(S.e,{renderMenu:this.renderMenu,position:"bottom-right",offsetX:4,offsetY:10,allowanceX:12,onClick:this.onUserClick},r.a.createElement(L.c,{"aria-label":jt.t("User menu")},r.a.createElement(Ze.b,{userId:t,size:32,showBadge:!1,isInteractive:!1,className:l()({"p-global_nav__top_user_avatar":!0,"p-global_nav__top_user_avatar--beside-status":n}),tabIndex:"-1"}),r.a.createElement(et.a,{memberId:t,className:"p-global_nav__top_user_presence",inline:!1}))))}}]),t}(a.Component);Et.displayName="User",Et.defaultProps=Ct;var wt={openCustomStatusDialog:Xe.a},St=Object(o.b)(function(e){return{userId:Object(c.b)(e),hasCustomStatus:Object(Le.T)(Object(ve.b)(e)),featureGlobalNav:Object(c.i)(e,"feature_global_nav"),clogger:Object(A.a)({state:e})}},wt)(Et),It=n("yU6Y"),Tt=n.n(It),Nt=n("OC5O"),Rt=n("F6LU"),At=n("qkTT"),Pt=n("pRVB"),Mt=n("HvGc"),Dt=n("KDee"),xt=(i.b.string.isRequired,i.b.string.isRequired,i.b.node.isRequired,i.b.string.isRequired,i.b.bool,i.b.node,i.b.string,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.object.isRequired,{active:!1,children:void 0,className:void 0}),Lt=function(e){function t(e){_()(this,t);var n=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return j()(t,e),v()(t,[{key:"onClick",value:function(){var e=this.props,t=e.pane,n=e.active,a=e.clogger;"team"===t?Object(st.m)():"starred_items"===t&&Object(h.a)()?n?this.props.closeFlexpane():this.props.showStarredItemsList():"activity"===t?this.props.toggleActivityFlexpane():Object(Dt.d)(t),"mentions"===t?a.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_ACTIVITY"}}}):"stars"===t&&a.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_STARS"}}})}},{key:"render",value:function(){var e=this.props,t=e.icon,n=e.tooltip,a=e.pane,i=e.active,o=e.children,s=e["aria-label"],c=l()("p-global_nav__top_button","p-global_nav__top_flex","p-global_nav__top_flex--"+a,i&&"p-global_nav__top_flex--active",this.props.className);return r.a.createElement(F.c,{tip:n,delay:F.a,position:"bottom",offsetY:Sn},r.a.createElement(L.c,{className:c,onClick:this.onClick,"aria-label":s},r.a.createElement(w.b,{type:t,className:"p-global_nav__top_button_icon"}),o))}}]),t}(a.PureComponent);Lt.displayName="FlexButton",Lt.defaultProps=xt;var Ft=Object(o.b)(function(e,t){var n=t.pane;return{active:Object(Pt.h)(e)===n,clogger:Object(A.a)({state:e})}},function(e){return{toggleActivityFlexpane:function(){return e(Object(Mt.q)())},showStarredItemsList:function(){return e(Object(Mt.k)())},closeFlexpane:function(){return e(Object(Mt.a)())}}})(Lt),Bt=new d.b("global_nav"),qt=(i.b.shape({emoji:i.b.string,memberName:i.b.string,channelName:i.b.string}),i.b.bool,i.b.bool,{reactionToast:void 0,noAnimation:!1,featureGlobalNav:!1}),Ut=function(e){var t=e.reactionToast,n=e.noAnimation;if(!e.featureGlobalNav)return null;var i=t&&r.a.createElement(At.b,{text:":"+t.emoji+":",emojiSize:At.a.LARGE,className:"p-global_nav__top_activity_toast"}),o=!(Tt.a.chrome&&!re.V)&&r.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(p.p)()?"\u2318\u21e7M":"Ctrl+Shift+M"),s=t?r.a.createElement(a.Fragment,null,Object(Rt.a)(t.memberName),r.a.createElement("br",null),r.a.createElement("span",{className:"sk_light_gray"},Object(Rt.a)(t.channelName))):r.a.createElement(a.Fragment,null,Bt.t("Activity"),o),c=l()({"p-global_nav__top_activity":!0,"p-global_nav__top_activity--no-animation":n,"p-global_nav__top_activity--toasting":t});return r.a.createElement("div",{className:c},r.a.createElement(Ft,{icon:"mentions",pane:"activity",tooltip:s,"aria-label":Bt.t("Activity")}),i)};Ut.displayName="ActivityButton",Ut.defaultProps=qt;var Ht=Object(o.b)(function(e){return{reactionToast:Object(Nt.d)(e),noAnimation:!Object(u.h)(e,"a11y_animations"),featureGlobalNav:Object(c.i)(e,"feature_global_nav")}})(Ut),Gt=new d.b("global_nav"),Wt=(i.b.bool,i.b.bool,i.b.bool,i.b.string,i.b.func,i.b.func,i.b.func,i.b.func,i.b.func,i.b.func,i.b.bool,i.b.bool,i.b.bool,i.b.func,i.b.object.isRequired,{isUserRestricted:!1,isPaid:!1,isEnterprise:!1,userId:void 0,showFileList:E.a,showDownloads:E.a,showKeyboardShortcuts:E.a,showWhatsNew:E.a,showUserGroupList:E.a,showUserCalendar:E.a,featureCalendarSimpleAgendaView:!1,featureGlobalNav:!1,featureSonicUserGroups:!1,openHelpModal:E.a}),Kt=function(e){function t(e){_()(this,t);var n=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onTriggerClick=n.onTriggerClick.bind(n),n.clogItem=n.clogItem.bind(n),n.renderMenu=n.renderMenu.bind(n),n}return j()(t,e),v()(t,[{key:"onTriggerClick",value:function(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU"}}})}},{key:"clogItem",value:function(e){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU_ITEM"}},flex_name:e})}},{key:"renderMenu",value:function(e){var t=this,n=this.props,a=n.featureGlobalNav,i=n.featureSonicUserGroups,o=n.isUserRestricted,s=n.isPaid,l=n.isEnterprise,c=n.userId;if(!a)return null;var u=[{label:Gt.t("Your events"),icon:r.a.createElement(w.b,{type:"all-files-alt"}),click:function(){t.props.showUserCalendar(),t.clogItem("calendar")},hide:!this.props.featureCalendarSimpleAgendaView},{label:Gt.t("Files"),icon:r.a.createElement(w.b,{type:"all-files-alt"}),click:function(){t.props.showFileList({user:c}),t.clogItem("files_user")}},{label:Gt.t("Downloads"),icon:r.a.createElement(w.b,{type:"cloud-download"}),click:function(){t.props.showDownloads({user:c}),t.clogItem("downloads")},hide:!(window.desktop&&window.desktop.downloads)},{type:"separator"},{label:l?Gt.t("Organization Directory"):Gt.t("Workspace Directory"),icon:r.a.createElement(w.b,{type:"team-directory"}),shortcut:!Tt.a.firefox&&(Object(p.p)()?"\u2318\u21e7E":"Ctrl+Shift+E"),click:function(){Object(st.m)(),t.clogItem("team")}},{label:Gt.t("User Groups"),icon:r.a.createElement(w.b,{type:"user-groups"}),click:function(){i?t.props.showUserGroupList():Object(st.l)(),t.clogItem("groups")},hide:o||!s},{type:"separator"},{label:Gt.t("What\u2019s New"),icon:r.a.createElement(w.b,{type:"emoji-celebration"}),click:function(){t.props.showWhatsNew(),t.clogItem("whats_new")}},{label:Gt.t("Keyboard Shortcuts"),icon:r.a.createElement(w.b,{type:"keyboard"}),shortcut:Object(p.p)()?"\u2318/":"Ctrl+/",click:function(){t.props.showKeyboardShortcuts(),t.clogItem("shortcuts")}},{label:Gt.t("Help"),icon:r.a.createElement(w.b,{type:"question-circle"}),click:function(){t.props.openHelpModal({trigger:"flex_menu"}),t.clogItem("help")}}].filter(function(e){return!e.hide});return r.a.createElement(S.a,b()({},e,{menuClassNames:"p-global_nav__top_flexpanes_menu",template:u,stripTerminalSeparators:!0,width:Object(p.p)()?void 0:360}))}},{key:"render",value:function(){return this.props.featureGlobalNav?r.a.createElement(S.e,{position:"bottom-right",renderMenu:this.renderMenu,offsetY:In,onClick:this.onTriggerClick},r.a.createElement(F.c,{tip:Gt.t("More options"),position:"bottom",delay:F.a,offsetY:Sn},r.a.createElement(L.c,{className:"p-global_nav__top_button p-global_nav__top_button--flexpanes","aria-label":Gt.t("More options")},r.a.createElement(w.b,{type:"vertical-ellipsis",className:"p-global_nav__top_button_icon"})))):null}}]),t}(a.PureComponent);Kt.displayName="FlexpanesMenu",Kt.defaultProps=Wt;var Vt={showFileList:Mt.g,showKeyboardShortcuts:function(){return Mt.h.apply(void 0,arguments)},showDownloads:Mt.f,showWhatsNew:Mt.p,showUserGroupList:Mt.o,showUserCalendar:Mt.m,openHelpModal:pe.a},zt=Object(o.b)(function(e){return{isUserRestricted:Object(Le.xb)(Object(ve.b)(e)),isPaid:Object(ee.B)(Object($.d)(e)),isEnterprise:Object(c.l)(e),userId:Object(c.b)(e),featureCalendarSimpleAgendaView:Object(c.i)(e,"feature_calendar_simple_agenda_view"),featureGlobalNav:Object(c.i)(e,"feature_global_nav"),featureSonicUserGroups:Object(c.i)(e,"feature_sonic_user_groups"),clogger:Object(A.a)({state:e})}},Vt)(Kt),Yt=n("Gxzu"),Qt=n("7ARk"),Jt=n("m5Fn"),Xt=n("UXvI"),Zt=n("tn36"),$t=n("cMxN"),en=n("Rmtr"),tn=n("9/ob"),nn=n("HXD8"),an=n("F8qq"),rn=n("Zr7G"),on=n("YDA8"),sn=n("Rjjz"),ln=n("NPpR"),cn=(i.b.bool.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.string,i.b.object,{displayQuery:"",telemeter:rn.d}),un=function(e){function t(e){_()(this,t);var n=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Zt.a)(n,["onClick","onSearchInputBoxFocus","onSearchInputBoxEscape","onSearchAutocompleteSuggestionAccept"]),n.precacheSearch=Object(Xt.a)(n.precacheSearch.bind(n),6e4),n}return j()(t,e),v()(t,[{key:"onClick",value:function(){this.props.autocompleteIsOpen||this.props.openSearchAutocomplete()}},{key:"onSearchInputBoxFocus",value:function(){this.props.openSearchAutocomplete(),this.precacheSearch()}},{key:"onSearchInputBoxEscape",value:function(){this.props.closeSearchAutocomplete()}},{key:"onSearchAutocompleteSuggestionAccept",value:function(){Object(nn.e)(this.props.telemeter),this.props.searchAutocompleteSuggestionAccept()}},{key:"precacheSearch",value:function(){this.props.searchPrecache()}},{key:"render",value:function(){var e=l()({"p-global_nav__top_search":!0,"p-global_nav__top_search--browser":!re.V,"p-global_nav__top_search--primarysearch":!0,"p-global_nav__top_search--primarysearch_open":this.props.autocompleteIsOpen});return r.a.createElement(tn.a,{enabled:["feature_primary_search"]},r.a.createElement(L.c,{className:e,onClick:this.onClick},r.a.createElement(ln.a,{autoFocus:!1,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus})))}}]),t}(a.PureComponent);un.displayName="AutocompleteInputInPrimarySearch",un.defaultProps=cn;var dn={searchPrecache:sn.o,openSearchAutocomplete:en.f,closeSearchAutocomplete:en.a,searchAutocompleteSuggestionAccept:an.a},pn=Object(o.b)(function(e){return{autocompleteIsOpen:Object(en.e)(e),displayQuery:Object(Yt.b)(e),telemeter:Object(rn.c)({state:e})}},dn)(un),hn=(i.b.bool.isRequired,i.b.string.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.object,{telemeter:rn.d}),mn=function(e){function t(e){_()(this,t);var n=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Zt.a)(n,["handleClick","onSearchAutocompleteSuggestionAccept","handleAutocompleteRef"]),n.calculatePopoverConstraints=Object(Xt.a)(n.calculatePopoverConstraints.bind(n),1e3),n.searchHeaderBackdrop=Object(a.createRef)(),n.state={hasCalculatedConstraints:!1,overlayStyle:{marginTop:0},contentStyle:{top:0,left:0,width:200}},n.autocompleteInputRef=null,n}return j()(t,e),v()(t,[{key:"onSearchAutocompleteSuggestionAccept",value:function(){Object(nn.e)(this.props.telemeter),this.props.searchAutocompleteSuggestionAccept()}},{key:"calculatePopoverConstraints",value:function(){if(this.autocompleteInputRef){var e=Object(ke.findDOMNode)(this.autocompleteInputRef),t=e.getBoundingClientRect(),n=e.parentElement.getBoundingClientRect();this.setState(function(){return{hasCalculatedConstraints:!0,overlayStyle:{marginTop:n.bottom},contentStyle:{top:0,left:t.left-10,width:t.width+20}}})}}},{key:"handleAutocompleteRef",value:function(e){this.autocompleteInputRef=e,e&&this.calculatePopoverConstraints()}},{key:"handleClick",value:function(e){this.searchHeaderBackdrop&&this.searchHeaderBackdrop.current===e.target&&this.props.closeAutocomplete()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.closeAutocomplete,a=t&&this.state.hasCalculatedConstraints;return r.a.createElement(tn.a,{enabled:["feature_primary_search"]},a&&r.a.createElement("div",{className:"c-search_autocomplete__header_backdrop",ref:this.searchHeaderBackdrop,onClick:this.handleClick}),r.a.createElement(pn,{ref:this.handleAutocompleteRef}),r.a.createElement($t.a,{ariaRole:"dialog",ariaLabel:"Search",isOpen:a,position:"bottom-right",onClose:n,shouldFade:!1,overlayClassName:"c-popover c-search_modal c-search_modal--autocomplete c-search_modal--primarysearch",allowanceX:20,allowanceY:0,shouldFocusAfterRender:!1,shouldReturnFocusAfterClose:!1,onResize:this.calculatePopoverConstraints,shouldObserveResize:!0,contentStyle:this.state.contentStyle,overlayStyle:this.state.overlayStyle},t&&r.a.createElement("div",{className:"c-search-autocomplete"},r.a.createElement(on.a,{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept}))))}}]),t}(a.PureComponent);mn.displayName="AutocompleteInPrimarySearch",mn.defaultProps=hn;var bn={closeAutocomplete:en.a,searchAutocompleteSuggestionAccept:an.a},fn=Object(o.b)(function(e){return{userQuery:Object(Yt.d)(e),isOpen:Object(en.e)(e),telemeter:Object(rn.c)({state:e})}},bn)(mn),_n=n("lek6"),gn=n("iH/p"),vn=n("V18M");function yn(e){return"Vsearch"===Object(rt.a)(e)}var kn=new d.b("search"),On=(i.b.string,i.b.func,i.b.string,i.b.string,i.b.object.isRequired,i.b.func,i.b.func.isRequired,i.b.bool.isRequired,i.b.bool.isRequired,{displayQuery:void 0,orgName:void 0,teamName:void 0,openFromClick:E.a,clearSearchInputField:E.a}),jn=function(e){function t(e){_()(this,t);var n=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.onClearClick=n.onClearClick.bind(n),n}return j()(t,e),v()(t,[{key:"onClick",value:function(){this.props.isPrimarySearchFeatureEnabled?this.props.openSearchAutocomplete():this.props.openFromClick(),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_SEARCH"}}})}},{key:"onClearClick",value:function(e){e.stopPropagation(),this.props.clearSearchInputField()}},{key:"render",value:function(){var e=this.props,t=e.displayQuery,n=e.orgName,i=e.teamName,o=e.isPrimarySearchFeatureEnabled,s=e.showSearchAsActive,c=t?r.a.createElement(a.Fragment,null,r.a.createElement(_n.a,{text:t,className:"p-global_nav__top_search_text",customLineEnding:" ",showTooltips:!1,noLinking:!0,noSpecials:!0,noHighlights:!0}),r.a.createElement(L.c,{className:"p-global_nav__top_search_clear",onClick:this.onClearClick,label:kn.t("Clear")},r.a.createElement(w.b,{type:"times-small"}))):r.a.createElement("span",{className:"p-global_nav__top_search_text p-global_nav__top_search_text--placeholder"},kn.rt("Search {teamName}",{teamName:n||i||""})),u=l()({"p-global_nav__top_search":!0,"p-global_nav__top_search--no_history":!Object(x.c)()}),d=!o||!s;return r.a.createElement(a.Fragment,null,d&&r.a.createElement(L.c,{className:u,onClick:this.onClick},r.a.createElement(w.b,{type:"search-medium",className:"p-global_nav__top_search_icon"}),c),!o&&r.a.createElement(Jt.a,null),!d&&r.a.createElement(fn,null))}}]),t}(a.Component);jn.displayName="SearchPlaceholderInput",jn.defaultProps=On;var Cn={openSearchAutocomplete:en.f,openFromClick:gn.a,clearSearchInputField:Qt.a},En=Object(o.b)(function(e){return{displayQuery:Object(Yt.b)(e),orgName:Object($.e)(e)||"",teamName:Object(ee.e)(Object($.d)(e)),clogger:Object(A.a)({state:e}),isPrimarySearchFeatureEnabled:Object(vn.a)(e),showSearchAsActive:yn(e)||Object(en.e)(e)}},Cn)(jn);n("AByf");n.d(t,"b",function(){return Sn}),n.d(t,"a",function(){return In});var wn=new d.b("global_nav"),Sn=-12,In=-4,Tn=(i.b.string,i.b.func,i.b.bool,{theme:void 0,renderSonicMenu:void 0,featureGlobalNav:!1}),Nn=function(e){var t=e.theme,n=e.renderSonicMenu;if(!e.featureGlobalNav)return null;var i=l()("p-global_nav__top",t&&"p-global_nav__top--theme-"+t);return r.a.createElement("div",{className:i},r.a.createElement(Je,{renderSonicMenu:n}),r.a.createElement(Z,null),r.a.createElement("div",{className:"p-global_nav__top_spacer"}),r.a.createElement(En,null),r.a.createElement("div",{className:"p-global_nav__top_spacer--fill"}),r.a.createElement(Ht,null),r.a.createElement(Ft,{icon:"star-o",pane:Object(h.a)()?"starred_items":"stars",tooltip:r.a.createElement(a.Fragment,null,wn.t("Starred items"),r.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(p.p)()?"\u2318\u21e7S":"Ctrl+Shift+S")),"aria-label":wn.t("Starred items")}),r.a.createElement(zt,null),r.a.createElement("div",{className:"p-global_nav__top_spacer"}),r.a.createElement(St,null))};Nn.displayName="TopNav",Nn.defaultProps=Tn;t.c=Object(o.b)(function(e){return{theme:Object(u.h)(e,"sidebar_theme"),featureGlobalNav:Object(c.i)(e,"feature_global_nav")}})(Nn)},IhRS:function(e,t,n){"use strict";var a=n("3Hq1"),r=n("UXvI"),i=n("oTSI"),o=n("uf9I"),s=n("XfeM"),l=Object(i.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatchThunk,n=e.throttleRate;return Object(r.a)(t,n)},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.description,n=e.teamId,a=e.throttleRate;return JSON.stringify({description:t,teamId:n,throttleRate:a})});t.a=function(e,t){if(!e||!e.getType||!e.getType())throw new Error("createThrottledThunk must be passed a valid thunk");if(Object(a.a)(t))throw new Error("createThrottledThunk must be passed a throttleRate");var n='Throttled version of thunk "'+e.getType()+'"',r=Object(s.b)(n,function(a,r,i){var s=Object(o.b)(r());return l({dispatchThunk:function(){return a(e.apply(void 0,arguments))},throttleRate:t,description:n,teamId:s})(i)});return r.propTypes=e.propTypes,r}},IqgZ:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),h=n("XHGt"),m=n("HO/Y"),b=n("aK/h"),f=n("yHhI"),_=(b.b.object.isRequired,b.b.node,b.b.bool,b.b.object.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={error:!1},n}return u()(t,e),o()(t,[{key:"componentDidCatch",value:function(e,t){this.setState(function(){return{error:!0}});var n=e?e.message:"",a=e?e.stack:"",r=this.props.msg,i=r.ts,o=r.channel,s=r.subtype;this.props.logger.error("Message Kit componentDidCatch: "+s+" "+i+" in "+o+", "+n),a&&this.props.logger.error(a),t&&t.componentStack&&this.props.logger.error(t.componentStack)}},{key:"render",value:function(){if(!this.state.error)return this.props.children;if(!this.props.featureTinyspeck)return null;var e=this.props.msg,t=e.ts,n=e.channel;return p.a.createElement("div",{className:"sk_warning_red_bg sk_white padding_100 padding_bottom_25"},p.a.createElement("p",null,p.a.createElement("strong",null,"Message ",t," in ",n," failed to render."," ")),p.a.createElement("p",null,"Please go to #escal-messages and,"," ",p.a.createElement("strong",null,"if it has not been reported yet"),", post a report including a screenshot and a link to the previous message if this is a public channel."),p.a.createElement("p",null,"This message is only displayed to workspaces in the Slack org."))}}]),t}(d.Component));_.displayName="MessageErrorBoundary",_.defaultProps={children:null,featureTinyspeck:!1};t.a=Object(h.b)(function(e){return{featureTinyspeck:Object(m.i)(e,"feature_tinyspeck"),logger:Object(f.a)({state:e})}})(_)},J19L:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),h=n.n(p),m=n("aK/h"),b=n("XHGt"),f=n("6kok"),_=n("nNoG"),g=n("clTI"),v=n("/9ln"),y=n("U3Q0"),k=n("H3xq"),O=new _.b("msg_edit"),j=(m.b.string.isRequired,m.b.string.isRequired,m.b.string,m.b.func,{channelType:void 0,removeMessage:d.a}),C=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onGo=e.onGo.bind(e),e}return u()(t,e),o()(t,[{key:"onGo",value:function(){var e=this.props,t=e.ts,n=e.channelId;(0,e.removeMessage)({channelId:n,ts:t,broadcastDelete:!0}).catch(d.a)}},{key:"render",value:function(){var e=this.props,t=e.ts,n=e.channelId,a=void 0,r=void 0;return"channel"===e.channelType?(a=O.t("Remove from channel"),r=O.t("Are you sure you want to remove this message from the channel?")):(a=O.t("Remove from conversation"),r=O.t("Are you sure you want to remove this message from the conversation?")),h.a.createElement(y.a,{title:a,goButtonText:O.t("Remove message"),onGo:this.onGo},h.a.createElement("div",{className:"margin_bottom_100"},r,O.t("The original reply will still be visible in its thread.")),h.a.createElement(k.a,{ts:t,channelId:n,isStandalone:!0}))}}]),t}(p.PureComponent);C.displayName="BaseRemoveBroadcastDialog",C.defaultProps=j;var E={removeMessage:v.a},w=Object(b.b)(function(e,t){var n=t.channelId,a=Object(g.d)(e,n);return{channelType:Object(f.v)(a)}},E)(C);w.propTypes={channelId:m.b.string.isRequired},t.a=w},JHKc:function(e,t,n){},JLdd:function(e,t,n){e.exports=n.p+"complete_quest_requirement-1f77685.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},JfyJ:function(e,t,n){},JlHJ:function(e,t,n){},Jm6a:function(e,t,n){},JvzI:function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return g}),n.d(t,"d",function(){return v}),n.d(t,"c",function(){return k});n("YEIV"),n("QbLZ");var a=n("9oTK"),r=(n("xnu4"),n("nNoG")),i=n("QLyv"),o=n("4qCO"),s=n("TVjB"),l=(n("lhZz"),n("HO/Y"),n("XKj7")),c=n("x4bP"),u=n("XoJV"),d=n("GNdI"),p=n("yHhI"),h=n("DlLn"),m=n("IbTH"),b=n("Gogr");function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.recalc,n=void 0!==t&&t,a=e.teamId,i=void 0===a?Object(d.a)():a;return Object(r.p)({recalc:n,teamId:i})}var _={};function g(e){var t=e.teamId,n=e.fn;_[t]?Object(p.a)({teamId:t,label:"INFRA-I18N"}).error("Attempted to registerLocaleCallback for a registered team",t):_[t]=n}function v(e){var t=e.teamId;_[t]?delete _[t]:Object(p.a)({teamId:t,label:"INFRA-I18N"}).error("Attempted to unregisterLocaleCallback for an unregistered team",t)}var y,k=(y=Object(a.coroutine)(regeneratorRuntime.mark(function e(t,n){var p,f,g=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).shouldEnsureTranslationBundle,v=void 0===g||g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(c.a)()){e.next=2;break}return e.abrupt("return",Object(l.e)({name:"locale",value:t}));case 2:if(Object(b.d)(n,"user_locale")!==t&&Object(b.i)(n,"user_locale",t),Object(d.a)()===n){e.next=5;break}return e.abrupt("return",t);case 5:if(p=Object(r.i)(),Object.keys(p).includes(t)){e.next=8;break}return e.abrupt("return",Object(h.c)());case 8:if(!0!==v){e.next=11;break}return e.next=11,Object(a.resolve)(Object(m.a)(t));case 11:return f="es-LA"===t?"es-419":t,document.documentElement.lang=f,Object(i.b)(t),Object(o.c)(t),Object(r.p)({recalc:!0,teamId:n}),Object(u.i)(t)||Object(s.a)(),_[n]&&_[n]({locale:t}),e.abrupt("return",t);case 19:case"end":return e.stop()}},e,this)})),function(e,t,n){return y.apply(this,arguments)})},KGMq:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("aK/h"),o=n("XfeM"),s=n("HO/Y"),l=n("DTT0"),c=n("jo6Y"),u=n.n(c),d=n("YEIV"),p=n.n(d),h=n("QbLZ"),m=n.n(h),b=n("m1cH"),f=n.n(b),_=n("iCc5"),g=n.n(_),v=n("FYw3"),y=n.n(v),k=n("V7oC"),O=n.n(k),j=n("mRg0"),C=n.n(j),E=n("HI9p"),w=n("CpTu"),S=n("7EGn"),I=n("NOj5"),T=n("1myf"),N=n("F3Uw"),R=n("Z0Cl"),A=n("fujP"),P=n("ifKl"),M=n("Qaea"),D=n("TSYQ"),x=n.n(D),L=n("XHGt"),F=n("tn36"),B=n("uQWY"),q=n("vRZS"),U=n("D4L/"),H=n("DtX9"),G=n("Fdc0"),W=n("7WZX"),K=n("yHhI"),V=n("VjHM"),z=n("Ia0u"),Y=n("AfrZ"),Q=n("nNoG"),J=n("kOzZ"),X=n("0nhw"),Z=n("CPJ1"),$=n("Smdl"),ee=n("KXvl"),te=n("UF3u"),ne=n("od5y"),ae=n("qafc"),re=n("c4EP"),ie=n("0f2Y"),oe=n("cD5Y"),se=n("vSXf"),le=n("3dqR"),ce=n("derf"),ue=n("6GV3"),de=n("xoiQ"),pe=(n("y5qN"),i.b.oneOf(["member","org","workspace","app"]),i.b.number.isRequired,i.b.object.isRequired,i.b.func,i.b.string,i.b.bool.isRequired,i.b.bool.isRequired,{entityType:"member",onClick:P.a,customClasses:null}),he=function(e){function t(){return g()(this,t),y()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C()(t,e),O()(t,[{key:"getImageKeyFromDimension",value:function(e,t){return"image_"+Object(ue.a)(e,{member:[512,192,72,48,32,24],app:[1024,512,192,128,96,72,64,48,36,32],workspace:[230,132,102,88,68,44,34],org:[230,132,102,88,68,44,34]}[t])}},{key:"mapRawMemberDataToProps",value:function(e){var t=e.rawMemberData,n=e.iconDimension,a=e.customClasses,r=e.clickHandler,i=Object(de.a)({size:n,teamId:Object(S.a)(t,"enterprise_id"),memberId:Object(S.a)(t,"id"),avatarHash:Object(S.a)(t,"profile.avatar_hash")});return{imageUrl:i.imageUrl,imageUrl2x:i.imageUrl2x,isExternal:t.is_external,isRestricted:t.is_restricted,isUltraRestricted:t.is_ultra_restricted,size:n,className:a,onClick:r}}},{key:"mapRawWorkspaceOrOrgDataToProps",value:function(e){var t=e.rawWorkspaceOrOrgData,n=e.iconDimension,a=e.customClasses;return{size:n,icon:t.icon,showToolTip:!1,teamName:t.name,className:a}}},{key:"render",value:function(){var e=this.props,t=e.entityType,n=e.entityData,a=e.customClasses,i=e.dimension,o=e.onClick,s=e.featureReactMessages,l=e.featureReactMemberProfileCard,c=x()(a,"p-ent_entity_icon");switch(t){case"member":var u={rawMemberData:n,iconDimension:i,customClasses:c,clickHandler:o},d=this.mapRawMemberDataToProps(u);return r.a.createElement(le.a,m()({},d,{featureReactMessages:s,featureReactMemberProfileCard:l}));case"org":case"workspace":var p={rawWorkspaceOrOrgData:n,iconDimension:i,customClasses:c},h=this.mapRawWorkspaceOrOrgDataToProps(p);return r.a.createElement(ce.a,h);default:return r.a.createElement(ce.a,{teamName:"?",size:i})}}}]),t}(a.PureComponent);he.displayName="EntityIcon",he.defaultProps=pe;var me=Object(se.a)("feature_react_messages","feature_react_member_profile_card")(he),be=n("aolG"),fe=n("sk9p"),_e=n.n(fe),ge=n("Vfgr"),ve=n("bo4X"),ye=n("NB3s"),ke=n("WD4z"),Oe=n("O0RF"),je=n("plEq"),Ce=n("P3Po"),Ee=new Q.b("enterprise_workspaces"),we=(i.b.func,i.b.func,{closeModal:P.a,requestCreateWorkspaceApi:P.a}),Se=255,Ie=512,Te={required:"required",nameTaken:"nameTaken",maxLength:"maxLength"};function Ne(e){var t=e.closeModal,n=e.requestCreateWorkspaceApi,i=Object(a.useState)(),o=_e()(i,2),s=o[0],l=o[1],c=Object(a.useState)(),u=_e()(c,2),d=u[0],p=u[1],h=Object(a.useState)(!1),m=_e()(h,2),b=m[0],f=m[1],_=Object(a.useState)(!1),g=_e()(_,2),v=g[0],y=g[1],k=Object(a.useState)(Te.required),O=_e()(k,2),j=O[0],C=O[1],E=Object(a.useState)(Te.required),w=_e()(E,2),S=w[0],I=w[1];function T(e,t){var n=t.maxLength,a=Object(ge.a)(e);return a?n&&a.length>n?Te.maxLength:void 0:Te.required}return r.a.createElement(ve.a,{labelledby:"request_workspace__title-bar",centered:!0,closeModal:t},r.a.createElement(ye.h,null,r.a.createElement(ye.j,{id:"request_workspace__title-bar",title:Ee.t("Request creation of a new workspace")})),r.a.createElement(ye.d,null,r.a.createElement(ye.e,null,v&&r.a.createElement(ke.a,{level:"error",className:"margin_bottom_100"},Ee.t("Sorry! Something went wrong. Please try again.",{fallbackHash:"48faa2ac6ac6d273cd7dacbe15a5b6f7e1822087",fallbackHashNs:"edit_profile"})),r.a.createElement("p",null,Ee.t("To create a new workspace, you\u2019ll need to send a request to an organization administrator. Before sending this request, be sure to check the Find Workspaces list to see whether a similar workspace already exists.")),r.a.createElement(Oe.a,{htmlFor:"p-request-workspace__name_input",id:"p-request-workspace__name_label",text:Ee.t("Workspace Name")},r.a.createElement(je.a,{ariaDescribedby:"p-request-workspace__name_label",id:"p-request-workspace__name_input",name:"workspace_name",size:"large",useInlineAlert:!0,onChange:function(e){y(!1),l(e);var t=T(e,{maxLength:Se});C(t)},errorText:j===Te.nameTaken?Ee.t("That workspace name is already taken.",{fallbackHash:"26cf402314e8bf926ba97077c467adcadb1c715e",fallbackHashNs:"enterprise_dashboard"}):void 0,value:s,isRequired:!0,minCharacterLimit:1,maxCharacterLimit:Se})),r.a.createElement(Oe.a,{htmlFor:"p-request-workspace__message_input",id:"p-request-workspace__message_label",text:Ee.t("Message to administrators")},r.a.createElement(Ce.a,{ariaDescribedby:"p-request-workspace__message_label",id:"p-request-workspace__message_input",name:"workspace_message",size:"large",useInlineAlert:!0,onChange:function(e){y(!1),p(e);var t=T(e,{maxLength:Ie});I(t)},value:d,isRequired:!0,minCharacterLimit:1,maxCharacterLimit:Ie})))),r.a.createElement(ye.f,null,r.a.createElement(ye.g,null,r.a.createElement(ye.c,{"data-qa":"request_workspace_dialog_cancel_button",type:"outline"},Ee.t("Cancel")),r.a.createElement(ye.c,{"data-qa":"request_workspace_dialog_go_button",onClick:function(){y(!1),f(!0),n({workspaceName:s,workspaceMessage:d,reason:"workspace_directory_request_new_workspace"}).then(function(){return t()}).catch(function(e){var t=e.data;f(!1),"name_taken"===t.error?C(Te.nameTaken):y(!0)})},loading:b,disabled:!!(S||j||v)},Ee.t("Send Request")))))}Ne.displayName="RequestWorkspaceDialog",Ne.defaultProps=we;var Re={closeModal:function(){return l.a.apply(void 0,arguments)},requestCreateWorkspaceApi:function(){return X.i.apply(void 0,arguments)}},Ae=Object(L.b)(null,Re)(Ne),Pe=n("yIs4"),Me=n("9/ob"),De=n("YB7p"),xe=n("XLFM"),Le=n("hbEN"),Fe=n("mX9+"),Be=n("TGBA"),qe=n("xWuZ"),Ue=n("zmn3"),He=n("RMmo"),Ge=n("MjS2"),We=n("3Hq1"),Ke=n("HiDb"),Ve=n("YH8F"),ze=n("RbWr"),Ye=n("e4Fz"),Qe=n("sKU9"),Je=(n("MbVY"),{default:"default",short:"short"}),Xe=new Q.b("form"),Ze={autoSelectFirstOption:i.b.bool,className:i.b.string,displayValue:i.b.string,id:i.b.string,isLoading:i.b.bool,labelId:i.b.string,membersOnly:i.b.bool,name:i.b.string,onChange:i.b.func,onClearButtonClick:i.b.func.isRequired,onClose:i.b.func,onFilterInputChange:i.b.func,onOptionHighlighted:i.b.func,onOutsideClick:i.b.func,onOpen:i.b.func,onScroll:i.b.func,optionClassName:i.b.string,optionGroups:i.b.array,options:i.b.array,optionsListOffsetBottom:i.b.number,optionsListOffsetTop:i.b.number,optionsListWidth:i.b.number,optionsRowHeight:i.b.number,pillarClassName:i.b.string,placeholder:i.b.string,selectedOption:i.b.object,selectedValueClassName:i.b.string,type:i.b.oneOf(Object(Be.a)(Je)),useFullWidthOptions:i.b.bool,usePlaceholderOption:i.b.bool,wrapperClassName:i.b.string,value:i.b.string},$e={className:null,displayValue:void 0,id:"select-"+Object(Ye.d)(),isLoading:!1,labelId:null,membersOnly:!0,name:null,onChange:P.a,onClose:P.a,onFilterInputChange:P.a,onOptionHighlighted:P.a,onOutsideClick:P.a,onOpen:P.a,optionClassName:void 0,optionGroups:void 0,options:void 0,optionsListOffsetBottom:0,optionsListOffsetTop:0,optionsListWidth:void 0,pillarClassName:void 0,placeholder:void 0,selectedOption:void 0,selectedValueClassName:void 0,type:Je.default,usePlaceholderOption:!0,wrapperClassName:null,value:""},et=function(e){function t(e){if(g()(this,t),!e.optionGroups&&!e.options)throw new Error('WorkspaceSearchSelect requires an "optionGroups" or "options" prop.');var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.preventFocusAndBlur=!1,n.state={filterQuery:"",isOpen:!1,selectedOptionValue:""},Object(F.a)(n,["getFilteredOptions","getFilteredOptionGroups","onBlurred","onClearInput","onClicked","onFilterInputChanged","onFocused","onKeyPressedEsc","onKeyPressedUpOrDown","onOptionSelected","onOutsideClicked","onWrapperMouseDownOrTouchStart","onWrapperMouseUpOrTouchEnd","setRef"]),n}return C()(t,e),O()(t,[{key:"componentDidMount",value:function(){this.initKeyCommands()}},{key:"componentWillReceiveProps",value:function(){this.setState(function(e){return{isOpen:e.isOpen}})}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.onClose,r=n.onOpen,i=n.selectedOption,o=this.state,s=o.isOpen,l=o.selectedOptionValue;if(i){var c=Object(Ge.h)(i)?Object(G.E)(i):Object(S.a)(i,"name");c!==l&&this.setSelectedOptionValue(c)}else l&&this.setSelectedOptionValue("");this.state.isOpen?(document.addEventListener("click",this.onOutsideClicked),t.isOpen||(this.filterInput&&this.filterInput.focus(),r(this.filterInput))):(document.removeEventListener("click",this.onOutsideClicked),t.isOpen&&a()),this.filterInput&&s&&this.filterInput.focus()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onOutsideClicked),this.resetKeyCommads()}},{key:"onBlurred",value:function(){this.preventFocusAndBlur||this.toggleOpenState(!1)}},{key:"onClicked",value:function(e){e.target===this.filterInput?this.toggleOpenState(!0):this.toggleOpenState()}},{key:"onClearInput",value:function(){var e=this.props.onClearButtonClick;this.filterInput&&(this.filterInput.value=""),this.setFilterQuery(""),this.setSelectedOptionValue(""),this.toggleOpenState(!1),e()}},{key:"onFilterInputChanged",value:function(){if(this.filterInput){var e=this.filterInput.value;this.props.onFilterInputChange(e),this.setFilterQuery(e)}}},{key:"onFocused",value:function(){this.preventFocusAndBlur||this.toggleOpenState(!0);var e=this.props.displayValue;e&&this.filterInput&&(this.filterInput.value=e)}},{key:"onKeyPressedEsc",value:function(){this.state.isOpen&&(this.toggleOpenState(!1),this.focus())}},{key:"onKeyPressedUpOrDown",value:function(e){this.state.isOpen||(this.toggleOpenState(!0),e.stopPropagation())}},{key:"onOptionSelected",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;if(e){var t=this.getSelectedOptionDisplayValue({value:e});this.setSelectedOptionValue(t),this.props.onChange(e),this.toggleOpenState(!1),this.filterInput&&this.filterInput.blur()}}},{key:"onOutsideClicked",value:function(e){this.wrapper&&!this.wrapper.contains(e.target)&&(this.toggleOpenState(!1),this.props.onOutsideClick())}},{key:"onWrapperMouseDownOrTouchStart",value:function(){this.preventFocusAndBlur=!0}},{key:"onWrapperMouseUpOrTouchEnd",value:function(){this.preventFocusAndBlur=!1}},{key:"onSearchAgainTriggered",value:function(){var e=this.props.onClearButtonClick;this.preventFocusAndBlur=!0,this.filterInput&&(this.filterInput.value=""),this.setFilterQuery(""),this.setSelectedOptionValue(""),e(),this.filterInput.focus(),this.toggleOpenState(),this.preventFocusAndBlur=!1}},{key:"maybeShowOptions",value:function(){var e=this.props,t=e.selectedOption,n=e.membersOnly,a=this.getFilterQuery(),r=n?this.getFilteredOptions:this.getFilteredOptionGroups;return a.length>0||t?r():[]}},{key:"getPlaceholder",value:function(){return this.props.placeholder||Xe.t("Choose an option\u2026")}},{key:"getFilteredOptionGroups",value:function(){var e=this.props,t=e.optionGroups,n=e.usePlaceholderOption,a=this.getFilterQuery();return t?!a&&n?[this.getPlaceholderOptionGroup()].concat(f()(t)):t:null}},{key:"getFilteredOptions",value:function(){var e=this.props,t=e.options,n=e.usePlaceholderOption,a=this.getFilterQuery();return t?!a&&n?[this.getPlaceholderOption()].concat(f()(t)):t:null}},{key:"getFilterQuery",value:function(){return Object(S.a)(this,"filterInput.value","")}},{key:"getOptionsListEmptyMessage",value:function(){return this.getFilterQuery().length>0?this.renderOptionsListEmptyMessage():this.renderOptionsListHintText()}},{key:"getOptionsListTargetMeasurements",value:function(){var e=this.props,t=e.optionsListOffsetBottom,n=e.optionsListOffsetTop,a=e.optionsListWidth,r=this.select.getBoundingClientRect(),i=this.select.offsetTop-Object(Ve.a)(this.select,this.select.offsetParent),o=this.select.offsetLeft,s=this.select.offsetParent.clientHeight-i,l=i+r.height;return{bottom:r.bottom,offsetBottom:t,offsetTop:n,relativeBottom:l,relativeLeft:o,relativeTop:s,top:r.top,width:a||r.width}}},{key:"getPlaceholderOption",value:function(){return{isPlaceholder:!0,label:this.getPlaceholder(),value:""}}},{key:"getPlaceholderOptionGroup",value:function(){return{isPlaceholder:!0,options:[this.getPlaceholderOption()]}}},{key:"getSelectedOptionDisplayValue",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value,t=this.props,n=t.optionGroups,a=t.options,r=n?Object(Ke.a)(n,"options"):a,i=Object(w.a)(r,{value:e});return Object(S.a)(i,"displayValue")}},{key:"setFilterQuery",value:function(e){this.setState(function(){return{filterQuery:e}})}},{key:"setSelectedOptionValue",value:function(e){this.setState(function(){return{selectedOptionValue:e}})}},{key:"setRef",value:function(e){var t=this;return function(n){t[e]=n}}},{key:"focus",value:function(){this.preventFocusAndBlur=!0,this.select.focus(),this.preventFocusAndBlur=!1}},{key:"blur",value:function(){this.select.blur(),this.filterInput&&this.filterInput.blur()}},{key:"filterOption",value:function(e){var t=e.label.toLowerCase(),n=this.getFilterQuery().toLowerCase();return-1!==t.indexOf(n)}},{key:"initKeyCommands",value:function(){this.keyCommands=new He.a(this.select),this.keyCommands.bindAll([{keys:["esc"],handler:this.onKeyPressedEsc},{keys:["up","down"],handler:this.onKeyPressedUpOrDown}])}},{key:"resetKeyCommads",value:function(){this.keyCommands&&this.keyCommands.reset()}},{key:"toggleOpenState",value:function(e){this.setState(function(t){var n={isOpen:Object(We.a)(e)?!t.isOpen:e};return n.isOpen||(n.filterQuery=""),n})}},{key:"renderFilterInput",value:function(){var e=this.state,t=e.filterQuery,n=e.selectedOptionValue,a=this.props.displayValue,i={"aria-label":"Filter for option list",className:"c-input_select__filter_input p-workspace-search__select",onChange:this.onFilterInputChanged,placeholder:this.getPlaceholder(),ref:this.setRef("filterInput"),type:"text"};return i.value=n&&!t?n:n||!a||t?t:a,r.a.createElement("input",i)}},{key:"renderOptionsListMaybe",value:function(){if(!this.state.isOpen)return null;var e=this.props,t=e.autoSelectFirstOption,n=e.isLoading,a=e.membersOnly,i=e.optionClassName,o=e.optionsRowHeight,s=e.pillarClassName,l=e.useFullWidthOptions,c=e.value,u=e.onScroll,d=e.onOptionHighlighted,p=a?240:400;return r.a.createElement(Qe.a,{autoSelectFirstOption:t,emptyStateMessage:this.getOptionsListEmptyMessage(),isLoading:n,maxListHeight:p,onOptionSelected:this.onOptionSelected,optionClassName:i,onScroll:u,optionGroups:a?null:this.maybeShowOptions(),options:a?this.maybeShowOptions():null,optionsRowHeight:o,pillarClassName:s,targetMeasurements:this.getOptionsListTargetMeasurements(),useFullWidthOptions:l,value:c,onActiveOptionUpdated:d})}},{key:"renderOptionsListEmptyMessage",value:function(){var e=this.getFilterQuery(),t=Xe.rt('No workspaces found matching <span class="sk_black bold">{query}</span>.',{query:e}),n=Xe.t("Try searching for another workspace or searching for a teammate\u2019s workspaces.");return r.a.createElement("div",{className:"p-workspace_search__no-results-message"},r.a.createElement("p",{className:"margin_0"},t),r.a.createElement("p",{className:"margin_0"},n))}},{key:"renderOptionsListHintText",value:function(){var e=this.props.membersOnly?Xe.rt('Enter a teammate\u2019s <span class="sk_black bold">name</span> or <span class="sk_black bold">email address</span>.'):Xe.rt('Enter a teammate\u2019s <span class="sk_black bold">name</span> or <span class="sk_black bold">email address</span>, or search for a <span class="sk_black bold">specific workspace</span>.');return r.a.createElement("div",{className:"p-workspace_search__no-results-message"},r.a.createElement("p",{className:"margin_0"},e))}},{key:"render",value:function(){var e=this.props,t=(e.autoSelectFirstOption,e.className),n=e.displayValue,a=(e.isLoading,e.labelId),i=(e.membersOnly,e.name),o=(e.onChange,e.onClearButtonClick,e.onClose,e.onFilterInputChange,e.onOutsideClick,e.onOpen,e.onOptionHighlighted,e.onScroll,e.optionClassName,e.options,e.optionsListOffsetBottom,e.optionsListOffsetTop,e.optionsListWidth,e.optionsRowHeight,e.optionGroups,e.pillarClassName,e.placeholder,e.selectedOption,e.selectedValueClassName,e.type),s=(e.useFullWidthOptions,e.usePlaceholderOption,e.wrapperClassName),l=u()(e,["autoSelectFirstOption","className","displayValue","isLoading","labelId","membersOnly","name","onChange","onClearButtonClick","onClose","onFilterInputChange","onOutsideClick","onOpen","onOptionHighlighted","onScroll","optionClassName","options","optionsListOffsetBottom","optionsListOffsetTop","optionsListWidth","optionsRowHeight","optionGroups","pillarClassName","placeholder","selectedOption","selectedValueClassName","type","useFullWidthOptions","usePlaceholderOption","wrapperClassName"]),c=this.state.filterQuery,d=x()("c-input_select__wrapper",s),p=x()("c-input_select",{"c-input_select--active":this.state.isOpen,"c-input_select--short":"short"===o},t),h=x()("p-workspace_search__clear-button",{hidden:!c&&!n});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:d,onMouseDown:this.onWrapperMouseDownOrTouchStart,onMouseUp:this.onWrapperMouseUpOrTouchEnd,onTouchStart:this.onWrapperMouseDownOrTouchStart,onTouchEnd:this.onWrapperMouseUpOrTouchEnd,ref:this.setRef("wrapper"),role:"group"},r.a.createElement("div",m()({},l,{"aria-labelledby":a,className:p,"data-name":i,onBlur:this.onBlurred,onMouseDown:this.onClicked,onFocus:this.onFocused,ref:this.setRef("select")}),this.renderFilterInput()),this.renderOptionsListMaybe()),r.a.createElement(xe.c,{className:h,onClick:this.onClearInput,tabIndex:"0",ref:this.setRef("closeButton")}))}}]),t}(ze.a);et.displayName="WorkspaceSearchSelect",et.propTypes=Ze,et.defaultProps=$e;var tt=et,nt=(n("RQ+B"),i.b.object,i.b.oneOf(["member","workspace"]),i.b.bool.isRequired,i.b.bool.isRequired,function(e){function t(e){g()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(F.a)(n,["maybeRenderTitle","maybeRenderEmail"]),n}return C()(t,e),O()(t,[{key:"maybeRenderTitle",value:function(e){return e?r.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},e):null}},{key:"maybeRenderEmail",value:function(e){return e?r.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},e):null}},{key:"renderEntityIcon",value:function(e){var t=e.item,n=e.type,a=this.props,i=a.featureReactMemberProfileCard,o=a.featureReactMessages;return r.a.createElement(me,{entityType:n,dimension:36,entityData:t,customClasses:"p-workspace_search_options_list_item__avatar",featureReactMessages:o,featureReactMemberProfileCard:i})}},{key:"renderItemAsMember",value:function(e){var t=e.item,n=e.type,a=Object(S.a)(t,"profile"),i=a.real_name,o=a.email,s=a.title;return r.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:t,type:n}),r.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},r.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},i),r.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},this.maybeRenderTitle(s),this.maybeRenderEmail(o))))}},{key:"renderItemAsWorkspace",value:function(e){var t=e.item,n=e.type,a=t.name,i=t.description;return r.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:t,type:n}),r.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},r.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},a),r.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},i)))}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.type;return"member"===n?this.renderItemAsMember({item:t,type:n}):this.renderItemAsWorkspace({item:t,type:n})}}]),t}(a.PureComponent));nt.displayName="WorkspaceSearchOptionsListItem";var at=nt;nt.defaultProps={item:{},type:"member"};n("pVvT");var rt=new Q.b("workspace_directory"),it=(i.b.string,i.b.string,i.b.func.isRequired,i.b.func.isRequired,i.b.bool,i.b.func,i.b.func,i.b.func,i.b.object,i.b.func,{className:"",containerIdSelector:"",membersOnly:!0,onClearInput:P.a,onOptionsListClosed:P.a,onOptionsListOpened:P.a,prepopulatedOption:void 0,triggerAction:P.a}),ot=function(e){function t(e){g()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={nextCursorMark:"*",totalResultsCount:null,memberResultsCount:null,workspaceResultsCount:null,currentOptionsData:[],currentSearchQuery:"",prepopulatedOptionData:void 0,selectedOptionData:void 0,value:void 0,loadingResults:!0,isAnOptionHighlighted:!1},Object(F.a)(n,["clearInput","formatMemberOptionData","formatOptionsDataArrayOrObject","getOptionsFetcher","fetchMemberData","fetchMemberAndWorkspaceData","onChange","onClearButtonClicked","onFilterInputChange","onOptionHighlighted","onScroll","renderMemberItemTemplate","setIsAnOptionHighlighted","setCurrentSearchQuery","setIsLoading","setValue","triggerActionWithValue","onClose","onKeyPressedEnter","onOpen","setSelectRef"]),n.select=null,n.debouncedOnFilterInputChange=Object(Le.a)(n.onFilterInputChange,100),n}return C()(t,e),O()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.prepopulatedOption,n=e.membersOnly;Object(A.a)(t)||this.setPrepopulatedOptionData(t),this.getOptionsFetcher(),n||(this.keyCommands=this.initKeyCommands())}},{key:"componentDidUpdate",value:function(e){var t=this.props.prepopulatedOption,n=e.prepopulatedOption;Object(A.a)(t)||t===n||this.setPrepopulatedOptionData(t)}},{key:"componentWillUnmount",value:function(){this.keyCommands&&this.keyCommands.reset()}},{key:"onChange",value:function(e){var t=this.props.membersOnly,n=this.state,a=n.currentOptionsData,r=n.currentSearchQuery,i=void 0,o=void 0,s=void 0;if(e===Ge.b)i={id:Ge.b,displayValue:r},s=a;else if(t)i=Object(w.a)(a,{id:e}),o=Object(G.E)(i),s=[i];else{i=Object(w.a)(Object(qe.a)(Object(Be.a)(a)),{id:e});var l=Object(Ge.h)(i);o=l?Object(G.E)(i):Object(S.a)(i,"name"),s=l?{members:[i],workspaces:[]}:{members:[],workspaces:[i]}}this.setState(function(){return{value:e,selectedOptionData:i,currentSearchQuery:e===Ge.b?r:o,nextCursorMark:"*",currentOptionsData:s}},this.triggerActionWithValue)}},{key:"onClearButtonClicked",value:function(){var e=this.props.onClearInput;this.clearInput(),e()}},{key:"onFilterInputChange",value:function(e){var t=this.props,n=t.triggerAction,a=t.membersOnly;this.setIsLoading(!0),this.setSelectedOptionData(null),this.setPrepopulatedOptionData(null),this.setValue(null),a&&n({selectedOptionData:null}),this.getOptionsFetcher(e)}},{key:"onOptionHighlighted",value:function(e){var t=!Object(A.a)(e);this.setIsAnOptionHighlighted(t)}},{key:"onScroll",value:function(e){var t=this.state,n=t.currentSearchQuery,a=t.currentOptionsData,r=void 0===a?[]:a,i=t.totalResultsCount,o=e.clientHeight;e.scrollHeight-(e.scrollTop+o)<200&&r.length<i&&this.getOptionsFetcher(n,{doFetchNextPage:!0})}},{key:"onClose",value:function(){var e=this.props.onOptionsListClosed;this.setIsAnOptionHighlighted(!1),e()}},{key:"onOpen",value:function(){(0,this.props.onOptionsListOpened)()}},{key:"onSearchAgainTriggered",value:function(){this.select.onSearchAgainTriggered()}},{key:"onKeyPressedEnter",value:function(){if(!this.props.membersOnly){var e=this.state,t=e.selectedOptionData,n=e.currentSearchQuery,a=e.isAnOptionHighlighted;if(n&&!a){var r=Object(S.a)(this.select,"filterInput.value",n);t||(this.select.blur(),this.setState(function(){return{selectedOptionData:{id:Ge.b,displayValue:r},currentSearchQuery:r,nextCursorMark:"*"}},this.triggerActionWithValue))}}}},{key:"setSelectRef",value:function(e){this.select=e}},{key:"setCurrentOptionsData",value:function(e){var t=e.optionData,n=e.isNewSearch,a=e.totalResultsCount,r=this.state.currentOptionsData,i=void 0;i=n?t:Object(I.a)(r,t,"id"),this.setState(function(){return{currentOptionsData:i,totalResultsCount:a}}),this.setIsLoading(!1)}},{key:"setCurrentOptionGroupsData",value:function(e){var t=e.memberOptionData,n=e.workspaceOptionData,a=e.isNewSearch,r=e.totalResultsCount,i=e.memberResultsCount,o=void 0===i?0:i,s=e.workspaceResultsCount,l=void 0===s?0:s,c=this.state.currentOptionsData,u=void 0,d=!o&&!l||r?r:o+l;u=a?{members:t,workspaces:n}:{members:Object(I.a)(Object(S.a)(c,"members"),t,"id"),workspaces:Object(I.a)(Object(S.a)(c,"workspaces"),n,"id")},this.setState(function(){return{currentOptionsData:u,totalResultsCount:d,memberResultsCount:o,workspaceResultsCount:l}}),this.setIsLoading(!1)}},{key:"setCurrentSearchQuery",value:function(e){this.setState(function(){return{currentSearchQuery:e}})}},{key:"setIsLoading",value:function(e){this.setState(function(){return{loadingResults:e}})}},{key:"setIsAnOptionHighlighted",value:function(e){this.setState(function(){return{isAnOptionHighlighted:e}})}},{key:"setNextCursorMark",value:function(e){this.setState(function(){return{nextCursorMark:e}})}},{key:"setPrepopulatedOptionData",value:function(e){this.setState(function(){return{prepopulatedOptionData:e}})}},{key:"setSelectedOptionData",value:function(e){this.setState(function(){return{selectedOptionData:e}})}},{key:"setValue",value:function(e){this.setState(function(){return{value:e}})}},{key:"getBoundingRect",value:function(e){return this._workspaceSearchBoundingContainer||(this._workspaceSearchBoundingContainer=document.getElementById(e)),this._workspaceSearchBoundingContainer?this._workspaceSearchBoundingContainer.getBoundingClientRect():{}}},{key:"getPlaceHolderText",value:function(e){var t=rt.t("Search for a teammate"),n=rt.t("Search");return e?t:n}},{key:"getOptionsFetcher",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.forceNewSearch,a=void 0!==n&&n,r=t.doFetchNextPage,i=void 0!==r&&r,o=this.state.currentSearchQuery,s=this.props.membersOnly?this.fetchMemberData:this.fetchMemberAndWorkspaceData,l={searchTerm:e};return i||e!==o||a?(l.nextCursorMark=o===e?this.state.nextCursorMark:"",this.setCurrentSearchQuery(e),s({args:l,forceNewSearch:a,newSearchQuery:e,stashedSearchQuery:o})):null}},{key:"initKeyCommands",value:function(){var e=new He.a;return e.bindAll([{keys:["enter"],handler:this.onKeyPressedEnter}]),e}},{key:"fetchMemberData",value:function(e){var t=this,n=e.args,a=e.forceNewSearch,r=e.newSearchQuery,i=e.stashedSearchQuery;return(0,this.props.fetchMembers)(n).then(function(e){var n=e.items,o=void 0===n?[]:n,s=e.next_cursor_mark,l=e.num_found;(o.length||"*"===s)&&(t.setNextCursorMark(s),t.setCurrentOptionsData({optionData:o,isNewSearch:a||i!==r,totalResultsCount:l}))})}},{key:"fetchMemberAndWorkspaceData",value:function(e){var t=this,n=e.args,a=e.forceNewSearch,r=e.newSearchQuery,i=e.stashedSearchQuery,o=[(0,this.props.fetchMembers)(n),this.props.fetchDirectoryWorkspaces(n)];return Promise.all(o).then(function(e){var n=e[0],o=n.items,s=void 0===o?[]:o,l=n.next_cursor_mark,c=n.num_found,u=e[1],d=u.items,p=void 0===d?[]:d,h=u.next_cursor_mark,m=u.num_found,b=void 0;(s.length||"*"===l||p.length||"*"===h)&&(s.length&&!p.length?t.setNextCursorMark(l):p.length&&!s.length&&t.setNextCursorMark(h),s.length&&!p.length?b=c:p.length&&!s.length&&(b=m),t.setCurrentOptionGroupsData({memberOptionData:s,workspaceOptionData:p,isNewSearch:a||i!==r,totalResultsCount:b,memberResultsCount:c,workspaceResultsCount:m}))})}},{key:"clearInput",value:function(){var e=this.props.triggerAction;this.setSelectedOptionData(null),this.setCurrentSearchQuery(null),this.setPrepopulatedOptionData(null),this.setValue(null),this.getOptionsFetcher(),e({selectedOptionData:null,type:null}),this.select.toggleOpenState()}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"triggerActionWithValue",value:function(){var e=this.props.triggerAction,t=this.state.selectedOptionData;e({selectedOptionData:t,type:Object(Ge.h)(t)?"member":"workspace"})}},{key:"formatOptionsDataArrayOrObject",value:function(e){var t=this,n=[];if(this.props.membersOnly)n=Object(Ue.a)(e,function(e){return t.formatMemberOptionData(e)});else{var a=e.members,r=e.workspaces,i=Object(S.a)(a,"length",0),o=Object(S.a)(r,"length",0);if(i){var s={label:this.formatMemberOptionsGroupsHeader(),options:[]},l=o>0?Object(Fe.a)(a,0,4):a;s.options=Object(Ue.a)(l,function(e){return t.formatMemberOptionData(e)}),n.push(s)}if(o){var c={label:this.formatWorkspaceOptionsGroupsHeader(),options:[]};c.options=Object(Ue.a)(r,function(e){return t.formatWorkspaceOptionData(e)}),n.push(c)}}return n}},{key:"formatMemberOptionData",value:function(e){var t=Object(G.E)(e),n=Object(S.a)(e,"id");return{label:this.renderMemberItemTemplate({item:e,type:"member"}),value:n,displayValue:t}}},{key:"formatWorkspaceOptionData",value:function(e){var t=Object(S.a)(e,"name"),n=Object(S.a)(e,"id");return{label:this.renderMemberItemTemplate({item:e,type:"workspace"}),value:n,displayValue:t}}},{key:"formatMemberOptionsGroupsHeader",value:function(){var e=this.state,t=e.memberResultsCount,n=e.selectedOptionData?1:t;return rt.t("Search by coworker ({num})",{num:n})}},{key:"formatWorkspaceOptionsGroupsHeader",value:function(){var e=this.props.prepopulatedOption,t=this.state,n=t.currentSearchQuery,a=t.workspaceResultsCount,r=t.selectedOptionData,i=Object(S.a)(e,"displayValue","")?Object(S.a)(e,"displayValue",""):n,o=r?1:a,s=Object(Ge.c)()?50:150,l=Object(S.a)(i,"length",0)>s?i.slice(0,s)+"...":i;return rt.t("Workspaces matching \u201c{query}\u201d ({num})",{query:Object(Q.n)(l),num:o})}},{key:"renderShowAllWorkspacesListItem",value:function(){var e=this.state.currentSearchQuery;return r.a.createElement("div",{className:"p-workspace_search_options_list_item"},r.a.createElement("div",{className:"p-workspace_search__search_icon_wrapper"},r.a.createElement(ne.b,{type:"search"})),r.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_1"},r.a.createElement("div",{className:"p-workspace_search_options_list_item__alternate_content"},rt.rt('All workspace results for <span class="p-workspace_search_options_list_item__alternate_content--highlight">{query}</span>',{query:Object(Q.n)(e)}))))}},{key:"renderMemberItemTemplate",value:function(e){var t=e.item,n=e.type;return r.a.createElement(at,{item:t,type:n,featureReactMessages:!0,featureReactMemberProfileCard:!0})}},{key:"render",value:function(){var e=this.props,t=e.containerIdSelector,n=e.membersOnly,a=this.state,i=a.value,o=a.currentOptionsData,s=a.loadingResults,l=a.currentSearchQuery,c=a.prepopulatedOptionData,u=a.selectedOptionData,d=this.getBoundingRect(t),p=d.bottom,h=void 0===p?0:p,b=d.top,f=void 0===b?0:b,_={autoSelectFirstOption:!0,className:"p-workspace_search",displayValue:l,isLoading:s,membersOnly:n,onChange:this.onChange,onClearButtonClick:this.onClearButtonClicked,onClose:this.onClose,onFilterInputChange:this.debouncedOnFilterInputChange,onOpen:this.onOpen,onOptionHighlighted:this.onOptionHighlighted,onScroll:this.onScroll,optionsListOffsetBottom:window.innerHeight-h,optionsListOffsetTop:f,optionsRowHeight:48,placeholder:this.getPlaceHolderText(n),pillarClassName:"p-workspace_search",selectedOption:u,usePlaceholderOption:!1,useFullWidthOptions:!0,value:i,wrapperClassName:"p-workspace_search__wrapper"};if(n?_.options=this.formatOptionsDataArrayOrObject(o):_.optionGroups=this.formatOptionsDataArrayOrObject(o),c&&!i)if(Object(S.a)(c,"id")===Ge.b)_.selectedOption=c,_.displayValue=Object(S.a)(c,"displayValue");else{var g=Object(Ge.h)(c)?this.formatMemberOptionData(c):this.formatWorkspaceOptionData(c);_.selectedOption=c,_.displayValue=Object(S.a)(g,"displayValue")}return r.a.createElement("div",{className:"position_relative"},r.a.createElement(tt,m()({},_,{ref:this.setSelectRef})))}}]),t}(a.Component);ot.displayName="WorkspaceSearch",ot.defaultProps=it;var st={fetchMembers:X.j,fetchDirectoryWorkspaces:X.f},lt=Object(L.b)(null,st,null,{withRef:!0})(ot),ct=n("wR6u"),ut=new Q.b("workspace_directory"),dt={launch:"launch",join:"join",request:"request",request_sent:"request_sent",default:"default"},pt=(i.b.shape({id:i.b.string,description:i.b.string,discoverable:i.b.string,name:i.b.string,domain:i.b.string,is_member:i.b.bool,date_requested_join:i.b.oneOfType([i.b.string,i.b.number]),icon:i.b.object,is_inactive:i.b.bool,user_counts:i.b.object}).isRequired,i.b.oneOf(Object(Be.a)(Ge.a)),i.b.bool.isRequired,i.b.string,i.b.func,i.b.func,i.b.bool,i.b.bool,i.b.func,i.b.func,i.b.string,i.b.bool,i.b.func,i.b.func,i.b.oneOf(["medium","large"]),{buttonContext:"largeCard",customClasses:"",onWorkspaceLaunch:P.a,onDefaultButtonClick:P.a,doLaunchInNewTab:!1,displayDirectoryInModal:!1,callJoinWorkspace:P.a,callRequestToJoinWorkspace:P.a,size:"large",onActionReject:P.a,onActionResolve:P.a,anchorPage:void 0,doUpsertJoin:!1}),ht=function(e){function t(e){g()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!1},n.buttonType=null,n.onClick=n.onClick.bind(n),n.onKeyPress=n.onKeyPress.bind(n),n}return C()(t,e),O()(t,[{key:"onKeyPress",value:function(e){e.stopPropagation(),e.preventDefault(),13===e.which&&this.handleButtonAction()}},{key:"onClick",value:function(e){e.stopPropagation(),e.preventDefault(),this.handleButtonAction()}},{key:"onWorkspaceJoin",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).windowOpener,n=this.props,a=n.team,i=n.onActionReject,o=n.onActionResolve,s=n.anchorPage,l=n.doUpsertJoin;return Object($.a)()&&Object(ct.d)(!1),this.props.callJoinWorkspace({teamId:a.id,anchorPage:s,doUpsertJoin:l}).then(function(){var e={};l&&(e.workspace=m()({},a,{is_member:!0})),o(e),Object($.a)()&&!Object(ee.b)()&&Object(ct.d)(!0)}).then(function(){return e.props.onWorkspaceLaunch(t)}).catch(function(n){Object($.a)()&&Object(ct.d)(!0),t&&(e.setLoading(!1),t.close()),i({node:r.a.createElement("span",null,ut.rt("Workspace couldn\u2019t be joined. Please reload and try again.")),err:n})})}},{key:"onWorkspaceRequestToJoin",value:function(){var e=this,t=this.props,n=t.team,a=t.onActionReject,i=t.onActionResolve,o=t.anchorPage;return this.props.callRequestToJoinWorkspace({teamId:n.id,anchorPage:o}).then(function(){i({node:r.a.createElement("div",{className:"display_flex"},r.a.createElement(ne.b,{type:"check-circle-o",className:"margin_right_50 sk_seafoam_green"}),r.a.createElement("span",null,ut.rt("<strong>Request sent!</strong> You\u2019ll be notified by email when a Workspace Admin grants access."))),workspace:m()({},n,{date_requested_join:String(Math.floor(Date.now()))})})}).then(function(){e.setLoading(!1)}).catch(function(e){a({node:r.a.createElement("span",null,ut.rt("Your request couldn\u2019t be sent. Please reload and try again.")),err:e})})}},{key:"setLoading",value:function(e){this.setState(function(){return{loading:e}})}},{key:"getButtonProps",value:function(e){var t,n=this.props.displayDirectoryInModal;switch(e){case dt.launch:return{text:{displayDirectoryInModal:n}.displayDirectoryInModal?ut.t("Open"):ut.t("Launch in Slack"),type:"primary","data-qa-ws-directory-button-type":"primary","data-qa-ws-directory-button-text":"launch","data-qa":"launch"};case dt.request:return t="request_to_join",{text:ut.t("Request to Join"),type:"primary","data-qa-ws-directory-button-type":"primary","data-qa-ws-directory-button-text":t,"data-qa":t};case dt.join:return{text:{displayDirectoryInModal:n}.displayDirectoryInModal?ut.t("Join and Open"):ut.t("Join and Launch Slack"),type:"primary","data-qa-ws-directory-button-type":"primary","data-qa-ws-directory-button-text":"join","data-qa":"join"};case dt.request_sent:return function(){var e="request_sent";return{text:ut.t("Request Sent"),type:"primary","data-qa-ws-directory-button-type":"primary","data-qa-ws-directory-button-text":e,"data-qa":e,disabled:!0}}();case dt.default:return function(){var e="default";return{type:"outline",text:ut.t("View Details",{fallbackHash:"6319b15f86fee6c8e5aa4846437f377ec352787c"}),"data-qa-ws-directory-button-type":"outline","data-qa-ws-directory-button-text":e,"data-qa":e}}();default:return null}}},{key:"handleButtonAction",value:function(){var e=this.props.doLaunchInNewTab;if("default"===this.buttonType)return this.props.onDefaultButtonClick();if(this.setLoading(!0),"join"===this.buttonType){if(e){var t=window.open("","_blank");return this.onWorkspaceJoin({windowOpener:t})}return this.onWorkspaceJoin()}return"request"===this.buttonType?this.onWorkspaceRequestToJoin():("launch"===this.buttonType&&(this.props.onWorkspaceLaunch(),e&&this.setLoading(!1)),null)}},{key:"render",value:function(){var e=this.props,t=e.featureZeroWorkspaceOnboarding,n=e.team,a=e.buttonContext,i=e.customClasses,o=e.size,s=this.state.loading,l=function(e,t){var n=t.context,a=void 0===n?Ge.a.smallCard:n,r=t.featureZeroWorkspaceOnboarding;if(void 0!==r&&!r)return null;var i=e.is_member,o=e.date_requested_join,s=e.is_assigned,l=e.discoverable;if(i)return dt.launch;if(a!==Ge.a.smallCard){if(s)return dt.join;switch(l){case"open":return dt.join;case"closed":if(!o)return dt.request;if(a===Ge.a.largeCard)return dt.request_sent}return null}return dt.default}(n,{context:a,featureZeroWorkspaceOnboarding:t});this.buttonType=l;var c=this.getButtonProps(l);if(!l||Object(A.a)(c))return null;var d=n.id,p=c.text,h=u()(c,["text"]),b=h.disabled||s;return r.a.createElement(xe.b,m()({},h,{className:i,role:"button",tabIndex:"0",onClick:this.onClick,onKeyPress:this.onKeyPress,"data-workspace-id":d,"data-qa-ws-directory-button":!0,loading:s,disabled:b,size:o}),p)}}]),t}(a.Component);ht.displayName="WorkspaceDirectoryButton",ht.defaultProps=pt;var mt={callJoinWorkspace:X.b,callRequestToJoinWorkspace:X.d};var bt=Object(L.b)(function(e,t){var n=t.team,a=t.onActionResolve,r=t.anchorPage,i=t.doLaunchInNewTab,o=t.channelRedirect,l=t.postLaunchAction,c=t.userIdFromURL,u=Object(H.b)(e);return{featureZeroWorkspaceOnboarding:Object(s.i)(e,"feature_zero_workspace_onboarding"),displayDirectoryInModal:Object(s.h)(e),onWorkspaceLaunch:function(t){return Object(Ge.i)(e,{team:n,user:u,onActionResolve:a,anchorPage:r,doLaunchInNewTab:i,windowOpener:t,channelRedirect:o,postLaunchAction:l,userIdFromURL:c})}}},mt)(ht),ft=(n("ah8n"),new Q.b("workspace_directory")),_t={large:"large",small:"small"},gt={large:64,small:48},vt=(i.b.shape({id:i.b.string,description:i.b.string,discoverable:i.b.string,name:i.b.string,domain:i.b.string,is_member:i.b.bool,date_requested_join:i.b.oneOfType([i.b.string,i.b.number]),icon:i.b.object,is_inactive:i.b.bool,user_counts:i.b.object}).isRequired,i.b.oneOf(Object(Be.a)(_t)),i.b.bool.isRequired,i.b.string,i.b.func,i.b.func,i.b.string,i.b.func,i.b.bool,{size:_t.large,className:"",onActionResolve:P.a,onActionReject:P.a,anchorPage:"",openDialog:P.a,doLaunchInNewTab:!1}),yt=function(e){function t(e){g()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onCardClick=n.onCardClick.bind(n),n.onKeyPress=n.onKeyPress.bind(n),n.onResize=n.onResize.bind(n),n.openDialog=n.openDialog.bind(n),n.state={isMobileView:!1},n}return C()(t,e),O()(t,[{key:"componentDidMount",value:function(){this.setIsMobileView(Object(Ge.c)()),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function(){this.setIsMobileView(Object(Ge.c)())}},{key:"onCardClick",value:function(e){e.stopPropagation(),e.preventDefault(),this.isSmallVariationCard()&&this.openDialog()}},{key:"onKeyPress",value:function(e,t){if(e.preventDefault(),"Enter"===e.key)switch(t){case"openDialog":if(this.isSmallVariationCard())return this.openDialog()}return null}},{key:"setIsMobileView",value:function(e){this.setState(function(){return{isMobileView:e}})}},{key:"isSmallVariationCard",value:function(){return this.props.size===_t.small}},{key:"isLargeVariationCard",value:function(){return this.props.size===_t.large}},{key:"openDialog",value:function(){var e=this.props,t=e.team,n=e.openDialog;n({team:t})}},{key:"renderAvatar",value:function(){var e=this.props.team,t=this.isLargeVariationCard()&&!this.state.isMobileView?gt[_t.large]:gt[_t.small];return r.a.createElement("div",{className:"display_flex"},r.a.createElement(me,{entityType:"workspace",customClasses:this.isSmallVariationCard()?"cursor_pointer":"",dimension:t,entityData:e,featureReactMessages:!0,featureReactMemberProfileCard:!0}))}},{key:"renderWorkspaceName",value:function(){var e=this.props.team.name;return r.a.createElement("span",{className:"p-workspace_directory_card__title","data-qa-ws-directory-card-title":!0,title:e},e)}},{key:"renderWorkspaceSubtitle",value:function(){var e=this.props,t=e.featureZeroWorkspaceOnboarding,n=e.team;if(!t)return null;var a=this.state.isMobileView,i=n.date_requested_join,o=n.discoverable,s=n.domain,l=n.user_counts,c=(l=void 0===l?{}:l).active_members,u=void 0===c?0:c,d=ft.t("{activeMembers} active members",{activeMembers:u?Object(Q.l)(u):0}),p=void 0;return p=this.isLargeVariationCard()&&!a?r.a.createElement("div",null,r.a.createElement("span",{className:"border_right padding_right_50 margin_right_50 float_left"},d),r.a.createElement("span",{className:"overflow_ellipsis"},s+".slack.com")):this.isSmallVariationCard()&&"closed"===o&&i?r.a.createElement("span",null,ft.t("Awaiting admin approval")):r.a.createElement("span",{className:"overflow_ellipsis"},d),r.a.createElement("div",{className:"p-workspace_directory_card__subtitle","data-qa-ws-directory-card-subtitle":!0},p)}},{key:"renderWorkspaceStatus",value:function(){var e=this.props,t=e.featureZeroWorkspaceOnboarding,n=e.team;if(!t||this.isSmallVariationCard())return null;var a=Object(Ge.f)(n,{context:"largeCard",featureZeroWorkspaceOnboarding:t});return a?r.a.createElement("div",{className:"p-workspace_directory_card__status"},a):null}},{key:"renderWorkspaceDescription",value:function(){var e=this.props.team.description;return r.a.createElement("div",{className:"p-workspace_directory_card__description","data-qa-ws-directory-card-description":!0},e)}},{key:"renderButton",value:function(){var e=this.props,t=e.team,n=e.size,a=e.onActionReject,i=e.onActionResolve,o=e.anchorPage,s=e.doLaunchInNewTab,l=this.isLargeVariationCard()?"large":"medium";return r.a.createElement(bt,{team:t,buttonContext:n+"Card",featureZeroWorkspaceOnboarding:!0,customClasses:"p-workspace_directory_card__button",onDefaultButtonClick:this.openDialog,onActionReject:a,onActionResolve:i,anchorPage:o,doLaunchInNewTab:s,size:l})}},{key:"render",value:function(){var e=this,t=this.props,n=t.featureZeroWorkspaceOnboarding,a=t.size,i=t.className;if(!n)return null;var o=this.props.team.id,s=x()("p-workspace_directory_card",i,{"p-workspace_directory_card--large":this.isLargeVariationCard(),"p-workspace_directory_card--small":this.isSmallVariationCard()});return r.a.createElement("div",{className:s,onClick:this.onCardClick,onKeyPress:function(t){return e.onKeyPress(t,"openDialog")},"data-workspace-id":o,"data-qa-ws-directory-card":!0,"data-qa-ws-directory-card-size":a,role:"button",tabIndex:"0"},r.a.createElement("div",{className:"display_flex flex_direction_column"},r.a.createElement("div",{className:"display_flex align_self_start full_width"},this.renderAvatar(),r.a.createElement("div",{className:"p-workspace_directory_card__heading nudge_top_1"},this.renderWorkspaceName(),this.renderWorkspaceSubtitle())),this.renderWorkspaceStatus(),this.renderWorkspaceDescription()),this.renderButton())}}]),t}(a.Component);yt.displayName="WorkspaceDirectoryCard",yt.defaultProps=vt;var kt=Object(L.b)(function(e){return{featureZeroWorkspaceOnboarding:Object(s.i)(e,"feature_zero_workspace_onboarding")}})(yt),Ot=n("mIgp"),jt=(n("8XR2"),new Q.b("grid_onboarding")),Ct=(i.b.string,i.b.object.isRequired,i.b.bool.isRequired,i.b.func.isRequired,i.b.any,i.b.func,i.b.func,i.b.object.isRequired,{orgName:"",scrollElement:window,enqueueToast:P.a,onFooterClick:P.a}),Et=Object(K.b)();function wt(e){var t=e.totalWorkspaces,n=e.onWorkspaces;return!t&&n}function St(e){var t=e.totalWorkspaces,n=e.onWorkspaces;return!t&&!n}var It=function(e){var t=e.workspaces,n=e.noAccessToWorkspaces,a=e.noWorkspaces,i=e.hasApiError,o=e.featureZeroWorkspaceOnboarding;if(!o)return"";var s=function(e){return e?{oneJoinableWorkspace:jt.t("Join this workspace to start working with them on Slack."),moreThanOneJoinableWorkspaces:jt.t("Join the workspace that seems right for your role to get started."),noAccess:jt.t("Get in touch with them to be invited to a workspace they\u2019re in."),noWorkspaces:jt.t("Try searching for someone else on your team."),onApiError:jt.rt("You may want to try <a>reloading this page</a> and searching again, or try searching for someone else.",null,function(e){var t=e.text,n=e.key;return"a"===e.tag?r.a.createElement(ie.a,{onClick:function(){return Object(De.b)({reason:"Search failure, user initiated reload via link in error message",reasonKey:"search_results_failure",noCache:!0})},target:"_self",key:n},t):{text:t}})}:""}(o);if(i)return s.onApiError;var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(R.a)(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"open"===e.discoverable||"closed"===e.discoverable||"unlisted"===e.discoverable&&e.is_assigned})}(t).length;return 1===l?s.oneJoinableWorkspace:l>1?s.moreThanOneJoinableWorkspaces:n?s.noAccess:a?s.noWorkspaces:""},Tt=function(e){function t(e){g()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isMobileView:!1,loadingWorkspaces:!1,nextCursorMark:null,memberRealName:"",selectedMember:{},workspaces:[],totalWorkspaces:0,onWorkspaces:!1,hasApiError:!1},n.resultsList=null,n.searchBar=null,n.userHasNoAccessToWorkspaces=!1,n.memberHasNoWorkspaces=!1,n.noWorkspacesToDisplay=!1,n.doRenderSearchAgainButton=!1,Object(F.a)(n,["onFooterClick","onResize","onScroll","setListRef","setSearchBarRef","renderWorkspaceCard","getListKeys","onSearchAgainButtonClick","onSelectColleague","setWorkspaceFetchOptions","fetchWorkspaces","onButtonActionReject","onButtonActionResolve","setToastText","setLoadingWorkspaces"]),n}return C()(t,e),O()(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize),this.clientHeight=window.innerHeight,this.setSelectedMember(this.props.selectedMember)}},{key:"componentDidUpdate",value:function(e,t){this.maybeFetchNextPage(t),this.maybeTriggerNewSearch(t),this.maybeUpdateMemberRealName(t)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onFooterClick",value:function(){this.props.onFooterClick()}},{key:"onResize",value:function(){this.clientHeight=window.innerHeight;var e=Object(Ge.c)(),t=this.state.isMobileView!==e;(e||t)&&this.resultsList.invalidateRowHeights()}},{key:"onScroll",value:function(e){var t=e.scrollTop,n=e.scrollHeight;this.doInfiniteScrollHandler({scrollTop:t,scrollHeight:n})}},{key:"onSearchAgainButtonClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.searchBar&&this.searchBar.getWrappedInstance&&this.searchBar.getWrappedInstance().onSearchAgainTriggered()}},{key:"onSelectColleague",value:function(e){var t=e.selectedOptionData;t&&this.setSelectedMember(t)}},{key:"onButtonActionReject",value:function(e){var t=e.node;t&&this.setToastText(t)}},{key:"onButtonActionResolve",value:function(e){var t=e.node,n=e.i,a=e.workspace;Object(Pe.a)(n)&&a&&this.setWorkspaceByIndex({index:n,workspace:a}),t&&this.setToastText(t)}},{key:"setListRef",value:function(e){this.resultsList=e}},{key:"setSearchBarRef",value:function(e){this.searchBar=e}},{key:"getListKeys",value:function(){return this.state.workspaces?this.state.workspaces.map(function(e){return String(e.id)}):[]}},{key:"setHasApiError",value:function(e){this.setState(function(){return{hasApiError:e}})}},{key:"setSelectedMember",value:function(e){this.setState(function(){return{selectedMember:e}})}},{key:"setMemberRealName",value:function(e){this.setState(function(){return{memberRealName:e}})}},{key:"setWorkspaceFetchOptions",value:function(e){var t=e.workspaces,n=e.totalWorkspaces,a=e.onWorkspaces,r=e.nextCursorMark;this.setState(function(){return{workspaces:t,totalWorkspaces:n,onWorkspaces:a,nextCursorMark:r}})}},{key:"setWorkspaceByIndex",value:function(e){var t=e.index,n=e.workspace;this.setState(function(e){var a=[].concat(e.workspaces);return t>=a.length?(Et.warn("SearchResultsScreen: Out of bounds index "+t+" passed into setWorkspaceByIndex"),e):(a[t]=n,{workspaces:a})})}},{key:"setLoadingWorkspaces",value:function(e){this.setState(function(){return{loadingWorkspaces:e}})}},{key:"setToastText",value:function(e){this.props.enqueueToast({element:r.a.createElement(ae.b,{position:"bottom-right",offsetY:50},e)})}},{key:"maybeTriggerNewSearch",value:function(e){e.selectedMember!==this.state.selectedMember&&(this.clearWorkspaceFetchOptions(),this.setLoadingWorkspaces(!0))}},{key:"maybeUpdateMemberRealName",value:function(e){if(e.selectedMember!==this.state.selectedMember){var t=Object(G.E)(this.state.selectedMember);this.setMemberRealName(t)}}},{key:"doInfiniteScrollHandler",value:function(e){var t=e.scrollTop,n=e.scrollHeight,a=this.hasScrolledWithinScrollThreshold({scrollTop:t,scrollHeight:n});a&&!this.hasFetchedAllWorkspaces()?this.setLoadingWorkspaces(!0):!a&&this.hasFetchedAllWorkspaces()&&this.setLoadingWorkspaces(!1)}},{key:"fetchWorkspaces",value:function(){var e=this,t=this.state,n=t.nextCursorMark,a=t.selectedMember;return this.setHasApiError(!1),this.props.fetchDirectoryWorkspaces({nextCursorMark:n,id:Object(S.a)(a,"id"),type:"single_user"}).then(function(t){e.setLoadingWorkspaces(!1);var a=t.num_found,r=t.on_workspaces,i=t.items,o=i?[].concat(e.state.workspaces,i):[];e.setWorkspaceFetchOptions({workspaces:o,totalWorkspaces:a,onWorkspaces:r,nextCursorMark:t.next_cursor_mark}),n||Object(Ge.e)({anchorPage:"grid_onboarding",numSearchResults:Object(S.a)(t,"num_found",0),clogger:e.props.clogger})}).catch(function(t){e.setHasApiError(!0),e.setLoadingWorkspaces(!1),Et.error("SearchResultsScreen: Error in FetchWorkspaces -",t)})}},{key:"maybeFetchNextPage",value:function(e){!e.loadingWorkspaces&&this.state.loadingWorkspaces&&this.fetchWorkspaces()}},{key:"hasScrolledWithinScrollThreshold",value:function(e){return e.scrollHeight-(e.scrollTop+this.clientHeight)<1200}},{key:"hasFetchedAllWorkspaces",value:function(){return this.state.workspaces.length===this.state.totalWorkspaces}},{key:"clearWorkspaceFetchOptions",value:function(){this.setWorkspaceFetchOptions({workspaces:[],totalWorkspaces:0,onWorkspaces:!1,nextCursorMark:null})}},{key:"renderSearchBar",value:function(){return r.a.createElement("div",{className:"p-grid_onboarding_results__search"},r.a.createElement(lt,{triggerAction:this.onSelectColleague,containerIdSelector:"colleagueSearchResults",membersOnly:!0,className:"margin_bottom_200",prepopulatedOption:this.props.selectedMember,ref:this.setSearchBarRef}))}},{key:"renderHeading",value:function(){var e=this.props.featureZeroWorkspaceOnboarding;if(!e)return null;var t=this.state,n=t.totalWorkspaces,a=t.selectedMember,i=t.hasApiError,o=Object(G.E)(a),s=function(e){var t=e.noAccessToWorkspaces,n=e.noWorkspaces,a=e.memberRealName,r=e.totalWorkspaces,i=e.hasApiError;return e.featureZeroWorkspaceOnboarding?i?jt.t("We ran into some trouble fetching {memberName}\u2019s workspaces",{memberName:Object(Q.n)(a)}):t?jt.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:Object(Q.n)(a)}):n?jt.t("{memberName} hasn\u2019t joined a workspace",{memberName:Object(Q.n)(a)}):jt.t("{memberName} is in {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{memberName:Object(Q.n)(a),numWorkspaces:r}):""}({noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,totalWorkspaces:n,memberRealName:o,hasApiError:i,featureZeroWorkspaceOnboarding:e}),l=x()("p-grid_onboarding__results_heading_container",{align_center:this.noWorkspacesToDisplay});return r.a.createElement("div",{className:l},r.a.createElement("span",{className:"p-grid_onboarding__results_heading"},r.a.createElement(me,{entityType:"member",dimension:24,entityData:a,featureReactMessages:!0,customClasses:"p-grid_onboarding_results__icon"}),s))}},{key:"renderSubheading",value:function(){var e=this.props.featureZeroWorkspaceOnboarding;if(!e)return null;var t=this.state,n=t.workspaces,a=t.hasApiError,i=It({workspaces:n,featureZeroWorkspaceOnboarding:e,noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,hasApiError:a}),o=x()("p-grid_onboarding__results_subheading",{align_center:this.noWorkspacesToDisplay});return r.a.createElement("div",{className:o},i)}},{key:"renderWorkspaceCard",value:function(e){var t=this,n=this.state,a=n.workspaces,i=n.totalWorkspaces,o=x()("p-grid_onboarding_results__list_item",{margin_bottom_0:e===i-1});return r.a.createElement(kt,{team:a[e],size:"large",featureZeroWorkspaceOnboarding:!0,className:o,onActionResolve:function(n){return t.onButtonActionResolve(m()({},n,{i:e}))},onActionReject:function(n){return t.onButtonActionReject(m()({},n,{i:e}))},anchorPage:"grid_onboarding"})}},{key:"renderWorkspaceList",value:function(){var e=this,t=this.props.scrollElement;return r.a.createElement(B.a,{scrollElement:t,onScroll:this.onScroll},function(n){var a=n.height,i=n.isScrolling,o=n.onChildScroll,s=n.scrollTop,l=n.registerChild;return r.a.createElement("div",{className:"p-grid_onboarding_results__list",ref:l},r.a.createElement(Ot.a,{keys:e.getListKeys(),rowRenderer:e.renderWorkspaceCard,ref:e.setListRef,scrollElement:t,onScroll:o,height:a,isScrolling:i,scrollTop:s}))})}},{key:"renderSearchAgainButton",value:function(){return r.a.createElement(Me.a,{enabled:["feature_zero_workspace_onboarding"]},r.a.createElement("div",{className:"display_flex justify_content_center margin_top_150"},r.a.createElement(xe.d,{type:"outline",onClick:this.onSearchAgainButtonClick},jt.t("Search Again"))))}},{key:"renderFooter",value:function(){var e=this.props.orgName,t=x()("p-grid_onboarding__footer","p-grid_onboarding__footer_link",{margin_top_250:!this.noWorkspacesToDisplay||!this.doRenderSearchAgainButton,margin_top_150:this.noWorkspacesToDisplay});return r.a.createElement(Me.a,{enabled:["feature_zero_workspace_onboarding"]},r.a.createElement(ie.a,{onClick:this.onFooterClick,className:t},jt.t("View all {orgName} workspaces",{orgName:e}),r.a.createElement(ne.a,{type:"chevron-right",key:"footer-chevron-icon",className:"p-grid_onboarding__footer_icon"})))}},{key:"renderInfiniteSpinner",value:function(){return r.a.createElement("div",{className:"p-grid_onboarding__spinner"},r.a.createElement(oe.a,{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderResults",value:function(){var e=this.state,t=e.loadingWorkspaces,n=e.selectedMember;return t&&this.memberHasNoWorkspaces||!n?this.renderInfiniteSpinner():r.a.createElement(r.a.Fragment,null,this.renderHeading(),this.renderSubheading(),!this.noWorkspacesToDisplay&&this.renderWorkspaceList(),t&&this.renderInfiniteSpinner(),this.doRenderSearchAgainButton&&this.renderSearchAgainButton(),!t&&this.renderFooter())}},{key:"render",value:function(){var e=this.state,t=e.totalWorkspaces,n=e.onWorkspaces,a=e.loadingWorkspaces,i=e.hasApiError;return this.userHasNoAccessToWorkspaces=wt({totalWorkspaces:t,onWorkspaces:n}),this.memberHasNoWorkspaces=St({totalWorkspaces:t,onWorkspaces:n}),this.noWorkspacesToDisplay=this.userHasNoAccessToWorkspaces||this.memberHasNoWorkspaces,this.doRenderSearchAgainButton=!a&&this.noWorkspacesToDisplay&&!i,r.a.createElement(Me.a,{enabled:["feature_zero_workspace_onboarding"]},r.a.createElement("div",{className:"p-grid_onboarding__results",id:"colleagueSearchResults"},this.renderSearchBar(),this.renderResults()))}}]),t}(a.Component);Tt.displayName="SearchResultsScreen",Tt.defaultProps=Ct;var Nt={enqueueToast:W.c,fetchDirectoryWorkspaces:X.f},Rt=(Object(L.b)(function(e,t){return{selectedMember:t.selectedMember,workspaces:t.workspaces,orgName:Object(U.e)(e),clogger:Object(J.a)({state:e}),featureZeroWorkspaceOnboarding:Object(s.i)(e,"feature_zero_workspace_onboarding"),featureSingleUserWorkspacePagination:Object(s.i)(e,"feature_single_user_workspace_pagination")}},Nt)(Tt),n("U3Q0")),At=(n("zzVd"),new Q.b("workspace_directory")),Pt=(i.b.shape({admins:i.b.arrayOf(i.b.shape({real_name:i.b.string})),can_leave:i.b.bool,cannot_leave_reasons:i.b.array,created:i.b.number,deleted:i.b.bool,description:i.b.string,discoverable:i.b.string,domain:i.b.string,enterprise_id:i.b.string,date_requested_join:i.b.oneOfType([i.b.string,i.b.number]),icon:i.b.object,id:i.b.string,is_member:i.b.bool,joined_date:i.b.number,name:i.b.string,user_counts:i.b.object}).isRequired,i.b.func,i.b.func,i.b.func,i.b.func,i.b.func,i.b.func,i.b.func,i.b.func,i.b.func,i.b.bool,i.b.bool,i.b.string,i.b.string,i.b.string,{callLeaveWorkspace:P.a,onClose:P.a,onActionResolve:P.a,onActionReject:P.a,fetchEnterpriseTeamById:P.a,onLeaveReject:P.a,onLeaveResolve:P.a,onDone:P.a,fetchTeam:P.a,isGuest:!1,displayDirectoryInModal:!1,channelRedirect:null,postLaunchAction:null,userIdFromURL:null}),Mt=function(e){function t(e){g()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={team:{},loading:!1},n.onKeyPress=n.onKeyPress.bind(n),n.onWorkspaceLeave=n.onWorkspaceLeave.bind(n),n.setLoading=n.setLoading.bind(n),n}return C()(t,e),O()(t,[{key:"componentDidMount",value:function(){var e=this.props.team;this.setWorkspace(e),this.fetchWorkspaceInfo()}},{key:"onWorkspaceLeave",value:function(e){var t=this.props,n=t.team,a=t.onLeaveReject,i=t.onLeaveResolve,o=t.onDone;return e.preventDefault(),this.props.callLeaveWorkspace({teamId:n.id}).then(function(){return i({workspace:m()({},n,{is_member:!1})})}).then(function(){return o()}).catch(function(e){return a({node:r.a.createElement("span",null,At.rt("Workspace couldn\u2019t be left. Please reload and try again.")),err:e})})}},{key:"onKeyPress",value:function(e,t){if(e.preventDefault(),"Enter"===e.key)switch(t){case"leave":return this.onWorkspaceLeave()}return null}},{key:"setWorkspace",value:function(e,t){this.setState(function(){return{team:e}},t)}},{key:"setLoading",value:function(e){this.setState(function(){return{loading:e}})}},{key:"getTitleAria",value:function(){var e=this.state.team.name,t=void 0===e?"":e;return t||"Workspace Name"}},{key:"canLeaveWorkspace",value:function(){var e=this.state.team,t=e.is_member,n=e.can_leave,a=this.props.isGuest;return t&&n&&!a}},{key:"fetchWorkspaceInfo",value:function(){var e=this,t=this.props.team.id;return this.setLoading(!0),this.props.fetchEnterpriseTeamById({teamId:t,additionalOptions:{include_admins:!0}}).then(function(t){e.setWorkspace(t,function(){return e.setLoading(!1)})})}},{key:"listifyAdminRealNames",value:function(e){var t=Object(Ue.a)(e,function(e){return Object(G.E)(e)});return Object(Q.h)(t,{noEscape:!0})}},{key:"renderDialogHeaderCaption",value:function(e){return this.state.loading?null:e?r.a.createElement("span",{className:"p-workspace_directory_dialog__caption"},r.a.createElement(ne.b,{size:"inherit",type:"exclamation-circle",align:"baseline",className:"margin_right_25"}),e):null}},{key:"renderButton",value:function(){var e=this.props,t=e.onActionReject,n=e.onActionResolve,a=this.state,i=a.team;if(a.loading)return null;var o=!(Object(q.a)()||Object($.a)()&&Object(ee.b)());return r.a.createElement(bt,{team:i,customClasses:"margin_top_100",buttonContext:"dialog",featureZeroWorkspaceOnboarding:!0,onActionReject:t,onActionResolve:n,anchorPage:"workspace_directory",tabIndex:"0",size:"medium",doLaunchInNewTab:o,channelRedirect:this.props.channelRedirect,postLaunchAction:this.props.postLaunchAction,userIdFromURL:this.props.userIdFromURL,doUpsertJoin:!0})}},{key:"renderDialogHeader",value:function(e){var t=this.state.team,n=t.name,a=void 0===n?"":n,i=t.domain,o=void 0===i?"":i,s=x()("p-workspace_directory_dialog__header",{"p-workspace_directory_dialog__header--mobile":Object(Ge.c)()});return r.a.createElement("div",{className:s},r.a.createElement(me,{entityType:"workspace",dimension:100,entityData:t,featureReactMessages:!0,featureReactMemberProfileCard:!0}),r.a.createElement("div",{className:"p-workspace_directory_dialog__name"},At.t("{name}",{name:Object(Q.n)(a)})),r.a.createElement("div",{className:"p-workspace_directory_dialog__domain"},At.t("{domain}.slack.com",{domain:o})),this.renderDialogHeaderCaption(e),this.renderButton())}},{key:"renderInfiniteSpinner",value:function(){return r.a.createElement("div",{className:"overflow_hidden margin_100"},r.a.createElement(oe.a,{size:"jumbo",className:"inline_block full_width"}))}},{key:"renderDialogBody",value:function(){if(this.state.loading)return this.renderInfiniteSpinner();var e=this.state.team,t=e.description,n=e.admins,a=e.user_counts,i=[];t&&i.push({heading:At.t("About"),text:t,key:"dialog-description"}),i.push({heading:At.t("Active members"),text:At.t("{activeMembers}",{activeMembers:Object(Q.l)(Object(S.a)(a,"active_members",0))}),key:"dialog-active-members"},{heading:At.t("Workspace admins"),text:this.listifyAdminRealNames(n),key:"dialog-admins"});return r.a.createElement("div",{className:"p-workspace_directory_dialog__body"},i.map(function(e){return t=e,r.a.createElement("div",{key:t.key},r.a.createElement("p",{className:"margin_bottom_25 bold"},t.heading),r.a.createElement("p",null,t.text));var t}))}},{key:"renderDialogFooter",value:function(){var e=this;return r.a.createElement("span",{className:"p-workspace_directory_dialog__leave",role:"button",tabIndex:"0",onClick:this.onWorkspaceLeave,onKeyPress:function(t){return e.onKeyPress(t,"leave")}},At.t("Leave this workspace"))}},{key:"renderDialogOnMobile",value:function(e){var t=this.canLeaveWorkspace();return r.a.createElement(be.a,{showCancelButton:!1,showCloseButton:!1,showGoButton:!1,position:"fixed",modalBodyClasses:"p-workspace_directory_dialog--mobile"},this.renderDialogHeader(e),r.a.createElement("div",{className:"p-workspace_directory_dialog__contents--mobile"},this.renderDialogBody(),t&&this.renderDialogFooter()))}},{key:"render",value:function(){var e=this.state.team,t=Object(Ge.f)(e,{context:"dialog"});if(Object(Ge.c)())return this.renderDialogOnMobile(t);var n=this.props.displayDirectoryInModal,a={contentLabel:t,className:x()("p-workspace_directory_dialog",{"p-workspace_directory_dialog--focus_ring":!n}),showCloseButton:!0,showCancelButton:!1,showGoButton:!1,showHeader:!0,title:this.renderDialogHeader(t),titleAria:this.getTitleAria(),useSlackScrollbar:!1,showFooter:!1,shouldCloseOnOverlayClick:!0,invertCloseButton:!0};return this.canLeaveWorkspace()&&(a=m()({},a,{showFooter:!0,footerText:this.renderDialogFooter()})),r.a.createElement(Rt.a,a,this.renderDialogBody())}}]),t}(a.Component);Mt.displayName="WorkspaceDirectoryDialog",Mt.defaultProps=Pt;var Dt={callLeaveWorkspace:X.c,fetchEnterpriseTeamById:X.g},xt=Object(L.b)(null,Dt)(Mt),Lt=n("XhtD"),Ft=(n("+BnW"),i.b.array.isRequired,i.b.any,i.b.func,i.b.func,i.b.number,{scrollElement:window,onScroll:P.a,renderWorkspaceCard:P.a,topOffset:0}),Bt=function(e){function t(e){g()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(F.a)(n,["onScroll","onResize","setListRef","getListKeys","renderRow","renderCell"]),n.state={columns:3},n.list=null,n.keys=[],n.rowsByIndex=[],n.currentRow=0,n}return C()(t,e),O()(t,null,[{key:"getUpdatedRowIndex",value:function(e){var t=e.currentRow,n=void 0===t?0:t,a=e.prevColumns,r=void 0===a?0:a,i=e.updatedColumns,o=void 0===i?0:i;if(!n)return 0;if(r===o)return n;var s=n*r;return Math.floor(s/o)}}]),O()(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize),this.calculateColumns()}},{key:"componentDidUpdate",value:function(e,n){if(this.state.columns!==n.columns){var a=t.getUpdatedRowIndex({currentRow:this.currentRow,prevColumns:n.columns,updatedColumns:this.state.columns});this.currentRow=a;var r=this.getKeyForRow(a);this.keys.length&&this.list.scrollToKey(r)}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onScroll",value:function(e){return this.props.onScroll(e)}},{key:"onResize",value:function(){var e=this.list.getVisibleRange().start;this.currentRow=e||0,this.calculateColumns()}},{key:"getListKeys",value:function(){return this.keys}},{key:"getContentHeight",value:function(){return this.list.getContentHeight()}},{key:"getKeyForRow",value:function(e){return this.keys[e]}},{key:"setListRef",value:function(e){this.list=e}},{key:"setColumns",value:function(e){this.setState(function(){return{columns:e}})}},{key:"getWorkspacesByRowIndex",value:function(e){var t=this.state.columns,n=this.props.workspaces,a=this.rowsByIndex[e],r=Math.min(a+t,n.length);return Object(Lt.a)(a,r)}},{key:"calculateColumns",value:function(){var e=window.innerWidth,t=3;t=Object(Ge.c)(e)?1:Object(Ge.d)(e)?2:3,this.state.columns!==t&&this.setColumns(t)}},{key:"renderCell",value:function(e){var t=this.props,n=t.workspaces,a=t.renderWorkspaceCard,i=n[e];return i?r.a.createElement("div",{className:"p-workspace_grid_list__cell",key:"grid_list_cell_"+e},a(i)):null}},{key:"renderRow",value:function(e){var t=this,n=this.getWorkspacesByRowIndex(e),a=x()("p-workspace_grid_list__row",{"p-workspace_grid_list__row--one_column":1===this.state.columns});return r.a.createElement("div",{className:a},n.map(function(e){return t.renderCell(e)}))}},{key:"render",value:function(){var e=this.props,t=(e.topOffset,e.scrollElement,u()(e,["topOffset","scrollElement"]));return this.rowsByIndex=Object(Lt.a)(0,this.props.workspaces.length,this.state.columns),this.keys=this.rowsByIndex.map(function(e){return e.toString()}),r.a.createElement(Ot.a,m()({keys:this.getListKeys(),rowRenderer:this.renderRow,ref:this.setListRef,scrollElement:this.props.scrollElement,onScroll:this.onScroll,topOffset:this.props.topOffset},t))}}]),t}(a.PureComponent);Bt.displayName="WorkspaceGridList",Bt.defaultProps=Ft;var qt=Bt,Ut=n("um7Q"),Ht=n("MREy"),Gt=n("lwWk"),Wt=(n("wb76"),i.b.string,i.b.string,i.b.object,i.b.string,i.b.object,i.b.bool,i.b.func,i.b.string,i.b.string,i.b.func,{logoLink:null,logoAriaLabel:null,logoLinkProps:{},title:null,team:{},isEnterprise:null,renderRightContents:P.a,rightClassName:null,renderCenterContents:P.a,centerClassName:null}),Kt=function(e){function t(){return g()(this,t),y()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C()(t,e),O()(t,[{key:"renderRightContents",value:function(){var e=this.props,t=e.rightClassName,n=e.renderRightContents,a=x()("p-navigation_bar__right",t);return r.a.createElement("div",{className:a},n())}},{key:"renderCenterContents",value:function(){var e=this.props,t=e.centerClassName,n=e.renderCenterContents,a=x()("p-navigation_bar__center",t);return r.a.createElement("div",{className:a},n())}},{key:"renderTitle",value:function(){var e=this.props,t=e.title,n=e.team,a=e.isEnterprise;return r.a.createElement("div",{className:"p-navigation_bar__heading"},r.a.createElement(me,{entityType:a?"org":"workspace",dimension:28,entityData:n,customClasses:"flex_none",featureReactMessages:!0}),r.a.createElement("span",{className:"p-navigation_bar__title nudge_bottom_1"},t))}},{key:"renderLogo",value:function(){var e=this.props,t=e.logoLink,n=e.logoAriaLabel,a=e.logoLinkProps,i=r.a.createElement("div",{className:"p-navigation_bar__logo","data-qa":"nav_bar_logo",alt:"Slack"});return t?r.a.createElement(Gt.a,m()({href:t,"aria-label":n,className:"flex_none"},a),i):i}},{key:"render",value:function(){var e=this.props.title;return r.a.createElement("nav",{className:"p-navigation_bar"},r.a.createElement("div",{className:"p-navigation_bar__left"},this.renderLogo(),e&&this.renderTitle()),this.renderCenterContents(),this.renderRightContents())}}]),t}(a.Component);Kt.displayName="NavigationBar",Kt.defaultProps=Wt;var Vt=Kt,zt=(n("ABxf"),new Q.b("workspace_directory")),Yt=(i.b.shape({icon:i.b.object,id:i.b.string,name:i.b.string}).isRequired,i.b.shape({id:i.b.string,is_admin:i.b.bool,is_owner:i.b.bool,is_primary_owner:i.b.bool,profile:i.b.object}).isRequired,i.b.bool,i.b.bool,i.b.bool,i.b.string.isRequired,i.b.string,i.b.string,i.b.object,i.b.func,i.b.func,{isMobileView:!1,displayManageOrgButton:!1,displaySearchBar:!1,prefCompliantMemberName:"",organizationUrl:"",selectedSearchOption:{},onOptionSelected:P.a,onClearHeaderInput:P.a}),Qt=function(e){function t(e){g()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(F.a)(n,["maybeRenderSearchBar","onSelectOption","onMenuItemSelected","renderUserMenu","renderUserSettings"]),n}return C()(t,e),O()(t,[{key:"onSelectOption",value:function(e){this.props.onOptionSelected(e)}},{key:"onMenuItemSelected",value:function(e){var t=this.props.signoutUrl,n=window.location.origin+"/account/settings";switch(e){case"settings":window.open(n,"_self");break;case"signout":window.open(t,"_self")}return null}},{key:"maybeRenderManageOrganizationButton",value:function(){if(!this.props.displayManageOrgButton)return null;var e=zt.t("Manage Organization",{fallbackHash:"35677e6e3c1751d4a193cc6db0f31a75016c019f"});return r.a.createElement(xe.d,{"data-qa":"ws_directory_manage_org_button",className:"p-workspace_directory_header__manage_org no_underline nudge_bottom_1",type:"outline",href:"/manage",target:"_blank",tabIndex:"0"},e)}},{key:"maybeRenderSearchBar",value:function(){var e=this.props.selectedSearchOption;return!this.props.displaySearchBar||this.props.isMobileView?null:r.a.createElement("div",{className:"p-workspace_directory_header__search","data-qa":"ws_directory_search_bar"},r.a.createElement(lt,{prepopulatedOption:e,featureZeroWorkspaceOnboarding:!0,membersOnly:!1,containerIdSelector:"directory_mount_point",triggerAction:this.onSelectOption,onClearInput:this.props.onClearHeaderInput}))}},{key:"renderUserSettings",value:function(){return r.a.createElement("div",{className:"p-workspace_directory_header__settings"},this.maybeRenderManageOrganizationButton(),this.renderAvatar())}},{key:"renderUserMenu",value:function(e){var t=this,n=this.props,a=n.prefCompliantMemberName,i=n.enterprise,o=n.signoutUrl;return r.a.createElement(Ht.f,m()({},e,{menuClassNames:"p-workspace_directory_header__menu","data-qa":"ws_directory_user_menu"}),r.a.createElement(Ht.b,{key:"workspace_directory_user_menu_name",label:r.a.createElement("span",{className:"black"},a),description:zt.t("Account settings",{fallbackHash:"e32707613d1f53b92e6162cc5ddb4a9bb58a2ec6"}),href:"/account/settings",onSelected:function(){return t.onMenuItemSelected("settings")},className:"no_underline"}),r.a.createElement(Ht.d,null),r.a.createElement(Ht.b,{key:"workspace_directory_user_menu_sign_out",label:zt.t("Sign out of {orgName}",{orgName:Object(Q.n)(i.name)}),href:o,onSelected:function(){return t.onMenuItemSelected("signout")},className:"no_underline",danger:!0}))}},{key:"renderAvatar",value:function(){var e=this.props.user;return r.a.createElement(Ht.e,{"data-qa":"ws_directory_user_menu_trigger",renderMenu:this.renderUserMenu,position:"bottom-right",offsetX:0,offsetY:7.5},r.a.createElement(xe.c,{"aria-haspopup":!0,className:"p-workspace_directory_header__user_icon",tabIndex:"0"},r.a.createElement(me,{entityType:"member",dimension:36,entityData:e,customClasses:"flex_none cursor_pointer",featureReactMessages:!0})))}},{key:"render",value:function(){var e=this.props,t=e.enterprise,n=e.isMobileView,a=e.organizationUrl,i=n?zt.t("Directory"):zt.t("Workspace Directory");return r.a.createElement(Vt,{"data-qa":"ws_directory_header",title:i,team:t,isEnterprise:!0,logoAriaLabel:"Slack",logoLink:a,renderRightContents:this.renderUserSettings,renderCenterContents:this.maybeRenderSearchBar})}}]),t}(a.Component);Qt.displayName="WorkspaceDirectoryHeader",Qt.defaultProps=Yt;var Jt=Object(L.b)(function(e,t){var n=t.user,a=t.enterprise,r=void 0===a?{}:a;return{signoutUrl:Object(s.d)(e,"signout_url"),prefCompliantMemberName:Object(G.P)(e,n),organizationUrl:Object(Ut.a)(e,r.domain)}})(Qt),Xt=(n("YL49"),i.b.node,i.b.node,i.b.bool,i.b.func,i.b.string,i.b.bool,{title:"",description:"",showCloseButton:!1,onClose:P.a,className:"",isHidden:!0}),Zt=function(e){function t(e){g()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClose=n.onClose.bind(n),n.onKeyPress=n.onKeyPress.bind(n),n}return C()(t,e),O()(t,[{key:"onClose",value:function(e){this.props.onClose(e)}},{key:"onKeyPress",value:function(e){return e.preventDefault(),13===e.which?this.props.onClose(e):null}},{key:"renderCloseButton",value:function(){var e=this.props.isHidden;return r.a.createElement(xe.c,{tabIndex:e?-1:0,className:"p-workspace_directory_banner__close_btn",onClick:this.onClose,onKeyPress:this.onKeyPress},r.a.createElement(ne.b,{type:"times"}))}},{key:"renderBannerText",value:function(){var e=this.props,t=e.title,n=e.description;return r.a.createElement("div",{className:"p-workspace_directory_banner__text"},r.a.createElement("div",{className:"p-workspace_directory_banner__title"},t),r.a.createElement("span",{className:"p-workspace_directory_banner__description"},n))}},{key:"render",value:function(){var e=this.props,t=e.showCloseButton,n=e.className,a=x()("p-workspace_directory_banner",n);return r.a.createElement("div",{className:a},this.renderBannerText(),t&&this.renderCloseButton())}}]),t}(a.PureComponent);Zt.displayName="WorkspaceDirectoryBanner",Zt.defaultProps=Xt;var $t=Zt,en=(n("oE+f"),new Q.b("workspace_directory")),tn=(i.b.shape({id:i.b.string,name:i.b.string,domain:i.b.string,icon:i.b.object,locale:i.b.string}).isRequired,i.b.shape({id:i.b.string,name:i.b.string,is_admin:i.b.bool,is_owner:i.b.bool,profile:i.b.object}),i.b.func.isRequired,i.b.func.isRequired,i.b.func,i.b.func.isRequired,i.b.func,i.b.func,i.b.bool,i.b.func,i.b.string,i.b.bool,i.b.func,i.b.bool,i.b.object,i.b.func,i.b.object.isRequired,i.b.bool,{user:{},enqueueToast:P.a,openModal:P.a,closeModal:P.a,allowWorkspaceRequest:!1,showRequestDialog:P.a,launchTeamId:null,displayDirectoryInModal:!0,onClose:P.a,hasSeenOnboardingBanner:!1,queryString:null,setUserPrefByApi:P.a,featureModernRequestWorkspaceDialog:!1}),nn=Object(K.b)(),an=function(e){function t(e){g()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isMobileView:!1,hasScrolledPastHeaderPane:!1,allWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:!1,topOffset:0},yourWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:!1,topOffset:0},searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:!1,topOffset:0},dialogWorkspaceDetail:null,selectedOption:null,hideOnboardingBanner:!0,viewingHiddenWorkspace:!1},n.dialog=null,n.headerPaneHeight=null,n.clientHeight=null,n.page=null,n.pageSearch=null,n.listRefs={allWorkspaces:null,yourWorkspaces:null},n.windowScroller=null,n.onboardingBannerHeight=0,n.trackingCode="",Object(F.a)(n,["setPageRef","setPageSearchRef","setHeaderPaneRef","setOnboardingBannerRef","onScroll","onWindowScrollerScroll","onFullscreenModalClose","onResize","openWorkspaceRequestForm","openDialog","closeDialog","onOnboardingBannerDismiss","onWorkspaceLeave","onActionResolve","onActionReject","onSelectOption","onClearHeaderInput","setToastText","setListRef","setWindowScrollerRef","renderWorkspaceCard","fetchSingleMemberToPrepopulate"]),n}return C()(t,e),O()(t,null,[{key:"sortListByWorkspaceName",value:function(e){return Object(T.a)(e,function(e){return e.name})}}]),O()(t,[{key:"componentDidMount",value:function(){this.setIsMobileView(Object(Ge.c)()),window.addEventListener("resize",this.onResize),this.clientHeight=window.innerHeight,this.setLoadingWorkspaces("allWorkspaces",!0),this.setLoadingWorkspaces("yourWorkspaces",!0),this.props.launchTeamId&&(this.trackingCode="workspace_url",this.fetchTeam(this.props.launchTeamId));var e=this.props.hasSeenOnboardingBanner;this.setHideOnboardingBanner(e),Object(Ge.k)({trackingCode:this.trackingCode,clogger:this.props.clogger});var t=this.props.queryString&&Object(S.a)(this.props.queryString,"user",null);t&&this.fetchSingleMemberToPrepopulate(t)}},{key:"componentDidUpdate",value:function(e,t){this.headerPane&&(this.headerPaneHeight=this.headerPane.clientHeight);var n=this.getListHeight("yourWorkspaces");n!==this.state.allWorkspaces.topOffset&&this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:n}),this.props.hasSeenOnboardingBanner||!this.onboardingBanner||this.onboardingBannerHeight||(this.onboardingBannerHeight=Object(M.findDOMNode)(this.onboardingBanner).clientHeight),!t.hideOnboardingBanner&&this.state.hideOnboardingBanner&&this.windowScroller.updatePosition(),t.selectedOption!==this.state.selectedOption&&this.fetchSearchResults(),this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function(){this.clientHeight=window.innerHeight,this.setIsMobileView(Object(Ge.c)());var e=this.getListHeight("yourWorkspaces");this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:e})}},{key:"onScroll",value:function(e){var t=e.currentTarget.scrollTop>=this.headerPaneHeight;t&&this.pageSearch.getWrappedInstance().blur(),t!==this.state.hasScrolledPastHeaderPane&&this.setHasScrolledPastHeaderPane(t)}},{key:"onWindowScrollerScroll",value:function(e){var t=e.scrollTop;this.doInfiniteScrollHandler({scrollTop:t})}},{key:"onFullscreenModalClose",value:function(){this.dialog&&this.dialog.close(),this.props.onClose&&this.props.onClose()}},{key:"onSearchAgainButtonClick",value:function(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().onSearchAgainTriggered()}},{key:"onOnboardingBannerDismiss",value:function(){this.setHideOnboardingBanner(!0),this.props.setUserPrefByApi({pref:"seen_onboarding_banner",value:!0}).catch(function(e){return nn.error("Error setting seen_onboarding_banner user pref",e)})}},{key:"onActionReject",value:function(e){var t=e.node,n=e.err;t&&this.setToastText(t),nn.error("Error with Workspace Action in WorkspaceDirectory - ",n)}},{key:"onActionResolve",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.node,n=e.workspace;if(n)if(n.member){if(this.onWorkspaceJoin({workspace:n}),this.props.displayDirectoryInModal)return this.onFullscreenModalClose()}else n.date_requested_join&&this.onWorkspaceRequested({workspace:n});return t&&this.setToastText(t),this.closeDialog()}},{key:"onWorkspaceRequested",value:function(e){var t=e.workspace;t&&this.setState(function(e){var n=[].concat(f()(e.allWorkspaces.workspaces)),a=Object(E.a)(n,function(e){return e.id===t.id});return a<0?null:(n[a]=t,{allWorkspaces:m()({},e.allWorkspaces,{workspaces:n})})})}},{key:"onWorkspaceJoin",value:function(e){var n=this,a=e.workspace;this.setState(function(e){var r=n.maybeUpsertWorkspaceToSearchResults(e,a),i=e.yourWorkspaces.workspaces,o=Object(I.a)([a],i,"id"),s=e.yourWorkspaces.totalWorkspaces+1;return{yourWorkspaces:m()({},e.yourWorkspaces,{workspaces:t.sortListByWorkspaceName(o),totalWorkspaces:s}),searchResults:m()({},e.searchResults,{workspaces:t.sortListByWorkspaceName(r)})}})}},{key:"onWorkspaceLeave",value:function(e){var n=this,a=e.workspace;this.setState(function(e){var r=n.maybeUpsertWorkspaceToSearchResults(e,a),i=e.yourWorkspaces.workspaces,o=Object(R.a)(i,function(e){return e.id!==a.id}),s=e.yourWorkspaces.totalWorkspaces-1,l=e.allWorkspaces.workspaces,c=Object(I.a)([a],l,"id");return{yourWorkspaces:m()({},e.yourWorkspaces,{workspaces:o,totalWorkspaces:s}),allWorkspaces:m()({},e.allWorkspaces,{workspaces:t.sortListByWorkspaceName(c)}),searchResults:m()({},e.searchResults,{workspaces:t.sortListByWorkspaceName(r)})}},function(){n.closeDialog()})}},{key:"onSelectOption",value:function(e){this.setSearchResultsOptions(e)}},{key:"onClearHeaderInput",value:function(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().clearInput()}},{key:"getListHeight",value:function(e){return this.listRefs[e]?this.listRefs[e].getContentHeight():0}},{key:"setPageRef",value:function(e){this.page=e}},{key:"setPageSearchRef",value:function(e){this.pageSearch=e}},{key:"setHeaderPaneRef",value:function(e){this.headerPane=e}},{key:"setOnboardingBannerRef",value:function(e){this.onboardingBanner=e}},{key:"setListRef",value:function(e){var t=e.workspaceListKey,n=e.ref;this.listRefs[t]=n}},{key:"setWindowScrollerRef",value:function(e){this.windowScroller=e}},{key:"setListTopOffset",value:function(e){var t=e.workspaceListKey,n=e.topOffset;this.setState(function(e){return p()({},t,m()({},e[t],{topOffset:n}))})}},{key:"setSearchResultsOptions",value:function(e){this.setState(function(){return{searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:!1,topOffset:0},selectedOption:e}})}},{key:"setIsMobileView",value:function(e){this.setState(function(){return{isMobileView:e}})}},{key:"setViewingHiddenWorkspace",value:function(e){this.setState(function(){return{viewingHiddenWorkspace:e}})}},{key:"setHasScrolledPastHeaderPane",value:function(e){this.setState(function(){return{hasScrolledPastHeaderPane:e}})}},{key:"setHasApiError",value:function(e,t){this.setState(function(n){return p()({},e,m()({},n[e],{hasApiError:t}))})}},{key:"setLoadingWorkspaces",value:function(e,t){this.setState(function(n){return p()({},e,m()({},n[e],{loadingWorkspaces:t}))})}},{key:"setDialogWorkspaceDetail",value:function(e,t){this.setState(function(){return{dialogWorkspaceDetail:e}},t)}},{key:"setWorkspaceFetchOptions",value:function(e,t){var n=t.workspaces,a=void 0===n?[]:n,r=t.totalWorkspaces,i=void 0===r?0:r,o=t.onWorkspaces,s=void 0!==o&&o,l=t.nextCursorMark,c=void 0===l?null:l;this.setState(function(t){return p()({},e,m()({},t[e],{workspaces:a,totalWorkspaces:i,onWorkspaces:s,nextCursorMark:c}))})}},{key:"setHideOnboardingBanner",value:function(e){this.setState(function(){return{hideOnboardingBanner:e}})}},{key:"setToastText",value:function(e){this.props.enqueueToast({element:r.a.createElement(ae.b,{position:"bottom-right",offsetY:50},e)})}},{key:"getWorkspaceListTopOffset",value:function(e){return this.state[e]?this.state[e].topOffset:0}},{key:"getListHeading",value:function(e){var t=this.state.selectedOption;if("allWorkspaces"===e){var n=this.state.allWorkspaces.totalWorkspaces,a=this.state.yourWorkspaces.totalWorkspaces;return en.t("Browse {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{numWorkspaces:Math.max(n-a,0)})}if("yourWorkspaces"===e)return en.t("Your Workspaces");if("searchResults"===e){var i=this.state.searchResults,o=i.loadingWorkspaces,s=i.totalWorkspaces,l=Object(S.a)(t,"selectedOptionData");if(o)return null;if("member"===Object(S.a)(t,"type")){var c=Object(G.E)(l),u=en.t("{memberName} is in {workspaceCount, plural, =1 {# workspace} other {# workspaces}}",{memberName:c,workspaceCount:s});return r.a.createElement(r.a.Fragment,null,r.a.createElement(me,{entityType:"member",dimension:28,entityData:l,customClasses:"margin_right_75",featureReactMessages:!0,featureReactMemberProfileCard:!1}),u)}if("workspace"===Object(S.a)(t,"type")&&0===s)return en.t("No workspaces found matching \u201c{searchQuery}\u201d",{searchQuery:"SEARCH QUERY"});if((!Object(S.a)(t,"type")||l.id===Ge.b)&&s>0)return en.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{searchQuery}\u201d",{workspaceCount:s,searchQuery:Object(S.a)(l,"displayValue")});if("workspace"===Object(S.a)(t,"type")&&s>0)return en.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{workspaceName}\u201d",{workspaceCount:s,workspaceName:Object(S.a)(t,"selectedOptionData.name")})}return""}},{key:"getWorkspacesForList",value:function(e){if("allWorkspaces"===e){var t=this.state.allWorkspaces.workspaces,n=this.state.yourWorkspaces.workspaces;return Object(N.a)(t,n,"id")}return"yourWorkspaces"===e?this.state.yourWorkspaces.workspaces:"searchResults"===e?this.state.searchResults.workspaces:[]}},{key:"maybeUpsertWorkspaceToSearchResults",value:function(e,t){var n=Object(S.a)(e.searchResults,"workspaces",[]);return Object(w.a)(n,function(e){return t.id===e.id})?Object(I.a)([t],n,"id"):n}},{key:"openWorkspaceRequestForm",value:function(){var e=this,t=this.props,n=t.showRequestDialog,a=t.featureModernRequestWorkspaceDialog,i=t.openModal;a?i({element:r.a.createElement(Ae,null),isStackable:!0}):n({displayModernToast:function(t){var n=t.type,a=t.errorType,i=t.teamName,o=Object(Ge.g)({type:n,errorType:a,teamName:i});e.setToastText(r.a.createElement("div",{className:"display_flex"},"success"===n&&r.a.createElement(ne.b,{type:"check-circle-o",className:"margin_right_50 sk_seafoam_green"}),r.a.createElement("span",null,o)))}})}},{key:"maybeFetchNextPage",value:function(e){!e.allWorkspaces.loadingWorkspaces&&this.state.allWorkspaces.loadingWorkspaces&&this.fetchWorkspaces(),!e.yourWorkspaces.loadingWorkspaces&&this.state.yourWorkspaces.loadingWorkspaces&&this.fetchWorkspacesWithArgs({id:this.props.user.id,type:"single_user"})}},{key:"fetchSearchResults",value:function(){var e=this.state.selectedOption,t=e.selectedOptionData,n=e.type,a={};t&&(this.setLoadingWorkspaces("searchResults",!0),Object(S.a)(t,"id")===Ge.b?a.searchTerm=t.displayValue:(a.id=t.id,a.type="member"===n?"single_user":"single_workspace"),Object(Ge.j)({searchType:n,clogger:this.props.clogger}),this.fetchWorkspacesWithArgs(a))}},{key:"fetchSingleMemberToPrepopulate",value:function(e){var t=this;this.props.fetchRawMembersFromAPI({ids:[e]}).then(function(e){var n={selectedOption:{selectedOptionData:e.members[0],type:"member"}};t.setState(n)})}},{key:"openDialog",value:function(e){var t=this,n=e.team;this.props.displayDirectoryInModal||window.history.replaceState({},"","/workspace/"+n.id),Object(Ge.l)({teamId:n.id,trackingCode:this.trackingCode,clogger:this.props.clogger}),this.setDialogWorkspaceDetail(n,function(){t.dialog=t.props.openModal({element:t.renderDialog(),isStackable:!0,name:"find-more-workspaces-info"})})}},{key:"closeDialog",value:function(){this.props.displayDirectoryInModal||window.history.replaceState({},"","/")}},{key:"fetchWorkspacesWithArgs",value:function(e){var t=e.type,n=e.id,a=e.searchTerm,r=this.props.user.id,i=this.state.selectedOption,o=Object(A.a)(i),s=n===r&&o?"yourWorkspaces":"searchResults";return this.fetchWorkspaces({workspaceListKey:s,additionalOptions:{type:t,id:n,searchTerm:a}})}},{key:"fetchTeam",value:function(e){var t=this;return this.props.fetchEnterpriseTeamById({teamId:e}).then(function(e){t.setSearchResultsOptions({selectedOptionData:e,type:"workspace"}),t.openDialog({team:e})}).catch(function(e){t.setViewingHiddenWorkspace(!0),nn.error("Error fetching workspace detail for launch_team_id -",e)})}},{key:"fetchWorkspaces",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.additionalOptions,a=t.workspaceListKey,r=void 0===a?"allWorkspaces":a,i=this.state[r].nextCursorMark;return this.setHasApiError(r,!1),this.props.fetchDirectoryWorkspaces(m()({nextCursorMark:i},n)).then(function(t){var n=t.num_found,a=t.on_workspaces,o=t.items;i&&(o=Object(I.a)(e.state[r].workspaces,o,"id")),e.setWorkspaceFetchOptions(r,{workspaces:o,totalWorkspaces:n,onWorkspaces:a,nextCursorMark:t.next_cursor_mark}),e.setLoadingWorkspaces(r,!1)}).catch(function(t){e.setHasApiError(r,!0),e.setLoadingWorkspaces(r,!1),nn.error("WorkspaceDirectory: Error in FetchWorkspaces -",t)})}},{key:"hasFetchedAllWorkspaces",value:function(e){return this.state[e].workspaces.length>=this.state[e].totalWorkspaces}},{key:"hasScrolledWithinScrollThreshold",value:function(e){return e.scrollHeight-(e.scrollTop+this.clientHeight)<300}},{key:"doInfiniteScrollHandler",value:function(e){var t=e.scrollTop,n=this.hasFetchedAllWorkspaces("yourWorkspaces")?"allWorkspaces":"yourWorkspaces",a=this.getListHeight("yourWorkspaces");"allWorkspaces"===n&&(a+=this.getListHeight("allWorkspaces"));var r=this.hasScrolledWithinScrollThreshold({scrollTop:t,scrollHeight:a});r&&!this.hasFetchedAllWorkspaces(n)?this.setLoadingWorkspaces(n,!0):!r&&this.hasFetchedAllWorkspaces(n)&&this.setLoadingWorkspaces(n,!1)}},{key:"renderDialog",value:function(){var e=this.state,t=e.dialogWorkspaceDetail,n=e.displayDirectoryInModal,a=this.props.user,i=Object(S.a)(this.props.queryString,"channel",null),o=Object(S.a)(this.props.queryString,"action",null),s=Object(S.a)(this.props.queryString,"user",null),l=Object(G.ob)(a);return r.a.createElement(xt,{team:t,displayDirectoryInModal:n,onClose:this.closeDialog,featureZeroWorkspaceOnboarding:!0,onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,onLeaveResolve:this.onWorkspaceLeave,onLeaveReject:this.onActionReject,isGuest:l,channelRedirect:i,postLaunchAction:o,userIdFromURL:s})}},{key:"renderInfiniteSpinner",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).renderFullPage,t=x()("p-workspace_directory__spinner",{"p-workspace_directory__spinner--fs":!!e});return r.a.createElement("div",{className:t},r.a.createElement(oe.a,{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderWorkspaceCard",value:function(e){if(Object(A.a)(e))return null;var t=!(Object(q.a)()||Object($.a)()&&Object(ee.b)());return r.a.createElement(kt,{team:e,key:e.id,size:"small",onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,openDialog:this.openDialog,anchorPage:"workspace_directory",doLaunchInNewTab:t,doUpsertJoin:!0})}},{key:"renderTitle",value:function(){var e=this.props.enterprise.name;return r.a.createElement("div",{className:"p-workspace_directory__title"},en.t("Workspaces at {name}",{name:Object(Q.n)(e)}))}},{key:"renderWorkspaceSearchInput",value:function(){var e=this.state.selectedOption;return r.a.createElement("div",{className:"p-workspace_directory__search"},r.a.createElement(lt,{containerIdSelector:"workspace_directory",ref:this.setPageSearchRef,membersOnly:!1,triggerAction:this.onSelectOption,prepopulatedOption:Object(S.a)(e,"selectedOptionData")}))}},{key:"renderWorkspaceDirectoryHeaderPane",value:function(){var e=this.props,t=e.displayDirectoryInModal,n=e.user,a=x()("p-workspace_directory__header_pane",{margin_top_75:t});return r.a.createElement("div",{className:a,"data-js":"workspace_directory_header_pane",ref:this.setHeaderPaneRef},!t&&this.renderTitle(),!Object(G.ob)(n)&&this.renderWorkspaceSearchInput())}},{key:"renderListHeading",value:function(e){return r.a.createElement("p",{className:"p-workspace_directory__list_title"},e)}},{key:"renderYourWorkspaces",value:function(e){return this.renderList({listProps:e,workspaceListKey:"yourWorkspaces"})}},{key:"renderAllWorkspaces",value:function(e){return this.renderList({listProps:e,workspaceListKey:"allWorkspaces"})}},{key:"renderSearchResults",value:function(e){return this.renderList({listProps:e,workspaceListKey:"searchResults"})}},{key:"renderList",value:function(e){var t=this,n=e.listProps,a=e.workspaceListKey,i=this.getWorkspacesForList(a),o=this.state[a].loadingWorkspaces;if("searchResults"===a&&Object(A.a)(i)&&!o)return this.renderSearchEmptyState();if(Object(A.a)(i)&&!o)return null;var s=this.getWorkspaceListTopOffset(a),l=this.getListHeading(a);return r.a.createElement(r.a.Fragment,null,this.renderListHeading(l),r.a.createElement("div",{className:"p-workspace_directory__list"},r.a.createElement(qt,m()({scrollElement:this.page,workspaces:i,renderWorkspaceCard:this.renderWorkspaceCard,topOffset:s,ref:function(e){return t.setListRef({workspaceListKey:a,ref:e})}},n))),o&&this.renderInfiniteSpinner())}},{key:"renderSearchEmptyState",value:function(){var e=this,t=this.state,n=t.searchResults,a=t.selectedOption,i=Object(S.a)(a,"selectedOptionData"),o=void 0,s=void 0;if(Object(Ge.h)(i)){var l=Object(S.a)(n,"totalWorkspaces"),c=Object(S.a)(n,"onWorkspaces"),u=Object(G.E)(i);return St({totalWorkspaces:l,onWorkspaces:c})&&!wt({totalWorkspaces:l,onWorkspaces:c})&&(o=en.t("{memberName} hasn\u2019t joined any workspaces",{memberName:u}),s=en.rt("Try <a>searching for someone else</a> on your team, or for a specific workspace",null,function(t){var n=t.text,a=t.key;return"a"===t.tag?r.a.createElement(ie.a,{onClick:function(){return e.onSearchAgainButtonClick()},key:a},n):{text:n}})),wt({totalWorkspaces:l,onWorkspaces:c})&&(o=en.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:u}),s=en.rt("Get in touch with {memberName} to be invited to a workspace they\u2019re in, or try <a>searching for someone else</a> on your team.",{memberName:u},function(t){var n=t.text,a=t.key;return"a"===t.tag?r.a.createElement(ie.a,{onClick:function(){return e.onSearchAgainButtonClick()},key:a},n):{text:n}})),r.a.createElement("div",{className:"align_center"},r.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},r.a.createElement(me,{entityType:"member",dimension:28,entityData:i,customClasses:"margin_right_75",featureReactMessages:!0,featureReactMemberProfileCard:!1}),o),r.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},s))}return o=en.t("No workspaces found matching \u201c{searchTerm}\u201d",{searchTerm:Object(S.a)(i,"displayValue")}),s=en.rt("Try <a>searching for another workspace</a> or searching for a teammate\u2019s workspaces.",null,function(t){var n=t.text,a=t.key;return"a"===t.tag?r.a.createElement(ie.a,{onClick:function(){return e.onSearchAgainButtonClick()},key:a},n):{text:n}}),r.a.createElement("div",{className:"align_center"},r.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},o),r.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},s))}},{key:"renderOnboardingBanner",value:function(){if(this.props.hasSeenOnboardingBanner)return null;var e=this.state.hideOnboardingBanner,t=x()("p-workspace_directory__banner","p-workspace_directory__banner--onboarding",{"p-workspace_directory__banner--hidden":e}),n=en.t("Workspaces are where you and your teammates communicate and get work done. To get started, find your team\u2019s workspace.");return r.a.createElement($t,{title:en.t("What is a workspace?"),description:n,className:t,onClose:this.onOnboardingBannerDismiss,isHidden:e,showCloseButton:!0,ref:this.setOnboardingBannerRef})}},{key:"renderWorkspaceRequestBanner",value:function(){var e=this;if(!this.props.allowWorkspaceRequest)return null;var t=en.rt("Your team might not be using Slack yet. You may ask your admins to <Link>create a new workspace</Link>.",null,function(t){var n=t.text;return r.a.createElement(ie.a,{onClick:e.openWorkspaceRequestForm},n)});return r.a.createElement($t,{title:en.t("Can\u2019t find your workspace?"),description:t,className:"p-workspace_directory__banner p-workspace_directory__banner--workspace_request",onClose:P.a})}},{key:"renderDirectoryLists",value:function(e){var t=this.state.selectedOption,n=e.onChildScroll,a=e.registerChild,i=u()(e,["onChildScroll","registerChild"]),o=m()({onScroll:n,scrollElement:this.page},i);return!!Object(S.a)(t,"selectedOptionData")?r.a.createElement("div",{ref:a},this.renderSearchResults(o)):r.a.createElement("div",{ref:a},this.renderYourWorkspaces(o),this.renderAllWorkspaces(o))}},{key:"renderWorkspaceDirectoryBody",value:function(){var e=this,t=this.state,n=t.searchResults,a=t.hideOnboardingBanner,i=x()("p-workspace_directory__body",{"p-workspace_directory__body--has_banner":!a}),o={};return this.onboardingBannerHeight&&!a&&(o.transform="translate3d(0, "+this.onboardingBannerHeight+"px, 0)"),this.page?r.a.createElement(r.a.Fragment,null,this.renderOnboardingBanner(),r.a.createElement("div",{"data-js":"workspace_directory_body",className:i,style:o},r.a.createElement(B.a,{scrollElement:this.page,onScroll:this.onWindowScrollerScroll,ref:this.setWindowScrollerRef},function(t){return e.renderDirectoryLists(t)}),!Object(S.a)(n,"loadingWorkspaces")&&this.renderWorkspaceRequestBanner())):null}},{key:"renderEmptyState",value:function(e){var t=this.props.enterprise;return r.a.createElement("div",{className:"p-workspace_directory__empty_state_container"},r.a.createElement(un,m()({enterprise:t},e)))}},{key:"renderDirectoryPage",value:function(){var e=this.props.user,t=this.state.viewingHiddenWorkspace,n=this.state.allWorkspaces,a=n.workspaces,i=n.loadingWorkspaces,o=this.state.yourWorkspaces,s=o.workspaces,l=!o.loadingWorkspaces&&Object(A.a)(s),c=!i&&Object(A.a)(a);return l&&Object(G.ob)(e)?this.renderEmptyState({isZeroWorkspaceGuest:!0}):c&&l?this.renderEmptyState({isZeroWorkspaceOrg:!0}):t?this.renderEmptyState({isHiddenWorkspace:!0}):r.a.createElement("div",{className:"p-workspace_directory",id:"workspace_directory"},this.renderWorkspaceDirectoryHeaderPane(),this.renderWorkspaceDirectoryBody())}},{key:"renderWorkspaceDirectoryHeader",value:function(){var e=this.props,t=e.user,n=e.enterprise,a=this.state,i=a.isMobileView,o=a.hasScrolledPastHeaderPane,s=a.selectedOption,l=t.is_admin||t.is_owner;return r.a.createElement(Jt,{enterprise:n,displayManageOrgButton:l,displaySearchBar:this.headerPane&&o,"data-js":"workspace_directory_sticky_header",user:t,isMobileView:i,selectedSearchOption:Object(S.a)(s,"selectedOptionData"),onOptionSelected:this.onSelectOption,onClearHeaderInput:this.onClearHeaderInput})}},{key:"renderDirectoryInModal",value:function(){var e=this.props.enterprise,t=x()("p-workspace_directory__page","p-workspace_directory__page--modal_view");return r.a.createElement(be.a,{onCancel:this.onFullscreenModalClose,showCancelButton:!1,showGoButton:!1,title:en.t("Workspaces at {orgName}",{orgName:e.name}),position:"fixed",modalBodyClasses:"p-workspace_directory__modal_body",modalClasses:"p-workspace_directory_modal",fullBleedModalBodyContent:!0,withHeader:!0},r.a.createElement("div",{className:t,onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()))}},{key:"render",value:function(){var e=this.props.displayDirectoryInModal,t=this.state.allWorkspaces,n=t.workspaces,a=t.loadingWorkspaces,i=this.state.yourWorkspaces,o=i.workspaces,s=i.loadingWorkspaces&&Object(A.a)(o),l=a&&Object(A.a)(n),c=s||l;return e?this.renderDirectoryInModal():r.a.createElement("div",{className:"p-workspace_directory__wrapper"},this.renderWorkspaceDirectoryHeader(),c&&this.renderInfiniteSpinner({renderFullPage:!0}),r.a.createElement("div",{className:"p-workspace_directory__page",onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()),r.a.createElement(re.a,null))}}]),t}(a.Component);an.displayName="WorkspaceDirectory",an.defaultProps=tn;var rn={enqueueToast:W.c,openModal:function(){return l.e.apply(void 0,arguments)},closeModal:l.a,fetchRawMembersFromAPI:Z.f,setUserPrefByApi:Y.f,fetchEnterpriseTeamById:X.g,fetchDirectoryWorkspaces:X.f},on=Object(L.b)(function(e,t){var n=t.userId,a=Object(U.g)(e)||{},r=Object(H.c)(e,n),i=Object(z.a)(e,"enterprise_team_creation_request"),o=i&&i.is_enabled&&!Object(G.ob)(r),l=Object(s.h)(e),c=Object(V.h)(e,"seen_onboarding_banner"),u=Object(J.a)({state:e});return{enterprise:a,user:m()({id:n},r),allowWorkspaceRequest:o,displayDirectoryInModal:l,hasSeenOnboardingBanner:c,clogger:u,featureModernRequestWorkspaceDialog:Object(s.i)(e,"feature_modern_request_workspace_dialog")}},rn,null,{areStatePropsEqual:function(e,t){return Object(te.a)(e,t,2)}})(an),sn=new Q.b("workspace_directory"),ln=(i.b.shape({id:i.b.string,name:i.b.string,domain:i.b.string,icon:i.b.object,locale:i.b.string}).isRequired,i.b.bool,i.b.bool,i.b.bool,i.b.string,{isZeroWorkspaceGuest:!1,isZeroWorkspaceOrg:!1,isHiddenWorkspace:!1,directoryUrl:void 0}),cn=function(e){function t(e){g()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.redirectToDirectory=n.redirectToDirectory.bind(n),n}return C()(t,e),O()(t,[{key:"redirectToDirectory",value:function(){var e=this.props.directoryUrl;window.open(e+"/signin/find-workspaces","_self")}},{key:"renderHeading",value:function(){var e=this.props,t=e.enterprise,n=e.isHiddenWorkspace?sn.t("No workspace found"):sn.t("No available workspaces");return r.a.createElement("span",{className:"p-workspace_directory_empty_state__heading"},r.a.createElement("span",{className:"p-workspace_directory_empty_state__icon"},r.a.createElement(me,{entityType:"org",dimension:28,entityData:t,customClasses:"flex_none",featureReactMessages:!0})),n)}},{key:"renderZeroWorkspaceGuestBody",value:function(){var e=this.props.enterprise;return r.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},sn.t("You have a guest account with {orgName}, which means someone needs to invite you to join a workspace. You may want to get in touch with the person who helped you create an account.",{orgName:Object(Q.n)(e.name)}))}},{key:"renderZeroWorkspaceOrgBody",value:function(){var e=this.props.enterprise;return r.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},sn.t("{orgName} doesn\u2019t have any open workspaces that you can join. If you need to be added to a workspace, contact your manager or the {orgName} IT team.",{orgName:Object(Q.n)(e.name)}))}},{key:"renderHiddenWorkspaceBody",value:function(){var e=this.props.enterprise;return r.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},sn.t("Either this workspace doesn\u2019t exist, or you do not have access to it. If you need to be added to a workspace, contact the {orgName} IT team.",{orgName:Object(Q.n)(e.name)}))}},{key:"renderBody",value:function(){var e=this.props,t=e.isZeroWorkspaceGuest,n=e.isZeroWorkspaceOrg,a=e.isHiddenWorkspace;return t?this.renderZeroWorkspaceGuestBody():n?this.renderZeroWorkspaceOrgBody():a?this.renderHiddenWorkspaceBody():null}},{key:"renderFooter",value:function(){var e=this.props.enterprise;return r.a.createElement(ie.a,{onClick:this.redirectToDirectory,className:"p-workspace_directory_empty_state__footer"},sn.t("View all {orgName} workspaces",{orgName:Object(Q.n)(e.name)}),r.a.createElement(ne.b,{type:"chevron-right",key:"footer-chevron-icon",inline:!0}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"p-workspace_directory_empty_state"},this.renderHeading(),this.renderBody()),this.props.isHiddenWorkspace&&this.renderFooter())}}]),t}(a.PureComponent);cn.displayName="WorkspaceDirectoryEmptyState",cn.defaultProps=ln;var un=Object(L.b)(function(e,t){var n=t.enterprise;return{directoryUrl:Object(Ut.a)(e,n.domain)}})(cn),dn=on,pn=Object(o.b)("Opens the Find More Workspaces modal.",function(e,t,n){Object(s.i)(t(),"feature_sonic_find_more_wksps")&&e(Object(l.e)({element:r.a.createElement(dn,{userId:n}),name:"find-more-workspaces",isStackable:!0}))});pn.propTypes={userId:i.b.string.isRequired};t.a=pn},KwLZ:function(e,t,n){},"LAi+":function(e,t,n){"use strict";var a=n("aLpA"),r=void 0;t.a=function(){if(r)return r;var e=Object.keys(a.i).map(function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")});return r=new RegExp("(^|\\s)("+e.join("|")+")(?=$|[\\s|\\?\\.,!])","g")}},LFzE:function(e,t,n){},LWrH:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("jo6Y"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),h=n("mRg0"),m=n.n(h),b=n("kxpR"),f=n.n(b),_=n("XHGt"),g=n("aK/h"),v=n("g5qt"),y=n("x3CK"),k=n("VjHM"),O=n("yHhI"),j=(g.b.object.isRequired,g.b.any.isRequired,g.b.string,{keyboardPref:void 0}),C=function(e){function t(e){l()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.desktopKeyboardLayoutChanged=n.desktopKeyboardLayoutChanged.bind(n),n.state={desktopKeyboardLayout:n.getDesktopKeyboardLayout()},Object(v.e)()&&(n.desktopKeyboardLayoutDisposable=Object(v.gb)(n.desktopKeyboardLayoutChanged)),n}return m()(t,e),u()(t,[{key:"componentWillUnmount",value:function(){this.desktopKeyboardLayoutDisposable&&(this.desktopKeyboardLayoutDisposable.dispose?this.desktopKeyboardLayoutDisposable.dispose():this.props.logger.warn("WITH-KB-LOCALE","Cannot unsubscribe from keyboard layout changes"))}},{key:"getDesktopKeyboardLayout",value:function(){if(Object(v.e)()){var e=Object(v.F)().currentKeyboardLayout;return Object(y.d)(e)}return null}},{key:"desktopKeyboardLayoutChanged",value:function(){var e=this;this.setState(function(){return{desktopKeyboardLayout:e.getDesktopKeyboardLayout()}})}},{key:"render",value:function(){var e=this.props,t=e.WrappedComponent,n=e.keyboardPref,a=(e.logger,o()(e,["WrappedComponent","keyboardPref","logger"])),i=this.state.desktopKeyboardLayout||n;return"en-US"===i&&(i="us"),f.a.createElement(t,r()({keyboardLocale:i},a))}}]),t}(b.Component);C.displayName="WithKeyboardLocale",C.defaultProps=j,t.a=function(e){return Object(_.b)(function(t){return{logger:Object(O.a)({state:t}),keyboardPref:Object(k.h)(t,"keyboard"),WrappedComponent:e}})(C)}},LpuC:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("jo6Y"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),h=n("mRg0"),m=n.n(h),b=n("ifKl"),f=n("kxpR"),_=n.n(f),g=n("TSYQ"),v=n.n(g),y=n("aK/h"),k=n("NcDR"),O=(n("Qxp+"),y.b.string,y.b.func,y.b.number,y.b.oneOfType([y.b.object,y.b.func]).isRequired,y.b.bool.isRequired,{className:void 0,onChange:b.a,value:0}),j=function(e){function t(e){l()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=n.handleChange.bind(n),n}return m()(t,e),u()(t,[{key:"handleChange",value:function(e){this.props.onChange(Number(e.target.value))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.forwardedRef,a=e.hasKeyboardFocus,i=(e.onChange,e.value),s=o()(e,["className","forwardedRef","hasKeyboardFocus","onChange","value"]),l=v()("c-slider__input",t,{"c-slider__input--focus-visible":a});return _.a.createElement("input",r()({ref:n,type:"range",className:l,onChange:this.handleChange,value:i},s))}}]),t}(f.PureComponent);j.displayName="Slider",j.defaultProps=O,t.a=Object(k.a)(_.a.forwardRef(function(e,t){return _.a.createElement(j,r()({},e,{forwardedRef:t||_.a.createRef()}))}))},Lpwv:function(e,t,n){},Lts7:function(e,t,n){"use strict";var a=n("XfeM"),r=n("uf9I"),i=n("SZMM"),o=n("HO/Y"),s=n("DtX9"),l=n("Fdc0"),c=Object(a.b)("launch workflow builder",function(e,t){var n=t();if(!Object(l.xb)(Object(s.b)(n))&&Object(o.i)(n,"feature_builder_can_access")){var a=Object(r.b)(n);e(Object(i.c)({pathname:"/workflow-builder/"+a,windowOptions:{height:700,width:1024}}))}});c.propTypes=null,t.a=c},MIIS:function(e,t,n){"use strict";var a=n("TOkS");t.a=a.a},MYD1:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("aK/h"),o=n("XHGt"),s=n("/m+M"),l=n("1tet"),c=n("9cNQ"),u=n("2lnT"),d=n("nNoG"),p=n("hQtm"),h=new d.b("channel_details"),m=(i.b.object.isRequired,i.b.string.isRequired,i.b.func.isRequired,i.b.func.isRequired,function(e){var t=e.pin,n=e.channelId,i=e.unpinMessage,o=e.pinsRemove,c=Object(a.useCallback)(function(){var e={channelId:n,reason:"pins-list-remove"};switch(t.type){case l.a.MESSAGE:e.ts=t.ts;break;case l.a.FILE:e.fileId=t.id;break;case l.a.FILE_COMMENT:e.fileCommentId=t.id}t.type===l.a.MESSAGE?i(e):o(e)},[t,n,i,o]);return Object(s.a)().featureM11nChannelDetails?r.a.createElement(u.a,{title:h.t("Remove pinned item"),goButtonText:h.t("Remove pinned item"),onGo:c},r.a.createElement("p",null,h.t("Are you sure you want to remove this pinned item?")),r.a.createElement(p.a,{pin:t})):null});m.displayName="PinnedItemRemoveConfirm";var b={unpinMessage:function(){return l.q.apply(void 0,arguments)},pinsRemove:function(){return c.c.apply(void 0,arguments)}};t.a=Object(o.b)(null,b)(m)},MvLI:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var a=n("lhZz"),r=void 0;function i(e){r=e}function o(){return Object(a.getStoreInstanceByTeamId)(r)}},Mzw9:function(e,t,n){},"N/g+":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var a=n("ROZo"),r=(Object(a.b)("TS.ui.needToBlockAtChannelKeyword"),Object(a.b)("TS.ui.needToShowAtChannelWarning"),Object(a.b)("TS.ui.showVersionInfo")),i=Object(a.b)("TS.ui.teamSelectionChanged")},N391:function(e,t,n){},N5rH:function(e,t,n){},NPry:function(e,t,n){},Nc5J:function(e,t,n){"use strict";var a=n("XfeM"),r=n("HO/Y"),i=n("cTgs"),o=n("aW/o"),s=n("HcX7"),l=n("5tH5"),c=Object(a.b)("Switches to the All Unreads view",function(e,t){var n=Object(r.i)(t(),"feature_pages")?"Punreads":l.a.allUnreads;e(Object(o.a)(t())===n?Object(s.b)():Object(i.a)({id:n}))});t.a=c},"No7/":function(e,t,n){},O6kw:function(e,t,n){"use strict";var a=n("c8Bs"),r=n("Z0Cl"),i=n("wBxZ"),o=n("gSGL"),s=n("kxpR"),l=n.n(s),c=n("aK/h"),u=n("XfeM"),d=n("DTT0"),p=n("FN36"),h=n("XEIi"),m=n("P9LH"),b=n("aLpA"),f=n("syB0"),_=n("ifKl"),g=n("fL8H"),v=n("nNoG"),y=new v.b("files");function k(e){var t=e.proceedToNextDialog,n=e.disableFileUploadsPref,a=y.t("Uploads disabled"),r="";"disable_all"===n&&(r=y.t("At the request of your administrator, file uploads have been disabled on this workspace.")),"disable_all_except_images"===n&&(r=y.t("At the request of your administrator, only images can be uploaded to this workspace."));return l.a.createElement(g.a,{title:a,onGo:function(){return Object(f.a)(function(){t()})}},l.a.createElement("p",null,r))}k.displayName="FileUploadsDisabledAlert",k.defaultProps={proceedToNextDialog:_.a,disableFileUploadsPref:""};var O=k,j=new v.b("file_upload");function C(e){var t=e.proceedToNextDialog,n=e.excludedFiles,a=e.goodFiles,r=void 0,i=void 0,o=void 0,s=void 0,c=void 0,u=void 0,d="",p=n.length+a.length;n.length&&(r=[],s="",u="",r=n.map(function(e){return l.a.createElement("li",{key:e.name},l.a.createElement("strong",null,e.name))}),n.length>1?(i=n.length===p?j.t("All files unsupported"):j.t("Some files unsupported"),c=j.t("Try uploading a .zip version of these files instead."),s=l.a.createElement("ul",null,r)):1===n.length&&(i=j.t("File unsupported"),c=j.t("Try uploading a .zip version of this file instead.")),a.length>1?u=j.t("(Don\u2019t worry, your other files are next.)"):1===a.length&&(u=j.t("(Don\u2019t worry, your other file is next.)")),o=1===n.length?j.rt("Sorry, {excluded_file} is a type of file not supported by Slack",{excluded_file:l.a.createElement("strong",null,n[0].name)}):n.length===p?j.t("Sorry, none of those file types are supported by Slack."):j.t("Sorry, some of those file types are not supported by Slack."),d=l.a.createElement("div",null,l.a.createElement("p",null,o),s,l.a.createElement("p",null,c),l.a.createElement("p",null,u)));return l.a.createElement(g.a,{title:i,onGo:function(){Object(f.a)(function(){t()})}},d)}C.displayName="FileUploadUnsupportedAlert",C.defaultProps={proceedToNextDialog:_.a,goodFiles:[],excludedFiles:[]};var E=C,w=n("Lnf+"),S=new v.b("file-upload"),I={SINGLE:"single",MULTIPLE:"multiple",ALL:"all"};function T(e){var t=e.type,n=e.proceedToNextDialog,a=S.t("File too large"),r="";r=t===I.ALL?S.t("All of those files are too large and cannot be uploaded. The limit is {limit}.",{limit:Object(w.a)(b.N)}):t===I.SINGLE?S.t("That file is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(w.a)(b.N)}):S.t("We\u2019ll upload what we can, but one or more of those files is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(w.a)(b.N)});var i=t===I.MULTIPLE?function(){Object(f.a)(function(){n()})}:_.a;return l.a.createElement(g.a,{title:a,onGo:i},l.a.createElement("p",null,r))}T.displayName="FileUploadSizeAlert",T.defaultProps={type:I.SINGLE,proceedToNextDialog:_.a};var N=T,R=n("7WZX"),A=n("qafc"),P=new v.b("multi_file_upload"),M=Object(u.b)("renders a toast with error message for uploading too many files",function(e){var t=P.t("You can only upload {count, plural, =1 {# file} other {# files}} at a time.",{count:b.s}),n=l.a.createElement(A.b,{icon:"warning",iconClassName:"sk_colonel_mustard"},l.a.createElement("span",null,t));setTimeout(function(){return e(Object(R.c)({element:n}))},500)}),D=Object(u.b)("filters invalid files before they can be uploaded",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n.selectedFiles,c=n.channelId,u=n.threadTs;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState,i=e.files;if(!i)return Promise.resolve();var o=Object(a.a)(i,function(e){return Object(m.D)(e)});return new Promise(function(e){var a=Object(p.a)(n(),"disable_file_uploads");if("disable_all"!==a||o){if("disable_all_except_images"===a&&!o){var s=Object(r.a)(i,function(e){return Object(m.K)(e)});if(s.length!==i.length)return void t(Object(d.e)({element:l.a.createElement(O,{disableFileUploadsPref:a,proceedToNextDialog:function(){return e(s)}}),isStackable:!0}))}e(i)}else t(Object(d.e)({element:l.a.createElement(O,{disableFileUploadsPref:a,proceedToNextDialog:function(){return e()}}),isStackable:!0}))})}({dispatch:e,getState:t,files:s}).then(function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.files;return n?new Promise(function(e){Object(m.P)(n,function(n){n.excludedFiles.length?t(Object(d.e)({element:l.a.createElement(E,{goodFiles:n.goodFiles,excludedFiles:n.excludedFiles,proceedToNextDialog:function(){return e(n.goodFiles)}}),isStackable:!0})):e(n.goodFiles)})}):Promise.resolve()}({dispatch:e,files:t})}).then(function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.files;return n?new Promise(function(e){var a=n.filter(function(e){return Object(o.a)(e)||void 0===e.size||e.size<=b.N});if(a.length<n.length)return 1===n.length?(t(Object(d.e)({element:l.a.createElement(N,{type:I.SINGLE}),isStackable:!0})),void e()):a.length?void t(Object(d.e)({element:l.a.createElement(N,{type:I.MULTIPLE,proceedToNextDialog:function(){return e(a)}}),isStackable:!0})):(t(Object(d.e)({element:l.a.createElement(N,{type:I.ALL}),isStackable:!0})),void e());e(a)}):Promise.resolve()}({dispatch:e,files:t})}).then(function(n){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState,a=e.files,r=e.channelId,o=e.threadTs;if(!a)return Promise.resolve();var s=n(),l=Object(h.f)(s,{channelId:r,threadTs:o})||[];if(l.length+a.length>b.s){t(M());var c=b.s-l.length,u=Object(i.a)(a,c);return Promise.resolve(u)}return Promise.resolve(a)}({dispatch:e,getState:t,files:n,channelId:c,threadTs:u})})});D.propTypes={selectedFiles:c.b.array.isRequired,channelId:c.b.string,threadTs:c.b.string};t.a=D},OISv:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),h=n("ifKl"),m=n("kxpR"),b=n.n(m),f=n("aK/h"),_=n("TSYQ"),g=n.n(_),v=n("vSXf"),y=n("b7Ww"),k=n("1Uzj"),O=n("RhZ7"),j=n("TOh8"),C=n("0dpy"),E=n("BRQ/"),w=n("0gqo"),S=n("rUi3"),I=n("8CL7"),T=n("VrmM"),N=n("Aeia"),R=n("gl+W"),A=(n("XThT"),n("bj+V"),Object(k.a)(y.a)),P=(f.b.object.isRequired,f.b.string,f.b.bool,f.b.func,f.b.bool,f.b.bool,f.b.bool,f.b.string,f.b.string,f.b.string,f.b.bool,{className:void 0,showSender:!0,onFileClick:h.a,timestampClickable:!0,timestampFull:!0,timestampRelative:!1,flexOrigin:"activity",flexOriginId:void 0,blocksContainerContext:void 0,featureConsolidateContentRendering:!1}),M=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.msg,a=e.showSender,i=e.onFileClick,o=e.timestampClickable,s=e.timestampFull,l=e.timestampRelative,c=e.flexOrigin,u=e.flexOriginId,d=e.blocksContainerContext,p=e.featureConsolidateContentRendering,h=a&&b.a.createElement("div",{className:"c-message_kit__condensed_message_header"},b.a.createElement(O.a,{msg:n,size:16}),"\xa0",b.a.createElement(j.a,{msg:n,className:"c-message_kit__condensed_message_sender"}),b.a.createElement(C.a,{msg:n,clickable:o,full:s,relative:l}));return b.a.createElement(R.a,{className:g()("c-message_kit__message","c-message_kit__condensed_message",t)},h,b.a.createElement(I.a,{className:"c-message_kit__condensed_message_text",msg:n,isSingleLine:!0}),p?b.a.createElement(T.a,{msg:n,blockLimit:1,blocksContainerContext:d}):null,b.a.createElement(N.b,{msg:n,renderFile:function(e){return b.a.createElement(A,r()({},e,{className:g()("c-message_kit__condensed_message_file",{"c-message_kit__condensed_message_file--isolated":!n.text}),onClick:i}))}}),b.a.createElement("div",{className:"c-message_kit__condensed_message_meta"},b.a.createElement(E.a,{msg:n,className:"c-message_kit__condensed_message_reactions"}),b.a.createElement(w.a,{msg:n,flexOrigin:c,flexOriginId:u})),b.a.createElement(S.a,{msg:n,flexOrigin:c,flexOriginId:u}))}}]),t}(m.PureComponent);M.displayName="CondensedMessage",M.defaultProps=P,t.a=Object(v.a)("feature_consolidate_content_rendering")(M)},OX5w:function(e,t,n){"use strict";n.d(t,"h",function(){return u}),n.d(t,"f",function(){return d}),n.d(t,"g",function(){return p}),n.d(t,"e",function(){return h}),n.d(t,"d",function(){return b}),n.d(t,"j",function(){return f}),n.d(t,"i",function(){return _}),n.d(t,"c",function(){return g}),n.d(t,"b",function(){return v});var a=n("QbLZ"),r=n.n(a),i=n("AFNo"),o=n("1YQg"),s=n("k55U"),l=n("vRZS"),c=n("gn/G"),u=Object(i.a)("Update part or all of the call"),d=Object(i.a)("Update the active call token"),p=Object(i.a)("Update the elapsed call time"),h=Object(i.a)("Store gleaned contextual information from the url"),m=Object(i.d)({},{hasJoined:!1,elapsedDisplayTime:Object(c.a)(0)},{persistenceEnabled:!1}).on(h,function(e,t){var n=t.callOrConversationId,a=t.inviterUserId,i=Object(o.j)(n);return r()({},e,{id:i?n:void 0,conversationId:i?void 0:n,incomingInviterUserId:a,incomingInviteResponse:Object(l.a)()?void 0:o.c.Accept})}).on(u,function(e,t){return r()({},e,t)}).on(p,function(e){return e.callStartedTimestamp?r()({},e,{elapsedDisplayTime:Object(c.a)(Date.now()-1e3*e.callStartedTimestamp)}):e}).on(d,function(e,t){var n=t.token,a=t.tokenExpiry;return e.server?r()({},e,{server:r()({},e.server,{token:n,tokenExpiry:a})}):(Object(s.f)("Cannot set server token without a server"),e)});t.a=m;var b=function(e){return!!e.activeCall.incomingInviterUserId&&!e.activeCall.incomingInviteResponse},f=function(e){return!!e.activeCall.incomingInviterUserId},_=function(e){return!!e.activeCall.conversationId&&Object(o.l)(e.activeCall.conversationId)},g=function(e){return e.activeCall.conversationId},v=function(e){return e.activeCall.id}},OiOg:function(e,t,n){},OrkY:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"route",function(){return me.Hb}),n.d(a,"error",function(){return be.a}),n.d(a,"accessibility",function(){return me.a}),n.d(a,"activity",function(){return me.b}),n.d(a,"allThreads",function(){return me.e}),n.d(a,"allUnreads",function(){return me.f}),n.d(a,"appsInChannels",function(){return me.l}),n.d(a,"bootData",function(){return me.n}),n.d(a,"cfm",function(){return me.p}),n.d(a,"channelLoading",function(){return me.s}),n.d(a,"channelSidebar",function(){return me.t}),n.d(a,"channelSidebarFolders",function(){return me.u}),n.d(a,"checkoutFlow",function(){return me.x}),n.d(a,"connectivity",function(){return me.z}),n.d(a,"consistency",function(){return me.A}),n.d(a,"customEmoji",function(){return me.B}),n.d(a,"deletedMessages",function(){return me.D}),n.d(a,"desktop",function(){return me.E}),n.d(a,"dnd",function(){return me.G}),n.d(a,"drafts",function(){return me.H}),n.d(a,"ekmChanges",function(){return me.I}),n.d(a,"ephemeralMessages",function(){return me.N}),n.d(a,"expandables",function(){return me.O}),n.d(a,"experiments",function(){return me.P}),n.d(a,"fileRefresh",function(){return me.S}),n.d(a,"fileUpload",function(){return me.T}),n.d(a,"filesFlexpane",function(){return me.V}),n.d(a,"flannelUrl",function(){return me.W}),n.d(a,"globalNav",function(){return me.X}),n.d(a,"grapevineMeta",function(){return me.Y}),n.d(a,"help",function(){return me.Z}),n.d(a,"imports",function(){return me.bb}),n.d(a,"incrementalBoot",function(){return me.cb}),n.d(a,"inlineFilePreviews",function(){return me.db}),n.d(a,"emailRender",function(){return me.J}),n.d(a,"invites",function(){return me.eb}),n.d(a,"lastUsedSlashCommand",function(){return me.gb}),n.d(a,"memberDirectoryFlexpane",function(){return me.ib}),n.d(a,"messageEdit",function(){return me.mb}),n.d(a,"messagePane",function(){return me.nb}),n.d(a,"messagePaneBanner",function(){return me.ob}),n.d(a,"modal",function(){return me.rb}),n.d(a,"navigationHistory",function(){return me.sb}),n.d(a,"noop",function(){return me.tb}),n.d(a,"onboarding",function(){return me.vb}),n.d(a,"openPopoversCount",function(){return me.wb}),n.d(a,"pendingFiles",function(){return me.yb}),n.d(a,"pendingOpenChannel",function(){return me.zb}),n.d(a,"persistedApiCalls",function(){return me.Ab}),n.d(a,"prefs",function(){return me.Cb}),n.d(a,"presence",function(){return me.Db}),n.d(a,"pricingPlans",function(){return me.Eb}),n.d(a,"reactionsToast",function(){return me.Gb}),n.d(a,"searchAutocomplete",function(){return me.Ib}),n.d(a,"searchChannelsUsers",function(){return me.Jb}),n.d(a,"searchInputBox",function(){return me.Lb}),n.d(a,"searchInProductEducation",function(){return me.Kb}),n.d(a,"searchResults",function(){return me.Mb}),n.d(a,"searchSession",function(){return me.Nb}),n.d(a,"searchUi",function(){return me.Ob}),n.d(a,"socket",function(){return me.Rb}),n.d(a,"stars",function(){return me.Sb}),n.d(a,"pins",function(){return me.Bb}),n.d(a,"teamCreation",function(){return me.Tb}),n.d(a,"threadsFlexpane",function(){return me.Wb}),n.d(a,"threadSub",function(){return me.Vb}),n.d(a,"toast",function(){return me.Xb}),n.d(a,"topics",function(){return me.Yb}),n.d(a,"typing",function(){return me.Zb}),n.d(a,"uiSerialization",function(){return me.ac}),n.d(a,"unfurls",function(){return me.bc}),n.d(a,"unreadCounts",function(){return me.cc}),n.d(a,"unreadsView",function(){return me.dc}),n.d(a,"userGroupsFlexpane",function(){return me.gc}),n.d(a,"usersCounts",function(){return me.hc}),n.d(a,"workspace",function(){return me.lc}),n.d(a,"welcomePlace",function(){return me.ic}),n.d(a,"enablePopupsBanner",function(){return me.L}),n.d(a,"whatsNew",function(){return me.jc}),n.d(a,"composerToolbarUI",function(){return me.y}),n.d(a,"adminMembers",function(){return me.c}),n.d(a,"allCalls",function(){return me.d}),n.d(a,"appActions",function(){return me.g}),n.d(a,"channelActions",function(){return me.q}),n.d(a,"appPermissions",function(){return me.h}),n.d(a,"appProfiles",function(){return me.i}),n.d(a,"appViews",function(){return me.j}),n.d(a,"apps",function(){return me.k}),n.d(a,"blocks",function(){return me.m}),n.d(a,"bots",function(){return me.o}),n.d(a,"channelHistory",function(){return me.r}),n.d(a,"channels",function(){return me.v}),n.d(a,"channelsMeta",function(){return me.w}),n.d(a,"customizeEmoji",function(){return me.C}),n.d(a,"developerActions",function(){return me.F}),n.d(a,"emoji",function(){return me.K}),n.d(a,"environment",function(){return me.M}),n.d(a,"externalTeamIds",function(){return me.Q}),n.d(a,"externalTeamsChannels",function(){return me.R}),n.d(a,"files",function(){return me.U}),n.d(a,"idpGroups",function(){return me.ab}),n.d(a,"lastNetworkSend",function(){return me.fb}),n.d(a,"memberCounts",function(){return me.hb}),n.d(a,"members",function(){return me.jb}),n.d(a,"membership",function(){return me.kb}),n.d(a,"membershipOrdered",function(){return me.lb}),n.d(a,"messages",function(){return me.pb}),n.d(a,"messagesMeta",function(){return me.qb}),n.d(a,"notifications",function(){return me.ub}),n.d(a,"paidFeatures",function(){return me.xb}),n.d(a,"reactions",function(){return me.Fb}),n.d(a,"slashCommand",function(){return me.Qb}),n.d(a,"selfTeamIds",function(){return me.Pb}),n.d(a,"teams",function(){return me.Ub}),n.d(a,"userGroups",function(){return me.fc}),n.d(a,"userGroupMembership",function(){return me.ec}),n.d(a,"window",function(){return me.kc});var r=n("3PKk"),i=n("aM/h"),o=n("fFfO"),s=n("oTSI"),l=n("V5VI"),c=n("St+r"),u=n("90XA"),d=n("BeG2"),p=n("QbLZ"),h=n.n(p),m=n("jo6Y"),b=n.n(m),f=n("aK/h"),_=n("om+M"),g=n("4zXV"),v=Object(_.a)("Fetch start data",function(e,t,n){var a=n.reason,r=b()(n,["reason"]),i=h()({flannel_api_ver:4,only_self_subteams:1},r);return e(Object(g.b)({method:"client.boot",args:i,reason:a}))});v.propTypes={reason:f.b.string.isRequired,only_self_subteams:f.b.oneOf([0,1])};var y=n("0QyR"),k=n("XfeM"),O=n("ntJl"),j=n("59Je"),C=n("Q9r6"),E=n("BDy0"),w=n("x3yj"),S=n("2ILS"),I=n("aa+J"),T=n("sxiy"),N=n("9hu3"),R=n("zWa+"),A=n("g5qt"),P=n("BYHq"),M=n("ZRqz"),D=Object(k.b)("Set model data in Redux stores based on response from client.boot",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelsData,r=n.teamData,o=n.selfData,s=n.userPrefsData,l=n.teamPrefsData,c=n.userGroupMembershipData,u=n.enterpriseData,d=n.enterprisePrefsData,p=n.paidFeatures,h=n.emojiBootData,m=n.slashCommandsBootData;e(Object(E.c)(Object(A.ab)())),e(Object(O.bulkAddChannels)({channels:a})),e(Object(C.c)({team:r})),e(Object(w.a)({members:[o]})),e(Object(N.c)(s)),e(Object(j.f)(s&&s.muted_channels||"")),e(Object(R.c)(l)),e(Object(P.b)()),e(Object(P.a)({userGroups:c,isMember:!0})),u&&e(Object(S.l)({team:u})),d&&e(Object(M.b)(d)),e(Object(I.c)(p||[])),e(Object(i.c)({serverCacheTs:h.cacheTs})),e(Object(T.c)({serverCacheTs:m.cacheTs}))});D.propTypes={channelsData:f.b.array,teamData:f.b.object.isRequired,selfData:f.b.object.isRequired,miscBootData:f.b.object,userPrefsData:f.b.object,teamPrefsData:f.b.object,userGroupMembershipData:f.b.array,enterpriseData:f.b.object,paidFeatures:f.b.arrayOf(f.b.string)};var x=D,L=n("uf9I"),F={};function B(e,t,n){var a=Object(L.b)(n());F[a]=(F[a]||0)+1;var r=F[a];return Object(c.f)(n())?(t(Object(u.i)(!0)),t(v({reason:"provisionally-connected",only_self_subteams:1})).then(y.b).then(function(e){return t(x(e))}).then(function(){var e=F[a];return Object(c.m)(n())&&e===r?t(Object(d.e)()):null}).finally(function(){return t(Object(u.i)(!1))})):Promise.resolve(t(Object(d.e)()))}var q=n("KXvl"),U=n("Gogr"),H=n("yHhI"),G=n("VjHM"),W=n("AfrZ");function K(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).payload,t=arguments[1],n=arguments[2];if(Object(q.b)()){var a=n();if(!e&&Object(c.k)(a)&&Object(L.a)(a)){var r=Object(L.b)(a);Object(U.e)().includes(r)&&Object(G.c)(a).includes(r)&&(Object(H.a)({teamId:r}).info("Removing this team from the app exclusion list"),t(Object(W.b)({teamId:r})))}}}var V=n("HO/Y"),z=n("UR+L"),Y=n("tZRu"),Q=3e4;function J(e,t,n){Object(V.i)(n(),"feature_desync_resync")&&t(v({reason:"resynced-topics",only_self_subteams:1})).timeout(Q).then(y.b).then(function(e){t(Object(z.c)()),t(x(e))}).catch(function(){return t(Object(z.c)())}).finally(function(){return t(Object(Y.b)())})}var X=Object(s.a)(function(){Object(l.d)({actions:[c.t],sideEffect:B}),Object(l.d)({actions:[Y.e],sideEffect:J}),Object(l.d)({actions:[c.a],sideEffect:K})});function Z(){return X(),o.a.apply(void 0,arguments)}var $=n("bYYE"),ee=n("YfA1"),te=n("XzsM"),ne=n("JpmM"),ae=n("nNoG"),re=n("JvzI"),ie=n("TVjB"),oe=n("lhZz"),se=n("Zr7G"),le=n("0dCl"),ce=n("iTOt"),ue=n("kLJo"),de=n("bYMc"),pe=n("rb67"),he=n("rkcT"),me=n("5Fft"),be=n("Gmrf"),fe=n("KQjq"),_e=n("YbO3"),ge=n("lhpG"),ve=n("XgrU"),ye=n("4ULK"),ke=n("UXvI"),Oe=!1,je=function(e){if(e){var t="",n=e.srcElement||e.target,a=H.b&&Object(H.b)();if(n&&n.nodeName)if("SCRIPT"===n.nodeName){var r=n.src;t="["+(e.type||"error")+"] from script at "+r+" (failed to load?)"}else if("IMG"===n.nodeName){var i=n.src||n.currentSrc||"unknown";return void a.warn("<img> fired error with url = "+i)}if(e.error&&e.error.stack&&(t+=" "+e.error.stack),e.filename){var o=e.filename,s=e.lineno,l=e.colno;t+=" from "+o,s&&(t+=" @ line "+s+", col "+l)}var c=void 0;if((c=e.error&&e.error.stack?t:(e.message||"")+" "+t)&&c.replace&&(c=c.replace(/\s+/g," ").trim()),!c||!c.length)if(n)c="error event from node of "+(n.nodeName||"unknown")+", no message provided?";else c="error event fired, no relevant message or node found";c="\ud83d\udc1e "+c;!function(e){var t=e.error,n=e.msg,a={subtype:e.subtype};Object(H.b)().error(t,n,a)}({error:e.error||e,msg:c,subtype:"js_runtime_error"})}};var Ce=function(){if(!Oe){var e=Object(ke.a)(je,1e4);window.addEventListener("error",e,!0),Oe=!0}},Ee=n("JtEI"),we=!1,Se=function(){var e=Object(se.a)(),t=Object(H.b)();e.count(Object(Ee.c)()+"_beforeunload"),t.info("RELOAD","Page is about to unload. This might not be a reload, it could be a window close or navigation")},Ie=function(){we||(window.addEventListener("beforeunload",Se),we=!0)},Te=n("cErB"),Ne=n("rWF5"),Re=n("YB7p"),Ae=n("rCFu"),Pe=n("IbTH"),Me=n("xUyV");function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.teamToken,n=e.teamId,a=e.reason,r=document.documentElement,i=!(!r||!r.dataset)&&r.dataset.versionTs;return i?Object(Pe.g)({token:t,teamId:n,versionTs:i,reason:a}).then(function(e){if(e&&e.should_reload){var t=e.client_min_version;Object(Me.a)(t)&&Object(Re.a)({reason:"Reloading due to a min version bump",reasonKey:"min_version_bump"})}return Promise.resolve()}):Promise.resolve()}var xe=n("fvjX"),Le=n("TdMD"),Fe=n.n(Le),Be=n("Z7Ay"),qe=n("Bw5p"),Ue=n("ZQFR"),He=n("YS90"),Ge=n("D4L/"),We=["domain","enterprise_id","enterprise_name","id","icon","name","url"];function Ke(e,t){var n=t[0];e.forEach(function(e){Object(oe.dispatchForTeamId)(e,Object(Ue.e)(t))}),Object(A.qb)(n)}var Ve=Object(He.b)("Broadcast workspaces state to other stores",function(e,t,n){var a=e.getState(),r=t(n),i=e.getState(),o=Object(fe.f)(i),s=a&&Object(fe.f)(a),l=Object(fe.e)(i),c=Object(fe.e)(a),u=!c||l.some(function(e,t){return e!==c[t]}),d=Object(fe.k)(i),p=a&&Object(fe.k)(a);return s!==o||u?(!function(e,t){var n=e.reduce(function(e,n){var a=Object(oe.getStateByTeamId)(n);return e[n]=h()({},Object(qe.a)(Object(Ge.i)(a,n,!1),We),{order:t.indexOf(n)}),e},{});Object(A.Ib)(n)}(o,l),Ke(o,d)):p!==d&&Ke(o,d),r}),ze=n("lDGG"),Ye=n("13mM"),Qe=n("ifKl");var Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=e.prevState,a=e.workspaces,r=void 0===a?[]:a,i=e.broadcastSelector,o=void 0===i?Qe.a:i,s=e.broadcastAction,l=void 0===s?Qe.a:s,c=e.featureFlag,u=o(t),d=o(n);u!==d&&r.forEach(function(e){var t=Object(oe.getStateByTeamId)(e);c&&!Object(V.i)(t,c)||Object(oe.dispatchForTeamId)(e,l(u))})},Xe=Object(He.b)("Broadcast connectivity state to other stores",function(e,t,n){var a=e.getState(),r=t(n),i=e.getState(),o=Object(fe.f)(i);return Je({state:i,prevState:a,workspaces:o,broadcastSelector:function(e){return Object(Ye.c)(e)},broadcastAction:function(e){return Object(ze.a)(e)},featureFlag:"feature_connectivity_manager"}),Je({state:i,prevState:a,workspaces:o,broadcastSelector:function(e){return Object(Ye.e)(e)},broadcastAction:function(e){return Object(ze.b)(e)},featureFlag:"feature_connectivity_manager"}),r}),Ze=n("HuaI"),$e=n("IY6O"),et=n("xIQt"),tt=n("fzrg"),nt=n("9/DQ"),at=n("PicY"),rt=n("NZir"),it=n("fpvb"),ot=n("4GGS"),st=n("8Cw3");function lt(){var e=Object(oe.getClientStoreInstance)();if(e)return Object(H.b)().warn("[CLIENT-STORE]","we\u2019ve called configureClientStore before and already have an instance. This is likely a programming error."),e;var t,n,a=(t=Object(rt.a)({teamId:"client",middlewares:[it.b,Fe.a,ot.a,Ve,Xe,et.a],customEnhancers:[]}),n=Object(st.a)({workspaces:fe.b,window:$.a,telemetry:at.a,connectivity:tt.a,accessibility:E.a,desktop:nt.c}),Object(xe.e)(n,t));Object(oe.setClientStoreInstance)(a),Object(Be.a)("clientStore",h()({},a,{setFocusedWorkspace:fe.v})),Object(Be.a)("clientStore",a),Object(Be.b)("teamIds",function(){var e=a.getState();return Object(fe.e)(e)}),Object(Be.b)("activeTeam",function(){var e=a.getState(),t=Object(fe.i)(e);return window.slackDebug[t]}),Object(Be.b)("activeTeamId",function(){var e=a.getState();return Object(fe.i)(e)});var r={};return Object.keys(Ze).forEach(function(e){r[e]=function(){return a.dispatch(Ze[e].apply(Ze,arguments))}}),Object.keys($e).forEach(function(e){r[e]=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return $e[e].apply($e,[a.getState()].concat(n))}}),Object(Be.a)("clientStore.workspaces",r),a}var ct=n("m1cH"),ut=n.n(ct),dt=n("9oTK"),pt=n("hAjP"),ht=n("aW/o"),mt=function(e){var t=e.prevTeamId,n=Object(oe.getStoreInstanceByTeamId)(t),a=n.getState(),r=Object(ht.a)(a);return r?n.dispatch(Object(pt.a)({channelId:r,cancelUnsavedEdits:!1,scroll:!0})):Promise.resolve()},bt=n("clTI"),ft=n("CJqQ"),_t=n("cTgs"),gt=n("kxpR"),vt=n.n(gt),yt=n("7WZX"),kt=n("5mKg"),Ot=n("iCc5"),jt=n.n(Ot),Ct=n("V7oC"),Et=n.n(Ct),wt=n("FYw3"),St=n.n(wt),It=n("mRg0"),Tt=n.n(It),Nt=n("qafc"),Rt=new ae.b("unavailable_channel"),At=(f.b.string.isRequired,f.b.bool,function(e){function t(){return jt()(this,t),St()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Tt()(t,e),Et()(t,[{key:"render",value:function(){if(!this.props.featureEscGridMigrationsClient)return null;var e=this.props,t=e.teamName,n=b()(e,["teamName"]),a=Rt.t("{teamName} is making some changes to their workspace, so content and conversations shared with them are temporarily unavailable.",{teamName:t});return vt.a.createElement(Nt.b,h()({fadeDelay:1e4,type:"error"},n),vt.a.createElement("span",null,a))}}]),t}(gt.PureComponent));At.displayName="UnavailableMemberToast",At.defaultProps={featureEscGridMigrationsClient:!1};var Pt=At,Mt=Object(k.b)("Show unavailable member toast",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.teamId,r=n.featureEscGridMigrationsClient,i=t(),o=Object(Ge.i)(i,a),s=Object(kt.e)(o);return e(Object(yt.c)({element:vt.a.createElement(Pt,{type:"error",teamName:s,featureEscGridMigrationsClient:r})}))}),Dt=n("DtX9"),xt=n("Fdc0"),Lt=n("wfE8"),Ft=n("6kok"),Bt=n("FHcd"),qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nextTeamId,n=e.params,a=void 0===n?{}:n,r=Object(oe.getStoreInstanceByTeamId)(t),i=r.getState();if(!Object(Bt.a)(a.entityId))return Promise.resolve();var o=a.entityId,s=Object(Dt.c)(i,o),l=Object(xt.Eb)(i,s),c=Object(bt.j)(i,o);if(Object(Ft.ob)(c))return r.dispatch(Object(_t.a)({id:c.id})),Promise.resolve(!1);var u=Object(V.i)(i,"feature_esc_grid_migrations_client");return l&&u?(r.dispatch(Mt({teamId:s.team_id,featureEscGridMigrationsClient:u})),Promise.resolve(!1)):r.dispatch(Object(Lt.s)({memberIds:[o],reason:"sonic/route-listeners/open-conversation-with-member"})).then(function(e){return r.dispatch(Object(ft.a)({channel:e.channel})),r.dispatch(Object(_t.a)({id:e.channel.id})),Promise.resolve(!1)})},Ut=n("+1yX"),Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nextTeamId,n=e.params,a=void 0===n?{}:n,r=Object(oe.getStoreInstanceByTeamId)(t),i=r.getState(),o=a.entityId;if(!Object(Ut.a)(o))return Promise.resolve();var s=Object(bt.d)(i,o);return Object(Ft.lb)(s)||Object(Ft.eb)(s)?Object(Ft.ob)(s)?Promise.resolve():r.dispatch(Object(Lt.s)({channel:o,reason:"sonic/route-listeners/open-conversation-with-ids"})):Promise.resolve()},Gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nextTeamId,n=e.params,a=void 0===n?{}:n,r=Object(oe.getStoreInstanceByTeamId)(t),i=r.getState();if(!Object(Ut.a)(a.entityId))return Promise.resolve();var o=a.entityId,s=Object(bt.d)(i,o,!1);return Object(Ft.X)(s)?Object(Ft.ab)(s)?Promise.reject(new Error("tried to switch to a channel from another team")):Promise.resolve():r.dispatch(Object(Lt.d)({ids:[o],reason:"sonic/route-listeners/ensure-channel"})).then(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).resolved;return!(!e||!e.includes(o))})},Wt=n("m8R6"),Kt=n("OIOV"),Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.prevTeamId,n=e.nextTeamId,a=e.routeName,r=e.reason,i=e.params,o=void 0===i?{}:i,s=Object(oe.getStoreInstanceByTeamId)(n),l=s.getState();if("clear_timestamp"!==r){var c=Object(Ut.a)(o.entityId)&&o.entityId,u=o.timestamp,d=Object(ce.c)(l),p=Object(Ut.a)(d.entityId)&&d.entityId;(n!==t||p!==c||u)&&(s.dispatch(Object(Kt.a)({channelId:c,startTs:u})),u&&Object(ue.g)(a,Object(Wt.a)(o,"timestamp"),{reason:"clear_timestamp",shouldReplaceState:!0}))}},zt=n("wdjV"),Yt=n("b+9+"),Qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.prevTeamId,n=e.nextTeamId,a=e.params,r=void 0===a?{}:a,i=Object(oe.getStoreInstanceByTeamId)(n),o=i.getState(),s=Object(Ut.a)(r.entityId)&&r.entityId,l=Object(ce.c)(o),c=Object(Ut.a)(l.entityId)&&l.entityId;!Object(zt.n)(o)||n===t&&c===s||i.dispatch(Object(Yt.g)(!1))},Jt=n("gEbr"),Xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nextTeamId,n=e.routeName,a=e.reason,r=e.params,i=void 0===r?{}:r,o=Object(oe.getStoreInstanceByTeamId)(t),s=o.getState();if("clear_thread_timestamp"!==a){var l=Object(ce.c)(s).threadId;i.replyTs?o.dispatch(Object(Jt.i)(i.replyTs)):i.threadId!==l&&o.dispatch(Object(Jt.b)()),i.replyTs&&Object(ue.g)(n,Object(Wt.a)(i,"replyTs"),{reason:"clear_thread_timestamp",shouldReplaceState:!0})}},Zt=n("pRVB"),$t=n("sDWr"),en=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.prevTeamId,n=e.nextTeamId,a=e.params,r=void 0===a?{}:a;if(t===n){var i=Object(oe.getStoreInstanceByTeamId)(n),o=i.getState(),s=Object(ce.b)(o),l=Object(ce.c)(o).entityId,c=r.entityId;if(l!==c){["channel_page","group_page","im_page"].includes(Object(Zt.a)(o))&&i.dispatch(Object(Ue.a)({flexOrigin:null}));var u=Object(Zt.d)(o);if(Object(Ut.a)(c)&&u){i.dispatch(Object(Ue.b)({flexRestore:void 0}));var d=u.routeName,p=h()({},r,u.params);return void Object(ue.g)(d,p,{reason:"flex-restore",shouldReplaceState:!0})}Object(Ut.a)(c)||s!==$t.d||(i.dispatch(Object(Ue.b)({flexRestore:{routeName:$t.d}})),Object(ue.g)($t.a,r,{reason:"close-details",shouldReplaceState:!0}))}}},tn=n("hjTk"),nn=function(e){var t=e.prevTeamId,n=e.nextTeamId,a=e.routeName,r=e.params;if(Object(q.b)()||t===n)return!0;var i=Object(ue.i)(a,h()({},r,{teamId:n})),o=Object(oe.getClientStoreInstance)().getState(),s=Object(fe.n)(o),l=s&&s[n]&&s[n].subdomain,c=Object(q.a)(l)||"_team_"+n;return Object(tn.a)(i,c),!1},an=n("eoGz"),rn=function(e){var t=e.prevTeamId,n=e.nextTeamId;if(!Object(q.b)()||t===n)return!0;var a=Object(oe.getClientStoreInstance)().getState();return!Object(fe.r)(a,n)||(Object(an.a)(n),!1)},on=n("3lVB"),sn=function(e){var t=e.prevTeamId,n=e.nextTeamId,a=Object(oe.getClientStoreInstance)();return t!==n?a.dispatch(Object(at.c)(!0)):a.dispatch(Object(at.c)(!1))},ln=function(e){var t=e.nextTeamId,n={routeName:e.routeName,params:e.params};return Object(U.i)(t,"lastRoute",n),!0},cn=n("POHe");function un(e){var t=e.prevTeamId,n=Object(oe.getStoreInstanceByTeamId)(t);return Object(u.h)(n.getState())&&(n.dispatch(Object(ce.d)(!0)),cn.a.delete("setNavigatedDuringWarmBoot")),Promise.resolve()}var dn,pn=n("toaU"),hn=(dn=Object(dt.coroutine)(regeneratorRuntime.mark(function e(t){var n,a,r,i,o,s,l=t.prevTeamId,c=t.nextTeamId,u=t.navigationTimestamp;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(oe.getClientStoreInstance)(),!Object(fe.o)(n.getState(),c)){e.next=3;break}return e.abrupt("return",!0);case 3:return a=Object(oe.getStoreInstanceByTeamId)(c),r=a.getState(),i=Object(ce.c)(r),o=Object(ce.b)(r)||$t.a,s=!l,e.next=10,Object(dt.resolve)(Object(ue.g)(o,h()({},i,{teamId:c}),{reason:"navigateToLastSavedRoute",shouldReplaceState:s,navigationTimestamp:u}));case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,this)})),function(e){return dn.apply(this,arguments)});function mn(e){var t=e.nextTeamId,n=e.routeName,a=e.params;Object(oe.getClientStoreInstance)().dispatch(Object(fe.v)({teamId:t,routeName:n,params:a})),Object(oe.getStoreInstanceByTeamId)(t)&&Object(oe.dispatchForTeamId)(t,Object(ce.e)({routeName:n,params:a}))}function bn(e){var t=e.prevTeamId,n=e.nextTeamId;if(!t||!n||t===n)return null;var a=window.location.search.match(/[&?]locale=([a-zA-Z-]*)/),r=a?a[1]:Object(U.d)(n,"user_locale");return Object(re.c)(r,n)}function fn(){cn.a.set("maybeOpenOtherTeamInBrowser",Object(ue.c)(nn)),cn.a.set("maybeRedirectToSignin",Object(ue.c)(rn)),cn.a.set("startTeamSwitchTiming",Object(ue.c)(on.a)),cn.a.set("navigateToLastSavedRoute",Object(ue.c)(hn,[pn.a])),cn.a.set("attemptToStopEditingInChannel",Object(ue.c)(mt,[])),cn.a.set("openConversationWithMember",Object(ue.c)(qt,[])),cn.a.set("openConversationWithIds",Object(ue.c)(Ht,[])),cn.a.set("ensureChannel",Object(ue.c)(Gt,[])),cn.a.set("syncMessagePane",Object(ue.b)(Vt,[])),cn.a.set("closeAppSpace",Object(ue.b)(Qt,[])),cn.a.set("syncThreadFlexpane",Object(ue.b)(Xt,[$t.k])),cn.a.set("syncFlexpane",Object(ue.b)(en,[])),cn.a.set("setNavigatedDuringWarmBoot",Object(ue.b)(un)),cn.a.set("syncRouteStoreWithUrl",Object(ue.b)(mn)),cn.a.set("ensureCorrectLocaleForTeam",Object(ue.b)(bn)),cn.a.set("setShouldLogTeamSwitchMetrics",Object(ue.b)(sn)),cn.a.set("setLocalConfigForTeamWithKey",Object(ue.b)(ln))}Object(Be.a)("router.listeners",function(){return[].concat(ut()(cn.a.entries()))});var _n=n("lKeU");function gn(){var e=Object(U.c)("teams"),t=Object(U.c)("prevTeams");return h()({},t,e)}var vn=n("tVnY"),yn=n("W+QA"),kn=n("VMwU");function On(e,t){var n=function(){var e=Object(G.h)(t,"sidebar_theme_custom_values");try{return JSON.parse(e)}catch(e){return{}}}(),a=Object(G.h)(t,"sidebar_theme"),r=Object(vn.b)(t),i=Object(yn.e)(a,n,{useGlobalNav:r});i&&i.column_bg&&(Object(U.i)(e,"channelSidebarBackground",i.column_bg),Object(U.i)(e,"teamSwitcherBackground",Object(kn.c)(i.column_bg,20)))}var jn=n("aaWX"),Cn=n("qOjI"),En=n("sk9p"),wn=n.n(En),Sn=n("kiPk"),In=(n("QEec"),["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]),Tn=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],Nn=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(0===e)return 0;if(t===n)return parseFloat(e.toFixed(a));var i=r?1024:1e3,o=r?In:Tn,s=o.findIndex(function(e){return e.toLowerCase()===t.toLowerCase()}),l=o.findIndex(function(e){return e.toLowerCase()===n.toLowerCase()});if(-1===s)throw new Error("Unknown currentType '"+t+"' passed to convertToSize");if(-1===l)throw new Error("Unknown desiredType '"+n+"' passed to convertToSize");return s<l?parseFloat((e/Math.pow(i,l-s)).toFixed(a)):parseFloat((e*Math.pow(i,s-l)).toFixed(a))},Rn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Nn(e,"B","MB",t,!1)},An=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Nn(e,"KB","MB",t,!1)},Pn=n("Smdl"),Mn=Object(H.b)(),Dn=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.desktop).stats,n=t.getMemoryUsage(),a=t.getAppMetrics(),r=t.getAppMemoryUsage?t.getAppMemoryUsage():Promise.resolve();return Promise.all([n,a,r]).then(function(n){var a=wn()(n,3),i=a[0],o=a[1],s=a[2],l={};if(navigator&&navigator.hardwareConcurrency){var c=Object(Sn.a)(o,function(e){return e.cpu.percentCPUUsage*navigator.hardwareConcurrency});l["cpu_v4_app_"+e+"_teams"]=c.toFixed(2)}if(Object(Ne.l)("4.0.0"))if(s){i&&(l.memory_v4_mb_full_client=Math.ceil(An(i.private)));var u=Object(Sn.a)(s,function(e){return e.memory.private}),d=u+Object(Sn.a)(s,function(e){return e.memory.shared}),p=Math.ceil(An(u)),h=Math.ceil(An(d));l["memory_v4_app_mb_"+e+"_teams"]=h,l["memory_v4_app_private_mb_"+e+"_teams"]=p}else Mn.error("STATS","No memory stats collected stats.getAppMemoryUsage:"+t.getAppMemoryUsage+" appMemoryMetricsUsage:"+r,{subtype:"stats_no_memory"});else{i&&(l.memory_v4_mb_full_client=Math.ceil(An(i.privateBytes)));var m=Object(Sn.a)(o,function(e){return e.memory.privateBytes}),b=Object(Sn.a)(o,function(e){return e.memory.workingSetSize}),f=Math.ceil(An(m)),_=Math.ceil(An(b));l["memory_v4_app_mb_"+e+"_teams"]=_,l["memory_v4_app_private_mb_"+e+"_teams"]=f}return window.performance&&window.performance.memory&&(l["heap_v4_used_mb_"+e+"_teams"]=Rn(performance.memory.usedJSHeapSize),l["heap_v4_total_mb_"+e+"_teams"]=Rn(performance.memory.totalJSHeapSize)),l}).catch(function(e){return Mn.warn("metrics: Invalid data returned by desktop.stats",e.message)})},xn=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.desktop).stats,t=e.getMemoryUsage(),n=e.getAppMetrics(),a=e.getAppMemoryUsage?e.getAppMemoryUsage():Promise.resolve();return Promise.all([t,n,a]).then(function(e){var t=wn()(e,3),n=t[0],a=t[1],r=t[2],i={},o=a.filter(function(e){return"Tab"===e.type}).length-1;if(navigator&&navigator.hardwareConcurrency){var s=Object(Sn.a)(a,function(e){return e.cpu.percentCPUUsage*navigator.hardwareConcurrency});i["cpu_v3_app_"+o+"_teams"]=s.toFixed(2)}if(Object(Ne.l)("4.0.0")){if(r){n&&(i.memory_v3_team_mb_full_client=Math.ceil(An(n.private)));var l=Object(Sn.a)(r,function(e){return e.memory.private}),c=l+Object(Sn.a)(r,function(e){return e.memory.shared}),u=Math.ceil(An(l)),d=Math.ceil(An(c));i["memory_v3_app_mb_"+o+"_teams"]=d,i["memory_v3_app_private_mb_"+o+"_teams"]=u}}else{n&&(i.memory_v3_team_mb_full_client=Math.ceil(An(n.privateBytes)));var p=Object(Sn.a)(a,function(e){return e.memory.privateBytes}),h=Object(Sn.a)(a,function(e){return e.memory.workingSetSize}),m=Math.ceil(An(p)),b=Math.ceil(An(h));i["memory_v3_app_mb_"+o+"_teams"]=b,i["memory_v3_app_private_mb_"+o+"_teams"]=m}return i}).catch(function(e){return Mn.warn("metrics: Invalid data returned by desktop.stats",e.message)})};Object(Be.a)("ssbMetrics",{fetchMemoryStatsV3:xn,fetchMemoryStatsV4:Dn});var Ln=n("9svP"),Fn=36e5,Bn=6e5,qn=36e5,Un=.16;function Hn(){if(!Object(Ne.u)())return Promise.resolve();var e=Object(se.a)();function t(){var t=Object(oe.getClientStoreInstance)().getState(),n=Object(fe.f)(t).length;return Dn(n).then(function(t){return t?(Object.keys(t).forEach(function(n){return e.store(n,t[n])}),t):null})}var n=Fn+Math.floor(Math.random()*Bn);return setInterval(function(){return t()},n),t()}function Gn(){var e=Object(se.a)(),t="store_metrics_v1";var n=Fn+Math.floor(Math.random()*Bn);setInterval(function(){return n=Object(oe.getClientStoreInstance)().getState(),void Object(fe.f)(n).forEach(function(n){var a=Object(oe.getStateByTeamId)(n);if(a){e.mark(t+"_size_compute_time");var r=0;Object.keys(a).forEach(function(n){var i=JSON.stringify(a[n]).length;e.store(t+"_size_"+n,i),r+=i}),e.store(t+"_size_total",r),e.measureAndClear(t+"_size_compute_time")}});var n},n)}function Wn(){var e=Object(Ln.a)(qn,-Un,Un);return Object(pe.d)().then(function(t){Object(H.b)().info("SERVICE-WORKER","Starting update interval every "+e+"ms"),setInterval(function(){Object(H.b)().info("SERVICE-WORKER","Attempting background update and cache"),Object(se.a)().count("service_worker_background_update"),t.update()},e)})}var Kn,Vn=n("EKWK"),zn=n("N52Z"),Yn=n("CXsT"),Qn=n("JHHQ"),Jn=n("clNh"),Xn=n("P2LY"),Zn=n("oZiQ"),$n=n("xncf"),ea=n("zBEu"),ta=n("j04V"),na=n("v47e"),aa=Object(_.a)("Call Slackbot to send the help message",(Kn=Object(dt.coroutine)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dt.resolve)(t(Object(g.a)({method:"slackbot.sendHelpMessage",reason:"joiner-onboarding-slackbot-message"})));case 2:case"end":return e.stop()}},e,void 0)})),function(e){return Kn.apply(this,arguments)}));aa.propTypes={};var ra=n("7EGn"),ia=n("N4dO"),oa=Object(k.b)("Starts the Joiner Landing Place onboarding experience",function(){var e=Object(dt.coroutine)(regeneratorRuntime.mark(function e(t,n){var a,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),r=Object(ht.a)(a),!Object(Ut.a)(r)){e.next=8;break}return i=t(Object(ia.g)({channelId:r})),e.next=6,Object(dt.resolve)(i.promise||Promise.resolve(i));case 6:o=e.sent,Object(ra.a)(o,"counts.member_count",26)<=25&&t(Object(Jn.c)(!0));case 8:return e.abrupt("return",t(aa()));case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),sa=Object(k.b)("Starts joiner onboarding",function(){var e=Object(dt.method)(function(e,t){var n=t();return Object(Pn.a)()?(e(Object(Jn.b)(!0)),Object(ta.b)(n)?(e(aa()),Promise.resolve()):e(oa())):Object(ta.b)(n)?(e(Object(Jn.b)(!0)),e(aa()),Object(ta.c)(n)&&"Pwelcome"!==Object(ht.a)(n)?(e(Object(na.b)()),e(Object(_t.a)({id:"Pwelcome",fromHistory:!1,replaceHistoryState:!1}))):Promise.resolve()):Object(ea.f)()});return function(t,n){return e.apply(this,arguments)}}());function la(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=t.teamData,o=t.viewData,s=t.featureFlagData,l=t.experimentsData,c=t.miscBootData,u=h()({},s,a);if(Object(H.b)().info("BOOT","("+i.id+") Dispatching boot data"),e.dispatch(Object(V.n)(h()({},u,c))),e.dispatch(Object(te.a)(l)),r&&r.all&&e.dispatch(Object(te.d)(r.all)),r&&r[i.id]&&e.dispatch(Object(te.d)(r[i.id])),e.dispatch(x(t)),o&&o.messagesData){var d=o.messagesData,p=o.membersData,m=o.botsData,b=d.channelId,f=h()({},d,{msgs:e.dispatch(Object(Yn.a)({imsgs:d.msgs,channelId:b}))});if(e.dispatch(Object(w.a)({members:p})),e.dispatch(Object(zn.a)({bots:m})),e.dispatch(Object(Qn.a)(f)),u.feature_channel_actions_client&&o.channelActionsData&&e.dispatch(Object($n.d)(o.channelActionsData)),!Object(ce.f)(e.getState())){var _=n&&n.routeName,g=n&&n.params||{},v=d.channelId;c.shouldStartJoinerOnboarding&&(u.feature_jira_newxp_2372&&c.welcomePlaceOnboardingData?v="learning-slack":i.onboarding_channel_id&&(v=i.onboarding_channel_id)),e.dispatch(Object(ce.e)({routeName:n&&_!==pn.a?_:$t.a,params:h()({},g,{entityId:v})}))}}else e.dispatch(Object(ce.e)({routeName:n.routeName,params:n.params}));return c.teamCreationWorkflow&&e.dispatch(Object(Zn.E)(c.teamCreationWorkflow)),c.shouldStartCreatorOnboarding?e.dispatch(Object(Jn.a)(!0)):c.shouldStartJoinerOnboarding&&(c.welcomePlaceOnboardingData&&(e.dispatch(Object(Xn.a)()),e.dispatch(Object(Xn.c)(c.welcomePlaceOnboardingData))),e.dispatch(Object(Jn.e)(i.onboarding_channel_id)),e.dispatch(sa())),e}var ca=n("SZMM");function ua(e){Object(Be.c)(e,"openGantryApp",function(){return Object(oe.dispatchForTeamId)(e,ca.c.apply(void 0,arguments))})}n.d(t,"addWorkspace",function(){return fe.a}),n.d(t,"configureStore",function(){return Z}),n.d(t,"dispatchBootData",function(){return la}),n.d(t,"getClientStoreInstance",function(){return oe.getClientStoreInstance}),n.d(t,"getStoredModel",function(){return _e.b}),n.d(t,"getImmediatelyPersistedState",function(){return ge.c}),n.d(t,"checkForPersistenceMethodChanges",function(){return ve.a}),n.d(t,"getWindow",function(){return $.c}),n.d(t,"loadAppActions",function(){return ee.a}),n.d(t,"maybeReloadEmoji",function(){return i.c}),n.d(t,"maybeReloadSlashCommands",function(){return T.c}),n.d(t,"fetchAndUpsertWhatsNewUpdates",function(){return ne.b}),n.d(t,"localesEnabled",function(){return ae.i}),n.d(t,"getLocaleFeatureFlags",function(){return V.e}),n.d(t,"resetCredentials",function(){return U.g}),n.d(t,"queryStringParse",function(){return Te.l}),n.d(t,"removeUrlQueryStringValue",function(){return Te.m}),n.d(t,"populateTeamDebugger",function(){return ua}),n.d(t,"purgeStoredModel",function(){return ye.a}),n.d(t,"query",function(){return r.f}),n.d(t,"reducers",function(){return a}),n.d(t,"setLocalConfigForTeamWithKey",function(){return U.i}),n.d(t,"setWindow",function(){return $.k}),n.d(t,"setWorkspaceBooted",function(){return fe.x}),n.d(t,"setWillNavigateToUnbootedWorkspaceId",function(){return fe.w}),n.d(t,"getWillNavigateToUnbootedWorkspaceId",function(){return fe.l}),n.d(t,"hasWorkspaceFailedToBoot",function(){return fe.o}),n.d(t,"isWorkspaceMigrating",function(){return fe.s}),n.d(t,"setWorkspaceFailedToBoot",function(){return fe.y}),n.d(t,"setWorkspaceIsMigrating",function(){return fe.A}),n.d(t,"setWorkspaceIsAccessLimited",function(){return fe.z}),n.d(t,"start",function(){return d.i}),n.d(t,"upsertMembers",function(){return w.a}),n.d(t,"setBootType",function(){return $.i}),n.d(t,"getTelemeter",function(){return se.c}),n.d(t,"isJsPath",function(){return Ne.n}),n.d(t,"mountClient",function(){return le.a}),n.d(t,"maybeReloadForMinVersionBump",function(){return De}),n.d(t,"getRouteName",function(){return ce.b}),n.d(t,"getRouteParams",function(){return ce.c}),n.d(t,"updateCurrentRoute",function(){return ce.e}),n.d(t,"navigateToRoute",function(){return ue.g}),n.d(t,"getCurrentRouteInfo",function(){return ue.e}),n.d(t,"createDesktopDelegate",function(){return de.a}),n.d(t,"registerServiceWorker",function(){return pe.d}),n.d(t,"overrideExperimentAssignments",function(){return te.d}),n.d(t,"initializeWorkspacesStore",function(){return fe.p}),n.d(t,"configureClientStore",function(){return lt}),n.d(t,"registerRouteListeners",function(){return fn}),n.d(t,"getAllWorkspacesFromLocalConfig",function(){return _n.a}),n.d(t,"getWorkspacesMetaFromLocalConfig",function(){return gn}),n.d(t,"getLocale",function(){return re.a}),n.d(t,"setLocale",function(){return re.c}),n.d(t,"loadEmojiTranslations",function(){return ie.a}),n.d(t,"saveColorsToLocalConfig",function(){return On}),n.d(t,"connectSocket",function(){return he.b}),n.d(t,"isReload",function(){return Ne.t}),n.d(t,"createInstanceForTeam",function(){return jn.a}),n.d(t,"isQa",function(){return Ne.s}),n.d(t,"isDev",function(){return Ne.k}),n.d(t,"isProduction",function(){return Ne.r}),n.d(t,"getDesktopPreloadTime",function(){return Ae.d}),n.d(t,"storeSSBMemoryStatsOnAnInterval",function(){return Hn}),n.d(t,"storeReduxStoreStatsOnAnInterval",function(){return Gn}),n.d(t,"registerServiceWorkerAndUpdateOnAnInterval",function(){return Wn}),n.d(t,"registerGlobalErrorHandler",function(){return Ce}),n.d(t,"registerGlobalBeforeunloadHandler",function(){return Ie}),n.d(t,"registerNetworkConnectivityListener",function(){return Cn.a}),n.d(t,"forceColdBoot",function(){return Re.a}),n.d(t,"clearAllPersistedDataExceptForTeamIds",function(){return Vn.a})},Oxmb:function(e,t,n){},"P+5D":function(e,t,n){},PQ52:function(e,t,n){},Pb16:function(e,t,n){"use strict";n.d(t,"a",function(){return j});var a=n("QbLZ"),r=n.n(a),i=n("jo6Y"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),h=n("mRg0"),m=n.n(h),b=n("kxpR"),f=n.n(b),_=n("aK/h"),g=n("od5y"),v=n("qafc"),y=n("0f2Y"),k=new(n("nNoG").b)("app_actions"),O=(_.b.func.isRequired,function(e){function t(e){l()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onRetry=n.onRetry.bind(n),n.toastRef=f.a.createRef(),n}return m()(t,e),u()(t,[{key:"onRetry",value:function(){this.props.onRetry();var e=this.toastRef.current&&this.toastRef.current.getWrappedInstance&&this.toastRef.current.getWrappedInstance();e&&e.hideToast()}},{key:"render",value:function(){var e=this,t=this.props,n=(t.onRetry,o()(t,["onRetry"])),a=k.rt("Sorry, that didn\u2019t work. <a>Try again?</a>",null,function(t){var n=t.text;return f.a.createElement(y.a,{"data-qa":"app_action_toast_retry",onClick:e.onRetry},n)});return f.a.createElement(v.b,r()({ref:this.toastRef},n),f.a.createElement(g.a,{type:"warning",danger:!0}),f.a.createElement("span",null,a))}}]),t}(b.PureComponent));O.displayName="AppActionFailToast",O.defaultProps={};var j=function(e){return f.a.createElement(O,e)};j.displayName="appActionFailToastFactory"},PhaV:function(e,t,n){},PicY:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return b}),n.d(t,"e",function(){return f});var a,r=n("YEIV"),i=n.n(r),o=n("QbLZ"),s=n.n(o),l=n("aK/h"),c=n("EzZj"),u=n("MNvw"),d=n("U/ze"),p=Object(c.b)("Have we already sent boot metrics");p.propTypes=l.b.bool.isRequired;var h=Object(c.b)("Should we log team switch metrics");h.propTypes=l.b.bool.isRequired;var m=Object(u.b)((a={},i()(a,p,function(e,t){return s()({},e,{shouldLogAppBootMetrics:t})}),i()(a,h,function(e,t){return s()({},e,{shouldLogTeamSwitchMetrics:t})}),a),{shouldLogAppBootMetrics:!0,shouldLogTeamSwitchMetrics:!1},{persistenceEnabled:!0});m.propTypes={shouldLogAppBootMetrics:l.b.bool,shouldLogTeamSwitchMetrics:l.b.bool},t.a=m;var b=Object(d.b)(function(e){return e&&e.telemetry&&e.telemetry.shouldLogAppBootMetrics}),f=Object(d.b)(function(e){return e&&e.telemetry&&e.telemetry.shouldLogTeamSwitchMetrics})},"Q/6m":function(e,t,n){"use strict";n.d(t,"b",function(){return A});var a=n("YEIV"),r=n.n(a),i=n("QbLZ"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),h=n("mRg0"),m=n.n(h),b=n("ifKl"),f=n("kxpR"),_=n.n(f),g=n("aK/h"),v=n("XHGt"),y=n("TSYQ"),k=n.n(y),O=n("h0LD"),j=n("0wDQ"),C=n("FLa3"),E=n("hOQf"),w=n("lfjV"),S=n("EHyS"),I=n("HOOb"),T=(n("TJrU"),Object(f.createContext)(b.a)),N=(g.b.object,g.b.string,g.b.bool,g.b.func,g.b.bool,g.b.func,g.b.node,g.b.bool,g.b.func,g.b.func,{msg:void 0,className:void 0,hover:!0,onClick:b.a,highlight:void 0,clearHighlight:b.a,children:void 0,isDeleting:void 0,removeMessageAndTimestamp:b.a,logMessage:g.b.func}),R=function(e){function t(e){l()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setBackground=n.setBackground.bind(n),n.onClick=n.onClick.bind(n),n.onDeleteAnimationEnd=n.onDeleteAnimationEnd.bind(n),n.onDeleteAnimationTick=n.onDeleteAnimationTick.bind(n),n.highlightTimer=null,n.state={},n.ref=_.a.createRef(),n}return m()(t,e),u()(t,[{key:"componentDidMount",value:function(){this.props.highlight&&this.startHighlightTimer(),this.props.isDeleting&&this.onDeleteAnimationEnd()}},{key:"componentDidUpdate",value:function(e){!e.highlight&&this.props.highlight&&this.startHighlightTimer(),!e.isDeleting&&this.props.isDeleting&&this.startDeleteAnimation()}},{key:"componentWillUnmount",value:function(){this.highlightTimer&&(clearTimeout(this.highlightTimer),this.props.clearHighlight()),this.deleteAnimation&&(this.deleteAnimation.cancel(),this.onDeleteAnimationEnd())}},{key:"onClick",value:function(e){var t=this.props.msg;e.shiftKey&&Object(S.a)(e)&&!Object(I.a)(e.target)&&(e.preventDefault(),this.props.logMessage({channelId:t.channel,ts:t.ts})),this.props.onClick(e)}},{key:"onDeleteAnimationEnd",value:function(){var e=this.props.msg;this.props.removeMessageAndTimestamp({channelId:e.channel,ts:e.ts}),this.deleteAnimation=null}},{key:"onDeleteAnimationTick",value:function(e){var t=e.value,n=e.nextTick;this.setState(function(){return{height:t}},n)}},{key:"setBackground",value:function(e){this.setState(function(t){return o()({},t,e)})}},{key:"startDeleteAnimation",value:function(){var e=this.ref.current&&this.ref.current.clientHeight||0;this.deleteAnimation=Object(w.a)({fromValue:e,toValue:0,duration:200,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"startHighlightTimer",value:function(){var e=this;this.highlightTimer&&clearTimeout(this.highlightTimer),this.highlightTimer=setTimeout(function(){e.highlightTimer=null,e.props.clearHighlight()},3e3)}},{key:"render",value:function(){var e,t=this.state.height,n="number"==typeof t?{height:t}:null,a=k()("c-message_kit__background",(e={"c-message_kit__background--hovered":this.props.hover&&this.state.hover,"c-message_kit__background--labels":this.state.labels},r()(e,"c-message_kit__background--labels--"+this.state.labels,this.state.labels),r()(e,"c-message_kit__background--editing",this.state.editing),r()(e,"c-message_kit__background--highlight",this.props.highlight),r()(e,"c-message_kit__background--deleting",this.props.isDeleting),e),this.props.className);return _.a.createElement(T.Provider,{value:this.setBackground},_.a.createElement("div",{role:"document",className:a,ref:this.ref,style:n,onClick:this.onClick,"data-qa":"message_container","data-qa-unprocessed":Object(E.ub)(this.props.msg)},this.props.children))}}]),t}(f.PureComponent);R.displayName="MessageBackground",R.defaultProps=N;function A(e){return function(t){return _.a.createElement(T.Consumer,null,function(n){return _.a.createElement(e,o()({},t,{setBackground:n}))})}}t.a=Object(v.b)(function(e,t){var n=t.msg,a=!1;return n&&(a=Object(C.e)(e,{channelId:n.channel,ts:n.ts}).isDeleting),{isDeleting:a}},function(e){return{removeMessageAndTimestamp:function(t){return e(Object(j.a)(t))},logMessage:function(t){return e(Object(O.a)(t))}}})(R)},Q2Pv:function(e,t,n){},Q3oM:function(e,t,n){"use strict";n.d(t,"b",function(){return C});var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),h=n("ifKl"),m=n("kxpR"),b=n.n(m),f=n("aK/h"),_=n("TSYQ"),g=n.n(_),v=n("ubOb"),y=n("Q/6m"),k=Object(m.createContext)({hover:!1,setHover:h.a}),O=(f.b.string,f.b.node,f.b.bool,f.b.func,f.b.string,f.b.bool,f.b.bool,f.b.func,f.b.func,{className:null,children:void 0,hovered:!1,setBackground:h.a,"data-qa":void 0,hasKeyboardFocus:!1,hasKeyboardFocusWithin:!1,onFocus:h.a,onBlur:h.a}),j=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseOver=n.onMouseOver.bind(n),n.onMouseOut=n.onMouseOut.bind(n),n.onMutation=n.onMutation.bind(n),n.setHover=n.setHover.bind(n),n.hoveredElement=null,n.mutationObserver=null,n.state={hoverCount:0,hover:!1},n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.setBackground()}},{key:"componentDidUpdate",value:function(){this.setBackground()}},{key:"componentWillUnmount",value:function(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}},{key:"onMouseOver",value:function(e){var t=e.target,n=e.currentTarget,a=e.relatedTarget;n.contains(t)&&(n.contains(a)||(this.setHover(!0),this.mutationObserver||(this.mutationObserver=new MutationObserver(this.onMutation),this.mutationObserver.observe(n,{childList:!0,subtree:!0}))),this.hoveredElement=t)}},{key:"onMouseOut",value:function(e){var t=e.target,n=e.currentTarget,a=e.relatedTarget;n.contains(t)&&this.hoveredElement&&(n.contains(a)||(this.setHover(!1),this.hoveredElement=null,this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)))}},{key:"onMutation",value:function(e){var t=this;e.some(function(e){return Array.from(e.removedNodes).some(function(e){return e.contains(t.hoveredElement)})})&&(this.hoveredElement=null,this.setHover(!1))}},{key:"setHover",value:function(e){this.setState(function(t){var n=Math.max(0,t.hoverCount+(e?1:-1));return{hoverCount:n,hover:n>0}})}},{key:"setBackground",value:function(){this.props.setBackground({hover:this.isHovered()})}},{key:"isHovered",value:function(){var e=this.props.hovered||this.state.hover,t=this.props.hasKeyboardFocus||this.props.hasKeyboardFocusWithin;return e||t}},{key:"render",value:function(){var e=this.isHovered(),t=g()("c-message_kit__hover",{"c-message_kit__hover--hovered":e},this.props.className),n=this.props["data-qa"];return b.a.createElement(k.Provider,{value:{hover:e,setHover:this.setHover}},b.a.createElement("div",{role:"document",className:t,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onFocus:this.props.onFocus,onBlur:this.props.onBlur,"data-qa":n},this.props.children))}}]),t}(m.PureComponent);function C(e){return function(t){return b.a.createElement(k.Consumer,null,function(n){var a=n.hover,i=n.setHover;return b.a.createElement(e,r()({},t,{hover:a,setHover:i}))})}}j.displayName="MessageHover",j.defaultProps=O,t.a=Object(y.b)(Object(v.a)(j))},Qv4Q:function(e,t,n){"use strict";var a=n("W3KZ"),r=n("X6iR"),i=n("OZf9"),o=n("IzLi"),s=n("gSGL"),l=n("fujP"),c=n("rWF5"),u=function(e){var t={},n={},a=Object(c.p)()?"apple":"google";Object(i.a)(e,function(e,i){if(i)if(Object(r.a)(e,"alias:"))t[i]=e.slice("alias:".length);else{var l=void 0;Object(s.a)(e)?l=e:Object(o.a)(e)&&(l=e[a]),l&&(n[i]=l)}});var u={};return Object(l.a)(n)||(u.emojis=n),Object(l.a)(t)||(u.aliases=t),u},d=n("eK75"),p=n("LAi+"),h=void 0,m=function(){if(h)return h;var e=Object(d.a)().source;return h=new RegExp("^(\\+|\uff0b|-|\uff0d) {0,1}("+e+")\\s*$")},b=(n("WVKS"),n("aLpA")),f=/[-[\]{}()*+?.,\\^$|#\s]/g,_=/\n?(6\)|7\))/,g=function(e){var t=0,n=[],a=e.replace(Object(p.a)(),function(a,r,i,o){var s=t;t=o+a.length;var l=-1!==i.indexOf("("),c=-1!==i.indexOf(")");if((l||c)&&-1===n.indexOf(i)&&n.push(i),c&&!l){var u=e.substring(s,o);if(-1!==u.indexOf("(")&&-1===u.indexOf(")"))return a}if("\n8)"===a){var d=e.substring(0,o);if(_.test(d))return a}return b.i[i]?r+":"+b.i[i]+":":a});if(n.length){var r=n.map(function(e){return e.replace(f,"\\$&")}),i=new RegExp("(\\(.+)("+r.join("|")+")(.+\\))","g");a=a.replace(i,function(e,t,n,a){return b.i[n]?t+":"+b.i[n]+":"+a:e})}return a},v=n("m1cH"),y=n.n(v),k=n("yHhI"),O=function(e){if(!Object(s.a)(e))return null;try{var t=e.split("-").map(function(e){return"0x"+e});return String.fromCodePoint.apply(String,y()(t))}catch(e){Object(k.b)().info("Error converting unicode sequence to native emoji: ",e)}return null};n("nKoU"),n("bPB8");n.d(t,"e",function(){return a.a}),n.d(t,"g",function(){return u}),n.d(t,"b",function(){return d.a}),n.d(t,"c",function(){return p.a}),n.d(t,"d",function(){return m}),n.d(t,"f",function(){return g}),n.d(t,"a",function(){return O})},QwV3:function(e,t,n){e.exports=n.p+"they_joined_call_v2-1a6f390.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},Qwh8:function(e,t,n){},"Qxp+":function(e,t,n){},"R//h":function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=(n("aK/h"),n("XHGt")),o=n("/Rx2"),s=n("RQI5"),l=function(e){return r.a.createElement(s.a.Provider,{value:e.userAttentionIsOnChat},e.children)};l.displayName="UserAttentionProvider",l.defaultProps={userAttentionIsOnChat:!0};t.a=Object(i.b)(function(e){return{userAttentionIsOnChat:Object(o.e)(e)}})(l)},RHBl:function(e,t,n){},RMJC:function(e,t,n){},"RQ+B":function(e,t,n){},RQI5:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a);t.a=r.a.createContext(!0)},RjVJ:function(e,t,n){"use strict";var a=n("F294"),r=n("zmn3"),i=n("BeL+"),o=n("XHGt"),s=n("ypl0"),l=n("HO/Y"),c=n("smxp"),u=n("P2f5"),d=n("uf9I"),p=n("D4L/"),h=n("hOQf"),m=n("5mKg"),b=n("HvGc"),f=n("iCc5"),_=n.n(f),g=n("V7oC"),v=n.n(g),y=n("FYw3"),k=n.n(y),O=n("mRg0"),j=n.n(O),C=n("ifKl"),E=n("TSYQ"),w=n.n(E),S=n("aK/h"),I=n("kxpR"),T=n.n(I),N=n("RbWr"),R=n("nNoG"),A=n("od5y"),P=n("lek6"),M=n("lwWk"),D=n("u97G"),x=n("4RH7"),L=new R.b("threads"),F={ts:S.b.string.isRequired,threadTs:S.b.string.isRequired,channelId:S.b.string.isRequired,className:S.b.string,rootText:S.b.string,theme:S.b.string,replyCount:S.b.number,replyUsers:S.b.arrayOf(S.b.string),replyUsersCount:S.b.number,teamDomain:S.b.string.isRequired,featureFileThreads:S.b.bool,showThread:S.b.func,featureNewRepliesAfterBcast:S.b.bool,hasBlocks:S.b.bool},B={className:null,rootText:null,theme:"light",replyCount:0,replyUsers:void 0,replyUsersCount:0,featureFileThreads:!1,showThread:C.a,featureNewRepliesAfterBcast:!1,hasBlocks:!1},q=function(e){function t(e){_()(this,t);var n=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.openThread=n.openThread.bind(n),n}return j()(t,e),v()(t,[{key:"openThread",value:function(e){var t=this.props,n=t.showThread,a=t.channelId,r=t.threadTs,i=t.ts;e.preventDefault(),n({channelId:a,threadTs:r,highlightTs:i})}},{key:"renderRepliersSummary",value:function(e){var t=this.props,n=t.replyCount,a=t.replyUsers,r=t.replyUsersCount,i=t.featureFileThreads,o=t.featureNewRepliesAfterBcast;return n&&r?o?null:T.a.createElement("div",{className:"c-message__broadcast_repliers"},i?null:T.a.createElement(A.a,{type:"comment_alt",className:"c-message__broadcast_repliers_icon"}),T.a.createElement(M.a,{className:"c-message__broadcast_repliers_link",href:e,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread},T.a.createElement(x.a,{replyCount:n,replyUsers:a,replyUsersCount:r,prefixWithReplyCount:!0,broadcastPreabmle:!0}))):null}},{key:"render",value:function(){var e=this,t=Object(h.u)({teamDomain:this.props.teamDomain,channelId:this.props.channelId,ts:this.props.ts,threadTs:this.props.threadTs}),n=w()("c-message__broadcast_preamble",this.props.className),a=void 0;if(this.props.rootText&&!this.props.hasBlocks)a=T.a.createElement("div",{className:n},T.a.createElement("span",{"data-qa":"thread-broadcast-preamble-with-text",className:"c-message__broadcast_preamble_meta"},Object(D.a)()),T.a.createElement(M.a,{className:"c-message__broadcast_preamble_link",href:t,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread},T.a.createElement(P.a,{text:this.props.rootText,noHighlights:!0,noHexColors:!0,noJumbomoji:!0,noLinking:!0,noCode:!0,noQuotes:!0,customLineEnding:"\u2026",maxNewlines:1})));else{var r=L.rt("replied to <a>a thread</a>",null,function(n){var a=n.key,r=n.text;return T.a.createElement(M.a,{className:"c-message__broadcast_preamble_link",key:a,href:t,target:"_blank",rel:"noopener noreferrer",onClick:e.openThread},r)});a=T.a.createElement("div",{className:n},r)}return"light"===this.props.theme?T.a.createElement("div",{className:"c-message__broadcast_preamble_outer"},a,this.renderRepliersSummary(t)):a}}]),t}(N.a);q.displayName="ThreadBroadcastPreamble",q.propTypes=F,q.defaultProps=B;var U=q;var H={showThread:b.l};t.a=Object(o.b)(function(e,t){var n=t.threadTs,o=t.channelId,b=Object(c.a)(e,o,n);if(!b)return{};var f=b.blocks&&b.blocks.length,_=b.reply_count,g=b.replies||[],v=void 0;v=b.reply_users?b.reply_users:Object(i.a)(Object(r.a)(g,"user"));var y=b.reply_users_count?b.reply_users_count:v.length,k=Object(h.M)(b),O=Object(l.i)(e,"feature_file_threads");if(O&&b.files&&b.files.length){var j=Object(a.a)(b.files),C=Object(u.h)(e,j);k=Object(h.M)(b,C)}var E=Object(h.V)(b)||Object(d.b)(e),w=Object(p.i)(e,E);return{rootText:k,replyCount:_,replyUsers:v,replyUsersCount:y,teamDomain:Object(m.f)(w),theme:Object(s.a)(e),featureFileThreads:O,featureNewRepliesAfterBcast:Object(l.i)(e,"feature_new_replies_after_bcast"),hasBlocks:f}},H)(U)},Rmar:function(e,t,n){},"Rx/r":function(e,t,n){},SAUz:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),h=n.n(p),m=n("aK/h"),b=n("XHGt"),f=n("TSYQ"),_=n.n(f),g=n("pRVB"),v=n("HvGc"),y=n("UUlk"),k=n("uFGw"),O=n("18Pa"),j=(m.b.string,m.b.arrayOf(m.b.string),m.b.string,m.b.string,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.oneOf(["large","medium"]),m.b.string,{flexName:void 0,flexParams:void 0,flexOrigin:void 0,flexOriginId:void 0,previewFile:d.a,showUserGroupList:d.a,toggleActivityFlexpane:d.a,showMemberDirectory:d.a,showDetails:d.a,showStarredItemsList:d.a,showMemberProfile:d.a,showFileList:d.a,size:"large",className:void 0}),C=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.getOrigin=n.getOrigin.bind(n),n.openOrigin=n.openOrigin.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this.props,t=e.flexOrigin,n=e.flexName;if(t)return this.openOrigin();switch(n){case"files":return this.props.showFileList();case"team":return this.props.showMemberDirectory();case"groups":case"user_groups":return this.props.showUserGroupList();default:return null}}},{key:"getOrigin",value:function(){var e=this.props,t=e.flexOrigin,n=e.flexName,a=e.flexParams,r=a&&a[0];if(t)return t;switch(n){case"files":return Object(y.a)(r)?"files":null;case"team":case"groups":return Object(k.a)(r)?"groups":null;case"user_groups":return Object(k.a)(r)?"user_groups":null;default:return null}}},{key:"openOrigin",value:function(){var e=this.props,t=e.flexOrigin,n=e.flexOriginId;switch(t){case"member_preview":return this.props.showMemberProfile({memberId:n});case"directory":return this.props.showMemberDirectory();case"starred_items":return this.props.showStarredItemsList("stars");case"details":case"channel_page":case"group_page":case"im_page":return this.props.showDetails({sectionId:n});case"activity":case"mentions":return this.props.toggleActivityFlexpane();case"file_details":return Object(y.a)(n)?this.props.previewFile({fileId:n}):this.props.showFileList();case"files":return this.props.showFileList();default:return null}}},{key:"render",value:function(){if(!this.getOrigin())return null;var e=this.props,t=e.size,n=e.className,a="chevron-"+t+"-left";return h.a.createElement(O.a,{className:_()("p-global_nav__flex_btn","p-global_nav__flex_btn--back",n),icon:a,onClick:this.onClick})}}]),t}(p.Component);C.displayName="FlexBack",C.defaultProps=j;var E={previewFile:v.c,showUserGroupList:v.o,toggleActivityFlexpane:v.q,showMemberDirectory:v.i,showDetails:v.e,showStarredItemsList:v.k,showMemberProfile:v.j,showFileList:v.g};t.a=Object(b.b)(function(e,t){var n=t.flexOrigin;return{flexName:Object(g.h)(e),flexParams:Object(g.c)(e),flexOrigin:n||Object(g.a)(e),flexOriginId:Object(g.b)(e)}},E)(C)},SaAd:function(e,t,n){},Sh1l:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("nNoG"),o=(n("7yuZ"),new i.b("workflow_builder")),s=function(){return r.a.createElement("div",{className:"p-launch_workflow_builder"},o.t("Workflow Builder")," ",r.a.createElement("div",{className:"p-launch_workflow_builder__pill"},o.t("PILOT")))};s.displayName="LaunchWorkflowBuilder",t.a=s},Sqd7:function(e,t,n){},TJOA:function(e,t,n){e.exports=n.p+"incoming_ring_v2-c3cc0ca.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},TJrU:function(e,t,n){},TOkS:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("FYw3"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n("aK/h"),h=n("yHhI"),m=(p.b.shape({getState:p.b.func.isRequired,subscribeImmediate:p.b.func,subscribe:p.b.func.isRequired}).isRequired,p.b.func.isRequired,function(e){function t(e){r()(this,t);var n=o()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=e.store;return n.state=a.getState(),n.logger=Object(h.a)({getState:a.getState,label:"CONNECT-IMMEDIATE"}),n.unsubscribe=null,n.update=n.update.bind(n),n}return u()(t,e),l()(t,null,[{key:"getDerivedStateFromProps",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).store.getState()}}]),l()(t,[{key:"componentDidMount",value:function(){this.subscribeToStore()}},{key:"componentDidUpdate",value:function(e){this.props.store!==e.store&&(this.unsubscribeFromStore(),this.subscribeToStore())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromStore()}},{key:"subscribeToStore",value:function(){var e=this.props.store,t=e.subscribeImmediate;t||(this.logger.warn("subscribeImmediate not found on store"),t=e.subscribe),this.unsubscribe=t(this.update)}},{key:"unsubscribeFromStore",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"update",value:function(){var e=this;this.setState(function(){return e.props.store.getState()})}},{key:"render",value:function(){return this.props.render(this.state)}}]),t}(d.PureComponent));m.displayName="ConnectImmediate",t.a=m},TVjB:function(e,t,n){"use strict";var a=n("aK/h"),r=n("piHQ"),i=n("NrkL"),o=n("XoJV"),s=n("nNoG"),l=n("3pFD"),c=n("yHhI"),u=n("Z7Ay"),d=function(){var e=Object(c.b)({label:"EMOJI_TRANSLATION"}),t=Object(s.p)(),n=Object(i.a)();if(Object(s.e)())return e.info("Emoji translations not needed for default locale, only adding keywords"),void Object(o.a)({locale:t,localizedKeywordMap:n});if(Object(l.c)(t))if(Object(o.i)(t))e.info("Emoji translations already loaded for "+t);else{var a=Object(r.a)();a?(Object(o.b)({locale:t,canonicalToLocalized:a}),Object(o.a)({locale:t,localizedKeywordMap:n}),e.info("Emoji translations and keywords loaded for "+t)):e.info("Emoji translation map is null")}else e.info("Emoji translations not yet loaded for locale")};d.propTypes=a.b.string,t.a=d,Object(u.a)("loadEmojiTranslations",d)},TepT:function(e,t,n){},UJZI:function(e,t,n){},Usoh:function(e,t,n){},V2L1:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("kxpR"),o=n.n(i),s=n("XHGt"),l=n("TSYQ"),c=n.n(l),u=(n("aK/h"),n("Smdl")),d=n("HO/Y"),p=n("nNoG"),h=n("RAhH"),m=new p.b("sonic_pilot");function b(e){var t=e.children,n=e.featureSonicPlaceholderLabels,a=e.unstyled,i=e.tooltipPosition;if(!n)return t;if(Object(u.a)()){var s=o.a.cloneElement(t,r()({},t.props,{className:c()(t.props.className,{"c-button--sonic-placeholder":!a,"c-button-unstyled--sonic-placeholder":a})}),t.props.children);return o.a.createElement(h.c,{tip:o.a.createElement("div",{className:"c-tooltip__sonic_placeholder","data-qa":"sonic-placeholder-text"},m.t("Coming soon")),position:i||"top",zIndex:"above_fs"},s)}return t}b.defaultProps={unstyled:!1,tooltipPosition:void 0};t.a=Object(s.b)(function(e){return{featureSonicPlaceholderLabels:Object(d.i)(e,"feature_sonic_placeholder_labels")}})(b)},VTc2:function(e,t,n){},VjCB:function(e,t,n){"use strict";var a=n("aK/h"),r=n("XfeM"),i=n("KQjq"),o=n("lhZz"),s=Object(r.b)("Dispatches an action to all booted teams",function(e,t,n){Object(i.f)(t()).forEach(function(e){Object(o.dispatchForTeamId)(e,n)})});s.propTypes=a.b.oneOfType([a.b.object,a.b.func]).isRequired,t.a=s},VwqH:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("7EGn"),p=n("kxpR"),h=n.n(p),m=n("XHGt"),b=n("nNoG"),f=n("DtX9"),_=n("D4L/"),g=n("HO/Y"),v=n("Fdc0"),y=n("5mKg"),k=n("xoiQ"),O=n("derf"),j=n("XLFM"),C=n("od5y"),E=n("k55U"),w=n("vFlG");var S=n("7Ztl"),I=n("jUSB"),T=n("pJ2S"),N=(n("m0k8"),new b.b("incoming_call_window")),R=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.answerCallButton=h.a.createRef(),e}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.answerCallButton&&this.answerCallButton.current&&this.answerCallButton.current.focus(),Object(I.a)(T.g,{loop:!0})}},{key:"componentWillUnmount",value:function(){Object(I.b)(T.g)}},{key:"getSrcSetAttribute",value:function(e){return e?e+" 2x":""}},{key:"maybeRenderGuestBadge",value:function(){return this.props.isUltraRestricted?h.a.createElement(C.b,{type:"single-channel-guest",inline:!0}):this.props.isRestricted?h.a.createElement(C.b,{type:"restricted-user",inline:!0}):null}},{key:"renderUserImage",value:function(){var e=this.props.avatarUrls,t=e.imageUrl,n=e.imageUrl2x;return t||n?h.a.createElement("img",{className:"p-incoming_call__member_image",src:t||n,srcSet:this.getSrcSetAttribute(n),alt:""}):null}},{key:"renderExternalTeamLabel",value:function(){return h.a.createElement("div",{className:"p-incoming_call__external_team_banner"},h.a.createElement("span",{className:"p-incoming_call__external_team_name"},this.props.externalTeamName),h.a.createElement(O.b,{className:"p-incoming_call__external_team_icon",id:this.props.memberTeamId,size:18}))}},{key:"renderUserName",value:function(){return h.a.createElement("div",{className:"p-incoming_call__member_name_wrapper"},h.a.createElement("span",{className:"p-incoming_call__member_name"},this.props.prefCompliantMemberName),this.maybeRenderGuestBadge())}},{key:"renderCaptionText",value:function(){var e=this.props.featureSpockCalls?N.t("is calling you"):"";return h.a.createElement("div",{className:"p-incoming_call__user_caption"},e)}},{key:"renderCallButtons",value:function(){var e=this;return h.a.createElement("div",{className:"p-incoming_call__button_container"},h.a.createElement(j.d,{type:"danger",size:"medium",onClick:function(){return e.props.onRejectCall(e.props.callId)},className:"p-incoming_call__button","aria-label":"Decline"},h.a.createElement(C.b,{type:"times"})),h.a.createElement(j.d,{type:"primary",size:"medium",onClick:function(){return e.props.onAcceptCall(e.props.callId)},className:"p-incoming_call__button",ref:this.answerCallButton,"aria-label":"Accept"},h.a.createElement(C.b,{type:"phone"})))}},{key:"render",value:function(){return h.a.createElement("div",{className:"p-incoming_call"},this.props.isExternal&&this.renderExternalTeamLabel(),this.renderUserImage(),h.a.createElement("div",{className:"p-incoming_call__info"},this.renderUserName(),this.renderCaptionText(),this.renderCallButtons()))}}]),t}(p.PureComponent);function A(e,t){if(function(e){return!!Object(w.a)(e,"activeCall")}(e))return e.activeCall.incomingInviterUserId;var n=Object(S.b)(e,t).incomingInvite;if(n)return n.userId;Object(E.f)("No incoming invite")}R.displayName="IncomingCall";t.a=Object(m.b)(function(e,t){var n=A(e,t.callId);if(!n)throw new Error("No inviter user id for callId: "+t.callId);var a=Object(f.c)(e,n),r=Object(v.J)(a),i=Object(_.i)(e,r),o=Object(v.lb)(a),s=Object(v.P)(e,a),l=Object(y.e)(i),c=Object(d.a)(a,"profile.avatar_hash");return{avatarUrls:Object(k.a)({size:200,teamId:r,memberId:n,avatarHash:c}),prefCompliantMemberName:s,memberTeamId:r,externalTeamName:l,isRestricted:Object(v.xb)(a),isUltraRestricted:Object(v.Db)(a),isExternal:o,featureSpockCalls:Object(g.i)(e,"feature_spock_calls")}})(R)},W3KZ:function(e,t,n){"use strict";var a=/::[^:]+-([2-6])$/;t.a=function(e){if(!e)return null;var t=e.toLowerCase().replace(/(^:|:$)/g,""),n=t.match(a),r=t.replace(a,"");if(!r)return null;if(-1!==r.indexOf(":"))return null;var i=void 0;return n&&((i=parseInt(n[1],10))<2||i>6)?null:{name:r,skinTone:i}}},W3Yc:function(e,t,n){},W90I:function(e,t,n){},WJwm:function(e,t,n){},WOap:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("TGBA"),p=n("ifKl"),h=n("kxpR"),m=n.n(h),b=n("XHGt"),f=n("aK/h"),_=n("TSYQ"),g=n.n(_),v=n("hAjP"),y=n("Q+UV"),k=n("hOQf"),O=n("aLpA"),j=n("tbBR"),C=n("0gKA"),E=n("Q3oM"),w=(n("qMiJ"),f.b.object.isRequired,f.b.string,f.b.node,f.b.oneOf(["default","inside","above"]),f.b.bool,f.b.bool,f.b.bool,f.b.bool,f.b.bool,f.b.bool,f.b.bool,f.b.string,f.b.oneOf(Object(d.a)(O.y)),f.b.string,f.b.bool,f.b.func,f.b.bool,f.b.func,f.b.bool,f.b.func,f.b.func,{className:void 0,children:void 0,position:"default",show:void 0,showComment:!0,showShare:!0,showReact:!0,showJump:!1,showStar:!0,showMoreActions:!0,jumpOrigin:void 0,messageContainerType:void 0,viewContext:void 0,hover:!1,setHover:p.a,isEditing:!1,maybeStartEditingMessage:p.a,renderOffscreen:!1,clogLinkClick:p.a,clogThreadEvent:p.a}),S=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMenuOpen=n.onMenuOpen.bind(n),n.onMenuClose=n.onMenuClose.bind(n),n.startEditing=n.startEditing.bind(n),n.renderActions=n.renderActions.bind(n),n}return u()(t,e),o()(t,[{key:"onMenuOpen",value:function(){this.props.setHover(!0)}},{key:"onMenuClose",value:function(){this.props.setHover(!1)}},{key:"startEditing",value:function(){var e=this.props,t=e.msg,n=e.viewContext,a=t.channel,r=t.ts;this.props.maybeStartEditingMessage({viewContext:n,channelId:a,ts:r})}},{key:"renderActions",value:function(){var e=this.props,t=e.msg,n=e.hover,a=e.show,r=e.showComment,i=e.showShare,o=e.showReact,s=e.showJump,l=e.showStar,c=e.showMoreActions,u=e.jumpOrigin,d=e.messageContainerType,p=e.isEditing,h=e.renderOffscreen,b=e.clogLinkClick,f=e.clogThreadEvent;if(!1===a)return null;if(void 0===a&&!n&&!h)return null;if(p)return null;if(Object(k.ab)(t))return null;if(t.isEKMError)return null;var _=t.ts,g=t.thread_ts,v=t.channel,O=t.file,j=t.comment,E=t.subtype;return m.a.createElement(C.a,{ts:_,threadTs:g,channelId:v,reactionKey:Object(y.b)(t),isStarred:Object(k.ob)(t,O,j),isReply:Object(k.jb)(t),isEphemeral:Object(k.bb)(t),subtype:E,comment:t.comment&&t.comment.id,fileIds:t.files,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose,onEmojiPickerOpen:this.onMenuOpen,onEmojiPickerClose:this.onMenuClose,showComment:r,showShare:i,showReact:o,showJump:s,showStar:l,showMoreActions:c,jumpOrigin:u,editHandler:this.startEditing,messageContainerType:d,renderOffscreen:h&&!n&&!a,clogLinkClick:b,clogThreadEvent:f})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.position,a=g()("c-message_kit__actions","c-message_kit__actions--"+n,this.props.className);return m.a.createElement("div",{className:a,style:{position:"relative"}},t,this.renderActions())}}]),t}(h.PureComponent);S.displayName="MessageActions",S.defaultProps=w;var I={maybeStartEditingMessage:function(){return v.e.apply(void 0,arguments)}};t.a=Object(j.b)(Object(E.b)(Object(b.b)(function(e,t){var n=t.msg,a=t.viewContext,r=n.channel,i=n.ts;return{isEditing:Object(v.d)(e,{channelId:r,ts:i,viewContext:a}).isEditing}},I)(S)))},WVKS:function(e,t,n){"use strict";var a=n("m1cH"),r=n.n(a),i=n("pguY"),o=n("zmn3"),s=n("HiDb"),l=n("XI8A"),c=n("Qv4Q"),u=void 0;t.a=function(){if(u)return u;var e,t=(e=Object(s.a)(l,function(e){var t=Object(o.a)(e.skinVariations,"unicode");return[e.unicode].concat(r()(t))}),Object(o.a)(e,c.a)).sort(function(e,t){return t.length-e.length}),n=Object(o.a)(t,i.a);return u=new RegExp("("+n.join("|")+")(\ud83c[\udffb-\udfff])?","g")}},XKj7:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"e",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"g",function(){return u}),n.d(t,"b",function(){return d});var a=n("ifKl"),r=n("ROZo"),i=(Object(r.b)("TS.prefs.setMultiPrefsByAPI",a.a),Object(r.b)("TS.prefs.setPrefByAPI",a.a),Object(r.b)("TS.prefs.legacyOnPrefChanged",a.a)),o=Object(r.b)("TS.prefs.onPrefChanged",a.a),s=Object(r.b)("TS.prefs.legacyOnTeamPrefChanged",a.a),l=Object(r.b)("TS.prefs.onTeamPrefChanged",a.a),c=Object(r.b)("TS.prefs.sidebar_theme_changed_sig.dispatch",a.a),u=Object(r.b)("TS.prefs.removeTeamFromEnterpriseExcludeTeamPref",a.a),d=Object(r.b)("TS.prefs.legacyOnMutedChannelsPrefChanged",a.a)},XThT:function(e,t,n){},XoJV:function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return _}),n.d(t,"g",function(){return k}),n.d(t,"f",function(){return O}),n.d(t,"e",function(){return j}),n.d(t,"d",function(){return C}),n.d(t,"c",function(){return E}),n.d(t,"h",function(){return w}),n.d(t,"i",function(){return S});var a=n("sk9p"),r=n.n(a),i=n("fujP"),o=n("gSGL"),s=n("OZf9"),l=n("aK/h"),c=n("Qv4Q"),u=n("nNoG"),d=n("P1FA"),p=n("Z7Ay"),h=new u.b("emoji"),m={},b={},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locale,n=e.canonicalToLocalized;if(t&&!Object(i.a)(n)){var a={};Object(s.a)(n,function(e,t){a[e]=t;var n=Object(d.a)(e);n!==e&&(a[n]=t)}),m[t]={canonicalToLocalized:n,localizedToCanonical:a}}};f.propTypes={locale:l.b.string.isRequired,canonicalToLocalized:l.b.object.isRequired};var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locale,n=e.localizedKeywordMap;t&&!Object(i.a)(n)&&(b[t]=n)};_.propTypes={locale:l.b.string.isRequired,keywordMap:l.b.object.isRequired};var g=Object(c.b)(),v=/(^:)\S+(:$)/;function y(e,t){if(!Object(o.a)(e))return null;if(!t)return e;var n=v.test(e),a=e.replace(/^:|:$/g,"").toLowerCase().split("::"),i=r()(a,2),s=i[0],l=i[1],c=t[s];if(!c)return e;if(l){var u=t[l];if(!u)return e;c=c+"::"+u}return n?":"+c+":":c}var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locale,n=e.name;return t&&n?m[t]?y(n,m[t].canonicalToLocalized):n:null},O=function(e){if(!e||!e.name)return null;var t=void 0;switch(e.name){case"Smileys & People":t=h.t("Smileys & People",{fallbackHash:"b37554f695b15005fd23907b9488e0a8ad4bca5f",fallbackHashNs:"emoji"});break;case"Animals & Nature":t=h.t("Animals & Nature",{fallbackHash:"bddc7adb1204fed1e94206edb0213ced81f348d4",fallbackHashNs:"emoji"});break;case"Food & Drink":t=h.t("Food & Drink",{fallbackHash:"a9704a2ad9afea5f9d4d1504458f91e253557264",fallbackHashNs:"client"});break;case"Activities":t=h.t("Activities",{fallbackHash:"81c0d915fa6d82fd30661c5e66e204cea52bb2b5",fallbackHashNs:"emoji"});break;case"Travel & Places":t=h.t("Travel & Places",{fallbackHash:"4cea7e0a28a73fafbe052e8132f1c86cd07a68ed",fallbackHashNs:"emoji"});break;case"Objects":t=h.t("Objects",{fallbackHash:"72a83add2c5ede877c10d23f302d3e17accbadab",fallbackHashNs:"emoji"});break;case"Symbols":t=h.t("Symbols",{fallbackHash:"22ad664e9eb98b75a73333b2b2395fc4b52e6fc9",fallbackHashNs:"emoji"});break;case"Flags":t=h.t("Flags",{fallbackHash:"5d728758adcdd5154d3be55552c1c061ef1489b2",fallbackHashNs:"emoji"});break;default:t=""}return t},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locale,n=e.name;return t&&n?m[t]?y(n,m[t].localizedToCanonical):n:null},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locale,n=e.text;return t&&n?n.replace(g,function(e){return k({locale:t,name:e})}):null},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locale,n=e.text;return t&&n?n.replace(g,function(e){return j({locale:t,name:e})}):null},w=function(e){return b[e]},S=function(e){return e&&!Object(i.a)(m)&&!Object(i.a)(m[e])&&!Object(i.a)(b)&&!Object(i.a)(b[e])};Object(p.a)("emojiTranslation",{getLocalizedEmojiName:k,getCanonicalEmojiName:j,convertEmojiInStringToLocalized:C,convertEmojiInStringToCanonical:E,translationMaps:m,keywordMaps:b})},Xuqh:function(e,t,n){"use strict";var a=n("+Vvh");t.a=a.a},Y6eO:function(e,t,n){"use strict";var a=n("YEIV"),r=n.n(a),i=n("QbLZ"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),h=n("mRg0"),m=n.n(h),b=n("fujP"),f=n("yIs4"),_=n("+Xah"),g=n("ifKl"),v=n("aK/h"),y=n("kxpR"),k=n.n(y),O=n("XHGt"),j=n("mM05"),C=n.n(j),E=n("HO/Y"),w=n("uf9I"),S=n("DTT0"),I=n("XzsM"),T=n("smxp"),N=n("clTI"),R=n("FN36"),A=n("AITD"),P=n("DtX9"),M=n("hAjP"),D=n("J19L"),x=n("1yga"),L=n("qk+D"),F=n("aLpA"),B=n("mLe0"),q=n("XfeM"),U=n("XRnC"),H=Object(q.b)("Count the number of characters over the message length limit",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.text,i=n.delta,o=n.featureWysiwygComposer,s=Object(U.b)(t(),{channelId:a,text:r,delta:i,featureWysiwygComposer:o}),l=s.rawText,c=s.processedDelta;return o?Math.max(0,Object(B.a)(c)-F.u):Math.max(0,l.length-F.u)});H.propTypes={channelId:v.b.string,text:v.b.string};var G=H,W=n("6kok"),K=n("hOQf"),V=n("XLFM"),z=n("lwWk"),Y=n("od5y"),Q=n("eglI"),J=n("oxKW"),X=n("nNoG"),Z=n("NAkb"),$=n("82mD"),ee=n("OF9j"),te=n("X/Nq");function ne(e,t){return Object(te.a)(new C.a(e),new C.a(t))}var ae=n("u8wn"),re=n("a+Oh"),ie=n("icQl"),oe=n("PM8X"),se=n("fL8H"),le=n("tbBR"),ce=n("Pe1S"),ue=new X.b("message"),de=(v.b.string.isRequired,v.b.string.isRequired,v.b.object.isRequired,v.b.bool.isRequired,v.b.func,v.b.string,v.b.string,v.b.string,v.b.bool,v.b.func,v.b.func,v.b.func,v.b.func,v.b.bool,v.b.bool,v.b.arrayOf(v.b.object),v.b.object,v.b.bool,v.b.number,v.b.bool,v.b.bool,v.b.string,v.b.func,v.b.func,v.b.bool,v.b.bool,v.b.bool,v.b.bool,{saveMessageEdit:g.a,channelId:null,teamId:void 0,viewContext:void 0,isSelfIm:!1,setDidRequestToStopEditing:g.a,updateEditState:g.a,stopEditingMessage:g.a,updateHasUnsavedChanges:g.a,canDelete:!0,canUnbroadcast:!1,initialEditOps:void 0,initialContents:void 0,didRequestToStopEditing:!1,editWindowMin:-1,isAdminUser:!1,useJumbomoji:!1,messageContainerType:void 0,openModal:g.a,countCharsOverMessageLimit:_.a,featureFileThreads:!1,featureSonicInputs:!1,clientToolBar:!1,featureWysiwygComposer:!1}),pe="message_pane_edit_input";function he(e){Object(oe.a)({e:e,input_to_fill:"#"+pe,offset_y:-8})}var me=function(e){function t(e){l()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setTextyRef=n.setTextyRef.bind(n),n.maybeSave=n.maybeSave.bind(n),n.onTimerInterval=n.onTimerInterval.bind(n),n.renderTimeoutErrorDialog=n.renderTimeoutErrorDialog.bind(n),n.renderLengthErrorDialog=n.renderLengthErrorDialog.bind(n),n.renderUnknownErrorDialog=n.renderUnknownErrorDialog.bind(n),n.stopEditingMessage=n.stopEditingMessage.bind(n),n.handleSaveEditError=n.handleSaveEditError.bind(n),n.onEnter=n.onEnter.bind(n),n.onTextChange=n.onTextChange.bind(n),n.renderInput=n.renderInput.bind(n),n.texty=null,n.syncEditStateOnUnmount=!0,n.editWindowTimeout=null,n.componentDidUnmount=!1,n.enableBroadcastKeywords=!(n.props.messageContainerType===F.y.THREADS_FLEXPANE||n.props.messageContainerType===F.y.THREADS_VIEW),n.textyModules={tabcomplete:{searchOptions:{},positionMenu:function(e){e.style.width=n.texty.container.offsetWidth+"px",Object(Z.a)(e,n.texty.container)},completers:["channels","emoji","members"]}},n.state={editSecondsRemaining:n.countRemainingSeconds(),numCharsOverLimit:n.props.countCharsOverMessageLimit({channelId:n.props.channelId,text:n.getEditContentsAsString(),delta:n.props.featureWysiwygComposer?new C.a(n.props.originalMessageContents.contents):null,featureWysiwygComposer:n.props.featureWysiwygComposer})},n.getComputedModules=Object(ie.a)(function(e,t,n,a,r){if(!n&&!a)return e;var i=Object(ce.a)({featureWysiwygComposer:a});return o()({},e,{composer:o()({},i,{teamId:t,zIndexOverride:r?null:200}),slacklink:a&&{convertImages:!1,disableLinksWithLabels:!0},slackmarkdown:a&&{convertHeaders:!1,convertHorizontalRule:!1}})}),n}return m()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isSelfIm;e.editWindowMin>=0&&!t&&(this.editWindowTimeout=setInterval(this.onTimerInterval,1e3))}},{key:"componentWillReceiveProps",value:function(e){e.didRequestToStopEditing&&!this.hasUnsavedChanges()&&this.stopEditingMessage()}},{key:"componentWillUpdate",value:function(e,t){t.editSecondsRemaining<=0&&clearInterval(this.editWindowTimeout)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.channelId,n=e.ts,a=e.viewContext;if(this.syncEditStateOnUnmount){var r=this.texty.getContents(),i=this.hasUnsavedChanges();this.props.updateEditState({viewContext:a,channelId:t,ts:n,editOps:r.contents,hasUnsavedChanges:i})}this.editWindowTimeout&&clearInterval(this.editWindowTimeout),this.componentDidUnmount=!0}},{key:"onEnter",value:function(){return this.maybeSave(),!1}},{key:"onTextChange",value:function(){var e=this.props,t=e.didRequestToStopEditing,n=e.channelId,a=e.ts,i=e.viewContext,o=this.state.numCharsOverLimit,s=this.props.countCharsOverMessageLimit({channelId:n,text:this.getEditContentsAsString(),delta:this.props.featureWysiwygComposer?new C.a(this.getEditContents().contents):null,featureWysiwygComposer:this.props.featureWysiwygComposer});(s>0||o>0)&&this.setState(function(){return{numCharsOverLimit:s}}),this.props.updateHasUnsavedChanges({viewContext:i,channelId:n,ts:a,hasUnsavedChanges:this.hasUnsavedChanges()}),t&&!this.hasUnsavedChanges()&&this.props.setDidRequestToStopEditing(r()({},n,r()({},a,!1)))}},{key:"onTimerInterval",value:function(){var e=this;this.setState(function(){return{editSecondsRemaining:e.countRemainingSeconds()}})}},{key:"setTextyRef",value:function(e){this.texty=e&&e.getWrappedInstance?e.getWrappedInstance():e}},{key:"getEditContentsAsString",value:function(){return this.props.featureWysiwygComposer?"":Object(ee.a)(this.getEditContents())}},{key:"getEditContents",value:function(){var e=this.props.initialEditOps;return this.texty?this.texty.getContents():e?{contents:e}:{contents:[]}}},{key:"countRemainingSeconds",value:function(){var e=this.props,t=e.isSelfIm,n=e.editWindowMin,a=e.ts;if(n<0||t)return null;var r=60*n*1e3,i=Object($.n)(a).getTime()+r;return Math.round((i-Date.now())/1e3)}},{key:"hasUnsavedChanges",value:function(){var e=this.props,t=e.initialEditOps,n=e.originalMessageContents;return this.texty?!ne(this.texty.getContents.contents,n.contents):!t||!(t&&ne(t,n.contents))}},{key:"startDelete",value:function(){var e=this.props,t=e.channelId,n=e.originalMessageTextUsedForDeletionOnly,a=e.originalMessageContents,r=e.canDelete,i=e.canUnbroadcast,o=e.ts,s=e.viewContext,l=e.featureWysiwygComposer;if(r)this.props.openModal({element:k.a.createElement(x.a,{channelId:t,ts:o})});else if(i)this.props.openModal({element:k.a.createElement(D.a,{channelId:t,ts:o})});else if(l){var c=new C.a(a.contents),u=c.compose((new C.a).retain(c.length(),{strike:!0}));this.props.saveMessageEdit({channelId:t,delta:u,viewContext:s,ts:o}).catch(this.handleSaveEditError)}else{var d="~"+n.replace(/~/g,"")+"~";this.props.saveMessageEdit({channelId:t,text:d,viewContext:s,ts:o}).catch(this.handleSaveEditError)}}},{key:"maybeSave",value:function(){var e=this.props,t=e.channelId,n=e.ts,a=e.viewContext,r=e.featureWysiwygComposer,i=this.state,o=i.editSecondsRemaining;return!(i.numCharsOverLimit>0)&&(!(Object(f.a)(o)&&o<=0)&&(this.texty.isEmpty({doIgnoreWhitespace:!0})?(this.startDelete(),!1):(this.props.saveMessageEdit({channelId:t,text:this.getEditContentsAsString(),delta:r?new C.a(this.getEditContents().contents):null,viewContext:a,ts:n}).catch(this.handleSaveEditError),!0)))}},{key:"handleSaveEditError",value:function(e){switch(e.message){case"edit_window_closed":this.renderTimeoutErrorDialog();break;case"msg_too_long":this.renderLengthErrorDialog();break;default:this.renderUnknownErrorDialog()}}},{key:"stopEditingMessage",value:function(){var e=this.props,t=e.channelId,n=e.ts,a=e.viewContext;this.syncEditStateOnUnmount=!1,this.props.stopEditingMessage({viewContext:a,channelId:t,ts:n})}},{key:"shouldShowLengthWarning",value:function(){return this.state.numCharsOverLimit>0}},{key:"shouldShowTimeoutWarning",value:function(){var e=this.state.editSecondsRemaining;return Object(f.a)(e)&&e<60}},{key:"shouldShowUnsavedWarning",value:function(){return this.props.didRequestToStopEditing&&this.hasUnsavedChanges()}},{key:"isSavingDisabled",value:function(){var e=this.state.editSecondsRemaining;return Object(f.a)(e)&&e<=0||this.shouldShowLengthWarning()}},{key:"renderTimeoutErrorDialog",value:function(){var e=this.props,t=e.editWindowMin,n=e.isAdminUser,a=Object($.s)(t,{units:"minutes"}),r=ue.t("Message editing failed"),i=ue.rt("Sorry, but messages can only be edited for {duration} after posting.",{duration:k.a.createElement("b",null,a)}),o=void 0;n&&(o=ue.rt("(To adjust the message editing window, visit <a>Workspace Settings</a>)",null,function(e){var t=e.text;return k.a.createElement(z.a,{href:"/admin/settings#message_editing",target:"_new"},t)})),this.props.openModal({element:k.a.createElement(se.a,{title:r},k.a.createElement("p",null,i),o)})}},{key:"renderUnknownErrorDialog",value:function(){var e=ue.t("Message editing failed"),t=ue.t("Sorry, something went wrong with editing your message. Try again in a moment.");this.props.openModal({element:k.a.createElement(se.a,{title:e},t)})}},{key:"renderLengthErrorDialog",value:function(){var e=ue.t("Message editing failed"),t=ue.t("Sorry, your message is too long. Please shorten it and try again.");this.props.openModal({element:k.a.createElement(se.a,{title:e},t)})}},{key:"renderLengthWarning",value:function(){var e=ue.t("text is too long!");return k.a.createElement("span",{className:"c-message__editor__warning","data-js":"length_warning"},e)}},{key:"renderTimeoutWarning",value:function(){var e=this.state.editSecondsRemaining,t=void 0;return e<=0?t=ue.t("(your time to edit ran out)"):e<=60&&(t=ue.rt("(you have <b>{seconds, number}</b> {seconds, plural, =1{second}other{seconds}})",{seconds:e})),k.a.createElement("span",{className:"c-message__editor__warning","data-js":"timeout_warning"},t)}},{key:"renderUnsavedWarning",value:function(){var e=ue.rt("Finish editing this message first! Or press <b>escape</b> if you\u2019ve changed your mind.",{fallbackHash:"3480a7bdfba580c87d36cd0fc11d286cecbdbe27"});return k.a.createElement("span",{className:"c-message__editor__info","data-js":"unsaved_warning"},e)}},{key:"renderWarningMessages",value:function(){var e=this.shouldShowUnsavedWarning()&&this.renderUnsavedWarning(),t=this.shouldShowTimeoutWarning()&&this.renderTimeoutWarning(),n=this.shouldShowLengthWarning()&&this.renderLengthWarning();return e||t||n?k.a.createElement("div",{className:"c-message__editor__messages"},e,t,n):null}},{key:"renderInput",value:function(){var e=this,t=this.props,n=t.initialContents,a=t.messageHasText,r=t.useJumbomoji,i=t.channelId,o=t.featureFileThreads,s=t.featureSonicInputs,l=t.clientToolBar,c=t.featureWysiwygComposer,u=t.teamId,d=a||!o?ue.t("Edit message"):ue.t("Add message"),p=l&&!s?"c-message__editor__input--legacy c-message__editor__input--client_toolbar":"c-message__editor__input--legacy";if(!s){var h=this.getComputedModules(this.textyModules,u,l,c,s);return k.a.createElement(k.a.Fragment,null,k.a.createElement(Q.default,{id:pe,ref:this.setTextyRef,className:p,modules:h,ariaLabel:d,placeholder:d,initialText:n,onEnter:this.onEnter,onEscape:this.stopEditingMessage,onTextChange:this.onTextChange,enableJumbomoji:r,focusOnMount:!0,useLegacyCreate:!0,channelId:i,enableBroadcastKeywords:this.enableBroadcastKeywords,useFocusRing:!1}),k.a.createElement(V.c,{onClick:he,className:"c-message__editor__emoji_menu","aria-label":"Emoji menu"},k.a.createElement(Y.a,{className:"c-message__editor__emoji_circle_icon",type:"circle-fill"}),k.a.createElement(Y.a,{className:"c-message__editor__emoji_smile_icon",type:"smile-o"}),k.a.createElement(Y.a,{className:"c-message__editor__emoji_happy_icon",type:"happy-smile"})))}return k.a.createElement(J.a,{completeOnChannels:!0,completeOnEmoji:!0,completeOnMembers:!0,shouldCompleteOnTab:!0,channelId:this.props.channelId,renderInput:function(t){var a=t.isOpen,o=t.modules,p=e.getComputedModules(o,u,l,c,s);return k.a.createElement(Q.default,{ref:e.setTextyRef,className:"c-message__editor__input",modules:p,ariaLabel:d,placeholder:d,initialText:n,onEnter:e.onEnter,onEscape:e.stopEditingMessage,onTextChange:e.onTextChange,enableJumbomoji:r,isAutocompleteOpen:a,focusOnMount:!0,channelId:i,enableBroadcastKeywords:e.enableBroadcastKeywords,enableEmojiButton:!0,useFocusRing:!1})}})}},{key:"render",value:function(){return k.a.createElement("div",{className:"c-message__editor","data-qa":"message_editor"},k.a.createElement("div",{className:"c-message__editor__input_container"},this.renderInput()),k.a.createElement("div",{className:"c-message__editor__footer"},k.a.createElement(V.d,{type:"outline",size:"small",onClick:this.stopEditingMessage},ue.t("Cancel")),k.a.createElement(V.d,{size:"small",className:"c-message__editor__save",onClick:this.maybeSave,disabled:this.isSavingDisabled()},k.a.createElement(Y.a,{type:"enter",className:"margin_right_50"}),ue.t("Save Changes")),this.renderWarningMessages()))}}]),t}(y.PureComponent);me.displayName="BaseEditMessage",me.defaultProps=de;var be={saveMessageEdit:L.a,setDidRequestToStopEditing:M.f,updateEditState:M.i,stopEditingMessage:M.g,updateHasUnsavedChanges:M.j,openModal:S.e,countCharsOverMessageLimit:G},fe=Object(le.b)(Object(O.b)(function(e,t){var n=t.ts,a=t.channelId,r=t.viewContext,i=t.messageContainerType,o=Object(T.a)(e,a,n);if(!o)return{};var s=Object(re.a)(e),l=Object(N.d)(e,a),c=Object(R.a)(e,"msg_edit_window_mins"),u=Object(P.b)(e),d=Object(A.a)(e),p=Object(K.k)(e,{message:o,channel:l,messageContainerType:i}),h=Object(K.p)(e,{message:o,channel:l,messageContainerType:i}),m=Object(M.d)(e,{viewContext:r,channelId:a,ts:n}),f=m.editOps,_=m.didRequestToStopEditing,g={contents:Object(ae.a)(e,o,{featureWysiwygComposer:s}).ops},v=void 0;return v=f?{contents:f}:g,{channelId:l.id,teamId:Object(w.b)(e),isSelfIm:Object(W.Qb)(u.id,l),canDelete:p,canUnbroadcast:h,originalMessageContents:g,initialEditOps:f,initialContents:v,ts:n,originalMessageTextUsedForDeletionOnly:o.text||"",messageHasText:s?!(!o.text&&Object(b.a)(o.blocks)):!!o.text,editWindowMin:c,isAdminUser:u.is_admin,didRequestToStopEditing:_,useJumbomoji:d,featureFileThreads:Object(E.i)(e,"feature_file_threads"),featureSonicInputs:Object(E.i)(e,"feature_sonic_inputs"),clientToolBar:"composer_toolbar"===Object(I.c)(e,"composer_toolbar"),featureWysiwygComposer:s}},be)(me));fe.propTypes={ts:v.b.string.isRequired,channelId:v.b.string.isRequired};t.a=fe},YL49:function(e,t,n){},YfA1:function(e,t,n){"use strict";n.d(t,"c",function(){return _}),n.d(t,"b",function(){return g}),n.d(t,"a",function(){return v});var a=n("QbLZ"),r=n.n(a),i=n("aK/h"),o=n("Pb16"),s=n("vhAc"),l=n("XfeM"),c=n("HO/Y"),u=n("7WZX"),d=n("uf9I"),p=n("DVJN"),h=n("qjdt"),m=n("DecA"),b=n("cLE1"),f=Object(l.b)("Runs a message action (deprecated)",function(e,t,n){var a=t(),i=Object(m.f)(a);return Object(m.c)(i,n)?Promise.resolve():(e(Object(m.e)(n)),e(Object(s.c)(r()({},n,{type:"message_action"}))).then(function(){return e(Object(m.j)(n))}).catch(function(){e(Object(m.i)(n));var t=Object(o.a)({onRetry:function(){return e(f(n))}});e(Object(u.c)({element:t}))}))});f.propTypes={actionId:i.b.string,appId:i.b.string,channelId:i.b.string,messageTs:i.b.string};var _=Object(l.b)("Runs a message action",function(e,t,n){if(!Object(c.i)(t(),"feature_app_actions_fe_refactor"))return e(f(n));e(Object(b.c)());var a=r()({},n,{type:p.a.messageAction});return e(Object(s.c)(a)).catch(function(){var t=Object(o.a)({onRetry:function(){return e(_(a))}});e(Object(u.c)({element:t}))})});_.propTypes={actionId:i.b.string.isRequired,appId:i.b.string.isRequired,channelId:i.b.string.isRequired,messageTs:i.b.string.isRequired};var g=Object(l.b)("Runs a global action",function(e,t,n){e(Object(b.c)());var a=r()({},n,{type:p.a.globalAction});return e(Object(s.c)(a)).catch(function(){var t=Object(o.a)({onRetry:function(){return e(g(a))}});e(Object(u.c)({element:t}))})});g.propTypes={actionId:i.b.string.isRequired,appId:i.b.string.isRequired};var v=Object(l.b)("Explicitly load app actions",function(e,t){var n=t(),a=Object(d.b)(n);return Object(h.a)(a)})},YjF7:function(e,t,n){},YmYS:function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,n=e.isStarred,a=e.isEphemeral,r=e.isBroadcast,i=e.isCustomResponse,o=e.isSliHighlight;return r?"broadcast":t?"pinned":n?"starred":a?"ephemeral":i?"custom_response":o?"sli_highlight":void 0}n.d(t,"a",function(){return a})},ZSbO:function(e,t,n){"use strict";var a=n("aK/h"),r=n("kxpR"),i=n.n(r),o=n("XHGt"),s=n("VjHM"),l=n("tVnY"),c=n("VMwU"),u=n("W+QA"),d=n("yHhI"),p=n("HO/Y"),h=n("Dpde"),m=(a.b.oneOf(["custom_theme","default","default_theme","aubergine_classic_theme","hoth_theme","monument_theme","chocolate_theme","ocean_theme","workhard_theme","nocturne_theme","solanum_theme","brinjal_theme","cotton_theme","eco_theme","neue_theme","cloud_theme","kaiyo_theme","midnight_theme","stark_theme"]),a.b.object,a.b.bool,a.b.bool,a.b.bool,function(e){var t=Object(u.e)(e.theme,e.custom,{useGlobalNav:e.useGlobalNav});if(!t)return Object(d.b)().warn('Theme: could not identify theme "'+e.theme+'" ('+e.custom+")"),null;var n=Object(c.d)(t,{useGlobalNav:e.useGlobalNav,featureClassicNav:e.featureClassicNav}),a=t.text_color,r=Object(c.c)(t.column_bg,25),o=Object(c.c)(t.column_bg,35),s=e.historyNavigationEnabled?Object(c.l)(a,.15):r,p=e.historyNavigationEnabled?Object(c.l)(a,.2):o,h=Object(l.a)(t),m=Object(c.b)(a,Object(c.l)(a,.3)),b="\n\t\t.p-channel_sidebar {\n\t\t\tbackground: "+t.column_bg+";\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel,\n\t\t.p-channel_sidebar__link,\n\t\t.p-channel_sidebar__channel:link,\n\t\t.p-channel_sidebar__link:link,\n\t\t.p-channel_sidebar__channel:visited,\n\t\t.p-channel_sidebar__link:visited,\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover {\n\t\t\tcolor: "+n+";\n\t\t}\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__channel--selected:link,\n\t\t.p-channel_sidebar__link--selected:link,\n\t\t.p-channel_sidebar__channel--selected:visited,\n\t\t.p-channel_sidebar__link--selected:visited,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected:hover,\n\t\t.p-channel_sidebar__channel--selected + .p-channel_sidebar__close,\n\t\t.p-channel_sidebar__link--selected + .p-channel_sidebar__close {\n\t\t\tcolor: "+t.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover,\n\t\t.p-channel_sidebar__close_container:hover {\n\t\t\tbackground: "+t.hover_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__header {\n\t\t\tcolor: "+n+';\n\t\t}\n\n\t\t/* Folders */\n\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename {\n\t\t\tbackground: '+r+";\n\t\t\tcolor: "+n+';\n\t\t}\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename:hover {\n\t\t\tbackground: '+o+";\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t/* Override presence icons */\n\t\t.p-channel_sidebar__channel--im .c-presence--active,\n\t\t.p-channel_sidebar__channel--im-slackbot:before {\n\t\t\tcolor: "+t.active_presence+";\n\t\t}\n\t\t.p-channel_sidebar__channel--im.p-channel_sidebar__channel--selected .c-presence,\n\t\t.p-channel_sidebar__channel--im-slackbot.p-channel_sidebar__channel--selected:before {\n\t\t\tcolor: "+t.active_item_text+";\n\t\t}\n\t\t.p-channel_sidebar__channel--im .c-presence--away {\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__link--selected:hover {\n\t\t\tbackground: "+t.active_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel--selected:before,\n\t\t.p-channel_sidebar__channel--selected:hover:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__channel--selected:after,\n\t\t.p-channel_sidebar__channel--selected:hover:after,\n\t\t.p-channel_sidebar__link--selected:after,\n\t\t.p-channel_sidebar__link--selected:after {\n\t\t\tcolor: "+t.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__badge,\n\t\t.p-channel_sidebar__banner--mentions {\n\t\t\tbackground: "+t.badge+";\n\t\t}\n\n\t\t.p-channel_sidebar .c-custom_scrollbar__thumb_vertical,\n\t\t.p-channel_sidebar .c-scrollbar__bar {\n\t\t\tbackground: "+Object(c.l)(a,.45)+";\n\t\t}\n\n\t\t.client_channels_list_container.focusablesection:focus .sectionfocusindicator,\n\t\t.client_channels_list_container .focus-ring,\n\t\t.p-channel_sidebar.focusablesection:focus .sectionfocusindicator,\n\t\t#team_menu.focusablesection:focus .sectionfocusindicator {\n\t\t\tbox-shadow: "+m+";\n\t\t}\n\t\t\t\t\n\t\t.client_channels_list_container a:not(.c-link--focus-visible).focus-ring,\n\t\t.client_channels_list_container button:not(.c-button--focus-visible).focus-ring,\t\t\n\t\t.p-channel_sidebar__jumper.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__history_button.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__section_heading_label--clickable.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__section_heading_plus.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__channel.c-link--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link.c-button--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__close.c-button--focus-visible:focus {\n\t\t\tbox-shadow: "+m+";\n\t\t}\n\n\t\t/** `opacity: 1` color overrides */\n\t\t.p-channel_sidebar__channel--unread:not(.p-channel_sidebar__channel--muted):not(.p-channel_sidebar__channel--suggested):not(.p-channel_sidebar__channel--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--unread:not(.p-channel_sidebar__link--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--invites:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--add-channel:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__section_heading_label--clickable:hover,\n\t\t.p-channel_sidebar__section_heading_label--unreads,\n\t\t.p-channel_sidebar__quickswitcher:hover {\n\t\t\tcolor: "+a+";\n\t\t}\n\n\t\t/** Navigation Bar **/\n\t\t.p-channel_sidebar__jumper {\n\t\t\tbackground: "+s+";\n\t\t}\n\t\t.p-channel_sidebar__jumper:hover {\n\t\t\tbackground: "+p+";\n\t\t}\n\t\t.p-channel_sidebar__history_button {\n\t\t\tbackground: "+s+";\n\t\t}\n\t\t.p-channel_sidebar__history_button:hover {\n\t\t\tbackground: "+p+";\n\t\t}\n\t\t.p-channel_sidebar__history_button--disabled:hover {\n\t\t\tbackground: "+s+";\n\t\t}\n\n\t\t/** Global Nav (DEPRECATED BUT KEEP FOR SONIC) **/\n\t\t.p-global_nav__top {\n\t\t\tbackground: "+h.nav_bar_bg+";\n\t\t\tcolor: "+h.nav_bar_text+";\n\t\t}\n\t\t.p-global_nav__top:after {\n\t\t\tbackground: "+h.nav_bar_bg+";\n\t\t}\n\t\t.p-global_nav__sidebar {\n\t\t\tbackground: "+t.column_bg+";\n\t\t\tcolor: "+n+";\n\t\t}\n\t\t.p-global_nav__top_user_presence {\n\t\t\tbackground: "+h.nav_bar_bg+";\n\t\t}\n\t\t.p-global_nav__top_user_presence.c-presence--active {\n\t\t\tcolor: "+t.active_presence+";\n\t\t}\n\t\t.p-global_nav__top_user_presence.c-presence--away {\n\t\t\tcolor: "+h.nav_bar_text+";\n\t\t}\n\t\t.p-global_nav__sidebar_jumper:hover,\n\t\t.p-global_nav__sidebar_button:hover {\n\t\t\tcolor: "+a+";\n\t\t}\n\n\t\t/** Classic Nav (WIP) **/\n\t\t.p-classic_nav__team_header {\n\t\t\tbackground: "+t.column_bg+";\n\t\t\tcolor: "+a+";\n\t\t}\n\t\t.p-classic_nav__team_header:hover {\n\t\t\tbackground: "+t.menu_bg+";\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--active {\n\t\t\tcolor: "+t.active_presence+";\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--away {\n\t\t\tcolor: "+n+";\n\t\t}\n\t\t.p-classic_nav__team_header .c-link--focus-visible:focus,\n\t\t.p-classic_nav__team_header .c-button--focus-visible:focus {\n\t\t\tbox-shadow: "+m+";\n\t\t}\n\t";return i.a.createElement("style",{className:"p-channel_sidebar__theme--"+e.theme},b)});m.displayName="Theme",m.defaultProps={theme:"default_theme",custom:{},useGlobalNav:!1,featureClassicNav:!1,historyNavigationEnabled:!1};t.a=Object(o.b)(function(e){return{theme:Object(s.h)(e,"sidebar_theme"),custom:Object(s.d)(e),useGlobalNav:Object(l.b)(e),featureClassicNav:Object(p.i)(e,"feature_classic_nav"),historyNavigationEnabled:Object(h.a)(e)}})(m)},"a6/V":function(e,t,n){"use strict";t.a=function(e){return!!e&&(!e.metaKey&&!e.ctrlKey&&(e.key&&1===e.key.length))}},aQya:function(e,t,n){},ah8n:function(e,t,n){},anFW:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),h=n("zmn3"),m=n("ifKl"),b=n("kxpR"),f=n.n(b),_=n("aK/h"),g=n("XHGt"),v=n("hqEo"),y=n("FN36"),k=n("RB1+"),O=n("negh"),j=(n("BuFM"),_.b.string,_.b.string,_.b.string,_.b.string,_.b.object,_.b.func,_.b.func,_.b.bool,{channelId:void 0,threadTs:void 0,viewContext:void 0,disableFileUploadsPref:void 0,forwardedRef:void 0,openFileUploadDialog:m.a,onFilesSelectedHandler:null,multiple:!0}),C=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFilesSelected=n.onFilesSelected.bind(n),n}return p()(t,e),l()(t,[{key:"onFilesSelected",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.viewContext,r=e.forwardedRef,i=e.onFilesSelectedHandler,o={fileUploadAction:O.l.PLUS_MENU,fileUploadSrc:O.m.LOCAL},s=r.current.files,l=Object(h.a)(s);if(i)i(l);else{var c=Object(k.a)({viewContext:a,channelId:t,threadTs:n});this.props.openFileUploadDialog({files:l,initialChannelId:t,threadTs:n,inputProxy:c,metadata:o})}r.current.value=""}},{key:"render",value:function(){var e=this.props,t=e.disableFileUploadsPref,n=e.forwardedRef,a=e.multiple,i={};return"disable_all_except_images"===t&&(i.accept="image/*"),f.a.createElement("input",r()({type:"file",className:"p-hidden_file_input",multiple:a,"aria-hidden":"true","data-qa":"file_upload",tabIndex:"-1"},i,{ref:n,onClick:this.onClick,onChange:this.onFilesSelected}))}}]),t}(b.Component);C.displayName="HiddenFileInput",C.defaultProps=j;var E=Object(g.b)(function(e){return{disableFileUploadsPref:Object(y.a)(e,"disable_file_uploads")}},function(e){return{openFileUploadDialog:function(){return e(v.a.apply(void 0,arguments))}}})(C);t.a=f.a.forwardRef(function(e,t){return f.a.createElement(E,r()({},e,{forwardedRef:t}))})},anIG:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),h=n("TGBA"),m=n("zmn3"),b=n("kxpR"),f=n.n(b),_=n("aK/h"),g=n("XHGt"),v=n("TSYQ"),y=n.n(v),k=n("VjHM"),O=n("HHn2"),j=n("Jnln"),C=n("VwYs"),E=n("m36V"),w=n("cAy8"),S=n("tbBR"),I=n("CaXY"),T=n("lrhk"),N=(_.b.object.isRequired,_.b.string,_.b.oneOf(Object(h.a)(I.a)),_.b.bool,_.b.bool,_.b.string,{className:void 0,expandInlineImgsPref:!1,expandNonMediaAttachmentsPref:!1,viewContext:void 0,blocksContainerContext:I.a.message_attachment}),R=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"renderAttachmentsOverLimitMaybe",value:function(e,t){if(!e.length)return null;var n=this.props.viewContext,a={useAttachmentRules:!1,shouldBeExpandedByDefault:!1,expandableKey:Object(O.a)("attachmentsOverLimit",this.props.msg.ts,{limit:t,viewContext:n})};return f.a.createElement("div",null,f.a.createElement(C.a,a,e),f.a.createElement(E.a,r()({},a,{render:function(t,n){return f.a.createElement(w.a,{isExpanded:t.isExpanded,onClick:n,attachmentsOverLimitCount:e.length})}})))}},{key:"render",value:function(){var e=this.props,t=e.msg,n=e.expandInlineImgsPref,a=e.expandNonMediaAttachmentsPref,r=e.blocksContainerContext,i=Object(j.c)(t,n,a);if(!t||!i||!i.length)return null;var o=20,s=Object(m.a)(i,function(e,n){var a=e.id||n+1;return e.blocks&&(o=10),f.a.createElement(T.a,{msg:t,attachment:e,key:a,blocksContainerContext:r})}),l=s.splice(o),c=y()("c-message_kit__attachments",this.props.className);return f.a.createElement("div",{className:c},s,this.renderAttachmentsOverLimitMaybe(l,o))}}]),t}(b.PureComponent);R.displayName="MessageKitAttachments",R.defaultProps=N;t.a=Object(S.b)(Object(g.b)(function(e){return{expandInlineImgsPref:Object(k.h)(e,"expand_inline_imgs"),expandNonMediaAttachmentsPref:Object(k.h)(e,"expand_non_media_attachments")}})(R))},avbl:function(e,t,n){},b7Ww:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),h=n.n(p),m=n("aK/h"),b=n("TSYQ"),f=n.n(b),_=n("yPgC"),g=n("RfGh"),v=n("9gIX"),y=n("MAit"),k=(_.a.File().isRequired,m.b.func,m.b.string,m.b.bool,m.b.func,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.string,{clogLinkClick:d.a,className:null,fullWidth:!1,onClick:d.a,showActions:!0,useRowAction:!1,includeRootDownloadAction:!0,includeRootStarAction:!1,"data-qa":void 0}),O=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(e){e.preventDefault(),this.props.onClick(e,this.props.file)}},{key:"render",value:function(){var e=this.props,t=e.file,n=e.clogLinkClick,a=e.fullWidth,r=e.showActions,i=e.includeRootDownloadAction,o=e.includeRootStarAction,s=e.useRowAction,l=e["data-qa"],c=f()("p-contextual_file",this.props.className);return h.a.createElement(g.a,{file:t,className:c,fullWidth:a,clogLinkClick:n,showActions:r,useRowAction:s,includeRootDownloadAction:i,includeRootStarAction:o,"data-qa":l},h.a.createElement(v.a,{file:t,onClick:this.onClick},h.a.createElement(y.a,{file:t})))}}]),t}(p.PureComponent);O.displayName="ContextualFile",O.defaultProps=k,t.a=O},bYMc:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("jo6Y"),o=n.n(i),s=n("g5qt"),l=n("TGBA"),c=n("wBxZ"),u=n("m8R6"),d=n("ifKl"),p=n("r31G"),h=n("sk9p"),m=n.n(h),b=n("iCc5"),f=n.n(b),_=n("V7oC"),g=n.n(_),v=n("kOzZ"),y=function(){function e(){f()(this,e)}return g()(e,[{key:"reportLocale",value:function(){if(s.V){var e=Object(s.F)();e&&Object(v.a)().track("SYSTEM_LOCALE",e)}}},{key:"reportCrash",value:function(){if(s.V){var e=Object(s.x)();e&&Object(v.a)().track("DESKTOP_CRASH",e)}}},{key:"reportHang",value:function(){if(s.V){var e=Object(s.B)();e&&Object(v.a)().track("DESKTOP_HANG",e)}}},{key:"reportDisplays",value:function(){if(s.V){var e=Object(s.z)();if(e&&e.displays&&e.windowFrame){var t=e.displays,n=e.windowFrame,a=n.size,r=n.position,i=m()(a,2),o=i[0],l=i[1],c=m()(r,2),u=[o||0,l||0,c[0]||0,c[1]||0],d=[];t.forEach(function(e){e&&e.size&&e.size.width&&e.size.height&&(d.push(e.size.width),d.push(e.size.height)),d.push(e.scaleFactor||1)}),Object(v.a)().track("DISPLAY_INFO",{display_resolutions:d,window_frame:u})}}}}]),e}(),k=n("rWF5"),O=function(){function e(){f()(this,e)}return g()(e,[{key:"updateElements",value:function(e){var t=this,n=[];return Array.isArray(e)&&e.filter(function(e){return e&&e.getBoundingClientRect}).forEach(function(e){return n.push(t.updateElement(e))}),n}},{key:"updateElement",value:function(e,t){var n=t||e.id||e.type+"."+e.classList.toString().replace(/ /g,"."),a=e.getBoundingClientRect(),r={id:n,width:Math.round(a.width+2),height:Math.round(a.height+2),top:Math.round(a.top),left:Math.round(a.left)},i=Object(k.v)("3.0.0");if(r.width<2&&r.height<2&&i){var o=Object(s.G)(),l=o.filter(function(e){return e.id!==r.id});o.length>l.length&&Object(s.Mb)(l)}else Object(s.Mb)(r);return r}}]),e}(),j=n("H9m0"),C=n("GdsW"),E=n("lnxZ"),w=n("s19S"),S=n("QLsh"),I=n("ROZo"),T=Object(I.b)("TS.inline_videos.maybeStopInlineVideoPlayback"),N=n("N/g+"),R=n("2Y1Y"),A=n("i1Fx"),P=n("HvGc"),M=n("H0/5"),D=n("aK/h"),x=n("hhak"),L=n("QOdn"),F=n("UYUI"),B=n("6Jf9"),q=n("qN/r"),U=n("iZHp"),H=n("DTT0"),G=n("cTgs"),W=n("uf9I"),K=n("XfeM"),V=n("DtX9"),z=n("lhZz"),Y=n("Fdc0"),Q=n("yHhI"),J=n("cErB"),X=n("k2C/"),Z=n("Smdl"),$=n("DlLn"),ee=n("HuaI"),te="[DEEP-LINK]",ne=Object(K.b)("Performs deep link handling for arguments parsed from a slack: URI",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(Q.a)({getState:t,label:te});a.info("handleParsedDeepLink: received "+n);var r=n.cmd,i=o()(n,["cmd"]);if(!r)return a.warn("Missing command in payload, skipping deep link"),Promise.resolve(!1);var s=i.id,l=i.item,c=i.team;if(!c)return a.warn("Missing team in payload, skipping deep link"),Promise.resolve(!1);if(Object(Z.a)()&&Object(W.b)(t())!==c)return a.warn("Deeplink dispatched to the wrong team "+c+", redirecting"),Object(z.getClientStoreInstance)().dispatch(Object(ee.setFocusedWorkspace)({teamId:c})).then(function(){var e=Object(z.getStoreInstanceByTeamId)(c);return!!e&&e.dispatch(ne(n))});var u=Object(V.b)(t());e(Object(H.a)()),a.info("About to handle '"+r+"' command\u2026");var d="'"+r+"' is not yet implemented!";switch(r){case"browse":return"channels"===l?e(Object(L.a)()):(a.warn("No 'browse' command for item: "+l),Promise.resolve(!1));case"channel":return e(Object(x.a)({teamId:c,channelId:s,ts:i.message,threadTs:i.thread_ts}));case"create":return"channel"===l?e(Object(F.a)()):(a.warn("No 'create' command for item: "+l),Promise.resolve(!1));case"file":return e(Object(P.c)({fileId:s}));case"files":return e(Object(P.g)({filetype:i.file_type,user:i.user_id}));case"invite":return Object(Y.X)(u)?e(Object(B.a)()):(a.warn("User does not have access to invites"),Promise.resolve(!1));case"notifications":return e(Object(q.a)({activeSection:"notifications"}));case"preferences":return e(Object(q.a)({activeSection:i.section}));case"share-file":return e(Object(U.a)({fileId:s,showFileType:!0})),e(Object(P.c)({fileId:s}));case"team":return e(s?Object(P.j)({memberId:s}):Object(P.i)());case"user":return e(Object(G.a)({id:s}));default:return a.warn(d),Promise.resolve(!1)}});ne.propTypes={cmd:D.b.string.isRequired,team:D.b.string.isRequired,id:D.b.string,message:D.b.string,thread_ts:D.b.string},Object(K.b)("Performs deep link handling for a slack: URI",function(e,t,n){var a=Object(Q.a)({getState:t,label:te});if(a.info("handleDeepLink: received "+n),!n||!n.startsWith("slack://"))return a.warn("Deep link is empty or not a slack: link"),Promise.resolve(!1);var i=Object(J.j)(n),o=i.protocol,s=i.pathname,l=Object(M.a)(s,"/");if("slack:"!==o)return a.warn("Parsed link is not a slack: link"),Promise.resolve(!1);var c=Object(J.q)(n);return a.info("Parsed arguments from deep link",r()({cmd:l},c)),e(ne(r()({cmd:l},c)))}).propTypes=D.b.string.isRequired;var ae=Object(K.b)("Performs deep link handling for serialized JSON from the SSB",function(e,t,n){var a=Object(Q.a)({getState:t,label:te});a.info("handleDeepLinkFromDesktop: received deep link from desktop: "+n);var r=function(e){try{return JSON.parse(e)}catch(e){return null}}(n);return r?!r.team&&Object(Z.a)()&&Object(X.a)(r.cmd.toUpperCase())?Promise.resolve(Object($.i)(r.cmd.toUpperCase())):Object(Z.a)()&&r.team===Object(W.b)(t())?Object(z.getClientStoreInstance)().dispatch(Object(ee.setFocusedWorkspace)({teamId:r.team})).then(function(){return e(ne(r))}):e(ne(r)):(a.warn("Failed to parse the payload, skipping deep link"),Promise.resolve(!1))});ae.propTypes=D.b.string.isRequired;var re=n("eCgt"),ie=n("iH/p"),oe=n("BDy0"),se=n("HO/Y"),le=n("9/DQ"),ce=n("VjHM"),ue=n("9D+4"),de=n("aW/o"),pe=n("smxp"),he=n("D4L/"),me=n("5mKg"),be=n("Cfkr"),fe=n("VMwU"),_e=n("T5R/"),ge=n("tVnY"),ve=n("YB7p"),ye=n("KQjq"),ke=["https://www.dropbox.com/chooser?","https://www.dropbox.com/saver?","https://account.box.com/index.php?","https://account.box.com/webviews/login/box_select?","https://app.box.com/index.php?","https://app.boxcn.net","https://ent.box.com","https://onedrive.live.com",/^https:\/\/[\w.-]+my\.sharepoint\.com\//],Oe=["files/import/box","files/import/dropbox","files/import/gdrive","files/create/gdrive/auth","files/import/onedrive",/files\/(T[A-Z0-9]{8,}|W[A-Z0-9]{8,}|U[A-Z0-9]{8,})\/F[A-Z0-9]{8,}(\/[a-zA-Z0-9_]+)?/],je=Object(Q.b)();var Ce=r()({analytics:new y,nodrag:new O},S,{accessibilitySupportChanged:function(){return Object(oe.c)(Object(s.ab)())},canOpenURLInWindow:function(e,t){if(!t)return!1;if(t.startsWith("chrome://"))return!0;if(Object(J.g)(t))return!0;if(ke.some(function(e){return e instanceof RegExp?e.test(t):t.startsWith(e)}))return!0;var n=Object(me.o)(Object(he.d)(e)),a=Object(J.j)(t),r=a.hostname;return Oe.some(function(e){return e instanceof RegExp&&Object(J.h)(r)&&e.test(t)?t.startsWith(a.protocol+"//"+a.hostname):e instanceof RegExp?t.startsWith(""+n)&&e.test(t):t.startsWith(""+n+e)})},closeCall:A.a,focusNextWorkspace:ye.c,focusPreviousWorkspace:ye.d,getCurrentUserId:se.b,getCurrentUserName:function(e){return Object(V.b)(e).name},getEnterpriseId:W.a,getSelectedInputText:function(){var e=document.activeElement,t=Object(R.b)(e);return Object(R.d)(e,t.start,t.length)},getThemeValues:function(e){try{var t=JSON.parse(Object(ce.h)(e,"sidebar_theme_custom_values"));return Object(ge.b)(e)?r()({},t,Object(ge.a)(t)):t}catch(e){return fe.a}},getTokenFromBootData:se.g,getUserPref:ce.h,handleDeepLinkWithArgs:C.g,handleDeepLinkFromDesktop:ae,isOnBetaReleaseChannel:function(){return!1},maybeTickleMS:j.a,notificationActivated:function(e,t,n,a){je.info("DESKTOP","notificationActivated",{channelId:t,messageTs:n,threadTs:a}),e(Object(p.a)({channelId:t,messageTs:n,threadTs:a}))},notificationClicked:p.a,openDialog:function(e,t,n){switch(n){case"prefs":e(Object(q.a)());break;case"shortcuts":e(Object(P.h)());break;default:je.warn("openDialog failed, unrecognized dialog: "+n)}},openFromCmdF:ie.b,recentMessagesFromCurrentChannel:function(e){var t=Object(de.a)(e),n=[];return t&&(n=Object(c.a)(Object(l.a)(Object(pe.b)(e,t)),50),Object(k.p)()||Object(k.v)("3.3.0")||(n=n.map(function(e){return e.subtype?e:Object(u.a)(e,"subtype")}))),{user_id:Object(se.b)(e),msgs:n}},reload:ve.b,replyToNotification:function(){for(var e=void 0,t=void 0,n=void 0,a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];return 4===r.length?(e=r[0],t=r[1],n=r[3]):(e=r[0],t=r[1],n=r[2]),Object(re.a)({channelId:e,text:t,replyToTs:n})},setCurrentMemberPresence:ue.g,setFocusedWorkspace:ye.v,ssbChromeClicked:d.a,systemTextSettingsChanged:function(){Object(_e.a)({bustCache:!0})},teamSelectionChanged:function(e,t){Object(N.b)(),Object(w.b)(),T(),e(Object(le.p)(t))},track:be.c,updateDownloadsView:E.b,updateState:le.s}),Ee=n("pRVB"),we=n("PR8O"),Se=n("VjCB");n.d(t,"a",function(){return Ie});var Ie=Object(K.b)("Create a delegate object for interop with the desktop app",function(e,t){Object(we.a)()&&(s.V?(window.desktop.delegate||Object.defineProperty(window.desktop,"delegate",{get:function(){var e=t(),n=Object(Ee.e)(e)||Object(W.b)(e);return window.desktop.delegates&&window.desktop.delegates[n]},configurable:!0}),function(e,t){var n=Object(W.b)(t()),a=function(e,t){var n=Ce.accessibilitySupportChanged,a=Ce.canOpenURLInWindow,i=Ce.focusNextWorkspace,s=Ce.focusPreviousWorkspace,l=Ce.getCurrentUserId,c=Ce.getCurrentUserName,u=Ce.getEnterpriseId,d=Ce.getThemeValues,p=Ce.getTokenFromBootData,h=Ce.getUserPref,m=Ce.handleDeepLinkWithArgs,b=Ce.handleDeepLinkFromDesktop,f=Ce.maybeTickleMS,_=Ce.notificationActivated,g=Ce.notificationClicked,v=Ce.openDialog,y=Ce.openFromCmdF,k=Ce.recentMessagesFromCurrentChannel,O=Ce.replyToNotification,j=Ce.setCurrentMemberPresence,C=Ce.setFocusedWorkspace,E=Ce.teamSelectionChanged,w=Ce.updateState,S=o()(Ce,["accessibilitySupportChanged","canOpenURLInWindow","focusNextWorkspace","focusPreviousWorkspace","getCurrentUserId","getCurrentUserName","getEnterpriseId","getThemeValues","getTokenFromBootData","getUserPref","handleDeepLinkWithArgs","handleDeepLinkFromDesktop","maybeTickleMS","notificationActivated","notificationClicked","openDialog","openFromCmdF","recentMessagesFromCurrentChannel","replyToNotification","setCurrentMemberPresence","setFocusedWorkspace","teamSelectionChanged","updateState"]),I=function(t){return function(){return e(t.apply(void 0,arguments))}},T=function(e){return function(){return Object(z.getClientStoreInstance)().dispatch(e.apply(void 0,arguments))}},N=function(t){return function(){if(Object(Z.a)()){var n=Object(z.getClientStoreInstance)();return n.dispatch(Object(Se.a)(t.apply(void 0,arguments)))}return e(t.apply(void 0,arguments))}},R=function(t){return function(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];return t.apply(void 0,[e].concat(a))}},A=function(e){return function(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];return e.apply(void 0,[t()].concat(a))}};return r()({accessibilitySupportChanged:I(n),canOpenURLInWindow:A(a),focusNextWorkspace:T(i),focusPreviousWorkspace:T(s),getCurrentUserId:A(l),getCurrentUserName:A(c),getEnterpriseId:A(u),getThemeValues:A(d),getTokenFromBootData:A(p),getUserPref:A(h),handleDeepLinkWithArgs:Object(Z.a)()?I(b):m,maybeTickleMS:N(f),notificationActivated:R(_),notificationActivationHandler:function(e){var t=e.channelId,n=e.messageTs,a=e.threadTs,r=e.teamId;return Object(Z.a)()?T(C)({teamId:r}).then(function(){return I(g)({channelId:t,messageTs:n,threadTs:a})}):I(g)({channelId:t,messageTs:n,threadTs:a})},openDialog:(P=v,function(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];return P.apply(void 0,[e,t()].concat(a))}),openFromCmdF:I(y),recentMessagesFromCurrentChannel:A(k),replyToNotification:I(O),setCurrentMemberPresence:I(j),setFocusedWorkspace:function(e){return T(C)({teamId:e})},startSearch:I(y),teamSelectionChanged:R(E),updateState:function(){return Object(Z.a)()&&T(w).apply(void 0,arguments),N(w).apply(void 0,arguments)}},S);var P}(e,t);window.desktop.delegates||(window.desktop.delegates={});window.desktop.delegates[n]=a}(e,t)):Object(v.a)({state:t()}).track("DESKTOP_SCRIPTS_MISSING"))});Ie.propTypes=null},"bj+V":function(e,t,n){},"c+rX":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),h=n.n(p),m=n("aK/h"),b=n("XHGt"),f=n("peh1"),_=n("yHhI"),g=n("DTT0"),v=(m.b.arrayOf(m.b.element),m.b.func,{elements:null,logError:d.a}),y=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidCatch",value:function(e){var t=e?e.message:"";this.props.logError("MODAL-CONTAINER","componentDidCatch: "+t)}},{key:"render",value:function(){var e=this.props.elements;return h.a.createElement(p.Fragment,null,e)}}]),t}(p.Component);y.displayName="BaseModalContainer",y.defaultProps=v;var k=Object(f.createSelector)([function(e){return Object(g.c)(e)}],function(e){return e.map(function(e){return e.element})}),O=Object(b.b)(function(e){return{error:Object(_.a)({state:e}).error,elements:k(e)}},{})(y);t.a=O},c7HH:function(e,t,n){},cAy8:function(e,t,n){"use strict";var a=n("ifKl"),r=n("kxpR"),i=n.n(r),o=n("aK/h"),s=n("MnCE"),l=n("nNoG"),c=n("9/ob"),u=n("XLFM"),d=n("OkQS"),p=new l.b("attachments"),h=(o.b.bool,o.b.func,o.b.number,{isExpanded:!1,onClick:a.a,attachmentsOverLimitCount:0}),m=function(e){var t=e.isExpanded,n=e.onClick,a=e.attachmentsOverLimitCount;return i.a.createElement(c.a,{enabled:["feature_react_messages"]},i.a.createElement("div",{className:"c-message_attachment"},i.a.createElement(d.a,null),i.a.createElement("div",{className:"c-message_attachment__body"},i.a.createElement(u.c,{className:"c-message_attachment__over_limit_button",onClick:n},i.a.createElement("p",{className:"c-message_attachment__over_limit"},i.a.createElement("b",null,t?p.t("Show fewer attachments",{fallbackHash:"82ec3619e636876bba549869a1e98fc21e6bee00"}):p.t("{count, plural, =1 {+ # more attachment} other {+ # more attachments}}",{count:a,fallbackHash:"61f00263e27b3ffe8a86b728c78ef71614ebe535"})))))))};m.displayName="MessageAttachmentOverLimitButton",m.defaultProps=h,t.a=Object(s.a)(m)},cYut:function(e,t,n){},cnLP:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("aK/h"),p=n("kxpR"),h=n.n(p),m=n("TSYQ"),b=n.n(m),f=["top","bottom","left","right","top-right","bottom-right","top-left","bottom-left"],_=(d.b.node.isRequired,d.b.string,d.b.node.isRequired,d.b.oneOf(f).isRequired,d.b.object,{coachmarkAnchorClassNames:void 0,style:{}}),g=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.anchorRef=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.forceUpdate()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.coachmarkAnchorClassNames,a=e.coachmarkElement,r=e.orientation,i=e.style,o=b()("c-coachmark-anchor",n);return h.a.createElement("div",{id:"c-coachmark-anchor",ref:this.anchorRef,className:o,style:i},t,h.a.cloneElement(a,{anchorElement:this.anchorRef.current,orientation:r}))}}]),t}(p.PureComponent);g.displayName="CoachmarkAnchor",g.defaultProps=_,t.b=g},dEjE:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),h=n("aK/h"),m=n("TSYQ"),b=n.n(m),f=n("vSXf"),_=n("RhZ7"),g=n("TOh8"),v=n("0dpy"),y=n("8CL7"),k=n("VrmM"),O=n("fFZG"),j=n("rUi3"),C=n("Aeia"),E=n("Gq2+"),w=n("KmK8"),S=n("lU/5"),I=n("gl+W"),T=(n("dX4D"),h.b.number,h.b.string,h.b.string,h.b.object.isRequired,h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.bool,{avatarSize:24,className:void 0,flexOrigin:void 0,timestampClickable:!1,timestampFull:!0,timestampRelative:!1,blocksContainerContext:void 0,featureConsolidateContentRendering:!1}),N=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.avatarSize,n=e.className,a=e.flexOrigin,r=e.msg,i=e.timestampClickable,o=e.timestampFull,s=e.timestampRelative,l=e.blocksContainerContext,c=e.featureConsolidateContentRendering;return p.a.createElement(I.a,{className:b()("c-message_kit__message","c-message_kit__contextual_message",n)},p.a.createElement(S.a,{msg:r},p.a.createElement(w.a,{light:p.a.createElement(_.a,{msg:r,size:t})},p.a.createElement(g.a,{msg:r}),"\xa0\xa0",p.a.createElement(v.a,{msg:r,clickable:i,full:o,relative:s}),p.a.createElement("br",null),p.a.createElement(y.a,{msg:r}),c?p.a.createElement(k.a,{msg:r,blocksContainerContext:l}):null,p.a.createElement(E.a,{msg:r}),p.a.createElement(C.b,{msg:r}),p.a.createElement(O.a,{msg:r}),p.a.createElement(j.a,{flexOrigin:a,msg:r}))))}}]),t}(d.PureComponent);N.displayName="ContextualMessage",N.defaultProps=T,t.a=Object(f.a)("feature_consolidate_content_rendering")(N)},dX4D:function(e,t,n){},dohy:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("XfeM"),o=n("DTT0"),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),h=n("mRg0"),m=n.n(h),b=n("ifKl"),f=n("XHGt"),_=n("aK/h"),g=n("wd/R"),v=n.n(g),y=n("nNoG"),k=n("U3Q0"),O=n("hFPh"),j=n("cTBa"),C=n("llxT"),E=n("O0RF"),w=n("kOzZ"),S=n("negh"),I=n("1aDv"),T=n("mqzt"),N=n("82mD"),R=n("VjHM"),A=n("/LVU"),P=n("BicV"),M=(n("1iAE"),new y.b("do_not_disturb")),D=(_.b.func.isRequired,_.b.bool,_.b.bool,_.b.object,{do24hrTime:!1,inDnd:!1,clogger:{track:b.a}}),x=function(e){function t(e){l()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=v()().add(1,"hour").startOf("hour"),r=a.format("YYYY-MM-DD"),i=a.format("HH:mm"),o=v()(r+" "+i).unix();return n.state={snoozeEndDate:r,snoozeEndTime:i,snoozeEndTs:o},n.onDateChange=n.onDateChange.bind(n),n.onTimeChange=n.onTimeChange.bind(n),n.onGo=n.onGo.bind(n),n}return m()(t,e),u()(t,[{key:"onDateChange",value:function(e){var t=this.state.snoozeEndTime;this.setState(function(){return{snoozeEndDate:e,snoozeEndTs:v()(e+" "+t).unix()}})}},{key:"onTimeChange",value:function(e){var t=this.state.snoozeEndDate;this.setState(function(){return{snoozeEndTime:e,snoozeEndTs:v()(t+" "+e).unix()}})}},{key:"onGo",value:function(){var e=this.props,t=e.clogger,n=e.inDnd,a=this.state.snoozeEndTs,r=Object(T.a)(a);r<=0||(this.props.snoozeNotifications({duration:r,reason:"DndDialog:onGo"}),t.track(S.k.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:S.h.DURATION_CUSTOM,dnd_snooze_type:n?S.i.SNOOZE_ADJUST:S.i.SNOOZE_INITIAL}))}},{key:"getTimeSelectOptions",value:function(){var e=this.props.do24hrTime,t=this.state.snoozeEndDate===v()().format("YYYY-MM-DD"),n=v()().format("HH:mm");return Object.keys(I.a).filter(function(e){return!(t&&e<n)}).map(function(t){return{value:t,label:e?t:I.a[t]}})}},{key:"render",value:function(){var e=this.state,t=e.snoozeEndDate,n=e.snoozeEndTime,a=e.snoozeEndTs,i=Object(T.a)(a)<=0,o=Object(N.k)(a),s=M.t("Pause notifications until\u2026"),l=v()().format("YYYY-MM-DD"),c=v()().add(1,"year").format("YYYY-MM-DD");return r.a.createElement(k.a,{title:s,goButtonText:M.t("Pause Notifications"),goButtonType:"primary",goButtonIsDisabled:i,onGo:this.onGo,showCancelButton:!1},r.a.createElement(E.a,{htmlFor:"dnd_dialog_date_button",text:M.t("Date")},r.a.createElement(O.d,{position:"bottom",offsetX:67,dateFormat:"YYYY-MM-DD",selectedDate:t,onDateChange:this.onDateChange,disableDatesBefore:l,disableDatesAfter:c},r.a.createElement(C.a,{id:"dnd_dialog_date_button",className:"p-dnd_dialog__date_picker_trigger","aria-label":M.t("Date to snooze notifications until")},o))),r.a.createElement(E.a,{htmlFor:"dnd_dialog_time_select",text:M.t("Time")},r.a.createElement(j.b,{id:"dnd_dialog_time_select",options:this.getTimeSelectOptions(),onChange:this.onTimeChange,value:n,useFilteredInput:!1,usePlaceholderOption:!1})))}}]),t}(a.PureComponent);x.displayName="DndDialog",x.defaultProps=D;var L={snoozeNotifications:A.e},F=Object(f.b)(function(e){return{do24hrTime:Object(R.h)(e,"time24"),inDnd:!!Object(P.c)(e),clogger:Object(w.a)({state:e})}},L)(x),B=Object(i.b)("Opens the DND dialog",function(e,t,n){e(Object(o.e)({element:r.a.createElement(F,n)}))});B.propTypes=null;t.a=B},dutO:function(e,t,n){},"e+d/":function(e,t,n){"use strict";var a=new(n("nNoG").b)("files_types");t.a={applescript:{mimeType:"text/applescript",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("AppleScript"):""}},c:{mimeType:"text/x-csrc",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("C"):""},loader:function(){return Promise.all([n.e(0),n.e(45)]).then(n.t.bind(null,"S6bl",7))}},cfm:{mimeType:"text/plain",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("ColdFusion"):""}},clojure:{mimeType:"text/x-clojure",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Clojure"):""},loader:function(){return Promise.all([n.e(0),n.e(47)]).then(n.t.bind(null,"LA1u",7))}},coffeescript:{mimeType:"text/x-coffeescript",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("CoffeeScript"):""},loader:function(){return Promise.all([n.e(0),n.e(48)]).then(n.t.bind(null,"oL3q",7))}},cpp:{mimeType:"text/x-c++src",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("C++"):""},loader:function(){return Promise.all([n.e(0),n.e(45)]).then(n.t.bind(null,"S6bl",7))}},crystal:{mimeType:"text/x-crystal",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Crystal"):""},loader:function(){return Promise.all([n.e(0),n.e(50)]).then(n.t.bind(null,"JRJP",7))}},csharp:{mimeType:"text/x-csharp",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("C#"):""},loader:function(){return Promise.all([n.e(0),n.e(45)]).then(n.t.bind(null,"S6bl",7))}},css:{mimeType:"text/css",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("CSS"):""},loader:function(){return Promise.all([n.e(0),n.e(44)]).then(n.t.bind(null,"ewDg",7))}},cypher:{mimeType:"application/x-cypher-query",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Cypher"):""},loader:function(){return Promise.all([n.e(0),n.e(51)]).then(n.t.bind(null,"vW+e",7))}},csv:{mimeType:"text/csv",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("CSV"):""}},d:{mimeType:"text/x-d",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("D"):""},loader:function(){return Promise.all([n.e(0),n.e(52)]).then(n.t.bind(null,"zRyg",7))}},dart:{mimeType:"text/x-dart",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Dart"):""},loader:function(){return Promise.all([n.e(0),n.e(45),n.e(53)]).then(n.t.bind(null,"6q/U",7))}},diff:{mimeType:"text/x-diff",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Diff"):""},loader:function(){return Promise.all([n.e(0),n.e(54)]).then(n.t.bind(null,"3fnu",7))}},dockerfile:{mimeType:"text/x-dockerfile",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Docker"):""},loader:function(){return Promise.all([n.e(0),n.e(55)]).then(n.t.bind(null,"R6x9",7))}},erlang:{mimeType:"text/x-erlang",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Erlang"):""},loader:function(){return Promise.all([n.e(0),n.e(56)]).then(n.t.bind(null,"9RTS",7))}},fortran:{mimeType:"text/x-fortran",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Fortran"):""},loader:function(){return Promise.all([n.e(0),n.e(57)]).then(n.t.bind(null,"UYub",7))}},fsharp:{mimeType:"text/x-fsharp",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("F#"):""},loader:function(){return Promise.all([n.e(0),n.e(68)]).then(n.t.bind(null,"NU+Z",7))}},gherkin:{mimeType:"text/x-feature",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Gherkin"):""},loader:function(){return Promise.all([n.e(0),n.e(58)]).then(n.t.bind(null,"tkAH",7))}},go:{mimeType:"text/x-go",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Go"):""},loader:function(){return Promise.all([n.e(0),n.e(59)]).then(n.t.bind(null,"T/QY",7))}},groovy:{mimeType:"text/x-groovy",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Groovy"):""},loader:function(){return Promise.all([n.e(0),n.e(60)]).then(n.t.bind(null,"X7TR",7))}},handlebars:{mimeType:"text/x-handlebars-template",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Handlebars"):""},loader:function(){return Promise.all([n.e(0),n.e(61)]).then(n.t.bind(null,"4d6s",7))}},haskell:{mimeType:"text/x-haskell",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Haskell"):""},loader:function(){return Promise.all([n.e(0),n.e(62)]).then(n.t.bind(null,"0+DK",7))}},haxe:{mimeType:"text/x-haxe",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Haxe"):""},loader:function(){return Promise.all([n.e(0),n.e(63)]).then(n.t.bind(null,"We/1",7))}},html:{mimeType:"text/html",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("HTML"):""},loader:function(){return Promise.all([n.e(0),n.e(44),n.e(46),n.e(64)]).then(n.t.bind(null,"1p+/",7))}},java:{mimeType:"text/x-java",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Java"):""},loader:function(){return Promise.all([n.e(0),n.e(45)]).then(n.t.bind(null,"S6bl",7))}},javascript:{mimeType:"text/javascript",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("JavaScript/JSON"):""},loader:function(){return Promise.all([n.e(0),n.e(46)]).then(n.t.bind(null,"+dQi",7))}},julia:{mimeType:"text/x-julia",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Julia"):""},loader:function(){return Promise.all([n.e(0),n.e(65)]).then(n.t.bind(null,"NGrM",7))}},kotlin:{mimeType:"text/x-kotlin",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Kotlin"):""},loader:function(){return Promise.all([n.e(0),n.e(45)]).then(n.t.bind(null,"S6bl",7))}},latex:{mimeType:"text/x-stex",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("LaTeX/sTeX"):""},loader:function(){return Promise.all([n.e(0),n.e(83)]).then(n.t.bind(null,"+NIl",7))}},lisp:{mimeType:"text/x-lisp",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Lisp"):""},loader:function(){return Promise.all([n.e(0),n.e(49)]).then(n.t.bind(null,"kmAK",7))}},lua:{mimeType:"text/x-lua",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Lua"):""},loader:function(){return Promise.all([n.e(0),n.e(66)]).then(n.t.bind(null,"jrMQ",7))}},markdown:{mimeType:"text/x-markdown",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Markdown (raw)"):""},loader:function(){return Promise.all([n.e(0),n.e(91)]).then(n.t.bind(null,"lZu9",7))}},mathematica:{mimeType:"text/x-mathematica",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Mathematica"):""},loader:function(){return Promise.all([n.e(0),n.e(67)]).then(n.t.bind(null,"ztbM",7))}},matlab:{mimeType:"text/x-octave",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("MATLAB"):""},loader:function(){return Promise.all([n.e(0),n.e(70)]).then(n.t.bind(null,"mybg",7))}},mumps:{mimeType:"text/x-mumps",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("MUMPS"):""},loader:function(){return Promise.all([n.e(0),n.e(69)]).then(n.t.bind(null,"Q7su",7))}},objc:{mimeType:"text/x-objectivec",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Objective-C"):""},loader:function(){return Promise.all([n.e(0),n.e(45)]).then(n.t.bind(null,"S6bl",7))}},ocaml:{mimeType:"text/x-ocaml",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("OCaml"):""},loader:function(){return Promise.all([n.e(0),n.e(68)]).then(n.t.bind(null,"NU+Z",7))}},pascal:{mimeType:"text/x-pascal",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Pascal"):""},loader:function(){return Promise.all([n.e(0),n.e(71)]).then(n.t.bind(null,"lB9V",7))}},perl:{mimeType:"text/x-perl",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Perl"):""},loader:function(){return Promise.all([n.e(0),n.e(92)]).then(n.t.bind(null,"kG+r",7))}},php:{mimeType:"application/x-httpd-php",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("PHP"):""},loader:function(){return Promise.all([n.e(0),n.e(44),n.e(46),n.e(45),n.e(95)]).then(n.t.bind(null,"RNWO",7))}},pig:{mimeType:"text/x-pig",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Pig"):""},loader:function(){return Promise.all([n.e(0),n.e(72)]).then(n.t.bind(null,"860+",7))}},powershell:{mimeType:"text/x-powershell",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("PowerShell"):""},loader:function(){return Promise.all([n.e(0),n.e(73)]).then(n.t.bind(null,"naPG",7))}},puppet:{mimeType:"text/x-puppet",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Puppet"):""},loader:function(){return Promise.all([n.e(0),n.e(74)]).then(n.t.bind(null,"cwoo",7))}},python:{mimeType:"text/x-python",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Python"):""},loader:function(){return Promise.all([n.e(0),n.e(75)]).then(n.t.bind(null,"25Eh",7))}},r:{mimeType:"text/x-rsrc",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("R"):""},loader:function(){return Promise.all([n.e(0),n.e(76)]).then(n.t.bind(null,"kD6b",7))}},ruby:{mimeType:"text/x-ruby",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Ruby"):""},loader:function(){return Promise.all([n.e(0),n.e(77)]).then(n.t.bind(null,"hTYL",7))}},rust:{mimeType:"text/x-rustsrc",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Rust"):""},loader:function(){return Promise.all([n.e(0),n.e(78)]).then(n.t.bind(null,"sY4N",7))}},sass:{mimeType:"text/x-sass",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Sass"):""},loader:function(){return Promise.all([n.e(0),n.e(44),n.e(79)]).then(n.t.bind(null,"G2Pi",7))}},scala:{mimeType:"text/x-scala",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Scala"):""},loader:function(){return Promise.all([n.e(0),n.e(45)]).then(n.t.bind(null,"S6bl",7))}},scheme:{mimeType:"text/x-scheme",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Scheme"):""},loader:function(){return Promise.all([n.e(0),n.e(80)]).then(n.t.bind(null,"8wdy",7))}},shell:{mimeType:"text/x-sh",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Shell"):""},loader:function(){return Promise.all([n.e(0),n.e(81)]).then(n.t.bind(null,"AvDn",7))}},smalltalk:{mimeType:"text/x-stsrc",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Smalltalk"):""},loader:function(){return Promise.all([n.e(0),n.e(82)]).then(n.t.bind(null,"n4Nj",7))}},sql:{mimeType:"text/x-sql",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("SQL"):""},loader:function(){return Promise.all([n.e(0),n.e(94)]).then(n.t.bind(null,"/9rB",7))}},swift:{mimeType:"text/x-swift",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Swift"):""},loader:function(){return Promise.all([n.e(0),n.e(84)]).then(n.t.bind(null,"wOIU",7))}},tsv:{mimeType:"text/tab-separated-values",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("TSV"):""}},typescript:{mimeType:"text/typescript",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("TypeScript"):""},loader:function(){return Promise.all([n.e(0),n.e(46)]).then(n.t.bind(null,"+dQi",7))}},vb:{mimeType:"text/x-vb",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("VB.NET"):""},loader:function(){return Promise.all([n.e(0),n.e(85)]).then(n.t.bind(null,"Kr55",7))}},vbscript:{mimeType:"text/vbscript",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("VBScript"):""},loader:function(){return Promise.all([n.e(0),n.e(86)]).then(n.t.bind(null,"axah",7))}},velocity:{mimeType:"text/x-velocity",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Velocity"):""},loader:function(){return Promise.all([n.e(0),n.e(87)]).then(n.t.bind(null,"/kYp",7))}},verilog:{mimeType:"text/x-verilog",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Verilog"):""},loader:function(){return Promise.all([n.e(0),n.e(88)]).then(n.t.bind(null,"m2bc",7))}},xml:{mimeType:"text/xml",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("XML"):""},loader:function(){return Promise.all([n.e(0),n.e(89)]).then(n.t.bind(null,"1eCo",7))}},yaml:{mimeType:"text/x-yaml",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("YAML"):""},loader:function(){return Promise.all([n.e(0),n.e(90)]).then(n.t.bind(null,"ztCB",7))}}}},e74f:function(e,t,n){},eD8c:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),h=n("kxpR"),m=n.n(h),b=n("aK/h"),f=n("g5qt"),_=n("yHhI"),g=n("Smdl"),v=n("oLrU"),y=(b.b.node.isRequired,b.b.func.isRequired,b.b.bool,function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onDesktopContextMenu=n.onDesktopContextMenu.bind(n),n}return p()(t,e),l()(t,[{key:"onDesktopContextMenu",value:function(){var e=this.props,t=e.getTemplate,n=e.overrideDefaultMenu,a=t().map(function(e){return r()({},e,{id:Object(v.a)()})});Object(f.zb)(a,n)}},{key:"render",value:function(){var e=this;return Object(g.a)()?f.V?m.a.Children.map(this.props.children,function(t){return m.a.cloneElement(t,{onContextMenu:e.onDesktopContextMenu})})[0]:this.props.children:(Object(_.b)().error("Context menus are only supported in Sonic"),this.props.children)}}]),t}(h.PureComponent));y.displayName="ContextMenuTrigger",t.a=y,y.defaultProps={overrideDefaultMenu:!1}},eK75:function(e,t,n){"use strict";var a=n("fCVm");t.a=function(){return Object(a.a)().r}},eSdw:function(e,t,n){},erm0:function(e,t,n){},fCVm:function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"e",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return l});var a=n("Sb2x"),r=a.TSF.replaceFormatContents,i=a.TSF.swapOutPlaceholders,o=a.TSF.getTokensArray,s=a.TSF.getTokensString,l=a.TSF.getEmojiRx},fFZG:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),h=n("aK/h"),m=n("XHGt"),b=n("TSYQ"),f=n.n(b),_=n("oqAd"),g=n("Q+UV"),v=(n("2Dlx"),h.b.string,h.b.string,{className:void 0,reactionKey:null}),y=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.reactionKey,a=f()("c-message_kit__reaction_bar",t);return p.a.createElement(_.a,{className:a,reactionKey:n})}}]),t}(d.PureComponent);y.displayName="MessageReactionBar",y.defaultProps=v;t.a=Object(m.b)(function(e,t){var n=t.msg;return n?{reactionKey:Object(g.b)(n)}:null})(y)},fHJC:function(e,t,n){},fj0Z:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),h=n("aK/h"),m=n("od5y"),b=n("XLFM"),f=n("3LxC"),_=n("nNoG"),g=n("YB7p"),v=(n("tEVE"),new _.b("sonic_workspace_boot_failure")),y=(h.b.bool,h.b.bool,h.b.bool,h.b.bool,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderAccessLimitedView",value:function(){var e=this.props,t=e.shouldRetry;if(!e.featureLimitedAccessUI)return null;var n=t&&p.a.createElement("div",{className:"p-fallback_view__reload"},p.a.createElement(b.d,{type:"outline",size:"medium",onClick:g.a},v.t("Try Again")));return p.a.createElement("div",{className:"p-workspace__boot_failure"},p.a.createElement(m.b,{type:"warning",className:"p-workspace__boot_failure_icon"}),p.a.createElement("h1",{className:"p-workspace__boot_failure_title"},v.t("Your current network has blocked this workspace.")),p.a.createElement("p",{className:"p-workspace__boot_failure_description"},v.t("Your current network will only allow you to access certain Slack workspaces (usually, just the ones you use for work)."),p.a.createElement("br",null),p.a.createElement("br",null),v.t("To get connected, change networks and try again.")),n)}},{key:"renderGenericView",value:function(){var e=this.props,t=e.shouldRetry,n=e.featureBootFallbackViewV1,a=e.featureLimitedAccessUI,r=n?v.t("contact us"):"contact us",i=t&&p.a.createElement("div",{className:"p-fallback_view__reload"},p.a.createElement(b.d,{type:"outline",size:"medium",onClick:g.a},a?v.t("Reload"):"Reload"));return p.a.createElement("div",{className:"p-workspace__boot_failure"},p.a.createElement(m.b,{type:"exclamation-circle",className:"p-workspace__boot_failure_icon"}),p.a.createElement("h1",{className:"p-workspace__boot_failure_title"},n?v.t("Something\u2019s gone awry, and we\u2019re having trouble loading your workspace."):"Something\u2019s gone awry, and we\u2019re having trouble loading your workspace."),p.a.createElement("p",{className:"p-workspace__boot_failure_description"},n?v.rt("Sorry we can\u2019t be more specific \u2014 this is one of those cases where we don\u2019t know what\u2019s gone wrong either. A restart of Slack may help, and you can always {contactLink}.",{contactLink:p.a.createElement(f.a,{href:"https://slack.com/help/contact"},r)}):p.a.createElement(d.Fragment,null,"Sorry we can\u2019t be more specific \u2014 this is one of those cases where we don\u2019t know what\u2019s gone wrong either. A restart of Slack may help, and you can always"," ",p.a.createElement(f.a,{href:"https://slack.com/help/contact"},"contact us"),".")),i)}},{key:"render",value:function(){return this.props.isAccessLimited&&this.props.featureLimitedAccessUI?this.renderAccessLimitedView():this.renderGenericView()}}]),t}(d.PureComponent));y.displayName="WorkspaceBootFailure",t.a=y,y.defaultProps={featureBootFallbackViewV1:!1,shouldRetry:!1,isAccessLimited:!1,featureLimitedAccessUI:!1}},frt6:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("kxpR"),o=n.n(i),s=n("LpuC");n("RMJC");function l(e){return o.a.createElement("span",{className:"c-color_slider"},o.a.createElement("span",{className:"c-color_slider__outer_hue_track"}),o.a.createElement("span",{className:"c-color_slider__inner_hue_track"}),o.a.createElement(s.a,r()({className:"c-color_slider__slider",min:0,max:359},e)))}l.displayName="HueSlider",t.a=l},ftfc:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),h=n("ifKl"),m=n("kxpR"),b=n.n(m),f=n("XHGt"),_=n("aK/h"),g=n("nNoG"),v=n("Idin"),y=n("iqSe"),k=n("pguY"),O=n("D4L/"),j=n("81nI"),C=n("7nxQ"),E=n("kOzZ"),w=n("zmn3"),S=n("uPpK"),I=n("tn36"),T=n("qPro"),N=n("tQ8E"),R=n("cD5Y"),A=n("od5y"),P=n("ynxK"),M=n("lek6"),D=function(e){return b.a.createElement("div",null,b.a.createElement(P.a,{"data-qa":"article-"+e.article.id,className:"p-help_search__list__item "+(e.isFocus?"p-help_search__list__item__focus":""),key:e.article.id+"-list-item",onClick:function(){e.onClickArticle(e.article.url)},onKeyDown:function(t){13===t.keyCode&&e.onClickArticle(e.article.url)}},b.a.createElement("div",{className:"p-help_search__list__item__title"},"string"==typeof e.article.title?b.a.createElement(M.a,{className:"c-channel_search_result__justification",text:e.article.title,showTooltips:!1}):e.article.title),b.a.createElement(A.b,{type:"enter",className:"p-help_search__list__icon"})))};D.displayName="Article",D.defaultProps={article:{},isFocus:!1,onClickArticle:h.a};var x=D,L=(n("nTMe"),new g.b("help")),F=(_.b.string,_.b.string,_.b.arrayOf(_.b.shape({id:_.b.oneOfType([_.b.number,_.b.string]),images:_.b.array,label_names:_.b.array,title:_.b.node,url:_.b.string})),_.b.shape({open:_.b.number,closed:_.b.number,unread:_.b.number}),_.b.func,_.b.bool,_.b.func,_.b.bool,{query:"",helpCenterToken:"",articles:[],tickets:{closed:0,read:0,unread:0},onQueryChange:h.a,isLoading:!1,onOpenLink:h.a,autoFocus:!1}),B=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={query:n.props.query,articles:n.props.articles,focusFirstResult:!0,isLoading:n.props.isLoading},n.zdLocale=Object(C.a)(),Object(I.a)(n,["onListMouseEnter","onSearchInputChange","onSearchInputSubmit","onClickArticle","onSearchInputBlur","renderArticles"]),n}return p()(t,e),l()(t,[{key:"componentWillReceiveProps",value:function(e){e.articles!==this.state.articles&&this.setState(function(){return{articles:e.articles,isLoading:e.isLoading}})}},{key:"onListMouseEnter",value:function(){this.setState(function(){return{focusFirstResult:!1}})}},{key:"onSearchInputChange",value:function(e){var t=e.target.value;this.setState(function(){return{query:t,focusFirstResult:!0}}),this.props.onQueryChange(t)}},{key:"onSearchInputSubmit",value:function(){this.state.articles.length&&this.openLinkInNewWindow(Object(j.a)(this.state.articles[0].url,this.props.helpCenterToken))}},{key:"onClickArticle",value:function(e){this.openLinkInNewWindow(Object(j.a)(e,this.props.helpCenterToken))}},{key:"onSearchInputBlur",value:function(){this.setState(function(){return{focusFirstResult:!1}})}},{key:"openLinkInNewWindow",value:function(e){(0,this.props.onOpenLink)(e,this.state.query),window.open(Object(j.a)(e,this.props.helpCenterToken))}},{key:"renderArticles",value:function(e){var t=this.state.articles[e];return b.a.createElement(x,{article:t,isFocus:this.state.focusFirstResult&&0===e,onClickArticle:this.onClickArticle})}},{key:"render",value:function(){var e=this,t=this.props.autoFocus,n=this.state,a=n.query,r=n.articles;return this.keys=Object(w.a)(r,"id").map(function(e){return e.toString()}),b.a.createElement(m.Fragment,null,b.a.createElement(T.a,{placeholder:L.t("Search the Help Center"),value:a,icon:"search",autoFocus:t,hasResetButton:!0,onChange:this.onSearchInputChange,onSubmit:this.onSearchInputSubmit,blurOnSubmit:!0,className:"margin_top_200 margin_bottom_100",size:"large",onBlur:this.onSearchInputBlur}),a?null:b.a.createElement("div",{className:"p-help_search__popular_topics padding_bottom_100 bold"},L.t("Popular help topics")),b.a.createElement("div",{role:"list",className:"p-help_search__list display_flex flex_direction_column justify_content_between",onMouseEnter:this.onListMouseEnter},this.state.isLoading?b.a.createElement(R.a,{size:"large",color:"blue",noMargin:!0}):b.a.createElement("div",{className:"p-help_search__list__inner full_height"},b.a.createElement(S.a,null,function(t){var n=t.width,a=t.height;return b.a.createElement(N.a,{width:n,height:a,keys:e.keys,rowRenderer:e.renderArticles})}))))}}]),t}(m.Component);B.displayName="HelpSearch",B.defaultProps=F;var q=B,U=new g.b("help"),H=(_.b.string,_.b.string,_.b.func,_.b.object.isRequired,_.b.bool,_.b.func,_.b.arrayOf(_.b.oneOfType([_.b.number,_.b.shape({type:_.b.string.isRequired,id:_.b.number.isRequired,text:_.b.string}),_.b.shape({type:_.b.string.isRequired,url:_.b.string.isRequired,text:_.b.string.isRequired})])),{query:"",helpCenterTrackingToken:"",fetchHelpArticles:h.a,autoFocus:!1,onQueryChange:h.a,defaultArticlesData:null});function G(e){return"number"==typeof e||"helplink"===e.type?e.id||e:null}var W=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={query:n.props.query,articles:[],isLoading:!0},n.allArticles=[],n.onQueryChange=n.onQueryChange.bind(n),n.zdLocale=Object(C.a)(),n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.fetchHelpArticles({reason:"help-search-container/componentDidMount"})}},{key:"onQueryChange",value:function(e){var t=e?this.filterArticlesByQuery(e):this.defaultArticles;if(e&&t.length<7){var n=Object(j.b)({query:e,zdLocale:this.zdLocale,sidTrackingToken:this.props.helpCenterTrackingToken});t.push({id:-99999,images:[],label_names:[],title:U.rt('Search for "{query}" on the Help Center',{query:e}),url:n})}this.setState(function(){return{query:e,articles:t}}),this.props.onQueryChange(e)}},{key:"filterPopularArticles",value:function(e){var t=[];return e.forEach(function(e){e.popular&&t.push(e)}),t.sort(function(e,t){return void 0===e.order?1:void 0===t.order?-1:e.order-t.order}),t}},{key:"filterDefaultArticles",value:function(e){var t=this.props.defaultArticlesData;if(!t)return[];var n={};return t.forEach(function(t){var a=G(t);a&&(n[a]=e.find(function(e){return e.id===a}))}),t.map(function(e,t){var a=G(e);return a&&n[a]?"number"==typeof e?n[a]:r()({},n[a],{title:e.text||n[a].title}):{id:"customArticle-"+t,title:e.text,url:e.url}})}},{key:"filterArticlesByQuery",value:function(e){var t,n,a,r=(t=e,a=Math.min(n||5e5,5e5),t.length>a?Object(k.a)(t.slice(0,a)):Object(k.a)(t)),i=new RegExp(r,"i"),o=-1,s=this.allArticles.filter(function(e,t){return e.title.toLowerCase()===r.toLowerCase()?(o=t,!1):e.title.match(i)});return-1!==o&&s.unshift(this.allArticles[o]),s}},{key:"processArticles",value:function(e){var t=this;this.allArticles=JSON.parse(e.articles).articles,this.defaultArticles=this.props.defaultArticlesData?this.filterDefaultArticles(this.allArticles):this.filterPopularArticles(this.allArticles),this.state.query?this.setState(function(){return{articles:t.filterArticlesByQuery(t.props.query),isLoading:!1}}):this.setState(function(){return{articles:t.defaultArticles,isLoading:!1}})}},{key:"fetchHelpArticles",value:function(){var e=this;this.props.fetchHelpArticles({locale:this.zdLocale,reason:"help-search-container/fetchHelpArticles"}).then(function(t){e.processArticles(t)})}},{key:"render",value:function(){var e=this.state,t=e.articles,n=e.query,a=e.isLoading,r=this.props,i=r.clogger,o=r.autoFocus;return b.a.createElement(q,{articles:t,query:n,autoFocus:o,helpCenterToken:this.props.helpCenterTrackingToken,onQueryChange:this.onQueryChange,isLoading:a,clogger:i})}}]),t}(m.Component);W.displayName="HelpSearchContainer",W.defaultProps=H;var K={fetchHelpArticles:v.a},V=Object(f.b)(function(e){return{clogger:Object(E.a)({state:e}),helpCenterTrackingToken:Object(y.b)(e),team:Object(O.d)(e)}},K)(W);t.a=V},fxy3:function(e,t,n){},"gl+W":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),h=n("aK/h"),m=n("TSYQ"),b=n.n(m),f=n("Q3oM"),_=(n("aQya"),h.b.string,h.b.node,{className:void 0,children:void 0}),g=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=b()("c-message_kit__pillow",this.props.className);return p.a.createElement(f.a,{className:e},this.props.children)}}]),t}(d.PureComponent);g.displayName="MessagePillow",t.a=g,g.defaultProps=_},gl8A:function(e,t,n){e.exports=n.p+"hummus-200e354.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},gtcZ:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("tfYw"),u=n.n(c),d=n("mRg0"),p=n.n(d),h=n("fp5s"),m=n("f8fv"),b=n("Zr7G"),f=n("eK5+");function _(e){return function(t){function n(t){r()(this,n);var a=l()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return a.uniqueId=Object(h.a)(),a.name=Object(m.a)(e.name),a.telemeter=Object(b.a)(),a.logMetrics=a.telemeter&&Object(f.a)(1),a}return p()(n,t),o()(n,[{key:"componentWillMount",value:function(){var e;this.logMetrics&&this.telemeter.mark("react_"+this.name+"_mount_mark_"+this.uniqueId);for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentWillMount",this)&&(e=u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentWillMount",this)).call.apply(e,[this].concat(a))}},{key:"componentDidMount",value:function(){for(var e,t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentDidMount",this)&&(e=u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentDidMount",this)).call.apply(e,[this].concat(a)),this.logMetrics&&this.telemeter.measureAndClear("react_"+this.name+"_mount_mark_"+this.uniqueId,"react_"+this.name+"_mount")}},{key:"componentWillUpdate",value:function(){var e;this.logMetrics&&this.telemeter.mark("react_"+this.name+"_update_mark_"+this.uniqueId);for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentWillUpdate",this)&&(e=u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentWillUpdate",this)).call.apply(e,[this].concat(a))}},{key:"componentDidUpdate",value:function(){for(var e,t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentDidUpdate",this)&&(e=u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentDidUpdate",this)).call.apply(e,[this].concat(a)),this.logMetrics&&this.telemeter.measureAndClear("react_"+this.name+"_update_mark_"+this.uniqueId,"react_"+this.name+"_update")}}]),n}(e)}},h0LD:function(e,t,n){"use strict";var a=n("XfeM"),r=n("smxp"),i=n("clTI"),o=n("aK/h"),s=n("yHhI"),l=n("r31G"),c=Object(a.b)("log message to console (for debugging)",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,o=n.ts,c=t(),u=Object(r.a)(c,a,o),d=Object(i.d)(c,a);u&&(Object(s.a)({getState:t}).warn(u),e(Object(l.d)({message:u,modelObject:d})))});c.propTypes={channelId:o.b.string.isRequired,ts:o.b.string.isRequired},t.a=c},hQtm:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),h=n("aK/h"),m=n("XHGt"),b=n("tn36"),f=n("HvGc"),_=n("1tet"),g=n("b7Ww"),v=n("OISv"),y=n("CaXY"),k=n("P2f5"),O=n("dEjE"),j=(h.b.string.isRequired,h.b.string.isRequired,h.b.string,h.b.object,{className:void 0,comment:void 0}),C=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.comment,n=e.fileId,a=e.className;if(!t)return null;var r={user:t.user,ts:t.timestamp.toString(),subtype:"file_comment",comment:t,files:[n]};return p.a.createElement(O.a,{msg:r,className:a})}}]),t}(d.PureComponent);C.displayName="PinnedItemFileComment",C.defaultProps=j;var E=Object(m.b)(function(e,t){var n=t.fileId,a=t.commentId;return{comment:Object(k.i)(e,n,a)}})(C),w=(h.b.object.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(b.a)(n,["onFileClick","renderMessage","renderFile","renderFileComment"]),n}return u()(t,e),o()(t,[{key:"onFileClick",value:function(e,t){t&&this.props.previewFile({fileId:t.id,flexOrigin:"details",flexOriginId:"pins"})}},{key:"renderMessage",value:function(e){return e&&e.ts?p.a.createElement(v.a,{msg:e,timestampClickable:!0,onFileClick:this.onFileClick,className:"p-pinned_items__message",flexOrigin:"details",flexOriginId:"pins",blocksContainerContext:y.a.pinned_items}):null}},{key:"renderFile",value:function(e){return e&&e.id?p.a.createElement(g.a,{file:e,onClick:this.onFileClick,showActions:!1}):null}},{key:"renderFileComment",value:function(e){return e&&e.id?p.a.createElement(E,{commentId:e.id,fileId:e.fileId}):null}},{key:"render",value:function(){var e=this.props.pin;return e.type===_.a.FILE?this.renderFile(e):e.type===_.a.FILE_COMMENT?this.renderFileComment(e):this.renderMessage(e)}}]),t}(d.PureComponent));w.displayName="PinnedItem";t.a=Object(m.b)(null,function(e){return{previewFile:function(){return e(f.c.apply(void 0,arguments))}}})(w)},hZjP:function(e,t,n){},hinm:function(e,t,n){e.exports=n.p+"animal_stick-fa91213.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},hqEo:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("kxpR"),o=n.n(i),s=n("aK/h"),l=n("XfeM"),c=n("yHhI"),u=n("DTT0"),d=n("XEIi"),p=n("O6kw"),h=n("aW/o"),m=n("iCc5"),b=n.n(m),f=n("V7oC"),_=n.n(f),g=n("FYw3"),v=n.n(g),y=n("mRg0"),k=n.n(y),O=n("lCmp"),j=n("NFsq"),C=n("ifKl"),E=n("X6iR"),w=n("tn36"),S=n("XHGt"),I=n("TSYQ"),T=n.n(I),N=n("yPgC"),R=n("HO/Y"),A=n("13mM"),P=n("XzsM"),M=n("nNoG"),D=n("36Nc"),x=n("kOzZ"),L=n("negh"),F=n("qgNY"),B=n("h9dl"),q=n("aLpA"),U=n("+yap"),H=n("5lF5"),G=n("FN36"),W=n("+dLL"),K=n("b0Xh");var V=n("D4L/"),z=n("5mKg"),Y=n("UuzP"),Q=n("oLrU"),J=n("RB1+"),X=n("a+Oh"),Z=n("H2PH"),$=n("sJy+"),ee=n("U3Q0"),te=n("XLFM"),ne=n("plEq"),ae=n("O0RF"),re=n("lwWk"),ie=n("Rszm"),oe=n("0f2Y"),se=n("uPpK"),le=n("Vfgr"),ce=n("YVZO"),ue=(s.b.string.isRequired,s.b.string.isRequired,s.b.string,s.b.string,s.b.func.isRequired,{threadTs:void 0,initialFileTitle:void 0}),de=function(e){function t(e){b()(this,t);var n=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleRename=n.handleRename.bind(n),n}return k()(t,e),_()(t,[{key:"handleRename",value:function(e){var t=this.props,n=t.fileId,a=t.channelId,r=t.threadTs;this.props.renamePendingFile({channelId:a,threadTs:r,fileId:n,title:Object(le.a)(e)})}},{key:"render",value:function(){var e=this.props.initialFileTitle;return o.a.createElement(ce.a,{initialFileTitle:e,handleRename:this.handleRename})}}]),t}(i.PureComponent);de.displayName="RenamePendingFileDialog",de.defaultProps=ue;var pe={renamePendingFile:function(){return d.j.apply(void 0,arguments)}},he=Object(S.b)(null,pe)(de),me=Object(l.b)("Opens the rename file dialog",function(e,t,n){e(Object(u.e)({element:o.a.createElement(he,n),isStackable:!0}))});me.propTypes={file:N.a.File().isRequired,channelId:s.b.string.isRequired,threadTs:s.b.string};var be=me,fe=n("P9LH"),_e=n("8QLk"),ge=n("UXvI"),ve=n("rWF5"),ye=n("lfjV"),ke=n("od5y"),Oe=(s.b.oneOf(["left","right"]).isRequired,s.b.bool,s.b.func,{isShowing:!0,onClick:C.a}),je=function(e){var t=e.arrowDirection,n=e.onClick,a=e.isShowing,r=T()("p-gallery_scroller__arrow","p-gallery_scroller__"+t+"_arrow",{"p-gallery_scroller__arrow_hidden":!a});return o.a.createElement("div",{className:r},o.a.createElement(ke.b,{type:"circle-fill",className:"p-gallery_scroller__arrow_fill",size:"inherit"}),o.a.createElement(ke.b,{type:"arrow-large-"+t,className:"p-gallery_scroller__arrow_icon",onClick:function(e){return n(e,t)}}))};je.displayName="GalleryScrollerArrow",je.defaultProps=Oe;var Ce=je,Ee=(n("sUzI"),s.b.node.isRequired,s.b.number.isRequired,s.b.number,"right"),we="left",Se=50,Ie=function(e){function t(e){b()(this,t);var n=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onArrowClick=n.onArrowClick.bind(n),n.onScroll=Object(ge.a)(n.onScroll,Se).bind(n),n.onContentMutation=n.onContentMutation.bind(n),n.setWrapperRef=n.setWrapperRef.bind(n),n.setContentRef=n.setContentRef.bind(n),n.wrapper=void 0,n.content=void 0,n.mutationObserver=new MutationObserver(n.onContentMutation),n.state={scrollLeft:0,scrollWidth:void 0},n}return k()(t,e),_()(t,[{key:"componentDidMount",value:function(){this.content&&this.mutationObserver.observe(this.content,{childList:!0,subtree:!0})}},{key:"componentWillUnmount",value:function(){this.mutationObserver.disconnect()}},{key:"onArrowClick",value:function(e,t){e.preventDefault();var n=this.props.pageSize,a=this.state.scrollLeft+(t===Ee?n:-n),r=this.getMinScroll(),i=this.getMaxScroll(),o=Object(_e.a)(a,r,i);i-o<50?o=i:o-r<50&&(o=r),this.scrollWithAnimation(o)}},{key:"onScroll",value:function(e){if(e){var t=e.scrollLeft;this.setState(function(){return{scrollLeft:t}})}}},{key:"onContentMutation",value:function(){var e=this.state.scrollWidth,t=this.content&&this.content.scrollWidth;e!==t&&this.setState(function(e){return r()({},e,{scrollWidth:t})})}},{key:"getMinScroll",value:function(){return 0}},{key:"getMaxScroll",value:function(){if(!this.content)return 0;var e=this.props.width;return this.state.scrollWidth-e}},{key:"setWrapperRef",value:function(e){if(e){this.wrapper=e;var t=this.wrapper.scrollLeft;this.setState(function(e){return r()({},e,{scrollLeft:t})})}}},{key:"setContentRef",value:function(e){if(e){this.content=e;var t=this.content.scrollWidth;this.setState(function(e){return r()({},e,{scrollWidth:t})})}}},{key:"shouldShowArrow",value:function(e){var t=e.arrowDirection,n=this.props.width,a=this.state,r=a.scrollLeft,i=a.scrollWidth,o=this.getMinScroll(),s=this.getMaxScroll();return t===Ee?r<s&&i>n:r>o}},{key:"scrollWithAnimation",value:function(e){var t=this,n=0;this.trackAnimation&&this.trackAnimation.cancel(),this.trackAnimation=Object(ye.a)({fromValue:this.wrapper.scrollLeft,toValue:e,duration:160,delta:!0,onTick:function(e){var a=e.value,r=e.nextTick,i=t.wrapper.scrollLeft+a+n,o=Math.round(i);n=i-o,t.wrapper.scrollLeft=o,r()}})}},{key:"renderArrow",value:function(e){var t=e.arrowDirection,n=this.shouldShowArrow({arrowDirection:t});return o.a.createElement(Ce,{arrowDirection:t,onClick:this.onArrowClick,isShowing:n})}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,a=t.children,r=T()("p-galler_scroller__wrapper",{"p-galler_scroller__wrapper--can_scroll":Object(ve.j)()});return o.a.createElement("div",{className:"p-gallery_scroller",style:{width:n}},o.a.createElement("div",{className:r,ref:this.setWrapperRef,onScroll:function(t){return e.onScroll(t&&t.target)}},o.a.createElement("div",{className:"p-gallery_scroller__content",ref:this.setContentRef},a)),this.renderArrow({arrowDirection:we}),this.renderArrow({arrowDirection:Ee}))}}]),t}(i.Component);Ie.displayName="GalleryScroller",Ie.defaultProps={pageSize:100};var Te=Ie,Ne=n("anFW"),Re=n("RfGh"),Ae=n("9gIX"),Pe=n("wOaD"),Me=(n("j4JU"),new M.b("multi_file_upload")),De=(s.b.object.isRequired,s.b.bool,s.b.string,s.b.func,function(e){function t(){return b()(this,t),v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k()(t,e),_()(t,[{key:"renderEditFileButton",value:function(){var e=this.props.onEditFile;return e?o.a.createElement(te.c,{className:"p-pending_file__edit_btn","aria-label":Me.t("Edit file title"),onClick:e},Me.t("Edit")):null}},{key:"render",value:function(){var e=this.props,t=e.file,n=e.className,a=e.isCompact,r=T()("p-pending_file",n,{"p-pending_file--compact":a}),i=a?o.a.createElement(Pe.a,{file:t,isCompact:!0}):o.a.createElement(Ae.a,{file:t,showThumbnail:!1},this.renderEditFileButton());return o.a.createElement(Re.a,{file:t,className:r,showActions:!1},i)}}]),t}(i.PureComponent));De.displayName="PendingFile",De.defaultProps={isCompact:!1,className:null,onEditFile:null};var xe=De,Le=n("b98e"),Fe=n("18Pa"),Be=(n("lKsX"),new M.b("multi_file_upload")),qe=(s.b.string,s.b.string,s.b.string,s.b.string,s.b.func,s.b.func,{fileId:void 0,channelId:void 0,threadTs:void 0,title:void 0,closeModal:C.a,openRenamePendingFileDialog:C.a}),Ue=function(e){function t(e){b()(this,t);var n=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.closeModal=n.closeModal.bind(n),n.renameFile=n.renameFile.bind(n),n}return k()(t,e),_()(t,[{key:"closeModal",value:function(){this.props.closeModal()}},{key:"renameFile",value:function(){var e=this.props,t=e.fileId,n=e.channelId,a=e.threadTs,r=e.title;this.props.openRenamePendingFileDialog({fileId:t,channelId:n,threadTs:a,initialFileTitle:r})}},{key:"render",value:function(){var e=this.props.title;return o.a.createElement("div",{className:"p-file_viewer__header"},o.a.createElement("div",{className:"p-file_viewer__header__meta"},o.a.createElement("div",{className:"p-file_viewer__header__meta__stack"},o.a.createElement("div",{className:"bold"},e),o.a.createElement(te.c,{className:"p-file_viewer__header__meta__minor p-file_viewer__header__edit_btn","aria-label":Be.t("Edit file title"),onClick:this.renameFile},Be.t("Edit")))),o.a.createElement("div",{className:"p-file_viewer__header__actions"},o.a.createElement(Fe.a,{className:"p-file_viewer__header__button",icon:"times",backgroundStyle:null,onClick:this.closeModal})))}}]),t}(i.PureComponent);Ue.displayName="Header",Ue.defaultProps=qe;var He=Object(S.b)(null,function(e){return{closeModal:function(){return e(Object(u.a)())},openRenamePendingFileDialog:function(t){return e(be(t))}}})(Ue),Ge=n("N36p"),We=(s.b.string.isRequired,s.b.string.isRequired,s.b.string,s.b.string,s.b.shape({src:s.b.string,width:s.b.number,height:s.b.number,orientation:s.b.number}),{threadTs:void 0,title:void 0,image:void 0}),Ke=function(e){function t(){return b()(this,t),v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k()(t,e),_()(t,[{key:"render",value:function(){var e=this.props,t=e.image,n=e.title,a=e.fileId,r=e.channelId,i=e.threadTs;return o.a.createElement(Le.a,{contentLabel:n},o.a.createElement(He,{title:n,fileId:a,channelId:r,threadTs:i}),o.a.createElement(Ge.a,{title:n,image:t}))}}]),t}(i.Component);Ke.displayName="FileViewer",Ke.defaultProps=We;var Ve=Object(S.b)(function(e,t){var n=t.fileId,a=t.channelId,r=t.threadTs,i=t.image;if(!n||!a||!i)return null;var o=Object(d.d)(e,{fileId:n,channelId:a,threadTs:r});return{fileId:n,channelId:a,threadTs:r,title:o.title||o.name,image:i}})(Ke),ze=Object(l.b)("Opens the PendingFileViewer",function(e,t,n){e(Object(u.e)({element:o.a.createElement(Ve,n),isStackable:!0}))});ze.propTypes=r()({},Ve.propTypes);var Ye=ze;var Qe=function(e){return new Promise(function(t,n){if(e&&e instanceof File)if(window.FileReader)if(e.dataUrl)t({dataUrl:e.dataUrl,orientation:e.orientation,width:e.width,height:e.height});else{var a=new FileReader;a.onload=function(n){var a=n.target.result,r=function(e){for(var t=e.replace(/^data:([^;]+);base64,/gim,""),n=atob(t),a=n.length,r=new Uint8Array(a),i=0;i<a;i++)r[i]=n.charCodeAt(i);return r.buffer}(a),i=Object(K.readFromBinaryFile)(r),o=i&&"number"==typeof i.Orientation?i.Orientation:null,s=new Image;s.onload=function(){var n=s.width,r=s.height;e.dataUrl=a,e.orientation=o,e.width=n,e.height=r,t({dataUrl:a,orientation:o,width:n,height:r})},s.src=a},a.onloadstart=function(e){Object(C.a)(e)},a.onerror=function(e){a.abort(),n(e)},a.readAsDataURL(e)}else n(new Error("Cannot read file data, browser does not support FileReader"));else n(new Error("Invalid file argument provided to getPendingFileData"))})},Je=n("cD5Y"),Xe=(n("TepT"),new M.b("multi_file_upload")),Ze=(s.b.object.isRequired,s.b.string,s.b.string,s.b.bool,s.b.string,s.b.func,{channelId:void 0,threadTs:void 0,useThumbnail:!1,className:null,openPendingFileViewer:C.a}),$e=function(e){function t(e){b()(this,t);var n=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.state={dataUrl:void 0,orientation:void 0,height:void 0,width:void 0,isLoading:!0},n}return k()(t,e),_()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.file;Qe(t).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.dataUrl,a=t.orientation,r=t.height,i=t.width;e.setState(function(){return{dataUrl:n,orientation:a,height:r,width:i}}),requestAnimationFrame(function(){e.setState(function(){return{isLoading:!1}})})}).catch(function(e){Object(C.a)(e)})}},{key:"onClick",value:function(e){e.stopPropagation();var t=this.props,n=t.file,a=t.channelId,r=t.threadTs,i=this.state,o=i.dataUrl,s=i.width,l=i.height,c=i.orientation;this.props.openPendingFileViewer({fileId:n.id,channelId:a,threadTs:r,title:n.title||n.name,image:{src:o,width:s,height:l,orientation:c}})}},{key:"renderImage",value:function(){var e=this.props.file,t=this.state.dataUrl;return o.a.createElement("img",{className:"p-pending_image_file__img",src:t,alt:Object(fe.k)(e)})}},{key:"renderImageThumbnail",value:function(){var e=this.props.file,t=(this.state||{}).dataUrl,n=t?{backgroundImage:"url('"+t+"')"}:null;return o.a.createElement("span",{className:"p-pending_image_file__thumbnail",style:n,ariaLabel:Object(fe.k)(e)})}},{key:"render",value:function(){var e=this.props,t=e.file,n=e.useThumbnail,a=e.className,r=this.state,i=r.isLoading,s=r.orientation,l=r.height,c=r.width,u=n?1:l/c;if(!Object(fe.K)(t))return null;var d=T()("p-pending_image_file",a,{"p-pending_image_file__thumbnail_container":n,"p-pending_image_file__loading":i});return o.a.createElement(te.c,{className:"p-pending_image_file__btn",onClick:this.onClick,"aria-label":Xe.t("Preview image"),style:Object(fe.u)({orientation:s,imageDimensionRatio:u})},o.a.createElement("div",{className:d},n?this.renderImageThumbnail():this.renderImage(),o.a.createElement(Je.a,{size:"large",className:"p-pending_image_file__loading_spinner"})))}}]),t}(i.PureComponent);$e.displayName="PendingImageFile",$e.defaultProps=Ze;var et=Object(S.b)(null,function(e){return{openPendingFileViewer:function(){return e(Ye.apply(void 0,arguments))}}})($e),tt=new M.b("multi_file_upload"),nt=(s.b.string.isRequired,s.b.string.isRequired,s.b.string,s.b.func,s.b.bool,{threadTs:null,removePendingFile:C.a,featureMultiFileUpload:!0}),at=function(e){function t(e){b()(this,t);var n=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onRemoveFileClick=n.onRemoveFileClick.bind(n),n}return k()(t,e),_()(t,[{key:"onRemoveFileClick",value:function(e){e.stopPropagation();var t=this.props,n=t.fileId,a=t.channelId,r=t.threadTs;n&&a&&this.props.removePendingFile({channelId:a,threadTs:r,fileId:n})}},{key:"render",value:function(){return this.props.featureMultiFileUpload?o.a.createElement(te.c,{className:"p-multi_file_upload__remove_btn",onClick:this.onRemoveFileClick,"aria-label":tt.t("Remove file")},o.a.createElement(ke.b,{type:"circle-fill",className:"p-multi_file_upload__remove_btn_circle"}),o.a.createElement(ke.b,{type:"times-circle",className:"p-multi_file_upload__remove_btn_times"})):null}}]),t}(i.PureComponent);at.displayName="RemoveFileButton",at.defaultProps=nt;var rt=Object(S.b)(null,{removePendingFile:d.i})(at),it=(n("pmpI"),new M.b("multi_file_upload")),ot=(s.b.arrayOf(s.b.object),s.b.string.isRequired,s.b.string,s.b.bool,s.b.func,s.b.func,s.b.func,{files:[],threadTs:null,isCompact:!1,processAndAddPendingFiles:C.a,openRenamePendingFileDialog:C.a,filterFilesForUpload:C.a}),st=function(e){function t(e){b()(this,t);var n=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hiddenFileInputRef=o.a.createRef(),n.onAddFileClick=n.onAddFileClick.bind(n),n.onPendingFileClick=n.onPendingFileClick.bind(n),n.onFilesSelectedHandler=n.onFilesSelectedHandler.bind(n),n}return k()(t,e),_()(t,[{key:"onAddFileClick",value:function(){this.hiddenFileInputRef&&this.hiddenFileInputRef.current&&this.hiddenFileInputRef.current.click()}},{key:"onPendingFileClick",value:function(e,t){e.stopPropagation();var n=this.props,a=n.channelId,r=n.threadTs,i=t.title||t.name;this.props.openRenamePendingFileDialog({fileId:t.id,channelId:a,threadTs:r,initialFileTitle:i})}},{key:"onFilesSelectedHandler",value:function(e){var t=this;if(!e||!e.length)return Promise.resolve();var n=this.props,a=n.channelId,r=n.threadTs;return this.props.filterFilesForUpload({selectedFiles:e,channelId:a,threadTs:r}).then(function(e){e&&e.length&&t.props.processAndAddPendingFiles({channelId:a,threadTs:r,files:e})})}},{key:"getComponentSize",value:function(){var e=this.props,t=e.files;return e.isCompact?"small":t&&1===t.length&&this.shouldRenderPendingImage(t[0])?"large":"medium"}},{key:"shouldRenderPendingImage",value:function(e){return Object(fe.K)(e)&&e.size<26214400}},{key:"renderRemoveFileButton",value:function(e){var t=this.props,n=t.files,a=t.channelId,r=t.threadTs;return n&&n.length<2?null:o.a.createElement(rt,{fileId:e,channelId:a,threadTs:r})}},{key:"renderPendingImageFile",value:function(e){var t=this.props,n=t.files,a=t.channelId,r=t.threadTs,i=t.isCompact,s=n&&n.length>1||i;return o.a.createElement(et,{file:e,channelId:a,threadTs:r,useThumbnail:s})}},{key:"renderPendingFile",value:function(e){var t=this,n=this.props.isCompact;return o.a.createElement(xe,{file:e,isCompact:n,onEditFile:function(n){return t.onPendingFileClick(n,e)}})}},{key:"renderAddFileButton",value:function(){var e=this.props.files,t=e&&e.length||0,n=t<q.s,a=t>1,r=it.t("Add file"),i=it.t("({selectedFileCount} of {maxFileUploadCount} selected)",{selectedFileCount:t,maxFileUploadCount:q.s});return o.a.createElement("div",{className:"p-multi_file_upload__add_file_btn_container"},n?o.a.createElement(te.c,{className:"p-multi_file_upload__add_file_btn","aria-label":r,onClick:this.onAddFileClick},r,o.a.createElement(Ne.a,{ref:this.hiddenFileInputRef,onFilesSelectedHandler:this.onFilesSelectedHandler})):null,a?o.a.createElement("span",{className:"p-multi_file_upload__file_count"},i):null)}},{key:"renderFileGallery",value:function(){var e=this,t=this.props.files;return o.a.createElement("div",{className:"p-multi_file_upload__file_gallery"},t.map(function(t){return o.a.createElement("div",{className:"p-multi_file_upload__file_container",key:t.id},e.shouldRenderPendingImage(t)?e.renderPendingImageFile(t):e.renderPendingFile(t),e.renderRemoveFileButton(t.id))}))}},{key:"renderFileGalleryScroller",value:function(){var e=this;return o.a.createElement(se.a,{disableHeight:!0},function(t){var n=t.width;return o.a.createElement(Te,{width:n,pageSize:230},e.renderFileGallery())})}},{key:"render",value:function(){if(!this.props.files)return null;var e=this.getComponentSize(),t=T()("p-multi_file_upload__container","p-multi_file_upload__container--"+e);return o.a.createElement("div",{className:t},this.renderFileGalleryScroller(),this.renderAddFileButton())}}]),t}(i.Component);st.displayName="MultiFileUpload",st.defaultProps=ot;var lt=Object(S.b)(function(e,t){var n=t.channelId,a=t.threadTs;return{files:Object(d.f)(e,{channelId:n,threadTs:a})}},{processAndAddPendingFiles:d.g,openRenamePendingFileDialog:be,filterFilesForUpload:p.a})(st),ct=n("IyaR"),ut=n("Y6FH"),dt=n("Hvpu"),pt=n("Zwlx"),ht=n("iJ4v"),mt=n("r6UO"),bt=(n("yWse"),new M.b("file-upload")),ft=(s.b.array.isRequired,s.b.string,s.b.func,s.b.bool,s.b.bool,s.b.func,s.b.func,s.b.func,s.b.string,s.b.func,s.b.string,s.b.string,s.b.bool,s.b.number,s.b.string,s.b.bool,s.b.bool,s.b.bool,s.b.bool,s.b.string,s.b.string,s.b.bool,s.b.string,s.b.object,s.b.bool,s.b.bool,s.b.bool,s.b.bool,s.b.bool,s.b.string,s.b.object,s.b.object.isRequired,s.b.arrayOf(N.a.File()),s.b.func,s.b.bool,s.b.bool,{selectedChannelId:null,setSelectedChannel:C.a,canPostInSelectedChannel:!1,canThread:!1,closeModal:C.a,switchToChannel:C.a,getShareableChannelId:C.a,msgText:"",setMsgText:C.a,disallowedKeywordInMsgText:null,initialText:"",initialBroadcast:!1,retentionDuration:null,threadTs:null,overStorageLimit:!1,isStdPlan:!1,isPlusPlan:!1,isEnterprisePlan:!1,channelType:"channel",selectedChannelName:"",fromPaste:!1,teamId:void 0,inputProxy:void 0,isOffline:!1,featureOfflineMode:!1,featureSonicInputs:!1,featureWysiwygComposer:!1,clientToolBar:!1,currentChannelId:void 0,pendingFiles:null,clearPendingFilesForDialog:C.a,isInEnforceFileLimitTreatment:!1,metadata:void 0,isLegacyDropboxPicker:!1}),_t=function(e){function t(e){b()(this,t);var n=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(w.a)(n,["onGo","onCancel","onCancelAll","onCancelDiscard","closeDialog","onTextChange","onFileNameChange","onShareWithChange","onBroadcastChange","onEditCollapsedFileNameClick","setFileNameInputRef","clogPricingLinkClick"]),n.fileNameInput=null,n.initialText=n.props.initialText,n.logger=Object(c.b)(),n.state=r()({confirmClose:!1,confirmCancelAll:!1,submitting:!1},n.getStateForFileAtIndex(0),{broadcast:e.initialBroadcast}),n}return k()(t,e),_()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.files,n=e.clogger,a=(this.state||0).fileIndex;this.shouldShowStorageWarning()&&n.track(L.k.GROWTH_PRICING,{contexts:{ui_context:{action:L.v.IMPRESSION,step:L.z.FILE_UPLOAD,ui_component:L.w.FILE_STORAGE_LIMIT_BANNER}}}),this.isMultiFileUpload()||t&&this.maybeLoadImagePreview(t[a])}},{key:"onCancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props.msgText,n=this.state,a=n.confirmClose,r=n.confirmCancelAll;return!a&&t&&t.length>q.h?(this.setState(function(){return{confirmClose:!0,confirmCancelAll:e}}),!1):(e||!this.hasMoreFiles()||r?this.closeDialog():this.goToNextFile(),!1)}},{key:"onCancelAll",value:function(){return this.onCancel(!0)}},{key:"onCancelDiscard",value:function(){return this.setState(function(){return{confirmClose:!1,confirmCancelAll:!1}}),!1}},{key:"onGo",value:function(){var e=this,t=this.state,n=t.shareWith,a=t.fileName,r=t.fileIndex,i=t.confirmClose,o=t.broadcast,s=this.props,l=s.selectedChannelId,c=s.msgText,u=s.threadTs,d=s.teamId,p=s.pendingFiles;if(this.isGoDisabled())return!1;if(i)return this.onCancel();this.initialText=null;var h=this.props,m=h.switchToChannel,b=h.files,f=h.getShareableChannelId,_=h.metadata,g=n?Object(Q.a)():void 0;return(n?f({channelOrMemberId:l}):Promise.resolve(null)).then(function(t){if(e.isMultiFileUpload()){e.closeDialog(),Object(Z.a)(d).uploadFiles({files:p,shareData:{channelId:t,clientMsgId:g,introMessage:n?c:null,threadTs:t?u:null,broadcast:t&&u?o:null,metadata:_}}).then(function(){e.logger.info("UPLOAD-DIALOG","Multi-file upload complete for: "+g)}).catch(function(t){e.logger.warn("Multi-file upload failed for: "+g+"; with error "+t)}),e.logger.info("UPLOAD-DIALOG","Beginning multi-file upload for: "+g)}else{e.hasMoreFiles()||e.closeDialog();var i=b[r];Object(Z.a)(d).uploadFiles({files:[i],shareData:{channelId:t,clientMsgId:g,title:a||e.initialFileName(i),link:i.link,introMessage:n?c:null,threadTs:t?u:null,broadcast:t&&u?o:null,isBox:i.is_box,isDropbox:i.is_dropbox,metadata:_}})}e.hasMoreFiles()?e.goToNextFile():t&&!u&&m({id:t}),e.setState(function(){return{submitting:!1}})}),this.setState(function(){return{submitting:!0}}),!1}},{key:"onTextChange",value:function(e){var t=e.text,n=e.overLimit;this.props.setMsgText(t),this.setState(function(){return{overMsgLengthLimit:n}})}},{key:"onFileNameChange",value:function(e){this.setState(function(){return{fileName:e,overFileNameLimit:e.length>q.r}})}},{key:"onShareWithChange",value:function(e){var t=e.target.checked;this.setState(function(){return{shareWith:!!t}})}},{key:"onBroadcastChange",value:function(e){this.setState(function(){return{broadcast:e}})}},{key:"onEditCollapsedFileNameClick",value:function(){this.setState(function(){return{collapseFileNameInput:!1}}),this.fileNameInput.focus()}},{key:"setFileNameInputRef",value:function(e){this.fileNameInput=e}},{key:"getStateForFileAtIndex",value:function(e){var t=this.props.files[e],n=t&&Object(j.a)(t.type,"image");return{fileIndex:e,defaultFileName:this.initialFileName(t),fileName:"",shareWith:!0,previewDataUrl:null,overMsgLengthLimit:!1,overFileNameLimit:!1,exifOrientation:null,previewImageDimensionsRatio:null,collapseFileNameInput:n,broadcast:!1}}},{key:"getStorageWarning",value:function(){var e=this,t=this.props,n=t.isStdPlan,a=t.isPlusPlan,r=t.isEnterprisePlan,i=t.isInEnforceFileLimitTreatment;if(!this.shouldShowStorageWarning())return null;var s=function(t){var n=t.text;return o.a.createElement(oe.a,{href:"/pricing?ui_step="+L.z.FILE_UPLOAD+"&ui_element="+L.y.PRICING_LINK,target:"_blank",rel:"noopener noreferrer",onClick:e.clogPricingLinkClick,"data-qa":"file-upload-dialog_pricing-link"},n)};return n?bt.rt("Your workspace has reached the Standard plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,s):a?bt.rt("Your workspace has reached the Plus plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,s):r?bt.rt("It looks like your organization\u2019s reached the file storage limit. If that sounds wrong, you may want to <a>contact Slack</a>.",null,function(e){var t=e.text;return o.a.createElement(re.a,{href:"/help/requests/new",target:"_blank"},t)}):i?bt.rt("Your free workspace is limited to 5 GB of files. If you upload more files, you\u2019ll lose access to some older ones. To view them again and get more space, <a>upgrade to a paid plan</a>.",null,s):bt.rt("Your workspace has reached the Free plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade to a paid plan</a>.",null,s)}},{key:"shouldShowStorageWarning",value:function(){var e=this.props,t=e.overStorageLimit,n=e.files[this.state.fileIndex];return t&&!n.is_dropbox&&!n.is_box&&!n.is_external}},{key:"clogPricingLinkClick",value:function(){this.props.clogger.track(L.k.GROWTH_PRICING,{contexts:{ui_context:{action:L.v.CLICK,step:L.z.FILE_UPLOAD,ui_element:L.y.PRICING_LINK,ui_component:L.w.FILE_STORAGE_LIMIT_BANNER}}})}},{key:"isMultiFileUpload",value:function(){var e=this.props.files;return!Object(O.a)(e,function(e){return e.is_box||e.is_dropbox})}},{key:"isMultipleFiles",value:function(){return!this.isMultiFileUpload()&&this.props.files.length>1}},{key:"hasMoreFiles",value:function(){if(!this.isMultipleFiles())return!1;var e=this.props.files,t=this.state.fileIndex;return e.length>t+1}},{key:"goToNextFile",value:function(){var e=this,t=this.props,n=t.files,a=t.setMsgText,i=this.state.fileIndex;this.setState(function(){return r()({confirmClose:!1},e.getStateForFileAtIndex(i+1))},function(){e.maybeLoadImagePreview(n[i+1])}),a("")}},{key:"closeDialog",value:function(){var e=this.props,t=e.initialBroadcast,n=e.inputProxy,a=e.threadTs,r=e.featureSonicInputs,i=e.currentChannelId;if(this.props.closeModal(),this.isMultiFileUpload()&&this.props.clearPendingFilesForDialog(),this.initialText){var o=this.initialText;setTimeout(function(){if(n)n.setText(o),n.setBroadcast(t),n.focus();else if(a)Object(H.g)(o,t);else if(r){var e=Object(J.a)({viewContext:q.y.MESSAGE_PANE,channelId:i});e&&e.setText(o)}else Object(U.e)(o)},10)}}},{key:"initialFileName",value:function(e){return!e.name||this.props.fromPaste?bt.t("Pasted image at {date}",{date:Object(D.a)(Date.now()/1e3)}):e.name}},{key:"isUsingNewDropboxApp",value:function(){var e=this.props,t=e.isLegacyDropboxPicker,n=e.files;return Object(O.a)(n,function(e){return e.is_dropbox})&&t}},{key:"isGoDisabled",value:function(){var e=this.state,t=e.submitting,n=e.shareWith,a=e.overMsgLengthLimit,r=e.overFileNameLimit,i=this.props,o=i.canPostInSelectedChannel,s=i.threadTs,l=i.canThread,c=i.disallowedKeywordInMsgText,u=i.isOffline,d=i.featureOfflineMode;return t||n&&!o&&!s||n&&s&&!l||n&&!!c||a||r||d&&u}},{key:"maybeLoadImagePreview",value:function(e){var t=this;if(window.FileReader&&!e.is_box&&!e.is_dropbox)if("string"!=typeof e)try{var n=new FileReader;n.onload=function(n){var a=n.target.result;Object(E.a)(a,"data:image/")&&t.loadImagePreviewWithOrientation(e,a)},n.onloadstart=function(e){e.total>33554432&&(t.logger.info("UPLOAD-DIALOG","Skipping image preview for large file: "+e.total),n.abort())},n.readAsDataURL(e)}catch(e){this.logger.warn("Error loading upload preview"),this.logger.warn(e)}else this.setState(function(){return{previewDataUrl:"data:image/png;base64,"+e,collapseFileNameInput:!0}})}},{key:"loadImagePreviewWithOrientation",value:function(e,t){var n=this;(function(e){return new Promise(function(t,n){var a=Object(c.b)();try{var r=new FileReader;r.onload=function(e){var n=Object(K.readFromBinaryFile)(e.target.result);n&&"number"==typeof n.Orientation?t(n.Orientation):t(null)},r.readAsArrayBuffer(e)}catch(e){a.warn("Error reading exif data"),a.warn(e),n(e)}})})(e).then(function(e){if(e&&1!==e){var a=new Image;a.onload=function(){var r=a.width,i=a.height/r;n.setState(function(){return{previewDataUrl:t,previewImageDimensionsRatio:i,exifOrientation:e,collapseFileNameInput:!0}})},a.src=t}else n.setState(function(){return{previewDataUrl:t,collapseFileNameInput:!0}})})}},{key:"renderBroadcastCheckbox",value:function(){var e=this.props,t=e.threadTs,n=e.canPostInSelectedChannel,a=e.channelType,r=e.selectedChannelName,i=this.state.broadcast;return t&&n?o.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--broadcast"},o.a.createElement(mt.a,{channelType:a,selectedChannelName:r,value:i,onChange:this.onBroadcastChange})):null}},{key:"renderImagePreview",value:function(){var e=this.state,t=e.previewDataUrl,n=e.previewImageDimensionsRatio,a=e.exifOrientation,r=e.fileName;if(!this.state.previewDataUrl)return null;var i=bt.t("Preview of {fileName}",{fileName:r}),s=void 0;2===a?s="scaleX(-1)":3===a?s="rotate(180deg)":4===a?s="rotate(180deg) scaleX(-1)":5===a?s="rotate(90deg) scale("+n+", -"+n+")":6===a?s="rotate(90deg) scale("+n+")":7===a?s="rotate(90deg) scale(-"+n+", "+n+")":8===a&&(s="rotate(-90deg) scale("+n+", "+n+")");var l={};return s&&(l.transform=s),o.a.createElement("div",{className:"p-file_upload_dialog__section"},o.a.createElement("div",{className:"p-file_upload_dialog__preview"},o.a.createElement("div",{style:l},o.a.createElement("img",{className:"p-file_upload_dialog__preview_image",src:t,alt:i}))))}},{key:"renderShareWith",value:function(){var e=this.props,t=e.threadTs,n=e.selectedChannelId,a=this.state.shareWith;return t?o.a.createElement(ht.a,{channelId:n,threadTs:t}):o.a.createElement(ae.a,{text:bt.t("Share with:"),htmlFor:"file-upload-share-with",type:"inline"},o.a.createElement(ie.a,{id:"file-upload-share-with",defaultChecked:a,onChange:this.onShareWithChange}))}},{key:"renderChannelPicker",value:function(){var e=this.props,t=e.selectedChannelId,n=e.setSelectedChannel,a=e.threadTs,r=this.state.shareWith;return a?null:o.a.createElement(ut.a,{initialChannelId:t,onChange:n,isDisabled:!r,optionsListOffsetBottom:window.innerHeight})}},{key:"renderCancelAllButton",value:function(){return o.a.createElement(te.d,{type:"outline",className:"p-file_upload_dialog__footer_cancel_all",onClick:this.onCancelAll,tabIndex:"-1","data-qa":"dialog-cancel-all"},bt.t("Cancel All"))}},{key:"renderMultiFileShareInputs",value:function(){return this.isMultipleFiles()?o.a.createElement("div",{className:"p-file_upload_dialog__section"},this.renderShareWith(),this.renderChannelPicker()):null}},{key:"renderFooterExtra",value:function(){return this.isMultipleFiles()?this.renderCancelAllButton():o.a.createElement("div",{className:"p-file_upload_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderWarning",value:function(){var e=this.getStorageWarning(),t=Object(pt.a)(this.props);if(!t&&!e)return null;var n=this.props.isInEnforceFileLimitTreatment?"info":"warning";return o.a.createElement("div",{className:"p-file_upload_dialog__section","data-qa":"share-dialog_warning"},o.a.createElement($.d,{type:"inline",level:n},e?o.a.createElement("span",{className:"p-share_dialog__warning_message"},e):null,t))}},{key:"renderCollapsedFileName",value:function(){var e=this.state,t=e.defaultFileName,n=e.collapseFileNameInput,a=T()("p-file-upload_dialog__preview_file_name",{"p-file-upload_dialog__preview_file_name--hide":!n}),r=bt.rt("edit"),i=bt.rt("Edit file name: {fileName}",{fileName:t});return o.a.createElement("div",{className:a},o.a.createElement("span",{className:"p-file-upload_dialog__preview_file_name_text"},t),o.a.createElement(oe.a,{className:"p-file-upload_dialog__preview_file_name_edit",onClick:this.onEditCollapsedFileNameClick,tabIndex:n?null:"-1","aria-label":i},r))}},{key:"renderExpandedFileNameInput",value:function(){if(this.isUsingNewDropboxApp())return null;var e=this.state,t=e.fileName,n=e.defaultFileName,a=e.collapseFileNameInput,r=T()("p-file_upload_dialog__file_name_input",{"p-file_upload_dialog__file_name_input--hide":a});return o.a.createElement(ae.a,{text:bt.t("File name"),htmlFor:"file-upload-name",className:r},o.a.createElement(ne.a,{id:"file-upload-name",name:"file-upload-name",value:t,maxCharacterLimit:q.r,counterMinimumCharacters:q.A,onChange:this.onFileNameChange,placeholder:n,tabIndex:a?"-1":null,ref:this.setFileNameInputRef}))}},{key:"renderFileNameInput",value:function(){return o.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section_file_name"},this.renderCollapsedFileName(),this.renderExpandedFileNameInput())}},{key:"renderMultiFileUpload",value:function(){return o.a.createElement("div",{className:"p-file_upload_dialog__section"},o.a.createElement(lt,{channelId:d.a}))}},{key:"renderRetentionWarning",value:function(){var e=this.props.retentionDuration;return e?o.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--retention_duration"},o.a.createElement("span",null,bt.t("Due to your custom file retention policy, this file will be deleted after {duration}",{duration:Object(W.a)(e)}))):null}},{key:"render",value:function(){var e=this.props,t=e.files,n=e.msgText,a=e.selectedChannelId,r=e.threadTs,i=e.featureOfflineMode,s=e.isOffline,l=e.clientToolBar,c=e.featureWysiwygComposer,u=this.state,d=u.fileIndex,p=u.shareWith,h=u.confirmClose,m=bt.t("Add a message about the file",{fallbackHash:"76426947fe26fc3fa06b6bf272f55b1b45248641"}),b=bt.t("Upload a file",{fallbackHash:"1ed2e7b50fa1dbbf1693d1c38adf270c04db10c6"});this.isMultipleFiles()&&(b=bt.t("Upload a file ({number} of {total})",{number:d+1,total:t.length,fallbackHash:"98feccd29dda6dfff23692d85c563aada4877d37"}));var f=T()("p-file_upload_dialog",{"p-file_upload_dialog--multiple":this.isMultipleFiles()&&!h,"p-file_upload_dialog--client_toolbar":l||c}),_=i&&s?o.a.createElement("div",{className:"p-file_upload_dialog__section"},o.a.createElement($.d,{icon:"cloud-offline",level:"info"},bt.rt("<strong>No connection.</strong> You'll be able to upload files as soon as you're back online."))):null;return o.a.createElement(ee.a,{className:f,title:b,onClose:this.onCancel,onCancel:h?this.onCancelDiscard:this.onCancel,onGo:h?this.onCancel:this.onGo,useSlackScrollbarWithPadding:!0,shouldCloseOnOverlayClick:!1,cancelText:h?bt.t("No, keep it"):null,goButtonIsDisabled:this.isGoDisabled(),goButtonText:h?bt.t("Yes, discard the message"):bt.t("Upload"),footerText:h?bt.t("Closing the window will discard your message"):this.renderFooterExtra(),goButtonType:h?"danger":"primary",showCancelButton:h},this.renderWarning(),_,o.a.createElement("div",{className:"p-file_upload_dialog__section"},o.a.createElement(ct.a,{channelId:a,threadTs:r,text:n,onTextChange:this.onTextChange,ariaLabel:m,placeholder:m,enabled:p,focusOnMount:!0,onEnter:this.onGo,enableBroadcastKeywords:!r,maxLines:6})),this.renderBroadcastCheckbox(),this.isMultiFileUpload()?this.renderMultiFileUpload():o.a.createElement(o.a.Fragment,null,this.renderImagePreview(),this.renderFileNameInput(),this.renderMultiFileShareInputs()),this.renderRetentionWarning())}}]),t}(i.PureComponent);_t.displayName="FileUploadDialog",_t.defaultProps=ft;var gt={closeModal:u.a,switchToChannel:F.a,getShareableChannelId:B.a,clearPendingFilesForDialog:d.b},vt=Object(S.b)(function(e,t){var n=Object(V.d)(e),a={overStorageLimit:Object(z.A)(n),isStdPlan:Object(z.x)(n),isPlusPlan:Object(z.w)(n),isEnterprisePlan:Object(z.q)(n),isInEnforceFileLimitTreatment:Object(Y.a)(e)};return r()({},Object(dt.b)(e,t),a,{retentionDuration:parseInt(Object(G.a)(e,"file_retention_type"),10)?Object(G.a)(e,"file_retention_duration"):null,teamId:n.id,isOffline:!Object(A.c)(e),featureOfflineMode:Object(R.i)(e,"feature_offline_mode"),featureSonicInputs:Object(R.i)(e,"feature_sonic_inputs"),featureWysiwygComposer:Object(X.a)(e),currentChannelId:Object(h.a)(e),pendingFiles:Object(d.e)(e),clogger:Object(x.a)({state:e}),clientToolBar:"composer_toolbar"===Object(P.c)(e,"composer_toolbar"),isLegacyDropboxPicker:Object(G.a)(e,"dropbox_legacy_picker")})},gt)(_t),yt=Object(dt.a)(vt),kt=Object(l.b)("Takes N files and opens the file upload dialog",function(e,t,n){var a=n.files,i=n.threadTs,s=n.inputProxy;if(!a||!a.length)return Object(c.a)({getState:t}).error("No files passed to openFileUploadDialog"),null;var l=t(),m=function(t){if(!t||!t.length)return null;var c=Object(R.i)(l,"feature_sonic_inputs"),p=Object(h.a)(l),m=function(e,t){if(t){var n=t.getBroadcast();return n&&t.setBroadcast(!1),n}return!(!e||Object(H.b)()!==e)&&Object(H.e)()}(i,s),b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.inputProxy,a=t.featureSonicInputs,r=t.currentChannelId;if(n){var i=n.getText();return i&&n.clear(),i}if(e&&Object(H.b)()===e){var o=Object(H.h)();return o&&Object(H.c)(),o}if(a){var s=Object(J.a)({viewContext:q.y.MESSAGE_PANE,channelId:r}),l=s.getText();return l&&s.clear(),l}var c=Object(U.d)();c&&Object(U.e)("");return c}(i,{inputProxy:s,featureSonicInputs:c,currentChannelId:p});return e(Object(d.h)({files:t})),e(Object(u.e)({element:o.a.createElement(yt,r()({},n,{files:t,initialText:b,initialBroadcast:m,fileSizeExceeded:t.length<a.length}))}))};return e(Object(p.a)({selectedFiles:a})).then(function(e){return m(e)})});t.a=kt},iJ13:function(e,t,n){},iJ4v:function(e,t,n){"use strict";var a=n("BeL+"),r=n("zmn3"),i=n("kxpR"),o=n.n(i),s=(n("aK/h"),n("XHGt")),l=n("nNoG"),c=n("clTI"),u=n("smxp"),d=n("hOQf"),p=n("4RH7"),h=n("5lF5"),m=n("hpgS"),b=new l.b("file-upload");function f(e){var t=e.label,n=e.replyCount,a=e.replyUsers,r=e.replyUsersCount;return a?o.a.createElement("div",{className:"p-file_upload_dialog__thread_label"},t||b.t("Sharing file in a thread"),o.a.createElement("br",null),o.a.createElement(p.a,{replyCount:n,replyUsers:a,replyUsersCount:r})):null}f.displayName="FileUploadThreadLabel",f.defaultProps={label:void 0,replyCount:void 0,replyUsers:void 0,replyUsersCount:void 0},t.a=Object(s.b)(function(e,t){var n=t.channelId,i=t.threadTs,o=Object(u.a)(e,n,i);if(!o){var s=Object(c.d)(e,n);(o=Object(h.d)(s,i))||(o=Object(m.a)(s,i))}if(!o)return{};var l=Object(d.T)(o),p=Object(d.U)(o);return o.replies?(l=Object(r.a)(o.replies,"user"),o.user&&l.push(o.user),p=Object(a.a)(l).length):o.user&&l.push(o.user),{replyCount:Object(d.S)(o),replyUsers:l,replyUsersCount:p}})(f)},iPNN:function(e,t,n){"use strict";var a=n("1PKr"),r=n("HO/Y"),i=n("XfeM"),o=n("uf9I"),s=n("rWF5"),l=n("yHhI"),c=n("Zr7G"),u=n("g5qt"),d="lastBootSonicValue",p="sonicDowngradeTs",h=Object(i.b)("Called when the client first mounts",function(e,t){Object(u.n)(),function(e){if(!Object(r.i)(e(),"feature_desktop_force_production_channel"))return;Object(u.ub)({name:"releaseChannel",value:"prod"})}(t),function(){try{if(!Object(s.B)())return;if(!Object(s.v)("3.2"))return;if(Object(s.v)("3.3"))return;if(Object(u.I)("isOpenExternalShellForced"))return;Object(u.ub)({name:"isOpenExternalShellForced",value:!0})}catch(e){Object(l.b)().error("Tried to set isOpenExternalShellForced, but failed",e)}}(),function(e){try{if(!Object(r.i)(e(),"feature_desktop_notifications_2018"))return;if(!Object(s.v)("3.3"))return;Object(u.ub)({name:"notificationTimeout",value:6e3}),Object(u.ub)({name:"notificationAfterHoverTimeout",value:2e3}),Object(u.ub)({name:"notificationMaxItems",value:8}),Object(u.ub)({name:"notificationStyle",value:"2018"})}catch(e){Object(l.b)().error("Tried to set notification style for 2018, but failed",e)}}(t),function(e){try{Object(r.i)(e(),"feature_desktop_sandbox_signin")&&Object(u.ub)({name:"sandboxSigninWindow",value:!0})}catch(e){Object(l.b)().error("Tried to set sandboxSignin, but failed",e),Object(l.b)().error(e.message),Object(l.b)().error(e.stack)}}(t),function(e){try{if(!Object(r.i)(e(),"feature_tinyspeck"))return;if(!Object(s.v)("4.0.0"))return;if("v1"===Object(u.I)("spellCheckerVersion"))return;Object(u.ub)({name:"spellCheckerVersion",value:"v1"})}catch(e){Object(l.b)().error("Tried to set spellchecker v1, but failed",e),Object(l.b)().error(e.message),Object(l.b)().error(e.stack)}}(t),function(e){setTimeout(function(){var t=e();if(Object(r.i)(t,"feature_desktop_logs_upload")){var n=Object(r.d)(t,"api_token"),i=Object(o.b)(t);a.b.fetch({method:"api.features",args:{token:n,platform:"ssb"},teamId:i}).then(function(e){e&&e.features&&e.features.desktop_diagnostics_timestamp&&Object(u.w)().then(function(e){var t=e&&e.length>0?e[0]:null;t&&a.b.fetch({method:"profiling.addLogging",httpMethod:"POST",args:{token:n,platform:"ssb",log_file:t},teamId:i})})})}},6e4)}(t),function(e){if(!Object(u.d)())return;if(!Object(s.v)("4.0.0"))return;var t=Object(u.E)("bootSonic"),n=localStorage.getItem(d);if(t===n)return;var a=Object(c.c)({state:e()}),r="beta"===Object(u.J)();Object(l.b)().info("Decision to boot Sonic changed since last session: '"+n+"' -> '"+t+"'");try{localStorage.setItem(d,t)}catch(e){Object(l.b)().error("Unable to set '"+d+"'",e)}switch(t){case"once":a.count(r?"sonic_rollout_upgrade_to_sonic_beta_3":"sonic_rollout_upgrade_to_sonic_3");break;case"never":a.count(r?"sonic_rollout_downgrade_to_legacy_beta_3":"sonic_rollout_downgrade_to_legacy_3");try{localStorage.setItem(p,Date.now())}catch(e){Object(l.b)().error("Unable to set '"+p+"'",e)}}}(t)});t.a=h},ixEi:function(e,t,n){},j4JU:function(e,t,n){},jUkS:function(e,t,n){e.exports=n.p+"flitterbug-77334dc.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},jcvV:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("aK/h"),o=n("XfeM"),s=n("DTT0"),l=n("iCc5"),c=n.n(l),u=n("V7oC"),d=n.n(u),p=n("FYw3"),h=n.n(p),m=n("mRg0"),b=n.n(m),f=n("XHGt"),_=n("qN/r"),g=n("nNoG"),v=n("FXuT"),y=n("hI7H"),k=n("XLFM"),O=n("ynxK"),j=n("D3dR"),C=(n("e74f"),new g.b("prefs")),E=(i.b.string.isRequired,i.b.func.isRequired,i.b.func.isRequired,function(e){function t(e){c()(this,t);var n=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onGo=n.onGo.bind(n),n.onOpenPreferences=n.onOpenPreferences.bind(n),n}return b()(t,e),d()(t,[{key:"onGo",value:function(){this.props.closeModal()}},{key:"onOpenPreferences",value:function(){this.props.closeModal(),this.props.openPrefsModal({activeSection:"notifications"})}},{key:"render",value:function(){var e=this,t=this.props.channelId,n=C.rt("Notification Preferences: {channelName}",{channelName:r.a.createElement(v.a,{channelId:t,inline:!0})});return r.a.createElement(y.a,{title:n,showCancelButton:!1,showGoButton:!1,withHeader:!0},r.a.createElement(j.a,{channelId:t,openPrefsModal:this.onOpenPreferences}),r.a.createElement("div",{className:"p-channel_notification_prefs_modal__footer"},r.a.createElement("span",{className:"p-channel_notification_prefs_modal__footer_hint"},C.rt("Set your default notifications settings in your <a>Account Preferences</a>",null,function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).text;return r.a.createElement(O.a,{onClick:e.onOpenPreferences},t)})),r.a.createElement(k.d,{type:"primary",onClick:this.onGo},C.t("Done"))))}}]),t}(a.Component));E.displayName="ChannelNotificationPrefsModal";var w=Object(f.b)(null,function(e){return{closeModal:function(){return e(s.a.apply(void 0,arguments))},openPrefsModal:function(){return e(_.a.apply(void 0,arguments))}}})(E),S=Object(o.b)("Opens the channel notif prefs modal",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(s.e)({element:r.a.createElement(w,n)}))});S.propTypes={channelId:i.b.string.isRequired};t.a=S},jeUB:function(e,t,n){e.exports=n.p+"outgoing_ring_v2-11d8eb3.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},jfx7:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("ZSbO");function o(){return r.a.createElement("div",null,r.a.createElement(i.a,null),r.a.createElement("div",{className:"p-channel_sidebar"}),r.a.createElement("div",null))}o.displayName="WorkspaceEmptyState",t.a=o},k0uR:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("tn36"),l=new(function(){function e(){r()(this,e),this.buffer=[],Object(s.a)(this,["store","flush","replace"])}return o()(e,[{key:"store",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.buffer.push(t)}},{key:"flush",value:function(){var e=this.buffer;return this.buffer=[],e}},{key:"replace",value:function(e){this.buffer=e}}]),e}())},k55U:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"i",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"b",function(){return h}),n.d(t,"f",function(){return m}),n.d(t,"l",function(){return b}),n.d(t,"k",function(){return f}),n.d(t,"j",function(){return _}),n.d(t,"g",function(){return g}),n.d(t,"h",function(){return v}),n.d(t,"e",function(){return y});var a=n("m1cH"),r=n.n(a),i=n("rWF5"),o=n("jzln"),s=n("zA5J"),l=function(e,t,n,a){return new(n||(n=Promise))(function(r,i){function o(e){try{l(a.next(e))}catch(e){i(e)}}function s(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,s)}l((a=a.apply(e,t||[])).next())})},c=function(e){throw new Error("Inconceivable!")};function u(e){return function(t,n,a){e(),t.sendData({type:n,payload:a})}}function d(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",a=0;a<e;a++){var r=Math.floor(Math.random()*t.length);n+=t.substring(r,r+1)}return n}function p(){var e=void 0,t=void 0,n=new Promise(function(n,a){e=n,t=a});return n.resolve=e,n.reject=t,n}function h(e,t){return m(!!e,t)}function m(e,t){var n=void 0;if("boolean"==typeof e){if(e)return!0;n=t}else n=e;if(n||(n="Generic error."),i.k||i.s||o.a)throw Error("Failed debugCheck in dev: "+n);return Object(s.a)("CHECK").error("Silently continuing after failed debugCheck in prod: "+n),!1}function b(e){return JSON.stringify(e,void 0,2)}function f(e,t){desktop.window.setBounds({window_token:e,bounds:t}),Object(i.C)()&&desktop.window.setBounds({window_token:e,bounds:t})}function _(e,t){var n=this,a=!1,i=void 0,o=void 0;return function s(){for(var c=arguments.length,u=Array(c),d=0;d<c;d++)u[d]=arguments[d];return l(n,void 0,void 0,regeneratorRuntime.mark(function n(){var l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!a){n.next=4;break}return i=u,o=p(),n.abrupt("return",o);case 4:return i=void 0,a=!0,n.next=8,t.call.apply(t,[e].concat(u));case 8:return l=n.sent,a=!1,i&&o&&s.apply(void 0,r()(i)).then(o.resolve).catch(o.reject),n.abrupt("return",l);case 12:case"end":return n.stop()}},n,this)}))}}function g(e,t){return v(e,t.ref)}function v(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach(function(t){!function(e){return function(t){"function"==typeof e?e(t):e&&(e.current=t)}}(t)(e)})}}function y(e){return{position:"absolute",width:e.width+"px",height:e.height+"px",top:e.top+"px",left:e.left+"px"}}},kFZb:function(e,t,n){"use strict";function a(e,t){return function(){return t.apply(void 0,arguments),e.apply(void 0,arguments)}}n.d(t,"a",function(){return a})},l31K:function(e,t,n){},lKeU:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("cZF4"),r=n("Muja"),i=n("0VPD"),o=n("Gogr");function s(){var e=Object.keys(Object(o.c)("teams")||{}),t=Object.keys(Object(o.c)("prevTeams")||{}),n=Object(a.a)(e,t),s=Object(o.c)("orderedTeamIds"),l=Object(a.a)(Object(i.a)(s,n),e);return Object(r.a)(l,s)||Object(o.h)("orderedTeamIds",l),l}},lV17:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),h=n.n(p),m=n("aK/h"),b=n("TSYQ"),f=n.n(b),_=n("XHGt"),g=n("lhZz"),v=n("uf9I"),y=n("HO/Y"),k=n("aW/o"),O=n("pRVB"),j=n("wA8W"),C=n("9/DQ"),E=n("6Jf9"),w=n("UYUI"),S=n("wdjV"),I=n("V18M"),T=n("tn36"),N=n("B0Wu"),R=n("Fp75"),A=n("r31G"),P=n("uI5u"),M=n("ynxK"),D=n("AfrZ"),x=n("nNoG"),L=n("cW5R"),F=n("j04V"),B=new x.b("notifications"),q=(m.b.oneOf(["granted","default","denied","na"]),m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.bool,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onClickEnableNotificationsBanner","onCloseEnableNotificationsBanner","onClickDeferNotificationsBanner","onClickNeverNotificationsBanner"]),n.state={showConfirmationBanner:!1},n}return u()(t,e),o()(t,[{key:"onClickEnableNotificationsBanner",value:function(){var e=this;this.props.promptForPermission({callback:function(t,n){e.setState(function(){return{showConfirmationBanner:!1}}),t&&"granted"===n?(e.props.setUserPrefByApi({pref:"growls_enabled",value:!0}),e.props.sendTestNotification({text:B.t("Nice, notifications are enabled!")})):e.props.setUserPrefByApi({pref:"growls_enabled",value:!1})}})}},{key:"onCloseEnableNotificationsBanner",value:function(){this.setState(function(){return{showConfirmationBanner:!0}})}},{key:"onClickDeferNotificationsBanner",value:function(){Object(L.a)("defer_growl_banner","1",3),this.setState(function(){return{showConfirmationBanner:!1}})}},{key:"onClickNeverNotificationsBanner",value:function(){Object(L.a)("no_growl_banner","1",3650),this.setState(function(){return{showConfirmationBanner:!1}})}},{key:"render",value:function(){var e=this.props,t=e.notificationPermission,n=e.shouldHideBanner,a=this.state.showConfirmationBanner,r=Object(R.r)()&&"denied"!==t&&"1"!==Object(L.c)("no_growl_banner")&&"1"!==Object(L.c)("defer_growl_banner")&&!n,i=h.a.createElement(M.a,{onClick:this.onClickEnableNotificationsBanner},B.t("enable desktop notifications"));return h.a.createElement(p.Fragment,null,a?h.a.createElement(p.Fragment,null,h.a.createElement(P.a,{showCloseButton:!1,isFixedPosition:!1},B.t("We strongly recommend enabling desktop notifications if you'll be using Slack on this computer."),h.a.createElement("br",null),h.a.createElement(M.a,{onClick:this.onClickEnableNotificationsBanner},B.t("Enable notifications"))," \u2022 ",h.a.createElement(M.a,{onClick:this.onClickDeferNotificationsBanner},B.t("Ask me later"))," \u2022 ",h.a.createElement(M.a,{onClick:this.onClickNeverNotificationsBanner},B.t("Never ask again on this computer")))):r&&h.a.createElement(P.a,{type:"info",showCloseButton:!0,onClose:this.onCloseEnableNotificationsBanner,isFixedPosition:!1},B.rt("Slack needs your permission to {enableNotificationsLink}.",{enableNotificationsLink:i})))}}]),t}(p.Component));q.displayName="BannerEnableNotifications",q.defaultProps={notificationPermission:"default",shouldHideBanner:!1};var U={promptForPermission:A.b,setUserPrefByApi:D.f,sendTestNotification:A.c},H=Object(_.b)(function(e){return{notificationPermission:Object(N.b)(e),shouldHideBanner:Object(F.d)(e)}},U)(q),G=n("0f2Y"),W=n("vRZS"),K=n("T8HY"),V=new x.b("files"),z=(m.b.bool.isRequired,m.b.func,m.b.bool,{toggleBanner:d.a,featureModernGdriveCreate:!1}),Y=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onCloseEnablePopupsBanner"]),n}return u()(t,e),o()(t,[{key:"onCloseEnablePopupsBanner",value:function(){this.props.toggleBanner(!1)}},{key:"render",value:function(){var e=this.props,t=e.isBannerShowing,n=e.featureModernGdriveCreate;return t&&!Object(W.a)()&&h.a.createElement(p.Fragment,null,h.a.createElement(P.a,{type:"info",showCloseButton:!0,onClose:this.onCloseEnablePopupsBanner,isFixedPosition:!1},n?V.rt("Please allow pop-ups in your browser. You can <a>contact Slack</a> if you need help.",{},function(e){var t=e.text,n=e.key;return h.a.createElement(G.a,{key:n,href:"http://my.slack.com/help/requests/new"},t)}):h.a.createElement(p.Fragment,null,"Please allow pop-ups in your browser. You can"," ",h.a.createElement(G.a,{href:"http://my.slack.com/help/requests/new"},"contact Slack")," ","if you need help.")))}}]),t}(p.Component);Y.displayName="BannerEnablePopups",Y.defaultProps=z;var Q=Object(_.b)(function(e){return{isBannerShowing:Object(K.b)(e),featureModernGdriveCreate:Object(y.i)(e,"feature_modern_gdrive_create")}},function(e){return{toggleBanner:function(){return e(K.c.apply(void 0,arguments))}}})(Y),J=n("ISfF"),X=n("QbLZ"),Z=n.n(X),$=n("D4L/"),ee=n("13mM"),te=n("5mKg"),ne=n("Fdc0"),ae=n("BicV"),re=n("clTI"),ie=n("MREy"),oe=n("llxT"),se=n("od5y"),le=n("RAhH"),ce=n("/Qam"),ue=n("VjHM"),de=n("PJXc"),pe=n("4Twu"),he=n("6kok"),me=n("mqzt"),be=n("/LVU"),fe=n("qN/r"),_e=n("dohy"),ge=n("jcvV"),ve=n("negh"),ye=n("kOzZ"),ke=(n("1iAE"),new x.b("do_not_disturb")),Oe=(m.b.bool.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.number,m.b.number,m.b.bool,m.b.object,m.b.object,m.b.func,m.b.func,m.b.func,m.b.object,m.b.func,m.b.bool,m.b.bool,{snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:!1,currentChannel:{},menuProps:{},openPrefsModal:d.a,openDndDialog:d.a,openChannelNotificationPrefsModal:d.a,clogger:{track:d.a},showNotificationScheduleNewBadge:!1,setUserPrefByApi:d.a,featureGranularDnd:!1}),je=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSubmenu=n.renderSubmenu.bind(n),n.onClickDoNotDisturbSchedule=n.onClickDoNotDisturbSchedule.bind(n),n.onClickNotificationPreferences=n.onClickNotificationPreferences.bind(n),n}return u()(t,e),o()(t,[{key:"onClickDoNotDisturbSchedule",value:function(){var e=this.props,t=e.featureGranularDnd,n=e.showNotificationScheduleNewBadge;this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"}),t&&n&&this.props.setUserPrefByApi({pref:"dnd_notification_schedule_new_badge_seen",value:!0})}},{key:"onClickNotificationPreferences",value:function(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"renderDndMenuHeader",value:function(){var e=this.props,t=e.inDndBySnooze,n=e.snoozeEndTs,a=e.dndEndTs,r=e.do24hrTime,i=e.featureGranularDnd,o=t?n:a,s=Object(me.b)(o,{do24hrTime:r}),l=f()({"p-dnd_menu__snooze_header":t||i,"p-dnd_menu__schedule_header":!t&&!i});return h.a.createElement("div",{className:l},h.a.createElement("div",{className:"p-dnd_menu__header_status"},h.a.createElement("div",null,h.a.createElement("strong",null,i?ke.t("Do Not Disturb"):ke.t("Do Not Disturb: ON"))),h.a.createElement("div",null,s)))}},{key:"renderSubmenu",value:function(e){var t=this,n=this.props.clogger;return h.a.createElement(ie.f,Z()({},e,{width:200}),h.a.createElement(ie.b,{label:ke.t("30 minutes"),onSelected:function(){t.props.snoozeNotifications({duration:30,reason:"DndEnabledMenu:30m"}),n.track(ve.k.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:30,dnd_preset:ve.h.DURATION_30_MINUTES,dnd_snooze_type:ve.i.SNOOZE_ADJUST})}}),h.a.createElement(ie.b,{label:ke.t("1 hour"),onSelected:function(){t.props.snoozeNotifications({duration:60,reason:"DndEnabledMenu:1hr"}),n.track(ve.k.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:60,dnd_preset:ve.h.DURATION_1_HOUR,dnd_snooze_type:ve.i.SNOOZE_ADJUST})}}),h.a.createElement(ie.b,{label:ke.t("2 hours"),onSelected:function(){t.props.snoozeNotifications({duration:120,reason:"DndEnabledMenu:2hr"}),n.track(ve.k.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:120,dnd_preset:ve.h.DURATION_2_HOURS,dnd_snooze_type:ve.i.SNOOZE_ADJUST})}}),h.a.createElement(ie.b,{label:ke.t("4 hours"),onSelected:function(){t.props.snoozeNotifications({duration:240,reason:"DndEnabledMenu:4hr"}),n.track(ve.k.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:240,dnd_preset:ve.h.DURATION_4_HOURS,dnd_snooze_type:ve.i.SNOOZE_ADJUST})}}),h.a.createElement(ie.b,{label:ke.t("Until tomorrow"),onSelected:function(){var e=Object(me.d)();t.props.snoozeNotifications({duration:e,reason:"DndEnabledMenu:tomorrow"}),n.track(ve.k.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:e,dnd_preset:ve.h.DURATION_TOMORROW,dnd_snooze_type:ve.i.SNOOZE_ADJUST})}}),h.a.createElement(ie.b,{label:ke.t("Until next week"),onSelected:function(){var e=Object(me.c)();t.props.snoozeNotifications({duration:e,reason:"DndEnabledMenu:week"}),n.track(ve.k.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:e,dnd_preset:ve.h.DURATION_NEXT_WEEK,dnd_snooze_type:ve.i.SNOOZE_ADJUST})}}),h.a.createElement(ie.b,{label:ke.t("Custom\u2026"),onSelected:function(){t.props.openDndDialog(),n.track(ve.k.DND_OPEN_CUSTOM_SNOOZE_DIALOG)}}))}},{key:"renderAdjustMenuItem",value:function(){var e=this.props,t=e.inDndBySnooze,n=e.featureGranularDnd;return t||n?h.a.createElement(de.a,{label:ke.t("Adjust time"),renderSubmenu:this.renderSubmenu}):h.a.createElement(ie.b,{label:ke.t("Adjust schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule})}},{key:"renderSettingsMenuItem",value:function(){var e=this,t=this.props.currentChannel;if(!t.id||Object(he.eb)(t))return null;var n=h.a.createElement(pe.a,{channelId:t.id,iconProps:{inherit:!0,align:"baseline"},inline:!0}),a=ke.rt("Settings for {name}\u2026",{name:h.a.createElement("strong",null,n),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return h.a.createElement(ie.b,{label:a,onSelected:function(){return e.props.openChannelNotificationPrefsModal({channelId:t.id})}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.inDndBySnooze,a=t.menuProps,r=t.featureGranularDnd,i=t.showNotificationScheduleNewBadge,o=void 0,s=void 0;r&&(o=h.a.createElement("span",{className:"p-dnd_menu__new_pill"},ke.t("NEW")),s=i?h.a.createElement("span",null,ke.t("Notification schedule\u2026")," ",o):ke.t("Notification schedule\u2026"));return h.a.createElement("div",null,this.renderDndMenuHeader(),h.a.createElement(ie.f,Z()({},a,{menuClassNames:"p-dnd_menu"}),h.a.createElement(ie.b,{label:r?ke.t("Turn off"):ke.t("Resume notifications now"),onSelected:function(){n?e.props.endDndSnooze({reason:"DndEnabledMenu:end_snooze"}):e.props.endDndSchedule({reason:"DndEnabledMenu:end_schedule"})},danger:r}),this.renderAdjustMenuItem(),h.a.createElement(ie.d,null),r&&h.a.createElement(ie.b,{label:r?s:ke.t("Do Not Disturb schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule}),!r&&this.renderSettingsMenuItem(),!r&&h.a.createElement(ie.b,{label:ke.t("Your notification preferences\u2026",{fallbackHash:"4fa8d4f0498a550e3cf075dc9c810f7b6f771e65"}),onSelected:this.onClickNotificationPreferences})))}}]),t}(p.PureComponent);je.displayName="DndEnabledMenu",je.defaultProps=Oe;var Ce=Object(_.b)(function(e){var t=Object(y.b)(e),n=Object(ae.e)(e,t).nextDndEndTs,a=Object(ae.f)(e);return{inDndBySnooze:a.snoozeEnabled,snoozeEndTs:a.snoozeEndTs,dndEndTs:n,do24hrTime:Object(ue.h)(e,"time24"),clogger:Object(ye.a)({state:e}),featureGranularDnd:Object(y.i)(e,"feature_granular_dnd"),showNotificationScheduleNewBadge:!Object(ue.h)(e,"dnd_notification_schedule_new_badge_seen")}},function(e){return{snoozeNotifications:function(t){return e(Object(be.e)(t))},openDndDialog:function(){return e(Object(_e.a)())},endDndSnooze:function(t){return e(Object(be.b)(t))},endDndSchedule:function(t){return e(Object(be.a)(t))},openChannelNotificationPrefsModal:function(t){return e(Object(ge.a)(t))},setUserPrefByApi:function(t){return e(Object(D.f)(t))},openPrefsModal:function(t){return e(Object(fe.a)(t))}}})(je),Ee=new x.b("do_not_disturb"),we=(m.b.bool.isRequired,m.b.object,m.b.string,m.b.bool,m.b.bool,{currentChannel:{},className:void 0,featureGranularDnd:!1,featureClassicNav:!1}),Se=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderMenu=n.renderMenu.bind(n),n}return u()(t,e),o()(t,[{key:"renderMenu",value:function(e){var t=this.props,n=t.inDnd,a=t.currentChannel,r=void 0;return t.featureClassicNav&&(r={menuProps:Z()({},e,{onMenuItemSelected:function(t,n){n.stopPropagation(),e.onMenuItemSelected(t,n)}})}),n?h.a.createElement(Ce,Z()({currentChannel:a,menuProps:e},r)):h.a.createElement(ce.a,Z()({currentChannel:a,menuProps:e},r))}},{key:"render",value:function(){var e=this.props,t=e.inDnd,n=e.className,a=e.featureGranularDnd,r=t?"snooze-outline":"bell-o";return h.a.createElement(ie.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:8},h.a.createElement(le.c,{tip:a?Ee.t("Do Not Disturb"):Ee.t("Notifications"),position:"bottom"},h.a.createElement(oe.a,{className:f()("p-dnd_button",n),"data-qa":"do_not_disturb_btn","aria-label":a?Ee.t("Do Not Disturb"):Ee.t("Notifications")},h.a.createElement(se.b,{type:r}))))}}]),t}(p.PureComponent);Se.displayName="DndButton",Se.defaultProps=we;var Ie=Object(_.b)(function(e){var t=Object(k.a)(e);return{inDnd:!!Object(ae.c)(e),currentChannel:Object(re.d)(e,t)||void 0,featureGranularDnd:Object(y.i)(e,"feature_granular_dnd"),featureClassicNav:Object(y.i)(e,"feature_classic_nav")}})(Se),Te=n("ZYn4"),Ne=n("6avh"),Re=n("XLFM"),Ae=n("bmfP"),Pe=n("2jER"),Me=n("Smdl"),De=n("/Rx2"),xe=n("m1cH"),Le=n.n(xe),Fe=n("jo6Y"),Be=n.n(Fe),qe=n("rWF5"),Ue=n("DtX9"),He=n("9D+4"),Ge=n("8bBs"),We=n("eqKo"),Ke=n("HvGc"),Ve=n("8vJI"),ze=n("g5qt"),Ye=n("3dqR"),Qe=(m.b.string.isRequired,m.b.string,m.b.string.isRequired,{secondary:void 0}),Je=function(e){var t=e.name,n=e.secondary,a=e.userId,r=n&&h.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__sub"},n);return h.a.createElement("div",{className:"p-classic_nav__team_menu__blurb p-classic_nav__team_menu__blurb--user"},h.a.createElement(Ye.b,{userId:a,size:36,isInteractive:!1,className:"p-classic_nav__team_menu__blurb__icon",tabIndex:"-1"}),h.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__right"},h.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__name"},t),r))};Je.displayName="UserBlurb",Je.defaultProps=Qe;var Xe=Object(_.b)(function(e){var t=Object(Ue.b)(e);return{name:Object(ne.P)(e,t),secondary:Object(ne.G)(e,t),userId:t.id}})(Je),Ze=new x.b("classic_nav");function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.presence;if(!e.featureClassicNav)return null;switch(t){case"active":return Ze.rt("Set yourself to <strong>away</strong>");case"away":return Ze.rt('<strong className="half_opacity">Away</strong> Set yourself to <strong>active</strong>');default:return null}}function et(e){var t=Object(Ue.b)(e);return{hasCustomStatus:Object(ne.T)(t),presence:Object(He.f)(e,t.id),isOffline:!Object(ee.c)(e),featureClassicNav:Object(y.i)(e,"feature_classic_nav"),featureOfflineMode:Object(y.i)(e,"feature_offline_mode")}}function tt(e){return{clearStatus:function(){return e(Object(Ge.a)({profile:{status_text:"",status_emoji:"",status_text_canonical:"",status_expiration:0}}))},setStatus:function(){return e(Object(We.a)())},openProfile:function(){return e(Object(Ke.j)())},preferences:function(){return e(Object(fe.a)())},togglePresence:function(){return e(Object(He.h)())},help:function(){return e(Object(Ve.a)())}}}var nt=n("yU6Y"),at=n.n(nt),rt=n("FN36"),it=n("KGMq"),ot=n("XfeM"),st=n("DTT0"),lt=n("fL8H"),ct=n("0nhw"),ut=n("yHhI"),dt=n("7WZX"),pt=n("qafc"),ht=n("KQjq"),mt=n("derf"),bt=new x.b("leave_workspace"),ft=Object(ut.b)(),_t=(m.b.object.isRequired,m.b.object.isRequired,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.func,{featureSonicLeaveWorkspaceDialog:!1,callLeaveWorkspace:d.a,enqueueToast:d.a,removeWorkspaceAndSignOutOfTeam:d.a,getSelfEnterpriseOwnerEmail:d.a}),gt="disable_denied_due_to_idpgroup_membership",vt="user_deleted_already",yt="failed_to_convert_org_user_to_team_user",kt=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoading:!1},n.onClickSubmit=n.onClickSubmit.bind(n),n.trackLeaveClick=n.trackLeaveClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClickSubmit",value:function(){var e=this,t=this.props,n=t.team,a=t.removeWorkspaceAndSignOutOfTeam;if(!t.featureSonicLeaveWorkspaceDialog)return null;var r=Object(te.i)(n);this.setState(function(){return{isLoading:!0}});var i=this.props.getSelfEnterpriseOwnerEmail();return this.trackLeaveClick(),this.props.callLeaveWorkspace({teamId:r}).catch(function(t){var o=t.data;if(o.error===gt){var s=bt.rt("<strong>You can\u2019t leave this workspace.</strong>"),l=bt.rt("Because you\u2019re in an IdP group assigned to this workspace, you can\u2019t leave it here. <a>Contact an Org Admin</a> for help leaving the workspace.",null,function(e){var t=e.key,n=e.text;return h.a.createElement("a",{key:t,href:"mailto:"+i,target:"_blank",rel:"noopener noreferrer"},n)});e.setToastText({node:h.a.createElement("div",null,h.a.createElement("strong",null,s),h.a.createElement("br",null),l)}),ft.error("Error with Leave Workspace Action from TeamMenu - ",o.error)}else if(o.error===vt||o.error===yt){a(r);var c=bt.rt("<strong>You've successfully left {team_name}</strong>",{team_name:Object(te.e)(n),fallbackHash:"4a38fa5a5bec946cb5cc0d6a9e2817bc498562aa"});e.setToastText({node:h.a.createElement("span",null,c)})}else{var u=bt.rt("<strong>Leaving workspace failed due to an error</strong>",{fallbackHash:"e51a69c26500f73f762ddcacb0cdcb7db688191f"});e.setToastText({node:h.a.createElement("span",null,u)}),ft.error("Error with Leave Workspace Action from TeamMenu - ",o.error)}}).finally(function(){e.setState(function(){return{isLoading:!1}})})}},{key:"setToastText",value:function(e){var t=e.node;this.props.enqueueToast({element:h.a.createElement(pt.b,{position:"bottom-right",offsetY:50,fadeDelay:5e3},t)})}},{key:"trackLeaveClick",value:function(){var e=this.props,t=e.team,n=e.clogger,a={anchor_page:"your_workspaces",entity_key:"leave_workspace_confirm",target_team_id:Object(te.i)(t),tracking_code:"your_workspaces_list"};n.track("ENTERPRISE_LEAVE_WORKSPACE",Z()({},a,{contexts:{ui_context:{action:"click",action_status:1}}}))}},{key:"render",value:function(){var e=this.props,t=e.featureSonicLeaveWorkspaceDialog,n=e.team,a=this.state.isLoading;if(!t)return null;var r=bt.t("Are you sure you want to leave {team_name}?",{team_name:Object(te.e)(n),fallbackHash:"2db4b766c6e1e14fbc2657d45b8fb13b96b85dd6"}),i=h.a.createElement("div",{className:"display_flex align_items_center"},h.a.createElement(mt.b,{id:Object(te.i)(n),size:20,className:"margin_right_75"}),h.a.createElement("div",null,r));return h.a.createElement(h.a.Fragment,null,h.a.createElement(lt.a,{title:i,titleAria:r,goButtonText:bt.t("Leave This Workspace",{fallbackHash:"29b1014ee5c119d2a9785259535f58bb3f123bb6"}),onGo:this.onClickSubmit,showCancelButton:!0,truncateTitle:!1,shouldCloseOnGo:!0,goButtonIsPending:a},Object(te.I)(n)&&bt.t("This workspace is hidden. Once you leave, you won\u2019t have access unless you\u2019re invited back.")))}}]),t}(h.a.Component);kt.displayName="LeaveWorkspaceDialog",kt.defaultProps=_t;var Ot=Object(_.b)(function(e){var t=Object(y.b)(e);return{team:Object($.d)(e),clogger:Object(ye.a)({state:e}),member:Object(Ue.c)(e,t),featureSonicLeaveWorkspaceDialog:Object(y.i)(e,"feature_sonic_leave_workspace_dialog"),getSelfEnterpriseOwnerEmail:function(){return Object($.f)(e)}}},function(e){var t=Object(g.getClientStoreInstance)();return{enqueueToast:function(){return e(dt.c.apply(void 0,arguments))},callLeaveWorkspace:function(){return e(ct.c.apply(void 0,arguments))},removeWorkspaceAndSignOutOfTeam:function(e){return t.dispatch(Object(ht.u)(e))}}})(kt),jt=Object(ot.b)("Opens the leave a workspace dialog",function(e,t){Object(y.i)(t(),"feature_sonic_leave_workspace_dialog")&&e(Object(st.e)({element:h.a.createElement(Ot,{})}))}),Ct=jt;jt.propTypes={};var Et=n("XUHR"),wt=n("c/L4"),St=Object(ot.b)("Clogs shared channels team menu item click",function(e,t){var n=t(),a=Object(ye.a)({state:n}),r=Object(te.B)(Object($.d)(n));a.track(ve.k.GROWTH_INTRO_SHARED_CHANNEL,{contexts:{ui_context:{step:ve.z.TEAM_MENU,step_variant:r?wt.b.PAID:wt.b.FREE,action:ve.v.CLICK,ui_properties:{element_type:ve.j.LINK,element_name:r?"shared_channels_beta_cta":"shared_channels_beta_new_cta"}}}})}),It=n("Qrgz"),Tt=n("Lts7"),Nt=n("UEyp"),Rt=n("KXvl"),At=n("p9qW"),Pt=n("Sh1l"),Mt=n("dhcM"),Dt=n("vSXf"),xt=n("U28S"),Lt=n("j4mf"),Ft=(n("5DNE"),m.b.number.isRequired,m.b.number.isRequired,m.b.number.isRequired,m.b.string,m.b.string,m.b.string,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.containerSizeInPixels,n=e.progressPercentage,a=e.progressBarWidthInPixels,r=e.progressBarColor,i=e.progressBarBackgroundColor,o=e.progressBarLabel,s=(t-a)/2,l=s*Math.PI*2,c=l-l*n/100,u=t/2;return h.a.createElement("svg",{width:t,height:t,viewBox:"0 0 "+t+" "+t},h.a.createElement("circle",{className:"p-classic_nav__team_messages_progress_bar_background",cx:u,cy:u,r:s,strokeWidth:a+"px",style:{stroke:i}}),h.a.createElement("circle",{className:"p-classic_nav__team_messages_progress_bar_progress",cx:u,cy:u,r:s,strokeWidth:a+"px",transform:"rotate(-90 "+u+" "+u+")",style:{stroke:r,strokeDasharray:l,strokeDashoffset:c}}),h.a.createElement("text",{className:"p-classic_nav__team_messages_progress_bar_text",x:u,y:u,dy:"4px",textAnchor:"middle"},o||Object(Lt.e)(n,{precision:2})))}}]),t}(p.Component));Ft.displayName="TeamMessagesProgressBar",Ft.defaultProps={progressBarColor:null,progressBarBackgroundColor:null,progressBarLabel:null};var Bt=Ft,qt=(n("Rx/r"),new x.b("classic_nav")),Ut={r:69,g:186,b:133},Ht={r:255,g:197,b:101},Gt=243,Wt=61,Kt=95,Vt=(m.b.number.isRequired,m.b.object.isRequired,m.b.bool.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onLimitMeterClick"]),n}return u()(t,e),o()(t,[{key:"onLimitMeterClick",value:function(){this.props.clogger.track(ve.k.UPGRDEXP_LIMIT_METER,{contexts:{ui_context:{step:ve.z.SLACK_MENU,action:ve.v.CLICK,ui_properties:{element_type:ve.j.BUTTON,element_name:"team_messages_limit_meter",element_value:this.props.messagesCount}}}})}},{key:"getTotalMessagesDetail",value:function(){var e=this.props,t=e.messagesCount;if(!e.featureModernizeLimitMeter)return null;return t>1e4?t<10100||t>1e6?qt.rt("Upgrade to access all of your messages."):qt.rt("Upgrade to access your first {hiddenMessagesCountFormatted} messages.",{hiddenMessagesCountFormatted:Object(xt.a)(t-1e4,{precision:2,lowercase:!0})}):qt.rt("On the free plan, you can only view 10k most recent messages.")}},{key:"getTeamMessagesProgressBarData",value:function(){var e=this.props.messagesCount,t=0,n=null,a=null;if(e<=1e4){t=e/1e4*100,n="rgba(0, 0, 0, 0.1)";var r=Object(Mt.a)(Z()({},Ut),Z()({},Ht),function(e,n){return Math.floor(e*(1-t/100)+n*(t/100))});a="rgb("+r.r+", "+r.g+", "+r.b+")"}else t=100*(Math.atan((e-1e4)/2500-3)/Math.PI+.5),n="rgb("+Ht.r+", "+Ht.g+" , "+Ht.b+")",a="rgb("+Gt+", "+Wt+", "+Kt+")";return{progressBarPercentage:t,progressBarBackgroundColor:n,progressBarColor:a}}},{key:"render",value:function(){var e=this.props,t=e.messagesCount;if(!e.featureModernizeLimitMeter)return null;var n=this.getTeamMessagesProgressBarData(),a=n.progressBarPercentage,r=n.progressBarBackgroundColor,i=n.progressBarColor;return h.a.createElement("div",{className:"p-classic_nav__team_messages_limit_meter",role:"presentation",onClick:this.onLimitMeterClick},h.a.createElement("div",null,h.a.createElement("div",null,h.a.createElement("strong",null,qt.rt("Total Messages"))),h.a.createElement("div",{className:"p-classic_nav__team_messages_limit_meter__detail"},this.getTotalMessagesDetail())),h.a.createElement("div",{className:"p-classic_nav__team_messages_limit_meter__progress_chart"},h.a.createElement(Bt,{containerSizeInPixels:54,progressBarWidthInPixels:4,progressPercentage:a,progressBarLabel:Object(xt.a)(t,{precision:2,lowercase:!0}),progressBarColor:i,progressBarBackgroundColor:r})))}}]),t}(p.Component));Vt.displayName="TeamMessagesLimitMeter";var zt=Object(_.b)(function(e){var t=Object($.d)(e);return{messagesCount:Object(te.m)(t),clogger:Object(ye.a)({state:e})}})(Object(Dt.a)("feature_modernize_limit_meter")(Vt)),Yt=n("0BC7"),Qt=(n("p6QP"),new x.b("shared_channels")),Jt=(m.b.bool,m.b.bool,m.b.string.isRequired,m.b.string.isRequired,m.b.object.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.clogger,n=e.clogStepVariant,a=e.clogElementName;t.track(ve.k.GROWTH_INTRO_SHARED_CHANNEL,{contexts:{ui_context:{step:ve.z.TEAM_MENU,step_variant:n,action:ve.v.IMPRESSION,ui_properties:{element_type:ve.j.LINK,element_name:a}}}})}},{key:"render",value:function(){var e=this.props,t=e.showNewLabel,n=e.featureSharedChannelsRemoveBetaLabel?Qt.rt("Shared channels"):Qt.rt("Shared channels (beta)");return h.a.createElement("div",{className:"p-shared_channels_team_menu_item"},n,t&&h.a.createElement(p.Fragment,null," ",h.a.createElement("span",{className:"p-shared_channels_team_menu_item__label--new"},Qt.rt("NEW"))))}}]),t}(p.PureComponent));Jt.displayName="SharedChannelsTeamMenuItem",Jt.defaultProps={showNewLabel:!1,featureSharedChannelsRemoveBetaLabel:!1};var Xt=Object(_.b)(function(e){var t=Object(te.B)(Object($.d)(e));return{clogger:Object(ye.a)({state:e}),clogStepVariant:t?wt.b.PAID:wt.b.FREE,clogElementName:t?"shared_channels_beta_cta":"shared_channels_beta_new_cta"}})(Jt),Zt=n("82mD"),$t=n("6FZx"),en=n("2ILS"),tn=(n("RHBl"),new x.b("classic_nav")),nn=(m.b.object.isRequired,m.b.string.isRequired,m.b.string,m.b.string.isRequired,m.b.func,m.b.bool,m.b.bool,m.b.func.isRequired,m.b.object,{orgName:void 0,onMouseEnter:d.a,featureTeamMenuTrialI18n:!1,featureLocalDiscountAwareness:!1,localDiscountOffer:null}),an=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={paymentsStatusIsLoaded:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchPaymentsStatus().then(function(){e.setState(function(){return{paymentsStatusIsLoaded:!0}})})}},{key:"buildPlanInfoLink",value:function(e){var t=e.path,n=e.tag,a=e.text;if("a"!==n)return null;var r=this.props.team;return h.a.createElement(M.a,{target:"_blank",className:"bold",path:t,onClick:function(){Object(te.O)(r,t)}},a)}},{key:"renderTeamPlanInfo",value:function(){var e=this,t=this.props,n=t.team,a=t.orgName,r=t.featureTeamMenuTrialI18n,i=t.localDiscountOffer,o=t.featureLocalDiscountAwareness;if(!this.state.paymentsStatusIsLoaded)return null;var s=void 0,l=void 0,c="p-classic_nav__team_menu__blurb_plan",u=Object(te.x)(n);if(Object(te.y)(n)&&r){var d=Object(Zt.k)(Object(te.c)(n),{excludeYear:!0});s="pricing",l=h.a.createElement(p.Fragment,null,u?tn.rt("Your trial of <strong>Standard</strong> lasts through {trialExpiryDate}.",{trialExpiryDate:d}):tn.rt("Your trial of <strong>Plus</strong> lasts through {trialExpiryDate}.",{trialExpiryDate:d}),this.buildPlanInfoLink({path:s,tag:"a",text:tn.t("See upgrade options")}))}else Object(te.v)(n)?(s="pricing",o&&i?(l=h.a.createElement(p.Fragment,null,tn.rt("Get {localDiscountOfferPercent}% off a paid plan, for a limited time.",{localDiscountOfferPercent:i.offer.discount.percentage})," ",this.buildPlanInfoLink({path:s,tag:"a",text:tn.t("See upgrade options")})),c=f()(c,"p-classic_nav__team_menu__blurb_plan--has_local_discount","p-classic_nav__team_menu__blurb_plan--has_local_discount_"+i.country.toLowerCase())):l=tn.rt("Your workspace is currently on Slack's <strong>Free</strong> plan. <a>See upgrade options</a>",{},function(t){var n=t.tag,a=t.text;return e.buildPlanInfoLink({path:s,tag:n,text:a})})):u?(s="pricing/standard?ui_step=61&ui_element=5",l=tn.rt("Your workspace is currently on Slack's <strong>Standard</strong> plan. <a>Learn more</a>",{},function(t){var n=t.tag,a=t.text;return e.buildPlanInfoLink({path:s,tag:n,text:a})})):Object(te.w)(n)?(s="pricing/plus?ui_step=61&ui_element=5",l=tn.rt("Your workspace is currently on Slack's <strong>Plus</strong> plan. <a>Learn more</a>",{},function(t){var n=t.tag,a=t.text;return e.buildPlanInfoLink({path:s,tag:n,text:a})})):Object(te.q)(n)?(s="account/workspace-settings",l=tn.rt("This workspace is part of the <strong>{orgName}</strong> organization. <a>Learn more</a>",{orgName:a},function(t){var n=t.tag,a=t.text;return e.buildPlanInfoLink({path:s,tag:n,text:a})})):Object(te.u)(n)&&r&&(l=tn.t("Your workspace is currently on Slack\u2019s Enterprise Select plan."));return l?h.a.createElement("p",{className:c,"data-qa":"classic_nav__team_menu__blurb_plan"},l):null}},{key:"render",value:function(){var e=this.props,t=e.team,n=e.name,a=e.url,r=e.onMouseEnter,i=Object(te.q)(t),o=Object(ze.T)();return h.a.createElement("div",{onMouseEnter:r},h.a.createElement("div",{className:"p-classic_nav__team_menu__blurb p-classic_nav__team_menu__blurb--team"},h.a.createElement(mt.b,{id:t.id,size:36,className:"p-classic_nav__team_menu__blurb__icon",tabIndex:"-1"}),h.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__right"},h.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__name"},n),h.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__sub"},a))),i||!o?this.renderTeamPlanInfo():null)}}]),t}(p.Component);an.displayName="TeamBlurb",an.defaultProps=nn;var rn=Object(_.b)(function(e){var t=Object($.d)(e);return{team:t,name:Object(te.e)(t),orgName:t.enterprise_name,url:t.domain+".slack.com",featureTeamMenuTrialI18n:Object(y.i)(e,"feature_team_menu_trial_i18n"),featureLocalDiscountAwareness:Object(y.i)(e,"feature_local_discount_awareness"),localDiscountOffer:Object(te.k)(t)}},function(e){return{fetchPaymentsStatus:function(){return e(en.d.apply(void 0,arguments))}}})(Object($t.b)(an)),on=n("5+aj"),sn=new x.b("classic_nav"),ln=(m.b.object.isRequired,m.b.bool,m.b.string,m.b.string,m.b.bool,m.b.bool,m.b.bool,m.b.bool.isRequired,m.b.bool.isRequired,m.b.func,{teamIsEnterprise:!1,teamEnterpriseDomain:void 0,teamUrl:"",userIsAppmin:!1,canCreateSharedChannel:!1,featureClassicNav:!1,performOpenConnectedWorkspacesModal:d.a}),cn=function(e){var t=e.menuProps,n=e.teamIsEnterprise,a=e.teamEnterpriseDomain,r=e.teamUrl,i=e.userIsAppmin,o=e.canCreateSharedChannel,s=e.featureClassicNav,l=e.isAdminOrOwner,c=e.isEnterpriseAdminOrOwner,u=e.performOpenConnectedWorkspacesModal;if(!s)return null;var d=[{label:sn.t("Manage members"),show:l,href:r+"admin",key:"manage-members"},{label:sn.t("Workspace settings"),show:l,href:r+"admin/settings",key:"workspace-settings"},{label:sn.t("Organization settings"),show:c,href:"https://"+a+".enterprise.slack.com/manage",key:"org-settings"},{label:sn.t("Manage apps"),show:!n&&i,href:r+"apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click",key:"manage-apps"},{label:sn.t("Manage shared channels"),click:u,show:o,key:"manage-shared-channels"}].filter(function(e){return e.show});return h.a.createElement(ie.a,Z()({},t,{template:d}))};cn.displayName="TeamAdminSubmenu",cn.defaultProps=ln;var un=Object(_.b)(function(e){var t=Object($.d)(e),n=Object(Ue.b)(e),a=Object($.g)(e),r=Object(ne.ib)(n)||Object(ne.jb)(n),i=Object(ne.X)(n)||Object(ne.vb)(n)||r;return{teamIsEnterprise:Object(te.q)(t),teamEnterpriseDomain:a&&a.domain,teamUrl:Object(te.o)(t),userIsAppmin:Object(Ue.j)(e),canCreateSharedChannel:Object(ne.e)(e),featureClassicNav:Object(y.i)(e,"feature_classic_nav"),isAdminOrOwner:i,isEnterpriseAdminOrOwner:r}},function(e){return{performOpenConnectedWorkspacesModal:function(){return e(on.a.apply(void 0,arguments))}}})(cn),dn=n("Zr7G"),pn=Object(ot.b)("Counts the number of times the Open App team menu item is selected",function(e,t){Object(dn.c)({getState:t}).count("team_menu_download_apps")}),hn=new x.b("classic_nav");function mn(e){var t=Object(Ue.b)(e),n=Object($.d)(e),a=Object(ne.X)(t)||!Object(rt.a)(e,"stats_only_admins")&&!Object(ne.xb)(t),r=Object(y.i)(e,"feature_modernize_limit_meter")&&Object(te.v)(n)&&a&&!Object(te.q)(n)&&Object(te.m)(n)>200,i=Object(ht.j)(Object(g.getClientStoreInstance)().getState()),o=Object(At.a)({numTeams:i});return{userId:t.id,userIsAdmin:Object(ne.X)(t),userIsOwner:Object(ne.vb)(t),userIsRestricted:Object(ne.xb)(t),userIsEnterpriseAdminOrOwner:Object(ne.ib)(t)||Object(ne.jb)(t),teamIsEnterprise:Object(te.q)(n),teamIsPaid:Object(te.B)(n),orgName:n.enterprise_name,orgId:n.enterprise_id,teamName:Object(te.e)(n),teamUrl:Object(te.o)(n),teamId:n.id,numTeams:i,isSignedIntoOtherOrgTeams:Object(y.f)(e).some(function(e){return e.id!==n.id&&e.enterprise_id===n.enterprise_id}),userCanSeeInviteModal:Object(Nt.d)(e),userCanManageSharedChannelsBeta:Object(It.l)(e,"intro_shared_channels_team_menu"),userCanManageESC:Object(ne.e)(e),userCanLeaveWorkspace:Object(ne.j)(e,t)&&Object(y.i)(e,"feature_sonic_leave_workspace_dialog"),userIsAppmin:Object(Ue.j)(e),purchaserPref:Object(ue.h)(e,"purchaser"),statsOnlyAdmins:Object(rt.a)(e,"stats_only_admins"),customizeOnlyAdmins:Object(rt.a)(e,"emoji_only_admins")&&Object(rt.a)(e,"slackbot_responses_only_admins")&&Object(rt.a)(e,"loading_only_admins"),showSwitchWorkspaces:Object(y.f)(e).length>0&&!o,showTeamSidebar:o,isAppSpaceEnabled:Object(y.i)(e,"feature_app_space"),featureClassicNav:Object(y.i)(e,"feature_classic_nav"),featureOfflineMode:Object(y.i)(e,"feature_offline_mode"),featureSharedChannelsRemoveBetaLabel:Object(y.i)(e,"feature_shared_channels_remove_beta_label"),isOffline:!Object(ee.c)(e),featureBuilderCanAccess:Object(y.i)(e,"feature_builder_can_access"),featureSonicEscCreation:Object(y.i)(e,"feature_sonic_esc_creation"),teamMessagesLimitMeterUrl:!Object(ze.T)()&&Object(te.v)(n)?"/pricing?ui_element=142&ui_step=61":"/stats",showTeamMessagesLimitMeter:r}}function bn(e){return{invite:function(){return e(Object(E.a)())},externalSharedChannels:function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];e(St()),e(Object(Et.a)(Z()({entryPoint:"team_menu"},n)))},launchWorkflowBuilder:function(){return e(Object(Tt.a)())},findWorkspaces:function(t){return e(Object(it.a)(t))},leaveWorkspace:function(t){return e(Ct(t))},signOut:function(e){return Object(g.getClientStoreInstance)().dispatch(Object(ht.u)(e))},signOutOfOrg:function(e){return Object(g.getClientStoreInstance)().dispatch(Object(ht.t)(e))},signIn:function(){return e(Object(ht.a)())},openApp:function(){return e(pn())}}}function fn(e){return h.a.createElement(un,{menuProps:e})}function _n(e){return h.a.createElement(Yt.a,{menuProps:e})}fn.displayName="renderAdministrationSubmenu",_n.displayName="renderWorkspacesSubmenu";m.b.object.isRequired,m.b.object.isRequired,m.b.objectOf(m.b.func).isRequired,m.b.objectOf(m.b.func).isRequired,m.b.func,m.b.bool.isRequired;var gn={renderSonicMenu:d.a},vn=function(e){var t=e.userItemsData,n=e.userItemsActions,a=e.teamItemsData,r=e.teamItemsActions,i=e.renderSonicMenu,o=e.featureTinyspeck,s=Be()(e,["userItemsData","userItemsActions","teamItemsData","teamItemsActions","renderSonicMenu","featureTinyspeck"]),l=Object(Me.a)()&&(qe.k||o)&&i!==d.a?[{type:"submenu",label:"Sonic",renderSubmenu:i,key:"sonic-debug-submenu"},{type:"separator",key:"sonic-debug-separator"}]:{},c=[].concat(Le()(l),Le()(function(e,t){var n=e.hasCustomStatus,a=e.presence,r=e.featureClassicNav,i=e.featureOfflineMode,o=e.isOffline;return r?[{type:"custom",children:h.a.createElement(Xe,{key:"user-blurb"}),show:!0,key:"user-blurb"},{label:Ze.t("Clear status"),show:n,click:t.clearStatus,key:"clear-status"},{label:n?Ze.t("Edit status"):Ze.t("Set a status"),shortcut:Object(qe.p)()?"\u2318\u21e7Y":"Ctrl+Shift+Y",show:!0,click:t.setStatus,key:"set-status"},{label:Ze.t("Profile & account"),show:!0,click:t.openProfile,key:"profile"},{label:Ze.t("Preferences"),shortcut:Object(qe.p)()&&ze.V&&"\u2318,",show:!0,click:t.preferences,key:"preferences"},{label:$e({presence:a,featureClassicNav:r}),show:!0,click:t.togglePresence,key:"presence",disabled:i&&o,showOfflineIcon:i&&o},{label:Ze.t("Help & feedback"),show:!0,click:t.help,key:"help"}].filter(function(e){return e.show}):[]}(t,n)),[{type:"separator",key:"team-menu-separator"}],Le()(function(e,t){if(!e.featureClassicNav)return[];var n=e.userId,a=e.userIsAdmin,r=e.userIsEnterpriseAdminOrOwner,i=e.userIsOwner,o=e.userIsRestricted,s=e.teamIsEnterprise,l=e.teamIsPaid,c=e.orgId,u=e.orgName,d=e.teamName,p=e.teamUrl,m=e.teamId,b=e.isSignedIntoOtherOrgTeams,f=e.userCanSeeInviteModal,_=e.userCanManageSharedChannelsBeta,g=e.userCanManageESC,v=e.userCanLeaveWorkspace,y=e.userIsAppmin,k=e.purchaserPref,O=e.statsOnlyAdmins,j=e.customizeOnlyAdmins,C=e.isAppSpaceEnabled,E=e.showSwitchWorkspaces,w=e.featureBuilderCanAccess,S=e.featureOfflineMode,I=e.featureSharedChannelsRemoveBetaLabel,T=e.isOffline,N=e.featureSonicEscCreation,R=e.teamMessagesLimitMeterUrl,A=e.showTeamMessagesLimitMeter,P=e.showTeamSidebar,M=!o,D=!O,x=!j;return[{type:"custom",children:h.a.createElement(rn,{key:"team-blurb"}),show:!0,key:"team-blurb"},{children:h.a.createElement(zt,{key:"team-messages-limit-meter"}),show:A,href:R,target:"_blank",showLinkIndicatorIcon:!1,key:"team-messages-limit-meter"},{type:"separator",show:!0,key:"separator-team-blurb"},{type:"submenu",label:hn.t("Administration"),show:g||a||i||r,renderSubmenu:fn,key:"administration"},{label:hn.t("Invite people"),show:f,click:t.invite,key:"invite",disabled:S&&T,showOfflineIcon:S&&T},{label:hn.t("Analytics"),show:M&&(a||D),href:p+"stats",key:"analytics"},{label:hn.t("Billing"),show:l&&(i||k),href:p+"admin/billing",key:"billing"},{show:M&&w,click:t.launchWorkflowBuilder,children:h.a.createElement(Pt.a,null),key:"launch-workflow-builder"},{label:hn.t("Customize Slack"),show:M&&(a||x),href:p+"customize?utm_source=in-prod&utm_medium=inprod-customize_link-slack_menu-click",key:"customize"},{label:hn.t("Manage apps"),show:C&&y&&s,href:p+"apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click",key:"apps"},{label:h.a.createElement(Xt,{featureSharedChannelsRemoveBetaLabel:I}),show:l&&_,click:t.externalSharedChannels,key:"ext-shared-channels"},{label:h.a.createElement(Xt,{showNewLabel:!0}),show:N&&!l&&_,click:t.externalSharedChannels,key:"ext-shared-channels-free-team"},{label:hn.t("Find more workspaces"),show:s&&M,click:function(){return t.findWorkspaces(n)},disabled:S&&T,showOfflineIcon:S&&T,key:"find-workspaces"},{label:hn.t("Leave this workspace"),show:s&&v,click:t.leaveWorkspace,key:"leave-workspace",disabled:S&&T,showOfflineIcon:S&&T},{label:hn.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:d}),show:!s||Object(Rt.b)()&&b,click:function(){return t.signOut(m)},key:"sign-out",dataQa:"sign-out",disabled:S&&T,showOfflineIcon:S&&T},{label:hn.rt("Sign out of <strong>{signoutName}</strong> (organization)",{signoutName:u}),show:s,click:function(){return t.signOutOfOrg(c)},key:"org-sign-out",dataQa:"org-sign-out",disabled:S&&T,showOfflineIcon:S&&T},{type:"separator",show:!0,key:"separator-switch"},{type:"submenu",label:hn.t("Switch workspaces"),show:E,renderSubmenu:_n,key:"switch-workspaces"},{label:hn.t("Sign in to another workspace"),show:!P,click:t.signIn,key:"sign-in",disabled:S&&T,showOfflineIcon:S&&T},{type:"separator",show:!0,key:"separator-app"},{label:hn.rt("Open the Slack App"),show:!ze.V&&!at.a.chromeBook,href:p+"ssb/redirect",click:t.openApp,key:"open-desktop-app"}].filter(function(e){return e.show})}(a,r)));return h.a.createElement(ie.a,Z()({},s,{template:c,menuClassNames:"p-classic_nav__team_menu",stripTerminalSeparators:!0}))};vn.displayName="TeamMenu",vn.defaultProps=gn;var yn=Object(_.b)(function(e){return{userItemsData:et(e),teamItemsData:mn(e),featureTinyspeck:Object(y.i)(e,"feature_tinyspeck")}},function(e){return{userItemsActions:tt(e),teamItemsActions:bn(e)}})(vn),kn=(n("Hza5"),new x.b("classic_nav")),On=(m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.bool,m.b.func,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.func,m.b.func,{featureClassicNav:!1,featureOfflineMode:!1,renderSonicMenu:d.a,isWindowFrameless:!1,userAttentionIsOnChat:!1,featureSonicServiceDown:!1,isServiceDown:!1,removeFromSectionNavigation:d.a,addToSectionNavigation:d.a}),jn=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.menuButtonRef=h.a.createRef(),n.renderIcon=n.renderIcon.bind(n),n.renderMenu=n.renderMenu.bind(n),n.focus=n.focus.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){!e.userAttentionIsOnChat&&this.props.userAttentionIsOnChat&&this.props.addToSectionNavigation(),!this.props.userAttentionIsOnChat&&e.userAttentionIsOnChat&&this.props.removeFromSectionNavigation()}},{key:"focus",value:function(){this.menuButtonRef.current.focus()}},{key:"renderMenu",value:function(e){return h.a.createElement(yn,Z()({},e,{renderSonicMenu:this.props.renderSonicMenu}))}},{key:"renderServiceDownIcon",value:function(){return this.props.featureSonicServiceDown?h.a.createElement(p.Fragment,null,h.a.createElement(le.c,{tip:kn.t("Slack is unavailable. Check our status page for updates."),position:"bottom"},h.a.createElement(se.b,{type:"warning",className:"p-classic_nav__team_header__team__icon margin_left_50"}))):null}},{key:"renderIcon",value:function(){var e=this.props,t=e.isServiceDown,n=e.featureOfflineMode,a=e.featureSonicServiceDown&&t?this.renderServiceDownIcon():h.a.createElement(se.b,{type:"chevron-down",className:"p-classic_nav__team_header__team__icon"});return n?h.a.createElement(p.Fragment,null,h.a.createElement(Ae.b,null,a),h.a.createElement(Ae.a,null,h.a.createElement(le.c,{tip:kn.t("No network connection"),position:"bottom"},h.a.createElement(se.b,{type:"cloud-offline-small",className:"p-classic_nav__team_header__team__icon margin_left_50"})))):h.a.createElement(se.b,{type:"chevron-down",className:"p-classic_nav__team_header__team__icon"})}},{key:"render",value:function(){var e=this.props,t=e.teamName,n=e.teamId,a=e.userId,r=e.userName,i=e.featureClassicNav,o=e.isWindowFrameless;if(!i)return null;var s=h.a.createElement(Re.c,{ref:this.menuButtonRef,className:"p-classic_nav__team_header__team__icon_button","aria-label":kn.t("Team Menu"),"aria-haspopup":!0},this.renderIcon()),l=f()({"p-classic_nav__team_header":!0,"p-classic_nav__team_header--frameless":o});return h.a.createElement("div",{className:l},h.a.createElement(ie.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-8,offsetY:2,allowanceX:4},h.a.createElement("div",{className:"p-classic_nav__team_header__content"},h.a.createElement("div",{className:"p-classic_nav__team_header__team"},h.a.createElement("div",{"data-teamid":n,className:"p-classic_nav__team_header__team__name"},t),s,h.a.createElement(Ie,{className:"p-classic_nav__team_header__team__dnd"})),h.a.createElement("div",{className:"p-classic_nav__team_header__user"},h.a.createElement(Te.a,{memberId:a,className:"p-classic_nav__team_header__user__presence",inline:!0}),h.a.createElement("span",{className:"p-classic_nav__team_header__user__name"},h.a.createElement("span",{className:"p-classic_nav__team_header__user__name__truncate"},r),h.a.createElement(Ne.b,{memberId:a,tooltip:!0,tipPosition:"bottom"}))))))}}]),t}(p.Component);jn.displayName="TeamHeader",jn.defaultProps=On;var Cn=Object(Me.a)()?Object(Pe.a)(jn,"TeamHeader",{index:3}):jn,En=Object(_.b)(function(e){var t=Object(y.b)(e);return{teamId:Object(v.b)(e),teamName:Object(te.e)(Object($.d)(e)),userId:t,userName:Object(ne.Q)(e,t),isWindowFrameless:Object(C.j)(e),userAttentionIsOnChat:Object(De.e)(e),featureClassicNav:Object(y.i)(e,"feature_classic_nav"),featureOfflineMode:Object(y.i)(e,"feature_offline_mode"),featureSonicServiceDown:Object(y.i)(e,"feature_sonic_service_down"),isServiceDown:!Object(ee.e)(e)}})(Cn),wn=n("59Je"),Sn=n("Ov61"),In=n("Sq1r"),Tn=n("N5a2"),Nn=n("WTjW"),Rn=(m.b.string.isRequired,m.b.bool.isRequired,function(e){var t=e.memberId,n=e.isActive?void 0:"p-classic_nav__model__title__name--dim";return h.a.createElement(Nn.a,{id:t,className:n})});Rn.displayName="DimmableMemberName";var An=Object(_.b)(function(e,t){var n=t.memberId;return{isActive:"active"===Object(He.f)(e,n)}})(Rn),Pn=n("lek6"),Mn=n("qkTT"),Dn=(m.b.string.isRequired,m.b.string,m.b.string,{emoji:void 0,text:void 0}),xn=function(e){var t=e.emoji,n=e.text;return t?h.a.createElement(Pn.a,{className:"p-classic_nav__model__title__name__status--im",text:n?t+" "+n:t,emojiSize:Mn.a.SMALL,showTooltips:!1,noJumbomoji:!0,noLinking:!0,noSpecials:!0,noHighlights:!0,noEmojiText:!0,preventCopyPaste:!0}):null};xn.displayName="IMCustomStatus",xn.defaultProps=Dn;var Ln=Object(_.b)(function(e,t){var n=t.memberId,a=Object(Ue.e)(e,n);return{text:a.text,emoji:a.emoji}})(xn),Fn=new x.b("channel_header"),Bn=(m.b.string.isRequired,m.b.bool,function(e){return e.isYou?h.a.createElement("span",{className:"p-classic_nav__model__title__is_you"},Fn.t("(you)",{fallbackHash:"1647df1274ca1403fb32187b06fed324ade6b1ad",fallbackHashNs:"channel_sidebar"})):null});Bn.displayName="IMIsYou",Bn.defaultProps={isYou:!1};var qn=Object(_.b)(function(e,t){var n=t.memberId;return{isYou:Object(y.b)(e)===n}})(Bn),Un=Object(ot.b)("Updates the muted_channels pref from the current list of muted channels",function(e,t){var n=t(),a=Object.keys(Object(wn.b)(n)).join(",");return e(Object(D.f)({pref:"muted_channels",value:a,reason:"update-muted-channels"}))});Un.propTypes=null;var Hn=Object(ot.b)("Mute a channel given a channelId",function(e,t,n){var a=t(),r=Object(ut.a)({state:a,label:"CHANNEL-MUTE"}),i=Object(re.d)(a,n);return i?Object(he.eb)(i)?Promise.reject(new Error("Channel is an IM")):Object(wn.c)(a,n)?Promise.reject(new Error("Channel is already muted")):(r.info("Muting channel "+n),e(Object(wn.d)({id:n,muted:!0})),e(Un()).catch(function(){r.error("CHANNEL-MUTE","Muting channel "+n+" failed, could not set pref"),e(Object(wn.d)({id:n,muted:!1}))})):Promise.reject(new Error("Channel does not exist"))});Hn.propTypes=m.b.string.isRequired;var Gn=Object(ot.b)("Unmute a channel given a channelId",function(e,t,n){var a=t(),r=Object(ut.a)({state:a,label:"CHANNEL-MUTE"}),i=Object(re.d)(a,n);return i?Object(he.eb)(i)?Promise.reject(new Error("Channel is an IM")):Object(wn.c)(a,n)?(r.info("Unmuting channel "+n),e(Object(wn.d)({id:n,muted:!1})),e(Un()).catch(function(){r.error("CHANNEL-MUTE","Unmuting channel "+n+" failed, could not set pref"),e(Object(wn.d)({id:n,muted:!0}))})):Promise.reject(new Error("Channel is already unmuted")):Promise.reject(new Error("Channel does not exist"))});Gn.propTypes=m.b.string.isRequired;var Wn=n("hW7Y"),Kn=n("c8iJ"),Vn=new x.b("classic_nav"),zn=(m.b.string.isRequired,m.b.bool.isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(e){e.stopPropagation(),this.props.unmuteChannelById(this.props.channelId)}},{key:"render",value:function(){return this.props.featureClassicNav?h.a.createElement(Wn.c,{tip:Vn.t("Unmute"),position:"bottom"},h.a.createElement(oe.a,{className:"p-classic_nav__model__title__name__unmute",onClick:this.onClick},h.a.createElement(Kn.a,{type:"bell-slash",size:"inherit"}))):null}}]),t}(p.Component));zn.displayName="UnmuteButton";var Yn=Object(_.b)(function(e){return{featureClassicNav:Object(y.i)(e,"feature_classic_nav")}},function(e){return{unmuteChannelById:function(){return e(Gn.apply(void 0,arguments))}}})(zn),Qn=n("ntJl"),Jn=n("2Inn"),Xn=n("S6VJ"),Zn=n("d24p"),$n=n("+j2t"),ea=n("QTMz"),ta=n("9/KO"),na=n("53Ys"),aa=n("7EGn"),ra=n("wfE8"),ia=n("zmUX"),oa=n("aolG"),sa=n("fujP"),la=n("WD4z"),ca=new x.b("mpims");function ua(e){var t=e.uras;if(Object(sa.a)(t))return null;var n=t.map(function(e){return h.a.createElement("strong",{key:e.id},h.a.createElement(Nn.a,{id:e.id}))});return h.a.createElement(la.a,{level:"warning",className:"top_margin"},ca.rt("{ura_list} { uras_length, plural, =1 { is a Single-Channel Guest. They are already a member } other { are Single-Channel Guests. They are already members }} of one channel, and will not have access to this new private channel.",{ura_list:Object(x.h)(n),uras_length:t.length}))}ua.displayName="SingleChannelGuestWarning",ua.defaultProps={uras:[]};var da=Object(_.b)(function(e,t){return{uras:t.memberIds.map(function(t){return Object(Ue.c)(e,t)}).filter(function(e){return Object(ne.Db)(e)})}})(ua),pa=new x.b("mpims"),ha=(m.b.object.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.arrayOf(m.b.string),m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={confirmed:!1,newChannelName:"",newChannelNameValid:!1,promisePending:!1},n.onGo=n.onGo.bind(n),n.onValidNameEntered=n.onValidNameEntered.bind(n),n.onInvalidNameEntered=n.onInvalidNameEntered.bind(n),n}return u()(t,e),o()(t,[{key:"componentWillUnmount",value:function(){this.promise&&this.promise.cancel()}},{key:"onGo",value:function(){var e=this,t=this.props,n=t.channelId,a=t.logger,r=this.state,i=r.confirmed,o=r.newChannelName;i?(this.setState(function(){return{promisePending:!0}}),this.promise=this.props.convertMpimToPrivateChannel({mpimId:n,privateChannelName:o}).then(function(){e.promise=null,e.props.closeModal()}).catch(function(t){e.promise=null;var n=Object(aa.a)(t,"data.error","");"conversion_already_started"!==n?(e.setState(function(){return{promisePending:!1}}),a.error("MPIM-CONVERSION",n,t,{subtype:"mpim-conversion-error"}),e.props.openModal({element:h.a.createElement(lt.a,{title:pa.t("Sorry, something went wrong")},pa.t("Try again in a moment.")),isStackable:!0})):e.props.closeModal()})):this.setState(function(){return{confirmed:!0}})}},{key:"onValidNameEntered",value:function(e){var t=e.value;this.setState(function(){return{newChannelName:t,newChannelNameValid:!0}})}},{key:"onInvalidNameEntered",value:function(e){var t=e.value;this.setState(function(){return{newChannelName:t,newChannelNameValid:!1}})}},{key:"renderConfirmationStep",value:function(){return h.a.createElement("p",{className:"no_bottom_margin"},pa.t("By converting this conversation to a private channel, you will make the entire message history and all shared files visible to the new members that you invite to the channel."))}},{key:"renderNamingStep",value:function(){var e=this,t=this.props.memberIds.filter(function(t){return t!==e.props.currentUserId}).map(function(e){return h.a.createElement("strong",{key:e},h.a.createElement(Nn.a,{id:e}))});return h.a.createElement(h.a.Fragment,null,h.a.createElement(ia.a,{id:"mpim-conversion-modal-input",value:"",onValid:this.onValidNameEntered,onInvalid:this.onInvalidNameEntered,focusOnMount:!0}),h.a.createElement("p",{className:"no_bottom_margin small_top_margin"},pa.rt("You are about to convert the group DM with {member_list} to a private channel. <strong>This cannot be undone.</strong>",{member_list:Object(x.h)(t)})))}},{key:"render",value:function(){var e=this.state,t=e.confirmed,n=e.newChannelNameValid,a=e.promisePending,r=this.props.memberIds,i=t?pa.t("Enter a name for the channel"):pa.t("Are you sure?"),o=t?pa.t("Convert to a private channel"):pa.t("Yes, continue");return h.a.createElement(oa.a,{title:i,goButtonText:o,onGo:this.onGo,goButtonIsDisabled:t&&!n,goButtonIsPending:a},t?this.renderNamingStep():this.renderConfirmationStep(),h.a.createElement(da,{memberIds:r}))}}]),t}(p.Component));ha.displayName="MpimConversionModal",ha.defaultProps={memberIds:[]};var ma={convertMpimToPrivateChannel:function(){return ra.a.apply(void 0,arguments)},closeModal:function(){return st.a.apply(void 0,arguments)},openModal:function(){return st.e.apply(void 0,arguments)}},ba=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return{logger:Object(ut.a)({state:e}),currentUserId:Object(y.b)(e),memberIds:Object(he.H)(a)}},ma)(ha),fa=Object(ot.b)("Starts the MPIM -> Private channel workflow",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).channelId;n&&e(Object(st.e)({element:h.a.createElement(ba,{channelId:n})}))});fa.propTypes={channelId:m.b.string.isRequired};var _a=fa,ga=n("jK7E"),va=n("xrsA"),ya=n("zo7m"),ka=n("ROZo"),Oa=Object(ka.b)("TS.ui.apps_browser.startAddApps"),ja=n("wd/R"),Ca=n.n(ja),Ea=n("b+9+"),wa=n("hFPh"),Sa=new x.b("classic_nav"),Ia=(m.b.string.isRequired,m.b.object,m.b.func,m.b.func,m.b.bool,m.b.func,{channel:void 0,close:d.a,back:d.a,featureClassicNav:!1,jumpToTimestamp:d.a}),Ta=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onDateChange=n.onDateChange.bind(n),n}return u()(t,e),o()(t,[{key:"onDateChange",value:function(e){var t=Ca()(e,"YYYY-MM-DD").format("X");this.props.jumpToTimestamp({ts:t,highlight:!0}),this.props.close()}},{key:"render",value:function(){var e=this.props,t=e.channel,n=e.back;if(!e.featureClassicNav)return null;var a=t.created?Ca()(t.created,"X").format("YYYY-MM-DD"):void 0;return h.a.createElement(ie.f,Z()({},this.props,{width:325}),h.a.createElement(wa.a,{key:"date-picker",className:"p-classic_nav__model__menu__jump",disableDatesBefore:a,disableDatesAfter:Ca()().format("YYYY-MM-DD"),onDateChange:this.onDateChange}),h.a.createElement(Re.c,{key:"date-picker-back",className:"p-classic_nav__model__menu__jump__back","data-qa":"date_picker_back",onClick:n},Sa.t("Back to menu")))}}]),t}(p.Component);Ta.displayName="ModelMenuJump",Ta.defaultProps=Ia;var Na=Object(_.b)(function(e,t){var n=t.channelId;return{channel:Object(re.d)(e,n),featureClassicNav:Object(y.i)(e,"feature_classic_nav")}},function(e){return{jumpToTimestamp:function(){return e(Ea.c.apply(void 0,arguments))}}})(Ta),Ra=n("TSHB"),Aa=n("HMjZ");function Pa(e,t){var n=Object(re.d)(e,t);if(!e||!n)return null;var a=Object(Ue.c)(e,Object(he.G)(n)),r=Object(Ue.b)(e),i=Object(he.v)(n),o="im"===i,s="mpim"===i,l="channel"===i,c=l||"private"===i,u=Object(he.Qb)(r.id,n),d=Object(Aa.d)(e,n),p=Object(It.H)(e,t)||s,h=u,m=o&&!u,b=o&&!u&&!Object(he.Eb)(n)&&!Object(ne.Db)(r)&&!Object(ne.Db)(a)&&!Object(ne.eb)(a)&&!Object(ne.lb)(a),f=function(e,t){if(!t)return!1;var n=Object(he.v)(t),a="channel"===n||"private"===n,r=Object(Ue.b)(e);return!(!a||Object(he.V)(t)||(Object(y.i)(e,"feature_announce_only")?!Object(he.kb)(t)||!Object(It.q)(e,t.id)&&(Object(he.Bb)(t)||Object(ne.xb)(r)||Object(ne.Db)(r)):Object(ne.xb)(r)||Object(ne.Db)(r)||!Object(he.kb)(t)||Object(y.l)(e)&&Object(he.rb)(t)&&!Object(It.I)(e)||!Object(It.q)(e,t.id)&&Object(he.Bb)(t)))}(e,n),_=Object(It.O)(e,t),g=s&&Object(It.B)(e)&&!Object(he.Y)(n),v=!o&&(s||Object(he.kb)(n)&&!Object(he.V)(n)),k=v,O=Object(It.x)(e,t),j=Object(rt.a)(e,"allow_email_ingestion"),C=c&&Object(he.kb)(n)&&!Object(he.V)(n)&&!Object(he.Bb)(n)&&!Object(ne.Db)(r)&&!Object(ne.xb)(r),E=c&&!Object(he.kb)(n)&&!Object(he.V)(n)&&!Object(ne.Db)(r)&&!Object(ne.xb)(r),w=!l&&Object(It.G)(e,t),S=Object(he.V)(n)&&(!Object(y.i)(e,"feature_esc_disconnect_v2_client")||!Object(he.bb)(n))&&!Object(he.C)(n),I=Object(he.V)(n)&&Object(ne.X)(r)&&l&&!Object(he.Bb)(n);return Object(Ra.a)({call:d,jump:!0,invite:p,editProfile:h,viewProfile:m,addMember:b,details:!0,options:f,retention:_,convertToPrivate:g,notifications:v,mute:k,apps:O,email:j,leave:C,join:E,exportHistory:w,unarchive:S,delete:I},function(e){return!!e})}var Ma=new x.b("classic_nav"),Da=Object(ot.b)("Un-archive a channel",function(e,t,n){var a=n.channelId;Object(y.i)(t(),"feature_classic_nav")&&e(Object(ra.O)({channelId:a})).catch(function(n){Object(ut.a)({getState:t}).error("CHANNEL-ACTIONS","Unarchive failed with error",n);var a="restricted_action"===Object(aa.a)(n,"data.error")?Ma.t("You don\u2019t have permission to un-archive channels. Please talk to your Workspace Owner."):Ma.t("Sorry, something went wrong. Try again in a moment.");e(Object(st.e)({element:h.a.createElement(lt.a,{title:Ma.t("Un-archive failed")},a)}))})});Da.propTypes={channelId:m.b.string.isRequired};var xa=Da,La=new x.b("classic_nav"),Fa=(m.b.string.isRequired,m.b.object.isRequired,m.b.func,m.b.object,m.b.string,m.b.bool,m.b.object,m.b.bool,m.b.bool,m.b.object,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool.isRequired,m.b.bool.isRequired,{onMenuItemSelected:d.a,actions:void 0,displayName:void 0,isMuted:!1,team:void 0,canManagePostingPermissions:!1,showManagePostingPermissionsNewBadge:!1,clogger:{track:d.a},joinChannel:d.a,unarchiveChannel:d.a,gantryStartCall:d.a,showDetails:d.a,showMemberProfile:d.a,maybeLeaveChannel:d.a,muteChannelById:d.a,unmuteChannelById:d.a,openDmBrowserModal:d.a,startChannelInviteModal:d.a,openChannelOptions:d.a,openChannelNotificationPrefsModal:d.a,openEditProfileModal:d.a,openInviteMemberToChannelDialog:d.a,openAppsBrowserModal:d.a,openMpimConversionModal:d.a,featureClassicNav:!1,featureSonicEditProfile:!1,featureM11nAppsBrowser:!1,featureAnnounceOnly:!1}),Ba=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMenuItemSelected=n.onMenuItemSelected.bind(n),n.getMuteLabel=n.getMuteLabel.bind(n),n.getItems=n.getItems.bind(n),n.preventClose=!1,n.state={mode:"menu"},n}return u()(t,e),o()(t,[{key:"onMenuItemSelected",value:function(e,t){this.preventClose?this.preventClose=!1:this.props.onMenuItemSelected(e,t)}},{key:"getMuteLabel",value:function(){var e=this.props,t=e.isMuted,n=e.channel,a=e.displayName,r=e.featureClassicNav,i="mpim"===Object(he.v)(n);return r?t&&i?La.t("Unmute this conversation"):t&&!i?La.t("Unmute {channelName}",{channelName:a}):!t&&i?La.t("Mute this conversation"):t||i?null:La.t("Mute {channelName}",{channelName:a}):null}},{key:"getItems",value:function(){var e=this,t=this.props,n=t.channelId,a=t.channel,r=t.actions,i=t.displayName,o=t.joinChannel,s=t.featureClassicNav,l=t.team,c=t.canManagePostingPermissions,u=t.showManagePostingPermissionsNewBadge,d=t.clogger,p=t.featureSonicEditProfile,h=t.featureM11nAppsBrowser,m=t.featureOfflineMode,b=t.featureAnnounceOnly,f=t.isOffline,_=Object(he.v)(a),g=Object(he.G)(a);if(!r||!_||!s)return[];var v="mpim"===_,y="channel"===_||"private"===_;return[{label:La.t("Jump to date\u2026"),show:r.jump,key:"jump",click:function(){e.preventClose=!0,e.setState(function(){return{mode:"jump-to-date"}})},disabled:m&&f,showOfflineIcon:m&&f},{label:v?La.t("Invite another member\u2026"):La.rt("Add people to {channelName}\u2026",{channelName:i}),show:r.invite,dataQa:"invite_user_modal",key:"invite",click:function(){if(v){var t=Object(he.H)(a);e.props.openDmBrowserModal({memberIds:t,source:$n.b.MPIM})}else e.props.startChannelInviteModal({channelId:n})},disabled:m&&f,showOfflineIcon:m&&f},{label:La.t("Edit your profile"),show:r.editProfile,key:"editProfile",click:function(){return p?e.props.openEditProfileModal():Object(ga.a)()},disabled:m&&f,showOfflineIcon:m&&f},{label:La.rt("View {userPossesive} profile",{userPossesive:Object(x.c)(i)}),show:r.viewProfile,key:"viewProfile",click:function(){return e.props.showMemberProfile({memberId:g})}},{label:La.rt("Add {userName} to a channel\u2026",{userName:i}),show:r.addMember,key:"addMember",click:function(){return e.props.openInviteMemberToChannelDialog({memberId:g})},disabled:m&&f,showOfflineIcon:m&&f},{label:y?La.t("View channel details"):La.t("View conversation details"),show:r.details,key:"details",click:function(){return e.props.showDetails({sectionId:"info"})}},{label:La.t("Convert to a private channel\u2026"),show:r.convertToPrivate,key:"convertToPrivate",click:function(){return e.props.openMpimConversionModal({channelId:a.id})},disabled:m&&f,showOfflineIcon:m&&f},{label:La.t("Edit message retention\u2026"),show:r.retention,key:"retention",click:function(){return e.props.openChannelOptions({channelId:n,section:"retention"})},disabled:m&&f,showOfflineIcon:m&&f},{label:La.t("Manage posting permissions"),show:b&&c&&r.options,key:"posting_privilege",click:function(){return e.props.openChannelOptions({channelId:n,section:"posting_privilege"})},disabled:m&&f,showOfflineIcon:m&&f,badgeLabel:u?La.t("NEW"):void 0},{label:La.t("Additional options\u2026"),show:r.options,key:"options",click:function(){return e.props.openChannelOptions({channelId:n})},disabled:m&&f,showOfflineIcon:m&&f},{type:"separator",key:"separator-1"},{label:La.t("Notification preferences\u2026"),show:r.notifications,key:"notifications",click:function(){return e.props.openChannelNotificationPrefsModal({channelId:n})}},{label:this.getMuteLabel(),show:r.mute,key:"mute",click:function(){e.props.isMuted?e.props.unmuteChannelById(n):e.props.muteChannelById(n)}},{type:"separator",key:"separator-2"},{label:La.t("Add an app"),show:r.apps,key:"apps",click:function(){var t=ve.k.CHANNEL_SETTINGS,a={action:ve.v.CLICK,ui_element:ve.y.BTN_ADD_APPS};d.track(t,{contexts:{ui_context:a}}),h?e.props.openAppsBrowserModal({addAppsVariant:!0,referringEventId:t,referringUiContext:a,channelId:n}):Oa()},disabled:m&&f,showOfflineIcon:m&&f},{label:v?La.t("Send email to this conversation\u2026"):La.t("Send email to {channelName}\u2026",{channelName:i}),show:r.email,key:"email",href:Object(te.o)(l,"/services/new/email"),target:"_blank",disabled:m&&f,showOfflineIcon:m&&f},{type:"separator",key:"separator-3"},{label:La.t("Leave {channelName}",{channelName:i}),show:r.leave,key:"leave",click:function(){return e.props.maybeLeaveChannel({channelId:n})},disabled:m&&f,showOfflineIcon:m&&f},{label:La.t("Join {channelName}",{channelName:i}),show:r.join,key:"join",click:function(){return o({channelId:n})},disabled:m&&f,showOfflineIcon:m&&f},{type:"separator",key:"separator-4"},{label:La.t("Export message history\u2026"),show:r.exportHistory,key:"exportHistory",click:function(){return e.props.openChannelOptions({channelId:n,section:"export"})},disabled:m&&f,showOfflineIcon:m&&f},{type:"separator",key:"separator-5"},{label:La.t("Un-archive {channelName}",{channelName:i}),show:r.unarchive,key:"unarchive",click:function(){return e.props.unarchiveChannel({channelId:n})},disabled:m&&f,showOfflineIcon:m&&f},{label:La.t("Delete {channelName}",{channelName:i}),show:r.delete,key:"unarchive",click:function(){return e.props.openChannelOptions({channelId:n,section:"delete"})},disabled:m&&f,showOfflineIcon:m&&f}].filter(function(e){return e&&(e.show||"separator"===e.type)})}},{key:"render",value:function(){var e=this;switch(this.state.mode){case"menu":return h.a.createElement(ie.a,Z()({},this.props,{template:this.getItems(),onMenuItemSelected:this.onMenuItemSelected,stripTerminalSeparators:!0}));case"jump-to-date":return h.a.createElement(Na,Z()({},this.props,{channelId:this.props.channelId,close:this.props.onMenuItemSelected,back:function(){e.preventClose=!0,e.setState(function(){return{mode:"menu"}})}}));default:return null}}}]),t}(p.Component);Ba.displayName="ModelMenu",Ba.defaultProps=Fa;var qa=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n),r=Object($.d)(e),i=Object(It.J)(e,n),o=Object(Ue.b)(e),s=(Object(ne.X)(o)||Object(ne.vb)(o))&&!Object(he.sb)(a);return{channel:a,actions:Pa(e,n),displayName:Object(he.x)(e,a,{imIncludeAtSign:!1}),isMuted:Object(wn.c)(e,n),team:r,canManagePostingPermissions:i,clogger:Object(ye.a)({state:e}),showManagePostingPermissionsNewBadge:s,featureClassicNav:Object(y.i)(e,"feature_classic_nav"),featureSonicEditProfile:Object(y.i)(e,"feature_sonic_edit_profile"),featureM11nAppsBrowser:Object(y.i)(e,"feature_m11n_apps_browser"),featureOfflineMode:Object(y.i)(e,"feature_offline_mode"),featureAnnounceOnly:Object(y.i)(e,"feature_announce_only"),isOffline:!Object(ee.c)(e)}},function(e){return{joinChannel:function(){return e(Qn.joinConversationApi.apply(void 0,arguments))},unarchiveChannel:function(){return e(xa.apply(void 0,arguments))},gantryStartCall:function(){return e(Jn.d.apply(void 0,arguments))},showDetails:function(){return e(Ke.e.apply(void 0,arguments))},showMemberProfile:function(){return e(Ke.j.apply(void 0,arguments))},maybeLeaveChannel:function(){return e(Xn.a.apply(void 0,arguments))},muteChannelById:function(){return e(Hn.apply(void 0,arguments))},unmuteChannelById:function(){return e(Gn.apply(void 0,arguments))},openDmBrowserModal:function(){return e(Zn.a.apply(void 0,arguments))},startChannelInviteModal:function(){return e(ea.b.apply(void 0,arguments))},openChannelOptions:function(){return e(ta.a.apply(void 0,arguments))},openChannelNotificationPrefsModal:function(){return e(ge.a.apply(void 0,arguments))},openEditProfileModal:function(){return e(ya.a.apply(void 0,arguments))},openInviteMemberToChannelDialog:function(){return e(va.a.apply(void 0,arguments))},openAppsBrowserModal:function(){return e(na.a.apply(void 0,arguments))},openMpimConversionModal:function(){return e(_a.apply(void 0,arguments))}}})(Ba),Ua=(m.b.string.isRequired,m.b.oneOf(["channel","private","im","mpim"]),m.b.string,m.b.string,m.b.arrayOf(m.b.string.isRequired),m.b.string.isRequired,m.b.bool.isRequired,m.b.bool,m.b.object.isRequired,{type:void 0,name:void 0,memberId:void 0,mpimIds:void 0,isMuted:!1}),Ha=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderMenu=n.renderMenu.bind(n),n.renderChannel=n.renderChannel.bind(n),n.renderIM=n.renderIM.bind(n),n.renderMPIM=n.renderMPIM.bind(n),n}return u()(t,e),o()(t,[{key:"renderMenu",value:function(e){return h.a.createElement(qa,Z()({},e,{channelId:this.props.channelId}))}},{key:"renderChannel",value:function(e){var t=this.props,n=t.channelId,a=t.name,r=t.isMuted,i=h.a.createElement(In.a,{channelId:n,bold:!0,disableArchived:!0}),o=r?h.a.createElement(Yn,{channelId:n}):null;return h.a.createElement(p.Fragment,null,h.a.createElement(e,null,i,a),h.a.createElement(Sn.a,{channelId:n,className:"p-classic_nav__model__title__name__shared_icon",inherit:!1,inline:!1,tooltipPosition:"bottom"}),o)}},{key:"renderIM",value:function(e){var t=this.props.memberId;return t?h.a.createElement(e,null,h.a.createElement(An,{memberId:t}),h.a.createElement(qn,{memberId:t}),h.a.createElement(Ln,{memberId:t})):null}},{key:"renderMPIM",value:function(e){var t=this.props,n=t.channelId,a=t.mpimIds,r=t.currentUser,i=t.isMuted,o=t.logger;if(!a||!a.length)return o.error("CLASSIC-NAV","MPIM "+n+" has no members"),h.a.createElement(p.Fragment,null,h.a.createElement(Tn.b,{className:"align_self_center"}),"\u200b");var s=i?h.a.createElement(Yn,{channelId:n}):null,l=a.filter(function(e){return e!==r}).map(function(e,t){return h.a.createElement(p.Fragment,{key:e},t>0?", ":null,h.a.createElement(An,{memberId:e}),h.a.createElement(Ne.b,{memberId:e,tipPosition:"bottom",className:"p-classic_nav__model__title__name__status--mpim"}))});return h.a.createElement(e,null,l,s)}},{key:"render",value:function(){var e=this,t=this.props,n=t.type,a=t.isMuted,r=t.isChannelUnavailable;if(!n)return null;var i=function(t){var n=t.children;return r?h.a.createElement("div",{className:"p-classic_nav__model__title__name__button","data-qa":"channel_name"},n):h.a.createElement(ie.e,{renderMenu:e.renderMenu,position:"bottom-left",offsetX:-4,offsetY:4},h.a.createElement(Re.c,{className:"p-classic_nav__model__title__name__button","data-qa":"channel_name"},n))},o=void 0;switch(n){case"channel":case"private":o=this.renderChannel(i);break;case"im":o=this.renderIM(i);break;case"mpim":o=this.renderMPIM(i);break;default:o=null}var s=f()({"p-classic_nav__model__title__name":!0,"p-classic_nav__model__title__name--dim":a,"p-classic_nav__no_drag":!0});return h.a.createElement("div",{className:s},o)}}]),t}(p.Component);Ha.displayName="ModelName",Ha.defaultProps=Ua;var Ga=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return{type:Object(he.v)(a),name:a.name,memberId:Object(he.G)(a)||void 0,mpimIds:Object(he.H)(a)||void 0,currentUser:Object(y.b)(e),isMuted:Object(wn.c)(e,n),isChannelUnavailable:Object(he.Ib)(e,a),logger:Object(ut.a)({state:e})}})(Ha),Wa=n("0F/N"),Ka=function(){return h.a.createElement("span",{className:"p-classic_nav__model__title__info__sep"},"|")},Va=new x.b("classic_nav"),za=(m.b.string.isRequired,m.b.bool,m.b.oneOf(["channel","private","im","mpim"]),m.b.bool,m.b.bool,m.b.bool,m.b.func,{channelType:void 0,isStarred:!1,featureClassicNav:!1,omitSeparator:!1,isMemberOfChannel:!1,updateStar:d.a}),Ya=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.renderTip=n.renderTip.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this.props,t=e.channelId,n=e.isStarred;this.props.updateStar(!n,{channel:t})}},{key:"renderTip",value:function(){var e=this.props,t=e.channelType,n=e.isStarred;if(!e.featureClassicNav)return null;switch(t){case"channel":case"private":return n?Va.t("Unstar this channel"):Va.t("Star this channel");case"im":case"mpim":return n?Va.t("Unstar this direct message"):Va.t("Star this direct message");default:return null}}},{key:"render",value:function(){var e=this.props,t=e.isStarred,n=e.omitSeparator;if(!e.isMemberOfChannel)return null;var a=t?"star":"star-o",r=f()({"p-classic_nav__model__title__info__star":!0,"p-classic_nav__model__title__info__star--starred":t});return h.a.createElement(p.Fragment,null,h.a.createElement(le.c,{tip:this.renderTip,position:"bottom"},h.a.createElement(Re.c,{className:r,onClick:this.onClick,"aria-label":this.renderTip(),"data-qa":"channel_header__star_button"},h.a.createElement(se.b,{type:a,size:"inherit",inline:!0}))),!n&&h.a.createElement(Ka,null))}}]),t}(p.Component);Ya.displayName="ModelInfoStar",Ya.defaultProps=za;var Qa=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return{channelType:Object(he.v)(a),isStarred:Object(he.Fb)(a),isMemberOfChannel:Object(he.kb)(a),featureClassicNav:Object(y.i)(e,"feature_classic_nav")}},function(e){return{updateStar:function(){return e(Wa.a.apply(void 0,arguments))}}})(Ya),Ja=n("yIs4"),Xa=n("N4dO"),Za=n("hUMe"),$a=new x.b("classic_nav"),er=(m.b.string.isRequired,m.b.number,m.b.bool,m.b.arrayOf(m.b.string),m.b.number,m.b.bool,m.b.func,{memberCount:void 0,isSharedMpim:!1,pendingAndConnectedTeamIds:void 0,externalMemberCount:void 0,featureClassicNav:!1,showDetails:d.a}),tr=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.showDetails({sectionId:"members"})}},{key:"getCount",value:function(){var e=this.props,t=e.isSharedMpim,n=e.memberCount,a=Object(Ja.a)(n)?Object(x.l)(n):"\u2013";return t?this.getSharedMpimCount(a):a}},{key:"getSharedMpimCount",value:function(e){var t=this.props,n=t.featureClassicNav,a=t.pendingAndConnectedTeamIds,r=t.externalMemberCount;return n?a&&a.length&&r?a.length>1?$a.rt("{totalMemberCount} ({externalMemberCount} from other organizations)",{totalMemberCount:e,externalMemberCount:r}):$a.rt("{totalMemberCount} ({externalMemberCount} from\xa0{externalTeamName})",{totalMemberCount:e,externalMemberCount:r,externalTeamName:h.a.createElement(Za.a,{id:a[0],bold:!1})}):e:null}},{key:"render",value:function(){return this.props.featureClassicNav?h.a.createElement(p.Fragment,null,h.a.createElement(le.c,{tip:$a.t("View member list"),position:"bottom"},h.a.createElement(Re.c,{className:"p-classic_nav__model__title__info__members",onClick:this.onClick,"aria-label":$a.t("View member list")},h.a.createElement(se.b,{type:"user",size:"inherit",inline:!0}),"\xa0",this.getCount())),h.a.createElement(Ka,null)):null}}]),t}(p.Component);tr.displayName="ModelInfoMembers",tr.defaultProps=er;var nr=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n),r=Object(Xa.f)(e,n),i=Object(he.Y)(a)&&Object(he.lb)(a),o=i?Object(he.M)(e,a):null,s=i?Object(he.H)(a).filter(function(t){return Object(ne.lb)(Object(Ue.c)(e,t))}).length:void 0;return{memberCount:r&&r.counts&&r.counts.member_count,featureClassicNav:Object(y.i)(e,"feature_classic_nav"),isSharedMpim:i,pendingAndConnectedTeamIds:o,externalMemberCount:s}},function(e){return{showDetails:function(){return e(Ke.e.apply(void 0,arguments))}}})(tr),ar=new x.b("classic_nav"),rr=(m.b.string.isRequired,m.b.bool,m.b.number,m.b.bool,m.b.func,{maybe:!1,pinsCount:void 0,featureClassicNav:!1,showDetails:d.a}),ir=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.showDetails({sectionId:"pins"})}},{key:"render",value:function(){var e=this.props,t=e.maybe,n=e.featureClassicNav,a=e.pinsCount;if(!n)return null;if(t&&!a)return null;var r=Object(Ja.a)(a)?Object(x.l)(a):"\u2013";return h.a.createElement(p.Fragment,null,h.a.createElement(le.c,{tip:ar.t("View pinned items"),position:"bottom"},h.a.createElement(Re.c,{className:"p-classic_nav__model__title__info__pins",onClick:this.onClick,"aria-label":ar.t("View pinned items")},h.a.createElement(se.b,{type:"thumb-tack",size:"inherit",inline:!0}),"\xa0",r)),h.a.createElement(Ka,null))}}]),t}(p.Component);ir.displayName="ModelInfoPins",ir.defaultProps=rr;var or=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return{pinsCount:Object(he.N)(a),featureClassicNav:Object(y.i)(e,"feature_classic_nav")}},function(e){return{showDetails:function(){return e(Ke.e.apply(void 0,arguments))}}})(ir),sr=n("ubOb"),lr=n("U3Q0"),cr=n("hCI9"),ur=n("oxKW"),dr=n("+z37"),pr=(n("4tN7"),new x.b("classic_nav")),hr=(m.b.string.isRequired,m.b.string,m.b.oneOfType([m.b.string,m.b.object]),m.b.bool,m.b.func,m.b.func,{currentRawTopic:void 0,currentFormattedTopic:void 0,featureClassicNav:!1,submitChannelTopic:d.a,openModal:d.a}),mr=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSubmit=n.onSubmit.bind(n),n.renderInput=n.renderInput.bind(n),n.input=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"onSubmit",value:function(){var e=this,t=this.input.current&&this.input.current.getWrappedInstance().value();null!=t&&t!==this.props.currentRawTopic&&this.props.submitChannelTopic({channelId:this.props.channelId,topic:t}).catch(function(t){var n=Object(he.u)(Object(aa.a)(t,"data.error"));e.props.openModal({element:h.a.createElement(lt.a,{title:pr.t("Oooops!",{ns:"channels"})},n)})})}},{key:"renderInput",value:function(e){var t=e.modules,n=e.isOpen,a=this.props.currentFormattedTopic;return h.a.createElement(cr.b,{initialText:a,focusOnMount:!0,minLines:3,modules:t,isAutocompleteOpen:n,maxLength:250,ariaLabel:pr.t("Edit channel topic"),ref:this.input})}},{key:"render",value:function(){return this.props.featureClassicNav?h.a.createElement(lr.a,Z()({className:"p-channel_topic_dialog",title:pr.t("Edit channel topic"),goButtonText:pr.t("Set topic"),onGo:this.onSubmit},this.props),h.a.createElement(ur.a,{renderInput:this.renderInput,completeOnMembers:!0,completeOnChannels:!0,completeOnEmoji:!0,shouldCompleteOnTab:!1})):null}}]),t}(p.Component);mr.displayName="ChannelTopicDialog",mr.defaultProps=hr;var br=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n),r=a&&a.topic&&a.topic.value;return{currentRawTopic:r,currentFormattedTopic:r&&Object(dr.a)(e,{text:r}),featureClassicNav:Object(y.i)(e,"feature_classic_nav")}},function(e){return{submitChannelTopic:function(){return e(ra.D.apply(void 0,arguments))},openModal:function(){return e(st.e.apply(void 0,arguments))}}})(mr),fr=new x.b("classic_nav"),_r=(m.b.string.isRequired,m.b.string,m.b.bool,m.b.bool,m.b.func,m.b.bool,m.b.func,m.b.func,{topic:void 0,readOnly:!1,featureClassicNav:!1,openModal:d.a,hasKeyboardFocusWithin:!1,onFocus:d.a,onBlur:d.a}),gr=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.containerRef=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"onClick",value:function(e){e.target&&"A"===e.target.tagName||this.props.readOnly||this.containerRef.current&&e.target&&!this.containerRef.current.contains(e.target)||this.props.openModal({element:h.a.createElement(br,{channelId:this.props.channelId})})}},{key:"render",value:function(){var e=this.props,t=e.topic,n=e.readOnly,a=e.featureClassicNav,r=e.hasKeyboardFocusWithin;if(!a)return null;if(n&&!t)return null;var i=t?h.a.createElement(Pn.a,{text:t,className:"p-classic_nav__model__title__info__topic__content",emojiSize:Mn.a.SMALL,noJumbomoji:!0,noHighlights:!0}):h.a.createElement("div",{className:"p-classic_nav__model__title__info__topic__content"},h.a.createElement(se.b,{type:"pencil",size:"inherit",inline:!0}),"\xa0",fr.t("Add a topic")),o=n?null:h.a.createElement(Re.c,{"aria-label":fr.t("Edit channel topic",{fallbackHash:"5301648dcf6b53cefc9ed52999aaa92d4603cae0"}),className:"p-classic_nav__model__title__info__topic__edit"},fr.t("Edit")),s=f()({"p-classic_nav__model__title__info__item":!0,"p-classic_nav__model__title__info__topic":!0,"p-classic_nav__model__title__info__topic--empty":!t,"p-classic_nav__model__title__info__topic--readonly":n,"p-classic_nav__model__title__info__topic--focus-within":r});return h.a.createElement(p.Fragment,null,h.a.createElement("div",{role:"presentation",ref:this.containerRef,className:s,onClick:this.onClick,onFocus:this.props.onFocus,onBlur:this.props.onBlur},h.a.createElement("div",{className:"p-classic_nav__model__title__info__topic__text"},i),o),h.a.createElement(Ka,null))}}]),t}(p.Component);gr.displayName="ModelInfoTopic",gr.defaultProps=_r;var vr=Object(sr.a)(Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return{topic:a&&a.topic&&a.topic.value,readOnly:!Object(It.w)(e,n).ok,featureClassicNav:Object(y.i)(e,"feature_classic_nav")}},function(e){return{openModal:function(){return e(st.e.apply(void 0,arguments))}}})(gr)),yr=n("RDbB"),kr=n("yY9y"),Or=new x.b("presence"),jr=(m.b.string.isRequired,m.b.string,m.b.bool,{memberId:void 0,featureClassicNav:!1}),Cr=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getPresenceDescription=n.getPresenceDescription.bind(n),n}return u()(t,e),o()(t,[{key:"getPresenceDescription",value:function(e){return this.props.featureClassicNav?e.isDnd?Or.t("notifications snoozed"):e.isActive?Or.t("active"):Or.t("away"):null}},{key:"render",value:function(){var e=this,t=this.props.memberId;return t?h.a.createElement(p.Fragment,null,h.a.createElement(yr.a,{memberId:t},function(t){return h.a.createElement("div",{className:"p-classic_nav__model__title__info__presence"},h.a.createElement(kr.a,Z()({},t,{className:"p-classic_nav__model__title__info__presence__icon"})),e.getPresenceDescription(t))}),h.a.createElement(Ka,null)):null}}]),t}(p.Component);Cr.displayName="ModelInfoPresence",Cr.defaultProps=jr;var Er=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return{memberId:Object(he.G)(a),featureClassicNav:Object(y.i)(e,"feature_classic_nav")}})(Cr),wr=(m.b.string.isRequired,m.b.string,{secondaryName:void 0}),Sr=function(e){var t=e.secondaryName;return t?h.a.createElement(p.Fragment,null,h.a.createElement("div",{className:"p-classic_nav__model__title__info__secondary_name"},t),h.a.createElement(Ka,null)):null};Sr.displayName="ModelInfoSecondaryName",Sr.defaultProps=wr;var Ir=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n),r=Object(Ue.c)(e,Object(he.G)(a));return{secondaryName:Object(ne.G)(e,r)}})(Sr),Tr=new x.b("classic_nav"),Nr=(m.b.string.isRequired,m.b.bool,m.b.arrayOf(m.b.string),m.b.bool,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.showDetails({sectionId:"info"})}},{key:"render",value:function(){var e=this.props,t=e.isShared,n=e.pendingAndConnectedTeamIds;if(!e.featureClassicNav)return null;if(!t)return null;var a=Object(x.h)(n.map(function(e){return h.a.createElement(Za.a,{id:e})})),r=Tr.rt("Shared with {teamNames}",{teamNames:a});return h.a.createElement(p.Fragment,null,h.a.createElement(le.c,{tip:Tr.t("View channel details"),position:"bottom"},h.a.createElement(Re.c,{className:"p-classic_nav__model__title__info__shared_teams",onClick:this.onClick,"aria-label":Tr.t("View channel details")},r)),h.a.createElement(Ka,null))}}]),t}(p.Component));Nr.displayName="ModelInfoSharedTeams",Nr.defaultProps={isShared:!1,pendingAndConnectedTeamIds:[],featureClassicNav:!1};var Rr=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return{isShared:Object(he.Y)(a),pendingAndConnectedTeamIds:Object(he.M)(e,a),featureClassicNav:Object(y.i)(e,"feature_classic_nav")}},function(e){return{showDetails:function(){return e(Ke.e.apply(void 0,arguments))}}})(Nr),Ar=(m.b.string.isRequired,m.b.bool,m.b.string,{isExternal:!1,memberTeamId:void 0}),Pr=function(e){var t=e.isExternal,n=e.memberTeamId;return t&&n?h.a.createElement(p.Fragment,null,h.a.createElement(Za.a,{id:n,bold:!1}),h.a.createElement(Ka,null)):null};Pr.displayName="ModelInfoTeamName",Pr.defaultProps=Ar;var Mr=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n),r=Object(he.G)(a),i=Object(Ue.c)(e,r);return{isExternal:Object(ne.lb)(i),memberTeamId:Object(ne.J)(i)}})(Pr),Dr={channel:["star","members","pins","sharedTeams","topic"],private:["star","members","pins","sharedTeams","topic"],mpim:["star","members","pinsMaybe"],im:["star","presence","secondaryName","teamName","pinsMaybe"]},xr=(m.b.string.isRequired,m.b.oneOf(["channel","private","im","mpim"]),{channelType:void 0}),Lr=function(e){var t=e.channelId,n=e.channelType;if(!n)return null;var a=Dr[n].map(function(e){switch(e){case"star":return h.a.createElement(Qa,{channelId:t,key:"star"});case"members":return h.a.createElement(nr,{channelId:t,key:"members"});case"pins":return h.a.createElement(or,{channelId:t,key:"pins"});case"presence":return h.a.createElement(Er,{channelId:t,key:"presence"});case"secondaryName":return h.a.createElement(Ir,{channelId:t,key:"secondaryName"});case"pinsMaybe":return h.a.createElement(or,{maybe:!0,channelId:t,key:"pinsMaybe"});case"sharedTeams":return h.a.createElement(Rr,{channelId:t,key:"sharedTeams"});case"teamName":return h.a.createElement(Mr,{channelId:t,key:"teamName"});case"topic":return h.a.createElement(vr,{channelId:t,key:"topic"});default:return null}});return h.a.createElement("div",{"data-qa":"channel_header__title__info",className:"p-classic_nav__model__title__info p-classic_nav__no_drag"},a)};Lr.displayName="ModelInfo",Lr.defaultProps=xr;var Fr=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return{channelType:Object(he.v)(a)}})(Lr),Br=(m.b.string.isRequired,m.b.string,m.b.bool,m.b.bool,m.b.func,{tooltip:void 0,isVisible:!0,isDisabled:!1,startCall:d.a}),qr=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.isDisabled||this.props.startCall()}},{key:"render",value:function(){var e=this.props,t=e.tooltip,n=e.isVisible,a=e.isDisabled;if(!n)return null;var r=f()({"p-classic_nav__model__button":!0,"p-classic_nav__model__button--disabled":a});return h.a.createElement(le.c,{tip:t,position:"bottom"},h.a.createElement(Re.c,{onClick:this.onClick,className:r,"aria-label":t,"aria-disabled":a,"data-qa":"channel_header_calls_button"},h.a.createElement(se.b,{type:"phone",className:"p-classic_nav__model__button__icon"})))}}]),t}(p.Component);qr.displayName="CallButton",qr.defaultProps=Br;var Ur=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return{tooltip:Object(Aa.b)(e,a),isVisible:Object(Aa.d)(e,a),isDisabled:Object(Aa.c)(e,a)}},function(e){return{startCall:function(){e(Jn.d.apply(void 0,arguments))}}})(qr),Hr=new x.b("classic_nav"),Gr=(m.b.string.isRequired,m.b.bool,m.b.bool,m.b.bool,m.b.func,m.b.func,{isChannel:!0,isActive:!1,featureClassicNav:!1,showDetails:d.a,closeFlexpane:d.a}),Wr=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.renderTip=n.renderTip.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.isActive?this.props.closeFlexpane():this.props.showDetails({sectionId:"info"})}},{key:"renderTip",value:function(){var e=this.props,t=e.isChannel,n=e.isActive;return e.featureClassicNav?t&&n?Hr.t("Hide channel details"):t&&!n?Hr.t("View channel details"):!t&&n?Hr.t("Hide conversation details"):t||n?null:Hr.t("View conversation details"):null}},{key:"render",value:function(){var e=this.props.isActive,t=f()({"p-classic_nav__model__button":!0,"p-classic_nav__model__button--active":e});return h.a.createElement(le.c,{position:"bottom",tip:this.renderTip(),delay:le.a},h.a.createElement(Re.c,{className:t,onClick:this.onClick,"aria-label":this.renderTip()},h.a.createElement(se.b,{type:"info-circle",className:"p-classic_nav__model__button__icon"})))}}]),t}(p.Component);Wr.displayName="DetailsButton",Wr.defaultProps=Gr;var Kr=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return{isChannel:Object(he.yb)(a)||Object(he.xb)(a),isActive:"details"===Object(O.h)(e),featureClassicNav:Object(y.i)(e,"feature_classic_nav")}},function(e){return{showDetails:function(){return e(Ke.e.apply(void 0,arguments))},closeFlexpane:function(){return e(Ke.a.apply(void 0,arguments))}}})(Wr),Vr=n("fvjX"),zr=n("1zbP"),Yr=n("cD5Y"),Qr=n("8Mhq"),Jr=n("Ddh9"),Xr=n("tBeP");function Zr(e,t){var n=Object(re.d)(e,t);if(!e||!n)return null;var a=Object(he.G)(n),r=Object(Ue.c)(e,a),i=Object(ne.n)(r),o=Object(Ue.b)(e),s=Object($.d)(e),l=Object(Jr.c)(e,{serviceId:i,memberId:a});if(Object(zr.d)(l)||!Object(zr.b)(l))return null;var c=l.home_workspace_id,u=l.app_type,d=l.installation.is_active,p=l.directory_profile,h=p.home_url,m=p.support_url,b=p.is_distributed,f="slack"===u,_=c!==s.id,g=!d||_||Object(ne.xb)(o),v=!g,y=!g,k=!g&&!!Object(ne.n)(r),O=!!h,j=!f&&(b||!d),C=!!m,E=!C&&f;return Object(Ra.a)({addApp:v,viewFiles:y,settings:k,homepage:O,viewInAppDirectory:j,support:C,slackSupport:E},function(e){return!!e})}n("CDdZ");var $r=new x.b("app_items"),ei=(m.b.string.isRequired,m.b.object.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.object.isRequired,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.object,{onMenuItemSelected:d.a,openAppManagementModal:d.a,openInviteMemberToChannelDialog:d.a,openModal:d.a,showFileList:d.a,actions:void 0,featureClassicNav:!1}),ti=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getItems=n.getItems.bind(n),n}return u()(t,e),o()(t,[{key:"getItems",value:function(){var e=this,t=this.props,n=t.teamUrl,a=t.appProfile,r=t.memberId,i=t.botId,o=t.clogger,s=t.featureClassicNav,l=t.actions,c=t.onMenuItemSelected;if(!l||!s)return[];var u=a.app_id,d=a.app_type,p=a.directory_profile,m=p.home_url,b=p.support_url;return[{label:$r.t("Add this app to a channel\u2026"),show:l.addApp,key:"addApp",click:function(){return e.props.openInviteMemberToChannelDialog({memberId:r})}},{label:$r.t("View files shared by this app"),show:l.viewFiles,key:"viewFiles",click:function(){return e.props.showFileList({user:r})}},{type:"separator",key:"separator-1"},{label:$r.t("Settings"),show:l.settings,key:"settings",href:n+"services/"+i,click:function(t){var n={action:"CLICK",ui_element:"LINK_APP_SETTINGS"};o.track("CHANNEL_SETTINGS",{contexts:{ui_context:n}}),"xoxa"===d&&(t.preventDefault(),e.props.openAppManagementModal({serviceId:i,referringEventId:"CHANNEL_SETTINGS",referringUiContext:n}))}},{label:$r.t("App Homepage"),show:l.homepage,key:"homepage",href:m,click:function(){o.track("APP_CLICK_LINK_APP_HOMEPAGE_IN_CHANNEL_SETTINGS",{contexts:{ui_context:{step:"channel_settings",action:"click",ui_element:"link_app_homepage"}}})}},{label:$r.t("View in App Directory"),show:l.viewInAppDirectory,key:"viewInAppDirectory",href:n+"apps/"+u+"?utm_source=in-prod&utm_medium=inprod-link_app_directory-channel_settings-click",click:function(){o.track("APP_CLICK_LINK_APP_DIRECTORY_IN_CHANNEL_SETTINGS",{contexts:{ui_context:{step:"channel_settings",action:"click",ui_element:"link_app_directory"}}})}},{label:$r.t("Support for this app"),show:l.support,key:"support",href:b},{label:$r.t("Support for this app"),show:l.slackSupport,key:"slackSupport",click:function(){return e.props.openModal({element:h.a.createElement(Qr.a,{trigger:"app_support_profile_button"})})}}].filter(function(e){return e&&(e.show||"separator"===e.type)}).map(function(e,t){return Z()({},e,{click:function(n){return c(t,n),e.click?e.click(n):void 0}})})}},{key:"render",value:function(){var e=this.props.appProfile;if(Object(zr.d)(e))return h.a.createElement(ie.f,{menuClassNames:"p-app_menu--loading"},h.a.createElement(Yr.a,null));if(!Object(zr.b)(e))return null;var t=this.getItems();return t.length?h.a.createElement(ie.a,{template:t,stripTerminalSeparators:!0}):null}}]),t}(p.Component);ti.displayName="AppMenu",ti.defaultProps=ei;var ni=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n),r=Object(he.G)(a),i=Object(Ue.c)(e,r),o=Object(ne.n)(i),s=Object(v.b)(e),l=Object($.i)(e,s),c=Object(Jr.b)(e,n);return{actions:Zr(e,n),teamUrl:Object(te.o)(l),appProfile:c,memberId:r,botId:o,clogger:Object(ye.a)({state:e}),featureClassicNav:Object(y.i)(e,"feature_classic_nav")}},function(e){return Object(Vr.b)({openAppManagementModal:Xr.a,openInviteMemberToChannelDialog:va.a,openModal:st.e,showFileList:Ke.g},e)})(ti),ai=new x.b("classic_nav"),ri=(m.b.string.isRequired,m.b.bool.isRequired,m.b.bool,m.b.bool,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderMenu=n.renderMenu.bind(n),n}return u()(t,e),o()(t,[{key:"renderMenu",value:function(e){return this.props.hasAppMenu?h.a.createElement(ni,Z()({},e,{channelId:this.props.channelId})):h.a.createElement(qa,Z()({},e,{channelId:this.props.channelId}))}},{key:"render",value:function(){if(!this.props.featureClassicNav)return null;var e=this.props.showChannelLabel?ai.t("Channel settings"):ai.t("Conversation settings");return h.a.createElement(ie.e,{renderMenu:this.renderMenu,position:"bottom-right"},h.a.createElement(le.c,{position:"bottom",tip:e},h.a.createElement(Re.c,{className:"p-classic_nav__model__button","data-qa":"channel_header_settings_button","aria-label":e},h.a.createElement(se.b,{type:"cog-o",className:"p-classic_nav__model__button__icon"}))))}}]),t}(p.Component));ri.displayName="ActionsButton",ri.defaultProps={featureClassicNav:!1,showChannelLabel:!1};var ii=Object(_.b)(function(e,t){var n=t.channelId;return{showChannelLabel:Object(he.W)(Object(re.d)(e,n)),hasAppMenu:Object(he.hb)(e,n),featureClassicNav:Object(y.i)(e,"feature_classic_nav")}})(ri),oi=(m.b.node.isRequired,m.b.node,m.b.string,m.b.bool.isRequired,{className:"",buttons:void 0}),si=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.buttons,a=e.isChannelAvailable,r=e.className,i=f()(r,"p-classic_nav__model_header",{"p-classic_nav__model__title__name__unavailable__channel":!a});return h.a.createElement("div",{className:i},h.a.createElement("div",{"data-qa":"channel_header__title",className:"p-classic_nav__model__title"},t),n&&h.a.createElement("div",{"data-qa":"channel_header__buttons",className:"p-classic_nav__model__buttons p-classic_nav__no_drag"},n))}}]),t}(p.Component);si.displayName="ModelHeaderTemplate";var li=si;si.defaultProps=oi;m.b.string.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.string;var ci=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.isUnknown,a=e.isChannelAvailable,r=e.className;return n?h.a.createElement("div",{className:r}):h.a.createElement(li,{className:r,isChannelAvailable:a,title:h.a.createElement(p.Fragment,null,h.a.createElement(Ga,{channelId:t}),a&&h.a.createElement(Fr,{channelId:t})),buttons:a&&h.a.createElement(p.Fragment,null,h.a.createElement(Ur,{channelId:t}),h.a.createElement(Kr,{channelId:t}),h.a.createElement(ii,{channelId:t}))})}}]),t}(p.Component);ci.displayName="ModelHeader",ci.defaultProps={className:""};var ui=Object(_.b)(function(e){var t=Object(k.a)(e),n=Object(re.d)(e,t);return{channelId:t,isUnknown:!n,isChannelAvailable:!Object(he.Ib)(e,n)}})(ci),di=n("GbYP"),pi=new x.b("app_space"),hi="messages",mi="about",bi=(m.b.string.isRequired,m.b.string,m.b.func,{currentTab:hi,setAppSpaceOpen:void 0}),fi=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.switchTab=n.switchTab.bind(n),n}return u()(t,e),o()(t,[{key:"switchTab",value:function(e){this.props.setAppSpaceOpen(e===mi)}},{key:"render",value:function(){var e=this.props.currentTab,t=[{title:pi.t("Messages"),id:hi,content:h.a.createElement(p.Fragment,null),"data-qa":"messages"},{title:pi.t("About"),id:mi,content:h.a.createElement(p.Fragment,null),"data-qa":"about"}];return h.a.createElement("div",{className:"p-classic_nav__model__title__name__tabs"},h.a.createElement(di.a,{defaultTabId:e,tabs:t,onTabChange:this.switchTab}))}}]),t}(p.Component);fi.displayName="ModelInfoAppIm",fi.defaultProps=bi;var _i=Object(_.b)(function(e){return{currentTab:Object(S.n)(e)?mi:hi}},function(e){return Object(Vr.b)({setAppSpaceOpen:Ea.g},e)})(fi),gi=(m.b.string,m.b.string.isRequired,m.b.string.isRequired,m.b.bool.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.memberId,a=e.isChannelAvailable,r=e.className,i=a?"padding_left_50":"";return h.a.createElement(li,{className:r,isChannelAvailable:a,title:h.a.createElement(p.Fragment,null,h.a.createElement("div",{className:"p-classic_nav__model__title__name p-classic_nav__no_drag"},a&&h.a.createElement(Qa,{channelId:t,key:"star",omitSeparator:!0}),h.a.createElement(Nn.a,{id:n,className:i})),h.a.createElement("div",{className:"p-classic_nav__model__title__info p-classic_nav__no_drag"},h.a.createElement(_i,{channelId:t}))),buttons:a&&h.a.createElement(p.Fragment,null,h.a.createElement(Kr,{channelId:t}),h.a.createElement(ii,{channelId:t}))})}}]),t}(p.Component));gi.displayName="AppImHeader",gi.defaultProps={className:""};var vi=Object(_.b)(function(e){var t=Object(k.a)(e),n=Object(re.d)(e,t);return{channelId:t,memberId:Object(he.G)(n)||void 0,isChannelAvailable:!Object(he.Ib)(e,n)}})(gi),yi=n("utBT"),ki=new x.b("classic_nav"),Oi=(m.b.number,m.b.string,m.b.bool,{totalUnreadReplies:void 0,className:void 0,featureClassicNav:!1}),ji=function(e){var t=e.totalUnreadReplies,n=e.className;if(!e.featureClassicNav)return null;var a=f()("p-classic_nav__channel_header__title","p-classic_nav__no_drag"),r=null;return Object(Ja.a)(t)&&(r=ki.t("{totalUnreadReplies, plural, =0 {No new replies} =1 {# new reply} other {# new replies}}",{totalUnreadReplies:t})),h.a.createElement("div",{className:n},h.a.createElement("span",{className:a},ki.t("Threads")),h.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},r))};ji.displayName="AllThreadsHeader",ji.defaultProps=Oi;var Ci=Object(_.b)(function(e){return{totalUnreadReplies:Object(yi.j)(e),featureClassicNav:Object(y.i)(e,"feature_classic_nav")}})(ji),Ei=n("NFsq");function wi(e){var t=Object(ue.h)(e,"all_unreads_sort_order");return t&&Object(Ei.a)(["alphabetical","priority","oldest","newest"],t)?t:Object(te.B)(Object($.d)(e))?"priority":"alphabetical"}var Si=n("U/ze"),Ii=Object(Si.b)(function(e){return e&&e.unreadsView&&e.unreadsView.newUnreadMsgCount}),Ti=Object(Si.b)(function(e){return e&&e.unreadsView&&e.unreadsView.refreshId}),Ni=Object(Si.b)(function(e){return e&&e.unreadsView&&e.unreadsView.focusRequestedThreadKey}),Ri=n("HcX7"),Ai=new x.b("all_unreads"),Pi=(m.b.number,m.b.func,m.b.bool,{newUnreadMsgCount:0,incrementRefreshId:d.a,featureReactAllUnreads:!1}),Mi=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refreshMessages=n.refreshMessages.bind(n),n}return u()(t,e),o()(t,[{key:"refreshMessages",value:function(){this.props.incrementRefreshId()}},{key:"render",value:function(){var e=this.props,t=e.newUnreadMsgCount,n=e.featureReactAllUnreads;if(t<1||!n)return null;var a=Ai.t("{newUnreadMsgCount, plural, =1 {# new message} other {# new messages}}",{newUnreadMsgCount:t});return h.a.createElement("div",{className:"p-classic_nav__channel_header__refresh_button"},h.a.createElement(Re.d,{type:"outline",onClick:this.refreshMessages},h.a.createElement(se.b,{inline:!0,size:"inherit",type:"sync",className:"p-classic_nav__channel_header__refresh_button_icon"}),a))}}]),t}(p.Component);Mi.displayName="RefreshUnreadMessagesButton",Mi.defaultProps=Pi;var Di={incrementRefreshId:function(){return Ri.a.apply(void 0,arguments)}},xi=Object(_.b)(function(e){return{newUnreadMsgCount:Ii(e),featureReactAllUnreads:Object(y.i)(e,"feature_react_all_unreads")}},Di)(Mi),Li=(m.b.oneOf(["main","name","info"]).isRequired,m.b.string,m.b.bool,{className:void 0,flex:!1});function Fi(e){var t=e.regionId,n=e.className,a=e.flex,r=Be()(e,["regionId","className","flex"]);if(Object(Me.a)())return null;var i=f()(n,{"p-classic_nav__page_header__legacy_drag_region":!0,flex_one:a,channel_header_drag_region:!0});return h.a.createElement("div",Z()({},r,{className:i,"data-region":t}))}Fi.displayName="LegacyPageHeaderDragRegion",Fi.defaultProps=Li;var Bi=Fi,qi=(n("tFl5"),new x.b("all_unreads")),Ui=(m.b.string,m.b.bool,m.b.string.isRequired,m.b.bool.isRequired,m.b.func.isRequired,{className:void 0,featureReactAllUnreads:!1}),Hi=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderMenu=n.renderMenu.bind(n),n}return u()(t,e),o()(t,[{key:"onSortSelected",value:function(e){this.props.setUserPrefByApi({pref:"all_unreads_sort_order",value:e})}},{key:"renderMenu",value:function(e){var t=this,n=this.props,a=n.featureReactAllUnreads,r=n.teamIsPaid;if(!a)return null;var i=[{value:"alphabetical",label:qi.t("Alphabetically")},{value:"priority",label:qi.t("Scientifically")},{value:"newest",label:qi.t("Newest")},{value:"oldest",label:qi.t("Oldest")}],o=qi.t("Sort...");return h.a.createElement(ie.f,e,h.a.createElement(ie.c,{label:o}),i.map(function(e){return function(e,n){return r||"priority"!==e?h.a.createElement(ie.b,{key:e,label:n,onSelected:function(){return t.onSortSelected(e)}}):null}(e.value,e.label)}))}},{key:"renderSortingMenuTrigger",value:function(){var e=this.props,t=e.featureReactAllUnreads,n=e.allUnreadsSortOrder;if(!t)return null;var a="";return a="alphabetical"===n?qi.t("Sorted alphabetically"):"priority"===n?qi.t("Sorted scientifically"):"newest"===n?qi.t("Sorted by newest channel"):qi.t("Sorted by oldest channel"),h.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},h.a.createElement(ie.e,{renderMenu:this.renderMenu,position:"bottom-left"},h.a.createElement(oe.a,null,h.a.createElement("span",null,a),h.a.createElement(se.b,{type:"chevron-down",className:"align_top"}))))}},{key:"render",value:function(){var e=this.props,t=e.featureReactAllUnreads,n=e.className;if(!t)return null;var a=f()("p-classic_nav__channel_header__title","p-classic_nav__no_drag"),r=f()(n,{"p-classic_nav__channel_header__all_unreads_wrapper":!Object(Me.a)()});return h.a.createElement("div",{className:r},h.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},h.a.createElement("div",{className:a},qi.t("All Unreads")),this.renderSortingMenuTrigger()),h.a.createElement(Bi,{flex:!0,regionId:"main"}),h.a.createElement(xi,null))}}]),t}(p.Component);Hi.displayName="AllUnreadsHeader",Hi.defaultProps=Ui;var Gi,Wi={setUserPrefByApi:function(){return D.f.apply(void 0,arguments)}},Ki=Object(_.b)(function(e){return{featureReactAllUnreads:Object(y.i)(e,"feature_react_all_unreads"),allUnreadsSortOrder:wi(e),teamIsPaid:Object(te.B)(Object($.d)(e))}},Wi)(Hi),Vi=n("tP3m"),zi=n("0NgK"),Yi=n("v47e"),Qi=n("ftfc"),Ji=n("bPWw"),Xi=n("9oTK"),Zi=n("clNh"),$i=Object(ot.b)("Completes joiner onboarding",(Gi=Object(Xi.method)(function(e){e(Object(Zi.b)(!1)),e(Object(Zi.c)(!1)),e(Object(D.e)({onboarding_complete:!0,seen_welcome_2:!0}))}),function(e){return Gi.apply(this,arguments)})),eo=(n("+9CW"),function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle;return h.a.createElement("div",{className:"welcome-row margin_left_125 margin_right_125 margin_top_150 margin_bottom_200"},t?h.a.createElement("div",{className:n?"margin_bottom_50":"margin_bottom_75"},h.a.createElement("h3",null,t)):null,n?h.a.createElement("div",{className:"margin_bottom_75"},h.a.createElement("p",null,n)):null,h.a.createElement("div",null,this.props.children))}}]),t}(p.Component));eo.displayName="WelcomeRow";var to=eo,no=(n("plp+"),function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.hasNoPadding,a=f()("welcome-card bordered extra-rounded sk_white_bg overflow_hidden",t,{padding_125:!n});return h.a.createElement("div",{className:a},this.props.children)}}]),t}(p.Component));no.displayName="WelcomeCard";var ao=no,ro=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){return h.a.createElement(to,{title:"Your next steps",subtitle:"(We\u2019ve noticed these set-up steps help people get more out of Slack, faster.)"},h.a.createElement(ao,null,"action item here"))}}]),t}(p.Component);ro.displayName="ActionsRow";var io=ro,oo=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.youtubeEmbedUrl,n=e.className;return h.a.createElement(ao,{className:f()("display_flex justify_content_between",n),hasNoPadding:!0},h.a.createElement("div",{className:"display_flex flex_direction_column justify_content_center"},h.a.createElement("div",{className:"display_flex margin_bottom_50 sk_off_white_bg padding_125"},h.a.createElement("div",null,"logo"),h.a.createElement("div",null,"Acme Corporation in Slack was created by @Emma")),h.a.createElement("div",{className:"sk_dark_gray margin_bottom_50 padding_125"},h.a.createElement("h3",null,"What is Slack?"),h.a.createElement("p",null,"It\u2019s more familiar than you think: Slack lets you message and share files with colleagues in a simple, efficient way. Information is easier to access, and teamwork flows more seamlessly."))),h.a.createElement("div",null,h.a.createElement("iframe",{className:"full_height",style:{minWidth:"300px"},src:t,frameBorder:"0",allowFullScreen:!0,title:"foo".toString()})))}}]),t}(p.Component);oo.displayName="VideoCard";var so=oo,lo=(n("3rHJ"),function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props.member,t=e.profile,n=e.presence,a=t.display_name?"@"+t.display_name:e.name,r=t.real_name||"NEED TO HANDLE EMPTY CASE";return h.a.createElement(ao,{className:"member-card-container flex_one",hasNoPadding:!0},h.a.createElement(le.c,{tip:"Message "+r,position:"top"},h.a.createElement("div",{className:"member-card"},h.a.createElement("div",{className:"member-card__top"},h.a.createElement(Ye.a,{size:56,imageUrl:"/img/slack_kit/avatar1.png",className:"member-card__avatar"}),h.a.createElement("div",{className:"flex_one"},h.a.createElement("div",{className:"member-card__header"},h.a.createElement("span",{className:"member-card__presence-indicator "+n}),a),h.a.createElement("h4",{className:"member-card__name"},r),h.a.createElement("p",{className:"member-card__content"},"joined x time ago"))),h.a.createElement("div",{className:"member-card__bottom"},h.a.createElement("p",{className:"member-card__content"},"A few of ",r,"'s channels:"," ",h.a.createElement("span",{className:"sk_sapphire_blue"},"#general"),","," ",h.a.createElement("span",{className:"sk_sapphire_blue"},"#random"),","," ",h.a.createElement("span",{className:"sk_sapphire_blue"},"#tractor"))))))}}]),t}(p.Component));lo.displayName="MemberCard";var co=Object(_.b)(function(e,t){var n=t.id;return{member:Object(Ue.c)(e,n)}})(lo),uo=(n("iJ13"),function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props.userCards;return h.a.createElement("div",{className:"member-card-grid"},e.map(function(e){return h.a.createElement(co,{id:e.id,key:e.id,type:e.type,channels:e.channels})}))}}]),t}(p.Component));uo.displayName="MemberRow";var po=uo,ho=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isOnboarding,n=e.completeOnboarding,a=e.items,r=e.loadData;t&&n(),0===a.length&&r()}},{key:"render",value:function(){var e=this.props.items;return h.a.createElement("div",{className:f()("overflow_x_scroll flex_one sk_off_white_bg",{"welcome-place-page-container--border-inset":!Object(Me.a)(),full_height:!Object(Me.a)()}),"data-qa":"welcome-place-page-container"},e.map(function(e,t){switch(e.type){case"video":return h.a.createElement(to,{key:""+e.type+t},h.a.createElement(so,{youtubeEmbedUrl:""}));case"workflow":return h.a.createElement(io,{key:""+e.type+t});case"member":return h.a.createElement(to,{key:""+e.type+t,title:"See who joined Slack this week"},h.a.createElement(po,{userCards:e.content.user_cards}));case"help_center_search":return h.a.createElement(to,{key:""+e.type+t,title:"Have a question? We\u2019re here to help."},h.a.createElement("div",{className:"welcome-place__search_container"},h.a.createElement(Qi.a,{defaultArticlesData:Object(aa.a)(e,"content.help_center_search.articles",null)})));default:return null}}))}}]),t}(p.Component);ho.displayName="WelcomePlace";var mo=Object(_.b)(function(e){return{items:Object(F.a)(e),isOnboarding:!!Object(Ji.e)(e)}},function(e){return{completeOnboarding:function(){e($i())},loadData:function(){e(Object(Yi.b)())}}})(ho),bo=n("zmn3"),fo=n("DKof"),_o=n("mkut"),go=n("TcTh"),vo=n("smxp"),yo=n("q4bl"),ko=n("eVYY"),Oo=n("yJbr"),jo=n("H2PH"),Co=(n("9m5W"),new x.b("files")),Eo=(m.b.oneOf([ko.c,ko.e,ko.d,ko.b,ko.a]),m.b.string,m.b.number,m.b.number,m.b.bool,m.b.func,m.b.bool,m.b.string,{fileName:"",fileCount:0,percentComplete:0,status:ko.e,cancelable:!1,cancelUpload:d.a,isRetry:!1,teamId:void 0}),wo=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.cancel=n.cancel.bind(n),n.clearOverrides=n.clearOverrides.bind(n),n.doneProlongingStatus=n.doneProlongingStatus.bind(n),n.state={statusOverride:null,fileNameOverride:null,timer:null,fading:!1},n}return u()(t,e),o()(t,null,[{key:"renderComplete",value:function(){var e=Co.t("Processing uploaded file\u2026 complete!");return h.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},h.a.createElement("div",{className:"p-file_upload_banner__text"},e))}}]),o()(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=[ko.b,ko.a];this.props.status!==e.status&&Object(Ei.a)(n,e.status)&&this.setState(function(){return{statusOverride:e.status,fileNameOverride:e.fileName,timer:setTimeout(t.doneProlongingStatus,1e3)}})}},{key:"componentWillUnmount",value:function(){this.state.timer&&clearTimeout(this.state.timer)}},{key:"getStatus",value:function(){var e=this.props.status;return this.state.statusOverride||e}},{key:"getFileName",value:function(){var e=this.props.fileName;return this.state.fileNameOverride||e}},{key:"cancel",value:function(){var e=this.props.teamId,t=this.props.cancelUpload,n=Object(jo.a)(e);t=n.cancelCurrentUpload.bind(n),setTimeout(function(){t()},1)}},{key:"clearOverrides",value:function(){this.setState(function(){return{statusOverride:null,fileNameOverride:null,timer:null,fading:!1}})}},{key:"doneProlongingStatus",value:function(){var e=this;this.props.status===ko.c?this.setState(function(){return{fading:!0,timer:setTimeout(e.clearOverrides,250)}}):this.clearOverrides()}},{key:"renderMultiFileUploadComplete",value:function(){var e=this.props.fileCount,t=Co.t("Processing uploaded {fileCount, plural, =1 {file} other {files}}\u2026 complete!",{fileCount:e});return h.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},h.a.createElement("div",{className:"p-file_upload_banner__text"},t))}},{key:"renderCanceled",value:function(){var e=this.props.fileCount,t=this.getFileName(),n=Co.t("Canceling {fileName}\u2026",{fileName:Object(x.n)(t)});return e>1&&(n=Co.t("Canceling upload\u2026")),h.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--canceled"},h.a.createElement("div",{className:"p-file_upload_banner__text"},n))}},{key:"renderUploading",value:function(){var e=this.props,t=e.fileName,n=e.fileCount,a=e.percentComplete,r=e.cancelable,i=e.isRetry,o=this.getStatus()===ko.d||a>=99,s=void 0;o?s=Co.t("Processing uploaded {fileCount, plural, =1 {file} other {files}}\u2026",{fileCount:n}):(i?(s=Co.t("Re-uploading {fileName}",{fileName:Object(x.n)(t)}),n>1&&(s=Co.t("Re-uploading {fileCount} files",{fileCount:n}))):(s=Co.t("Uploading {fileName}",{fileName:Object(x.n)(t)}),n>1&&(s=Co.t("Uploading {fileCount} files",{fileCount:n}))),s+="\u2026"+a+"%");var l=f()("p-file_upload_banner__progress_inner",{"p-file_upload_banner__progress_inner--animated":o}),c={width:a+"%"},u=null;return r&&!o&&(u=h.a.createElement(Re.c,{key:"cancel",className:"p-file_upload_banner__cancel",onClick:this.cancel},Co.t("cancel"))),[h.a.createElement("div",{key:"bar",className:"p-file_upload_banner__progress"},h.a.createElement("span",{className:l,style:c})),h.a.createElement("div",{key:"text",className:"p-file_upload_banner__text"},s),u]}},{key:"render",value:function(){var e=this.getStatus(),t=this.state.fading;if(e===ko.c)return null;var n=void 0;n=e===ko.e||e===ko.d?this.renderUploading():e===ko.b?this.renderMultiFileUploadComplete():this.renderCanceled();var a=f()("p-file_upload_banner p-message_pane__banner",{"p-file_upload_banner--fading":t});return h.a.createElement("div",{className:a},n)}}]),t}(p.PureComponent);wo.displayName="FileUploadBanner",wo.defaultProps=Eo;var So=Object(_.b)(function(e){var t=Object(ko.g)(e),n=Object($.d)(e);return Z()({},t,{teamId:n.id,cancelUpload:Oo.a})})(wo),Io=n("XoBp"),To=n("sk9p"),No=n.n(To),Ro=n("GxtX"),Ao=n("bPB8"),Po=n("UXvI"),Mo=n("WaNi"),Do=n("BwAi"),xo=n("mmRP"),Lo=Object(Po.a)(function(e){var t=Object(g.getStateByTeamId)(e);if(Object(Me.a)()&&!Object(O.i)(t))return Promise.resolve();var n=Object(y.i)(t,"feature_vitess_sidebar")?Do.a:Mo.a;return Object(g.dispatchForTeamId)(e,n({reason:"requestOfflineCounts"})).tap(function(){return Object(g.dispatchForTeamId)(e,Object(go.k)())}).tap(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(g.dispatchForTeamId)(e,Object(xo.a)(t))}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object(Ao.a)(Object(Ro.a)(t.channels,t.groups));Object(g.dispatchForTeamId)(e,Object(Qn.reconcileChannelAccess)({channels:n}))}).catch(function(n){Object(ut.a)({state:t}).error("Failed to fetch offline users counts for "+e+": "+n)})},6e4,{trailing:!1}),Fo=Object(ot.b)("Request offline users counts",function(e,t){return Object(y.i)(t(),"feature_degraded_send")&&Lo(Object(v.b)(t()))});Fo.propTypes={};var Bo=Fo,qo=n("Cbpi"),Uo=n("BeG2"),Ho=n("2HDu"),Go=n("+1yX"),Wo=n("4v0o"),Ko=(n("yqYT"),new x.b("ms")),Vo=6e4,zo=1e4,Yo=(m.b.string,m.b.bool.isRequired,m.b.string.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,{currentThreadKey:void 0});function Qo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentThreadKey,n=e.featureSonicDegradedBanner,a=e.primaryView,r=e.reconnectImmediately,i=e.requestOfflineCounts,o=e.requestOfflineHistory,s=Object(p.useRef)(),l=Object(p.useRef)(),c=Object(p.useState)(),u=No()(c,2),d=u[0],m=u[1],b=Object(p.useState)(!1),f=No()(b,2),_=f[0],g=f[1];function v(){s.current=Date.now()}function y(){m(Object(Zt.q)(s.current/1e3))}function k(e){e&&e.preventDefault&&e.preventDefault(),g(!0),l.current=setTimeout(function(){g(!1)},zo),function(){var e=[];if((Object(Go.a)(a)||a===Wo.a.allThreads)&&e.push(o({channelId:a})),t){var n=Object(Ho.a)(t),s=n.channelId,l=n.threadTs;e.push(o({channelId:s,threadTs:l}))}return e.push(i()),r(),Promise.all(e)}().then(function(){v(),m()})}function O(e){var t=e.tag,n=e.text;return"a"===t?h.a.createElement(G.a,{className:"p-message_pane__degraded_banner__reload_cta",onClick:k,"data-qa":"connecting_banner_cta"},n):h.a.createElement("div",{className:"p-message_pane__degraded_banner__banner_text"},n)}if(Object(p.useEffect)(function(){v();var e=setInterval(y,Vo);return function(){clearInterval(e),clearTimeout(l.current)}},[]),!n||!Object(Me.a)()||_)return null;var j=void 0;return j=d?Ko.rt("<div>Last updated {timeAgo}\u2026</div><a>Load new messages</a>",{timeAgo:d},O):Ko.rt("<div>Last updated less than a minute ago\u2026</div><a>Load new messages</a>",null,O),h.a.createElement("div",{className:"p-message_pane__degraded_banner p-message_pane__banner"},j,h.a.createElement("div",{"aria-live":"assertive",className:"offscreen"},n?ze.V?d?Ko.t("Last updated {timeAgo}\u2026 Press F6 to navigate to the status banner and click load new messages",{timeAgo:d}):Ko.t("Last updated less than a minute ago\u2026 Press F6 to navigate to the status banner and click load new messages"):Object(qe.p)()?d?Ko.t("Last updated {timeAgo}\u2026 Press Cmd + F6 to navigate to the status banner and click load new messages",{timeAgo:d}):Ko.t("Last updated less than a minute ago\u2026 Press Cmd + F6 to navigate to the status banner and click load new messages"):d?Ko.t("Last updated {timeAgo}\u2026 Press Ctrl + F6 to navigate to the status banner and click load new messages",{timeAgo:d}):Ko.t("Last updated less than a minute ago\u2026 Press Ctrl + F6 to navigate to the status banner and click load new messages"):null))}Qo.displayName="DegradedBanner",Qo.defaultProps=Yo;var Jo=Object(_.b)(function(e){return{currentThreadKey:Object(Ho.b)(e),featureSonicDegradedBanner:Object(y.i)(e,"feature_sonic_degraded_banner"),primaryView:Object(k.a)(e)}},function(e){return{reconnectImmediately:function(){return e(Uo.g.apply(void 0,arguments))},requestOfflineCounts:function(){return e(Bo.apply(void 0,arguments))},requestOfflineHistory:function(){return e(qo.a.apply(void 0,arguments))}}})(Qo),Xo=(n("Usoh"),new x.b("unread")),Zo=(m.b.bool,function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={slow:!1},e.timer=null,e}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this;this.timer=setTimeout(function(){e.setState(function(){return{slow:!0}})},5e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=this.props.featureReactAllThreads,t=e?Xo.t("Loading messages..."):"",n=e?Xo.t("Still loading... sorry for the long wait!"):"";return h.a.createElement("div",{className:"p-message_container_loading","data-qa":"message_container_loading"},h.a.createElement("div",{className:"p-message_container_loading__msg"},this.state.slow?n:t))}}]),t}(h.a.Component));Zo.displayName="MessageContainerLoading",Zo.defaultProps={featureReactAllThreads:!1};var $o=Object(Dt.a)("feature_react_all_threads")(Zo),es=(n("Qwh8"),new x.b("threads")),ts=(m.b.func,m.b.string,m.b.node,{tryAgain:d.a,"data-qa":"message_container_error",children:null});function ns(e){var t=e.tryAgain,n=e["data-qa"],a=e.children;return h.a.createElement("div",{className:"p-message_container_error","data-qa":n},h.a.createElement("div",{className:"p-message_container_error__contents"},h.a.createElement("div",{className:"p-message_container_error__emoji"},h.a.createElement(Mn.b,{text:":tropical_fish:",emojiSize:Mn.a.LARGE})),h.a.createElement("p",{className:"p-message_container_error__msg"},a),h.a.createElement(Re.d,{type:"primary",onClick:t,"data-qa":n+"_try_again"},es.t("Try Again"))))}ns.displayName="MessageContainerError",ns.defaultProps=ts;var as=ns,rs=n("tbBR"),is=n("fOu1"),os=Object(ka.b)("TS.generic_notification_banner.banner_to_show_sig.dispatch"),ss=Object(ka.b)("TS.ui.banner.isDunningBanner",function(){return!1}),ls=Object(ka.b)("TS.ui.banner.show"),cs=n("cErB"),us=(n("+ZNJ"),new x.b("notification_banner")),ds=(m.b.string,m.b.string,m.b.node,m.b.node,m.b.string,m.b.string,m.b.string,m.b.func,m.b.bool,m.b.bool,m.b.bool,m.b.string,m.b.string,m.b.func,m.b.bool,m.b.bool,m.b.bool,m.b.func,m.b.func.isRequired,m.b.func,m.b.shape({countPref:m.b.string.isRequired,tsPref:m.b.string.isRequired,hidePref:m.b.string}),{imgSrc:"",imgAlt:"",headerText:"",bodyText:"",bodyClass:"",goButtonText:"",goButtonClass:"",onGo:d.a,showGoButton:!0,isLearnMoreButton:!1,shouldCloseOnGo:!0,cancelButtonText:void 0,cancelButtonClass:"",onCancel:d.a,showCancelButton:!0,alwaysHideBannerAfterCancel:!1,showCloseIcon:!1,onCloseIcon:d.a,onCloseBanner:d.a,bannerPrefs:{}}),ps=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["handleGoButton","handleCancelButton","handleCloseIcon"]),n}return u()(t,e),o()(t,[{key:"closeBanner",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props,n=t.onCloseBanner,a=t.bannerPrefs;this.props.closeBanner({bannerPrefs:a,alwaysHideBanner:e}),n()}},{key:"handleGoButton",value:function(){var e=this.props,t=e.onGo;e.shouldCloseOnGo&&this.closeBanner(),t()}},{key:"handleCancelButton",value:function(){var e=this.props,t=e.onCancel,n=e.alwaysHideBannerAfterCancel;this.closeBanner(n),t()}},{key:"handleCloseIcon",value:function(){var e=this.props.onCloseIcon;this.closeBanner(),e()}},{key:"renderHeader",value:function(){var e=this.props,t=e.headerText,n=e.imgSrc,a=e.imgAlt;return t?h.a.createElement("h1",{className:"p-message_pane_banner__header"},n&&h.a.createElement("div",{className:"p-message_pane_banner__header_img_container"},h.a.createElement("img",{src:n,alt:a,className:"p-message_pane_banner__header_img","data-qa":"message_pane_banner_header_img"})),t):null}},{key:"renderBody",value:function(){var e=this.props,t=e.bodyText,n=e.bodyClass;if(!t)return null;var a=f()("p-message_pane_banner__body",n);return h.a.createElement("div",{className:a},t)}},{key:"renderGoButton",value:function(){var e=this.props,t=e.goButtonText,n=e.goButtonClass,a=e.isLearnMoreButton?us.t("Learn More"):us.t("Show Me"),r=f()("p-message_pane_banner__button ","p-message_pane_banner__button--go",n);return h.a.createElement(Re.b,{className:r,onClick:this.handleGoButton,size:"small","data-qa":"message_pane_banner_go_button"},t||a)}},{key:"renderCancelButton",value:function(){var e=this.props.cancelButtonClass,t=f()("p-message_pane_banner__button","p-message_pane_banner__button--cancel",e),n=this.props.cancelButtonText||us.t("Skip for Now");return h.a.createElement(Re.b,{className:t,onClick:this.handleCancelButton,size:"small",type:"outline","data-qa":"message_pane_banner_cancel_button"},n)}},{key:"renderCloseIcon",value:function(){return h.a.createElement(Re.c,{"aria-label":us.t("Close"),className:"p-message_pane_banner__close_icon",onClick:this.handleCloseIcon,"data-qa":"message_pane_banner_close_icon"},h.a.createElement(Kn.a,{type:"times"}))}},{key:"render",value:function(){var e=this.props,t=e.showGoButton,n=e.showCancelButton,a=e.showCloseIcon;return h.a.createElement("div",{className:"p-message_pane_banner"},this.renderHeader(),this.renderBody(),h.a.createElement("div",{className:"p-message_pane_banner__button_container"},n&&this.renderCancelButton(),t&&this.renderGoButton()),a&&this.renderCloseIcon())}}]),t}(p.PureComponent);ps.displayName="MessagePaneBanner",ps.defaultProps=ds;var hs={closeBanner:is.a},ms=Object(_.b)(null,hs)(ps),bs=new x.b("client"),fs={countPref:"activation_msg_limit_banner_cta_count",tsPref:"activation_msg_limit_banner_cta_last_ts"},_s=(m.b.object.isRequired,m.b.object.isRequired,m.b.number.isRequired,m.b.number.isRequired,m.b.number.isRequired,m.b.string.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onGo","onClose"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clog({action:ve.v.IMPRESSION})}},{key:"onGo",value:function(){this.clog({action:ve.v.CLICK,ui_properties:{element_type:ve.j.BUTTON,element_name:"btn_show_me"}}),Object(te.O)(this.props.team,"/admin/stats")}},{key:"onClose",value:function(){this.clog({action:ve.v.CLICK,ui_properties:{element_type:ve.j.BUTTON,element_name:"btn_close"}})}},{key:"clog",value:function(e){var t=this.props,n=t.clogger,a=t.messagesCount,r=t.totalUsers,i=t.totalChannels,o=Z()({step:ve.z.BANNER_ACTIVATION_MSG_LIMIT},e);n.track(ve.k.UPGRDEXP_MSG_LIM_ACTIVATION_BANNER,{limit_meter_messages_count:a,num_members_minus_bots:r,num_of_channels:i,contexts:{ui_context:o}})}},{key:"render",value:function(){var e=this.props,t=e.totalUsers,n=e.totalChannels,a=e.messagesCount,r=e.teamName,i=bs.t("{name_of_workspace} is on a roll",{name_of_workspace:r}),o=bs.rt("Your team\u2019s now <b>{num_of_members} members</b> strong, with <b>{num_of_messages} messages</b> sent across <b>{num_of_channels} channels</b>. You can track your team\u2019s progress via the main menu.",{num_of_members:t,num_of_messages:a,num_of_channels:n}),s=bs.t("Show Me");return h.a.createElement(ms,{headerText:i,bodyText:o,goButtonText:s,onGo:this.onGo,showCancelButton:!1,showCloseIcon:!0,onCloseIcon:this.onClose,bannerPrefs:fs})}}]),t}(p.PureComponent));_s.displayName="ActivationMsgLimitBanner";var gs=Object(_.b)(function(e){return{team:Object($.d)(e),clogger:Object(ye.a)({state:e})}})(_s),vs=new x.b("send_btn"),ys=(m.b.func.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.object.isRequired,m.b.func.isRequired,{countPref:"i18n_japan_beta_send_btn_banner_cta_count",tsPref:"i18n_japan_beta_send_btn_banner_cta_last_ts"}),ks=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onPrefLinkClick=n.onPrefLinkClick.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track("I18N_BANNER",{contexts:{ui_context:{step:258,action:"impression"}}})}},{key:"componentWillUpdate",value:function(e){var t=this.props,n=t.hasSendButton;t.sendButtonAutoSet===e.sendButtonAutoSet&&n===e.hasSendButton||this.props.closeBanner()}},{key:"onPrefLinkClick",value:function(){this.props.clogger.track("I18N_BANNER",{contexts:{ui_context:{step:258,action:"click",ui_element:"prefs_button"}}}),this.props.openPrefsModal({activeSection:"advanced",activeSubsection:"msg_input_send_btn_label"}),this.props.closeBanner()}},{key:"renderBodyText",value:function(){var e=this;return h.a.createElement("div",null,vs.rt("Send a message with a quick click, or by pressing <Keys>keys</Keys>",{},function(){return h.a.createElement("div",{className:"inline_block"},h.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(qe.p)()?"\u2318":"Ctrl"),h.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"Enter"))}),h.a.createElement("br",null),vs.rt("Don\u2018t like the change? You can always switch back in <Link>your preferences</Link>.",{},function(t){var n=t.text;return h.a.createElement(G.a,{onClick:e.onPrefLinkClick},n)}))}},{key:"render",value:function(){var e=vs.t("Just for Japan: a button for sending"),t=vs.t("Got It");return h.a.createElement(ms,{headerText:e,bodyText:this.renderBodyText(),bodyClass:"p-message_pane_banner__body--taller-line-height",goButtonText:t,showCancelButton:!1,showCloseIcon:!0,bannerPrefs:ys})}}]),t}(p.PureComponent);ks.displayName="I18nJapanBetaSendBtnBanner";var Os=Object(_.b)(function(e){return{hasSendButton:Object(ue.h)(e,"msg_input_send_btn"),sendButtonAutoSet:Object(ue.h)(e,"msg_input_send_btn_auto_set"),clogger:Object(ye.a)({state:e})}},function(e){return{closeBanner:is.a,openPrefsModal:function(){return e(fe.a.apply(void 0,arguments))}}})(ks),js=n("4kdM"),Cs=n("XzsM"),Es=new x.b("notification_banner"),ws={countPref:"local_discount_awareness_banner_cta_count",tsPref:"local_discount_awareness_banner_cta_last_ts",hidePref:"local_discount_awareness_banner_cta_hide"},Ss=ve.z.BANNER_LOCAL_DISCOUNT_AWARENESS_BANNER,Is="pricing?ui_element="+ve.y.PRICING_BUTTON+"&ui_step="+Ss,Ts=(m.b.number.isRequired,m.b.func.isRequired,m.b.string.isRequired,m.b.object.isRequired,m.b.bool.isRequired,m.b.string.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onGo","onCloseIcon","onCancel"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clog({action:ve.v.IMPRESSION,ui_properties:{element_type:ve.j.BANNER,element_name:"local_discount_awareness_banner"}})}},{key:"onGo",value:function(){this.clog({action:ve.v.CLICK,ui_element:ve.y.PRICING_BUTTON,is_primary_cta:!0,ui_properties:{element_type:ve.j.BUTTON,element_name:"pricing_button"}},!0),this.props.showPricingPlans({pricingPlansPageUrl:Is,source:"local_discount_awareness_banner"})}},{key:"onCancel",value:function(){this.clog({action:ve.v.CLOSE,ui_element:ve.y.SKIP_FOR_NOW_BUTTON,ui_properties:{element_type:ve.j.BUTTON,element_name:"skip_for_now_button"}})}},{key:"onCloseIcon",value:function(){this.clog({action:ve.v.CLOSE,ui_element:ve.y.BTN_CLOSE,ui_properties:{element_type:ve.j.X,element_name:"btn_close"}})}},{key:"getContent",value:function(){var e=this.props,t=e.discountPercent,n=e.country,a=e.featureLocalDiscountAwareness,r=e.localDiscountAwarenessExperiment,i=f()("p-message_pane_banner__header_icon","p-message_pane_banner__header_icon--"+n.toLowerCase());return a?{headerText:h.a.createElement("div",null,h.a.createElement("div",{className:i}),"treatment1"===r?Es.rt("Get a {discountPercent}% discount on a paid plan",{discountPercent:t}):Es.rt("Upgrade to access paid features \u2014 at {discountPercent}% off",{discountPercent:t})),bodyText:Es.rt("For a limited time, teams in {country} can get {discountPercent}% off when upgrading to a paid plan. Once you upgrade, your team will be able to see and search all past messages and files, add guests to your workspace, and more.",{country:n,discountPercent:t}),cancelButtonText:Es.t("Not Now"),goButtonText:Es.t("See Upgrade Options")}:null}},{key:"clog",value:function(e,t){var n=this.props.clogger,a=Object(js.a)(e,{step:Ss});n.track(ve.k.GROWTH_LOCAL_DISCOUNT,{contexts:{ui_context:a}}),t&&n.track(ve.k.GROWTH_PRICING,{contexts:{ui_context:a}})}},{key:"render",value:function(){var e=this.getContent();return e?h.a.createElement(ms,{headerText:e.headerText,bodyClass:"p-message_pane_banner__body--widest-text",bodyText:e.bodyText,cancelButtonText:e.cancelButtonText,goButtonText:e.goButtonText,showCloseIcon:!0,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:ws}):null}}]),t}(p.PureComponent));Ts.displayName="LocalDiscountAwarenessBanner";var Ns={showPricingPlans:is.e},Rs=Object(_.b)(function(e){return{clogger:Object(ye.a)({state:e}),featureLocalDiscountAwareness:Object(y.i)(e,"feature_local_discount_awareness"),localDiscountAwarenessExperiment:Object(Cs.c)(e,"local_discount_awareness")}},Ns)(Ts),As=n("46+D"),Ps=(m.b.bool,m.b.arrayOf(m.b.node),m.b.shape({countPref:m.b.string,tsPref:m.b.string}).isRequired,m.b.number.isRequired,m.b.number.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.node.isRequired,m.b.func.isRequired,m.b.object.isRequired,m.b.object.isRequired,m.b.string,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onGo","onCloseIcon","renderBodyText"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clog({action:ve.v.IMPRESSION})}},{key:"onGo",value:function(){var e=this.props,t=e.onGoUrl,n=e.team;this.clog({action:ve.v.CLICK,ui_properties:{element_type:ve.j.BUTTON,element_name:"upgrade"}}),Object(te.O)(n,t)}},{key:"onCloseIcon",value:function(){this.clog({action:ve.v.CLICK,ui_properties:{element_type:ve.j.BUTTON,element_name:"close"}})}},{key:"clog",value:function(e){var t=this.props,n=t.clogStep,a=t.clogEvent,r=t.clogger,i=[ve.k.GROWTH_PRICING,a],o=Z()({step:n},e);i.forEach(function(e){r.track(e,{contexts:{ui_context:o}})})}},{key:"renderBodyText",value:function(){var e=this.props,t=e.renderBodyText;return t(e.sharedTeamNames)}},{key:"render",value:function(){var e=this.props,t=e.isSharedChannel,n=e.headerText,a=e.goButtonText,r=e.bannerPrefs,i=e.bodyClass;return t?h.a.createElement(ms,{headerText:n,bodyText:this.renderBodyText(),goButtonText:a,showCancelButton:!1,showCloseIcon:!0,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:r,bodyClass:i}):null}}]),t}(p.PureComponent));Ps.displayName="EscTrialBanner",Ps.defaultProps={isSharedChannel:!1,sharedTeamNames:[],bodyClass:""};var Ms=Object(_.b)(function(e){var t=Object(k.a)(e),n=Object(re.d)(e,t),a=Object(he.Y)(n),r=[];if(a){var i=Object(he.M)(e,n);Object(sa.a)(i)||(r=Object(bo.a)(i,function(t){var n=Object($.i)(e,t);return Object(te.L)(n)?h.a.createElement(As.a,{type:"unknown"}):Object(te.e)(n)}))}return{isSharedChannel:a,sharedTeamNames:r,clogger:Object(ye.a)({state:e}),team:Object($.d)(e)}})(Ps),Ds=new x.b("trial_expiration_banners"),xs=(m.b.number.isRequired,m.b.string.isRequired,{countPref:"two_weeks_left_esc_trial_cta_count",tsPref:"two_weeks_left_esc_trial_cta_last_ts"}),Ls=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["renderBodyText","renderHeaderText"]),n}return u()(t,e),o()(t,[{key:"renderBodyText",value:function(e){var t=this.props.expirationDate,n=Object(x.h)(e,{noEscape:!0,react:!0});return Ds.rt("When the trial ends, this channel will <b>no longer be shared</b> with {shared_team_name}. Upgrade by {expiration_date} to keep all the features of the Standard plan.",{expiration_date:t,shared_team_name:n})}},{key:"renderHeaderText",value:function(){var e=this.props.numDaysLeft;return Ds.t("Heads up: you have {num_of_days} more days on your free trial",{num_of_days:e})}},{key:"render",value:function(){var e=Ds.t("Upgrade Now");return h.a.createElement(Ms,{bannerPrefs:xs,clogStep:ve.z.BANNER_SHARED_CHANNELS_TRIAL_TWO_WEEK_REMINDER,clogEvent:ve.k.UPGRDEXP_FREE_TRIAL_FOR_SC,onGoUrl:"admin/billing",goButtonText:e,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]),t}(p.PureComponent);Ls.displayName="TwoWeeksLeftEscTrialBanner";var Fs=Ls,Bs=new x.b("trial_expiration_banners"),qs=(m.b.number.isRequired,m.b.string.isRequired,{countPref:"one_week_left_esc_trial_cta_count",tsPref:"one_week_left_esc_trial_cta_last_ts"}),Us=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["renderBodyText","renderHeaderText"]),n}return u()(t,e),o()(t,[{key:"renderBodyText",value:function(e){var t=this.props.expirationDate,n=Object(x.h)(e,{noEscape:!0,react:!0});return Bs.rt("<b>You won\u2019t be able to use this channel with {shared_team_name}</b> afterward, even if you upgrade later. To keep sharing this channel, upgrade before <span>{expiration_date}.</span>",{expiration_date:t,shared_team_name:n,fallbackHash:"decd823ab360b2e8c20d6fbcd615ae1c1c450d9e"},function(e){var t=e.text;return"b"===e.tag?h.a.createElement("strong",{className:"sk_warning_red"},t):h.a.createElement("span",{className:"nowrap"},t)})}},{key:"renderHeaderText",value:function(){var e=this.props.numDaysLeft;return Bs.t("Only {num_of_days} days left on your free trial",{num_of_days:e})}},{key:"render",value:function(){var e=Bs.t("Upgrade Now");return h.a.createElement(Ms,{bannerPrefs:qs,clogStep:ve.z.BANNER_SHARED_CHANNELS_TRIAL_ONE_WEEK_REMINDER,clogEvent:ve.k.UPGRDEXP_FREE_TRIAL_FOR_SC,onGoUrl:"admin/billing",goButtonText:e,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]),t}(p.PureComponent);Us.displayName="OneWeekLeftEscTrialBanner";var Hs=Us,Gs=new x.b("trial_expiration_banners"),Ws={countPref:"three_days_left_esc_trial_cta_count",tsPref:"three_days_left_esc_trial_cta_last_ts"},Ks=(m.b.bool.isRequired,m.b.string.isRequired,m.b.string.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["renderBodyText"]),n}return u()(t,e),o()(t,[{key:"renderBodyText",value:function(e){return this.props.featurePlansPageTrialI18n?Gs.rt("Upgrade before your free trial ends on {expiration_date} to keep sharing this channel with {shared_team_name}. Otherwise, this channel will be permanently disconnected. (You can start a new shared channel if you decide to upgrade later.)",{expiration_date:this.props.expirationDate,shared_team_name:Object(x.h)(e,{noEscape:!0,react:!0})}):null}},{key:"render",value:function(){var e=this.props,t=e.featurePlansPageTrialI18n,n=e.productId;return t?h.a.createElement(Ms,{bannerPrefs:Ws,clogStep:ve.z.BANNER_SHARED_CHANNELS_TRIAL_THREE_DAY_REMINDER,onGoUrl:wt.a+"?s=1&p="+n+"&entry_point=three_days_left_esc_trial_banner",clogEvent:ve.k.GROWTH_PLANS_PAGE_TRIALS,goButtonText:Gs.t("Upgrade Now"),headerText:Gs.t("Upgrade your workspace to keep sharing this channel"),renderBodyText:this.renderBodyText,bodyClass:"p-message_pane_banner__body--widest-text"}):null}}]),t}(p.PureComponent));Ks.displayName="ThreeDaysLeftEscTrialBanner";var Vs=Object(_.b)(function(e){return{featurePlansPageTrialI18n:Object(y.i)(e,"feature_plans_page_trial_i18n")}})(Ks),zs=new x.b("trial_expiration_banners"),Ys={countPref:"three_days_left_trial_cta_count",tsPref:"three_days_left_trial_cta_last_ts"},Qs=(m.b.bool.isRequired,m.b.object.isRequired,m.b.object.isRequired,m.b.string.isRequired,m.b.string.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onGo","onClose"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clog({action:ve.v.IMPRESSION})}},{key:"onGo",value:function(){var e=this.props,t=e.team,n=e.productId;this.clog({action:ve.v.CLICK,ui_properties:{element_type:ve.j.BUTTON,element_name:"upgrade"}}),Object(te.O)(t,wt.a+"?s=1&p="+n+"&entry_point=three_days_left_trial_banner")}},{key:"onClose",value:function(){this.clog({action:ve.v.CLICK,ui_properties:{element_type:ve.j.BUTTON,element_name:"close"}})}},{key:"clog",value:function(e){var t=this.props.clogger,n=Z()({step:ve.z.BANNER_TRIAL_THREE_DAY_REMINDER},e);t.track(ve.k.GROWTH_PLANS_PAGE_TRIALS,{contexts:{ui_context:n}})}},{key:"render",value:function(){var e=this.props,t=e.featurePlansPageTrialI18n,n=e.team,a=e.expirationDate;if(!t)return null;var r=Object(te.x)(n)?zs.t("Standard"):zs.t("Plus"),i=zs.t("Your free trial ends soon"),o=zs.rt("Your workspace\u2019s trial of our <b>{plan_level} plan</b> only lasts through <b>{expiration_date}</b>. Upgrade to a paid plan to keep your access to features like unlimited messages and files, guest accounts, and more when your trial ends.",{plan_level:r,expiration_date:a}),s=zs.t("Upgrade Now");return h.a.createElement(ms,{headerText:i,bodyText:o,goButtonText:s,onGo:this.onGo,showCancelButton:!1,showCloseIcon:!0,onCloseIcon:this.onClose,bannerPrefs:Ys})}}]),t}(p.PureComponent));Qs.displayName="ThreeDaysLeftTrialBanner";var Js=Object(_.b)(function(e){return{team:Object($.d)(e),clogger:Object(ye.a)({state:e}),featurePlansPageTrialI18n:Object(y.i)(e,"feature_plans_page_trial_i18n")}})(Qs),Xs=new x.b("free_trial_banners"),Zs=(m.b.object.isRequired,m.b.object.isRequired,{countPref:"in_prod_trial_banner_cta_count",tsPref:"in_prod_trial_banner_cta_last_ts"}),$s=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onGo","onCloseIcon"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track("UPGRDEXP_FREE_TRIAL_IN_PROD",{contexts:{ui_context:{step:205,action:"impression"}}})}},{key:"onGo",value:function(){var e=this.props,t=e.clogger,n=e.team;t.track("UPGRDEXP_FREE_TRIAL_IN_PROD",{contexts:{ui_context:{step:205,action:"click",ui_element:"learn_more_btn"}}}),Object(te.O)(n,"trial")}},{key:"onCloseIcon",value:function(){this.props.clogger.track("UPGRDEXP_FREE_TRIAL_IN_PROD",{contexts:{ui_context:{step:205,action:"close",ui_element:"btn_close"}}})}},{key:"getContent",value:function(){return{headerText:Xs.t("Start your free trial of the Standard plan"),bodyText:Xs.t("With unlimited searchable messages, you\u2019ll never lose access to your conversations \u2014 or to things like project details, important docs, and key decisions made along the way.")}}},{key:"render",value:function(){var e=this.getContent();return Object(sa.a)(e)?null:h.a.createElement(ms,{headerText:e.headerText,bodyText:e.bodyText,showCancelButton:!1,showCloseIcon:!0,isLearnMoreButton:!0,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:Zs})}}]),t}(p.PureComponent);$s.displayName="InProdTrialMessagePaneBanner";var el=Object(_.b)(function(e){return{clogger:Object(ye.a)({state:e}),team:Object($.d)(e)}})($s),tl=new x.b("free_trial_banners"),nl=(m.b.string.isRequired,m.b.object.isRequired,m.b.object.isRequired,{countPref:"in_prod_trial_reminder_banner_cta_count",tsPref:"in_prod_trial_reminder_banner_cta_last_ts"}),al=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onGo","onCloseIcon"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track("UPGRDEXP_FREE_TRIAL_IN_PROD",{contexts:{ui_context:{step:207,action:"impression"}}})}},{key:"onGo",value:function(){var e=this.props,t=e.clogger,n=e.team;t.track("UPGRDEXP_FREE_TRIAL_IN_PROD",{contexts:{ui_context:{step:207,action:"click",ui_element:"learn_more_btn"}}}),Object(te.O)(n,"trial")}},{key:"onCloseIcon",value:function(){this.props.clogger.track("UPGRDEXP_FREE_TRIAL_IN_PROD",{contexts:{ui_context:{step:207,action:"close",ui_element:"btn_close"}}})}},{key:"getContent",value:function(){var e=this.props.expirationDate;return{headerText:tl.t("Your free trial offer is about to expire"),bodyText:tl.rt("You still have time to try out the <b>Standard plan</b>. Start your trial by <b>{expiration_date}</b> to explore features like unlimited searchable messages, guest accounts, screen sharing, and more \u2014 free for 30 days. ",{expiration_date:e})}}},{key:"render",value:function(){var e=this.getContent();return h.a.createElement(ms,{headerText:e.headerText,bodyText:e.bodyText,showCancelButton:!1,showCloseIcon:!0,isLearnMoreButton:!0,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:nl})}}]),t}(p.PureComponent);al.displayName="InProdTrialReminderBanner";var rl=Object(_.b)(function(e){return{clogger:Object(ye.a)({state:e}),team:Object($.d)(e)}})(al),il=new x.b("notification_banner"),ol={countPref:"approaching_file_limit_banner_cta_count",tsPref:"approaching_file_limit_banner_cta_last_ts"},sl=(m.b.object.isRequired,m.b.string.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.object.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onGo","onCloseIcon","onDeleteFilesLinkClicked"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track("UPGRDEXP_ENFORCE_FILE_LIMITS",{contexts:{ui_context:{step:200,action:"impression"}}})}},{key:"onGo",value:function(){var e=this.props.clogger;e.track("UPGRDEXP_ENFORCE_FILE_LIMITS",{contexts:{ui_context:{step:200,action:"click",ui_element:"pricing_button"}}}),e.track("GROWTH_PRICING",{contexts:{ui_context:{step:200,action:"click",ui_element:"pricing_button"}}}),this.props.showPricingPlans({pricingPlansPageUrl:"pricing?ui_element=11&ui_step=200",source:"approaching_file_limit_banner"})}},{key:"onCloseIcon",value:function(){this.props.clogger.track("UPGRDEXP_ENFORCE_FILE_LIMITS",{contexts:{ui_context:{step:200,action:"close",ui_element:"btn_close"}}})}},{key:"onDeleteFilesLinkClicked",value:function(){var e=this.props,t=e.userId,n=e.clogger;this.props.closeBanner({bannerPrefs:ol}),this.props.showFileList({user:t}),n.track("UPGRDEXP_ENFORCE_FILE_LIMITS",{contexts:{ui_context:{step:200,action:"click",ui_element:"file_storage_link"}}})}},{key:"getHeaderText",value:function(){var e=this.props.team;return il.rt("{name_of_workspace} is almost out of space",{name_of_workspace:e.name})}},{key:"getBodyText",value:function(){return il.rt('If your workspace goes over the free plan\u2019s <span class="bold">5 GB storage limit,</span> older files will no longer be viewable. To access all your files, you can upgrade to a paid plan.')}},{key:"render",value:function(){var e=il.t("See Plans");return h.a.createElement(ms,{headerText:this.getHeaderText(),bodyText:this.getBodyText(),goButtonText:e,showCancelButton:!1,showCloseIcon:!0,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:ol})}}]),t}(p.PureComponent));sl.displayName="ApproachingFileLimitBanner";var ll={closeBanner:is.a,showFileList:Ke.g,showPricingPlans:is.e},cl=Object(_.b)(function(e){return{team:Object($.d)(e),userId:Object(y.b)(e),clogger:Object(ye.a)({state:e})}},ll)(sl),ul=new x.b("client"),dl={countPref:"approaching_msg_limit_banner_cta_count",tsPref:"approaching_msg_limit_banner_cta_last_ts"},pl=(m.b.number.isRequired,m.b.object.isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onGo","onCloseBanner"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:63,action:"impression"}}})}},{key:"onGo",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:63,action:"click",ui_element:"pricing_button"}}}),this.props.showPricingPlans({pricingPlansPageUrl:"pricing?ui_element=11&ui_step=63",source:"approaching_msg_limit_banner"})}},{key:"onCloseBanner",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:63,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function(){return{headerText:ul.t("Unlock unlimited messages for your team"),bodyText:ul.t("Your workspace is getting close to the 10,000 message limit for free teams. On Slack\u2019s paid plans, you can see and search unlimited messages.")}}},{key:"render",value:function(){var e=this.getContent();return h.a.createElement(ms,{headerText:e.headerText,bodyText:e.bodyText,isLearnMoreButton:!0,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:dl})}}]),t}(p.PureComponent));pl.displayName="ApproachingMsgLimitBanner";var hl={showPricingPlans:is.e},ml=Object(_.b)(function(e){return{clogger:Object(ye.a)({state:e})}},hl)(pl),bl=new x.b("client"),fl={countPref:"just_reached_msg_limit_banner_cta_count",tsPref:"just_reached_msg_limit_banner_cta_last_ts"},_l=(m.b.number.isRequired,m.b.object.isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onGo","onCloseBanner"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:64,action:"impression"}}})}},{key:"onGo",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:64,action:"click",ui_element:"pricing_button"}}}),this.props.showPricingPlans({pricingPlansPageUrl:"pricing?ui_element=11&ui_step=64",source:"just_reached_msg_limit_banner"})}},{key:"onCloseBanner",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:64,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getCancelButtonText",value:function(){return bl.t("Not Now")}},{key:"getContent",value:function(){return{headerText:bl.t("You\u2019ve just reached the 10k message limit"),bodyText:bl.t("Your workspace has over 10,000 messages in it! That\u2019s a lot of conversation and history. Upgrade to a paid plan to make sure you can access all of it whenever you need it.")}}},{key:"render",value:function(){var e=this.getContent();return h.a.createElement(ms,{headerText:e.headerText,bodyText:e.bodyText,isLearnMoreButton:!0,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:fl,cancelButtonText:this.getCancelButtonText()})}}]),t}(p.PureComponent));_l.displayName="JustReachedMsgLimitBanner";var gl={showPricingPlans:is.e},vl=Object(_.b)(function(e){return{clogger:Object(ye.a)({state:e})}},gl)(_l),yl=new x.b("client"),kl={countPref:"thirty_days_after_msg_limit_banner_cta_count",tsPref:"thirty_days_after_msg_limit_banner_cta_last_ts"},Ol=(m.b.number.isRequired,m.b.object.isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onGo","onCloseBanner"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:65,action:"impression"}}})}},{key:"onGo",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:65,action:"click",ui_element:"pricing_button"}}}),this.props.showPricingPlans({pricingPlansPageUrl:"pricing?ui_element=11&ui_step=65",source:"thirty_days_after_msg_limit_banner"})}},{key:"onCloseBanner",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:65,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function(){var e=this.props.messagesCount-1e4,t=this.roundNumOfMsgsBeyondLimit(e);return!t||t<0?null:{headerText:yl.t("Your workspace has {num_msgs_beyond_limit} messages more than the 10k limit",{num_msgs_beyond_limit:t}),bodyText:yl.t("That\u2019s more than {num_msgs_beyond_limit} messages you can\u2019t see or search. Upgrade to a paid plan for access to your full history \u2014 plus features like guest accounts for contractors, group video calls, and unlimited apps.",{num_msgs_beyond_limit:t})}}},{key:"roundNumOfMsgsBeyondLimit",value:function(e){if(e>9&&e<100)return 10*Math.floor(e/10);if(e>=100&&e<=999999){var t=100*Math.floor(e/100);return Object(x.l)(t)}return e>999999?Object(xt.a)(e):e}},{key:"render",value:function(){var e=this.getContent();return e?h.a.createElement(ms,{headerText:e.headerText,bodyText:e.bodyText,isLearnMoreButton:!0,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:kl}):null}}]),t}(p.PureComponent));Ol.displayName="ThirtyDaysAfterMsgLimitBanner";var jl={showPricingPlans:is.e},Cl=Object(_.b)(function(e){return{clogger:Object(ye.a)({state:e})}},jl)(Ol),El=n("Z0Cl"),wl=n("Fsnq"),Sl=n("oZiQ"),Il=n("syB0"),Tl=n("Qaea"),Nl=n.n(Tl),Rl=n("wvq5"),Al=(m.b.string,m.b.node.isRequired,m.b.number.isRequired,m.b.number.isRequired,m.b.func.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentWillReceiveProps",value:function(){var e=this.props,t=e.title;e.currentStep===e.step&&this.props.setModalTitle(t)}},{key:"render",value:function(){var e=this.props,t=e.currentStep===e.step,n=f()({"p-onboarding__step":!0,"p-onboarding__step--active":t,"p-onboarding__step--inactive":!t}),a=h.a.createElement("div",{className:n},t&&this.props.children);return t?a:null}}]),t}(p.Component));Al.displayName="Step",Al.defaultProps={title:""};var Pl={setModalTitle:Sl.B},Ml=Object(_.b)(null,Pl)(Al),Dl=n("YEIV"),xl=n.n(Dl),Ll=n("hbEN"),Fl=n("F7O2"),Bl=new x.b("password"),ql=function(e){return{no_values:Bl.t("Please enter a password!"),matches_username:Bl.t("That password is too similar to your username. Try something different?"),matches_email:Bl.t("That password is too similar to your email address. Try something different?"),too_short:Bl.t("Your password must be at least 6 characters long."),too_long:Bl.t("Your password can be at most 500 characters long."),numeric_sequence:Bl.t("Your password cannot solely contain sequences of letters or numbers."),alpha_sequence:Bl.t("Your password cannot solely contain sequences of letters or numbers."),adjacent:Bl.t("Your password cannot solely contain adjacent keys on a keyboard."),repeated:Bl.t("Your password cannot solely contain a repeated character."),common:Bl.t("That password is pretty common. Try something different?")}[e]||""},Ul={profile:cdn_url+"/aba96/img/tractor/steps/step_01.png",workspace:cdn_url+"/aba96/img/tractor/steps/step_02.png",invites:cdn_url+"/aba96/img/tractor/steps/step_03.png",completion:cdn_url+"/aba96/img/tractor/steps/step_04.png"},Hl=0,Gl=1,Wl=2,Kl=3,Vl={0:"TRACTOR_DIALOG_PROFILE_STEP",1:"TRACTOR_DIALOG_WORKSPACE_STEP",2:"TRACTOR_DIALOG_INVITE_STEP",3:"TRACTOR_DIALOG_COMPLETED_STEP"},zl={start_team_creator_account_setup:"BANNER_TRACTOR_WELCOME",complete_team_creator_account_setup:"BANNER_TRACTOR_REMINDER",invite_team_creator_account_setup:"BANNER_TRACTOR_INVITES"},Yl=n("plEq"),Ql=n("nWao"),Jl=n("KEK+"),Xl=n("Rszm"),Zl=n("t4nz"),$l=n("O0RF"),ec=(m.b.string.isRequired,function(e){var t=e.src;return h.a.createElement(p.Fragment,null,h.a.createElement("div",{className:"p-onboarding__step__header"},h.a.createElement("img",{src:t,srcSet:t+" 1x, "+t.replace(".png","@2x.png")+" 2x",alt:""})))});ec.displayName="StepHeader";var tc=ec,nc=(m.b.string.isRequired,m.b.string,m.b.bool,m.b.func,m.b.bool.isRequired,m.b.bool.isRequired,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,{realName:"",gdprPref:!1,onPasswordSet:d.a,needsPasswordSet:!0,updateRealName:d.a,updateGdprPref:d.a,updateStep:d.a,setStepCallback:d.a,submitCheckPasswordComplexity:d.a}),ac=new x.b("team_creation"),rc=Object(ut.b)(),ic=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=n.props.realName;return Object(T.a)(n,["onRealNameChange","onPasswordChange","onGdprPrefChange","onGo","setRealNameInputRef","updateRealName","validateAndSaveStep"]),n.nameInput=null,n.updateRealNameDebounced=Object(Ll.a)(n.updateRealNameApi,500),n.checkPasswordComplexityDebounced=Object(Ll.a)(n.checkPasswordComplexityApi,500),n.state={realName:a,realNameError:null,password:"",passwordError:null,gdpr:null},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.nameInput.focus(),this.props.setStepCallback(this.onGo),this.validateAndSaveStep()}},{key:"onRealNameChange",value:function(){this.updateRealNameDebounced(this.state.realName)}},{key:"onPasswordChange",value:function(e){var t=this;this.setState(function(){return{password:e}},function(){t.checkPasswordComplexityDebounced(e)})}},{key:"onGdprPrefChange",value:function(e){var t=this,n=!!e.target.classList.contains("gdpr_pref_radio")||e.target.checked,a=e.target.value;this.setState(function(){return{gdpr:n,gdprRadioValue:a}},function(){t.props.updateGdprPref({gdprPref:n})})}},{key:"onGo",value:function(){var e=this,t=this.props.needsPasswordSet;this.validateAndSaveStep().then(function(n){n.isValid&&(t&&e.props.onPasswordSet(e.state.password),e.props.updateStep({number:Gl}))}).catch(function(e){rc.info("TEAM_CREATOR_ONBOARDING",e)})}},{key:"setRealNameInputRef",value:function(e){this.nameInput=e}},{key:"updateRealName",value:function(e){this.setState(function(){return{realName:e}})}},{key:"updateRealNameApi",value:function(e){var t=this;this.props.updateRealName({realName:e}).then(function(){t.setState(function(){return{realNameError:null}})}).catch(function(e){t.setState(function(){return{realNameError:e}})}).finally(function(){t.validateAndSaveStep()})}},{key:"checkPasswordComplexityApi",value:function(e){var t=this;this.props.submitCheckPasswordComplexity({password:e}).then(function(){t.setState(function(){return{passwordError:null}})}).catch(function(e){var n=e.data;t.setState(function(){return{passwordError:n.error}})}).finally(function(){t.validateAndSaveStep()})}},{key:"validateAndSaveStep",value:function(){var e=this.state,t=e.realName,n=e.realNameError,a=e.password,r=e.passwordError,i=!this.props.needsPasswordSet||a;return this.props.updateStep({validated:!(!t||!i||n||r),forceValidation:!0})}},{key:"renderRealNameField",value:function(){var e=this.state,t=e.realName,n=e.realNameError,a=n?n.message:null,r=n?n.name:null,i=f()("realName_input",xl()({"c-input_text--with_error":a,"p-onboarding__step__real_name_input--success":!a},r,a)),o=a?{errorText:a,errorLevel:"error",errorType:"nested_box"}:null,s={name:"real_name",hintText:ac.t("Your name will be displayed with messages you send."),id:"real_name",className:i,"data-qa":"tractor-real-name-input",value:t,onChange:this.updateRealName,onBlur:this.onRealNameChange,ref:this.setRealNameInputRef},l={text:ac.t("Your full name"),className:"margin_bottom_150",htmlFor:"real_name",id:"real_name_label"};return h.a.createElement($l.a,l,h.a.createElement(Yl.a,Z()({},s,o)))}},{key:"renderPasswordField",value:function(){var e=this.state,t=e.password,n=e.passwordError,a=f()("password_input",xl()({"c-input_text--with_error":!!n,"p-onboarding__step__password_input--success":!n},n,!!n)),r={text:ac.t("Your password"),className:"margin_bottom_150",htmlFor:"password_field",id:"passwordLabel"},i={name:"password_field",hintText:ac.t("Passwords must be at least 6 characters long, and can\u2019t be things like password, 123456, or abcdef."),id:"password_field","data-qa":"tractor-password-input",className:a,onChange:this.onPasswordChange,value:t,type:"password"},o="";n&&(o=ql(n));var s=n?{errorText:o,errorLevel:"error",errorType:"nested_box"}:null;return h.a.createElement($l.a,r,h.a.createElement(Yl.a,Z()({},i,s)))}},{key:"renderGdprPref",value:function(){var e=this.props.inEU,t=this.props.gdpr,n=this.state.gdpr,a=h.a.createElement($l.a,{type:"inline",cursor:"pointer",htmlFor:"gdpr_field",text:ac.t("It\u2019s okay to send me email with Slack tips, news, and offers."),className:"margin_bottom_150 normal tractor_checkbox_label",id:"gdpr_checkbox_label"},h.a.createElement(Xl.a,{id:"gdpr_field",checked:null===n?t:n,"data-qa":"tractor-gdpr-checkbox",onChange:this.onGdprPrefChange})),r=h.a.createElement(Ql.a,{className:"margin_bottom_150 normal tractor_checkbox_label","data-qa":"tractor-gdpr-radiogroup"},h.a.createElement(Zl.a,null,ac.rt("<strong>Can we send you email with Slack tips, news, and offers?</strong>")),h.a.createElement($l.a,{htmlFor:"gdpr_field_yes",text:ac.t("Sure!"),cursor:"pointer",type:"inline"},h.a.createElement(Jl.a,{id:"gdpr_field_yes",className:"gdpr_pref_radio",value:"opt_in","data-qa":"tractor-gdpr-radio-yes",checked:"opt_in"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})),h.a.createElement($l.a,{htmlFor:"gdpr_field_no",text:ac.t("No thanks"),cursor:"pointer",type:"inline"},h.a.createElement(Jl.a,{id:"gdpr_field_no",className:"gdpr_pref_radio",value:"opt_out","data-qa":"tractor-gdpr-radio-no",checked:"opt_out"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})));return e?r:a}},{key:"render",value:function(){return h.a.createElement(p.Fragment,null,h.a.createElement(tc,{src:this.props.imgUrl}),h.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-profile-step"},this.renderRealNameField(),this.props.needsPasswordSet&&this.renderPasswordField(),this.renderGdprPref()))}}]),t}(p.Component);ic.displayName="ProfileStep",ic.defaultProps=nc;var oc={updateRealName:Sl.J,updateGdprPref:Sl.H,updateStep:Sl.K,setStepCallback:Sl.C,submitCheckPasswordComplexity:Fl.d},sc=Object(_.b)(function(e){return{realName:Object(Sl.q)(e),gdpr:Object(Sl.l)(e),inEU:Object(Sl.m)(e),needsPasswordSet:Object(ue.h)(e,"needs_initial_password_set")}},oc)(ic),lc=n("P3Po"),cc=(m.b.string.isRequired,m.b.array,m.b.bool,m.b.string,m.b.string.isRequired,m.b.string,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.bool,m.b.bool,m.b.string,m.b.func,{invites:[],workspaceName:"",domainWhitelistingPref:!1,signupDomain:"",onDialogFinish:d.a,validateInvites:d.a,sendInvites:d.a,setDomainWhitelistingPref:d.a,updateStep:d.a,setStepCallback:d.a,canWhitelistDomain:!1,featureTractorSharedInviteLink:!0,featureTractorBackupChannelnameCopy:!1,sharedInviteLink:"",fetchAndSetSharedInviteLink:d.a}),uc=new x.b("team_creation"),dc=Object(ut.b)(),pc=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=n.props.invites,i=a instanceof Array?a.join(", "):a;return Object(T.a)(n,["onInvitesChange","onDomainWhitelistingCheckboxChange","onGo","setInvitesInputRef","renderSharedInviteLink","toggleSharedInviteLinkView"]),n.invitesInput=null,n.validateInvitesDebounced=Object(Ll.a)(n.validateInvites,250),n.state={invites:i,invitesError:null,domainWhitelistingPref:!1,toggleSharedInviteLink:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.invitesInput.focus();var e=this.props,t=e.sharedInviteLink,n=e.featureTractorSharedInviteLink;this.props.setStepCallback(this.onGo),n&&!t&&this.props.fetchAndSetSharedInviteLink(),this.props.updateStep({validated:!0})}},{key:"onInvitesChange",value:function(e){var t=this;this.setState(function(){return{invites:e}},function(){t.validateInvitesDebounced(e)})}},{key:"onDomainWhitelistingCheckboxChange",value:function(e){var t=this,n=e.target.checked;this.setState(function(){return{domainWhitelistingPref:n}},function(){t.props.setDomainWhitelistingPref(n)})}},{key:"onGo",value:function(){var e=this;this.props.sendInvites().then(function(){e.props.onDialogFinish().then(function(){e.props.updateStep({number:Kl})})}).catch(function(t){dc.info("TEAM_CREATOR_ONBOARDING",t),e.setState(function(){return{invitesError:t}})})}},{key:"setInvitesInputRef",value:function(e){this.invitesInput=e}},{key:"validateInvites",value:function(e){var t=this;this.props.validateInvites({invites:e}).then(function(){t.setState(function(){return{invitesError:null}})}).catch(function(e){t.setState(function(){return{invitesError:e}})})}},{key:"toggleSharedInviteLinkView",value:function(){var e=this.state.toggleSharedInviteLink;this.setState(function(){return{toggleSharedInviteLink:!e}})}},{key:"renderInvitesInput",value:function(){var e=this.state,t=e.invites,n=e.invitesError,a=this.props,r=a.workspaceName,i=a.channelName,o=a.featureTractorBackupChannelnameCopy,s=n?n.message:null,l=n?n.name:null,c=f()("invites_input",xl()({"c-input_textarea--with_error":s,"p-onboarding__step__invites_input--success":!s},l,s)),u=void 0;u=o?i&&void 0!==i&&""!==i?uc.rt("We\u2019ll send invitations to join <strong>{workspaceName}</strong> on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:i,workspaceName:r}):uc.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{workspaceName:r}):uc.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:i,workspaceName:r});var d={name:"invites_field",id:"invites_field",className:c,onChange:this.onInvitesChange,value:t,"data-qa":"tractor-invites-input",hintText:n?null:u,ref:this.setInvitesInputRef},p={className:"margin_bottom_150",text:uc.t("Email addresses"),htmlFor:"invites_field",id:"invites_label"},m=s?{errorText:s,errorLevel:"error",errorType:"nested_box"}:null;return h.a.createElement($l.a,p,h.a.createElement(lc.a,Z()({},d,m)))}},{key:"renderDomainWhitelistingCheckbox",value:function(){var e=this.props.signupDomain,t=this.state.domainWhitelistingPref,n=this.props.domainWhitelistingPref;return h.a.createElement($l.a,{className:"margin_bottom_150 normal tractor_checkbox_label",text:uc.rt("Let other people sign up with their verified <strong>@{signupDomain}</strong> email address.",{signupDomain:e}),id:"domain_whitelisting_checkbox_label",htmlFor:"domain_whitelisting_field",type:"inline",cursor:"pointer"},h.a.createElement(Xl.a,{id:"domain_whitelisting_field","data-qa":"tractor-domain-whitelisting-checkbox",checked:null===t?n:t,onChange:this.onDomainWhitelistingCheckboxChange}))}},{key:"renderSharedInviteLink",value:function(){if(!this.props.featureTractorSharedInviteLink)return null;var e=this.props.sharedInviteLink,t=this.state.toggleSharedInviteLink,n=uc.t("invite link"),a=uc.rt("<b>Or, you could get an <u>{link}</u> to share with other people.</b>",{link:h.a.createElement(M.a,{"data-qa":"tractor_shared_invite_link_toggle",onClick:this.toggleSharedInviteLinkView},n)}),r={text:a,htmlFor:"shared_invite_link",id:"shared_invite_link_label","data-qa":"tractor_shared_invite_link_label"},i={name:"shared_invite_link",id:"shared_invite_link","data-qa":"tractor-invites-shared-invite-input",hintText:uc.t("Anyone can use this link to join your workspace. It will expire in 4 weeks and can be used for up to 2000 members."),value:e,onFocus:this.select};return h.a.createElement("div",{className:"margin_bottom_100"},!t&&h.a.createElement("span",null,a),t&&h.a.createElement($l.a,r,h.a.createElement(Yl.a,i)))}},{key:"render",value:function(){return h.a.createElement(p.Fragment,null,h.a.createElement(tc,{src:this.props.imgUrl}),h.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-invites-step"},this.renderInvitesInput(),this.renderSharedInviteLink(),this.props.canWhitelistDomain&&this.renderDomainWhitelistingCheckbox()))}}]),t}(p.Component);pc.displayName="InvitesStep",pc.defaultProps=cc;var hc={validateInvites:Sl.N,sendInvites:Sl.y,setDomainWhitelistingPref:Sl.z,fetchAndSetSharedInviteLink:Sl.d,updateStep:Sl.K,setStepCallback:Sl.C},mc=Object(_.b)(function(e){return{invites:Object(Sl.n)(e),workspaceName:Object(Sl.x)(e),domainWhitelistingPref:Object(Sl.k)(e),channelName:Object(Sl.i)(e),signupDomain:Object(Sl.s)(e),canWhitelistDomain:Object(Sl.h)(e),featureTractorSharedInviteLink:Object(y.i)(e,"feature_tractor_shared_invite_link"),featureTractorBackupChannelnameCopy:Object(y.i)(e,"feature_tractor_backup_channelname_copy"),sharedInviteLink:Object(Sl.r)(e)}},hc)(pc),bc=(m.b.string.isRequired,m.b.string,m.b.string,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.bool,{workspaceName:"",workspaceDomain:"",hasInvited:!1,onDialogFinish:d.a,updateWorkspaceName:d.a,updateWorkspaceDomain:d.a,updateStep:d.a,setStepCallback:d.a,fetchAndSetSharedInviteLink:d.a,featureTractorSharedInviteLink:!1}),fc=new x.b("team_creation"),_c=Object(ut.b)(),gc=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=n.props,i=a.workspaceName,o=a.workspaceDomain;return Object(T.a)(n,["onWorkspaceNameChange","onWorkspaceNameBlur","onWorkspaceDomainChange","onGo","setWorkspaceNameInputRef","validateAndSaveStep"]),n.nameInput=null,n.updateWorkspaceNameDebounced=Object(Ll.a)(n.updateWorkspaceNameApi,500),n.updateWorkspaceDomainDebounced=Object(Ll.a)(n.updateWorkspaceDomainApi,500),n.state={workspaceName:i,workspaceNameError:null,workspaceDomain:o,workspaceDomainError:null},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.nameInput.focus(),this.props.setStepCallback(this.onGo),this.props.updateStep({validated:!0})}},{key:"onWorkspaceNameChange",value:function(e){var t=this;this.setState(function(){return{workspaceName:e}},function(){t.updateWorkspaceNameDebounced(e)})}},{key:"onWorkspaceNameBlur",value:function(){var e=this.props.workspaceName;this.state.workspaceName||this.onWorkspaceNameChange(e)}},{key:"onWorkspaceDomainChange",value:function(e){var t=this;this.setState(function(){return{workspaceDomain:e}},function(){t.updateWorkspaceDomainDebounced(e)})}},{key:"onGo",value:function(){var e=this;this.validateAndSaveStep().then(function(t){t.isValid&&(e.props.hasInvited?e.props.onDialogFinish().then(function(){e.props.updateStep({number:Kl})}):e.props.updateStep({number:Wl}))}).catch(function(e){_c.info("TEAM_CREATOR_ONBOARDING",e)})}},{key:"setWorkspaceNameInputRef",value:function(e){this.nameInput=e}},{key:"updateWorkspaceNameApi",value:function(e){var t=this;this.props.updateWorkspaceName({workspaceName:e}).then(function(){t.setState(function(){return{workspaceNameError:null}})}).catch(function(e){t.setState(function(){return{workspaceNameError:e}})}).finally(function(){t.validateAndSaveStep()})}},{key:"updateWorkspaceDomainApi",value:function(e){var t=this,n=this.props.featureTractorSharedInviteLink;this.props.updateWorkspaceDomain({workspaceDomain:e}).then(function(){t.setState(function(){return{workspaceDomainError:null}}),n&&t.props.fetchAndSetSharedInviteLink()}).catch(function(e){t.setState(function(){return{workspaceDomainError:e}})}).finally(function(){t.validateAndSaveStep()})}},{key:"validateAndSaveStep",value:function(){var e=this.state,t=e.workspaceDomain,n=e.workspaceNameError,a=e.workspaceDomainError;return this.props.updateStep({validated:!(!t||n||a),forceValidation:!0})}},{key:"renderWorkspaceName",value:function(){var e=this.state,t=e.workspaceName,n=e.workspaceNameError,a=n?n.message:null,r=n?n.name:null,i=f()("workspaceName_input",xl()({"c-input_text--with_error":a,"p-onboarding__step__workspace_name_input--success":!a},r,a)),o={className:"margin_bottom_150",text:fc.t("Slack workspace name"),htmlFor:"workspace_name_field",id:"workspace_name_label"},s={name:"workspace_name_field",id:"workspace_name_field",className:i,onChange:this.onWorkspaceNameChange,onBlur:this.onWorkspaceNameBlur,value:t,"data-qa":"tractor-workspace-name-input",hintText:fc.t("Most teams use the name of their company or organization."),ref:this.setWorkspaceNameInputRef},l=a?{errorText:a,errorLevel:"error",errorType:"nested_box"}:null;return h.a.createElement($l.a,o,h.a.createElement(Yl.a,Z()({},s,l)))}},{key:"renderWorkspaceDomain",value:function(){var e=this.state,t=e.workspaceDomain,n=e.workspaceDomainError,a=n?n.message:null,r=n?n.name:null,i=f()("workspaceDomain_input",xl()({"c-input_text--with_error":a,"p-onboarding__step__workspace_domain_input--success":!a},r,a)),o={text:fc.t("Slack URL"),className:"margin_bottom_150",htmlFor:"workspace_domain_field",id:"workspace_domain_label"},s={name:"workspace_domain_field",id:"workspace_domain_field",className:i,hintText:fc.t("You\u2019ll use this URL to sign in to Slack. Letters, numbers, and hyphens only."),"data-qa":"tractor-workspace-domain-input",onChange:this.onWorkspaceDomainChange,value:t,suffix:".slack.com"},l=a?{errorText:a,errorLevel:"error",errorType:"nested_box"}:null;return h.a.createElement($l.a,o,h.a.createElement(Yl.a,Z()({},s,l)))}},{key:"render",value:function(){return h.a.createElement(p.Fragment,null,h.a.createElement(tc,{src:this.props.imgUrl}),h.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-workspace-step"},this.renderWorkspaceName(),this.renderWorkspaceDomain()))}}]),t}(p.Component);gc.displayName="WorkspaceStep",gc.defaultProps=bc;var vc={updateWorkspaceName:Sl.M,updateWorkspaceDomain:Sl.L,fetchAndSetSharedInviteLink:Sl.d,updateStep:Sl.K,setStepCallback:Sl.C},yc=Object(_.b)(function(e){return{workspaceName:Object(Sl.x)(e),workspaceDomain:Object(Sl.w)(e),hasInvited:Object(ue.h)(e,"has_invited"),featureTractorSharedInviteLink:Object(y.i)(e,"feature_tractor_shared_invite_link")}},vc)(gc),kc=(m.b.string.isRequired,m.b.array,m.b.string.isRequired,m.b.func,{invites:[],updateStep:d.a}),Oc=new x.b("team_creation"),jc=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.updateStep({validated:!0})}},{key:"render",value:function(){var e=this.props,t=e.imgUrl,n=e.invites,a=e.channelName,r=a&&void 0!==a&&""!==a?n.length:0,i=void 0,o=void 0;switch(r){case 0:i=Oc.t("Your Slack workspace is all set"),o=Oc.rt("We\u2019ve added a few basic channels for your team \u2014 go ahead and poke around! Or <strong>try sending yourself a direct message</strong> to test things out.");break;case 1:i=Oc.t("Your invitation has been sent!"),o=Oc.rt("Your teammate will be here as soon as they accept the invitation. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:a});break;default:i=Oc.t("Your {numInvites} invitations have been sent!",{numInvites:r}),o=Oc.rt("Your teammates will be here as soon as they accept their invitations. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:a})}return h.a.createElement(p.Fragment,null,h.a.createElement(tc,{src:t}),h.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-completion-step"},h.a.createElement("h2",null,i),o))}}]),t}(p.Component);jc.displayName="CompletionStep",jc.defaultProps=kc;var Cc={updateStep:Sl.K},Ec=Object(_.b)(function(e){return{invites:Object(Sl.n)(e),channelName:Object(Sl.i)(e)}},Cc)(jc),wc=(n("Drpm"),m.b.array,m.b.string,m.b.func,m.b.func,m.b.number,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.object.isRequired,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,{invites:[],modalTitle:"",onClose:d.a,stepCallback:d.a,stepNumber:0,isCurrentStepValid:!1,isPromiseRunning:!1,hasInvited:!1,needsPasswordSet:!0,fetchAndSetChannelInfo:d.a,fetchAndSetWorkspace:d.a,fetchAndSetSignupDetails:d.a,setInitialMarketingPref:d.a,setStepNumber:d.a,updatePassword:d.a,submitDomainWhitelistingPref:d.a,completeWorkflowTask:d.a,closeModal:d.a}),Sc=new x.b("team_creation"),Ic=Object(ut.b)(),Tc=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["getGoButtonText","getFooterText","onBack","onGo","onPasswordSet","onDialogFinish","onClose"]),n.state={password:null},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.fetchAndSetChannelInfo(),this.props.fetchAndSetWorkspace(),this.props.fetchAndSetSignupDetails(),this.props.setInitialMarketingPref(),this.preloadRemainingImages(),Ic.info("TEAM_CREATOR_ONBOARDING","Onboarding dialog mounted."),this.props.needsPasswordSet&&this.props.setStepNumber(0)}},{key:"onBack",value:function(){var e=this.props,t=e.stepNumber,n=void 0;n=t>0?t-1:2,e.clogger.track(ve.k.GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:Vl[t],action:"BACK"}}}),this.props.setStepNumber(n)}},{key:"onGo",value:function(){var e=this.props,t=e.stepCallback,n=e.isCurrentStepValid,a=e.clogger,r=e.stepNumber;n&&t(),a.track(ve.k.GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:Vl[r],action:"CLICK"}}})}},{key:"onClose",value:function(){var e=this.props,t=e.clogger,n=e.stepNumber;t.track(ve.k.GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:Vl[n],action:"CLOSE"}}}),Object(Me.a)()?this.props.closeModal():this.props.onClose()}},{key:"onPasswordSet",value:function(e){this.setState(function(){return{password:e}})}},{key:"onDialogFinish",value:function(){var e=this,t=this.state.password,n=void 0;n=this.props.needsPasswordSet?this.props.updatePassword({password:t}):Promise.resolve();var a=this.props.submitDomainWhitelistingPref();return Promise.all([n,a]).then(function(){return e.props.completeWorkflowTask({taskSubtype:"complete_team_creator_account_setup"})}).catch(function(e){Ic.info("TEAM_CREATOR_ONBOARDING",e)})}},{key:"getGoButtonText",value:function(){var e=this.props,t=e.stepNumber,n=e.invites,a=e.hasInvited,r=n?n.length:0;switch(t){case 1:return a?Sc.t("Finish"):Sc.t("Next");case 2:return r>=1?Sc.t("Add {numEmails, plural, =1 {# Person} other {# People}}",{numEmails:r,fallbackHash:"afa51f5e80065586875a7cd693abcad1a66bdb3b"}):Sc.t("Finish");case 3:return 0===r?Sc.t("Explore Slack"):Sc.t("Start the Conversation");default:return Sc.t("Next")}}},{key:"getFooterText",value:function(){var e=this.props,t=e.stepNumber,n=e.hasInvited;if(t>=3)return null;var a=t+1,r=n?2:3;return Sc.t("Step {stepNumber} of {totalSteps}",{stepNumber:a,totalSteps:r})}},{key:"preloadRemainingImages",value:function(){Object(bo.a)(Ul,function(e,t){if("profile"===t)return null;var n=new Image,a=new Image;return n.src=e,a.src=e.replace(".png","@2x.png"),null})}},{key:"shouldShowBackButton",value:function(e){return e!==Hl&&e!==Kl}},{key:"render",value:function(){var e=this.props,t=e.modalTitle,n=e.stepNumber,a=e.isCurrentStepValid,r=e.isPromiseRunning,i=f()("p-team_creator_onboarding_dialog",{"p-team_creator_onboarding_dialog--complete":3===n});return h.a.createElement(p.Fragment,null,h.a.createElement(lr.a,{showGoButton:!0,showCloseButton:!0,showHeader:!0,shouldCloseOnCancel:!1,shouldCloseOnGo:n===Kl,truncateTitle:!1,onClose:this.onClose,showCancelButton:this.shouldShowBackButton(n),goButtonIsDisabled:!a,goButtonIsPending:r,goButtonText:this.getGoButtonText(),title:t,footerText:this.getFooterText(),onGo:this.onGo,onCancel:this.onBack,cancelText:Sc.t("Back"),id:"team-creator-onboarding-dialog","data-qa":"team-creator-onboarding-dialog",className:i,bodyClassName:"p-team_creator_onboarding_dialog__body"},h.a.createElement(Ml,{step:0,currentStep:n,title:Sc.t("Set your name and password")},h.a.createElement(sc,{imgUrl:Ul.profile,onPasswordSet:this.onPasswordSet})),h.a.createElement(Ml,{step:1,currentStep:n,title:Sc.t("Review your team\u2019s details")},h.a.createElement(yc,{imgUrl:Ul.workspace,onDialogFinish:this.onDialogFinish})),h.a.createElement(Ml,{step:2,currentStep:n,title:Sc.t("Add people to your Slack workspace")},h.a.createElement("div",null),h.a.createElement(mc,{imgUrl:Ul.invites,onDialogFinish:this.onDialogFinish})),h.a.createElement(Ml,{step:3,currentStep:n},h.a.createElement("div",null),h.a.createElement(Ec,{imgUrl:Ul.completion}))))}}]),t}(h.a.Component);Tc.displayName="TeamCreatorOnboardingDialog",Tc.defaultProps=wc;var Nc={fetchAndSetChannelInfo:Sl.c,fetchAndSetWorkspace:Sl.f,fetchAndSetSignupDetails:Sl.e,setInitialMarketingPref:Sl.A,setStepNumber:Sl.D,updatePassword:Sl.I,submitDomainWhitelistingPref:Sl.G,completeWorkflowTask:Sl.a,closeModal:st.a},Rc=Object(_.b)(function(e){return{hasInvited:Object(ue.h)(e,"has_invited"),needsPasswordSet:Object(ue.h)(e,"needs_initial_password_set"),stepNumber:Object(Sl.u)(e),modalTitle:Object(Sl.p)(e),stepCallback:Object(Sl.t)(e),isCurrentStepValid:Object(Sl.j)(e),isPromiseRunning:Object(Sl.o)(e),invites:Object(Sl.n)(e),clogger:Object(ye.a)({state:e})}},Nc)(Tc),Ac=n("yg0S"),Pc=n("35v0"),Mc=new x.b("team_creation"),Dc={countPref:"team_creation_account_setup_banner_cta_count",tsPref:"team_creation_account_setup_banner_cta_last_ts"},xc=(m.b.object.isRequired,m.b.object.isRequired,m.b.string.isRequired,m.b.bool,m.b.object,m.b.string,m.b.func,m.b.number.isRequired,m.b.func,m.b.string,m.b.func,m.b.func,{hasInvited:!1,workflow:null,activeWorkflowTask:"",completeWorkflowTask:d.a,openTeamCreatorOnboardingDialog:d.a,currentChannelId:"",showSecondBanner:d.a,openInviteDialog:d.a}),Lc=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["openInviteDialog","openTeamCreatorDialog"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props.activeWorkflowTask;this.loadFirstImageForDialog(),"start_team_creator_account_setup"===e&&this.props.completeWorkflowTask({taskSubtype:"start_team_creator_account_setup"}),this.clogBannerChanges({action:"impression"})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.activeWorkflowTask,a=t.currentChannelId,r=t.showSecondBanner;n!==e.activeWorkflowTask&&this.clogBannerChanges({action:"impression"}),a!==e.currentChannelId&&r()}},{key:"openInviteDialog",value:function(){var e=this.props.openInviteDialog;return this.clogBannerChanges({action:"click",ui_element:ve.y.BANNER_TRACTOR_PRIMARY_CTA}),Object(Me.a)()?e():Object(Pc.a)({source:"team_creation_account_setup_banner"})}},{key:"openTeamCreatorDialog",value:function(){var e=this.props,t=e.teamId,n=e.openTeamCreatorOnboardingDialog;return this.clogBannerChanges({action:"click",ui_element:ve.y.BANNER_TRACTOR_PRIMARY_CTA}),Object(Me.a)()?n():function(e,t,n){var a=Object(g.getStoreInstanceByTeamId)(e);Object(Rl.a)(h.a.createElement(_.a,{store:a},h.a.createElement(Ac.a,null,h.a.createElement(Rc,Z()({onClose:function(){Object(Il.a)(function(){Nl.a.unmountComponentAtNode(t)})}},n)))),t)}(t,document.getElementById("team_creation_dialog_mount_point"))}},{key:"clogBannerChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=t.activeWorkflowTask,a=n;"start_team_creator_account_setup"!==n&&"complete_team_creator_account_setup"!==n&&(a="invite_team_creator_account_setup"),t.clogger.track(ve.k.GROWTH_BANNER_TRACTOR,{contexts:{ui_context:Z()({},e,{step:zl[a]})}})}},{key:"loadFirstImageForDialog",value:function(){var e=new Image,t=new Image;e.src=Ul.profile,t.src=Ul.profile.replace(".png","@2x.png")}},{key:"render",value:function(){var e=this.props,t=e.hasInvited,n=e.workflow,a=e.activeWorkflowTask;if(null===n||"completed"===n.state&&(t||this.props.nonBotMembersCount>1))return null;var r={bodyClass:"p-message_pane_banner__body--wider-text",showCancelButton:!1,bannerPrefs:Dc,shouldCloseOnGo:!1};if("start_team_creator_account_setup"===a){var i=t?Mc.t("You can send messages here right away \u2014 but to get the most out of Slack, the next steps are to save your account and then get the conversation started."):Mc.t("You can send messages here right away \u2013 but to get the most out of Slack, the next step is to save your account and invite a few people to join the conversation.");return h.a.createElement(ms,Z()({},r,{headerText:Mc.t("Here it is! The first channel in your team\u2019s Slack workspace"),bodyText:i,onGo:this.openTeamCreatorDialog,imgSrc:cdn_url+"/08b1d/img/tractor/banners/first_setup@2x.png",goButtonText:Mc.t("Finish Signing Up")}))}if("complete_team_creator_account_setup"===a){var o=t?Mc.t("To see what teamwork is like in Slack, take a moment to save your account."):Mc.t("To see what teamwork is like in Slack, take a moment to save your account and invite some teammates to join your workspace.");return h.a.createElement(ms,Z()({},r,{headerText:Mc.t("Save your account and start collaborating"),bodyText:o,onGo:this.openTeamCreatorDialog,imgSrc:cdn_url+"/08b1d/img/tractor/banners/second_setup@2x.png",goButtonText:Mc.t("Finish Signing Up")}))}return t?null:h.a.createElement(ms,Z()({},r,{headerText:Mc.t("Bring your team into Slack"),bodyText:Mc.t("Slack is better with teammates \u2013 invite them to start collaborating."),onGo:this.openInviteDialog,imgSrc:cdn_url+"/08b1d/img/tractor/banners/invite_others@2x.png",goButtonText:Mc.t("Add People")}))}}]),t}(p.PureComponent);Lc.displayName="TeamCreationAccountSetupBanner",Lc.defaultProps=xc;var Fc=Object(_.b)(function(e){var t=Object(k.a)(e),n=t&&Object(re.d)(e,t,!1),a=Object(he.W)(n)?t:"";return{clogger:Object(ye.a)({state:e}),logger:Object(ut.a)({state:e}),teamId:Object(v.b)(e),hasInvited:Object(ue.h)(e,"has_invited"),workflow:Object(Sl.v)(e),activeWorkflowTask:Object(Sl.g)(e),nonBotMembersCount:Object(wl.a)(Object(El.a)(Object(Ue.a)(e),function(e){return!e.is_bot&&!e.is_slackbot})),currentChannelId:a}},function(e){return{completeWorkflowTask:function(){return e(Sl.a.apply(void 0,arguments))},showSecondBanner:function(){return e(Sl.F.apply(void 0,arguments))},openTeamCreatorOnboardingDialog:function(){e(Object(st.e)({element:h.a.createElement(Rc),name:"team-creator-onboarding-dialog"}))},openInviteDialog:function(){return e(E.a.apply(void 0,arguments))}}})(Lc),Bc=new x.b("paid_benefits_banners"),qc=(m.b.object.isRequired,m.b.object.isRequired,{countPref:"paid_benefits_banner_cta_count",tsPref:"paid_benefits_banner_cta_last_ts"}),Uc=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onGo","onCancel","onCloseIcon"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track(ve.k.GROWTH_PRICING,{contexts:{ui_context:{step:ve.z.BANNER_PAID_BENEFITS_AWARENESS,action:ve.v.IMPRESSION}}})}},{key:"onGo",value:function(){this.clogClick("learn_more"),Object(te.O)(this.props.team,"benefits/standard?entry_point=paid_benefits_awareness_banner")}},{key:"onCancel",value:function(){this.clogClick("not_now")}},{key:"onCloseIcon",value:function(){this.clogClick("close")}},{key:"getContent",value:function(){return{headerText:Bc.t("See all that Slack has to offer"),bodyText:Bc.t("Discover what more your Slack team can do with a paid plan \u2014 including searching unlimited messages, installing unlimited apps, making group calls, and more."),cancelButtonText:Bc.t("Not Now")}}},{key:"clogClick",value:function(e){this.props.clogger.track(ve.k.GROWTH_PRICING,{contexts:{ui_context:{step:ve.z.BANNER_PAID_BENEFITS_AWARENESS,action:ve.v.CLICK,ui_properties:{element_type:ve.j.BUTTON,element_name:e}}}})}},{key:"render",value:function(){var e=this.getContent();return e?h.a.createElement(ms,{bodyClass:"p-message_pane_banner__body--wider-text",headerText:e.headerText,bodyText:e.bodyText,cancelButtonText:e.cancelButtonText,showCloseIcon:!0,isLearnMoreButton:!0,shouldCloseOnGo:!1,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:qc}):null}}]),t}(p.PureComponent);Uc.displayName="PaidBenefitsAwarenessBanner",Uc.defaultProps={};var Hc=Object(_.b)(function(e){return{clogger:Object(ye.a)({state:e}),team:Object($.d)(e)}})(Uc),Gc=(m.b.string,m.b.object,m.b.func.isRequired,function(e){var t=e.bannerData;return h.a.createElement(gs,{totalUsers:t.total_users,totalChannels:t.total_channels,messagesCount:t.messages_count,teamName:t.team_name})});Gc.displayName="renderActivationMsgLimitBanner";var Wc=function(){return h.a.createElement(Os,null)};Wc.displayName="renderI18nJapanBetaSendBtnBanner";var Kc=function(e){var t=e.bannerData;return h.a.createElement(Rs,{discountPercent:t.discount_pct,country:t.country})};Kc.displayName="renderLocalDiscountAwarenessBanner";var Vc=function(e){var t=e.bannerData;return h.a.createElement(Fs,{numDaysLeft:t.no_of_days_left,expirationDate:t.pay_date_next})};Vc.displayName="renderTwoWeeksLeftEscTrialBanner";var zc=function(e){var t=e.bannerData;return h.a.createElement(Hs,{numDaysLeft:t.no_of_days_left,expirationDate:t.pay_date_next})};zc.displayName="renderOneWeekLeftEscTrialBanner";var Yc=function(e){var t=e.bannerData;return h.a.createElement(Vs,{expirationDate:t.pay_date_next,productId:t.product_id})};Yc.displayName="renderThreeDaysLeftEscTrialBanner";var Qc=function(e){var t=e.bannerData;return h.a.createElement(Js,{expirationDate:t.pay_date_next,productId:t.product_id})};Qc.displayName="renderThreeDaysLeftTrialBanner";var Jc=function(){return h.a.createElement(cl,null)};Jc.displayName="renderApproachingFileLimitBanner";var Xc=function(e){var t=e.bannerData;return h.a.createElement(el,{numMsgs:t.messages_count_abbrev})};Xc.displayName="renderInProdTrialBanner";var Zc=function(e){var t=e.bannerData;return h.a.createElement(rl,{expirationDate:t.expiration_date})};Zc.displayName="renderInProdTrialReminderBanner";var $c=function(e){var t=e.bannerData;return h.a.createElement(ml,{messagesCount:t.messages_count})};$c.displayName="renderApproachingMsgLimitBanner";var eu=function(e){var t=e.bannerData;return h.a.createElement(vl,{messagesCount:t.messages_count})};eu.displayName="renderJustReachedMsgLimitBanner";var tu=function(e){var t=e.bannerData;return h.a.createElement(Cl,{messagesCount:t.messages_count})};tu.displayName="renderThirtyDaysAfterMsgLimitBanner";var nu=function(){return h.a.createElement(Fc,null)};nu.displayName="renderTeamCreationAccountSetupBanner";var au=function(){return h.a.createElement(Hc,null)};au.displayName="renderPaidBenefitsAwarenessBanner";var ru={activation_msg_limit_banner:Gc,i18n_japan_beta_send_btn_banner:Wc,local_discount_awareness_banner:Kc,two_weeks_left_esc_trial_banner:Vc,one_week_left_esc_trial_banner:zc,three_days_left_esc_trial_banner:Yc,three_days_left_trial_banner:Qc,in_prod_trial_banner:Xc,in_prod_trial_reminder_banner:Zc,approaching_file_limit_banner:Jc,approaching_msg_limit_banner:$c,just_reached_msg_limit_banner:eu,thirty_days_after_msg_limit_banner:tu,team_creation_account_setup_banner:nu,paid_benefits_awareness_banner:au},iu=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.parseUrlDebugArgs();this.props.throttledLoadBanner(e)}},{key:"parseUrlDebugArgs",value:function(){var e=Object(cs.q)(window.location),t={};return e.banner_type&&(t.qa_banner_type=e.banner_type,t.qa_banner_data={},Object.keys(e).forEach(function(n){var a=n.split("banner_data_")[1];if(a){var r=parseInt(e[n],10);isNaN(r)&&(r=e[n]),t.qa_banner_data[a]=r}}),t.qa_banner_data=JSON.stringify(t.qa_banner_data)),t}},{key:"render",value:function(){var e=this.props,t=e.bannerName,n=e.bannerData;if(!t)return null;if(ss(t))return ls(t,n),null;var a=ru[t];return a?a({bannerData:n}):(os({name:t,data:n}),null)}}]),t}(p.PureComponent);iu.displayName="MessagePaneBannerContainer",iu.defaultProps={bannerName:"",bannerData:{}};var ou={throttledLoadBanner:is.f},su=Object(_.b)(function(e){return{bannerName:Object(is.d)(e),bannerData:Object(is.c)(e)}},ou)(iu),lu=(n("ixEi"),new x.b("offline_mode"));function cu(e){var t=e.featureOfflineMode,n=e.caption;return t?h.a.createElement("div",{className:"p-large_offline_indicator"},h.a.createElement("p",{className:"p-large_offline_indicator__headline"},h.a.createElement(se.b,{type:"cloud-offline-small",size:"inherit"})," ",lu.t("No connection")),h.a.createElement("p",{className:"p-large_offline_indicator__caption"},n||lu.t("Go online to get the latest messages."))):null}cu.displayName="LargeOfflineIndicator",cu.defaultProps={caption:void 0};var uu,du=Object(Dt.a)("feature_offline_mode")(cu),pu=n("b89k"),hu=n("aLpA"),mu=n("JvzI"),bu=n("K7CU"),fu=n("s19S"),_u=n("tRvn"),gu=n("RMmo"),vu={default:{tada:cdn_url+"/69c58/img/unread/empty/default/1f389.png",victory:{1:cdn_url+"/69c58/img/unread/empty/default/270c-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/default/270c-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/default/270c-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/default/270c-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/default/270c-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/default/270c-1f3ff.png"},racecar:cdn_url+"/69c58/img/unread/empty/default/1f3ce-fe0f.png",rocket:cdn_url+"/69c58/img/unread/empty/default/1f680.png",octopus:cdn_url+"/69c58/img/unread/empty/default/1f419.png",high5:{1:cdn_url+"/69c58/img/unread/empty/default/1f64c.png",2:cdn_url+"/69c58/img/unread/empty/default/1f64c-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/default/1f64c-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/default/1f64c-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/default/1f64c-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/default/1f64c-1f3ff.png"},apple:cdn_url+"/69c58/img/unread/empty/default/1f34f.png",sunglasses:cdn_url+"/69c58/img/unread/empty/default/1f60e.png",thumbup:{1:cdn_url+"/69c58/img/unread/empty/default/1f44d.png",2:cdn_url+"/69c58/img/unread/empty/default/1f44d-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/default/1f44d-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/default/1f44d-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/default/1f44d-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/default/1f44d-1f3ff.png"},boom:cdn_url+"/69c58/img/unread/empty/default/1f4a5.png",bee:cdn_url+"/69c58/img/unread/empty/default/1f41d.png",clap:{1:cdn_url+"/69c58/img/unread/empty/default/1f44f.png",2:cdn_url+"/69c58/img/unread/empty/default/1f44f-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/default/1f44f-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/default/1f44f-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/default/1f44f-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/default/1f44f-1f3ff.png"},crystalball:cdn_url+"/69c58/img/unread/empty/default/1f52e.png",tractor:cdn_url+"/69c58/img/unread/empty/default/1f69c.png",pony:cdn_url+"/69c58/img/unread/empty/default/1f434.png",chick:cdn_url+"/69c58/img/unread/empty/default/1f423.png",growth:cdn_url+"/69c58/img/unread/empty/default/1f331.png",sun:cdn_url+"/69c58/img/unread/empty/default/2600-fe0f.png",balloon:cdn_url+"/69c58/img/unread/empty/default/1f388.png",sweetpotato:cdn_url+"/69c58/img/unread/empty/default/1f360.png",leafs:cdn_url+"/69c58/img/unread/empty/default/1f343.png",owl:cdn_url+"/69c58/img/unread/empty/default/1f989.png",books:cdn_url+"/69c58/img/unread/empty/default/1f4da.png",island:cdn_url+"/69c58/img/unread/empty/default/1f3dd-fe0f.png",coffee:cdn_url+"/69c58/img/unread/empty/default/2615.png",footprints:cdn_url+"/69c58/img/unread/empty/default/1f463.png",tea:cdn_url+"/69c58/img/unread/empty/default/1f375.png",croissant:cdn_url+"/69c58/img/unread/empty/default/1f950.png",art:cdn_url+"/69c58/img/unread/empty/default/1f3a8.png",person_ball:{1:cdn_url+"/69c58/img/unread/empty/default/26f9-fe0f-200d-2640-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/default/26f9-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/69c58/img/unread/empty/default/26f9-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/69c58/img/unread/empty/default/26f9-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/69c58/img/unread/empty/default/26f9-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/69c58/img/unread/empty/default/26f9-1f3ff-200d-2640-fe0f.png"},airplane:cdn_url+"/69c58/img/unread/empty/default/2708-fe0f.png",sailboat:cdn_url+"/69c58/img/unread/empty/default/26f5.png",ship:cdn_url+"/69c58/img/unread/empty/default/1f6a2.png",bulb:cdn_url+"/69c58/img/unread/empty/default/1f4a1.png",hammer:cdn_url+"/69c58/img/unread/empty/default/1f528.png",checkered_flag:cdn_url+"/69c58/img/unread/empty/default/1f3c1.png",wrench:cdn_url+"/69c58/img/unread/empty/default/1f527.png",metro:cdn_url+"/69c58/img/unread/empty/default/1f687.png",soccer:cdn_url+"/69c58/img/unread/empty/default/26bd.png",trophy:cdn_url+"/69c58/img/unread/empty/default/1f3c6.png",cityscape:cdn_url+"/69c58/img/unread/empty/default/1f3d9-fe0f.png",dog:cdn_url+"/69c58/img/unread/empty/default/1f436.png",crossed_swords:cdn_url+"/69c58/img/unread/empty/default/2694-fe0f.png",blush:cdn_url+"/69c58/img/unread/empty/default/1f60a.png",candy:cdn_url+"/69c58/img/unread/empty/default/1f36c.png",herb:cdn_url+"/69c58/img/unread/empty/default/1f33f.png",sparkles:cdn_url+"/69c58/img/unread/empty/default/2728.png",check_mark:cdn_url+"/69c58/img/unread/empty/default/2705.png",confetti_ball:cdn_url+"/69c58/img/unread/empty/default/1f38a.png",doughnut:cdn_url+"/69c58/img/unread/empty/default/1f369.png",bookmark_tabs:cdn_url+"/69c58/img/unread/empty/default/1f4d1.png",sleuth:{1:cdn_url+"/69c58/img/unread/empty/default/1f575-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/default/1f575-1f3fb-200d-2642-fe0f.png",3:cdn_url+"/69c58/img/unread/empty/default/1f575-1f3fc-200d-2642-fe0f.png",4:cdn_url+"/69c58/img/unread/empty/default/1f575-1f3fd-200d-2642-fe0f.png",5:cdn_url+"/69c58/img/unread/empty/default/1f575-1f3fe-200d-2642-fe0f.png",6:cdn_url+"/69c58/img/unread/empty/default/1f575-1f3ff-200d-2642-fe0f.png"},hourglass:cdn_url+"/69c58/img/unread/empty/default/23f3.png",newspaper:cdn_url+"/69c58/img/unread/empty/default/1f5de-fe0f.png",flex:{1:cdn_url+"/69c58/img/unread/empty/default/1f4aa.png",2:cdn_url+"/69c58/img/unread/empty/default/1f4aa-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/default/1f4aa-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/default/1f4aa-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/default/1f4aa-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/default/1f4aa-1f3ff.png"},earth_americas:cdn_url+"/7ff4/img/unread/empty/default/1f30e.png",chocolate_bar:cdn_url+"/7ff4/img/unread/empty/default/1f36b.png",wave:{1:cdn_url+"/7ff4/img/unread/empty/default/1f44b.png",2:cdn_url+"/7ff4/img/unread/empty/default/1f44b-1f3fb.png",3:cdn_url+"/7ff4/img/unread/empty/default/1f44b-1f3fc.png",4:cdn_url+"/7ff4/img/unread/empty/default/1f44b-1f3fd.png",5:cdn_url+"/7ff4/img/unread/empty/default/1f44b-1f3fe.png",6:cdn_url+"/7ff4/img/unread/empty/default/1f44b-1f3ff.png"},relieved:cdn_url+"/7ff4/img/unread/empty/default/1f60c.png",walking:{1:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-200d-2640-fe0f.png",2:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-1f3ff-200d-2640-fe0f.png"},couch_and_lamp:cdn_url+"/7ff4/img/unread/empty/default/1f6cb.png",unicorn_face:cdn_url+"/7ff4/img/unread/empty/default/1f984.png",zap:cdn_url+"/7ff4/img/unread/empty/default/26a1.png",star:cdn_url+"/7ff4/img/unread/empty/default/2b50.png"},google:{tada:cdn_url+"/69c58/img/unread/empty/google/1f389.png",victory:{1:cdn_url+"/69c58/img/unread/empty/google/270c-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/google/270c-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/google/270c-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/google/270c-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/google/270c-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/google/270c-1f3ff.png"},racecar:cdn_url+"/69c58/img/unread/empty/google/1f3ce-fe0f.png",rocket:cdn_url+"/69c58/img/unread/empty/google/1f680.png",octopus:cdn_url+"/69c58/img/unread/empty/google/1f419.png",high5:{1:cdn_url+"/69c58/img/unread/empty/google/1f64c.png",2:cdn_url+"/69c58/img/unread/empty/google/1f64c-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/google/1f64c-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/google/1f64c-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/google/1f64c-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/google/1f64c-1f3ff.png"},apple:cdn_url+"/69c58/img/unread/empty/google/1f34f.png",sunglasses:cdn_url+"/69c58/img/unread/empty/google/1f60e.png",thumbup:{1:cdn_url+"/69c58/img/unread/empty/google/1f44d.png",2:cdn_url+"/69c58/img/unread/empty/google/1f44d-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/google/1f44d-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/google/1f44d-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/google/1f44d-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/google/1f44d-1f3ff.png"},boom:cdn_url+"/69c58/img/unread/empty/google/1f4a5.png",bee:cdn_url+"/69c58/img/unread/empty/google/1f41d.png",clap:{1:cdn_url+"/69c58/img/unread/empty/google/1f44f.png",2:cdn_url+"/69c58/img/unread/empty/google/1f44f-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/google/1f44f-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/google/1f44f-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/google/1f44f-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/google/1f44f-1f3ff.png"},crystalball:cdn_url+"/69c58/img/unread/empty/google/1f52e.png",tractor:cdn_url+"/69c58/img/unread/empty/google/1f69c.png",pony:cdn_url+"/69c58/img/unread/empty/google/1f434.png",chick:cdn_url+"/69c58/img/unread/empty/google/1f423.png",growth:cdn_url+"/69c58/img/unread/empty/google/1f331.png",sun:cdn_url+"/69c58/img/unread/empty/google/2600-fe0f.png",balloon:cdn_url+"/69c58/img/unread/empty/google/1f388.png",sweetpotato:cdn_url+"/69c58/img/unread/empty/google/1f360.png",leafs:cdn_url+"/69c58/img/unread/empty/google/1f343.png",owl:cdn_url+"/69c58/img/unread/empty/google/1f989.png",books:cdn_url+"/69c58/img/unread/empty/google/1f4da.png",island:cdn_url+"/69c58/img/unread/empty/google/1f3dd-fe0f.png",coffee:cdn_url+"/69c58/img/unread/empty/google/2615.png",footprints:cdn_url+"/69c58/img/unread/empty/google/1f463.png",tea:cdn_url+"/69c58/img/unread/empty/google/1f375.png",croissant:cdn_url+"/69c58/img/unread/empty/google/1f950.png",art:cdn_url+"/69c58/img/unread/empty/google/1f3a8.png",person_ball:{1:cdn_url+"/69c58/img/unread/empty/google/26f9-fe0f-200d-2640-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/google/26f9-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/69c58/img/unread/empty/google/26f9-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/69c58/img/unread/empty/google/26f9-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/69c58/img/unread/empty/google/26f9-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/69c58/img/unread/empty/google/26f9-1f3ff-200d-2640-fe0f.png"},airplane:cdn_url+"/69c58/img/unread/empty/google/2708-fe0f.png",sailboat:cdn_url+"/69c58/img/unread/empty/google/26f5.png",ship:cdn_url+"/69c58/img/unread/empty/google/1f6a2.png",bulb:cdn_url+"/69c58/img/unread/empty/google/1f4a1.png",hammer:cdn_url+"/69c58/img/unread/empty/google/1f528.png",checkered_flag:cdn_url+"/69c58/img/unread/empty/google/1f3c1.png",wrench:cdn_url+"/69c58/img/unread/empty/google/1f527.png",metro:cdn_url+"/69c58/img/unread/empty/google/1f687.png",soccer:cdn_url+"/69c58/img/unread/empty/google/26bd.png",trophy:cdn_url+"/69c58/img/unread/empty/google/1f3c6.png",cityscape:cdn_url+"/69c58/img/unread/empty/google/1f3d9-fe0f.png",dog:cdn_url+"/69c58/img/unread/empty/google/1f436.png",crossed_swords:cdn_url+"/69c58/img/unread/empty/google/2694-fe0f.png",blush:cdn_url+"/69c58/img/unread/empty/google/1f60a.png",candy:cdn_url+"/69c58/img/unread/empty/google/1f36c.png",herb:cdn_url+"/69c58/img/unread/empty/google/1f33f.png",sparkles:cdn_url+"/69c58/img/unread/empty/google/2728.png",check_mark:cdn_url+"/69c58/img/unread/empty/google/2705.png",confetti_ball:cdn_url+"/69c58/img/unread/empty/google/1f38a.png",doughnut:cdn_url+"/69c58/img/unread/empty/google/1f369.png",bookmark_tabs:cdn_url+"/69c58/img/unread/empty/google/1f4d1.png",sleuth:{1:cdn_url+"/69c58/img/unread/empty/google/1f575-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/google/1f575-1f3fb-200d-2642-fe0f.png",3:cdn_url+"/69c58/img/unread/empty/google/1f575-1f3fc-200d-2642-fe0f.png",4:cdn_url+"/69c58/img/unread/empty/google/1f575-1f3fd-200d-2642-fe0f.png",5:cdn_url+"/69c58/img/unread/empty/google/1f575-1f3fe-200d-2642-fe0f.png",6:cdn_url+"/69c58/img/unread/empty/google/1f575-1f3ff-200d-2642-fe0f.png"},hourglass:cdn_url+"/69c58/img/unread/empty/google/23f3.png",newspaper:cdn_url+"/69c58/img/unread/empty/google/1f5de-fe0f.png",flex:{1:cdn_url+"/69c58/img/unread/empty/google/1f4aa.png",2:cdn_url+"/69c58/img/unread/empty/google/1f4aa-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/google/1f4aa-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/google/1f4aa-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/google/1f4aa-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/google/1f4aa-1f3ff.png"},earth_americas:cdn_url+"/7ff4/img/unread/empty/google/1f30e.png",chocolate_bar:cdn_url+"/7ff4/img/unread/empty/google/1f36b.png",wave:{1:cdn_url+"/7ff4/img/unread/empty/google/1f44b.png",2:cdn_url+"/7ff4/img/unread/empty/google/1f44b-1f3fb.png",3:cdn_url+"/7ff4/img/unread/empty/google/1f44b-1f3fc.png",4:cdn_url+"/7ff4/img/unread/empty/google/1f44b-1f3fd.png",5:cdn_url+"/7ff4/img/unread/empty/google/1f44b-1f3fe.png",6:cdn_url+"/7ff4/img/unread/empty/google/1f44b-1f3ff.png"},relieved:cdn_url+"/7ff4/img/unread/empty/google/1f60c.png",walking:{1:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-200d-2640-fe0f.png",2:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-1f3ff-200d-2640-fe0f.png"},couch_and_lamp:cdn_url+"/7ff4/img/unread/empty/google/1f6cb.png",unicorn_face:cdn_url+"/7ff4/img/unread/empty/google/1f984.png",zap:cdn_url+"/7ff4/img/unread/empty/google/26a1.png",star:cdn_url+"/7ff4/img/unread/empty/google/2b50.png"}},yu=(uu={"de-DE":[{emoji:"airplane",skintone:!1,lineOne:"Jetzt bist du startklar.",lineTwo:""},{emoji:"art",skintone:!1,lineOne:"Alles paletti!",lineTwo:""},{emoji:"bee",skintone:!1,lineOne:"Geschafft!",lineTwo:"Ganz sch\xf6n flei\xdfig."},{emoji:"books",skintone:!1,lineOne:"Alles gelesen.",lineTwo:"Wie es im Buche steht."},{emoji:"boom",skintone:!1,lineOne:"Du bist der Knaller!",lineTwo:""},{emoji:"bulb",skintone:!1,lineOne:"Heureka!",lineTwo:"Du hast ALLES gelesen!"},{emoji:"checkered_flag",skintone:!1,lineOne:"Du bist am Ziel angelangt!",lineTwo:"Du hast alles gelesen!"},{emoji:"clap",skintone:!0,lineOne:"Das war das T\xfcpfelchen auf dem i.",lineTwo:""},{emoji:"croissant",skintone:!1,lineOne:"Voil\xe0!",lineTwo:"Das war es auch schon."},{emoji:"crystalball",skintone:!1,lineOne:"Alles klar.",lineTwo:"Die Zukunft geh\xf6rt dir!"},{emoji:"footprints",skintone:!1,lineOne:"Gut gemacht.",lineTwo:"Jetzt liegt dir die Welt zu F\xfc\xdfen!"},{emoji:"hammer",skintone:!1,lineOne:"Du bist der Hammer!",lineTwo:"Alles gelesen!"},{emoji:"high5",skintone:!0,lineOne:"Geschafft!",lineTwo:"Das war alles."},{emoji:"metro",skintone:!1,lineOne:"Hier ist das Licht am Ende des Tunnels!",lineTwo:""},{emoji:"island",skintone:!1,lineOne:"Land in Sicht!",lineTwo:"Du hast alles gelesen!"},{emoji:"person_ball",skintone:!0,lineOne:"Immer am Ball bleiben!",lineTwo:""},{emoji:"rocket",skintone:!1,lineOne:"Du hast ein ganz sch\xf6nes Lesetempo drauf!",lineTwo:""},{emoji:"sailboat",skintone:!1,lineOne:"Alles im Lot auf dem Boot.",lineTwo:""},{emoji:"sailboat",skintone:!1,lineOne:"Alles in Butter auf dem Kutter!",lineTwo:""},{emoji:"ship",skintone:!1,lineOne:"Klar Schiff!",lineTwo:""},{emoji:"soccer",skintone:!1,lineOne:"Volltreffer! ",lineTwo:"Du hast alles gelesen!"},{emoji:"sun",skintone:!1,lineOne:"Alles heiter und klar!",lineTwo:""},{emoji:"sunglasses",skintone:!1,lineOne:"Alles klar!",lineTwo:""},{emoji:"tada",skintone:!1,lineOne:"Ta-da !",lineTwo:"Du bist jetzt ganz sch\xf6n belesen."},{emoji:"tea",skintone:!1,lineOne:"Du hast alles aufgeholt.",lineTwo:"Zeit f\xfcr eine kleine Pause."},{emoji:"thumbup",skintone:!0,lineOne:"Du bist ganz sch\xf6n auf Zack!",lineTwo:""},{emoji:"victory",skintone:!0,lineOne:"Alles erledigt!",lineTwo:"Das ist das A und O."},{emoji:"wrench",skintone:!1,lineOne:"Ganz sch\xf6n fix!",lineTwo:""}],"en-GB":[{emoji:"chocolate_bar",skintone:!1,lineOne:"You\u2019ve read everything you need to.",lineTwo:"Take a little break."},{emoji:"balloon",skintone:!1,lineOne:"There, all caught up.",lineTwo:"Turn your mind to something new."},{emoji:"bee",skintone:!1,lineOne:"You\u2019re up to date.",lineTwo:"Go on and do great things."},{emoji:"zap",skintone:!1,lineOne:"Boom!",lineTwo:"You\u2019re up to date."},{emoji:"clap",skintone:!0,lineOne:"Everything unread has now been read.",lineTwo:"You\u2019ve done it."},{emoji:"growth",skintone:!1,lineOne:"Everything\u2019s sorted.",lineTwo:"Let\u2019s do something else."},{emoji:"crystalball",skintone:!1,lineOne:"All that was unread has now been read.",lineTwo:"But what\u2019s next?"},{emoji:"high5",skintone:!0,lineOne:"That\u2019s everything!",lineTwo:""},{emoji:"check_mark",skintone:!1,lineOne:"Done and dusted.",lineTwo:""},{emoji:"octopus",skintone:!1,lineOne:"All sorted.",lineTwo:"The world is your oyster."},{emoji:"unicorn_face",skintone:!1,lineOne:"You\u2019ve read it all.",lineTwo:"Here\u2019s a unicorn."},{emoji:"racecar",skintone:!1,lineOne:"Right!",lineTwo:"All caught up."},{emoji:"rocket",skintone:!1,lineOne:"That\u2019s it.",lineTwo:"The future is yours."},{emoji:"sailboat",skintone:!1,lineOne:"You\u2019ve caught up on everything.",lineTwo:"Plain sailing from now on."},{emoji:"sunglasses",skintone:!1,lineOne:"All clear.",lineTwo:""},{emoji:"coffee",skintone:!1,lineOne:"You\u2019ve got through the lot!",lineTwo:"Pop the kettle on?"},{emoji:"tada",skintone:!1,lineOne:"Ta-da!",lineTwo:"You\u2019ve read everything there is to read."},{emoji:"tada",skintone:!1,lineOne:"Ta-da!",lineTwo:"You\u2019re all up to date."},{emoji:"couch_and_lamp",skintone:!1,lineOne:"That\u2019s you sorted.",lineTwo:"Put your feet up."},{emoji:"tractor",skintone:!1,lineOne:"You\u2019ve read everything.",lineTwo:"Here\u2019s a tractor."},{emoji:"victory",skintone:!0,lineOne:"Caught up on everything.",lineTwo:"What\u2019s next?"}]},xl()(uu,x.b.DEFAULT_LOCALE,[{emoji:"apple",skintone:!1,lineOne:"You\u2019ve read all you needed.",lineTwo:"Take a moment."},{emoji:"balloon",skintone:!1,lineOne:"There! Caught up.",lineTwo:"Set your mind to something new."},{emoji:"bee",skintone:!1,lineOne:"You\u2019re up to date.",lineTwo:"Go forth and do great things."},{emoji:"boom",skintone:!1,lineOne:"Boom.",lineTwo:"You\u2019re up to date."},{emoji:"clap",skintone:!0,lineOne:"Everything unread is now read.",lineTwo:"You\u2019ve done it."},{emoji:"growth",skintone:!1,lineOne:"Everything\u2019s sorted!",lineTwo:"Let\u2019s start something new."},{emoji:"crystalball",skintone:!1,lineOne:"All that was unread is now read.",lineTwo:"What\u2019s next?"},{emoji:"high5",skintone:!0,lineOne:"That\u2019s everything!",lineTwo:""},{emoji:"leafs",skintone:!1,lineOne:"Done and done.",lineTwo:""},{emoji:"octopus",skintone:!1,lineOne:"All done.",lineTwo:"The world is your oyster."},{emoji:"pony",skintone:!1,lineOne:"You\u2019re all read.",lineTwo:"Here\u2019s a pony."},{emoji:"racecar",skintone:!1,lineOne:"There.",lineTwo:"All caught up."},{emoji:"rocket",skintone:!1,lineOne:"All done.",lineTwo:"The future is yours."},{emoji:"sun",skintone:!1,lineOne:"You\u2019re all caught up!",lineTwo:"Clear screens ahead."},{emoji:"sunglasses",skintone:!1,lineOne:"All clear.",lineTwo:""},{emoji:"sweetpotato",skintone:!1,lineOne:"Sweet potato!",lineTwo:"You\u2019re all done."},{emoji:"tada",skintone:!1,lineOne:"Ta-da!",lineTwo:"You\u2019ve read everything there is to read."},{emoji:"tada",skintone:!1,lineOne:"Ta-da!",lineTwo:"You\u2019re up to date."},{emoji:"thumbup",skintone:!0,lineOne:"That\u2019s that.",lineTwo:"You\u2019re good to go."},{emoji:"tractor",skintone:!1,lineOne:"You\u2019re all read.",lineTwo:"Here\u2019s a tractor."},{emoji:"victory",skintone:!0,lineOne:"All caught up.",lineTwo:"What\u2019s next?"}]),xl()(uu,"es-ES",[{emoji:"boom",skintone:!1,lineOne:"Bum.",lineTwo:"Est\xe1s al d\xeda."},{emoji:"chick",skintone:!1,lineOne:"Est\xe1s al d\xeda.",lineTwo:"Es hora de salir a hacer algo estupendo."},{emoji:"candy",skintone:!1,lineOne:"Has le\xeddo todo.",lineTwo:"Aqu\xed tienes un caramelo de regalo."},{emoji:"cityscape",skintone:!1,lineOne:"Has terminado de leer.",lineTwo:"Tienes el mundo a tus pies."},{emoji:"checkered_flag",skintone:!1,lineOne:"Has terminado de leer.",lineTwo:"\xbfY ahora qu\xe9 sigue?"},{emoji:"flex",skintone:!0,lineOne:"Has terminado de leer.",lineTwo:"\xa1Lo lograste!"},{emoji:"high5",skintone:!0,lineOne:"\xa1Eso es todo!",lineTwo:""},{emoji:"hourglass",skintone:!1,lineOne:"Has terminado de leer.",lineTwo:"El futuro es tuyo."},{emoji:"leafs",skintone:!1,lineOne:"Punto y aparte.",lineTwo:""},{emoji:"newspaper",skintone:!1,lineOne:"Ya est\xe1s al d\xeda con tu lectura.",lineTwo:"Ahora puedes tomarte un descanso."},{emoji:"rocket",skintone:!1,lineOne:"\xa1Listo! Est\xe1s al tanto de todo.",lineTwo:"Ahora puedes proponerte algo nuevo."},{emoji:"sunglasses",skintone:!1,lineOne:"El pron\xf3stico se ve despejado.",lineTwo:""},{emoji:"sleuth",skintone:!0,lineOne:"Est\xe1s al tanto de todo.",lineTwo:"\xbfY ahora qu\xe9?"},{emoji:"sleuth",skintone:!0,lineOne:"Listo.",lineTwo:"Ya est\xe1s al tanto de todo."},{emoji:"tada",skintone:!1,lineOne:"\xa1Enhorabuena!",lineTwo:"Has le\xeddo todo lo que hab\xeda que leer."},{emoji:"trophy",skintone:!1,lineOne:"\xa1Al fin!",lineTwo:"Ya has terminado."}]),xl()(uu,"es-LA",[{emoji:"apple",skintone:!1,lineOne:"Est\xe1s al d\xeda con la lectura.",lineTwo:"T\xf3mate un descanso."},{emoji:"balloon",skintone:!1,lineOne:"\xa1Listo! Est\xe1s al d\xeda.",lineTwo:"Centra tu mente en algo nuevo."},{emoji:"bee",skintone:!1,lineOne:"Est\xe1s al d\xeda.",lineTwo:"\xa1Ve a conquistar el mundo!"},{emoji:"boom",skintone:!1,lineOne:"Bum.",lineTwo:"Est\xe1s al d\xeda."},{emoji:"clap",skintone:!0,lineOne:"Terminaste de leer todo.",lineTwo:"\xa1Lo lograste!"},{emoji:"growth",skintone:!1,lineOne:"\xa1Todo resuelto!",lineTwo:"Empecemos algo nuevo."},{emoji:"crystalball",skintone:!1,lineOne:"Le\xedste todo lo que hab\xeda que leer.",lineTwo:"\xbfY ahora qu\xe9?"},{emoji:"high5",skintone:!0,lineOne:"\xa1Eso es todo!",lineTwo:""},{emoji:"leafs",skintone:!1,lineOne:"Punto y aparte.",lineTwo:""},{emoji:"octopus",skintone:!1,lineOne:"Todo listo.",lineTwo:"El mundo est\xe1 a tus pies."},{emoji:"pony",skintone:!1,lineOne:"Ya le\xedste todo.",lineTwo:"Aqu\xed tienes un poni."},{emoji:"racecar",skintone:!1,lineOne:"!Bien hecho!",lineTwo:"Est\xe1s al tanto de todo."},{emoji:"rocket",skintone:!1,lineOne:"Todo listo.",lineTwo:"El futuro es tuyo."},{emoji:"sun",skintone:!1,lineOne:"Ya est\xe1s al tanto de todo.",lineTwo:"\xa1Pantalla despejada!"},{emoji:"sunglasses",skintone:!1,lineOne:"\xa1Todo despejado!",lineTwo:""},{emoji:"sweetpotato",skintone:!1,lineOne:"\xa1Qu\xe9 belleza!",lineTwo:"Ya terminaste."},{emoji:"tada",skintone:!1,lineOne:"\xa1Felicidades!",lineTwo:"Le\xedste todo lo que hab\xeda que leer."},{emoji:"tada",skintone:!1,lineOne:"\xa1Felicidades!",lineTwo:"Est\xe1s al d\xeda."},{emoji:"thumbup",skintone:!0,lineOne:"Eso es todo.",lineTwo:"Puedes seguir con tus otras tareas."},{emoji:"tractor",skintone:!1,lineOne:"Ya le\xedste todo.",lineTwo:"Aqu\xed tienes un tractor."},{emoji:"victory",skintone:!0,lineOne:"Est\xe1s al tanto de todo.",lineTwo:"\xbfY ahora qu\xe9?"}]),xl()(uu,"fr-FR",[{emoji:"balloon",skintone:!1,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"On se sent d\xe9j\xe0 plus l\xe9ger."},{emoji:"bee",skintone:!1,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"On d\xe9colle mieux face au vent, courage !"},{emoji:"books",skintone:!1,lineOne:"Lu et relu !",lineTwo:""},{emoji:"boom",skintone:!1,lineOne:"Boum !",lineTwo:"Vous \xeates \xe0 jour."},{emoji:"clap",skintone:!0,lineOne:"Bravo !",lineTwo:"Vous avez tout lu."},{emoji:"coffee",skintone:!1,lineOne:"Vous avez tout lu !",lineTwo:"Une pause s\u2019impose !"},{emoji:"crystalball",skintone:!1,lineOne:"Vous avez tout lu !",lineTwo:"Que vous r\xe9serve l\u2019avenir ?"},{emoji:"high5",skintone:!0,lineOne:"C\u2019est tout !",lineTwo:""},{emoji:"island",skintone:!1,lineOne:"Termin\xe9 !",lineTwo:"Vous pouvez vous la couler douce !"},{emoji:"owl",skintone:!1,lineOne:"Chouette !",lineTwo:"Vous avez termin\xe9."},{emoji:"racecar",skintone:!1,lineOne:"Voil\xe0 !",lineTwo:"Vous \xeates sur la bonne voie."},{emoji:"rocket",skintone:!1,lineOne:"Termin\xe9 !",lineTwo:"L\u2019avenir vous appartient."},{emoji:"sun",skintone:!1,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"L\u2019horizon est d\xe9gag\xe9."},{emoji:"sunglasses",skintone:!1,lineOne:"Tout est \xe0 jour.",lineTwo:""},{emoji:"tada",skintone:!1,lineOne:"Tadam !",lineTwo:"Vous avez tout lu."},{emoji:"thumbup",skintone:!0,lineOne:"\xc7a y est !",lineTwo:"Vous avez fini."},{emoji:"victory",skintone:!0,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"Quelle est la suite du programme ?"}]),xl()(uu,"ja-JP",[{emoji:"blush",skintone:!1,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u4ee5\u4e0a\u3067\u3059\u3002",lineTwo:"\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002"},{emoji:"bookmark_tabs",skintone:!1,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01\u6e96\u5099\u4e07\u7aef\uff01",lineTwo:"\u3055\u3042\u3001\u4f55\u304b\u3089\u3084\u308a\u307e\u3059\u304b\uff1f"},{emoji:"candy",skintone:!1,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u78ba\u8a8d\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002",lineTwo:"\u306f\u3044\u3001\u30a2\u30e1\u3061\u3083\u3093\uff01"},{emoji:"check_mark",skintone:!1,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u7d42\u4e86\uff01",lineTwo:"\u3084\u308b\u3053\u3068\u30ea\u30b9\u30c8\u304b\u30891\u3064\u6d88\u3048\u307e\u3057\u305f\uff01"},{emoji:"cityscape",skintone:!1,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u78ba\u8a8d\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002",lineTwo:"\u9060\u304f\u3092\u898b\u308b\u3068\u75b2\u308c\u76ee\u306b\u3044\u3044\u3089\u3057\u3044\u3067\u3059\u3088\uff1f"},{emoji:"coffee",skintone:!1,lineOne:"\u3059\u3079\u3066\u306e\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002",lineTwo:"\u3061\u3087\u3063\u3068\u4e00\u606f\u5165\u308c\u307e\u305b\u3093\u304b\uff1f"},{emoji:"confetti_ball",skintone:!1,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u8aad\u4e86\u3092\u9054\u6210\u3057\u307e\u3057\u305f\uff01",lineTwo:""},{emoji:"crossed_swords",skintone:!1,lineOne:"\u307f\u3069\u304f\u3000\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u3000\u3084\u3063\u3064\u3051\u305f\u3002",lineTwo:"\u304b\u3057\u3053\u3055\u304c\u3000\uff11\u30dd\u30a4\u30f3\u30c8\u3000\u3042\u304c\u3063\u305f\uff01"},{emoji:"dog",skintone:!1,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:"\u30ef\u30f3\u3060\u3075\u308b\uff01"},{emoji:"doughnut",skintone:!1,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u7d42\u4e86\uff01",lineTwo:"\u3061\u3087\u3063\u3068\u4f11\u61a9\u3057\u3066\u3001\u75b2\u308c\u305f\u8133\u306b\u7cd6\u5206\u88dc\u7d66"},{emoji:"herb",skintone:!1,lineOne:"\u672a\u8aad\u30b9\u30c3\u30ad\u30ea\uff01\u6c17\u5206\u3082\u30b9\u30c3\u30ad\u30ea\uff01",lineTwo:""},{emoji:"leafs",skintone:!1,lineOne:"\u5168\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u65e2\u8aad\u306b\u306a\u308a\u307e\u3057\u305f\u3002",lineTwo:"\u305d\u308c\u306f\u305d\u308c\u3067\u3001\u3061\u3087\u3063\u3068\u5bc2\u3057\u3044\u2026\uff1f"},{emoji:"rocket",skintone:!1,lineOne:"\u672a\u8aad\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\uff01",lineTwo:"\u3053\u306e\u8abf\u5b50\u3067\u3069\u3093\u3069\u3093\u884c\u3063\u3061\u3083\u3044\u307e\u3057\u3087\u3046\uff01"},{emoji:"sparkles",skintone:!1,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3001\u305c\u3093\u3076\u30ad\u30ec\u30a4\u306b\u7247\u4ed8\u304d\u307e\u3057\u305f\u3002",lineTwo:""},{emoji:"tada",skintone:!1,lineOne:"\u3059\u3054\u3044\uff01",lineTwo:"\u672a\u8aad\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\uff01"},{emoji:"tea",skintone:!1,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:"\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002"},{emoji:"trophy",skintone:!1,lineOne:"\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01",lineTwo:"\u5168\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\u3067\u3059\uff01"},{emoji:"victory",skintone:!0,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:""},{emoji:"sleuth",skintone:!0,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u3092",lineTwo:"\u6f0f\u308c\u306a\u304f\u3059\u3079\u3066\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002"}]),xl()(uu,"pt-BR",[{emoji:"apple",skintone:!1,lineOne:"Voc\xea j\xe1 leu tudo.",lineTwo:"Agora fa\xe7a uma pausa."},{emoji:"balloon",skintone:!1,lineOne:"Pronto!",lineTwo:"Agora voc\xea j\xe1 pode partir para outra."},{emoji:"bee",skintone:!1,lineOne:"Tudo em dia.",lineTwo:"Voc\xea est\xe1 pronto para outra."},{emoji:"flex",skintone:!0,lineOne:"Feito!",lineTwo:"Voc\xea leu todas as suas mensagens."},{emoji:"clap",skintone:!0,lineOne:"Todas as n\xe3o lidas foram lidas.",lineTwo:"Parab\xe9ns!"},{emoji:"relieved",skintone:!1,lineOne:"Miss\xe3o cumprida!",lineTwo:"Pronto para algo novo."},{emoji:"crystalball",skintone:!1,lineOne:"Agora voc\xea est\xe1 por dentro de tudo.",lineTwo:"Pronto para o futuro?"},{emoji:"high5",skintone:!0,lineOne:"Isso \xe9 tudo!",lineTwo:""},{emoji:"high5",skintone:!0,lineOne:"Deu.",lineTwo:""},{emoji:"earth_americas",skintone:!1,lineOne:"Tudo pronto.",lineTwo:"Agora o mundo est\xe1 nas suas m\xe3os."},{emoji:"walking",skintone:!0,lineOne:"\xc9 isso.",lineTwo:"J\xe1 pode sair por a\xed."},{emoji:"check_mark",skintone:!1,lineOne:"Tudo em dia.",lineTwo:"O que vai fazer agora?"},{emoji:"rocket",skintone:!1,lineOne:"Dever cumprido.",lineTwo:"O futuro \xe9 seu."},{emoji:"sunglasses",skintone:!1,lineOne:"Tudo lido.",lineTwo:"Agora j\xe1 pode relaxar."},{emoji:"sunglasses",skintone:!1,lineOne:"Tudo pronto!",lineTwo:""},{emoji:"star",skintone:!1,lineOne:"Bom trabalho!",lineTwo:"Leitura conclu\xedda."},{emoji:"tada",skintone:!1,lineOne:"Surpresa!",lineTwo:"Voc\xea terminou."},{emoji:"tada",skintone:!1,lineOne:"Surpresa!",lineTwo:"Agora voc\xea est\xe1 atualizado."},{emoji:"thumbup",skintone:!0,lineOne:"Acabou!",lineTwo:"Miss\xe3o dada \xe9 miss\xe3o cumprida."},{emoji:"wave",skintone:!0,lineOne:"Era isso.",lineTwo:"Por hoje \xe9 s\xf3!"},{emoji:"victory",skintone:!0,lineOne:"Atualizado!",lineTwo:"E agora?"}]),uu);var ku=n("2Zgd");var Ou=function(e){var t=void 0,n=void 0,a=void 0;return Object(y.i)(e,"feature_incremental_unread_counts")?(t=Object(zi.c)(e),n=Object(_o.a)(t),a=Object(zi.h)(e)):(n=(n=Object(ku.g)()).filter(function(t){return!Object(wn.c)(e,t)}),a=Object(ku.h)(),t={},n.forEach(function(n){var a=Object(re.d)(e,n);t[a.id]={unreadCnt:Object(he.S)(a),unreadHighlightCnt:Object(he.T)(a)}})),{countsPerChannel:t,unreadChannelIds:n,unreadChannelsAreKnown:a}},ju=new x.b("all_unreads"),Cu=(m.b.bool.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.func.isRequired,m.b.number.isRequired,m.b.func.isRequired,m.b.bool.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onUndo=n.onUndo.bind(n),n.onRefresh=n.onRefresh.bind(n),n.onEnter=n.onEnter.bind(n),n.generateMessage(),n.state={allowRefreshButton:e.visible},n.containerRef=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.keyCommands=new gu.a,this.keyCommands.bindAll([{keys:"enter",handler:this.onEnter}])}},{key:"componentDidUpdate",value:function(e){var t=this;e.visible&&!this.props.visible?this.generateMessage():!e.visible&&this.props.visible&&(this.buttonDelayTimer=setTimeout(function(){t.setState(function(){return{allowRefreshButton:!0}})},1e3))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.buttonDelayTimer),this.keyCommands&&this.keyCommands.reset()}},{key:"onEnter",value:function(e){var t=this.props.visible,n=Object(Me.a)()?this.props.userAttentionIsOnChat:Object(fu.f)();if(t&&n&&this.shouldShowNewButton()){var a=e.target;if(!Object(_u.a)(a)){var r="BODY"===a.nodeName,i=this.containerRef.current&&this.containerRef.current.contains(a);(r||i)&&this.onRefresh()}}}},{key:"onRefresh",value:function(){this.props.refreshAllUnreads(),this.setState(function(){return{allowRefreshButton:!1}})}},{key:"onUndo",value:function(){this.props.undoMarkAllRead(),this.setState(function(){return{allowRefreshButton:!1}})}},{key:"generateMessage",value:function(){var e=this.props,t=e.teamId,n=e.preferredSkinTone,a=e.emojiMode;this.message=function(e){var t=e.locale,n=void 0===t?x.b.DEFAULT_LOCALE:t,a=e.preferredSkintone,r=void 0===a?1:a,i=e.emojiMode,o=void 0===i?"default":i,s="apple"===o?"default":o,l=yu[n]||yu[x.b.DEFAULT_LOCALE],c=l[Math.floor(Math.random()*l.length)],u=c.skintone?vu[s][c.emoji][r]:vu[s][c.emoji];return c.emojiUrl=u,c}({locale:Object(mu.a)({teamId:t}),preferredSkinTone:n,emojiMode:a}),(new Image).src=this.message.emojiUrl}},{key:"shouldShowNewButton",value:function(){var e=this.state.allowRefreshButton,t=this.props.totalUnreads;return e&&t>0}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.featureReactAllUnreads,a=e.showUndo,r=e.totalUnreads;if(!n)return null;if(!t)return null;var i=this.shouldShowNewButton(),o=f()("p-unreads_view__empty",{"p-unreads_view__empty--show_new":i}),s=function(e){var t=e.tag,n=e.text;return"enter-icon"===t?h.a.createElement(se.b,{type:"enter",size:"inherit"}):h.a.createElement("b",null,n)};return h.a.createElement("div",{className:o,ref:this.containerRef},h.a.createElement("div",{className:"p-unreads_view__empty__message"},h.a.createElement("img",{className:"p-unreads_view__empty__image",src:this.message.emojiUrl,alt:""}),h.a.createElement("div",null,this.message.lineOne,h.a.createElement("br",null),this.message.lineTwo)),i&&h.a.createElement(h.a.Fragment,null,h.a.createElement(Re.d,{onClick:this.onRefresh},ju.t("{totalUnreads, plural, =1 {# New Message} other {# New Messages} }",{totalUnreads:r})),h.a.createElement("div",{className:"p-unreads_view__empty__button_caption"},Object(qe.p)()?ju.rt("<b>Return</b> <enter-icon></enter-icon> to show",null,s):ju.rt("<b>Enter</b> <enter-icon></enter-icon> to show",null,s))),a&&h.a.createElement("div",{className:"p-unreads_view__empty__undo"},h.a.createElement("div",{className:"p-unreads_view__empty__undo_inner"},ju.t("You marked all your channels read."),h.a.createElement(M.a,{onClick:this.onUndo,className:"p-unreads_view__empty__undo_button"},ju.t("Undo")))))}}]),t}(p.Component));Cu.displayName="EmptyState";var Eu=Object(_.b)(function(e){var t=Ou(e).countsPerChannel,n=Object(fo.a)(Object(bo.a)(t,"unreadCnt"));return{featureReactAllUnreads:Object(y.i)(e,"feature_react_all_unreads"),teamId:Object(v.b)(e),preferredSkinTone:Object(ue.h)(e,"preferred_skin_tone")||"1",emojiMode:Object(bu.h)(e,{forceDisplay:!0}),totalUnreads:n,userAttentionIsOnChat:Object(De.e)(e)}})(Cu),wu=n("lCmp"),Su=n("X6iR"),Iu=n("CpTu"),Tu=n("qAkX"),Nu=n("uPpK"),Ru=n("ypl0"),Au=n("gEbr"),Pu=n("yPgC"),Mu=n("qrk6"),Du=n("2TYC"),xu=n("hAjP"),Lu=n("BDy0"),Fu=Object(ot.b)("build message summary for aria labels",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.ts,i=n.isFirstUnreadMsg,o=n.isFirstMsgForDay,s=n.isLastMsgForDay,l=n.previousMessageTs,c=n.day,u=n.rollup,d=n.hasFocus,p=t(),h=Object(Lu.b)(p);if(!Object(xu.d)(p,{channelId:a,ts:r}).isEditing&&(h||d)){var m=Object(Du.a)(p,{channelId:a,ts:r,previousMessageTs:l,rollup:u,hasFocus:d});return Object(Mu.a)(Z()({},m,{isFirstUnreadMsg:i,isFirstMsgForDay:o,isLastMsgForDay:s,day:c}))}});Fu.propTypes={channelId:m.b.string.isRequired,ts:m.b.string.isRequired,isFirstUnreadMsg:m.b.bool,isFirstMsgForDay:m.b.bool,isLastMsgForDay:m.b.bool,previousMessageTs:m.b.string,day:m.b.object.isRequired,rollup:Pu.a.Rollup(),hasFocus:m.b.bool};var Bu=Fu,qu=n("JHHQ"),Uu=n("ZAxE"),Hu=n("OtLZ"),Gu=n("om+M"),Wu=n("9hu3"),Ku=n("4zXV"),Vu=Object(Gu.a)("Expand a channel in All Unreads",function(e,t,n){var a=Object(ue.g)(t());if(a.includes(n)){var r=Object(Hu.a)(a,n);e(Object(Wu.b)({pref:"unread_collapsed_channels",value:r.join(",")})),e(Object(Ku.b)({method:"unread.expand",args:{channel:n},reason:"all_unreads_expand"}))}});Vu.propTypes=m.b.string.isRequired;var zu=Object(Gu.a)("Collapse a channel in All Unreads",function(e,t,n){var a=Object(ue.g)(t());if(!a.includes(n)){var r=[].concat(Le()(a),[n]);e(Object(Wu.b)({pref:"unread_collapsed_channels",value:r.join(",")})),e(Object(Ku.b)({method:"unread.collapse",args:{channel:n},reason:"all_unreads_collapse"}))}});zu.propTypes=m.b.string.isRequired;var Yu=n("tfYw"),Qu=n.n(Yu),Ju=n("3/My"),Xu=n("eK0w"),Zu=n("nUcG");function $u(e){for(var t={},n=0;n<e.length;n++)t[e[n].key]={index:e[n].index,next:Object(aa.a)(e[n+1],"key")};return t}var ed=Z()({},Xu.a.propTypes,{stickyItems:m.b.arrayOf(m.b.shape({key:m.b.string,index:m.b.number})),stickyOffsetTop:m.b.number,stickyZIndex:m.b.number}),td=Z()({},Xu.a.defaultProps,{stickyItems:[],stickyOffsetTop:0,stickyZIndex:null}),nd=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.stickyItems=$u(e.stickyItems),n}return u()(t,e),o()(t,[{key:"componentWillReceiveProps",value:function(e){Qu()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),this.stickyItems=$u(e.stickyItems)}},{key:"renderItem",value:function(e,n){if(!(e in this.stickyItems))return Qu()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItem",this).call(this,e,n);var a=0===n?-100:this.getTop(e),r=this.layout.getHeight(e),i=this.layout.getHeightValidity(e),o=this.getContentHeight(),s=this.stickyItems[e].next,l=s?this.getTop(s):o,c=Math.max(0,o-l),u=this.state.activeItem===e,d=null===this.state.activeItem&&this.state.hasKeyboardFocus&&this.state.initialActiveItem===e,p=this.state.mouseDownTargetItem===e,m=this.state.hoveredItem===e,b=this.props,f=b.getAriaLabelForRow,_=b.isItemAriaExpanded,g=f&&f(n,{hasFocus:u}),v=_&&_(e,n),y=!0===v?this.props.itemAriaControls:void 0;return h.a.createElement("div",{key:""+e+a+c+this.props.width+this.props.height,className:"c-virtual_list__sticky_container",role:"presentation",style:{top:a,bottom:c}},h.a.createElement(Zu.a,{id:e,height:r,validity:i,className:"c-virtual_list__item--sticky",style:{top:this.props.stickyOffsetTop,zIndex:this.props.stickyZIndex},role:this.props.itemRole,ariaLabel:g,ariaExpanded:v,ariaControls:y,hasFocus:u,hasFocusWithin:d,isMouseDownOnItem:p,onHeightChange:this.setHeight,onFocusEnter:this.onItemFocusEnter,onTabWithin:this.onItemTabWithin,onMouseOver:this.onItemMouseOver,onMouseLeave:this.onItemMouseLeave,onMouseDown:this.onItemMouseDown,onMouseUp:this.onItemMouseup,onClick:this.props.onItemClick},this.props.rowRenderer(n,{hasFocus:u,isHovered:m,isExpanded:v})))}},{key:"renderItems",value:function(){var e=Qu()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItems",this).call(this),n=this.state.start,a=Object(Ju.a)(this.props.stickyItems,{index:n},function(e){return e.index})-1,r=this.props.stickyItems[a];return r&&e.unshift(this.renderItem(r.key,r.index)),e}}]),t}(Xu.a),ad=nd;nd.propTypes=ed,nd.defaultProps=td;var rd=n("YLnb"),id=n("hOQf"),od=n("M+2+"),sd=function(e,t){var n=t.ts,a=t.channelId,r=Object(vo.a)(e,a,n),i=Object(y.i)(e,"feature_consolidate_content_rendering");return Object(y.i)(e,"feature_message_history_cfm")&&n&&Object(od.d)(Object(v.b)(e),a,n),{msg:r,featureConsolidateContentRendering:i}};function ld(e){return Object(_.b)(sd)(function(t){return t.msg?h.a.createElement(e,t):null})}var cd=function(e,t){var n=t.ts,a=t.prevTs,r=t.channelId,i=Object(vo.a)(e,r,n),o=Object(vo.a)(e,r,a),s=Object(y.i)(e,"feature_consolidate_content_rendering");if(Object(y.i)(e,"feature_message_history_cfm")){var l=Object(v.b)(e);n&&Object(od.d)(l,r,n),a&&Object(od.d)(l,r,a)}return{msg:i,adjacent:Object(id.X)(e,i,o),featureConsolidateContentRendering:s}};var ud=n("MnCE"),dd=n("CSaH"),pd=new x.b("messages");m.b.bool;function hd(e){var t=e.ghost;return h.a.createElement("div",{className:f()({"c-message_list__unread_divider":!0,"c-message_list__unread_divider--ghost":t})},h.a.createElement("hr",{className:"c-message_list__unread_divider__separator","aria-hidden":"true"}),h.a.createElement("span",{className:"c-message_list__unread_divider__label"},pd.t("new messages")))}hd.displayName="UnreadDivider",hd.defaultProps={ghost:!1};var md=Object(ud.a)(hd);m.b.number.isRequired,m.b.bool,m.b.bool;function bd(e){var t=e.isUnread,n=Be()(e,["isUnread"]),a=t?h.a.createElement(md,{ghost:n.ghost}):h.a.createElement("hr",{className:"c-message_list__day_divider__line"});return h.a.createElement("div",{className:"c-message_list__day_divider"},a)}function fd(e){var t=e.date,n=e.sticky,a=t/1e3,r=Object(dd.a)(a,"{day_divider_pretty}"),i=f()("c-message_list__day_divider__label",{"c-message_list__day_divider__label--non_sticky":!n});return h.a.createElement("div",{className:i},h.a.createElement("div",{className:"c-message_list__day_divider__label__pill"},r))}bd.displayName="DayDivider",bd.defaultProps={isUnread:!1,ghost:!1},fd.displayName="DayDividerLabel",fd.defaultProps={sticky:!0};var _d=Object(ud.a)(bd),gd=Object(ud.a)(fd),vd=n("4EIq"),yd=new x.b("offline_mode");function kd(e){var t=e.featureOfflineMode,n=e.caption;return t?h.a.createElement("div",{className:"p-inline_offline_indicator"},h.a.createElement("span",null,h.a.createElement(se.b,{type:"cloud-offline-small",size:"inherit"})," ",h.a.createElement("strong",null,yd.t("No connection."))," ",n||yd.t("Go online to load more messages."))):null}kd.displayName="InlineOfflineIndicator",kd.defaultProps={caption:void 0};var Od=Object(Dt.a)("feature_offline_mode")(kd),jd=n("OZf9"),Cd=n("VyaM");function Ed(e){if(e){var t=Object(Cd.a)(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime().toString()}}var wd=n("0ivQ"),Sd=n("y8dB");var Id=n("Bw5p"),Td=n("cTgs"),Nd=n("18Pa"),Rd=new x.b("all_unreads"),Ad=(m.b.number,m.b.bool,m.b.bool.isRequired,m.b.func.isRequired,m.b.bool.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"getMessageCountText",value:function(){var e=this.props,t=e.messageCountIsExact,n=e.messageCount;return e.featureReactAllUnreads?n?t?Rd.t("{messageCount, plural, =1 {# message} other {# messages}}",{messageCount:n}):Rd.t("{messageCount, plural, =1 {#+ message} other {#+ messages}}",{messageCount:n}):"":null}},{key:"renderButton",value:function(e){return h.a.createElement(Re.d,{onClick:this.props.markRead,type:"outline",size:"small",className:"p-unreads_view__header__mark_read_button","data-qa":"all_unreads_header_mark_read",key:"MARK-READ"},e)}},{key:"renderContent",value:function(){var e=this,t=this.props,n=t.featureReactAllUnreads,a=t.selected;if(!n)return null;if(a)return Rd.rt('<span className="p-unreads_view__header__kb_instructions">Press <key>Esc</key> to </span><button>Mark as Read</button>',null,function(t){var n=t.text,a=t.tag;return"button"===a?e.renderButton(n):"key"===a?h.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},n):null});var r=Rd.t("Mark as Read");return this.renderButton(r)}},{key:"render",value:function(){var e=f()("p-unreads_view__header__kb_instructions_container");return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"p-unreads_view__header__message_count"},this.getMessageCountText()),h.a.createElement("span",{className:e},this.renderContent()))}}]),t}(p.PureComponent));Ad.displayName="HeaderDefault",Ad.defaultProps={messageCount:0,messageCountIsExact:!0};var Pd=Ad,Md=new x.b("all_unreads"),Dd=(m.b.bool.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.bool.isRequired,m.b.number,m.b.bool,m.b.number,m.b.number,m.b.number,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.bool.isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["markRead","undoMarkRead","showNew","openChannel","toggleCollapse"]),n}return u()(t,e),o()(t,[{key:"markRead",value:function(){var e={channel_id:this.props.channelId,channel_type:this.props.channelType,unread_count:this.props.totalUnreadCount};this.props.clogLinkClick({event:"UNREADS_MARK_GROUP_AS_READ",metadata:e}),this.props.markChannelLastRead(this.props.channelId,this.props.latest,this.props.messageCount)}},{key:"undoMarkRead",value:function(){var e={channel_id:this.props.channelId,channel_type:this.props.channelType,unread_count:this.props.totalUnreadCount};this.props.clogLinkClick({event:"UNREADS_MARK_GROUP_AS_UNREAD",metadata:e}),this.props.markChannelLastRead(this.props.channelId,this.props.initialLastRead)}},{key:"showNew",value:function(){this.props.showNewerMessages(this.props.channelId,!0)}},{key:"openChannel",value:function(){this.props.setPrimaryView({id:this.props.channelId})}},{key:"toggleCollapse",value:function(){this.props.toggleCollapse(this.props.channelId)}},{key:"renderUndo",value:function(){var e=this.props,t=e.featureReactAllUnreads,n=e.markedMsgCount;if(!t)return null;var a=void 0;return n&&(a=Md.t("{messageCount, plural, =1 {# message} other {# messages}} marked read",{messageCount:n})),h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"p-unreads_view__header__message_count"},a),h.a.createElement(M.a,{className:"p-unreads_view__header__undo_button",onClick:this.undoMarkRead,"data-qa":"all_unreads_header_undo"},Md.t("Undo")))}},{key:"renderNewMsgs",value:function(e){var t=this.props,n=t.featureReactAllUnreads,a=t.messageCountAfterLatest,r=t.messageCountIsExact,i=t.messageCount;if(!n)return null;var o=void 0;return o=r?Md.t("{messageCount} new {messageCount, plural, =1 {message} other {messages}}",{messageCount:a+i}):Md.t("New messages"),h.a.createElement(M.a,{onClick:e,className:"p-unreads_view__header__new_msgs_button","data-qa":"all_unreads_header_new_msgs"},o," ",h.a.createElement(se.b,{inline:!0,size:"inherit",type:"circle-fill"}))}},{key:"renderDefault",value:function(){var e=Object(Id.a)(this.props,["messageCount","messageCountIsExact","selected","featureReactAllUnreads"]);return h.a.createElement(Pd,Z()({},e,{markRead:this.markRead}))}},{key:"render",value:function(){var e=this.props,t=e.featureReactAllUnreads,n=e.channelId,a=e.markedMsgCount,r=e.messageCount,i=e.messageCountAfterLatest,o=e.collapsed;if(!t)return null;var s=r>0,l=i>0,c=0,u=1,d=2,p=3,m=c;s||!(a>0)||l?!s&&l?m=p:o&&(m=u):m=d;var b=f()("p-unreads_view__header",{"p-unreads_view__header--was_marked":m===d||m===p,"p-unreads_view__header--collapsed":m===u}),_=o?"caret-right":"caret-down",g=m===c||m===u,v=m===c;return h.a.createElement("div",{className:b},h.a.createElement(M.a,{onClick:this.openChannel,className:"p-unreads_view__header__channel_name_link","data-qa":"all_unreads_header_channel_name"},h.a.createElement(pe.a,{channelId:n,className:"p-unreads_view__header__channel_name"})),g&&h.a.createElement(Nd.a,{icon:_,className:"p-unreads_view__header__collapse","data-qa":"all_unreads_header_toggle",onClick:this.toggleCollapse,"aria-expanded":v}),m===d&&this.renderUndo(),m===p&&this.renderNewMsgs(this.showNew),m===u&&this.renderNewMsgs(this.toggleCollapse),m===c&&this.renderDefault())}}]),t}(p.Component));Dd.displayName="Header",Dd.defaultProps={messageCount:0,messageCountIsExact:!0,messageCountAfterLatest:0,markedMsgCount:0,totalUnreadCount:0};var xd={setPrimaryView:function(){return Td.a.apply(void 0,arguments)}},Ld=Object(_.b)(null,xd)(Dd),Fd=n("CaXY"),Bd=n("anIG"),qd=n("RhZ7"),Ud=n("Aeia"),Hd=n("TOh8"),Gd=n("0dpy"),Wd=n("8CL7"),Kd=n("VrmM"),Vd=n("fFZG"),zd=n("ALaB");n("Ho8D");function Yd(e){var t=e.msg;return Object(id.rb)(t)?h.a.createElement(zd.a,{className:"c-message_kit__broadcast_footer",ts:t.ts,threadTs:t.thread_ts,channelId:t.channel}):null}Yd.displayName="BroadcastFooter";var Qd=n("qYtJ"),Jd=(m.b.object.isRequired,m.b.string,m.b.func,{dispatchShowThreadIfThreadable:d.a,className:void 0}),Xd=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.msg,n=e.dispatchShowThreadIfThreadable,a=f()("c-message_kit__thread_replies",this.props.className),r=t.channel,i=t.thread_ts,o=t.replies,s=t.reply_count,l=t.reply_users,c=t.reply_users_count,u=t.latest_reply;return r&&s?h.a.createElement(Qd.a,{channelId:r,threadTs:i,replies:o,replyCount:s,replyUsers:l,replyUsersCount:c,latestReply:u,showThreadIfThreadable:n,className:a}):null}}]),t}(p.PureComponent);Xd.displayName="ThreadReplies",Xd.defaultProps=Jd;var Zd=Object(_.b)(null,function(e){return{dispatchShowThreadIfThreadable:function(){return e(Au.m.apply(void 0,arguments))}}})(Xd),$d=n("IqgZ"),ep=n("Q/6m"),tp=n("Q3oM"),np=n("WOap"),ap=n("KmK8"),rp=n("RjVJ"),ip=(n("vKzi"),m.b.object,m.b.node,m.b.oneOf(["light","dense"]),{msg:m.b.object,children:null,theme:"light"}),op=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.msg,n=e.children,a=e.theme;if(!Object(id.rb)(t))return n;var r=f()("c-message_kit__broadcast_preamble",{"c-message_kit__broadcast_preamble--dense":"dense"===a});return h.a.createElement("div",{className:r},n,h.a.createElement(rp.a,{ts:t.ts,threadTs:t.thread_ts,channelId:t.channel,className:"c-message_kit__broadcast_preamble__inner"}))}}]),t}(p.PureComponent);op.displayName="BroadcastPreamble",op.defaultProps=ip;var sp=Object(_.b)(function(e){return{theme:Object(Ru.a)(e)}})(op),lp=n("lU/5"),cp=n("CsEc"),up=n("Y6eO"),dp=(n("rqkC"),m.b.object.isRequired,m.b.string,m.b.node,m.b.bool,m.b.func,m.b.string,{className:void 0,children:void 0,isEditing:!1,setBackground:d.a,viewContext:void 0}),pp=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.setBackground()}},{key:"componentDidUpdate",value:function(){this.setBackground()}},{key:"setBackground",value:function(){var e=this.props,t=e.isEditing,n=e.setBackground;n({editing:t})}},{key:"render",value:function(){var e=this.props,t=e.msg,n=e.isEditing,a=e.children,r=e.viewContext;if(!n)return a;var i=t.channel,o=t.ts,s=f()(this.props.className,"c-message_kit__edit");return h.a.createElement("div",{className:s},h.a.createElement(up.a,{channelId:i,ts:o,messageContainerType:r}))}}]),t}(p.PureComponent);pp.displayName="MessageEdit",pp.defaultProps=dp;var hp=Object(ep.b)(Object(rs.b)(Object(_.b)(function(e,t){var n=t.msg,a=t.viewContext,r=n.channel,i=n.ts;return{isEditing:Object(xu.d)(e,{channelId:r,ts:i,viewContext:a}).isEditing}})(pp))),mp=n("/FWe"),bp=new x.b("message_kit"),fp=(m.b.object.isRequired,m.b.oneOf(["light","dense"]),m.b.bool,m.b.bool,m.b.bool,m.b.oneOf(["above","inside","default"]),m.b.func,Pu.a.Rollup(),m.b.bool,{theme:"light",adjacent:!1,focused:!1,renderActionsOffscreen:!1,actionsPosition:void 0,onBackgroundClick:d.a,rollup:null,featureConsolidateContentRendering:!1}),_p=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleBackgroundClick=n.handleBackgroundClick.bind(n),n}return u()(t,e),o()(t,[{key:"getMessageBody",value:function(e){var t=this.props,n=t.adjacent,a=t.rollup,r=t.featureConsolidateContentRendering;return h.a.createElement(h.a.Fragment,null,!n&&h.a.createElement(sp,{msg:e},h.a.createElement(Hd.a,{msg:e}),"\xa0\xa0",h.a.createElement(Gd.a,{msg:e,clickable:!0},bp.t("Open in channel")),h.a.createElement("br",null)),r?h.a.createElement(h.a.Fragment,null,h.a.createElement(Wd.a,{msg:e,rollup:a}),h.a.createElement(Kd.a,{msg:e,blocksContainerContext:Fd.a.all_unreads})):this.renderContent(e),h.a.createElement(Ud.b,{msg:e}),h.a.createElement(Bd.a,{msg:e}),h.a.createElement(Vd.a,{msg:e}),h.a.createElement(Zd,{msg:e,className:"p-unreads_view__thread_replies"}),h.a.createElement(Yd,{msg:e}))}},{key:"getCompactMessageBody",value:function(e){var t=this.props,n=t.adjacent,a=t.rollup,r=t.featureConsolidateContentRendering;return h.a.createElement(mp.a,null,!n&&h.a.createElement(sp,{msg:e},h.a.createElement(Hd.a,{msg:e,className:"p-unreads_view_sender--compact"}),"\xa0"),r?h.a.createElement(h.a.Fragment,null,h.a.createElement(Wd.a,{msg:e,rollup:a}),h.a.createElement(Kd.a,{msg:e,blocksContainerContext:Fd.a.all_unreads})):this.renderContent(e),h.a.createElement(Ud.b,{msg:e}),h.a.createElement(Bd.a,{msg:e}),h.a.createElement(Vd.a,{msg:e}),h.a.createElement(Zd,{msg:e,className:"p-unreads_view__thread_replies"}))}},{key:"getCompactGutter",value:function(){var e=this.props,t=e.msg,n=e.theme,a=e.adjacent,r="light"===n,i=f()("p-unreads_view_compact_timestamp",{"p-unreads_view_compact_timestamp--light":r,"p-unreads_view_compact_timestamp--adjacent":a});return h.a.createElement("div",{className:i},h.a.createElement(Gd.a,{msg:t,meridiem:!(a&&r),clickable:!0},bp.t("Open in channel")))}},{key:"handleBackgroundClick",value:function(e){e.altKey&&(e.preventDefault(),this.props.onBackgroundClick(this.props.msg))}},{key:"renderContent",value:function(e){var t=Fd.a.all_unreads;return e.blocks?h.a.createElement(Kd.a,{msg:e,blocksContainerContext:t}):h.a.createElement(Wd.a,{msg:e,rollup:this.props.rollup})}},{key:"render",value:function(){var e=this.props,t=e.msg,n=e.theme,a=e.adjacent,r=e.focused,i=e.renderActionsOffscreen,o=e.actionsPosition,s=f()("p-unreads-view__message","c-message_kit__message"),l="dense"===n,c=l?this.getCompactGutter():null,u=a?this.getCompactGutter():h.a.createElement(qd.a,{msg:t}),d=l?this.getCompactMessageBody(t):this.getMessageBody(t);return h.a.createElement($d.a,{msg:t},h.a.createElement(ep.a,{msg:t,className:s,onClick:this.handleBackgroundClick},h.a.createElement(tp.a,{"data-qa":"unreads_view_message_hover",hovered:r},h.a.createElement(np.a,{msg:t,showComment:!0,showShare:!0,messageContainerType:hu.y.UNREAD_VIEW,position:o||(l||a?"above":"default"),renderOffscreen:i},h.a.createElement(lp.a,{msg:t},h.a.createElement(cp.a,{msg:t,className:"p-unreads-view__message_label"},h.a.createElement(ap.a,{light:u,compact:c},h.a.createElement(hp,{msg:t},d))))))))}}]),t}(p.PureComponent);_p.displayName="Message";var gp=_p;_p.defaultProps=fp;var vp=new x.b("all_unreads"),yp=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this.props,t=e.channelId;(0,e.showNewerMessages)(t)}},{key:"render",value:function(){var e=this.props,t=e.count;if(!e.featureReactAllUnreads)return null;var n=vp.t("{count, plural, =1 {# new message} other {# new messages}}",{count:t});return h.a.createElement(M.a,{className:"p-unreads_view__show_newer",onClick:this.onClick},n)}}]),t}(p.PureComponent);yp.displayName="ShowNewerButton";var kp=yp;yp.defaultProps={featureReactAllUnreads:!0};m.b.func.isRequired,m.b.bool.isRequired;var Op=new x.b("all_unreads");function jp(e){var t=e.markAllRead;return e.featureReactAllUnreads?h.a.createElement("div",{className:"p-unreads_view__footer"},h.a.createElement(Re.d,{onClick:t,type:"outline"},Op.t("Mark All Messages Read"))):null}jp.displayName="Footer";var Cp=jp,Ep=new x.b("all_unreads");function wp(e){return e.featureReactAllUnreads?h.a.createElement("div",{className:"p-unreads_view__loading_more"},Ep.t("Loading more messages...")):null}wp.displayName="LoadingMore";var Sp,Ip=wp,Tp=new x.b("all_unreads"),Np="UNREADS-VIEW",Rp=(Sp=gp,Object(_.b)(cd)(function(e){return e.msg?h.a.createElement(Sp,e):null})),Ap={showNewerMessages:m.b.func.isRequired,markChannelLastRead:m.b.func.isRequired,markAllRead:m.b.func.isRequired,removeFrames:m.b.func.isRequired,totalUnreadCount:m.b.number.isRequired,frames:m.b.arrayOf(m.b.shape({channelId:m.b.string.isRequired,start:m.b.string.isRequired,end:m.b.string.isRequired,initialLastRead:m.b.string.isRequired,markedMsgCount:m.b.number.isRequired,channelType:m.b.string.isRequired,collapsed:m.b.bool.isRequired,lastRead:m.b.string.isRequired,latest:m.b.string.isRequired,timestamps:m.b.arrayOf(m.b.string).isRequired,reachedEnd:m.b.bool.isRequired,messages:m.b.object,isMember:m.b.bool})).isRequired,logger:m.b.object.isRequired,clogLinkClick:m.b.func.isRequired,theme:m.b.oneOf(["dense","light"]).isRequired,featureReactAllUnreads:m.b.bool.isRequired,featureAriaApplicationMode:m.b.bool.isRequired,allUnreadsSortOrder:m.b.string.isRequired,focusRequestedThreadKey:m.b.string,userAttentionIsOnChat:m.b.bool.isRequired,featureOfflineMode:m.b.bool.isRequired,isOffline:m.b.bool.isRequired,fetchHistory:m.b.func.isRequired,addMessagesFromHistory:m.b.func.isRequired,setUnreadPoint:m.b.func.isRequired,expandChannel:m.b.func.isRequired,collapseChannel:m.b.func.isRequired,makeMessageSummary:m.b.func.isRequired,showThreadIfThreadable:m.b.func.isRequired,setFocusRequestedThreadKey:m.b.func.isRequired,removeFromSectionNavigation:m.b.func,addToSectionNavigation:m.b.func,setInitialActiveSection:m.b.func},Pp={focusRequestedThreadKey:void 0,removeFromSectionNavigation:d.a,addToSectionNavigation:d.a,setInitialActiveSection:d.a},Mp=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["renderRow","fetchPost","showNewerMessages","markAllRead","markChannelLastRead","toggleCollapse","handleMessageBackgroundClick","isFocusableItem","onMarkReadKeyCommand","onMarkReadKeyCommandWithR","onLeftKeyCommand","onRightKeyCommand","onPreviousChannelKeyCommand","onNextChannelKeyCommand","shouldIgnoreKeyEvent","shouldIgnoreFocusedKeyEvent","clogClick","isItemAriaExpanded","onFocusEnter","onFocusLeave","getAriaLabelForRow","focus"]),n.layout=new rd.a({ANCHOR_OFFSET:72}),n.list=h.a.createRef(),n.rows=[],n.loading=!1,n.state={keyToFocus:null,hasKeyboardFocus:!1},n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){!e.userAttentionIsOnChat&&this.props.userAttentionIsOnChat&&this.props.addToSectionNavigation(),!this.props.userAttentionIsOnChat&&e.userAttentionIsOnChat&&this.props.removeFromSectionNavigation(),this.layout.anchor&&0===this.layout.anchorOffset&&this.layout.setAnchor(!1);var t=Object(bo.a)(this.props.frames.filter(function(e){return!e.isMember}),"channelId"),n=Object(bo.a)(this.props.frames.filter(function(e){return e.reachedEnd&&(Object(sa.a)(e.timestamps)||Object(Tu.a)(e.timestamps)<=e.initialLastRead)}),"channelId"),a=[].concat(Le()(t),Le()(n));a.length&&(this.props.logger.info("removing frames (non-member, empty):",t,n),this.props.removeFrames(a)),this.maybeClearKeyToFocus()}},{key:"maybeClearKeyToFocus",value:function(){var e=this.list.current;if(e){var t=e.getActiveItem();t&&this.state.keyToFocus===t&&this.setState(function(){return{keyToFocus:null}})}}},{key:"determineKeyToFocus",value:function(e,t){var n=this.state.keyToFocus,a=this.props.focusRequestedThreadKey;if(a){var r=Object(Ho.a)(a);return"message-"+r.channelId+"-"+r.threadTs}if(n)return n;var i=this.list.current&&this.list.current.getInitialActiveItem();if(Object(Su.a)(i,"show-newer-")&&!Object(Ei.a)(t,i)){var o=e.indexOf(i);if(-1===o)return null;var s=e[o-1],l=t.indexOf(s),c=t[l+1];if(c)return c}return null}},{key:"showNewerMessages",value:function(e,t){var n=Object(Iu.a)(this.props.frames,{channelId:e}),a=t&&n.lastRead;t&&this.maybeAnchorToHeader(e),this.props.showNewerMessages(e,n.latest,a)}},{key:"markAllRead",value:function(){var e={};this.rows.filter(function(e){return"header"===e.type}).forEach(function(t){t.messageCountIsExact&&!t.messageCount||(e[t.channelId]=t.end)}),this.props.markAllRead(e)}},{key:"getActiveRow",value:function(){var e=this.props,t=e.logger,n=e.frames,a=this.list.current&&this.list.current.getInitialActiveItem()||this.keys[0];if(!a)return t.warn("No activeItem"),null;var r=this.keys.indexOf(a),i=this.rows[r];if(!i||!i.channelId)return t.warn("No valid row"),null;var o=i.channelId,s=Object(Iu.a)(n,{channelId:o});return s?{row:i,frame:s}:(t.warn("No frame for "+o),null)}},{key:"onMarkReadKeyCommand",value:function(){var e=this.props,t=e.logger,n=e.frames;t.info("onMarkReadKeyCommand");var a=this.getActiveRow()||{},r=a.row,i=a.frame;if(r&&i){var o=Object(El.a)(this.rows,{channelId:i.channelId,type:"message"}).length;if(!o)return r.markedMsgCount?void this.markChannelLastRead(i.channelId,i.initialLastRead):void t.warn("No messages to mark or to undo");if(this.markChannelLastRead(i.channelId,i.end,o),1!==n.filter(function(e){return e.start<e.end}).length){var s=n[1+n.indexOf(i)];s?this.setState(function(){return{keyToFocus:"header-"+s.channelId}}):this.setState(function(){return{keyToFocus:"header-"+i.channelId}})}}}},{key:"onMarkReadKeyCommandWithR",value:function(){var e=this.props.logger;e.info("onMarkReadKeyCommandWithR");var t=this.getActiveRow(),n=t.row,a=t.frame;n&&a&&("header"===n.type?this.onMarkReadKeyCommand():e.info("Header not selected: "+n.type))}},{key:"onLeftKeyCommand",value:function(){this.props.logger.info("onLeftKeyCommand");var e=this.getActiveRow(),t=e.row,n=e.frame;t&&n&&("header"!==t.type||n.collapsed||(this.toggleCollapse(n.channelId),this.setState(function(){return{keyToFocus:"header-"+n.channelId}})))}},{key:"onRightKeyCommand",value:function(){this.props.logger.info("onRightKeyCommand");var e=this.getActiveRow(),t=e.row,n=e.frame;if(t&&n){if("header"===t.type&&n.collapsed)return this.toggleCollapse(n.channelId),void this.setState(function(){return{keyToFocus:"header-"+n.channelId}});if("message"===t.type){var a=t.ts,r=t.channelId;this.props.showThreadIfThreadable({channelId:r,threadTs:a,requestFocus:!0}),this.blur()}}}},{key:"onPreviousChannelKeyCommand",value:function(){var e=this.props,t=e.logger,n=e.frames;t.info("onPreviousChannelKeyCommand");var a=this.getActiveRow()||{},r=a.row,i=a.frame;if(r&&i){var o=i;"header"!==r.type||(o=n[n.indexOf(i)-1])?this.setState(function(){return{keyToFocus:"header-"+o.channelId}}):t.info("No previous frame")}}},{key:"onNextChannelKeyCommand",value:function(){var e=this.props,t=e.logger,n=e.frames;t.info("onNextChannelKeyCommand");var a=this.getActiveRow()||{},r=a.row,i=a.frame;if(r&&i){var o=n[n.indexOf(i)+1];o?this.setState(function(){return{keyToFocus:"header-"+o.channelId}}):t.info("No next frame")}}},{key:"shouldIgnoreKeyEvent",value:function(e){return!!Object(_u.a)(e.target)||(!this.checkUserAttentionIsOnChat()||e.target!==document.body&&!this.state.hasKeyboardFocus)}},{key:"shouldIgnoreFocusedKeyEvent",value:function(e){return!!Object(_u.a)(e.target)||(!this.checkUserAttentionIsOnChat()||!this.state.hasKeyboardFocus)}},{key:"checkUserAttentionIsOnChat",value:function(){return Object(Me.a)()?this.props.userAttentionIsOnChat:Object(fu.f)()}},{key:"maybeAnchorToHeader",value:function(e){if(this.list.current){var t="header-"+e;this.list.current.getTop(t)-this.list.current.getScrollTop()>0||this.layout.setAnchor(t,0)}}},{key:"markChannelLastRead",value:function(e,t,n){this.maybeAnchorToHeader(e),this.props.markChannelLastRead(e,t,n)}},{key:"clogClick",value:function(e,t){this.props.clogLinkClick({event:e,metadata:t})}},{key:"toggleCollapse",value:function(e){var t=Object(Iu.a)(this.props.frames,{channelId:e});if(t){var n={channel_id:e,channel_type:t.channelType};this.maybeAnchorToHeader(e),t.collapsed?(this.props.expandChannel(e),this.props.showNewerMessages(e,t.latest),this.clogClick("UNREADS_EXPAND_GROUP",n)):(this.props.collapseChannel(e),this.clogClick("UNREADS_COLLAPSE_GROUP",n))}}},{key:"handleMessageBackgroundClick",value:function(e){var t=e.channel,n=e.ts;this.props.setUnreadPoint({channelId:t,unreadTs:n})}},{key:"isFocusableItem",value:function(e){var t=e.index,n=this.rows[t];return["header","message","show-newer","footer"].includes(n.type)}},{key:"isItemAriaExpanded",value:function(e,t){var n=this.rows[t];if(n&&"header"===n.type)return!n.collapsed}},{key:"scrollToTop",value:function(){this.list.current&&this.list.current.scrollToOffset(0)}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"blur",value:function(){var e=this.list.current;e&&e.blur()}},{key:"onFocusEnter",value:function(){var e=this;this.setState(function(){return{hasKeyboardFocus:!0}},function(){var t=e.props.focusRequestedThreadKey,n=e.list.current;n&&t&&("message-"+t===n.getActiveItem()&&e.props.setFocusRequestedThreadKey(null))})}},{key:"onFocusLeave",value:function(){this.setState(function(){return{hasKeyboardFocus:!1}})}},{key:"getAriaLabelForRow",value:function(e){if(!this.props.makeMessageSummary)return null;var t=this.rows[e];if(!t||!t.type)return null;if("message"!==t.type)return null;var n=t.ts;return this.props.makeMessageSummary({channelId:t.channelId,ts:n,hasFocus:this.state.hasKeyboardFocus,day:{ts:n,isFirstDay:!1,isLastDay:!1}})}},{key:"renderRow",value:function(e,t){var n=t.hasFocus,a=this.rows[e],r=this.list.current&&this.list.current.getInitialActiveItem();switch(a.type){case"header":return h.a.createElement(Ld,{featureReactAllUnreads:!0,channelId:a.channelId,channelType:a.channelType,messageCount:a.messageCount,messageCountAfterLatest:a.messageCountAfterLatest,messageCountIsExact:a.messageCountIsExact,markedMsgCount:a.markedMsgCount,collapsed:a.collapsed,latest:a.end,initialLastRead:a.initialLastRead,totalUnreadCount:this.props.totalUnreadCount,markChannelLastRead:this.markChannelLastRead,showNewerMessages:this.showNewerMessages,toggleCollapse:this.toggleCollapse,selected:Object(Ei.a)(r,a.channelId),clogLinkClick:this.props.clogLinkClick});case"message":return h.a.createElement(Rp,{channelId:a.channelId,ts:a.ts,prevTs:a.prevTs,actionsPosition:a.isFirstMessage?"default":void 0,onBackgroundClick:this.handleMessageBackgroundClick,focused:n,renderActionsOffscreen:this.state.hasKeyboardFocus,theme:this.props.theme,rollup:a.rollup});case"loading":return this.props.featureOfflineMode&&this.props.isOffline?h.a.createElement(Od,null):h.a.createElement(Ip,{featureReactAllUnreads:!0});case"day-divider":var i=+a.dayTs;return h.a.createElement(h.a.Fragment,null,h.a.createElement(gd,{date:i}),h.a.createElement(_d,{date:i,isUnread:a.unread}));case"unread-divider":return h.a.createElement(md,null);case"show-newer":return h.a.createElement(kp,{count:a.count,channelId:a.channelId,showNewerMessages:this.showNewerMessages});case"spacer":return h.a.createElement("div",{className:f()("p-unreads_view__spacer",{"p-unreads_view__spacer--bottom":!!a.isBottom})});case"footer":return h.a.createElement(Cp,{markAllRead:this.markAllRead,featureReactAllUnreads:!0});default:return this.props.logger.error("Unhandled row type:",a.type),a.type}}},{key:"fetchPost",value:function(){var e=this,t=Object(Tu.a)(this.rows);if(t&&"loading"===t.type&&!this.loading){this.loading=!0;var n=t.channelId,a=t.oldest;this.props.logger.info("fetchPost",n,a),this.props.fetchHistory({channelId:n,oldest:a,reason:"unreads-view/fetchPost"}).then(function(t){var r=t.msgs,i=t.hasMore,o=t.deleted;e.props.addMessagesFromHistory({channelId:n,oldest:a,msgs:r,hasMore:i,deleted:o})}).finally(function(){e.loading=!1})}}},{key:"render",value:function(){var e=this;if(!this.props.featureReactAllUnreads)return null;var t=this.props,n=t.allUnreadsSortOrder,a=t.frames,r=t.currentUserId,i=t.featureOfflineMode,o=t.isOffline,s=function(e,t){var n=[],a=[],r=[],i=!0;return Object(jd.a)(e,function(e){var o=e.channelId,s=e.channelType,l=e.start,c=e.end,u=e.timestamps,d=e.sliceEnd,p=e.reachedEnd,h=e.messages,m=e.lastRead,b=e.initialLastRead,f=e.markedMsgCount,_=e.collapsed,g=u.filter(function(e){var n=h[e];return!(Object(id.fb)(n)||Object(id.hb)(n)&&!Object(id.gb)(n,t)||Object(id.pb)(n))}),v=g.filter(function(e){return e>l&&e<=c}),y=g.filter(function(e){return e>c}),k=v.length&&!_,O=!Object(wd.a)(v[0]),j=m>l&&Object(Iu.a)(v,function(e){var n=h[e];return Object(id.ib)(n,m,t)});if(n.push("header-"+o),r.push({key:"header-"+o,index:a.length}),a.push({type:"header",channelId:o,channelType:s,end:c,initialLastRead:b,markedMsgCount:f,messageCount:v.length,messageCountAfterLatest:y.length,messageCountIsExact:p,collapsed:_}),k&&!O&&(n.push("spacer-top-"+o),a.push({type:"spacer"})),k){var C=v.map(function(e){return h[e]}),E=Object(Sd.a)(C).rollups;v.forEach(function(e,t){var r=v[t-1],i=e===j,s=r&&Ed(r),l=Ed(e);O&&s!==l?(n.push("day-divider-"+o+"-"+l),a.push({type:"day-divider",dayTs:l,unread:i})):i&&(n.push("unread-divider-"+o),a.push({type:"unread-divider"})),n.push("message-"+o+"-"+e),a.push({type:"message",channelId:o,ts:e,prevTs:r,isFirstMessage:0===t,rollup:E[e]})})}if(!p&&!_){var w=d||l;return n.push("loading-"+o+"-"+w),a.push({type:"loading",channelId:o,oldest:w}),i=!1,!1}return k&&(y.length?(n.push("show-newer-"+o),a.push({type:"show-newer",channelId:o,count:y.length})):(n.push("spacer-bottom-"+o),a.push({type:"spacer",isBottom:!0}))),!0}),i&&(n.push("footer"),a.push({type:"footer"})),{keys:n,rows:a,stickyItems:r}}(a,r),l=s.keys,c=s.rows,u=s.stickyItems,d=!Object(wu.a)(c,function(e){return"message"===e.type});if(i&&o&&d)return h.a.createElement(du,null);var p=this.keys;this.rows=c,this.keys=l;var m=[{keys:["r"],handler:this.onMarkReadKeyCommandWithR,filter:this.shouldIgnoreKeyEvent},{keys:["esc"],handler:this.onMarkReadKeyCommand,filter:this.shouldIgnoreKeyEvent},{keys:["left"],handler:this.onLeftKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["right"],handler:this.onRightKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["shift+pageup"],handler:this.onPreviousChannelKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["shift+pagedown"],handler:this.onNextChannelKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent}],b=void 0;b="alphabetical"===n?Tp.t("All Unreads, sorted alphabetically"):"priority"===n?Tp.t("All Unreads, sorted scientifically"):"newest"===n?Tp.t("All Unreads, sorted by newest channel"):Tp.t("All Unreads, sorted by oldest channel");var f=this.determineKeyToFocus(p,this.keys),_=h.a.createElement(Nu.a,null,function(t){var n=t.width,a=t.height;return h.a.createElement(ad,{ref:e.list,layout:e.layout,width:n,height:a,keys:l,rowRenderer:e.renderRow,isFocusableItem:e.isFocusableItem,loadAround:e.fetchPost,loadPost:e.fetchPost,stickyItems:u,stickyZIndex:202,keyCommands:m,activeItem:f,isItemAriaExpanded:e.isItemAriaExpanded,onFocusEnter:e.onFocusEnter,onFocusLeave:e.onFocusLeave,useAriaApplicationMode:e.props.featureAriaApplicationMode,getAriaLabelForRow:e.getAriaLabelForRow,ariaLabel:b,onTabWithin:e.props.setInitialActiveSection})});return Object(Me.a)()?_:h.a.createElement(vd.a,{component:this,order:.2},_)}}]),t}(pu.a);Mp.displayName="UnreadsList",Mp.propTypes=Ap,Mp.defaultProps=Pp;var Dp={fetchHistory:function(){return Uu.b.apply(void 0,arguments)},addMessagesFromHistory:function(){return qu.a.apply(void 0,arguments)},setUnreadPoint:function(){return Qn.setUnreadPoint.apply(void 0,arguments)},expandChannel:function(){return Vu.apply(void 0,arguments)},collapseChannel:function(){return zu.apply(void 0,arguments)},makeMessageSummary:function(){return Bu.apply(void 0,arguments)},showThreadIfThreadable:function(){return Au.m.apply(void 0,arguments)},setFocusRequestedThreadKey:function(){return Ri.c.apply(void 0,arguments)}},xp=Object(Me.a)()?Object(Pe.a)(Mp,"UnreadsList",{index:0}):Mp,Lp=Object(_.b)(function(e,t){var n=Object(ut.a)({label:Np,state:e}),a=Object(Ru.a)(e),r=Object(ue.g)(e);return{logger:n,theme:a,frames:t.frames.map(function(t){var n=Object(re.d)(e,t.channelId),a=Object(he.D)(n),i=Object(go.h)(e,n.id),o=Object(he.E)(n,i.timestamps),s=Object(go.h)(e,n.id,t.start),l=s.timestamps,c=s.end,u=!!s.reachedEnd,d=Object(vo.b)(e,n.id),p=r.includes(t.channelId),h=Object(he.kb)(n);return Z()({},t,{lastRead:a,latest:o,timestamps:l,sliceEnd:c,reachedEnd:u,messages:d,collapsed:p,isMember:h})}),currentUserId:Object(y.b)(e),featureReactAllUnreads:Object(y.i)(e,"feature_react_all_unreads"),featureAriaApplicationMode:Object(y.i)(e,"feature_aria_application_mode"),allUnreadsSortOrder:wi(e),focusRequestedThreadKey:Ni(e),userAttentionIsOnChat:Object(De.e)(e),featureOfflineMode:Object(y.i)(e,"feature_offline_mode"),isOffline:!Object(ee.c)(e)}},Dp,null,{withRef:!0})(xp),Fp=n("oTSI"),Bp=n("Yk7g"),qp=n("1myf"),Up=n("pHS2"),Hp=n("dYt1");function Gp(e){var t=Yp(e),n=t.publicChannels,a=t.privateChannels,r=t.ims,i=t.mpims;return function(e){var t=function(e){var t=Object(Up.a)(e,function(e){return e.unreadHighlightCnt>0}),n=t.true||[],a=t.false||[];return{hasMentions:n,noMentions:a}}(e),n=t.hasMentions,a=t.noMentions;return Vp(n).concat(Vp(a))}(n.concat(a)).concat(Vp(r)).concat(Vp(i))}function Wp(e){var t=Yp(e),n=t.publicChannels,a=t.privateChannels,r=t.ims,i=t.mpims,o=Kp(n.concat(a)),s=Kp(r),l=Kp(i);return o.concat(s).concat(l)}function Kp(e){return Object(Hp.a)(e).sort(function(e,t){return Object(x.o)(e.displayName,t.displayName)})}function Vp(e){return Object(Hp.a)(e).sort(function(e,t){return e.priority===t.priority?Object(x.o)(e.displayName,t.displayName):t.priority-e.priority})}function zp(e){var t=Object(Up.a)(e,"isStarred");return{starred:t.true||[],notStarred:t.false||[]}}function Yp(e){var t=Object(Up.a)(e,"channelType");return{publicChannels:t.channel||[],privateChannels:t.private||[],ims:t.im||[],mpims:t.mpim||[]}}var Qp=function(e){var t=e.channels,n=e.allUnreadsSortOrder,a=e.currentUserId;return"oldest"===n?function(e,t){var n=Object(Fp.a)(function(e){var n=e.lastRead,a=e.messages,r=e.oldestSliceTimestamps,i=e.createdTime,o=!1,s=Object(Iu.a)(r,function(e){if(e<=n)return!1;var r=a[e];return r?Object(id.ib)(r,n,t):(o=!0,!1)});return s&&!o?s:"0000000000.000000"===n?i+".000000":n});return Object(qp.a)(e,n)}(t,a):"priority"===n?function(e){var t=zp(e),n=t.starred,a=t.notStarred;return Gp(n).concat(Gp(a))}(t):"newest"===n?function(e){return Object(Bp.a)(Object(qp.a)(e,"latest"))}(t):function(e){var t=zp(e),n=t.starred,a=t.notStarred;return Wp(n).concat(Wp(a))}(t)},Jp=(m.b.number.isRequired,m.b.func.isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["refreshFromKeyPress"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.setNewUnreadMsgCount(this.props.newUnreadMsgCount)}},{key:"componentDidUpdate",value:function(e){e.newUnreadMsgCount!==this.props.newUnreadMsgCount&&this.props.setNewUnreadMsgCount(this.props.newUnreadMsgCount)}},{key:"componentWillUnmount",value:function(){this.props.setNewUnreadMsgCount(0)}},{key:"refreshFromKeyPress",value:function(){this.props.newUnreadMsgCount>0&&this.props.refreshAllUnreads()}},{key:"render",value:function(){return null}}]),t}(p.Component));Jp.displayName="NewMessagesUpdater";var Xp=Object(_.b)(function(e,t){var n=t.frames.map(function(e){return e.channelId}),a=Ou(e).countsPerChannel,r=Object(El.a)(a,function(e,t){return!n.includes(t)});return{newUnreadMsgCount:Object(fo.a)(Object(bo.a)(r,"unreadCnt"))}})(Jp),Zp=(n("oq3d"),new x.b("all_unreads")),$p="UNREADS-VIEW",eh={channels:m.b.arrayOf(m.b.shape({id:m.b.string.isRequired,lastRead:m.b.string.isRequired,latest:m.b.string.isRequired,displayName:m.b.string.isRequired,channelType:m.b.string.isRequired,isStarred:m.b.bool.isRequired,priority:m.b.number.isRequired,unreadHighlightCnt:m.b.number.isRequired,messages:m.b.object.isRequired,oldestSliceTimestamps:m.b.arrayOf(m.b.string).isRequired,createdTime:m.b.number.isRequired})).isRequired,logger:m.b.object.isRequired,clogger:m.b.object,allUnreadsSortOrder:m.b.string.isRequired,currentUserId:m.b.string.isRequired,featureReactAllUnreads:m.b.bool.isRequired,refreshId:m.b.number.isRequired,totalUnreadCount:m.b.number.isRequired,unreadChannelsAreKnown:m.b.bool.isRequired,featureOfflineMode:m.b.bool.isRequired,isOffline:m.b.bool.isRequired,markLastRead:m.b.func.isRequired,setNewUnreadMsgCount:m.b.func.isRequired},th={clogger:{track:d.a}},nh=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["showNewerMessages","markChannelLastRead","markAllRead","undoMarkAllRead","refreshAllUnreads","removeFrames","clogUnreadsEvent"]),n.state=n.computeInitialState(),n.unreadsEventSeqId=0,n.initializedTime=Date.now(),n.listRef=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clogUnreadsEvent({event:"UNREADS_OPEN",metadata:{}}),this.incrementTrackingSeqId()}},{key:"componentDidUpdate",value:function(e){(e.allUnreadsSortOrder!==this.props.allUnreadsSortOrder||e.refreshId<this.props.refreshId||!e.unreadChannelsAreKnown&&this.props.unreadChannelsAreKnown)&&this.refreshAllUnreads()}},{key:"componentDidCatch",value:function(e){this.setState(function(){return{errored:!0}}),this.props.logger.error("Unreads view componentDidCatch","unreads_view_did_catch",e)}},{key:"componentWillUnmount",value:function(){var e={unreads_event_seq_id:this.unreadsEventSeqId,unreads_elapsed_time:Date.now()-this.initializedTime};this.clogUnreadsEvent({event:"UNREADS_CLOSE",metadata:e})}},{key:"incrementTrackingSeqId",value:function(){this.unreadsEventSeqId+=1}},{key:"clogUnreadsEvent",value:function(e){var t=e.event,n=e.metadata;this.props.clogger.track(t,Z()({is_unreads_view:1},n))}},{key:"computeInitialState",value:function(){var e=this.props,t=e.channels,n=e.allUnreadsSortOrder,a=e.currentUserId;return{frames:Qp({channels:t,allUnreadsSortOrder:n,currentUserId:a}).map(function(e){var t=e.id,n=e.lastRead;return{channelId:t,start:n,end:e.latest,initialLastRead:n,markedMsgCount:0,channelType:e.channelType||""}}),showMarkAllUndo:!1,markedChannels:[],errored:!1}}},{key:"showNewerMessages",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.setState(function(a){return{frames:a.frames.map(function(a){return a.channelId!==e?a:Z()({},a,{initialLastRead:n||a.initialLastRead,start:n||a.start,end:t})})}})}},{key:"markChannelLastRead",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.props.logger.info("Marking "+e+" to "+t),this.props.markLastRead({id:e,ts:t,immediate:!0,reason:"unreads-view/markChannelLastRead"}),this.setState(function(a){return{frames:a.frames.map(function(a){return a.channelId!==e?a:Z()({},a,{start:t,markedMsgCount:n})})}})}},{key:"markAllRead",value:function(e){this.props.logger.info("Marking all: "+JSON.stringify(e)),this.props.markManyLastRead({markers:e,reason:"unreads-view/markAllRead"});var t={unread_count:this.props.totalUnreadCount};this.clogUnreadsEvent({event:"UNREADS_MARK_ALL_AS_READ",metadata:t}),this.setState(function(t){var n=t.frames.map(function(e){return Z()({},e,{start:e.end})});return Z()({},t,{frames:n,showMarkAllUndo:!0,markedChannels:Object(_o.a)(e)})})}},{key:"undoMarkAllRead",value:function(){this.clogUnreadsEvent({event:"UNREADS_MARK_ALL_AS_UNREAD",metadata:{}}),this.setState(function(e,t){var n=e.frames.map(function(t){return e.markedChannels.includes(t.channelId)?Z()({},t,{start:t.initialLastRead}):t}),a={};return n.forEach(function(t){e.markedChannels.includes(t.channelId)&&(t.initialLastRead>=t.end||(a[t.channelId]=t.initialLastRead))}),t.logger.info("Undoing mark all: "+JSON.stringify(a)),t.markManyLastRead({markers:a,reason:"unreads-view/undoMarkAllRead"}),Z()({},e,{frames:n,showMarkAllUndo:!1,markedChannels:[]})})}},{key:"refreshAllUnreads",value:function(){var e=this;this.props.logger.info("Refreshing"),this.setState(function(){return e.computeInitialState()},function(){e.listRef&&e.listRef.current&&e.listRef.current.getWrappedInstance()&&e.listRef.current.getWrappedInstance().scrollToTop()}),this.props.setNewUnreadMsgCount(0)}},{key:"removeFrames",value:function(e){this.setState(function(t){return Z()({},t,{frames:t.frames.filter(function(t){return!e.includes(t.channelId)})})})}},{key:"renderTopBanners",value:function(){return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"p-unreads_view__top_banners"},h.a.createElement(So,null),h.a.createElement(Io.a,null,h.a.createElement(Jo,null))),h.a.createElement(su,null))}},{key:"render",value:function(){if(!this.props.featureReactAllUnreads)return this.props.logger.error("Tried rendering React All Unreads with the feature flag off"),null;if(!this.props.unreadChannelsAreKnown){var e=this.props,t=e.featureOfflineMode,n=e.isOffline;return h.a.createElement(h.a.Fragment,null,this.renderTopBanners(),t&&n?h.a.createElement(du,null):h.a.createElement($o,null))}var a=this.state,r=a.showMarkAllUndo;if(a.errored&&this.props.featureReactAllUnreads)return h.a.createElement("div",{className:"p-unreads_view"},this.renderTopBanners(),h.a.createElement(as,{tryAgain:this.refreshAllUnreads,"data-qa":"unreads_view_error"},Zp.t("Something\u2019s fishy! Slack can\u2019t seem to load your unread messages.")," ",h.a.createElement("br",null),Zp.rt("You can try again, but if the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text;return h.a.createElement(G.a,{href:"https://slack.com/help/contact"},t)})));var i=h.a.createElement(Xp,{frames:this.state.frames,setNewUnreadMsgCount:this.props.setNewUnreadMsgCount,refreshAllUnreads:this.refreshAllUnreads}),o=!this.state.frames.some(function(e){return e.start<e.end}),s=h.a.createElement(Eu,{visible:o,showUndo:r,undoMarkAllRead:this.undoMarkAllRead,refreshAllUnreads:this.refreshAllUnreads}),l=h.a.createElement(rs.a,{id:hu.y.UNREAD_VIEW},h.a.createElement("div",{className:"p-unreads_view"},h.a.createElement(Lp,{ref:this.listRef,frames:this.state.frames,showNewerMessages:this.showNewerMessages,markChannelLastRead:this.markChannelLastRead,markAllRead:this.markAllRead,removeFrames:this.removeFrames,totalUnreadCount:this.props.totalUnreadCount,clogLinkClick:this.clogUnreadsEvent})));return h.a.createElement(p.Fragment,null,this.renderTopBanners(),s,!o&&l,!o&&i)}}]),t}(pu.a);nh.displayName="UnreadsView",nh.propTypes=eh,nh.defaultProps=th;var ah={markLastRead:function(){return yo.a.apply(void 0,arguments)},markManyLastRead:function(){return yo.b.apply(void 0,arguments)},setNewUnreadMsgCount:function(){return Ri.d.apply(void 0,arguments)}},rh=Object(_.b)(function(e){var t=Object(ut.a)({label:$p,state:e}),n=Object(ye.a)({state:e}),a=Ou(e),r=a.countsPerChannel,i=a.unreadChannelIds,o=a.unreadChannelsAreKnown,s=Object(fo.a)(Object(bo.a)(r,"unreadCnt")),l=i.map(function(t){return Object(re.d)(e,t)}).map(function(t){var n=Object(he.D)(t),a=Object(go.h)(e,t.id),i=Object(he.E)(t,a.timestamps),o=Object(go.h)(e,t.id,n),s=Object(vo.b)(e,t.id)||{};return{id:t.id,lastRead:n,latest:i,displayName:Object(he.x)(e,t,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),channelType:Object(he.v)(t),isStarred:Object(he.Fb)(t)||!1,priority:Object(he.O)(t)||0,unreadHighlightCnt:r[t.id].unreadHighlightCnt||0,messages:s,oldestSliceTimestamps:o&&o.timestamps||[],createdTime:Object(he.q)(t)}});return{featureReactAllUnreads:Object(y.i)(e,"feature_react_all_unreads"),logger:t,clogger:n,channels:l,allUnreadsSortOrder:wi(e),currentUserId:Object(y.b)(e),refreshId:Ti(e),totalUnreadCount:s,unreadChannelsAreKnown:o,featureOfflineMode:Object(y.i)(e,"feature_offline_mode"),isOffline:!Object(ee.c)(e)}},ah)(nh),ih=n("bo4X"),oh=n("pmOY"),sh=n("FdTv"),lh=n("JVYW"),ch=n("+J1t"),uh=n("8W09"),dh=n("CGJF"),ph=n("+6YQ"),hh=new x.b("generic_dialog"),mh=(m.b.string,m.b.node,m.b.oneOf(["primary","danger"]),m.b.string,m.b.string,m.b.func,m.b.func,m.b.string,m.b.oneOf(["dialog","alertdialog"]),{title:"",children:null,submitButtonType:"primary",submitButtonText:null,closeButtonText:null,onSubmit:d.a,onClose:d.a,ariaDescribedBy:null,role:"alertdialog"}),bh=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSubmit=n.onSubmit.bind(n),n.onClose=n.onClose.bind(n),n}return u()(t,e),o()(t,[{key:"onClose",value:function(e){e&&e.stopPropagation(),this.props.onClose()}},{key:"onSubmit",value:function(e){e.stopPropagation(),this.props.onSubmit(),this.props.onClose()}},{key:"render",value:function(){return h.a.createElement(ih.a,{labelledby:"basic_dialog_title",describedby:this.props.ariaDescribedBy,closeModal:this.onClose,role:this.props.role},h.a.createElement(oh.a,null,h.a.createElement(sh.a,{title:this.props.title,id:"basic_dialog_title"})),h.a.createElement(lh.a,null,h.a.createElement(ch.a,null,this.props.children)),h.a.createElement(uh.a,null,h.a.createElement(dh.a,null,h.a.createElement(ph.a,{type:"outline",onClick:this.onClose},this.props.closeButtonText||hh.t("Close")),h.a.createElement(ph.a,{type:this.props.submitButtonType,onClick:this.onSubmit},this.props.submitButtonText||hh.t("Confirm")))))}}]),t}(p.PureComponent);bh.displayName="BasicDialog",bh.defaultProps=mh;var fh=bh,_h=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){return h.a.createElement(fh,{title:"Remove the Get Started page?",submitButtonText:"Remove",closeButtonText:"Cancel",submitButtonType:"primary",onSubmit:this.props.dismissWelcomePlace,onClose:this.props.closeModal},"If youre all set, you can remove this page permanently. If you need help later, head to our Help Center, or reach out to us at feedback@slack.com.")}}]),t}(p.Component);_h.displayName="DismissWelcomePlaceDialog";var gh={closeModal:st.a,dismissWelcomePlace:Yi.a},vh=Object(_.b)(null,gh)(_h),yh=new x.b("channel_sidebar"),kh={Pexample:{label:function(){return"Example Page"},view:function(){return h.a.createElement("div",{className:"margin_100"},"Hi! This is an example page.")},sidebar:{icon:"small-quote",onClickClose:function(e){},getCloseLinkLabel:function(){return yh.t("Dismiss example page",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c"})}}},Punreads:{label:function(){return yh.t("All Unreads")},header:function(e){return h.a.createElement(Ki,e)},view:function(){return h.a.createElement("div",{className:"p-workspace__primary_view_body"},h.a.createElement(rh,null))},sidebar:{icon:"list",isBold:function(e){return Object(y.i)(e,"feature_incremental_unread_counts")?Object(zi.i)(e):Object(Vi.d)(e)}}},Pwelcome:{sidebar:{icon:"slack",onClickClose:function(e){return e(Object(st.e)({element:h.a.createElement(vh,null)}))},getCloseLinkLabel:function(){return yh.t("Dismiss",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c"})}},label:function(){return"Get Started"},view:function(){return h.a.createElement(mo,null)}}};function Oh(e){return kh[e]||{}}m.b.string.isRequired,m.b.string,m.b.bool,m.b.bool;var jh={className:void 0,legacy:!1,featurePages:!1},Ch=function(e){var t=e.id,n=e.className,a=e.legacy,r=e.featurePages;if(!t||!r)return null;var i=Oh(t);if(i.header)return i.header({className:n});var o=f()("p-classic_nav__page_header",{"p-classic_nav__page_header--legacy":a},n);return h.a.createElement("div",{className:o},h.a.createElement("div",{className:"p-classic_nav__channel_header__title"},i.label()),h.a.createElement(Bi,{regionId:"main",flex:!0}))};Ch.displayName="PageHeader",Ch.defaultProps=jh;var Eh=Object(_.b)(function(e){return{featurePages:Object(y.i)(e,"feature_pages")}})(Ch),wh=n("5tH5"),Sh=n("+Sjy"),Ih=n("1VpL"),Th=function(e,t){return Object(Ih.f)(e)&&Object(he.hb)(e,t)},Nh="EMPTY",Rh="ALL_THREADS",Ah="ALL_UNREADS",Ph="FEATURE_PAGE",Mh="APP_IM",Dh="DEFAULT",xh=[{type:Nh,isShowing:function(e){return!e}},{type:Rh,isShowing:function(e){return e===wh.a.allThreads}},{type:Ah,isShowing:function(e){return e===wh.a.allUnreads}},{type:Ph,isShowing:function(e,t){return Object(y.i)(t,"feature_pages")&&Object(Sh.e)(t,e)}},{type:Mh,isShowing:function(e,t){return Th(t,e)}}],Lh=function(e){var t=Object(k.a)(e),n=xh.find(function(n){return n.isShowing(t,e)});return n?n.type:Dh},Fh=(n("c7HH"),m.b.string,m.b.string,m.b.bool,function(e){var t=e.primaryView,n=e.headerType,a=e.isWindowFrameless,r=f()({"p-classic_nav__channel_header":!0,"p-classic_nav__channel_header--frameless":a,"p-classic_nav__drag":a});switch(n){case Nh:return h.a.createElement("div",{className:r});case Rh:return h.a.createElement(Ci,{className:r});case Ah:return h.a.createElement(Ki,{className:r});case Ph:return h.a.createElement(Eh,{id:t,className:r});case Mh:return h.a.createElement(vi,{className:r});default:return h.a.createElement(ui,{className:r})}});Fh.defaultProps={primaryView:void 0,headerType:void 0,isWindowFrameless:!1};var Bh=Object(_.b)(function(e){return{primaryView:Object(k.a)(e),headerType:Lh(e),isWindowFrameless:Object(C.j)(e)}})(Fh),qh=n("JpmM"),Uh=n("Gxzu"),Hh=n("iH/p"),Gh=n("7ARk"),Wh=n("W7ut"),Kh=n("m5Fn"),Vh=new x.b("search"),zh=(m.b.string,m.b.bool,m.b.bool,m.b.func,m.b.func,{query:void 0,featureClassicNav:!1,isHighlighted:!1,openFromClick:d.a,clearSearchInput:d.a}),Yh=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.onMouseDown=n.onMouseDown.bind(n),n.onClearClick=n.onClearClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.openFromClick()}},{key:"onMouseDown",value:function(e){2===e.nativeEvent.which&&this.props.openFromClick()}},{key:"onClearClick",value:function(e){e.stopPropagation(),this.props.clearSearchInput()}},{key:"render",value:function(){var e=this.props,t=e.query,n=e.featureClassicNav,a=e.isHighlighted;if(!n)return null;var r=t?h.a.createElement(p.Fragment,null,h.a.createElement(Re.c,{className:"p-classic_nav__right__search__text","aria-label":Vh.t("Search: {query}",{query:t})},h.a.createElement(Pn.a,{text:t,customLineEnding:" ",showTooltips:!1,noLinking:!0,noSpecials:!0,noHighlights:!0})),h.a.createElement(Re.c,{className:"p-classic_nav__right__search__clear",onClick:this.onClearClick,"aria-label":Vh.t("Clear search field")},h.a.createElement(se.b,{type:"times-small",inline:!0}))):h.a.createElement("span",{className:"p-classic_nav__right__search__placeholder"},Vh.t("Search")),i=t?"div":Re.c;return h.a.createElement(p.Fragment,null,h.a.createElement(i,{className:f()("p-classic_nav__right__search","p-classic_nav__no_drag",{"p-classic_nav__right__search--is_highlighted":a}),onClick:this.onClick,onMouseDown:this.onMouseDown,"aria-label":Vh.t("Search"),"data-qa":"legacy_search_header"},h.a.createElement(se.b,{className:"p-classic_nav__right__search__icon",type:"search",size:"inherit",inline:!0}),r),h.a.createElement(Kh.a,null))}}]),t}(p.Component);Yh.displayName="SearchInput",Yh.defaultProps=zh;var Qh=Object(_.b)(function(e){return{query:Object(Uh.b)(e),featureClassicNav:Object(y.i)(e,"feature_classic_nav"),isHighlighted:Object(Wh.e)(e)}},function(e){return{openFromClick:function(){return e(Hh.a.apply(void 0,arguments))},clearSearchInput:function(){return e(Gh.a.apply(void 0,arguments))}}})(Yh),Jh=n("kn0e"),Xh=n("TOkS"),Zh=new x.b("classic_nav"),$h=(m.b.string,m.b.string,m.b.bool,m.b.bool,m.b.objectOf(m.b.bool),m.b.string.isRequired,m.b.string.isRequired,{userName:void 0,channelName:void 0,isDirectMessage:!1,otherUsers:void 0,featureClassicNav:!1}),em=function(e){var t=e.userName,n=e.channelName,a=e.isDirectMessage,r=e.otherUsers;if(!e.featureClassicNav)return null;var i=Object(wl.a)(r),o=0===i?t:Zh.t("{userName} and {numOthers,plural,=1{# other}other{# others}}",{userName:t,numOthers:i}),s=a?Zh.t("Direct Message"):n;return h.a.createElement(p.Fragment,null,o,h.a.createElement("span",{className:"p-classic_nav__tip_sub"},s))};em.displayName="ActivityToastTip",em.defaultProps=$h;var tm=Object(_.b)(function(e,t){var n=t.userId,a=t.channelId,r=Object(re.d)(e,a),i=Object(he.x)(e,r);return{userName:Object(ne.Q)(e,n),channelName:i,isDirectMessage:Object(he.eb)(r),featureClassicNav:Object(y.i)(e,"feature_classic_nav")}})(em),nm=new x.b("classic_nav"),am=(m.b.shape({key:m.b.string.isRequired,emoji:m.b.string.isRequired,userId:m.b.string.isRequired,channelId:m.b.string.isRequired,otherUsers:m.b.objectOf(m.b.bool)}),m.b.bool,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.object.isRequired,{currentToast:void 0,isActive:!1,stopAnimations:!1,featureClassicNav:!1,toggleActivityFlexpane:d.a,shiftToast:d.a}),rm=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.state={waiting:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.currentToast&&this.props.currentToast.emoji&&this.startToastTimer()}},{key:"componentDidUpdate",value:function(e,t){var n=e.currentToast&&e.currentToast.emoji,a=this.props.currentToast&&this.props.currentToast.emoji;a&&a!==n&&this.startToastTimer(),this.state.waiting&&!t.waiting&&this.startWaitTimer()}},{key:"componentWillUnmount",value:function(){this.props.shiftToast(),this.toastTimer&&clearTimeout(this.toastTimer),this.waitTimer&&clearTimeout(this.waitTimer)}},{key:"onClick",value:function(){this.props.toggleActivityFlexpane()}},{key:"startToastTimer",value:function(){var e=this,t=this.props.logger;t.info("REACTIONS_TOAST","Got next reaction, toasting"),this.toastTimer=setTimeout(function(){t.debug("REACTIONS_TOAST","Toasting done, starting wait period"),e.setState(function(e){return Z()({},e,{waiting:!0})})},3e3)}},{key:"startWaitTimer",value:function(){var e=this,t=this.props.logger;t.debug("REACTIONS_TOAST","Entering wait period"),this.waitTimer=setTimeout(function(){t.debug("REACTIONS_TOAST","Wait period done, shifting toast"),e.setState(function(e){return Z()({},e,{waiting:!1})}),e.props.shiftToast()},400)}},{key:"shouldShowToast",value:function(){return this.props.currentToast&&!this.state.waiting}},{key:"renderTipText",value:function(){return this.props.isActive?nm.t("Hide Activity"):nm.t("Show Activity")}},{key:"renderTip",value:function(){var e=this.props,t=e.currentToast;if(!e.featureClassicNav)return null;if(this.shouldShowToast())return h.a.createElement(tm,t);var n=this.renderTipText(),a=!(at.a.chrome&&!ze.V)&&h.a.createElement("span",{className:"p-classic_nav__tip_shortcut"},Object(qe.p)()?"\u2318\u21e7M":"Ctrl+Shift+M");return h.a.createElement(p.Fragment,null,n,a)}},{key:"render",value:function(){var e=this.props,t=e.currentToast,n=e.isActive,a=e.stopAnimations,r=this.shouldShowToast()&&h.a.createElement(Mn.b,{text:":"+t.emoji+":",emojiSize:Mn.a.LARGE,className:"p-classic_nav__right__activity__toast"}),i=this.renderTip(),o=f()("p-classic_nav__right__activity__container",{"p-classic_nav__right__activity__container--no_animation":a}),s=f()({"p-classic_nav__right__button":!0,"p-classic_nav__right__button--activity":!0,"p-classic_nav__right__button--active":n,"p-classic_nav__right__activity":!0,"p-classic_nav__right__activity--toasting":this.shouldShowToast(),"p-classic_nav__no_drag":!0});return h.a.createElement("div",{className:o},h.a.createElement(le.c,{position:"bottom-right",tip:i},h.a.createElement(Re.c,{className:s,onClick:this.onClick,"aria-label":this.renderTipText()},h.a.createElement(se.b,{type:"mentions",className:"p-classic_nav__right__activity__icon"}))),r)}}]),t}(p.Component);rm.displayName="BaseActivityButton",rm.defaultProps=am;var im=Object(_.b)(function(e){return{isActive:"activity"===Object(O.h)(e),featureClassicNav:Object(y.i)(e,"feature_classic_nav"),stopAnimations:!Object(ue.h)(e,"a11y_animations"),logger:Object(ut.a)({state:e})}},function(e){return{toggleActivityFlexpane:function(){return e(Ke.q.apply(void 0,arguments))},shiftToast:function(){return e(Jh.e.apply(void 0,arguments))}}})(rm),om=(m.b.string.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderButton",value:function(e){var t=Object(Jh.c)(e);return h.a.createElement(im,{currentToast:t})}},{key:"render",value:function(){var e=Object(g.getStoreInstanceByTeamId)(this.props.teamId);return h.a.createElement(Xh.a,{store:e,render:this.renderButton})}}]),t}(p.Component));om.displayName="ActivityButton";var sm=Object(_.b)(function(e){return{teamId:Object(v.b)(e)}})(om),lm=new x.b("classic_nav"),cm=(m.b.bool,m.b.bool,m.b.func,m.b.func,{isActive:!1,featureClassicNav:!1,showStarredItemsList:d.a,closeFlexpane:d.a}),um=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.isActive?this.props.closeFlexpane():this.props.showStarredItemsList()}},{key:"render",value:function(){var e=this.props,t=e.isActive;if(!e.featureClassicNav)return null;var n=t?lm.t("Hide Starred Items"):lm.t("Show Starred Items"),a=h.a.createElement(p.Fragment,null,n,h.a.createElement("span",{className:"p-classic_nav__tip_shortcut"},Object(qe.p)()?"\u2318\u21e7S":"Ctrl+Shift+S")),r=f()({"p-classic_nav__right__button":!0,"p-classic_nav__right__button--stars":!0,"p-classic_nav__right__button--active":t,"p-classic_nav__no_drag":!0});return h.a.createElement(le.c,{position:"bottom-right",tip:a},h.a.createElement(Re.c,{className:r,onClick:this.onClick},h.a.createElement(se.b,{type:"star-o"})))}}]),t}(p.Component);um.displayName="StarsButton",um.defaultProps=cm;var dm=Object(_.b)(function(e){return{isActive:"starred_items"===Object(O.h)(e),featureClassicNav:Object(y.i)(e,"feature_classic_nav")}},function(e){return{showStarredItemsList:function(){return e(Ke.k.apply(void 0,arguments))},closeFlexpane:function(){return e(Ke.a.apply(void 0,arguments))}}})(um),pm=n("qcAq"),hm=n("qSXi"),mm=n("9gxL"),bm=n("/X+W"),fm=n("rtjy"),_m=function(e){return{id:e.frecencyId,action:e}},gm=Object(ot.b)("Search global actions (shortcuts) in Redux store",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).query,a=void 0===n?"":n,r=t(),i=Object(mm.b)(r).actions,o=[].concat(Le()(i.map(hm.a)));return o=o.filter(function(e){return Object(hm.b)(e,Object(bm.a)(a))}),o=(o=Object(fm.d)(r,{query:a,list:o.map(_m)})).map(function(e){return e.action})});gm.propTypes={query:m.b.string};var vm=Object(ot.b)("Search shortcuts, returns as Promise",function(e,t,n){var a=e(gm(n));return Promise.resolve(a)});vm.propTypes=gm.propTypes;var ym=vm,km=n("YfA1"),Om=n("cTBa"),jm=n("Rrdp"),Cm=n("V/As"),Em=(Pu.a.MessageAction.isRequired,m.b.string,m.b.string,Pu.a.maybeUnknown(Pu.a.App),m.b.string.isRequired,{className:"",pillarClassName:"",app:void 0}),wm=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["renderEnter","renderIcon","renderIconMaybe"]),n}return u()(t,e),o()(t,[{key:"renderIcon",value:function(){var e=this.props,t=e.action,n=e.app,a=e.defaultAppIcon,r=n&&n.icons||t.iconSet;if(r){var i=Object(Cm.a)({icons:r},56,a);return h.a.createElement("img",{alt:"",className:"p-shortcuts__icon",src:i})}return t.iconType?h.a.createElement(se.b,{type:t.iconType}):null}},{key:"renderIconMaybe",value:function(e){return e?h.a.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},e):null}},{key:"renderEnter",value:function(){var e=this.props,t=e.className,n=e.pillarClassName,a=f()(t,"c-menu_item__enter",xl()({},n+"__enter",n));return h.a.createElement(se.a,{type:"enter",className:a,"data-qa":"menu_item_enter",role:"presentation"})}},{key:"render",value:function(){var e,t=this.props,n=t.action,a=t.app,r=t.className,i=t.pillarClassName,o=f()(r,"c-menu_item__button","c-button-unstyled",(e={"c-menu_item__button--danger":n.danger},xl()(e,""+i,i),xl()(e,i+"--danger",n.danger&&i),e)),s=a&&a.name||n.description;return!s&&a&&(s=h.a.createElement(jm.a,{type:Object(zr.d)(a)?"unknown":"non-existent"})),h.a.createElement("div",{className:"c-menu_item__li",role:"presentation"},h.a.createElement("div",{className:o,"data-qa":n["data-qa"],key:n.id,id:n.id},this.renderIconMaybe(this.renderIcon()),h.a.createElement("div",{className:"c-menu_item__label",role:"presentation"},n.label||n.name,h.a.createElement("div",{className:"c-menu_item__description"},s)),this.renderEnter()))}}]),t}(p.PureComponent);wm.displayName="ShortcutsDialogItem",wm.defaultProps=Em;var Sm=Object(_.b)(function(e,t){var n=t.action;return{app:n&&n.appId&&Object(Ih.d)(e,n.appId),defaultAppIcon:Object(Ih.e)(e)}})(wm),Im=(n("N391"),new x.b("shortcuts")),Tm=(m.b.func,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.bool.isRequired,{onClose:d.a}),Nm=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={filterQuery:"",isLoading:!0,isError:!1,actions:[]},n.initClogged=!1,Object(T.a)(n,["onFilterUpdate","onSelectAction","renderSingleAction","handleSelectEvent","searchShortcuts"]),n.searchShortcutsDebounced=Object(Ll.a)(n.searchShortcuts,200,{leading:!0}),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.searchShortcutsDebounced()}},{key:"componentDidUpdate",value:function(){this.initClogged||this.state.isLoading||this.state.isError||(this.initClogged=!0)}},{key:"componentWillUnmount",value:function(){this.activePromise&&delete this.activePromise}},{key:"onSelectAction",value:function(e,t){var n=this.props,a=n.closeModal,r=n.handleShortcut;a(),this.props.onClose&&this.props.onClose(e),r(t),this.props.recordShortcutFrecencyEvent({action:t,query:this.state.filterQuery})}},{key:"onFilterUpdate",value:function(e){this.setState(function(){return{filterQuery:e}},this.searchShortcutsDebounced)}},{key:"searchShortcuts",value:function(){var e=this,t=this.props.searchShortcuts({query:this.state.filterQuery}).then(function(n){e.activePromise===t&&e.setState(function(){return{actions:n,isError:!1,isLoading:!1}})}).catch(function(){e.setState(function(){return{isError:!0,isLoading:!1}})});this.activePromise=t}},{key:"handleSelectEvent",value:function(e,t,n){this.onSelectAction(n,t.props.action)}},{key:"renderTitle",value:function(e){return h.a.createElement("div",{className:"p-shortcuts_dialog__title","data-qa-shortcuts-dialog-title":!0},h.a.createElement("div",{className:"p-shortcuts_dialog__title_text"},e))}},{key:"renderLoading",value:function(){return h.a.createElement("div",{className:"p-shortcuts_dialog__loader"},h.a.createElement(Yr.a,null))}},{key:"renderSingleAction",value:function(e){return{label:h.a.createElement(Sm,{key:e.id,pillarClassName:"p-shortcuts_dialog_option",action:e}),value:e.id}}},{key:"renderSelect",value:function(){if(!this.props.featureAppActionsGlobal)return null;var e=Im.t("Search shortcuts");return h.a.createElement(Om.b,{"data-qa":"shortcuts-dialog-list",isAlwaysOpen:!0,usePlaceholderOption:!1,autoSelectFirstOption:!0,focusInputOnMount:!0,placeholder:e,icon:"search",id:"p-shortcuts_dialog__select",className:"p-shortcuts_dialog__select",pillarClassName:"p-shortcuts_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(bo.a)(this.state.actions,this.renderSingleAction),optionsRowHeight:64})}},{key:"render",value:function(){var e=this.state.isLoading;if(!this.props.featureAppActionsGlobal)return null;var t=Im.t("Build your own!"),n=Im.t("Use a shortcut");return h.a.createElement(lr.a,{contentLabel:n,className:"p-shortcuts_dialog",overlayClassName:"p-shortcuts_dialog__overlay",footerIcon:"external-link",footerLink:"/workflow-builder",footerText:t,goOnEnterPressed:!1,onCancel:this.props.onClose,showCloseButton:!1,showCancelButton:!1,showGoButton:!1,title:this.renderTitle(n),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:!1},e?this.renderLoading():this.renderSelect())}}]),t}(p.PureComponent);Nm.displayName="ShortcutsDialog",Nm.defaultProps=Tm;var Rm=Object(_.b)(function(e){return{clogger:Object(ye.a)({state:e}),featureAppActionsGlobal:Object(y.i)(e,"feature_app_actions_global")}},function(e){return{closeModal:function(){return e(Object(st.a)())},searchShortcuts:function(){return e(ym.apply(void 0,arguments))},recordShortcutFrecencyEvent:function(t){return e(Object(pm.a)(t))},handleShortcut:function(t){return e(Object(km.b)({actionId:t.id,appId:t.appId}))}}})(Nm),Am=Object(ot.b)("Open app shortcuts dialog",function(e){var t=h.a.createElement(Rm);e(Object(st.e)({element:t}))}),Pm=new x.b("classic_nav"),Mm=(m.b.bool,m.b.bool,m.b.func,{featureClassicNav:!1,featureAppActionsGlobal:!1,browseShortcuts:d.a}),Dm=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.browseShortcuts()}},{key:"render",value:function(){var e=this.props,t=e.featureClassicNav,n=e.featureAppActionsGlobal;if(!t||!n)return null;var a=Pm.t("Show Shortcuts"),r=f()("p-classic_nav__right__button","p-classic_nav__right__button--shortcuts","p-classic_nav__no_drag");return h.a.createElement(le.c,{position:"bottom-right",tip:a},h.a.createElement(Re.c,{className:r,onClick:this.onClick},h.a.createElement(se.b,{type:"rocket"})))}}]),t}(p.Component);Dm.displayName="ShortcutsButton",Dm.defaultProps=Mm;var xm=Object(_.b)(function(e){return{featureClassicNav:Object(y.i)(e,"feature_classic_nav"),featureAppActionsGlobal:Object(y.i)(e,"feature_app_actions_global")}},function(e){return{browseShortcuts:function(){return e(Am.apply(void 0,arguments))}}})(Dm),Lm=n("iqSe"),Fm=n("LWrH"),Bm=new x.b("classic_nav"),qm=(m.b.object.isRequired,m.b.string,m.b.bool,m.b.bool,m.b.bool,m.b.number,m.b.number,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.string,{currentUserId:void 0,isEnterprise:!1,isUserRestricted:!1,isPaid:!1,helpTicketsCount:0,whatsNewCount:0,featureClassicNav:!1,featureCalendarSimpleAgendaView:!1,showFileList:d.a,showDownloads:d.a,showMemberDirectory:d.a,showUserGroupList:d.a,showWhatsNew:d.a,showKeyboardShortcuts:d.a,openHelpModal:d.a,showUserCalendar:d.a,keyboardLocale:null}),Um=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.menuProps,a=t.currentUserId,r=t.isEnterprise,i=t.isUserRestricted,o=t.isPaid,s=t.helpTicketsCount,l=t.whatsNewCount,c=t.featureClassicNav,u=t.featureCalendarSimpleAgendaView,d=t.keyboardLocale;if(!c)return null;var p=Object(x.g)("/",{kb:d}),m=[{label:Bm.t("Your calendar"),icon:h.a.createElement(se.b,{type:"all-files-alt"}),click:this.props.showUserCalendar,show:u},{key:"files",label:Bm.t("Files"),icon:h.a.createElement(se.b,{type:"all-files-alt"}),click:function(){return e.props.showFileList({user:a})},show:!0},{key:"downloads",label:Bm.t("Downloads"),icon:h.a.createElement(se.b,{type:"cloud-download"}),click:function(){return e.props.showDownloads()},show:ze.V},{type:"separator",show:!0},{key:"team-directory",label:r?Bm.t("Organization Directory"):Bm.t("Workspace Directory"),icon:h.a.createElement(se.b,{type:"team-directory"}),shortcut:!at.a.firefox&&(Object(qe.p)()?"\u2318\u21e7E":"Ctrl+Shift+E"),click:this.props.showMemberDirectory,show:!0},{key:"user-groups",label:Bm.t("User Groups"),icon:h.a.createElement(se.b,{type:"user-groups"}),click:function(){return e.props.showUserGroupList()},show:!i&&o},{type:"separator",show:!0},{key:"whats-new",label:Bm.t("What\u2019s New"),icon:h.a.createElement(se.b,{type:"emoji-celebration"}),click:function(){return e.props.showWhatsNew()},show:!0,badgeCount:l,dataQa:"whats_new_menu_item"},{key:"keyboard-shortcuts",label:Bm.t("Keyboard Shortcuts"),icon:h.a.createElement(se.b,{type:"keyboard"}),shortcut:Object(qe.p)()?"\u2318"+p:"Ctrl+"+p,click:function(){return e.props.showKeyboardShortcuts()},show:!0},{key:"help",label:Bm.t("Help"),icon:h.a.createElement(se.b,{type:"question-circle"}),click:function(){return e.props.openHelpModal({trigger:"flex_menu"})},show:!0,badgeCount:s,dataQa:"help_center_menu_item"}].filter(function(e){return e.show});return h.a.createElement(ie.a,Z()({},n,{menuClassNames:"p-classic_nav__right__flexpanes_menu",template:m,stripTerminalSeparators:!0,width:Object(qe.p)()?void 0:360}))}}]),t}(p.Component);Um.displayName="FlexpanesMenu",Um.defaultProps=qm;var Hm=Object(_.b)(function(e){return{currentUserId:Object(y.b)(e),isEnterprise:Object(y.l)(e),isUserRestricted:Object(ne.xb)(Object(Ue.b)(e)),isPaid:Object(te.B)(Object($.d)(e)),helpTicketsCount:Object(Lm.d)(e),whatsNewCount:Object(qh.e)(e),featureClassicNav:Object(y.i)(e,"feature_classic_nav"),featureCalendarSimpleAgendaView:Object(y.i)(e,"feature_calendar_simple_agenda_view")}},function(e){return{showFileList:function(){return e(Ke.g.apply(void 0,arguments))},showDownloads:function(){return e(Ke.f.apply(void 0,arguments))},showMemberDirectory:function(){return e(Ke.i.apply(void 0,arguments))},showUserGroupList:function(){return e(Ke.o.apply(void 0,arguments))},showWhatsNew:function(){return e(Ke.p.apply(void 0,arguments))},showKeyboardShortcuts:function(){return e(Ke.h.apply(void 0,arguments))},openHelpModal:function(){return e(Ve.a.apply(void 0,arguments))},showUserCalendar:function(){return e(Ke.m.apply(void 0,arguments))}}})(Um),Gm=Object(Fm.a)(Hm),Wm=new x.b("classic_nav"),Km=(m.b.number,m.b.bool,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderMenu=n.renderMenu.bind(n),n}return u()(t,e),o()(t,[{key:"maybeRenderBadge",value:function(){var e=this.props.helpTicketsCount;if(!e)return null;var t=e>9?"9+":String(e);return h.a.createElement("span",{className:"p-classic_nav__right__help_count","data-qa":"help_ticket_count"},t)}},{key:"renderMenu",value:function(e){return h.a.createElement(Gm,{menuProps:e})}},{key:"render",value:function(){if(!this.props.featureClassicNav)return null;var e=f()("p-classic_nav__right__button","p-classic_nav__right__button--flexpanes","p-classic_nav__no_drag",{"p-classic_nav__right__button--flexpanes-help-count":!!this.props.helpTicketsCount});return h.a.createElement(ie.e,{position:"bottom-right",renderMenu:this.renderMenu,allowanceX:8},h.a.createElement(le.c,{tip:Wm.t("More Items"),position:"bottom-right"},h.a.createElement(Re.c,{className:e,"aria-label":Wm.t("More Items")},h.a.createElement(se.b,{type:"vertical-ellipsis"}),this.maybeRenderBadge())))}}]),t}(p.Component));Km.displayName="FlexpanesButton",Km.defaultProps={helpTicketsCount:0,featureClassicNav:!1};var Vm=Object(_.b)(function(e){return{helpTicketsCount:Object(Lm.d)(e),featureClassicNav:Object(y.i)(e,"feature_classic_nav")}})(Km),zm=new x.b("whats_new"),Ym=(m.b.bool.isRequired,m.b.number.isRequired,m.b.number,m.b.object.isRequired,m.b.bool.isRequired,m.b.func.isRequired,{latestNewsTimestamp:void 0}),Qm=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.updateCount&&this.doClogBadge()}},{key:"componentDidUpdate",value:function(e){!e.updateCount&&this.props.updateCount&&this.doClogBadge()}},{key:"doClogBadge",value:function(){var e=this.props,t=e.clogger,n=e.latestNewsTimestamp;t.track(ve.k.WHATSNEW_ACTION,{action:"do_badge",trigger:String(n),step:String(n)})}},{key:"renderCount",value:function(){var e=this.props.updateCount,t=e>9?"9+":String(e),n=zm.t("{num_updates} Updates",{num_updates:t});return h.a.createElement(p.Fragment,null,h.a.createElement("span",{className:"p-classic_nav__right__whats_new_num_only","data-qa":"whats_new_btn_count"},t),h.a.createElement("span",{className:"p-classic_nav__right__whats_new_num_updates","data-qa":"whats_new_btn_count_full"},n))}},{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.updateCount;if(!e.featureClassicNav)return null;if(!n)return null;if(t)return null;var a=zm.t("What\u2019s New");return h.a.createElement(le.c,{position:"bottom-right",tip:a},h.a.createElement(Re.c,{className:"p-classic_nav__right__button p-classic_nav__right__whats_new",onClick:this.props.showWhatsNew,"data-qa":"whats_new_button"},h.a.createElement(se.b,{type:"emoji-celebration"}),this.renderCount()))}}]),t}(p.PureComponent);Qm.displayName="WhastNewButton",Qm.defaultProps=Ym;var Jm=Object(_.b)(function(e){return{isActive:"whats_new"===Object(O.h)(e),featureClassicNav:Object(y.i)(e,"feature_classic_nav"),updateCount:Object(qh.e)(e),latestNewsTimestamp:Object(qh.d)(e),clogger:Object(ye.a)({state:e})}},function(e){return{showWhatsNew:function(){return e(Ke.p.apply(void 0,arguments))}}})(Qm),Xm=(n("tLal"),m.b.string,m.b.bool,m.b.number.isRequired,m.b.bool.isRequired,{secondaryView:void 0,isWindowFrameless:!1}),Zm=function(e){var t=e.secondaryView,n=e.isWindowFrameless,a=e.whatsNewCount,r=e.featureAppActionsGlobal,i=f()({"p-classic_nav__right_header":!0,"p-classic_nav__right_header--context_pane":t,"p-classic_nav__right_header--frameless":n,"p-classic_nav__right_header--whats_new_showing":a>0,"p-classic_nav__drag":n});return h.a.createElement("div",{className:i},h.a.createElement(Qh,null),h.a.createElement(sm,null),h.a.createElement(dm,null),r&&h.a.createElement(xm,null),h.a.createElement(Vm,null),h.a.createElement(Jm,null))};Zm.displayName="RightHeader",Zm.defaultProps=Xm;var $m=Object(_.b)(function(e){return{secondaryView:Object(O.h)(e),isWindowFrameless:Object(C.j)(e),whatsNewCount:Object(qh.e)(e),featureAppActionsGlobal:Object(y.i)(e,"feature_app_actions_global")}})(Zm),eb=(n("05X0"),m.b.func,{renderSonicMenu:d.a}),tb=function(e){var t=e.renderSonicMenu;return h.a.createElement("div",{className:"p-classic_nav"},h.a.createElement(En,{renderSonicMenu:t}),h.a.createElement(Bh,null),h.a.createElement($m,null))};tb.displayName="ClassicNav",tb.defaultProps=eb;var nb=tb,ab=n("kyO0"),rb=n("aWll"),ib=n("uWmS"),ob=n("fNU1"),sb=n("bYYE"),lb=n("hPvj"),cb=n("0Syo"),ub=Object(ot.b)("Ensure channels with drafts exist in our model",function(e,t){var n=t(),a=Object(ut.a)({state:n,label:"DRAFTS"}),r=Object(Me.a)()?Object(lb.c)(n):Object(cb.e)();Object(sa.a)(r)?a.info("There are no channels with drafts"):(a.info("Ensuring we have channel objects for all channels with drafts"),r.forEach(function(e){Object(re.d)(n,e)}))});ub.propTypes=null;var db=ub,pb=n("eK5+"),hb=n("tVnY"),mb=n("Dpde"),bb=n("UF3u"),fb=n("Z3Pq"),_b=n("Olm7"),gb=n("xWuZ"),vb=n("XIp8"),yb=n("OL4R"),kb=Object(Si.b)(function(e){var t=Object($.d)(e);return Object(te.B)(t)?Object(ue.h)(e,"channel_sort"):"alphabetical"}),Ob=n("icQl"),jb=n("Z7Ay"),Cb=["drafts","starred","sharedChannels","channels","orgWideChannels","ims","apps"],Eb={drafts:{channelsOrdered:[],hasHeading:!0},starred:{channelsOrdered:[],hasHeading:!0},sharedChannels:{channelsOrdered:[],hasHeading:!0},channels:{channelsOrdered:[],hasHeading:!0},orgWideChannels:{channelsOrdered:[],hasHeading:!0},ims:{channelsOrdered:[],hasHeading:!0},apps:{channelsOrdered:[],hasHeading:!0}},wb=["defaultMentions","default","sharedMentions","shared","privateMentions","private","slackbot","you","imsMentions","ims"],Sb=Object(yb.a)(wb),Ib={default:wb.map(function(){return[]}),muted:wb.map(function(){return[]}),suggested:wb.map(function(){return[]})},Tb=function(e){return e&&e.has_draft},Nb=function(e){var t=e.channel,n=e.members,a=e.isCurrentlySelected,r=e.isMuted,i=e.shouldHideReadChannels,o=e.shouldHideReadChannelsUnlessStarred,s=e.featureReactMessages,l=e.hasDraft,c=e.teamId,u=e.isSuggested,d=e.showAppDmSuggestions;if(Object(he.ab)(t))return!1;if(Object(he.Kb)(t))return!1;if(a)return!0;if(Object(he.V)(t))return!1;if(Object(he.fb)(t,n[Object(he.G)(t)]))return!1;if(!Object(he.kb)(t)&&!u)return!1;if((Object(he.eb)(t)||Object(he.lb)(t))&&!Object(he.ob)(t)&&Object(he.zb)(t)&&!l)return!1;if(Object(he.eb)(t)){var p=[Object(he.G)(t)];if(p[0]||Object(ut.a)({teamId:c}).error("SIDEBAR-SECTIONS","IM "+t.id+" is missing its associated user"),!Object(ne.V)({members:n,dangerouslyOverrideCreateSelectorSanityCheck:!0},p))return!1}if(Object(he.lb)(t)){var h=Object(he.H)(t);if(h&&h.length||Object(ut.a)({teamId:c}).error("SIDEBAR-SECTIONS","MPIM "+t.id+" is missing its associated members"),!Object(ne.V)({members:n,teamId:c,dangerouslyOverrideCreateSelectorSanityCheck:!0},h))return!1}return!(!o||!Object(he.Fb)(t))||(!!l||(!(!r||!Object(he.Vb)(t)||s)||!(d&&i&&Object(he.U)(t,n)&&Object(he.Fb)(t)&&Object(he.zb)(t))&&(!(!d||!Object(he.U)(t,n))||(!o&&!i||!Object(he.zb)(t)))))},Rb={},Ab={},Pb={},Mb=Object(Ob.a)(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channels,n=e.currentlySelectedId,a=e.mutedChannels,r=e.members,i=e.sidebarBehaviorPref,o=e.featureReactMessages,s=e.draftChannelIds,l=e.teamId,c=e.suggestedChannelIds,u=e.showAppDmSuggestions,d="hide_read_channels"===i,p="hide_read_channels_unless_starred"===i,h=[],m=!1,b=!1,f=!1,_=Object.keys(t),g=0;g<_.length;g+=1){var v=t[_[g]],y=-1!==s.indexOf(v.id);Object(Me.a)()||(y=Tb(v)),Nb({channel:v,members:r,isCurrentlySelected:n===v.id,isMuted:!!a[v.id],shouldHideReadChannels:d,shouldHideReadChannelsUnlessStarred:p,featureReactMessages:o,hasDraft:y,teamId:l,isSuggested:-1!==c.indexOf(v.id),showAppDmSuggestions:u})&&h.push(v),m||(m=Object(he.Db)(v)&&(Object(he.kb)(v)||n===v.id)),b||(b=Object(he.qb)(v)&&!Object(he.xb)(v)),f||(f=Object(he.Fb)(v))}return{channelsVisible:h,belongsToOrPreviewingAnySharedChannels:m,belongsToAnyOrgChannels:b,hasAStarredChannel:f}},2);function Db(e){var t=e.members,n=e.appChannels,a=e.flatSidebarSections,r=e.dismissedAppMembers,i=e.maxSuggestionsCount,o=void 0===i?10:i,s=Object(fb.a)(n,he.G),l=n.reduce(function(e,t){return a.starred&&-1!==a.starred.channelsOrdered.indexOf(t.id)||e.push(t.id),e},[]),c=[],u=o-l.length;if(u>0){var d=Object.values(t).reduce(function(e,t){var n=t.is_bot,a=t.id;return!n||s[a]||r[a]||Object(ne.eb)(t)||e.push(t),e},[]);d.sort(function(e,t){return Object(x.o)(e.name,t.name)}),c=d.map(function(e){return e.id}).slice(0,u)}return l.concat(c)}var xb=Object(Ob.a)(function(e){var t=e.channelsSorted,n=e.belongsToOrPreviewingAnySharedChannels,a=e.members,r=e.mutedChannels,i=e.draftChannelIds,o=e.suggestedChannelIds,s=e.currentUserId,l=e.currentlySelectedId,c=e.teamId,u=e.sortPref,d=e.isAppSpaceEnabled,p=e.shouldSeparateSharedChannels,h=e.shouldSeparateOrgWideChannels,m=e.shouldSeparatePrivateChannels,b=e.dismissedAppMembers,f=e.featureChannelSidebarDraftsSection,_=e.featureReactMessages,v=e.featureSilenceAppDMs,k=e.showAppDmSuggestions,O={},j=[],C=Cb.concat();C.forEach(function(e){O[e]=Z()({},Eb[e]),O[e].channelsOrdered=Object(vb.a)(Ib)});var E=[],w=[];t.forEach(function(e){Object(he.eb)(e)&&E.push(Object(he.G)(e));var t=Object(he.U)(e,a),n=function(e){var t=e.channel,n=e.isApp,a=e.isAppSpaceEnabled,r=e.shouldSeparateSharedChannels,i=e.shouldSeparateOrgWideChannels,o=e.draftChannelIds,s=e.featureChannelSidebarDraftsSection,l=e.currentlySelectedId,c=e.teamId,u=Object(g.getStateByTeamId)(c);return s&&(Object(Ei.a)(o,t.id)||Tb(t))&&(Object(y.i)(u,"feature_announce_only_websocket")||Object(It.q)(u,t.id))&&(l!==t.id||Object(Ei.a)(Ab[c],t.id)||Rb[c]||(Pb[c]=t.id),Pb[c]&&l!==Pb[c]&&delete Pb[c],t.id!==Pb[c])?"drafts":Object(he.Fb)(t)?"starred":Object(he.Db)(t)&&r?"sharedChannels":Object(he.qb)(t)&&!Object(he.xb)(t)&&i?"orgWideChannels":n&&a?"apps":Object(he.eb)(t)||Object(he.lb)(t)?"ims":"channels"}({channel:e,isApp:t,isAppSpaceEnabled:d,shouldSeparateSharedChannels:p,shouldSeparateOrgWideChannels:h,draftChannelIds:i,featureChannelSidebarDraftsSection:f,currentlySelectedId:l,teamId:c});t&&j.push(e);var b=!!r[e.id],k=Object(he.p)(e,b,_,v,Object(he.U)({channel:e,members:a})),C=function(e){var t=e.channel,n=e.currentUserId,a=e.shouldSeparatePrivateChannels,r=e.shouldSeparateSharedChannels,i=e.shouldBumpMention;return Object(he.Eb)(t)?Sb.slackbot:Object(he.Nb)(t,n)?Sb.you:Object(he.eb)(t)||Object(he.lb)(t)?i?Sb.imsMentions:Sb.ims:a&&Object(he.xb)(t)?i?Sb.privateMentions:Sb.private:r&&Object(he.Db)(t)?i?Sb.sharedMentions:Sb.shared:i?Sb.defaultMentions:Sb.default}({channel:e,currentUserId:s,shouldSeparatePrivateChannels:m,shouldSeparateSharedChannels:p,shouldBumpMention:"priority"===u&&k>0}),S=void 0;S=-1!==o.indexOf(e.id)?"suggested":b?"muted":"default",O[n].channelsOrdered[S][C].push(e.id),Object(Me.a)()||Tb(e)&&w.push(e.id)});var S={};o.forEach(function(e,t){S[e]=t}),O.channels.channelsOrdered.suggested.forEach(function(e){e.sort(function(e,t){return S[e]>S[t]?1:-1})}),Ab[c]=[].concat(Le()(i),w);var I=Object(Ra.a)(O,function(e){return Z()({},e,{channelsOrdered:Object(gb.a)([].concat(Le()(e.channelsOrdered.default),Le()(e.channelsOrdered.muted),Le()(e.channelsOrdered.suggested)))})});return(!f||I.drafts.channelsOrdered.length<1)&&(delete I.drafts,Object(_b.a)(C,function(e){return"drafts"===e})),I.starred.channelsOrdered.length<1&&(delete I.starred,Object(_b.a)(C,function(e){return"starred"===e})),p&&n||(delete I.sharedChannels,Object(_b.a)(C,function(e){return"sharedChannels"===e})),(!h||I.orgWideChannels.channelsOrdered.length<1)&&(delete I.orgWideChannels,Object(_b.a)(C,function(e){return"orgWideChannels"===e})),d?k&&(I.apps={hasHeading:!0,channelsOrdered:[],membersOrdered:Db({members:a,appChannels:j,flatSidebarSections:I,dismissedAppMembers:b})}):(delete I.apps,Object(_b.a)(C,function(e){return"apps"===e})),{sidebarSectionsOrdered:C,sidebarSections:I,idsNeedingPresenceSubscription:E}},3),Lb=function(e){var t=Object(v.b)(e),n=Object(re.b)(e),a=Object(wn.b)(e),r=Object(Ue.a)(e),i=Object(lb.c)(e),o=Object(he.Q)(e),s=Object(k.a)(e),l=Object(y.b)(e),c=function(e){return Object(ue.h)(e,"sidebar_behavior")}(e),u=function(e){return Object(ue.h)(e,"separate_private_channels")}(e),d=function(e){return!Object(y.i)(e,"feature_channel_is_remove_create_shared_channel")&&Object(ue.h)(e,"separate_shared_channels")}(e),p=function(e){return Object(ue.h)(e,"ent_org_wide_channels_sidebar")}(e),h=Object(ue.e)(e),m=Object(Ih.f)(e),b=Object(y.p)(e),f=Object(y.o)(e),_=function(e){return Object(y.i)(e,"feature_channel_sidebar_drafts_section")}(e),g="variant"===Object(Cs.c)(e,"show_more_apps_in_sidebar_new_and_free");void 0===Rb[t]?Rb[t]=!0:Rb[t]&&(Rb[t]=!1);var O=Mb({channels:n,currentlySelectedId:s,mutedChannels:a,members:r,sidebarBehaviorPref:c,featureReactMessages:b,draftChannelIds:i,teamId:t,suggestedChannelIds:o,showAppDmSuggestions:g}),j=O.channelsVisible,C=O.belongsToOrPreviewingAnySharedChannels,E={};j.forEach(function(t){t&&t.id&&(E[t.id]=Object(he.x)(e,t,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}))});var w=function(e,t){return Object(x.o)(e&&E[e.id],t&&E[t.id])},S=function(e,t){var n=e.priority||-1,a=t.priority||-1;return n===a?w(e,t):a-n},I=kb(e),T=j.sort(function(e){return"priority"===e?S:w}(I));return xb({channelsSorted:T,belongsToOrPreviewingAnySharedChannels:C,members:r,mutedChannels:a,draftChannelIds:i,suggestedChannelIds:o,currentUserId:l,currentlySelectedId:s,teamId:t,sortPref:I,isAppSpaceEnabled:m,shouldSeparateSharedChannels:d,shouldSeparateOrgWideChannels:p,shouldSeparatePrivateChannels:u,dismissedAppMembers:h,featureChannelSidebarDraftsSection:_,featureReactMessages:b,featureSilenceAppDMs:f,showAppDmSuggestions:g})};Object(jb.a)("channelSidebar",{getDraftChannelToWithhold:function(){return Pb}});var Fb=n("peh1"),Bb=n("FHcd"),qb={id:null,type:"topPadding",height:12},Ub={id:null,type:"spacer",height:18},Hb={id:"Vquick_switcher",type:"quickswitcherButton",height:52},Gb={id:"Vall_unreads",type:"allUnreadsLink",height:26},Wb={id:"Vall_threads",type:"allThreadsLink",height:26},Kb={id:"Vsearch",type:"searchLink",height:26},Vb={id:null,type:"sectionHeading",name:"",height:26},zb={id:null,type:"folderHeading",name:"",height:26},Yb={id:null,type:"channel",index:null,height:26},Qb={id:null,type:"appDmSuggestion",index:null,height:26},Jb={id:null,type:"addAChannelLink",dim:!1,height:26},Xb={id:null,type:"invitePeopleLink",dim:!1,height:26},Zb={id:null,type:"installAppsLink",dim:!1,height:26},$b={id:null,type:"gdrivePromptLink",dim:!1,height:26},ef={id:null,type:"appSuggestionLinks",dim:!1,height:26},tf={id:null,type:"upgradeSlackLink",height:26},nf={id:null,type:"emptyState",index:null,height:26},af=Object(Fb.createSelector)([function(e){return e&&e.hasQuickswitcherButton},function(e){return e&&e.hasAllUnreadsLink},function(e){return e&&e.hasSearchLink},function(e){return e&&e.hasAddAChannelLink},function(e){return e&&e.hasInvitePeopleLink},function(e){return e&&e.hasGdrivePromptLink},function(e){return e&&e.appSuggestionsCount},function(e){return e&&e.hasUpgradeSlackLink},function(e){return e&&e.sidebarFiltersIsEnabled},function(e){return e&&e.sidebarSectionsOrdered},function(e){return e&&e.sidebarSections},function(e){return e&&e.sidebarFoldersIsEnabled},function(e){return e&&e.sidebarFolders},function(e){return e&&e.pages},function(e){return e&&e.featurePages},function(e){return e&&e.featureReactAllUnreads}],function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:{},d=arguments.length>11&&void 0!==arguments[11]&&arguments[11],p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:[],h=arguments.length>13&&void 0!==arguments[13]?arguments[13]:[],m=arguments.length>14&&void 0!==arguments[14]&&arguments[14],b=arguments.length>15&&void 0!==arguments[15]&&arguments[15],f=[],_={},g=0;e?f.push(Z()({},Hb,{scrollTop:g,scrollBottom:g+=Hb.height})):f.push(Z()({},qb,{scrollTop:g,scrollBottom:g+=qb.height})),t&&(m&&b?f.push({id:"Punreads",type:"pageLink",height:26,scrollTop:g,scrollBottom:g+=26}):f.push(Z()({},Gb,{scrollTop:g,scrollBottom:g+=Gb.height}))),f.push(Z()({},Wb,{scrollTop:g,scrollBottom:g+=Wb.height})),n&&f.push(Z()({},Kb,{scrollTop:g,scrollBottom:g+=Kb.height})),m&&h.filter(function(e){return-1===["Punreads"].indexOf(e.id)}).forEach(function(e){f.push({id:e.id,type:"pageLink",height:26,scrollTop:g,scrollBottom:g+=26})});var v=0;return d&&p.forEach(function(e){"folderHeading"!==Object(Tu.a)(f).type&&f.push(Z()({},Ub,{scrollTop:g,scrollBottom:g+=Ub.height})),f.push(Z()({},zb,{id:e.name,name:e.name})),e.channelIds.forEach(function(t){var n=!1;c.forEach(function(e){var a=(u[e]||{}).channelsOrdered||[];n=n||a.filter(function(e){return e===t}).length>0}),n&&(e.isCollapsed||(f.push(Z()({},Yb,{id:t,index:v,scrollTop:g,scrollBottom:g+=Yb.height,sectionName:e.name})),v+=1),_[t]=!0)})}),c.forEach(function(e){var t=u[e]||{},n=t.channelsOrdered||[];if(("sectionHeading"!==Object(Tu.a)(f).type||n.length>0)&&f.push(Z()({},Ub,{scrollTop:g,scrollBottom:g+=Ub.height})),t.hasHeading&&f.push(Z()({},Vb,{name:e,scrollTop:g,scrollBottom:g+=Vb.height,sectionName:e})),l&&t.hasHeading&&0===n.length&&f.push(Z()({},nf,{name:e,scrollTop:g,scrollBottom:g+=nf.height})),t.channelsOrdered.forEach(function(t){_[t]||(f.push(Z()({},Yb,{id:t,index:v,scrollTop:g,scrollBottom:g+=Yb.height,sectionName:e})),v+=1)}),"channels"===e&&a&&(f.push(Z()({},Ub,{scrollTop:g,scrollBottom:g+=Ub.height})),f.push(Z()({},Jb,{dim:!0,height:Jb.height,scrollTop:g,scrollBottom:g+=Jb.height}))),"ims"===e&&r&&(f.push(Z()({},Ub,{scrollTop:g,scrollBottom:g+=Ub.height})),f.push(Z()({},Xb,{dim:"dim"===r,height:Xb.height,scrollTop:g,scrollBottom:g+=Xb.height}))),"apps"===e){if(t.membersOrdered&&t.membersOrdered.forEach(function(t){var n=Object(Bb.a)(t)?Qb:Yb;f.push(Z()({},n,{id:t,index:v,scrollTop:g,scrollBottom:g+=n.height,sectionName:e})),v+=1}),f.push(Z()({},Ub,{scrollTop:g,scrollBottom:g+=Ub.height})),i&&f.push(Z()({},$b,{height:$b.height,scrollTop:g,scrollBottom:g+=$b.height})),Number.isFinite(o)&&o>0){var s=o*ef.height;f.push(Z()({},ef,{height:s,scrollTop:g,scrollBottom:g+=s}))}f.push(Z()({},Zb,{height:Zb.height,scrollTop:g,scrollBottom:g+=Zb.height}))}}),s&&(f.push(Z()({},nf,{scrollTop:g,scrollBottom:g+=nf.height})),f.push(Z()({},tf,{height:tf.height,scrollTop:g,scrollBottom:g+=tf.height})),f.push(Z()({},nf,{scrollTop:g,scrollBottom:g+=nf.height}))),f.push(Z()({},Ub,{scrollTop:g,scrollBottom:g+=Ub.height})),f.push(Z()({},Ub,{scrollTop:g,scrollBottom:g+=Ub.height})),{rows:f,rowsMap:Object(fb.a)(f,"id"),rowIds:Object(bo.a)(f,"id")}}),rf=new x.b("channel_sidebar"),of=qe.k?"A0BDLPR2L":"A6NL8MJ6Q",sf=function(e){return Object(aa.a)(e,"channelSidebar.gdrivePrompt.displayGdriveInstallPrompt")},lf=function(e){var t=sf(e),n=Object($.d)(e);return{link:Object(te.o)(n,"/apps/"+of),text:t?rf.t("Install {name}",{name:"Google Drive"}):rf.t("Connect {name}",{name:"Google Drive"}),label:rf.t("Dismiss {name} suggestion",{name:"Google Drive"}),dismissKey:t?"gdrive_install_prompt_dismissed":"gdrive_connect_prompt_dismissed",clogUiElement:t?"install_gdrive_prompt":"connect_gdrive_prompt"}},cf=function(e){var t=sf(e),n=function(e){return Object(aa.a)(e,"channelSidebar.gdrivePrompt.displayGdriveConnectPrompt")}(e);return t||n},uf=n("kMOi"),df=new x.b("channel_sidebar"),pf=function(e,t){var n=Object(rb.f)(e,t),a=Object(uf.b)(n),r=Object(uf.d)(n),i=function(e,t){var n=Object(rb.f)(e,t);return Object(uf.c)(n)}(e,t),o=Object($.d)(e);if(!a||!r)return{};var s="";return"ocal"!==t||i?"dropbox"!==t||i||(s="https://www.dropbox.com/landing/dropbox_slack"):s=Object(te.o)(o,"/interop/ocalapp/install"),{appId:a,isInstall:i,href:s||Object(te.o)(o,"/apps/"+a),text:i?df.t("Install {name}",{name:r}):df.t("Connect {name}",{name:r}),label:df.t("Dismiss {name} suggestion",{name:r}),dismissKey:i?t+"_install_prompt_dismissed":t+"_connect_prompt_dismissed",clogUiElement:i?"app_install_prompt":"app_connect_prompt"}},hf=function(e){return Object(rb.g)(e).length};function mf(e){var t=Object($.d)(e),n=Object(Ue.b)(e),a=Object(ne.s)(n),r=Object(y.i)(e,"feature_upgrade_slack_translations"),i=Object(ze.T)(),o=Object(te.v)(t),s=Object(ne.X)(n),l=!/@(gmail|yahoo|aol)\.com$/.exec(a)&&!/\.edu$/.exec(a);if(!(r&&!i&&o&&l&&s))return!1;var c="treatment"===Object(Cs.c)(e,"lc_sidebar_upgrade_cta"),u="treatment"===Object(Cs.c)(e,"lc_sidebar_upgrade_cta_existing_teams");return c||u}var bf=n("vPIQ"),ff=n("ukIz"),_f=n("F294"),gf=n("x4bP"),vf=n("RB1+"),yf=n("Po2o"),kf=n("+yap"),Of=n("2Y1Y"),jf=n("yt6e"),Cf=Object(ka.b)("TS.ui.jumper.start",function(){return null}),Ef=(Object(ka.b)("TS.ui.jumper.getSessionId",function(){return null}),n("vVZ5")),wf=new x.b("global_nav"),Sf=(m.b.bool,m.b.bool,m.b.func,{featureGlobalNav:!1,featureGlobalNavLayout:!1,maybeShowQuickSwitcher:d.a}),If=function(e){var t=e.featureGlobalNav,n=e.featureGlobalNavLayout;if(!t)return null;var a=Object(Me.a)()?e.maybeShowQuickSwitcher:Cf,r=h.a.createElement(Re.c,{className:"p-global_nav__sidebar_jumper",onClick:a},h.a.createElement(se.b,{type:"filter",className:"p-global_nav__sidebar_jumper_icon"}),wf.t("Go to\u2026",{note:"Used to open the quickswitcher. This label should as short as possible."})),i=f()("p-global_nav__sidebar",{"p-global_nav__sidebar--relayout":n});return h.a.createElement("div",{className:i},r)};If.displayName="SidebarHeader",If.defaultProps=Sf;var Tf=Object(_.b)(function(e){return{featureGlobalNav:Object(y.i)(e,"feature_global_nav"),featureGlobalNavLayout:Object(y.i)(e,"feature_global_nav_layout")}},function(e){return{maybeShowQuickSwitcher:function(){return e(Ef.a.apply(void 0,arguments))}}})(If),Nf=n("NR8Z"),Rf=(n("/6P7"),new x.b("channel_sidebar")),Af=(m.b.oneOf(["SHOW_BUTTON","HIDE_BUTTON","HIDE_BUTTON_PENDING"]),m.b.func,m.b.func,m.b.func,m.b.object.isRequired,m.b.func,m.b.bool,m.b.bool,{coachmarkState:void 0,setJumperCoachmarkState:d.a,setUserPrefByApi:d.a,maybeShowQuickSwitcher:d.a,openFromQuickSwitcherCmd:d.a,historyNavigationEnabled:!1,useHistoryNavigation:!1}),Pf=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hideCoachmark=n.hideCoachmark.bind(n),n.hideButton=n.hideButton.bind(n),n.onShowContinue=n.onShowContinue.bind(n),n.onShowSkip=n.onShowSkip.bind(n),n.onHideContinue=n.onHideContinue.bind(n),n.onHideSkip=n.onHideSkip.bind(n),n.onButtonClick=n.onButtonClick.bind(n),n}return u()(t,e),o()(t,[{key:"onShowContinue",value:function(e){e.stopPropagation(),this.clog("OK"),this.hideCoachmark()}},{key:"onShowSkip",value:function(e,t){switch(e.stopPropagation(),t){case"SKIP":return this.clog("SKIP"),this.hideButton();case"CLOSE":return this.clog("CLOSE"),this.hideCoachmark();default:return null}}},{key:"onHideContinue",value:function(e){e.stopPropagation(),this.clog("OK"),this.hideButton()}},{key:"onHideSkip",value:function(e,t){switch(e.stopPropagation(),t){case"SKIP":return this.clog("SKIP"),this.hideCoachmark();case"CLOSE":return this.clog("CLOSE"),this.hideButton();default:return null}}},{key:"onButtonClick",value:function(){this.props.openFromQuickSwitcherCmd({key:"button"})}},{key:"clog",value:function(e){var t=this.props,n=t.clogger,a={SHOW_BUTTON:"SIDEBAR_JUMPER_BUTTON_SHOW",HIDE_BUTTON:"SIDEBAR_JUMPER_BUTTON_HIDE"}[t.coachmarkState];n.track("SIDEBAR_JUMPER_COACHMARK",{contexts:{ui_context:{action:e,step:a}}})}},{key:"hideCoachmark",value:function(){this.props.setJumperCoachmarkState(null)}},{key:"hideButton",value:function(){this.hideCoachmark(),this.props.setUserPrefByApi({pref:"show_sidebar_quickswitcher_button",value:!1}),this.props.setUserPrefByApi({pref:"k_key_omnibox_auto_hide_count",value:5})}},{key:"maybeRenderCoachmark",value:function(e){var t={SHOW:{title:Rf.rt("Get around Slack faster <sparkles></sparkles>",null,function(e){var t=e.tag,n=e.key;return"sparkles"===t?h.a.createElement(Mn.b,{key:n,text:":sparkles:",emojiSize:Mn.a.MEDIUM}):null}),content:Rf.rt("To jump to a channel, person, or file \u2014 or even kick off a Slack search \u2014 try using the <strong>Quick Switcher</strong>. Summon it with this button or {shortcut}.",{shortcut:Object(qe.p)()?"\u2318K":"Ctrl+K",fallbackHash:"e5c4c0b492d4a5244f99eabd8b8d5bc558e93e55"}),skipLinkText:Rf.t("Hide the sidebar button"),continueButtonText:Rf.t("OK")},HIDE:{title:Rf.t("You\u2019re a pro at keyboard shortcuts"),content:Rf.rt("Looks like you\u2019ve gotten the hang of using {shortcut} to summon the Quick Switcher. If you\u2019d like, you can gain back some sidebar space by hiding the <strong>Jump to</strong> button.",{shortcut:Object(qe.p)()?"\u2318K":"Ctrl+K"}),skipLinkText:Rf.t("No thanks, I like the button"),continueButtonText:Rf.t("Hide Button")}},n={skipLinkPre:"",position:"right-bottom",shouldShow:!0,hasCloseButton:!1,className:"p-channel_sidebar__jumper_coachmark"};switch(this.props.coachmarkState){case"SHOW_BUTTON":return this.clog("IMPRESSION"),h.a.createElement(Nf.a,Z()({},n,t.SHOW,{onContinue:this.onShowContinue,onSkip:this.onShowSkip}),e);case"HIDE_BUTTON":return this.clog("IMPRESSION"),h.a.createElement(Nf.a,Z()({},n,t.HIDE,{onContinue:this.onHideContinue,onSkip:this.onHideSkip}),e);default:return e}}},{key:"render",value:function(){var e=this.props,t=e.historyNavigationEnabled,n=e.useHistoryNavigation,a=h.a.createElement(Re.c,{type:"button",className:"p-channel_sidebar__jumper",onClick:this.onButtonClick,"aria-label":Rf.t("Open the Quick Switcher to jump to a conversation.")},h.a.createElement("div",{className:"p-channel_sidebar__jumper_left"},h.a.createElement(se.a,{type:"filter",inherit:!0,align:"baseline",className:"p-channel_sidebar__jumper_icon"}),Rf.t("Jump to...",{note:"This label should be brief. It needs to fit in a 192px wide container."})),!n&&h.a.createElement("span",{className:"p-channel_sidebar__jumper_keys"},Object(qe.p)()?"\u2318K":"Ctrl+K"));return t?a:this.maybeRenderCoachmark(a)}}]),t}(p.Component);Pf.displayName="QuickswitcherButton",Pf.defaultProps=Af;var Mf=Object(_.b)(function(e){return{coachmarkState:Object(rb.h)(e),clogger:Object(ye.a)({state:e}),historyNavigationEnabled:Object(mb.a)(e),useHistoryNavigation:Object(mb.b)(e)}},function(e){return{setJumperCoachmarkState:function(){return e(rb.s.apply(void 0,arguments))},setUserPrefByApi:function(){return e(D.f.apply(void 0,arguments))},maybeShowQuickSwitcher:function(){return e(Ef.a.apply(void 0,arguments))},openFromQuickSwitcherCmd:function(){return e(Hh.e.apply(void 0,arguments))}}})(Pf),Df=0,xf=0,Lf=!0,Ff=Object(ut.b)({label:"HISTORY-NAVIGATION"}),Bf=function(){Lf?(Ff.info("Adding route to the history stack"),xf===Df?(xf+=1,Df+=1):Df=xf+=1):Lf=!0},qf=function(){return 1===xf},Uf=function(){return xf===Df};Object(jb.a)("history",{getHistoryLength:function(){return Df},getHistoryIndex:function(){return xf}});var Hf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fromKeyboardShortcut,a=t.elementName;Object(ye.a)({state:e}).track(ve.k.HISTORY_NAVIGATION,{contexts:{ui_context:{action:n?ve.v.KEYDOWN:ve.v.CLICK,ui_properties:{element_type:ve.j.BUTTON,element_name:a}}}})},Gf=Object(ot.b)("Go back in history",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.event,r=n.fromKeyboardShortcut,i=void 0!==r&&r;a&&a.preventDefault();var o=t(),s=Object(ut.a)({state:o,label:"HISTORY-NAVIGATION"});if(Object(mb.b)(o)){if(qf())return void s.debug("This is the beginning of the history stack \u2b05\ufe0f");s.debug("Moving back in history"),window.history.back(),1!==xf&&(Ff.info("Decrementing the users current position in the history stack"),xf-=1,Lf=!1),Hf(o,{fromKeyboardShortcut:i,elementName:"back"})}else s.debug("Moving back in history"),window.history.back(),Hf(o,{fromKeyboardShortcut:i,elementName:"back"})});Gf.propTypes={event:m.b.object,fromKeyboardShortcut:m.b.bool};var Wf=Object(ot.b)("Go forward in history",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.event,r=n.fromKeyboardShortcut,i=void 0!==r&&r;a&&a.preventDefault();var o=t(),s=Object(ut.a)({state:o,label:"HISTORY-NAVIGATION"});if(Object(mb.b)(o)){if(Uf())return void s.debug("This is the end of the history stack \u27a1\ufe0f");s.debug("Moving forward in history"),window.history.forward(),xf!==Df&&(Ff.info("Incrementing the users current position in the history stack"),xf+=1,Lf=!1),Hf(o,{fromKeyboardShortcut:i,elementName:"forward"})}else s.debug("Moving forward in history"),window.history.forward(),Hf(o,{fromKeyboardShortcut:i,elementName:"forward"})});Wf.propTypes={event:m.b.object,fromKeyboardShortcut:m.b.bool};m.b.string.isRequired,m.b.func.isRequired,m.b.bool.isRequired,m.b.string,m.b.string,m.b.string;var Kf={tooltip:void 0,ariaLabel:void 0,className:void 0},Vf=function(e){var t=e.iconType,n=e.onClick,a=e.isDisabled,r=e.tooltip,i=e.ariaLabel,o=e.className,s=f()("p-channel_sidebar__history_button",o,{"p-channel_sidebar__history_button--disabled":a});return h.a.createElement(Wn.c,{tip:r,position:"bottom",delay:Wn.a},h.a.createElement(Re.c,{className:s,onClick:n,"aria-label":i,tabIndex:a?-1:null},h.a.createElement(se.b,{type:t})))};Vf.displayName="HistoryButton",Vf.defaultProps=Kf;var zf=Vf,Yf=new x.b("navigation"),Qf=(m.b.string.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.bool,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onBackClick=n.onBackClick.bind(n),n.onForwardClick=n.onForwardClick.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){Bf()}},{key:"componentDidUpdate",value:function(e){this.props.primaryView!==e.primaryView&&Bf()}},{key:"onBackClick",value:function(){this.props.triggerNavigateBack({fromKeyboardShortcut:!1})}},{key:"onForwardClick",value:function(){this.props.triggerNavigateForward({fromKeyboardShortcut:!1})}},{key:"render",value:function(){return this.props.historyNavigationEnabled?h.a.createElement(p.Fragment,null,h.a.createElement(zf,{onClick:this.onBackClick,tooltip:Yf.t("Previous conversation"),ariaLabel:Yf.t("Move to the previous conversation"),className:"p-channel_sidebar__history_button-left",iconType:"chevron-medium-left",isDisabled:qf()}),h.a.createElement(zf,{onClick:this.onForwardClick,tooltip:Yf.t("Next conversation"),ariaLabel:Yf.t("Move to the next conversation"),className:"p-channel_sidebar__history_button-right",iconType:"chevron-medium-right",isDisabled:Uf()})):null}}]),t}(p.Component));Qf.displayName="History",Qf.defaultProps={historyNavigationEnabled:!1};var Jf=Object(_.b)(function(e){return{historyNavigationEnabled:Object(mb.a)(e),primaryView:Object(k.a)(e)}},function(e){return{triggerNavigateForward:function(t){return e(Wf(t))},triggerNavigateBack:function(t){return e(Gf(t))}}},null,{pure:!1})(Qf),Xf=(m.b.bool,function(e){return h.a.createElement("div",{className:"p-channel_sidebar__navigation_bar"},h.a.createElement(Mf,null),e.useHistoryNavigation&&h.a.createElement(Jf,null))});Xf.displayName="NavigationBar",Xf.defaultProps={useHistoryNavigation:!1};var Zf=Xf,$f=n("lfjV"),e_=n("iGrU"),t_=n("PicY"),n_=n("rCFu"),a_=n("lwWk"),r_=n("ESRc"),i_=n("eD8c"),o_={};var s_=Object(Fp.a)(function(e,t){var n=o_[e.teamId];return n||(n={},o_[e.teamId]=n),function(){var a=t({eventId:arguments.length<=0?void 0:arguments[0],payload:arguments.length<=1?void 0:arguments[1]});n[a]||(n[a]=!0,e.track.apply(e,arguments))}}),l_=new x.b("channel_sidebar"),c_=(m.b.string.isRequired,m.b.string.isRequired,m.b.func,m.b.string.isRequired,m.b.string.isRequired,m.b.func,m.b.bool,m.b.bool.isRequired,m.b.object,{selectItem:d.a,dismissInstalledAppDmSuggestion:d.a,featureShowInstalledAppDmSuggestions:!1,clogger:{track:d.a}}),u_=function(e){var t=e.eventId,n=e.payload;return t+"-"+n.contexts.ui_context.action+"-"+n.contexts.core.app_id},d_=function(e){return{contexts:{ui_context:{action:e.action},core:{app_id:e.appId}}}};function p_(e){var t=e.id,n=e.name,a=e.appId,r=e.teamDomain,i=e.startImByMemberId,o=e.dismissInstalledAppDmSuggestion,s=e.featureShowInstalledAppDmSuggestions,l=e.featureSidebarContextMenu,c=e.clogger;Object(p.useEffect)(function(){s_(c,u_)(ve.k.APP_SIDEBAR,d_({action:ve.v.IMPRESSION,appId:a}))});var u=Object(p.useState)(!1),d=No()(u,2),m=d[0],b=d[1],_=Object(p.useCallback)(function(e){e.preventDefault(),c.track(ve.k.APP_SIDEBAR,d_({action:ve.v.CLICK,appId:a})),i({memberId:t})},[c,a,i,t]),g=Object(p.useCallback)(function(){return o({memberId:t,appId:a})},[a,o,t]),v=Object(p.useCallback)(function(){return s?[{label:l_.t("Dismiss app"),click:g}]:[]},[s,g]),y=Object(p.useCallback)(function(e){e.target.offsetWidth<e.target.scrollWidth&&b(!0)},[b]);if(!s)return null;var k=h.a.createElement(Re.c,{onClick:g,className:"p-channel_sidebar__close","aria-label":l_.t("Dismiss app")},h.a.createElement(se.a,{type:"times-circle-medium"})),O=h.a.createElement("div",{className:"p-channel_sidebar__close_container"},h.a.createElement(a_.a,{href:Object(he.o)({channelId:t,teamDomain:r}),className:"p-channel_sidebar__channel p-channel_sidebar__channel--im p-channel_sidebar__channel--suggested",onClick:_,"data-qa-channel-sidebar-channel":!0,"data-qa-channel-sidebar-channel-id":t,draggable:!1,"data-drag-type":"channel","data-drag-id":t},h.a.createElement(Te.a,{memberId:t,enablePresenceSubscriptions:!1,inline:!1}),h.a.createElement(le.c,{delay:le.a,position:"top-left",tip:n,tipClassName:f()({hidden:!m})},h.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name",onMouseEnter:y},n))),k);return l?h.a.createElement(i_.a,{getTemplate:v},O):O}p_.defaultProps=c_;var h_=Object(_.b)(function(e,t){var n=t.id,a=Object(Ue.c)(e,n,!1);return{featureShowInstalledAppDmSuggestions:Object(y.i)(e,"feature_show_installed_app_dm_suggestions"),featureSidebarContextMenu:Object(y.i)(e,"feature_sidebar_context_menu"),teamDomain:Object($.d)(e).domain,name:Object(ne.Q)(e,n),appId:Object(ne.m)(a),clogger:Object(ye.a)({state:e})}},function(e){return Object(Vr.b)({dismissInstalledAppDmSuggestion:r_.a,startImByMemberId:Qn.startImByMemberId},e)})(p_),m_=n("+JGq"),b_=Object(ot.b)("Dismiss suggested channel from channels list",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).channelId;e(Object(m_.d)({ids:[n]}));var a=Object(ue.f)(t()).split(","),r=a.indexOf(n);-1!==r&&(a.splice(r,1),e(Object(D.f)({pref:"newxp_suggested_channels",value:a.join(",")})))});b_.propTypes={channelId:m.b.string.isRequired};var f_=b_,__=n("Nc+C"),g_=n("c48M"),v_=n("HiDb"),y_=n("RbWr"),k_=n("sIuu"),O_=n("OvM9"),j_=n("EetU"),C_=new x.b("channel_sidebar"),E_={isChannel:m.b.bool,isPendingShared:m.b.bool,isShared:m.b.bool,isOrgShared:m.b.bool,type:m.b.oneOf(["channel","private","im","mpim"]),isSlackbot:m.b.bool,isYou:m.b.bool,isMuted:m.b.bool,isSuggested:m.b.bool,hasUnreads:m.b.bool,hasDraft:m.b.bool,isArchived:m.b.bool,isFrozen:m.b.bool,sharedTeamIds:m.b.arrayOf(m.b.string),displayName:m.b.string,teamDomain:m.b.string.isRequired,isSelected:m.b.bool,unreadCount:m.b.number,badgeCount:m.b.number,userCount:m.b.number,userId:m.b.string,userActive:m.b.bool,id:m.b.string.isRequired,priority:m.b.number,selectItem:m.b.func,closeIM:m.b.func,dismissSuggestedChannel:m.b.func,isTyping:m.b.bool,isStarred:m.b.bool,members:m.b.arrayOf(m.b.string),memberPresences:m.b.arrayOf(m.b.string),onContextMenu:m.b.func,featureSidebarContextMenu:m.b.bool.isRequired,index:m.b.number.isRequired,sidebarFoldersIsEnabled:m.b.bool,onDragStart:m.b.func,onDragEnd:m.b.func,onDrop:m.b.func,onDragOver:m.b.func,featureSonicPresenceManager:m.b.bool,clogger:m.b.object.isRequired,canPostInChannel:m.b.bool,featureAnnounceOnly:m.b.bool,maybeLeaveChannel:m.b.func,muteChannelById:m.b.func,unmuteChannelById:m.b.func,updateStar:m.b.func,onItemSelected:m.b.func},w_={isChannel:!0,isSelected:!1,isPendingShared:!1,isShared:!1,isOrgShared:!1,type:"channel",isSlackbot:!1,isYou:!1,isMuted:!1,isSuggested:!1,hasUnreads:!1,hasDraft:!1,isArchived:!1,isFrozen:!1,sharedTeamIds:null,displayName:"",badgeCount:0,userCount:0,userId:void 0,userActive:!0,priority:null,selectItem:d.a,closeIM:d.a,dismissSuggestedChannel:d.a,isTyping:!1,isStarred:!1,members:null,memberPresences:null,onContextMenu:d.a,sidebarFoldersIsEnabled:!1,onDragStart:d.a,onDragEnd:d.a,onDrop:d.a,onDragOver:d.a,featureSonicPresenceManager:!1,clogger:{},canPostInChannel:!0,featureAnnounceOnly:!1,maybeLeaveChannel:d.a,muteChannelById:d.a,unmuteChannelById:d.a,updateStar:d.a,onItemSelected:d.a},S_=Object(ut.b)(),I_=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.closeIM=n.closeIM.bind(n),n.closeSuggestedChannel=n.closeSuggestedChannel.bind(n),n.handleMouseEnter=n.handleMouseEnter.bind(n),n.getContextMenuTemplate=n.getContextMenuTemplate.bind(n),n.linkRef=h.a.createRef(),n.state={isTruncated:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"componentDidUpdate",value:function(e){!e.isSelected&&this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"handleMouseEnter",value:function(e){e.target.offsetWidth<e.target.scrollWidth&&this.setState(function(){return{isTruncated:!0}})}},{key:"onClick",value:function(e){e.preventDefault(),S_.action("CHANNEL-SIDEBAR","Selected "+this.props.id),this.props.selectItem(this.props.id),this.clogClick()}},{key:"closeIM",value:function(e){e.preventDefault(),e.stopPropagation(),S_.action("CHANNEL-SIDEBAR","Closed "+this.props.id),this.props.closeIM({channelId:this.props.id})}},{key:"closeSuggestedChannel",value:function(e){var t=this.props,n=t.id,a=t.index,r=t.isSelected,i=t.clogger,o=t.dismissSuggestedChannel;e.preventDefault(),e.stopPropagation(),S_.action("CHANNEL-SIDEBAR","Closed suggested channel "+n),o({channelId:n}),i.track("SIDEBAR_ITEM_SUGGESTED_CLOSE",{item_type:n[0],item_id:n,index:a,is_selected:r})}},{key:"clogClick",value:function(){var e=this.props,t=e.id,n=e.index,a=e.isMuted,r=e.isSuggested,i=e.isStarred,o=e.hasUnreads,s=e.isArchived,l=e.isFrozen,c=e.isSelected,u=e.badgeCount;e.clogger.track("SIDEBAR_ITEM_CLICK",{item_type:t[0],item_id:t,index:n,is_muted:a,is_suggested:r,is_starred:i,has_unreads:o,is_archived:s,is_frozen:l,is_selected:c,badge_count:u})}},{key:"shouldShowPresence",value:function(){var e=this.props,t=e.type,n=e.isSlackbot,a=e.isSelected,r=e.hasDraft,i=e.isTyping,o=e.isArchived,s=e.isFrozen;return"im"===t&&(!n&&(!(r&&!a)&&(!(i&&!a)&&!(o&&!s))))}},{key:"shouldShowClose",value:function(){var e=this.props,t=e.type,n=e.hasUnreads,a=e.isSuggested,r=e.hasDraft;return!("im"!==t&&"mpim"!==t&&!a)&&(!n&&!r)}},{key:"shouldShowDraftIcon",value:function(){var e=this.props,t=e.hasDraft,n=e.isSelected,a=e.canPostInChannel;return t&&a&&!n}},{key:"shouldShowExternalSharedIcon",value:function(){var e=this.props,t=e.isShared,n=e.type;return t&&!("im"===n||"mpim"===n)}},{key:"shouldShowOrgSharedIcon",value:function(){var e=this.props,t=e.isOrgShared,n=e.type;return t&&!("im"===n||"mpim"===n)}},{key:"buildName",value:function(){var e=this.props,t=e.displayName,n=e.type;return"im"===n?this.buildImName():"mpim"===n?this.buildMpimName():this.renderName(t)}},{key:"buildImName",value:function(){var e=this.props,t=e.userId,n=e.isYou;return this.renderName(h.a.createElement(h.a.Fragment,null,h.a.createElement(Ne.b,{memberId:t}),h.a.createElement(Nn.a,{id:t}),n&&h.a.createElement("span",{className:"p-channel_sidebar__you_label"},C_.t("(you)"))))}},{key:"buildMpimName",value:function(){var e=this.props,t=e.type,n=e.members,a=e.memberPresences;if("mpim"!==t||!n||!a)return null;var r=Object(v_.a)(n,function(e,t){return[h.a.createElement(Nn.a,{id:e,key:e}),t<n.length-1?", ":null]});return this.renderName(r)}},{key:"buildAriaLabel",value:function(){var e=this.props,t=e.type,n=e.displayName,a=e.isShared,r=e.isOrgShared,i=e.isYou,o=e.isMuted,s=e.isSuggested,l=e.hasUnreads,c=e.hasDraft,u=e.isArchived,d=e.unreadCount,p=e.badgeCount,h=e.isSelected,m=e.userActive,b=e.isTyping,f=e.canPostInChannel,_=e.featureAnnounceOnly;return Object(O_.a)({type:t,displayName:n,isShared:a,isOrgShared:r,isYou:i,isMuted:o,isSuggested:s,hasUnreads:l,hasDraft:c,isArchived:u,unreadCount:d,badgeCount:p,isSelected:h,userActive:m,isTyping:b,canPost:f,featureAnnounceOnly:_})}},{key:"getContextMenuTemplate",value:function(){var e=new x.b("menu"),t=this.props,n=t.id,a=t.displayName,r=t.isChannel,i=t.isStarred,o=t.isMuted,s=t.canMute,l=t.canLeave,c=t.maybeLeaveChannel,u=t.updateStar,d=t.muteChannelById,p=t.unmuteChannelById,h=void 0,m=void 0,b=void 0,f=void 0,_=void 0;r?(h=e.t("Star Channel"),m=e.t("Unstar Channel"),b=e.t("Mute {channel}",{channel:"#"+a}),f=e.t("Unmute {channel}",{channel:"#"+a}),_=e.t("Leave {channel}",{channel:"#"+a})):(h=e.t("Star Conversation"),m=e.t("Unstar Conversation"),b=e.t("Mute Conversation"),f=e.t("Unmute Conversation"),_=e.t("Leave Conversation"));var g=[{label:i?m:h,click:function(){return u(!i,{channel:n})}}];return l&&g.push({label:_,click:function(){return c({channelId:n})}}),s&&g.push({label:o?f:b,click:function(){return o?p(n):d(n)}}),g}},{key:"renderName",value:function(e){var t=this.props,n=t.type,a=t.userActive,r=this.state.isTruncated;return h.a.createElement(le.c,{delay:le.a,position:"top-left",tip:e,tipClassName:f()({hidden:!r})},h.a.createElement("span",{className:f()("p-channel_sidebar__name",{"p-channel_sidebar__name--away":"im"===n&&!a}),"data-qa":"channel_sidebar_name",onMouseEnter:this.handleMouseEnter},e))}},{key:"renderPresence",value:function(e){return h.a.createElement(Te.a,{memberId:e,enablePresenceSubscriptions:this.props.featureSonicPresenceManager||Object(gf.a)(),inline:!1})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type,a=e.isChannel,r=e.isPendingShared,i=e.isSlackbot,o=e.isYou,s=e.isMuted,l=e.isSuggested,c=e.hasUnreads,u=e.isArchived,d=e.isFrozen,p=e.badgeCount,m=e.isSelected,b=e.userCount,_=e.displayName,g=e.userId,v=e.priority,y=e.isTyping,k=e.isStarred,O=e.sharedTeamIds,j=e.onContextMenu,C=e.teamDomain,E=e.featureSidebarContextMenu,w=f()("p-channel_sidebar__channel",{"p-channel_sidebar__channel--private":"private"===n,"p-channel_sidebar__channel--shared":this.shouldShowExternalSharedIcon(),"p-channel_sidebar__channel--org-shared":this.shouldShowOrgSharedIcon(),"p-channel_sidebar__channel--mpim":"mpim"===n,"p-channel_sidebar__channel--im":"im"===n,"p-channel_sidebar__channel--im-slackbot":i,"p-channel_sidebar__channel--im-you":o,"p-channel_sidebar__channel--selected":m,"p-channel_sidebar__channel--muted":s,"p-channel_sidebar__channel--suggested":l,"p-channel_sidebar__channel--unread":c&&!u,"p-channel_sidebar__channel--draft":this.shouldShowDraftIcon(),"p-channel_sidebar__channel--archived":u&&(!d||a),"p-channel_sidebar__channel--typing":y&&!m}),S=h.a.createElement(j_.b,{count:p,className:"p-channel_sidebar__badge"}),I={"data-user-count":b},T=this.shouldShowPresence()&&this.renderPresence(g),N=this.buildName(),R=this.shouldShowExternalSharedIcon()&&h.a.createElement(k_.a,{tooltip:!0,sharedTeamIds:O,className:"p-channel_sidebar__icon",pending:r}),A=h.a.createElement(a_.a,Z()({href:Object(he.o)({channelId:t,teamDomain:C}),ref:this.linkRef,className:w,onClick:this.onClick,onContextMenu:j},I,{"data-qa-channel-sidebar-channel":!0,"data-qa-channel-sidebar-channel-is-selected":m,"data-qa-channel-sidebar-channel-id":t,"data-qa-channel-sidebar-channel-type":n,"data-qa-channel-sidebar-is-starred":k,"data-qa-channel-sidebar-is-you":o,"data-qa-channel-sidebar-priority":v,"aria-label":this.buildAriaLabel(),draggable:this.props.sidebarFoldersIsEnabled,"data-drag-type":"channel","data-drag-id":t,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver}),T,N,S,R);if(this.shouldShowClose()){var P=C_.t("Close Direct Message with {name}",{name:_});l&&(P=C_.t("Dismiss suggested channel"));var M=h.a.createElement(Re.c,{onClick:l?this.closeSuggestedChannel:this.closeIM,className:"p-channel_sidebar__close","aria-label":P},h.a.createElement(se.a,{type:"times-circle-medium"}));A=h.a.createElement("div",{className:"p-channel_sidebar__close_container"},A,M)}return E?h.a.createElement(i_.a,{getTemplate:this.getContextMenuTemplate},A):A}}]),t}(y_.a);I_.displayName="Channel",I_.propTypes=E_,I_.defaultProps=w_;var T_=I_,N_={closeIM:Qn.closeChannelApi,dismissSuggestedChannel:f_,maybeLeaveChannel:Xn.a,muteChannelById:Hn,unmuteChannelById:Gn,updateStar:Wa.a},R_=Object(_.b)(function(e,t){var n=t.id,a=Object(re.d)(e,n);if(!a)return{id:n,featureSidebarContextMenu:Object(y.i)(e,"feature_sidebar_context_menu")};var r=Object(he.lb)(a)?Math.min(Math.max(Object(aa.a)(a,"members.length",1)-1,2),9):0,i=Object(he.v)(a),o="im"===i&&Object(ue.h)(e,"show_typing")&&Object(__.f)(e,n).length>0,s="im"!==i||"active"===Object(He.f)(e,Object(he.G)(a)),l=Object(y.b)(e),c="mpim"===i&&Object(he.H)(a)&&Object(El.a)(Object(he.H)(a),function(e){return e!==l}),u="mpim"===i&&c&&Object(bo.a)(c,function(t){return Object(He.f)(e,t)}),d=!Object(he.lb)(a)&&!Object(he.eb)(a)||Object(he.xb)(a),p=!Object(he.lb)(a)&&!Object(he.eb)(a),h=Object(he.kb)(a)||Object(he.xb)(a),m=Object(he.x)(e,a,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),b=Object($.d)(e).domain,f=Object(he.M)(e,a);return{isSelected:Object(k.a)(e)===n,isPendingShared:Object(he.ub)(a),isShared:Object(he.Y)(a),isOrgShared:Object(he.rb)(a),isSlackbot:Object(he.Eb)(a),isYou:Object(he.Qb)(l,a),isMuted:Object(wn.c)(e,n),isSuggested:!Object(he.kb)(a)&&Object(he.Gb)(e,a),hasUnreads:!!Object(he.S)(a),hasDraft:Object(he.y)(e,n),isArchived:Object(he.V)(a),isFrozen:Object(y.i)(e,"feature_esc_disconnect_v2_client")&&Object(he.bb)(a),sharedTeamIds:f.length?f:g_.a,displayName:m,unreadCount:Object(he.S)(a),badgeCount:Object(re.c)(e,a),userCount:r,userId:Object(he.G)(a)||a.user_id,userActive:s,type:i,id:n,isTyping:o,isStarred:Object(he.Fb)(a),canPostInChannel:Object(It.q)(e,a.id),featureAnnounceOnly:Object(y.i)(e,"feature_announce_only"),members:c||null,memberPresences:u||null,priority:a.priority,isPrivateChannel:Object(he.xb)(a),isMemberOfChannel:he.kb,canMute:d,canLeave:h,isChannel:p,teamDomain:b,featureSidebarContextMenu:Object(y.i)(e,"feature_sidebar_context_menu"),featureSonicPresenceManager:Object(y.i)(e,"feature_sonic_presence_manager"),clogger:Object(ye.a)({state:e})}},N_,null,{withRef:!0})(T_),A_=n("+Xah"),P_=n("V2L1"),M_=new x.b("channel_sidebar"),D_=(m.b.string.isRequired,m.b.string.isRequired,m.b.string,m.b.string,m.b.bool,m.b.number,m.b.bool,m.b.func,m.b.bool,m.b.string,m.b.bool,m.b.func,{isSelected:!1,labelUnread:"",hasUnreads:!1,badgeCount:0,icon:void 0,selectItem:d.a,isDim:!1,qaLabel:"",disabledInSonic:!1,onItemSelected:d.a}),x_=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.linkRef=h.a.createRef(),n.state={},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"componentDidUpdate",value:function(e){!e.isSelected&&this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"onClick",value:function(e){Object(ut.b)().action("CHANNEL-SIDEBAR","Selected "+this.props.id),this.props.selectItem(this.props.id,e)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.label,a=e.labelUnread,r=e.icon,i=e.hasUnreads,o=e.badgeCount,s=e.isSelected,l=e.isDim,c=e.qaLabel,u=e.disabledInSonic,d=f()("p-channel_sidebar__link",{"p-channel_sidebar__link--all-unreads":"Vall_unreads"===t,"p-channel_sidebar__link--all-threads":"Vall_threads"===t,"p-channel_sidebar__link--search":"Vsearch"===t,"p-channel_sidebar__link--invites":"Vinvites"===t,"p-channel_sidebar__link--add-channel":"Vadd_channel"===t,"p-channel_sidebar__link--selected":s,"p-channel_sidebar__link--unread":i,"p-channel_sidebar__link--dim":l}),p=i&&a?a:n,m=h.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name"+c},p),b=Object(El.a)([s?M_.t("selected"):null,i&&!o?M_.t("has unreads"):null,o?M_.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:o}):null],A_.a),_=p+(b.length?" ("+b.join(", ")+")":""),g=h.a.createElement(j_.b,{count:o,className:"p-channel_sidebar__badge"}),v=r&&h.a.createElement(se.b,{type:r,size:"inherit",className:"p-channel_sidebar__link__icon"}),y=h.a.createElement(Re.c,{className:d,onClick:this.onClick,"aria-label":_,"data-qa-channel-sidebar-link-id":t,ref:this.linkRef},v,m,g);return u?h.a.createElement(P_.a,null,y):y}}]),t}(p.PureComponent);x_.displayName="Link",x_.defaultProps=D_;var L_=x_,F_=new x.b("channel_sidebar"),B_=Object(_.b)(function(e){return{id:"Vall_unreads",label:F_.t("All Unreads"),hasUnreads:Object(y.i)(e,"feature_incremental_unread_counts")?Object(zi.i)(e):Object(Vi.d)(e),isSelected:"Vall_unreads"===Object(k.a)(e)}},null,null,{withRef:!0})(L_),q_=new x.b("sonic_pilot");function U_(e){var t=e.onCloseComplete,n=e.featureSonicPlaceholderLabels;return Object(Me.a)()&&n?h.a.createElement(pt.b,{shouldAutoFade:!0,position:"top-right",onCloseComplete:t,icon:"hourglass"},h.a.createElement("div",null,h.a.createElement("strong",null,q_.t("Coming soon")),h.a.createElement("div",null,q_.t("This feature has not been implemented yet.")))):null}U_.displayName="SonicPlaceholderToast",U_.defaultProps={onCloseComplete:d.a,featureSonicPlaceholderLabels:!1};var H_=Object(_.b)(function(e){return{featureSonicPlaceholderLabels:Object(y.i)(e,"feature_sonic_placeholder_labels")}})(U_),G_=new x.b("channel_sidebar"),W_="Vall_unreads";var K_=Object(_.b)(function(e){return{id:W_,label:G_.t("All Unreads"),hasUnreads:Object(Vi.d)(e),isSelected:!1}},function(e){return{selectItem:function(){return e(Object(dt.c)({element:h.a.createElement(H_,null)}))}}},null,{withRef:!0})(L_),V_=new x.b("channel_sidebar"),z_=Object(_.b)(function(e){return{id:"Vall_threads",label:V_.t("Threads"),labelUnread:V_.t("Threads"),hasUnreads:Object(y.i)(e,"feature_incremental_unread_counts")?Object(zi.j)(e):Object(Vi.c)(e),badgeCount:Object(y.i)(e,"feature_incremental_unread_counts")?Object(zi.e)(e):Object(Vi.b)(e),isSelected:"Vall_threads"===Object(k.a)(e)}},null,null,{withRef:!0})(L_),Y_=new x.b("channel_sidebar"),Q_=Object(_.b)(function(e){var t="";return Object(y.i)(e,"feature_primary_search")&&Object(I.a)(e)&&(t=Y_.t("Search Results")),{id:"Vsearch",label:t,isSelected:"Vsearch"===Object(k.a)(e)}})(L_),J_=n("QOdn"),X_=n("YCXn"),Z_=new x.b("channel_sidebar"),$_=(m.b.string.isRequired,m.b.bool,m.b.string,m.b.object.isRequired,m.b.func.isRequired,m.b.bool.isRequired,m.b.func,{isDim:!1,qaLabel:"",onClickClose:d.a}),eg=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onItemSelect=n.onItemSelect.bind(n),n}return u()(t,e),o()(t,[{key:"onItemSelect",value:function(){this.props.clogger.track("SIDEBAR_ITEM_CLICK",{contexts:{ui_context:{step:"ADD_CHANNEL",action:"click",ui_component:"SIDEBAR"}}}),Object(Me.a)()?this.props.openChannelBrowser():Object(X_.b)()}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.qaLabel,a=e.isDim,r=e.onClickClose;return h.a.createElement("div",{className:"p-channel_sidebar__close_container"},h.a.createElement(L_,{key:"Vadd_channel",id:"Vadd_channel",isDim:a,qaLabel:n,label:t,selectItem:this.onItemSelect}),h.a.createElement(oe.a,{onClick:r,className:"p-channel_sidebar__close","aria-label":this.props.featureNewxp2798?Z_.t("Hide Add Channel button"):null},h.a.createElement(se.b,{type:"times-circle-medium"})))}}]),t}(h.a.Component);eg.displayName="AddChannelLink";var tg={openChannelBrowser:function(){return J_.a.apply(void 0,arguments)}};eg.defaultProps=$_;var ng=Object(_.b)(function(e){return{clogger:Object(ye.a)({state:e}),featureNewxp2798:Object(y.i)(e,"feature_newxp_2798")}},tg)(eg),ag=n("vJtL"),rg=(m.b.string.isRequired,m.b.shape({label:m.b.func.isRequired,sidebar:m.b.shape({icon:m.b.string.isRequired,isBold:m.b.func,badgeCount:m.b.func,getCloseLinkLabel:m.b.func})}).isRequired,m.b.bool,m.b.number,m.b.bool,m.b.bool,m.b.func,m.b.bool,{isBold:!1,badgeCount:void 0,isSelected:!1,featurePages:!1,isCloseButtonVisible:!1,onClickClose:d.a}),ig=function(e){var t=e.id,n=e.views,a=e.isBold,r=e.isCloseButtonVisible,i=e.onClickClose,o=e.badgeCount,s=e.featurePages,l=Be()(e,["id","views","isBold","isCloseButtonVisible","onClickClose","badgeCount","featurePages"]);if(!s)return null;var c=Object(ag.a)(n.label)&&n.label(),u=n.sidebar||{},d=u.icon,p=u.getCloseLinkLabel,m=h.a.createElement(L_,Z()({},l,{id:t,label:c,icon:d,hasUnreads:a,badgeCount:o}));if(!r)return m;var b=h.a.createElement(oe.a,{onClick:i,className:"p-channel_sidebar__close","aria-label":Object(ag.a)(p)?p():""},h.a.createElement(se.b,{type:"times-circle-medium"}));return h.a.createElement("div",{className:"p-channel_sidebar__close_container"},m,b)};ig.displayName="PageLink",ig.defaultProps=rg;var og=Object(_.b)(function(e,t){var n=t.id,a=Oh(n),r=a.sidebar||{};return{id:n,views:a,isBold:Object(ag.a)(r.isBold)&&r.isBold(e),badgeCount:Object(ag.a)(r.badgeCount)?r.badgeCount(e):void 0,isSelected:Object(k.a)(e)===n,featurePages:Object(y.i)(e,"feature_pages"),isCloseButtonVisible:Object(ag.a)(r.onClickClose)}},function(e,t){var n=Oh(t.id).sidebar||{};return{onClickClose:Object(ag.a)(n.onClickClose)?function(){n.onClickClose(e)}:null}})(ig),sg=new x.b("channel_sidebar"),lg=function(e){var t=e.selectItem,n=e.dim,a=e.label,r=e.qaLabel,i=e.showClose,o=e.onClickClose,s=e.featureModernizeInvites,l=a||sg.t("Invite people",{fallbackHash:"a937c4ac396e25f4c9a290d468e33c668ec6ff69"}),c=h.a.createElement(L_,{key:"Vinvites",id:"Vinvites",label:l,selectItem:t,isDim:n,qaLabel:r,disabledInSonic:!s});if(!i)return c;var u=h.a.createElement(oe.a,{onClick:o,className:"p-channel_sidebar__close","aria-label":sg.t("Hide Invite People button")},h.a.createElement(se.b,{type:"times-circle-medium"}));return h.a.createElement("div",{className:"p-channel_sidebar__close_container"},c,u)};lg.displayName="InvitePeopleLink",lg.defaultProps={selectItem:d.a,dim:!0,label:void 0,qaLabel:"",showClose:!1,onClickClose:d.a,featureModernizeInvites:!1};var cg=Object(ud.a)(lg),ug=n("YhFg"),dg=n("St+r"),pg=Object(ot.b)("Dismiss Add Apps link in sidebar",function(e){e(Object(D.f)({pref:"add_apps_prompt_dismissed",value:!0}))}),hg=new x.b("channel_sidebar"),mg=(m.b.bool,m.b.bool,m.b.func.isRequired,m.b.object.isRequired,m.b.func.isRequired,m.b.bool,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.func,m.b.bool,m.b.bool,{isAppWhitelistEnabled:!1,isEnterprise:!1,featureDegradedSend:!1,ignoreAppLinkLimits:!1,appLinkImpression:!1,setAppLinkImpressionClogged:d.a,hideAppLinkPrompt:d.a,dismissInstallAppsPrompt:d.a,isAppLinkDismissed:!1,openAppsBrowserModal:d.a,featureM11nAppsBrowser:!1,featureDismissAddApps:!1}),bg=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={numBots:0,numMembers:0},n._isMounted=!1,n.handleAppsBrowserClick=n.handleAppsBrowserClick.bind(n),n.dismissLink=n.dismissLink.bind(n),n}return u()(t,e),o()(t,[{key:"componentWillMount",value:function(){var e=this,t=function(){return e.props.fetchMemberCountsForTeam().then(function(t){var n=t.bots,a=t.members;e._isMounted&&(e.setState(function(){return{numBots:n,numMembers:a}}),!e.props.appLinkImpression&&e.willVisibleRender()&&(e.clogEvent("impression"),e.props.setAppLinkImpressionClogged()))})};return this.props.featureDegradedSend?t().catch(function(){return e.props.promiseToHaveOpenWebSocket().finally(function(){return e._isMounted&&t()})}):t()}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"clogEvent",value:function(e){this.props.clogger.track("APP_ADD_APPS_PROMPT",{contexts:{ui_context:{action:e,ui_element:"ADD_APPS"}}})}},{key:"handleAppsBrowserClick",value:function(){this.clogEvent("click"),this.props.clogger.track("INSTALL_APPS_LINK_APP_BROWSER_CLICK"),this.props.featureM11nAppsBrowser?this.props.openAppsBrowserModal():Object(X_.a)()}},{key:"dismissLink",value:function(){this.props.hideAppLinkPrompt(),this.clogEvent("decline"),this.props.dismissInstallAppsPrompt()}},{key:"willVisibleRender",value:function(){var e=this.state,t=e.numBots,n=e.numMembers,a=this.props,r=a.ignoreAppLinkLimits,i=a.isAppLinkDismissed;return(0!==n||0!==t)&&(!this.props.isEnterprise&&!this.props.isAppWhitelistEnabled&&(!((n<10||t>=3)&&!r)&&!i))}},{key:"render",value:function(){if(!this.willVisibleRender())return null;var e=hg.t("Add apps"),t=hg.t('Dismiss "Add apps" prompt',{fallbackHash:"70afe9eff3f2888493d9b5169fec8331af1810de",fallbackHashNs:"highlights"}),n=h.a.createElement(Re.c,{className:"p-channel_sidebar__link",onClick:this.handleAppsBrowserClick,"data-qa":"add_apps_link"},"+ ",e),a=h.a.createElement("div",{className:"p-channel_sidebar__close_container"},n,h.a.createElement(Re.c,{onClick:this.dismissLink,className:"p-channel_sidebar__close","aria-label":t},h.a.createElement(se.b,{type:"times-circle-medium"})));return this.props.featureDismissAddApps?a:n}}]),t}(p.Component);bg.displayName="InstallAppsLink",bg.defaultProps=mg;var fg=Object(_.b)(function(e){return{isAppWhitelistEnabled:Object(rt.a)(e,"app_whitelist_enabled"),isEnterprise:!Object(sa.a)(Object($.g)(e)),clogger:Object(ye.a)({state:e}),featureDegradedSend:Object(y.i)(e,"feature_degraded_send"),ignoreAppLinkLimits:"expanded_conditions"===Object(Cs.c)(e,"platform_show_add_apps_to_more_users_new_free")||"expanded_conditions"===Object(Cs.c)(e,"platform_show_add_apps_to_more_users_existing_free")||"expanded_conditions"===Object(Cs.c)(e,"platform_show_add_apps_to_more_users_existing_stdplus"),appLinkImpression:Object(rb.c)(e),isAppLinkDismissed:Object(ue.h)(e,"add_apps_prompt_dismissed")||Object(rb.d)(e),featureM11nAppsBrowser:Object(y.i)(e,"feature_m11n_apps_browser"),featureDismissAddApps:Object(y.i)(e,"feature_dismiss_add_apps")}},function(e){return{fetchMemberCountsForTeam:function(){return e(ug.b.apply(void 0,arguments))},promiseToHaveOpenWebSocket:function(){return e(dg.s.apply(void 0,arguments))},setAppLinkImpressionClogged:function(){return e(rb.q.apply(void 0,arguments))},hideAppLinkPrompt:function(){return e(rb.k.apply(void 0,arguments))},dismissInstallAppsPrompt:function(){return e(pg.apply(void 0,arguments))},openAppsBrowserModal:function(){return e(na.a.apply(void 0,arguments))}}})(bg),_g=Object(ot.b)("Dismiss Connect/Install Google Drive link in sidebar",function(e,t,n){"string"==typeof n&&e(Object(D.f)({pref:n,value:!0}))});_g.propTypes={dismissKey:m.b.oneOf(["gdrive_install_prompt_dismissed","gdrive_connect_prompt_dismissed"])};var gg=_g,vg=(m.b.func,m.b.func,m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.bool,m.b.object.isRequired,m.b.bool.isRequired,{dismissGdrivePrompt:d.a,hideGdrivePrompt:d.a,isAppWhitelistEnabled:!1}),yg=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleLinkClick=n.handleLinkClick.bind(n),n.dismissLink=n.dismissLink.bind(n),n.clogEvent=n.clogEvent.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clogEvent("impression")}},{key:"clogEvent",value:function(e){this.props.clogger.track("APP_SIDEBAR_PROMPTS",{contexts:{ui_context:{action:e,ui_element:this.props.clogUiElement}}})}},{key:"handleLinkClick",value:function(){this.props.hideGdrivePrompt(),this.props.isInstall||this.props.dismissGdrivePrompt(this.props.dismissKey),this.clogEvent("click")}},{key:"dismissLink",value:function(){this.props.hideGdrivePrompt(),this.props.dismissGdrivePrompt(this.props.dismissKey),this.clogEvent("decline")}},{key:"render",value:function(){if(this.props.isAppWhitelistEnabled&&this.props.isInstall)return null;var e=this.props,t=e.link,n=e.text,a=e.label;return h.a.createElement("div",{className:"p-channel_sidebar__close_container"},h.a.createElement(G.a,{className:"p-channel_sidebar__channel p-channel_sidebar__channel--im",href:t,onClick:this.handleLinkClick},h.a.createElement("span",{className:"p-channel_sidebar__name"},"+ ",n)),h.a.createElement(Re.c,{onClick:this.dismissLink,className:"p-channel_sidebar__close","aria-label":a},h.a.createElement(se.b,{type:"times-circle-medium"})))}}]),t}(p.PureComponent);yg.displayName="GdrivePromptLink",yg.defaultProps=vg;var kg=Object(_.b)(function(e){return Z()({},lf(e),Object(aa.a)(e,"channelSidebar.gdrivePrompt"),{isAppWhitelistEnabled:Object(rt.a)(e,"app_whitelist_enabled"),isInstall:sf(e),clogger:Object(ye.a)({state:e})})},function(e){return Object(Vr.b)({dismissGdrivePrompt:gg,hideGdrivePrompt:rb.m},e)})(yg),Og=n("4qCO"),jg=(m.b.string.isRequired,m.b.string.isRequired,m.b.bool.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.object.isRequired,m.b.object.isRequired,m.b.func,m.b.func,m.b.func,{setUserPrefByApi:d.a,hideAppSuggestion:d.a,setAppSuggestionImpressionClogged:d.a});function Cg(e){var t=e.appKey,n=e.appId,a=e.isInstall,r=e.setUserPrefByApi,i=e.hideAppSuggestion,o=e.dismissKey,s=e.href,l=e.text,c=e.label,u=e.clogUiElement,d=e.clogger,m=e.appSuggestionImpressions,b=e.setAppSuggestionImpressionClogged,f=Object(p.useCallback)(function(e){d.track(ve.k.APP_SIDEBAR_PROMPTS,{contexts:{ui_context:{action:e,ui_element:u},core:{app_id:n}}})},[n,d,u]);Object(p.useEffect)(function(){m[t]||(b(t),f("impression"))},[m,b,f,t]);var _=Object(p.useCallback)(function(){i(t),a||r({pref:o,value:!0}),f("click")},[i,r,o,t,f,a]),g=Object(p.useCallback)(function(){i(t),r({pref:o,value:!0}),f("decline")},[i,r,t,o,f]);return h.a.createElement("div",{className:"p-channel_sidebar__close_container"},h.a.createElement(G.a,{"data-qa":"app_suggestion_prompt_cta",className:"p-channel_sidebar__channel p-channel_sidebar__channel--im",href:s,onClick:_},h.a.createElement("span",{className:"p-channel_sidebar__name"},"+ ",l)),h.a.createElement(Re.c,{"data-qa":"app_suggestion_prompt_dismiss",onClick:g,className:"p-channel_sidebar__close","aria-label":c},h.a.createElement(se.b,{type:"times-circle-medium"})))}Cg.displayName="AppSuggestionLink",Cg.defaultProps=jg;var Eg=Object(_.b)(function(e,t){var n=t.appKey;return Z()({},pf(e,n),{clogger:Object(ye.a)({state:e}),appSuggestionImpressions:Object(rb.e)(e)})},function(e){return{setUserPrefByApi:function(){return e(D.f.apply(void 0,arguments))},hideAppSuggestion:function(){return e(rb.l.apply(void 0,arguments))},setAppSuggestionImpressionClogged:function(){return e(rb.r.apply(void 0,arguments))}}})(Cg),wg=(m.b.arrayOf(m.b.shape({appKey:m.b.string.isRequired,appName:m.b.string.isRequired})),function(e,t){var n=e.appName,a=t.appName;return Object(Og.a)(n,a)});function Sg(e){var t=e.displayedAppSuggestionsList;return h.a.createElement(p.Fragment,null,t.sort(wg).map(function(e){var t=e.appKey;return h.a.createElement(Eg,{appKey:t,key:t})}))}Sg.displayName="AppSuggestionLinks",Sg.defaultProps={displayedAppSuggestionsList:[]};var Ig=Object(_.b)(function(e){return{displayedAppSuggestionsList:Object(rb.g)(e)}})(Sg),Tg=n("ERGU"),Ng=n("FghR"),Rg=n("cnLP"),Ag=new x.b("channel_browser_coachmark"),Pg=(m.b.string.isRequired,m.b.string,m.b.string,m.b.node,m.b.string,m.b.string,m.b.number,m.b.func,m.b.bool,m.b.node,m.b.string,m.b.func,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.bool,{qaLabel:"",iconClass:null,tooltip:"",headerAriaLabel:"",tooltipClassName:null,tooltipArrowOffset:void 0,onLabelClick:d.a,showPlus:!1,plusTooltip:null,plusAriaLabel:"",onPlusClick:d.a,seenChannelBrowserCoachmark:!1,hasRecentlySharedAChannel:!1,setUserPrefByApi:d.a,openChannelBrowser:d.a,featureChannelIsRemoveCreateSharedChannel:!1}),Mg=Object(ut.b)(),Dg=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onLabelClick=n.onLabelClick.bind(n),n.onPlusClick=n.onPlusClick.bind(n),n.setTooltipRef=n.setTooltipRef.bind(n),n.setPlusTooltipRef=n.setPlusTooltipRef.bind(n),n}return u()(t,e),o()(t,[{key:"onLabelClick",value:function(e){e.preventDefault(),Mg.action("CHANNEL-SIDEBAR","Selected heading "+this.props.qaLabel),this.props.onLabelClick(),this.tooltip&&this.tooltip.hideTip()}},{key:"onPlusClick",value:function(e){e.preventDefault(),Mg.action("CHANNEL-SIDEBAR","Clicked plus button for "+this.props.qaLabel),this.props.onPlusClick(),this.plusTooltip&&this.plusTooltip.hideTip()}},{key:"setTooltipRef",value:function(e){this.tooltip=e}},{key:"setPlusTooltipRef",value:function(e){this.plusTooltip=e}},{key:"renderIconMaybe",value:function(){var e=this.props.iconClass;return e?h.a.createElement(se.a,{type:e}):null}},{key:"renderPlusButtonMaybe",value:function(){var e=this.props,t=e.showPlus,n=e.plusTooltip,a=e.plusAriaLabel,r=e.qaLabel;if(!t)return null;var i=this.props.onPlusClick===this.props.onLabelClick,o=i?"-1":void 0,s=i?"true":void 0,l=h.a.createElement(Re.c,{className:"p-channel_sidebar__section_heading_plus",onClick:this.onPlusClick,"aria-label":a,tabIndex:o,"data-qa":"channel_sidebar__plus__"+r}),c=n?h.a.createElement(le.c,{tip:n,position:"top",ref:this.setPlusTooltipRef,delay:le.a},l):l;return h.a.createElement("div",{className:"p-channel_sidebar__section_heading_right","aria-hidden":s},c)}},{key:"renderSharedChannelsCoachmarkMaybe",value:function(e){var t=this,n=this.props,a=n.seenChannelBrowserCoachmark,r=n.hasRecentlySharedAChannel,i=n.qaLabel,o=n.featureChannelIsRemoveCreateSharedChannel;if("shared_channels"!==i&&!o||"channels"!==i&&o||a||!r)return e;var s=function(){t.props.setUserPrefByApi({pref:"seen_channel_browser_admin_coachmark",value:!0})},l=h.a.createElement(Ng.a,{secondaryCallToActionText:Ag.t("Close"),primaryCallToActionText:Ag.t("Show Me"),title:Ag.t("View and manage shared channels"),content:Ag.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar."),isOpen:!0,onClickSecondaryButton:s,onClickPrimaryButton:function(){s(),Object(Me.a)()?t.props.openChannelBrowser():(Object(X_.b)(),Object(Tg.a)())},orientation:"right",closeCoachmark:s},h.a.createElement("h3",{className:"margin_bottom_50"},Ag.t("View and manage shared channels")),h.a.createElement("p",null,Ag.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar.")));return h.a.createElement("div",null,h.a.createElement(Rg.b,{orientation:"right",coachmarkElement:l},e))}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.qaLabel,a=e.tooltip,r=e.headerAriaLabel,i=e.tooltipClassName,o=e.tooltipArrowOffset,s=void 0,l=e.onLabelClick!==d.a;s=l?h.a.createElement(Re.c,{className:f()("p-channel_sidebar__section_heading_label","p-channel_sidebar__section_heading_label--clickable"),onClick:this.onLabelClick,"aria-label":r},this.renderIconMaybe()," ",t):h.a.createElement("span",{role:"heading","aria-level":"2",className:"p-channel_sidebar__section_heading_label"},this.renderIconMaybe()," ",t);var c=a?h.a.createElement(le.c,{tip:a,tipClassName:i,position:"top-left",tipArrowOffset:o,ref:this.setTooltipRef,delay:le.a},this.renderSharedChannelsCoachmarkMaybe(s)):s,u=l?h.a.createElement("h2",{className:"offscreen"},t):null,p=this.props.onPlusClick!==this.props.onLabelClick,m=p?"group":void 0,b=p?t:void 0;return h.a.createElement("div",{className:"p-channel_sidebar__section_heading","data-qa-channel-sidebar-section-heading":n,role:m,"aria-label":b},u,c,this.renderPlusButtonMaybe())}}]),t}(h.a.PureComponent);Dg.displayName="SectionHeading",Dg.defaultProps=Pg;var xg={setUserPrefByApi:function(){return D.f.apply(void 0,arguments)},openChannelBrowser:function(){return J_.a.apply(void 0,arguments)}},Lg=Object(_.b)(function(e){return{seenChannelBrowserCoachmark:Object(ue.h)(e,"seen_channel_browser_admin_coachmark"),hasRecentlySharedAChannel:Object(ue.h)(e,"has_recently_shared_a_channel"),featureChannelIsRemoveCreateSharedChannel:Object(y.i)(e,"feature_channel_is_remove_create_shared_channel")}},xg)(Dg),Fg=new x.b("channel_sidebar"),Bg=(m.b.bool,m.b.func,m.b.bool,m.b.func,{featureChannelSidebarDraftsSection:!1,setUserPrefByApi:d.a,showDraftsSectionCoachmark:!1,scrollToTopOfChannelList:d.a}),qg=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showCoachmark:e.showDraftsSectionCoachmark},n.markCoachmarkSeen=n.markCoachmarkSeen.bind(n),n.onShow=n.onShow.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.showDraftsSectionCoachmark&&this.props.scrollToTopOfChannelList()}},{key:"onShow",value:function(){this.state.showCoachmark&&this.props.setUserPrefByApi({pref:"seen_drafts_section_coachmark",value:!0})}},{key:"markCoachmarkSeen",value:function(){this.setState(function(){return{showCoachmark:!1}})}},{key:"render",value:function(){var e=this.props.featureChannelSidebarDraftsSection,t=this.state.showCoachmark;return e?t?h.a.createElement(Nf.a,{title:Fg.t("Pick up where you left off"),content:Fg.t("Your drafts are now collected in one place, so you can jump right back whenever you're ready to hit send."),shouldShow:!0,onContinue:this.markCoachmarkSeen,onShow:this.onShow,hasCloseButton:!1,hasSkipLink:!1},h.a.createElement("span",null,h.a.createElement(Lg,{label:Fg.t("Drafts"),qaLabel:"drafts"}))):h.a.createElement(Lg,{label:Fg.t("Drafts"),qaLabel:"drafts"}):null}}]),t}(p.Component);qg.displayName="DraftsHeading",qg.defaultProps=Bg;var Ug=Object(_.b)(function(e){return{featureChannelSidebarDraftsSection:Object(y.i)(e,"feature_channel_sidebar_drafts_section"),showDraftsSectionCoachmark:!Object(ue.h)(e,"seen_drafts_section_coachmark")}},function(e){return{setUserPrefByApi:function(t){return e(Object(D.f)(t))}}})(qg),Hg=new x.b("channel_sidebar"),Gg="plans?ui_step="+ve.z.SIDEBAR+"&ui_element="+ve.y.PRICING_LINK,Wg=(m.b.bool,m.b.object.isRequired,m.b.object.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(e){e.preventDefault(),this.props.clogger.track(ve.k.GROWTH_PRICING,{contexts:{ui_context:{step:ve.z.SIDEBAR,action:ve.v.CLICK,ui_properties:{element_type:ve.j.LINK,element_name:"upgrade_button"}}}}),Object(te.O)(this.props.team,Gg)}},{key:"render",value:function(){return this.props.featureUpgradeSlackTranslations?h.a.createElement(G.a,{className:"p-channel_sidebar__link p-channel_sidebar__link--upgrade-slack",onClick:this.onClick,href:Gg},h.a.createElement("span",{className:"p-channel_sidebar__name"},Hg.t("Upgrade"))):null}}]),t}(p.PureComponent));Wg.displayName="UpgradeSlackLink",Wg.defaultProps={featureUpgradeSlackTranslations:!1};var Kg=Object(_.b)(function(e){return{team:Object($.d)(e),clogger:Object(ye.a)({state:e})}})(Object(Dt.a)("feature_upgrade_slack_translations")(Wg)),Vg=new x.b("channel_sidebar"),zg=function(e){return h.a.createElement(Lg,Z()({},e,{label:Vg.t("Starred"),qaLabel:"starred"}))};zg.displayName="StarredHeading";var Yg=Object(ud.a)(zg),Qg=n("zbZx"),Jg=n("08ch"),Xg=new x.b("channel_sidebar"),Zg=(m.b.bool,m.b.bool,m.b.bool,m.b.func,m.b.func.isRequired,{canOpenChannelBrowser:!0,sharedChannelsEnabled:!1,showPlus:!1,openSharedChannelCreationOrRequestModal:d.a}),$g=function(){return Object(X_.d)({element:"shared_channels_channel_sidebar_plus_btn"})},ev=function(e){var t=e.canOpenChannelBrowser,n=e.showPlus,a=void 0;t&&(a=Xg.t("Browse all shared channels"));var r=void 0;return t&&(r=Object(Me.a)()?function(){return e.openChannelBrowser({initialFilter:"shared"})}:X_.c),h.a.createElement(Lg,Z()({},e,{onLabelClick:r,tooltip:a,headerAriaLabel:Xg.t("Browse all shared channels"),tooltipArrowOffset:50,label:Xg.t("Shared Channels"),qaLabel:"shared_channels",showPlus:n,plusTooltip:Xg.t("Create a shared channel"),onPlusClick:Object(Me.a)()?e.openSharedChannelCreationOrRequestModal:$g}))};ev.displayName="SharedChannelsHeading",ev.defaultProps=Zg;var tv={openSharedChannelCreationOrRequestModal:function(){return Jg.a.apply(void 0,arguments)},openChannelBrowser:function(){return J_.a.apply(void 0,arguments)}},nv=Object(ud.a)(ev),av=Object(_.b)(function(e){return{canOpenChannelBrowser:!Object(ne.Db)(Object(Ue.b)(e)),sharedChannelsEnabled:1===Object(rt.a)(e,"enable_shared_channels"),featureSonicEscCreation:Object(y.i)(e,"feature_sonic_esc_creation"),featureSonicChannelBrowser:Object(y.i)(e,"feature_sonic_channel_browser"),showPlus:rv(e)}},tv)(nv);function rv(e){var t=!Object(y.i)(e,"feature_shared_channels_block_large_orgs"),n=Object(Ue.b)(e);return Object(Qg.d)(e)&&t?Object(ne.e)(e):!Object(ne.Db)(n)&&!Object(ne.xb)(n)&&Object(It.M)(e)}var iv=n("jveC"),ov=n("auxT"),sv=n("aF86"),lv=new x.b("coachmarks"),cv=(m.b.object,m.b.bool,m.b.string,m.b.bool,m.b.bool,m.b.func.isRequired,m.b.node,{featureSonicChannelBrowser:!1,currentMember:d.a,firstListedChannel:null,inSinglePublicChannel:!1,inSinglePrivateChannel:!1,children:null}),uv=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClose=n.onClose.bind(n),n.renderCoachmarkContent=n.renderCoachmarkContent.bind(n),n}return u()(t,e),o()(t,[{key:"onClose",value:function(e){e.preventDefault(),this.props.setAboutChannelsCoachmarkIsVisible(!1)}},{key:"renderCoachmarkContent",value:function(){var e=this.props,t=e.currentMember,n=e.inSinglePublicChannel,a=e.inSinglePrivateChannel,r=e.firstListedChannel;return Object(ne.X)(t)?lv.t("Channels bring order and searchability to your team\u2019s conversations. Organize by topic (#research), working group (#sales), or specific project (#sales-tv-ad)."):Object(ne.xb)(t)?n?lv.rt("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can send messages and browse archives in one channel, {channelName}.",{channelName:h.a.createElement("strong",null,r),fallbackHash:"714a97c13fc44eebbf3c57a94f5e275f6c6da22f",fallbackHashNs:"coachmarks"}):a?lv.rt("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can access one channel, {channelName}. This is a private, invitation-only channel.",{channelName:h.a.createElement("strong",null,r),fallbackHash:"6b2988717e064c5abfcad7bc9ba9187458753ac3",fallbackHashNs:"coachmarks"}):lv.t("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can send messages and browse archives in the channels listed here."):lv.t("Channels bring order and searchability to your team\u2019s conversations. They\u2019re organized by topic (#research), working group (#sales), or specific project (#sales-tv-ad).")}},{key:"render",value:function(){var e=this.props,t=e.featureSonicChannelBrowser,n=e.children;return t?h.a.createElement(Nf.a,{title:lv.t("Messaging happens in channels"),content:this.renderCoachmarkContent(),onSkip:this.onClose,onContinue:this.onClose,hasSkipLink:!1,hasCloseButton:!1,continueButtonText:lv.t("Got it!"),shouldShow:!0},n):null}}]),t}(p.Component);uv.displayName="ChannelHeadingCoachmark",uv.defaultProps=cv;var dv={setAboutChannelsCoachmarkIsVisible:function(){return rb.p.apply(void 0,arguments)}},pv=Object(_.b)(function(e){var t=Object(re.r)(e),n=t.filter(he.xb),a=t.filter(he.yb);return{currentMember:Object(Ue.b)(e),featureSonicChannelBrowser:Object(y.i)(e,"feature_sonic_channel_browser"),inSinglePrivateChannel:1===t.length&&1===n.length,inSinglePublicChannel:1===t.length&&1===a.length,firstListedChannel:t.length?t[0].name:""}},dv)(uv),hv=n("O+bt"),mv=new x.b("channel_sidebar"),bv=(m.b.bool,m.b.bool,m.b.bool.isRequired,m.b.bool,m.b.bool.isRequired,m.b.bool.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.bool.isRequired,function(e){var t=e.featureOfflineMode,n=e.featureSonicChannelBrowser,a=e.showPlus,r=e.canOpenChannelBrowser,i=e.wasRecentlyOnline,o=e.aboutChannelsCoachmarkIsVisible,s=e.sharedChannelsCoachmarkIsVisible,l=e.maybeShowSharedChannelsCoachmark;Object(p.useEffect)(function(){var e=setTimeout(l,2500);return function(){return clearTimeout(e)}},[l]);var c=void 0;r&&(c=n?mv.t("Browse all channels"):h.a.createElement(sv.a,null,mv.t("Browse all channels")));var u=mv.t("Create a channel");t&&!i&&(u=h.a.createElement(ov.a,{tooltipLabel:mv.t("Create a channel")}));var d=void 0;r&&(d=Object(Me.a)()&&n?e.openChannelBrowser:X_.b);var m=h.a.createElement(Lg,Z()({},e,{onLabelClick:d,label:mv.t("Channels"),qaLabel:"channels",tooltip:c,headerAriaLabel:mv.t("Browse all channels"),tooltipArrowOffset:30,showPlus:a,plusTooltip:u,plusAriaLabel:mv.t("Create a channel")}));return o?h.a.createElement(pv,null,h.a.createElement("div",null,m)):s?h.a.createElement(hv.b,null,h.a.createElement("div",null,m)):m});bv.defaultProps={showPlus:!0,canOpenChannelBrowser:!0,featureSonicChannelBrowser:!1};var fv={openChannelBrowser:function(){return J_.a.apply(void 0,arguments)},maybeShowSharedChannelsCoachmark:function(){return iv.a.apply(void 0,arguments)}},_v=Object(_.b)(function(e){return{showPlus:Object(It.C)(e)||Object(It.B)(e),canOpenChannelBrowser:!Object(ne.Db)(Object(Ue.b)(e)),featureSonicChannelBrowser:Object(y.i)(e,"feature_sonic_channel_browser"),featureOfflineMode:Object(y.i)(e,"feature_offline_mode"),wasRecentlyOnline:Object(ee.h)(e),aboutChannelsCoachmarkIsVisible:Object(rb.b)(e),sharedChannelsCoachmarkIsVisible:Object(rb.i)(e)}},fv)(bv),gv=(m.b.string,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.number,m.b.bool,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.func,{name:"",setIsRenaming:d.a,saveFolderData:d.a,renameFolder:d.a,toggleFolderCollapse:d.a,setFolderCollapse:d.a,badgeCount:0,hasUnreads:!1,isCollapsed:!1,isRenaming:!1,onDragStart:d.a,onDragEnd:d.a,onDrop:d.a,onDragOver:d.a}),vv=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleFolderCollapse=n.toggleFolderCollapse.bind(n),n.renameFolder=n.renameFolder.bind(n),n.showRenameBox=n.showRenameBox.bind(n),n.setRenamingLabel=n.setRenamingLabel.bind(n),n.setInputRef=n.setInputRef.bind(n),n.onBlur=n.onBlur.bind(n),n.state={renamingLabel:n.props.name,hasTyped:!1},n}return u()(t,e),o()(t,[{key:"onBlur",value:function(e){if(this.props.isRenaming){var t=this.props.name,n=e.target.value;this.props.renameFolder({oldName:t,newName:n}),this.props.saveFolderData()}}},{key:"setRenamingLabel",value:function(e){var t=e.target.value;this.setState(function(){return{renamingLabel:t,hasTyped:!0}})}},{key:"setInputRef",value:function(e){e&&!this.state.hasTyped&&(e.select(),e.focus())}},{key:"showRenameBox",value:function(){var e=this.props.name;this.props.setIsRenaming({name:e}),this.setState(function(){return{renamingLabel:e,hasTyped:!1}})}},{key:"toggleFolderCollapse",value:function(e){e.altKey?this.props.setFolderCollapse({isCollapsed:!this.props.isCollapsed}):this.props.toggleFolderCollapse({name:this.props.name}),this.props.saveFolderData()}},{key:"renameFolder",value:function(e){var t=this.props.name,n=void 0;"Enter"===e.key&&(n=e.target.value),"Escape"===e.key&&(n=this.props.name),void 0!==n&&(this.props.renameFolder({oldName:t,newName:n}),this.props.saveFolderData())}},{key:"render",value:function(){var e=this.props.isRenaming?"":h.a.createElement(Re.c,{className:f()("p-channel_sidebar__folder_heading_icon",{"p-channel_sidebar__folder_heading_icon_collapsed":this.props.isCollapsed}),onClick:this.toggleFolderCollapse}),t=void 0;t=this.props.isRenaming?h.a.createElement("input",{type:"text",className:"p-channel_sidebar__folder_heading_label_rename",value:this.state.renamingLabel,onChange:this.setRenamingLabel,onKeyDown:this.renameFolder,ref:this.setInputRef,onBlur:this.onBlur}):Object(Ei.a)(this.props.name,"<")?h.a.createElement(Re.c,{className:f()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":""},this.props.name):h.a.createElement(Re.c,{className:f()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":""},h.a.createElement(Pn.a,{text:this.props.name,noJumbomoji:!0,noHighlights:!0}));var n=this.props.isCollapsed?h.a.createElement(Re.c,{className:"p-channel_sidebar__folder_heading_badge",onClick:this.toggleFolderCollapse},h.a.createElement(j_.b,{count:this.props.badgeCount,className:"p-channel_sidebar__badge"})):"";return h.a.createElement("div",{className:"p-channel_sidebar__folder_heading","data-qa-channel-sidebar-section-heading":"folder",draggable:!0,"data-drag-type":"folder","data-drag-id":this.props.name,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver},h.a.createElement("h2",{className:"offscreen"},this.props.name),t,n,e)}}]),t}(h.a.PureComponent);vv.displayName="FolderHeading",vv.defaultProps=gv;var yv={toggleFolderCollapse:ib.k,setFolderCollapse:ib.i,saveFolderData:ib.h,renameFolder:ib.g,setIsRenaming:ib.j},kv=Object(_.b)(function(e,t){var n=t.name,a=Object(ib.d)(e,n),r=a?Object(bo.a)(a.channelIds,function(t){return Object(re.d)(e,t)}):[],i=!!a&&a.isCollapsed,o=!!a&&a.isRenaming,s=r.length>0?Object(fo.a)(Object(bo.a)(r,function(t){return Object(re.c)(e,t)})):0;return{isCollapsed:i,isRenaming:o,hasUnreads:r.length>0&&!!Object(Iu.a)(r,function(t){return Object(he.Lb)(t)&&!Object(wn.c)(e,t.id)}),badgeCount:s}},yv)(vv),Ov=new x.b("channel_sidebar"),jv=(m.b.string.isRequired,function(e){return h.a.createElement(Lg,Z()({},e,{tooltipClassName:"p-channel_sidebar__section_heading_tip--short",label:Ov.t("Organization Channels"),qaLabel:"org_wide_channels",tooltip:Ov.t("Shared with all workspaces at {orgName}",{orgName:e.orgName}),tooltipArrowOffset:50}))});jv.displayName="OrgWideChannelsHeading";var Cv=Object(ud.a)(jv),Ev=Object(_.b)(function(e){return{orgName:Object($.e)(e)}})(Cv),wv=new x.b("channel_sidebar"),Sv=function(e){return h.a.createElement(Lg,{label:wv.t("Direct Messages"),qaLabel:"ims",tooltip:wv.t("Open a direct message"),headerAriaLabel:wv.t("Open a direct message"),tooltipArrowOffset:50,showPlus:!0,plusTooltip:wv.t("Open a direct message"),plusAriaLabel:wv.t("Open a direct message"),onLabelClick:function(){return e.openDmBrowserModal()},onPlusClick:function(){return e.openDmBrowserModal()}})};Sv.displayName="DirectMessagesHeading",Sv.defaultProps={openDmBrowserModal:d.a};var Iv={openDmBrowserModal:function(){return Zn.a.apply(void 0,arguments)}},Tv=Object(_.b)(null,Iv)(Sv),Nv=new x.b("channel_sidebar"),Rv=function(e){var t=e.featureM11nAppsBrowser?Nv.t("Browse Apps"):h.a.createElement(sv.a,null,Nv.t("Browse apps")),n=e.featureM11nAppsBrowser?e.openAppsBrowserModal:X_.a;return h.a.createElement(Lg,Z()({},e,{onLabelClick:n,onPlusClick:n,label:Nv.t("Apps"),qaLabel:"apps",tooltip:t,headerAriaLabel:Nv.t("Browse apps"),tooltipArrowOffset:16,showPlus:!0,plusTooltip:t,plusAriaLabel:Nv.t("Browse apps")}))};Rv.displayName="AppsHeading",Rv.defaultProps={featureM11nAppsBrowser:!1};var Av=Object(_.b)(function(e){return{featureM11nAppsBrowser:Object(y.i)(e,"feature_m11n_apps_browser")}},function(e){return Object(Vr.b)({openAppsBrowserModal:na.a},e)})(Rv),Pv=n("3lVB"),Mv=new x.b("channel_sidebar"),Dv=(m.b.arrayOf(m.b.shape({type:m.b.string,scrollBottom:m.b.number})).isRequired,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.object.isRequired,m.b.object,m.b.object,m.b.bool,m.b.oneOf(["warm","cold"]),m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.string,m.b.bool,m.b.bool,m.b.func,m.b.func,{onItemSelect:d.a,onInviteClick:d.a,onCreateChannelClick:d.a,onCreateSharedChannelClick:d.a,onResize:d.a,onScroll:d.a,sidebarFoldersIsEnabled:!1,onDragStart:d.a,onDragEnd:d.a,onDrop:d.a,onDragOver:d.a,onCreateFolder:d.a,shouldTrackTTFMP:!0,logger:null,clogger:null,bootType:null,featureReactAllUnreads:!1,featureModernizeInvites:!1,setHideInviteButton:d.a,setHideAddChannelButton:d.a,teamId:null,featureSeeMoreChannels:!1,userAttentionIsOnChat:!1,removeFromSectionNavigation:d.a,addToSectionNavigation:d.a}),xv=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["setScrollbarRef","getCurrentScrollTop","resetCurrentScrollTopMaybe","setListRef","onResize","onScroll","onItemClick","onInviteClick","onInviteCloseClick","onAddChannelCloseClick","renderRow","renderRowWithWrapper","onItemSelected","scrollToTopOfChannelList","focus"]),n.currentScrollTop=0,n.height=0,n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this;if(Object(aa.a)(window,"performance.timing.fetchStart")){var t=this.props.shouldTrackTTFMP;if(t&&Object(Me.a)()){var n=Object(g.getClientStoreInstance)();(t=Object(t_.d)(n.getState()))&&n.dispatch(Object(t_.b)(!1))}var a=Promise.resolve();Object(ze.P)()&&Object(qe.u)()&&(a=Object(ze.C)("shouldLogFirstMeaningfulPaint").then(function(e){"false"===e&&(t=!1)})),(qe.k||qe.s||qe.n)&&(t=!1);var r=Object(n_.d)(window.desktop),i=Object(qe.t)()?"_reload":"",o=Date.now()-(window.performance.timing.fetchStart+r),s=Object(Me.a)()?"ttfmp_sonic_"+this.props.bootType+i:"ttfmp_legacy"+i;a.then(function(){t&&(e.shouldLogFirstMeaningfulPaint=!1,Object(ze.P)()&&Object(qe.u)()&&Object(ze.sb)("shouldLogFirstMeaningfulPaint","false"),e.props.logger.info("PERF","First meaningful paint: "+o+"ms"),e.props.telemeter.store(s,o))}),this.clogInvitePeopleButton()}}},{key:"componentDidUpdate",value:function(e){if(Object(Me.a)()){var t=Object(g.getClientStoreInstance)(),n=t.getState(),a=Object(ht.i)(n);if(Object(t_.e)(n)&&a===this.props.teamId){var r=Object(Pv.b)(),i=Date.now()-r;this.props.telemeter.store("team_switch_sonic",i),t.dispatch(Object(t_.c)(!1))}}this.List&&e.rows!==this.props.rows&&this.List.recomputeRowHeights(),!e.userAttentionIsOnChat&&this.props.userAttentionIsOnChat&&this.props.addToSectionNavigation(),!this.props.userAttentionIsOnChat&&e.userAttentionIsOnChat&&this.props.removeFromSectionNavigation()}},{key:"onResize",value:function(e){var t=e.height;this.resetCurrentScrollTopMaybe(t),this.height=t,this.props.onResize({height:t})}},{key:"onScroll",value:function(e,t){var n=t.scrollTop;this.currentScrollTop=n,this.List&&this.List.Grid.handleScrollEvent({scrollTop:n}),this.props.onScroll&&this.props.onScroll(n)}},{key:"onItemClick",value:function(e,t){e.preventDefault(),this.props.onItemSelect(t)}},{key:"onInviteClick",value:function(e,t){this.props.onInviteClick(t)}},{key:"onInviteCloseClick",value:function(){this.props.setHideInviteButton()}},{key:"onAddChannelCloseClick",value:function(){this.props.setHideAddChannelButton()}},{key:"onItemSelected",value:function(e){this.selectedItemRef=e}},{key:"setScrollbarRef",value:function(e){this.Scrollbar=e&&e.getWrappedInstance?e.getWrappedInstance():e}},{key:"setListRef",value:function(e){this.List=e}},{key:"getCurrentScrollTop",value:function(){return this.currentScrollTop}},{key:"getContentHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.rows;return e.length?e[e.length-1].scrollBottom:0}},{key:"focus",value:function(){this.selectedItemRef&&this.selectedItemRef.focus()}},{key:"clogInvitePeopleButton",value:function(){var e=this.props.clogger;e.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"invite_people"}}}}),e.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"invite_people"}}}}),e.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}}),e.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}})}},{key:"resetCurrentScrollTopMaybe",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.rows;e>this.getContentHeight(t)&&(this.currentScrollTop=0)}},{key:"scrollToTarget",value:function(e){var t=this,n=Math.max(0,Math.min(this.getContentHeight()-this.height,e));Object($f.a)({fromValue:this.currentScrollTop,toValue:n,duration:200,easing:"easeOutQuad",onTick:function(e){var n=e.value,a=e.nextTick;t.Scrollbar.scrollTop(n),a()}})}},{key:"scrollToTopOfChannelList",value:function(){this.Scrollbar&&this.Scrollbar.scrollTop(0)}},{key:"renderRowWithWrapper",value:function(e,t){var n=e.height,a=e.id,r=e.type,i=a||t+"-"+r,o={quickswitcherButton:"listitem",allUnreadsLink:"listitem",allThreadsLink:"listitem",searchLink:"listitem",pageLink:"listitem",sectionHeading:"listitem",channel:"listitem",app:"listitem",addAChannelLink:"listitem",invitePeopleLink:"listitem",installAppsLink:"listitem",gdrivePromptLink:"listitem",appSuggestionLinks:"listitem",upgradeSlackLink:"listitem",spacer:"presentation",topPadding:"presentation",emptyState:"listitem"}[r];return h.a.createElement("div",{key:i,style:{height:n},role:o},this.renderRow(e))}},{key:"renderRow",value:function(e){var t=this.props,n=t.onItemSelect,a=t.featureReactAllUnreads,r=t.featureSeeMoreChannels;switch(e.type){case"quickswitcherButton":return h.a.createElement(Mf,null);case"allUnreadsLink":return Object(Me.a)()&&!a?h.a.createElement(K_,{onItemSelected:this.onItemSelected}):h.a.createElement(B_,{selectItem:n,onItemSelected:this.onItemSelected});case"allThreadsLink":return h.a.createElement(z_,{selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected});case"searchLink":return h.a.createElement(Q_,{selectItem:n});case"pageLink":return h.a.createElement(og,{id:e.id,selectItem:n,onItemSelected:this.onItemSelected});case"sectionHeading":return this.renderSectionHeading(e.name);case"folderHeading":return this.renderFolderHeading(e.name);case"channel":return this.renderChannel(e.id,e.index);case"appDmSuggestion":return this.renderAppDmSuggestion(e.id,e.index);case"addAChannelLink":return h.a.createElement(ng,{isDim:e.dim,qaLabel:"_add_channel",label:r?Mv.t("See more channels"):Mv.t("Add a channel"),onClickClose:this.onAddChannelCloseClick});case"invitePeopleLink":return h.a.createElement(cg,{selectItem:this.onInviteClick,dim:e.dim,qaLabel:"_invite_people",label:Mv.t("Invite people"),showClose:!0,onClickClose:this.onInviteCloseClick,featureModernizeInvites:this.props.featureModernizeInvites});case"installAppsLink":return h.a.createElement(fg,null);case"gdrivePromptLink":return h.a.createElement(kg,null);case"appSuggestionLinks":return h.a.createElement(Ig,null);case"upgradeSlackLink":return h.a.createElement(Kg,null);case"spacer":case"topPadding":return null;default:Object(ut.b)().warn("Row type "+e.type+" not implemented",e)}return null}},{key:"renderSectionHeading",value:function(e){var t=this.props,n=t.onCreateChannelClick,a=t.onCreateSharedChannelClick;switch(e){case"drafts":return h.a.createElement(Ug,{scrollToTopOfChannelList:this.scrollToTopOfChannelList});case"starred":return this.props.sidebarFoldersIsEnabled?h.a.createElement(Lg,{label:Mv.t("Starred"),qaLabel:"starred",showPlus:!0,onPlusClick:this.props.onCreateFolder}):h.a.createElement(Yg,null);case"sharedChannels":return h.a.createElement(av,{onPlusClick:a});case"channels":return h.a.createElement(_v,{onPlusClick:n});case"orgWideChannels":return h.a.createElement(Ev,null);case"ims":return h.a.createElement(Tv,null);case"apps":return h.a.createElement(Av,null);default:return null}}},{key:"renderFolderHeading",value:function(e){return h.a.createElement(kv,{name:e,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver})}},{key:"renderAppDmSuggestion",value:function(e,t){return h.a.createElement(h_,{id:e,index:t})}},{key:"renderChannel",value:function(e,t){return this.props.sidebarFoldersIsEnabled?h.a.createElement(R_,{key:e,id:e,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:t,sidebarFoldersIsEnabled:!0,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver}):h.a.createElement(R_,{key:e,id:e,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:t})}},{key:"render",value:function(){var e=this;return h.a.createElement(Nu.a,{onResize:this.onResize},function(t){var n=t.width,a=t.height;return h.a.createElement(e_.a,{width:n,height:a,contentHeight:e.getContentHeight(),onScroll:e.onScroll,ref:e.setScrollbarRef,serializationKey:"channel-list-scrollbar"},h.a.createElement("div",{className:"p-channel_sidebar__static_list","data-qa":"channel_sidebar_list","aria-label":Mv.t("Channels and direct messages"),role:"list"},e.props.rows.map(e.renderRowWithWrapper)))})}}]),t}(h.a.PureComponent);xv.displayName="ChannelList",xv.defaultProps=Dv;var Lv=Object(Me.a)()?Object(Pe.a)(xv,"ChannelList",{index:2}):xv,Fv=new x.b("channel_sidebar"),Bv=(m.b.bool.isRequired,m.b.oneOfType([m.b.string,m.b.bool]),m.b.bool,m.b.oneOf(["top","bottom"]),m.b.func,{linkedId:null,isMention:!1,position:"top",ensureRowInView:d.a}),qv=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onClick=e.onClick.bind(e),e}return u()(t,e),o()(t,[{key:"onClick",value:function(e){var t=this.props,n=t.linkedId,a=t.ensureRowInView;e.preventDefault(),n&&a(n)}},{key:"render",value:function(){var e=this.props,t=e.isShowing,n=e.position,a=e.isMention,r=e.linkedId;if(!t)return null;var i=f()("p-channel_sidebar__banner",{"p-channel_sidebar__banner--mentions":a,"p-channel_sidebar__banner--unreads":!a,"p-channel_sidebar__banner--top":"top"===n,"p-channel_sidebar__banner--bottom":"bottom"===n}),o="top"===n?"up":"down",s=a?Fv.t("Unread Mentions"):Fv.t("More Unreads");return h.a.createElement(Re.c,{className:i,onClick:this.onClick,"data-qa-linked-id":r},s,h.a.createElement(se.b,{type:"arrow_"+o,inline:!0,className:"p-channel_sidebar__banner_icon"}))}}]),t}(h.a.PureComponent);qv.displayName="UnreadBanner",qv.defaultProps=Bv;var Uv=qv,Hv=n("ZSbO"),Gv=new x.b("channel_sidebar"),Wv=Object(pb.a)(1),Kv={FOCUS_WITHIN:2,CONTAINER_FOCUSED:1,NOT_FOCUSED:-1},Vv=(m.b.bool,m.b.string,m.b.arrayOf(m.b.string),m.b.arrayOf(m.b.string),m.b.arrayOf(m.b.string),m.b.arrayOf(m.b.object),m.b.object,m.b.arrayOf(m.b.string),m.b.arrayOf(m.b.string),m.b.func,m.b.func,m.b.func,m.b.string,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.string,m.b.bool,m.b.bool,m.b.bool,m.b.object,m.b.object,m.b.bool,m.b.oneOf(["warm","cold"]),m.b.string,m.b.object,m.b.object,m.b.func,m.b.func,m.b.bool,m.b.bool,m.b.bool,{isBooted:!1,selectedItemId:null,mentionIds:[],unreadIds:[],mutedMentionIds:[],idsNeedingPresenceSubscription:[],rows:[],rowsMap:{},rowIds:[],onItemSelect:d.a,onInviteClick:d.a,onCreateChannelClick:d.a,jumperCoachmarkState:null,historyNavigationEnabled:!1,useHistoryNavigation:!1,useGlobalNav:!1,featureGlobalNavLayout:!1,featureClassicNav:!1,sidebarFoldersIsEnabled:!1,ensureDraftChannelObjects:void 0,initializeFolderData:d.a,initializeGdrivePromptData:d.a,initializeAppSuggestionLinksData:d.a,createFolder:d.a,dragFolderOrChannel:d.a,ariaLandmarkLabel:null,featureSonicPresenceManager:!1,featureSonicInputs:!1,featureReactAllUnreads:!1,telemeter:null,isWindowFocused:!1,logger:null,bootType:null,teamId:null,suggestedChannelsMap:{},clogger:{},setHideInviteButton:d.a,setHideAddChannelButton:d.a,featureSeeMoreChannels:!1,featureModernizeInvites:!1,userAttentionIsOnChat:!1}),zv=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setRef=n.setRef.bind(n),n.ensureRowInView=n.ensureRowInView.bind(n),n.onResize=n.onResize.bind(n),n.onScroll=n.onScroll.bind(n),n.onItemSelect=n.onItemSelect.bind(n),n.onDragStart=n.onDragStart.bind(n),n.onDragEnd=n.onDragEnd.bind(n),n.onDragOver=n.onDragOver.bind(n),n.onDrop=n.onDrop.bind(n),n.onCreateFolder=n.onCreateFolder.bind(n),Object(Me.a)()||(n.onFocusEnter=n.onFocusEnter.bind(n),n.onFocusLeave=n.onFocusLeave.bind(n),n.onFocusWithin=n.onFocusWithin.bind(n)),n.state=Z()({},n.getUnreadRows(e),{scrolledBelowFirstMention:!1,scrolledBelowFirstUnread:!1,scrolledAboveLastMention:!1,scrolledAboveLastUnread:!1,listHeight:0,hasInitializedFolderData:!1,hasInitializedGdrivePromptData:!1,hasInitializedAppSuggestionLinksData:!1}),Object(Me.a)()||(n.state.hasKeyboardFocus=Kv.NOT_FOCUSED),n.presenceList=Object(yf.a)(n.props.idsNeedingPresenceSubscription),n.commands=[{keys:["option+up"],handler:n.gotoNext.bind(n,"up",!1)},{keys:["option+down"],handler:n.gotoNext.bind(n,"down",!1)},{keys:["option+shift+up"],handler:n.gotoNext.bind(n,"up",!0)},{keys:["option+shift+down"],handler:n.gotoNext.bind(n,"down",!0)}],n.pendingEnsureRowInView=!1,n.shouldTrackTTFMP=!0,n.isSuggestedChannelsClogSent=!1,n.hasInitializedDraftsData=!1,n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.keyCommands=new gu.a,this.keyCommands.bindAll(this.commands),this.maybeLoadFolderData(),this.maybeLoadGdriveData(),this.maybeLoadDraftsData(),this.maybeLoadAppSuggestionLinksData(),this.shouldTrackTTFMP=this.props.isWindowFocused}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(this.shouldTrackTTFMP=this.shouldTrackTTFMP&&e.isWindowFocused,e.isBooted){e.featureSonicPresenceManager||Object(gf.a)()||Object(bb.a)(this.props.idsNeedingPresenceSubscription,e.idsNeedingPresenceSubscription)||this.presenceList&&(this.presenceList.clear(),this.presenceList.add(e.idsNeedingPresenceSubscription));var n="SHOW_BUTTON"===e.jumperCoachmarkState||"HIDE_BUTTON"===e.jumperCoachmarkState,a=this.props.rows.length&&e.rows.length&&("Vquick_switcher"===this.props.rows[0].id||"Vquick_switcher"===e.rows[0].id)&&this.props.rows[0].id!==e.rows[0].id;(n||a)&&this.ChannelList&&this.ChannelList.Scrollbar&&this.ChannelList.Scrollbar.scrollTop(0),this.setState(function(n){var a=Z()({},n,t.getUnreadRows(e));return t.ChannelList&&t.ChannelList.resetCurrentScrollTopMaybe(a.listHeight,e.rows),Z()({},a,t.getBannerState(a))})}}},{key:"componentWillUpdate",value:function(e){Wv&&e.telemeter.mark("react_channel_sidebar_update_mark")}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.selectedItemId,a=t.isBooted,r=t.jumperCoachmarkState,i=t.rows,o=t.suggestedChannelsMap,s=t.clogger,l=t.telemeter,c="SHOW_BUTTON"===r||"HIDE_BUTTON"===r,u=e.selectedItemId!==n,d=a&&!e.isBooted;if(c||!u&&!d||this.ensureRowInView(n),this.maybeLoadFolderData(),this.maybeLoadGdriveData(),this.maybeLoadDraftsData(),this.maybeLoadAppSuggestionLinksData(),Wv&&l.measureAndClear("react_channel_sidebar_update_mark","react_channel_sidebar_update"),!this.isSuggestedChannelsClogSent&&Object.keys(o).length){var p=i.filter(function(e){return"channel"===e.type&&o[e.id]}).length;p&&s.track&&(this.isSuggestedChannelsClogSent=!0,s.track("SIDEBAR_SUGGESTED_CHANNELS_RENDERED",{count:p}))}}},{key:"componentWillUnmount",value:function(){this.keyCommands.reset(),this.presenceList&&this.presenceList.destroy()}},{key:"onCreateFolder",value:function(){this.props.sidebarFoldersIsEnabled&&this.props.createFolder()}},{key:"onDragStart",value:function(e){if(this.props.sidebarFoldersIsEnabled){var t=e.dataTransfer;t.effectAllowed="move",t.dropEffect="move";for(var n=e.target;n&&!n.attributes["data-drag-type"];)n=n.parentNode;var a={src:{type:n.attributes["data-drag-type"].value,id:n.attributes["data-drag-id"].value}};this.setState(function(){return{dragData:a}})}}},{key:"onDragOver",value:function(e){this.props.sidebarFoldersIsEnabled&&e.preventDefault()}},{key:"onDrop",value:function(e){if(this.props.sidebarFoldersIsEnabled){for(var t=e.target;t&&!t.attributes["data-drag-type"];)t=t.parentNode;this.setState(function(e){return{dragData:Z()({},e.dragData,{dest:{type:t.attributes["data-drag-type"].value,id:t.attributes["data-drag-id"].value}})}})}}},{key:"onDragEnd",value:function(){this.props.sidebarFoldersIsEnabled&&(this.props.dragFolderOrChannel(this.state.dragData),this.setState(function(){return{dragData:null}}))}},{key:"onScroll",value:function(){this.setState(this.getBannerState)}},{key:"onResize",value:function(e){var t=this,n=e.height;this.setState(function(e){var a=Z()({},e,{listHeight:n});return Z()({},a,t.getBannerState(a))},function(){!1!==t.pendingEnsureRowInView&&t.ensureRowInView(t.pendingEnsureRowInView)})}},{key:"onFocusEnter",value:function(e){var t=e.relatedEvent,n=e.target,a=e.currentTarget;if(!t||"mousedown"!==t.type){var r=n===a?Kv.CONTAINER_FOCUSED:Kv.FOCUS_WITHIN;this.setState(function(){return{hasKeyboardFocus:r}})}}},{key:"onFocusWithin",value:function(){this.setState(function(){return{hasKeyboardFocus:Kv.FOCUS_WITHIN}})}},{key:"onFocusLeave",value:function(){this.setState(function(){return{hasKeyboardFocus:Kv.NOT_FOCUSED}})}},{key:"onItemSelect",value:function(e){return this.props.onItemSelect(e)}},{key:"setRef",value:function(e){this.ChannelList=e}},{key:"getUnreadRows",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.rowsMap,n=e.unreadIds,a=e.mentionIds;return{firstUnread:t[Object(_f.a)(n)],lastUnread:t[Object(Tu.a)(n)],firstMention:t[Object(_f.a)(a)],lastMention:t[Object(Tu.a)(a)]}}},{key:"getBannerState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.firstMention,n=e.firstUnread,a=e.lastMention,r=e.lastUnread,i=e.listHeight,o=this.ChannelList?this.ChannelList.getCurrentScrollTop():0,s=!!(n&&n.scrollBottom-10<=o),l=!!(r&&r.scrollTop+10>=o+i);return{scrolledBelowFirstMention:!!(t&&t.scrollBottom-10-(s?24:0)<=o),scrolledBelowFirstUnread:s,scrolledAboveLastMention:!!(a&&a.scrollTop+10+(l?24:0)>=o+i),scrolledAboveLastUnread:l}}},{key:"maybeLoadFolderData",value:function(){this.props.sidebarFoldersIsEnabled&&!this.state.hasInitializedFolderData&&(this.props.initializeFolderData(),this.setState(function(e){return Z()({},e,{hasInitializedFolderData:!0})}))}},{key:"maybeLoadDraftsData",value:function(){this.props.ensureDraftChannelObjects&&!this.hasInitializedDraftsData&&(this.props.ensureDraftChannelObjects(),this.hasInitializedDraftsData=!0)}},{key:"maybeLoadGdriveData",value:function(){this.state.hasInitializedGdrivePromptData||this.props.initializeGdrivePromptData===d.a||(this.props.initializeGdrivePromptData(),this.setState(function(){return{hasInitializedGdrivePromptData:!0}}))}},{key:"maybeLoadAppSuggestionLinksData",value:function(){this.state.hasInitializedAppSuggestionLinksData||this.props.initializeAppSuggestionLinksData===d.a||(this.props.initializeAppSuggestionLinksData(),this.setState(function(){return{hasInitializedAppSuggestionLinksData:!0}}))}},{key:"ensureRowInView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.selectedItemId,t=this.props,n=t.rows,a=t.rowsMap,r=t.rowIds;if(a[e]){var i=this.ChannelList.currentScrollTop,o=this.state.listHeight;if(0!==o){this.pendingEnsureRowInView=!1;var s=n[Math.max(r.indexOf(e)-2,0)].scrollTop;if(s<i)this.ChannelList.scrollToTarget(s);else{var l=n[Math.min(r.indexOf(e)+2,n.length-1)].scrollBottom-o;l>i&&this.ChannelList.scrollToTarget(l)}}else this.pendingEnsureRowInView=e}}},{key:"gotoNext",value:function(e,t){var n=this,a=this.props,r=a.rows,i=a.rowIds,o=a.selectedItemId;if(a.featureSonicInputs){var s=Object(vf.a)({viewContext:hu.y.MESSAGE_PANE,channelId:o});if(s){var l=s.getLength();if(s.hasFocus()&&l>0){var c=s.getSelection();if(c){if(c.length>0)return;if("up"===e&&0!==c.index)return;if("down"===e&&c.index!==l)return}}}}else{var u=Object(kf.c)(),d=Object(Of.e)(u);if(Object(Of.f)(u)&&d>0){if(Object(Of.h)(u))return;var p=Object(Of.b)(u).start;if("up"===e&&0!==p)return;if("down"===e&&p!==d)return}}var h=i.indexOf(o),m=Object(El.a)(Object(El.a)(Object(bo.a)(r,function(e,t){return Z()({},e,{index:t})}),function(e){return"channel"===e.type}),function(e){return!t||Object(ff.a)(n.props.unreadIds,e.id)>=0||Object(ff.a)(n.props.mutedMentionIds,e.id)>=0});if(0!==m.length){var b=void 0;void 0===(b="down"===e?Object(Iu.a)(m,function(e){return e.index>h}):Object(bf.a)(m,function(e){return e.index<h}))&&(b="down"===e?Object(_f.a)(m):Object(Tu.a)(m)),this.props.onItemSelect(b.id)}}},{key:"renderFocusOutline",value:function(){return this.state.hasKeyboardFocus===Kv.CONTAINER_FOCUSED?h.a.createElement("div",{className:"sectionfocusindicator"}):null}},{key:"render",value:function(){if(!this.props.isBooted)return null;var e=this.props,t=e.rows,n=e.onInviteClick,a=e.onCreateChannelClick,r=e.selectedItemId,i=e.historyNavigationEnabled,o=e.useHistoryNavigation,s=e.useGlobalNav,l=e.featureGlobalNavLayout,c=e.featureClassicNav,u=e.featureReactAllUnreads,d=e.sidebarFoldersIsEnabled,p=e.ariaLandmarkLabel,m=e.telemeter,b=e.logger,_=e.bootType,g=e.teamId,v=e.featureModernizeInvites,y=e.featureSeeMoreChannels,k=e.clogger,O=e.userAttentionIsOnChat,j=this.state,C=j.scrolledBelowFirstMention,E=j.scrolledBelowFirstUnread,w=j.scrolledAboveLastMention,S=j.scrolledAboveLastUnread,I=j.firstMention,T=j.firstUnread,N=j.lastMention,R=j.lastUnread,A=!Object(Me.a)()&&this.state.hasKeyboardFocus!==Kv.NOT_FOCUSED,P=Object(Me.a)()||this.state.hasKeyboardFocus!==Kv.CONTAINER_FOCUSED?null:"-1",M=f()("p-channel_sidebar",{focusablesection:!Object(Me.a)()&&A,"p-channel_sidebar--global_nav":s,"p-channel_sidebar--global_nav_layout":l,"p-channel_sidebar--classic_nav":c}),D=null;s&&(D=l?h.a.createElement(Tf,null):h.a.createElement("div",{className:"p-global_nav__sidebar_divider"}));var x=Object(Me.a)()?{}:{"data-is-focusable-section":!0,tabIndex:P},L=h.a.createElement("nav",Z()({className:M,"data-qa-channel-sidebar":!0,"data-qa-channel-sidebar-selected-item-id":r,"aria-labelledby":p},x),h.a.createElement("h1",{id:"channel_sidebar_aria_label",className:"offscreen"},Gv.t("Channel Sidebar")),!s&&h.a.createElement(Hv.a,null),D,i&&h.a.createElement(Zf,{useHistoryNavigation:o}),h.a.createElement("div",{className:"p-channel_sidebar__list"},h.a.createElement(Uv,{position:"top",isShowing:C||E,isMention:C,linkedId:C&&I.id||E&&T.id,ensureRowInView:this.ensureRowInView}),h.a.createElement(Lv,{rows:t,onItemSelect:this.onItemSelect,onInviteClick:n,onCreateChannelClick:a,onScroll:this.onScroll,onResize:this.onResize,featureReactAllUnreads:u,sidebarFoldersIsEnabled:d,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrop:this.onDrop,onDragOver:this.onDragOver,onCreateFolder:this.onCreateFolder,ref:this.setRef,telemeter:m,logger:b,shouldTrackTTFMP:this.shouldTrackTTFMP,bootType:_,teamId:g,setHideInviteButton:this.props.setHideInviteButton,setHideAddChannelButton:this.props.setHideAddChannelButton,featureModernizeInvites:v,featureSeeMoreChannels:y,clogger:k,userAttentionIsOnChat:O}),h.a.createElement(Uv,{position:"bottom",isShowing:w||S,isMention:w,linkedId:w&&N.id||S&&R.id,ensureRowInView:this.ensureRowInView})),Object(Me.a)()?null:this.renderFocusOutline());return Object(Me.a)()?L:h.a.createElement(jf.a,{onFocusEnter:this.onFocusEnter,onFocusWithin:this.onFocusWithin,onFocusLeave:this.onFocusLeave},L)}}]),t}(p.PureComponent);zv.displayName="ChannelSidebar",zv.defaultProps=Vv;var Yv=zv,Qv=Object(pb.a)(1),Jv=function(e){if(Object(ue.h)(e,"add_channel_prompt_dismissed"))return!1;if(Object(Ue.k)(e))return!1;if(!!Object(ue.f)(e))return!0;for(var t=Object(re.b)(e)||{},n=Object.keys(t),a=0,r=0;r<n.length;r++)if(Object(he.Ob)(t[n[r]])&&(a+=1),a>10)return!1;return!0},Xv=function(e){var t=Object($.d)(e);if(Object(te.q)(t)||!Object(Nt.d)(e))return!1;var n=Object(wl.a)(Object(El.a)(Object(Ue.a)(e),function(e){return!e.is_slackbot}));return!Object(ue.h)(e,"channel_sidebar_hide_invite")&&(!(n>=2)||"dim")},Zv=Object(_.c)(function(e){var t=void 0,n=void 0,a=void 0,r=void 0,i=void 0,o=void 0,s=void 0,l=void 0,c=void 0,u=void 0,p=void 0,h=void 0,m=void 0,b=void 0,f=void 0,_=void 0;return function(g,O){!function(e,t){Qv&&Object(dn.c)({state:t}).mark(e+"_mark")}("react_channel_sidebar_selector_factory",g);var j=Object(ab.b)(g),C=Object(ut.a)({state:g}),E=Object(ye.a)({state:g}),w=Object(dn.c)({state:g}),S=Object(sb.g)(g),T=Object(sb.b)(g);if(!j)return{isBooted:j,isWindowFocused:S};var N=Object(k.a)(g),R=O.onItemSelect,A=function(e){var t=Object(hb.b)(e),n=Object(mb.a)(e),a=Lb(e),r=a.sidebarSections,i=a.sidebarSectionsOrdered,o=a.idsNeedingPresenceSubscription,s="enabled"===Object(Cs.c)(e,"folders_sidebar")&&Object(ue.h)(e,"folders_enabled"),l=s?Object(ib.e)(e):[],c=Object(y.i)(e,"feature_pages"),u=af({hasQuickswitcherButton:!t&&!n&&Object(ue.h)(e,"show_sidebar_quickswitcher_button"),hasAllUnreadsLink:!0===Object(ue.h)(e,"enable_unread_view"),hasAddAChannelLink:Jv(e),hasInvitePeopleLink:Xv(e),hasSearchLink:Object(I.a)(e),hasGdrivePromptLink:cf(e),appSuggestionsCount:hf(e),hasUpgradeSlackLink:mf(e),sidebarSectionsOrdered:i,sidebarSections:r,sidebarFoldersIsEnabled:s,sidebarFolders:l,pages:c&&Object(Sh.a)().filter(function(t){return Object(Sh.d)(e,t)}),featurePages:c,featureReactAllUnreads:Object(y.i)(e,"feature_react_all_unreads")});return{rows:u.rows,rowsMap:u.rowsMap,rowIds:u.rowIds,idsNeedingPresenceSubscription:o}}(g),P=A.rows,M=A.rowsMap,x=A.rowIds,L=A.idsNeedingPresenceSubscription,F=Object(El.a)(x,function(e){return Object(re.u)(g,e)&&!Object(wn.c)(g,e)}),B=Object(El.a)(x,function(e){return Object(re.v)(g,e)&&!Object(wn.c)(g,e)}),q=Object(El.a)(x,function(e){return Object(re.u)(g,e)&&Object(wn.c)(g,e)});Object(y.i)(g,"feature_incremental_unread_counts")?(Object(zi.e)(g)&&F.unshift("Vall_threads"),Object(zi.j)(g)&&B.unshift("Vall_threads")):(Object(Vi.b)(g)&&F.unshift("Vall_threads"),Object(Vi.c)(g)&&B.unshift("Vall_threads"));var U=Object(De.e)(g),H=Object(rb.h)(g),G=Object(ue.h)(g,"sidebar_behavior"),W="enabled"===Object(Cs.c)(g,"folders_sidebar")&&Object(ue.h)(g,"folders_enabled"),K=Object(mb.a)(g),V=Object(mb.b)(g),z=Object(hb.b)(g),Y=Object(y.i)(g,"feature_global_nav_layout"),Q=Object(y.i)(g,"feature_sonic_inputs"),J=Object(y.i)(g,"feature_classic_nav"),X=Object(y.i)(g,"feature_sonic_presence_manager"),$=Object(y.i)(g,"feature_degraded_send"),ee=Object(y.i)(g,"feature_react_all_unreads"),te=Object(y.i)(g,"feature_see_more_channels"),ne=Object(y.i)(g,"feature_modernize_invites"),ae=Object(wu.a)(P,function(e){return"addAChannelLink"===e.type}),ie=Object(v.b)(g),oe=Object(he.Q)(g),se=oe.join(",");if(N===n&&Object(bb.a)(B,a)&&Object(bb.a)(F,r)&&Object(bb.a)(q,i)&&Object(bb.a)(x,o)&&H===s&&G===l&&W===c&&z===u&&Y===p&&J===h&&Object(bb.a)(O,m)&&ae===b&&se===f&&U===_)return t;var le=Z()({},O,{isBooted:j,rows:P,rowsMap:M,rowIds:x,selectedItemId:N,unreadIds:B,mentionIds:F,mutedMentionIds:q,userAttentionIsOnChat:U,jumperCoachmarkState:H,historyNavigationEnabled:K,useHistoryNavigation:V,useGlobalNav:z,featureGlobalNavLayout:Y,featureClassicNav:J,idsNeedingPresenceSubscription:L,featureSonicPresenceManager:X,featureSonicInputs:Q,featureReactAllUnreads:ee,featureSeeMoreChannels:te,featureModernizeInvites:ne,sidebarFoldersIsEnabled:W,ensureDraftChannelObjects:function(){return e(db())},initializeFolderData:function(){return e(Object(ib.f)())},initializeGdrivePromptData:function(){return e(Object(rb.o)())},initializeAppSuggestionLinksData:function(){return e(Object(rb.n)())},dragFolderOrChannel:function(t){var n=t.src,a=t.dest;e(Object(ib.c)({src:n,dest:a})),e(Object(ib.h)())},createFolder:function(){return e(Object(ib.a)())},setHideInviteButton:function(){return E.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}}),E.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}}),e(Object(D.f)({pref:"channel_sidebar_hide_invite",value:!0}))},setHideAddChannelButton:function(){return e(Object(D.f)({pref:"add_channel_prompt_dismissed",value:!0}))},onItemSelect:function(t){C.info("CHANNEL-SIDEBAR","onItemSelect",t),$&&N===t&&e(Object(qo.a)({channelId:t})),Object(Me.a)()?(e(Object(Td.a)({id:t})),e(Object(ob.d)({source:"SIDE_BAR",objId:t}))):R&&R(t).then(function(){e(Object(ob.d)({source:"SIDE_BAR",objId:t}))}).catch(d.a)},ariaLandmarkLabel:"channel_sidebar_aria_label",logger:C,clogger:E,telemeter:w,isWindowFocused:S,bootType:T,teamId:ie,suggestedChannelsMap:oe.reduce(function(e,t){return e[t]=t,e},{})});return t=le,n=N,a=B,r=F,i=q,o=x,s=H,l=G,c=W,u=z,p=Y,h=J,m=O,b=ae,f=se,_=U,function(e,t){Qv&&Object(dn.c)({state:t}).measureAndClear(e+"_mark",e)}("react_channel_sidebar_selector_factory",g),le}},{withRef:!0})(Yv),$v=n("TGBA"),ey=n("uXhx"),ty=n("1wEm"),ny=n("BeL+"),ay=n("lE2N"),ry=n("uKXT"),iy=n("ZP0B"),oy=n("xncf"),sy=n("QWnR"),ly=n("1tet"),cy=n("n74X"),uy=Object(ot.b)("Helper for handling history",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.oldest,r=n.latest,i=n.channelId,o=n.msgs,s=n.hasMore,l=n.pinCount,c=n.channelActionsCount,u=n.isLimited,d=n.deleted,p=Object(bo.a)(o,"ts");e(a||r?Object(qu.a)({msgs:o,channelId:i,oldest:a,latest:r,hasMore:s,isLimited:u,loading:!1,deleted:d}):Object(qu.a)({msgs:o,channelId:i,isLimited:u,latest:Object(iy.a)(p),oldest:Object(ry.a)(p),hasMore:{hasMoreStart:s,hasMoreEnd:!1},loading:!1,deleted:d})),Object(Ja.a)(l)&&e(Object(ly.r)({channelId:i,count:l})),Object(y.i)(t(),"feature_channel_actions_client")&&Object(Ja.a)(c)&&e(Object(oy.d)({channelId:i,count:c}))});uy.propTypes={oldest:m.b.string,latest:m.b.string,channelId:m.b.string,msgs:m.b.array,hasMore:m.b.oneOfType([m.b.object,m.b.bool]),pinCount:m.b.number,channelActionsCount:m.b.number,isLimited:m.b.bool,deleted:m.b.array};var dy=Object(ot.b)("Fetch conversation history",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.type,i=n.oldest,o=void 0===i?null:i,s=n.latest,l=void 0===s?null:s,c=n.reason,u=void 0===c?"message-pane-store/fetchHistory":c;if(!a||!r)return!1;var d=t();if(Object(sy.d)(d,a))return!1;if(Object(ut.a)({getState:t}).info("HISTORY-FETCH","Fetching history for message pane: "+a+" oldest: "+o+" latest: "+l),l&&o){var p=e(Object(Uu.b)({channelId:a,type:r,oldest:null,latest:l,reason:u})),h=e(Object(Uu.b)({channelId:a,type:r,oldest:o,latest:null,reason:u})),m=Promise.all([p,h]).then(function(t){var n=t[0],r=n.msgs,i=n.hasMore,s=n.isLimited,c=n.pinCount,u=n.channelActionsCount,d=n.deleted,p=t[1],h=p.msgs,m=p.hasMore,b=p.deleted,f=Object(ay.a)(r.concat(h),"ts"),_=Object(ny.a)(Object(Ro.a)(d,b)),g=Object(bo.a)(f,"ts");e(uy({channelId:a,msgs:f,isLimited:s,pinCount:c,channelActionsCount:u,hasMore:{hasMoreStart:i,hasMoreEnd:m},oldest:Object(ry.a)([o,Object(ry.a)(g)]),latest:Object(iy.a)([l,Object(iy.a)(g)]),deleted:_}))}).catch(function(t){Object(cy.d)(t,"Failed to fetch history for "+a,"message_pane_history_fetch_fail"),e(Object(sy.c)({channelId:a}))});return e(Object(sy.f)({channelId:a,loadingOlder:!0,request:m})),m}l&&e(Object(Wh.c)());var b=e(Object(Uu.b)({channelId:a,type:r,oldest:o,latest:l,reason:u})).then(function(t){e(uy(Z()({},t,{oldest:o,latest:l,channelId:a})))}).catch(function(t){Object(cy.d)(t,"Failed to fetch history for "+a,"message_pane_history_fetch_fail"),e(Object(sy.c)({channelId:a}))});return e(Object(sy.f)({channelId:a,loadingOlder:!!l,request:b})),b});dy.propTypes={channelId:m.b.string.isRequired,type:m.b.string,oldest:m.b.string,latest:m.b.string,reason:m.b.string};var py=dy,hy=Object(ot.b)("Save the scrollmark if the current user is viewing a public channel that they are a member of",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.scrollmark,i=t(),o=Object(re.d)(i,a);Object(he.yb)(o)&&!Object(he.kb)(o)||e(Object(Ea.d)({channelId:a,scrollmark:r}))});hy.propTypes={channelId:m.b.string,scrollmark:m.b.object};var my=n("DecA"),by=n("FLa3"),fy=Object(Gu.a)("Call to trigger App Home Open Event",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.appHomeSection;return e(Object(Ku.a)({method:"apps.home.dispatchOpenEvent",args:{id:a,type:r},reason:"app-home-logging"})).catch(d.a)});fy.propTypes={channelId:m.b.string.isRequired,appHomeSection:m.b.string};var _y=n("90XA"),gy=n("4wYP"),vy=Object(ka.b)("TS.debug_widget.isVisible"),yy=Object(ka.b)("TS.debug_widget.setFrameRate"),ky=function(){function e(){r()(this,e),this.enabledForPRQMetrics=!1,this.enabledForClientStats=!1,this.resetCountersForClientStats(),this.resetCountersForPRQMetrics(),this.beachballsTotal=0,this.stuttersTotal=0,this.rafHandler=this.rafHandler.bind(this)}return o()(e,[{key:"isEnabled",value:function(){return this.isEnabledForClientStats()||this.isEnabledForPRQMetrics()}},{key:"rafHandler",value:function(){this.isEnabledForClientStats()&&this.rafHandlerForClientStats(),this.isEnabledForPRQMetrics()&&this.rafHandlerForPRQMetrics(),this.isEnabled()&&window.requestAnimationFrame(this.rafHandler)}},{key:"resetCountersForClientStats",value:function(){this.beachballs=0,this.frameRates=[],this.stutters=0,this.lastRafHandlerTimeForClientStats=window.performance.now(),this.fpsIndex=0,this.fpsStartTime=null}},{key:"rafHandlerForClientStats",value:function(){if(this.isEnabledForClientStats()){var e=window.performance.now(),t=e-this.lastRafHandlerTimeForClientStats;if(this.lastRafHandlerTimeForClientStats=e,t>1e3?(this.beachballs+=1,this.beachballsTotal+=1):t>100&&(this.stutters+=1,this.stuttersTotal+=1),0===this.fpsIndex&&(this.fpsStartTime=e),this.fpsIndex+=1,300===this.fpsIndex){var n=(e-this.fpsStartTime)/1e3,a=Math.floor(this.fpsIndex/n);this.fpsIndex=0,vy()&&yy(a),this.frameRates.push(a)}}}},{key:"startClientStats",value:function(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler),this.enabledForClientStats=!0,this.resetCountersForClientStats()}},{key:"stopClientStats",value:function(){this.enabledForClientStats=!1}},{key:"storeClientStats",value:function(){var e=Object(dn.a)();if(e.count("stutters",this.stutters),e.count("beachballs",this.beachballs),!Object(sa.a)(this.frameRates)){var t=Object(ry.a)(this.frameRates),n=void 0,a=this.frameRates.sort(),r=Math.floor(a.length/2);n=a.length%2==1?a[r]:(a[r-1]+a[r])/2,e.store("fps_min",t),e.store("fps_median",n)}this.stutters=void 0,this.beachballs=void 0,this.frameRates=void 0}},{key:"isEnabledForClientStats",value:function(){return!!this.enabledForClientStats}},{key:"getTotalBeachballCount",value:function(){return this.beachballsTotal}},{key:"getTotalStutterCount",value:function(){return this.stuttersTotal}},{key:"resetCountersForPRQMetrics",value:function(){this.histJankyWindows={},this.histFrameRenderTime={},this.durationMs=0,this.lastRafHandlerTimeForPRQMetrics=void 0,this.nextJankyWindowSampleIntervalNumber=1,this.framesInPreviousJankyWindowSample=0,this.framesInCurrentJankyWindowSample=0}},{key:"recordJankyWindows",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!(t<1)){var n=Math.max(60-e,0);this.histJankyWindows[n]=(this.histJankyWindows[n]||0)+t}}},{key:"sampleJankyWindows",value:function(){var e=Object(xt.d)(this.durationMs,9)>500*this.nextJankyWindowSampleIntervalNumber,t=Math.floor(this.durationMs/500),n=t-this.nextJankyWindowSampleIntervalNumber;e&&(this.durationMs>=1e3&&(this.recordJankyWindows(0,n-1),this.recordJankyWindows(this.framesInCurrentJankyWindowSample,n>0?1:0),this.recordJankyWindows(this.framesInCurrentJankyWindowSample+this.framesInPreviousJankyWindowSample)),this.nextJankyWindowSampleIntervalNumber=t+1,this.framesInPreviousJankyWindowSample=n>0?0:this.framesInCurrentJankyWindowSample,this.framesInCurrentJankyWindowSample=0),this.framesInCurrentJankyWindowSample+=1}},{key:"rafHandlerForPRQMetrics",value:function(){if(this.isEnabledForPRQMetrics()){var e=window.performance.now();if(void 0!==this.lastRafHandlerTimeForPRQMetrics){var t=e-this.lastRafHandlerTimeForPRQMetrics,n=Object(xt.d)(Math.round(t,0),2);this.histFrameRenderTime[n]=(this.histFrameRenderTime[n]||0)+1,this.lastRafHandlerTimeForPRQMetrics=e,this.durationMs+=t,this.sampleJankyWindows()}else this.lastRafHandlerTimeForPRQMetrics=e}}},{key:"startPRQMetrics",value:function(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler),this.enabledForPRQMetrics=!0,this.resetCountersForPRQMetrics()}},{key:"stopPRQMetrics",value:function(){this.enabledForPRQMetrics=!1}},{key:"isEnabledForPRQMetrics",value:function(){return!!this.enabledForPRQMetrics}},{key:"getPRQMetrics",value:function(){return{durationMs:Math.round(this.durationMs),histJankyWindows:this.histJankyWindows,histFrameRenderTime:this.histFrameRenderTime}}}]),e}();function Oy(){return null===ky.instance&&(ky.instance=new ky),ky.instance}ky.instance=null;Oy().startClientStats.bind(ky.instance),Oy().stopClientStats.bind(ky.instance),Oy().storeClientStats.bind(ky.instance),Oy().isEnabledForClientStats.bind(ky.instance),Oy().getTotalBeachballCount.bind(ky.instance),Oy().getTotalStutterCount.bind(ky.instance);var jy=Oy().startPRQMetrics.bind(ky.instance),Cy=Oy().stopPRQMetrics.bind(ky.instance),Ey=Oy().isEnabledForPRQMetrics.bind(ky.instance),wy=Oy().getPRQMetrics.bind(ky.instance),Sy=n("h5+L"),Iy=n("F2y5"),Ty=n("RQuH"),Ny=n("Muja"),Ry=n("LxWA"),Ay=n("gtcZ"),Py=(m.b.string,m.b.string,m.b.bool,m.b.bool,m.b.bool,m.b.string,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.channelType,a=e.hasLimitedHistory,r=e.isShared,i=e.isSlackbotIm,o=e.newxpOnboardingStep;return i?o&&o!==Yk.COMPLETE?h.a.createElement(Jk,{step:o}):h.a.createElement(Hk,null):a?h.a.createElement(Pk,{channelId:t}):"channel"===n||"private"===n?r?h.a.createElement(Kk,{channelId:t}):h.a.createElement(pk,{channelId:t}):"im"===n?r?h.a.createElement(Sk,{channelId:t}):h.a.createElement(jk,{channelId:t}):"mpim"===n?h.a.createElement(Bk,{channelId:t}):(Object(ut.b)().warn('Unknown foreword type "'+n+'"'),null)}}]),t}(p.PureComponent));Py.displayName="Foreword",Py.defaultProps={channelId:null,channelType:null,hasLimitedHistory:!1,isShared:!1,isSlackbotIm:!1,newxpOnboardingStep:null};var My=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return a?{isShared:Object(he.Y)(a),isSlackbotIm:Object(he.Eb)(a),newxpOnboardingStep:Object(S.j)(e)}:null})(Py),Dy=n("w6pt"),xy=n("Atrf"),Ly=n("kDop"),Fy=Object(ka.b)("TS.ui.purpose_dialog.start",d.a),By=(n("v+20"),new x.b("dialogs_purpose")),qy=(m.b.string.isRequired,m.b.string,m.b.oneOfType([m.b.string,m.b.object]),m.b.bool,m.b.object.isRequired,m.b.func,m.b.bool,{currentRawPurpose:void 0,currentFormattedPurpose:void 0,featureM11nChannelDetails:!1,submitChannelPurpose:d.a,featureChangePurposeToDescription:!1}),Uy=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSubmit=n.onSubmit.bind(n),n.renderInput=n.renderInput.bind(n),n.input=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"onSubmit",value:function(){var e=this.input.current&&this.input.current.getWrappedInstance().value(),t=this.props.featureChangePurposeToDescription;if(null==e)return t&&this.props.logger.error("Channel Description dialog submitted with undefined value"),void this.props.logger.error("Channel Purpose dialog submitted with undefined value");e!==this.props.currentRawPurpose&&this.props.submitChannelPurpose({channelId:this.props.channelId,purpose:e})}},{key:"renderInput",value:function(e){var t=e.modules,n=e.isOpen,a=this.props,r=a.currentFormattedPurpose,i=a.featureChangePurposeToDescription;return h.a.createElement(cr.b,{initialText:r,focusOnMount:!0,minLines:3,modules:t,isAutocompleteOpen:n,maxLength:he.b,ariaLabel:i?By.t("Edit channel description"):By.t("Edit channel purpose"),ref:this.input})}},{key:"render",value:function(){if(!this.props.featureM11nChannelDetails)return null;var e=this.props.featureChangePurposeToDescription;return h.a.createElement(lr.a,Z()({className:"p-channel_purpose_dialog",title:e?By.t("Edit channel description"):By.t("Edit channel purpose"),goButtonText:e?By.t("Update description"):By.t("Update purpose"),onGo:this.onSubmit,footerText:By.t("Describe what this channel is for.")},this.props),h.a.createElement(ur.a,{renderInput:this.renderInput,completeOnMembers:!0,completeOnChannels:!0,completeOnEmoji:!0,shouldCompleteOnTab:!1}))}}]),t}(p.Component);Uy.displayName="ChannelPurposeDialog",Uy.defaultProps=qy;var Hy=Object(_.b)(function(e,t){var n=t.channelId,a=Object(ut.a)({label:"CHANNEL-PURPOSE",state:e}),r=Object(re.d)(e,n),i=r&&r.purpose&&r.purpose.value,o=i&&Object(dr.a)(e,{text:i});return{channelId:r.id,currentRawPurpose:i,currentFormattedPurpose:o,featureM11nChannelDetails:Object(y.i)(e,"feature_m11n_channel_details"),featureChangePurposeToDescription:Object(y.i)(e,"feature_change_purpose_to_description"),logger:a}},function(e){return{submitChannelPurpose:function(){return e(ra.C.apply(void 0,arguments))}}})(Uy),Gy=n("OWki"),Wy=n("F+Fq"),Ky=new x.b("message_pane_foreword"),Vy=(m.b.func,{onClick:d.a}),zy=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props.onClick;return h.a.createElement(M.a,{className:"p-message_pane__foreword__button",onClick:e},h.a.createElement(se.b,{type:"plus",size:"inherit"})," ",Ky.t("Add an app"))}}]),t}(p.PureComponent);zy.displayName="AppButton",zy.defaultProps=Vy;var Yy=zy,Qy=new x.b("message_pane_foreword"),Jy=(m.b.bool,m.b.func,{isPrivate:!1,onClick:d.a}),Xy=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.isPrivate,n=e.onClick,a=void 0;return a=t?Qy.t("Add people to this private channel",{fallbackHash:"e39d2befa2a64ec5522429e9d4be5aace4c8f08b"}):Qy.t("Add people to this channel",{fallbackHash:"379e588d09f8d3998101d407aac8b99c9555d635"}),h.a.createElement(M.a,{className:"p-message_pane__foreword__button",onClick:n},h.a.createElement(se.b,{type:"user",size:"inherit"})," ",a)}}]),t}(p.PureComponent);Xy.displayName="InviteButton",Xy.defaultProps=Jy;var Zy=Xy,$y=new x.b("message_pane_foreword"),ek=(m.b.func,m.b.bool,{onClick:d.a,featureChangePurposeToDescription:!1}),tk=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.featureChangePurposeToDescription;return h.a.createElement(M.a,{className:"p-message_pane__foreword__button",onClick:t},h.a.createElement(se.b,{type:"pencil",size:"inherit"})," ",n?$y.t("Set a description"):$y.t("Set a purpose"))}}]),t}(p.PureComponent);tk.displayName="PurposeButton",tk.defaultProps=ek;var nk=Object(Dt.a)("feature_change_purpose_to_description")(tk),ak=(m.b.string,m.b.string,m.b.bool,m.b.bool,m.b.string,m.b.object.isRequired,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.bool,{channelId:null,purpose:null,isUserRestricted:!1,isChannelArchived:!1,channelType:null,canInviteToChannel:!1,canAddAppsToChannel:!1,startChannelInviteModal:d.a,openModal:d.a,openAppsBrowserModal:d.a,featureSonicChannelInviteModal:!1,featureM11nAppsBrowser:!1}),rk=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onPurposeButtonClick=n.onPurposeButtonClick.bind(n),n.onInviteButtonClick=n.onInviteButtonClick.bind(n),n.onAppButtonClick=n.onAppButtonClick.bind(n),n}return u()(t,e),o()(t,[{key:"onPurposeButtonClick",value:function(){var e=this.props.channelId;Object(Me.a)()?this.props.openModal({element:h.a.createElement(Hy,{channelId:e})}):Fy(e)}},{key:"onInviteButtonClick",value:function(){var e=this.props,t=e.channelId,n=e.clogger,a=e.featureSonicChannelInviteModal;n.track(ve.k.CHANNEL_FOREWORD,{contexts:{ui_context:{action:"click",ui_properties:{element_type:"button",element_name:"channel_foreword_add"}}}}),a?this.props.startChannelInviteModal({channelId:t}):Object(Gy.a)(t,[],"channel_foreword")}},{key:"onAppButtonClick",value:function(){var e,t=this.props,n=t.channelId,a=t.clogger,r=ve.k.CHANNEL_FOREWORD,i=(e={},xl()(e,ve.x.action,ve.v.CLICK),xl()(e,ve.x.ui_element,ve.y.BTN_ADD_APPS),e);a.track(r,{contexts:xl()({},ve.c.ui_context,i)}),this.props.featureM11nAppsBrowser?this.props.openAppsBrowserModal({addAppsVariant:!0,referringEventId:r,referringUiContext:i,channelId:n}):Object(Wy.e)(r,i)}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.canAddAppsToChannel,a=e.isUserRestricted,r=e.purpose,i=e.channelType,o=e.canInviteToChannel,s=e.isChannelArchived,l=void 0;r||a||s||(l=h.a.createElement(nk,{channelId:t,onClick:this.onPurposeButtonClick}));var c=void 0;n&&(c=h.a.createElement(Yy,{onClick:this.onAppButtonClick}));var u=void 0;return o&&(u=h.a.createElement(Zy,{onClick:this.onInviteButtonClick,isPrivate:"private"===i})),h.a.createElement("div",{className:"p-message_pane__foreword__buttons"},l,c,u)}}]),t}(p.PureComponent);rk.displayName="ChannelForewordButtons",rk.defaultProps=ak;var ik=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);if(!a)return{};var r=Object(Ue.b)(e),i=a.purpose?a.purpose.value:null,o=Object(It.H)(e,n),s=Object(It.x)(e,n);return{purpose:i,isUserRestricted:Object(ne.xb)(r),isChannelArchived:Object(he.V)(a),channelType:Object(he.v)(a),clogger:Object(ye.a)({state:e}),canInviteToChannel:o,canAddAppsToChannel:s,featureSonicChannelInviteModal:Object(y.i)(e,"feature_sonic_channel_invite_modal"),featureM11nAppsBrowser:Object(y.i)(e,"feature_m11n_apps_browser")}},function(e){return{startChannelInviteModal:function(){return e(ea.b.apply(void 0,arguments))},openAppsBrowserModal:function(){return e(na.a.apply(void 0,arguments))},openModal:function(){return e(st.e.apply(void 0,arguments))}}})(rk),ok=new x.b("message_pane_foreword"),sk=(m.b.string,m.b.node,m.b.string,m.b.bool,m.b.bool,m.b.bool,m.b.func,{channelId:null,description:null,purpose:null,isUserRestricted:!1,userCanSetPurposeForChannel:!0,featureChangePurposeToDescription:!1,openModal:d.a}),lk=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onPurposeButtonClick=n.onPurposeButtonClick.bind(n),n}return u()(t,e),o()(t,[{key:"onPurposeButtonClick",value:function(){var e=this.props.channelId;Object(Me.a)()?this.props.openModal({element:h.a.createElement(Hy,{channelId:e})}):Fy(e)}},{key:"maybeRenderPurpose",value:function(){var e=this.props,t=e.purpose,n=e.featureChangePurposeToDescription;return t?h.a.createElement("span",null," ",n?ok.t("Description:"):ok.t("Purpose:")," ",h.a.createElement(Pn.a,{text:t})):null}},{key:"maybeRenderPurposeEditLink",value:function(){var e=this.props,t=e.purpose,n=e.isUserRestricted,a=e.userCanSetPurposeForChannel;return t&&!n&&a?h.a.createElement("span",{className:"no_wrap"}," ","(",h.a.createElement(M.a,{onClick:this.onPurposeButtonClick},ok.t("edit")),")"):null}},{key:"render",value:function(){var e=this.props.description;return h.a.createElement("div",{className:"p-message_pane__foreword__description"},e,this.maybeRenderPurpose(),this.maybeRenderPurposeEditLink())}}]),t}(p.PureComponent);lk.displayName="ChannelForewordDescription",lk.defaultProps=sk;var ck=Object(_.b)(function(e,t){return{userCanSetPurposeForChannel:Object(It.v)(e,t.channelId).ok}},function(e){return{openModal:function(){return e(st.e.apply(void 0,arguments))}}})(Object(Dt.a)("feature_change_purpose_to_description")(lk)),uk=new x.b("message_pane_foreword"),dk=(m.b.string,m.b.string,m.b.bool,m.b.string,m.b.number,m.b.bool,m.b.bool,m.b.bool.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderTitle",value:function(){var e=this.props,t=e.channelId,n=e.featureLongerChannelNames,a=f()("p-message_pane__foreword__title",{"p-message_pane__foreword__title--truncate":!n});return h.a.createElement("h1",{className:a},n?h.a.createElement(Ly.a,{channelId:t}):h.a.createElement(pe.a,{channelId:t,inline:!0,iconProps:{inherit:!0,align:"baseline"}}))}},{key:"renderDescription",value:function(){var e=this.props,t=e.channelId,n=e.createdById,a=e.creatorIsYou,r=e.dateCreated,i=e.isPrivate,o=e.purpose,s=e.isUserRestricted,l=e.featureLongerChannelNames,c=void 0;r?(c=Object(Zt.l)(r),c=Object(Zt.f)(r)||Object(Zt.g)(r)?c.toLowerCase():uk.t("on {date}",{date:c})):c=uk.rt("on {date}",{date:h.a.createElement(Dy.a,{type:"unknown"})});var u=l?h.a.createElement("strong",null,h.a.createElement(Ly.a,{channelId:t,bold:!0})):h.a.createElement(pe.a,{channelId:t,inline:!0,iconProps:{inherit:!0,align:"baseline"},className:"bold"}),d=void 0;if(a)d=i?uk.rt("You created this private channel {date}. This is the very beginning of the {name} channel.",{date:c,name:u}):uk.rt("You created this channel {date}. This is the very beginning of the {name} channel.",{date:c,name:u});else{var p=n?h.a.createElement(xy.a,{id:n,showTooltip:!0}):h.a.createElement(Dy.a,{type:"unknown"});d=i?uk.rt("{creator} created this private channel {date}. This is the very beginning of the {name} channel.",{creator:p,date:c,name:u}):uk.rt("{creator} created this channel {date}. This is the very beginning of the {name} channel.",{creator:p,date:c,name:u})}return h.a.createElement(ck,{channelId:t,description:d,purpose:o,isUserRestricted:s})}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.isPrivate,a=f()("p-message_pane__foreword",{"p-message_pane__foreword--private":n});return h.a.createElement("div",{className:a},this.renderTitle(),this.renderDescription(),h.a.createElement(ik,{channelId:t}))}}]),t}(p.PureComponent));dk.displayName="ChannelForeword",dk.defaultProps={channelId:null,purpose:null,creatorIsYou:!1,createdById:null,dateCreated:null,isPrivate:!1,isUserRestricted:!1};var pk=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);if(!a)return{};var r=Object(Ue.b)(e),i=a.purpose?a.purpose.value:null,o=Object(he.xb)(a);return{purpose:i,creatorIsYou:r&&r.id===a.creator,createdById:a.creator,dateCreated:a.created,isPrivate:o,isUserRestricted:Object(ne.xb)(r),featureLongerChannelNames:Object(y.i)(e,"feature_longer_channel_names")}})(dk),hk=n("uksu"),mk=n("fyoz"),bk=new x.b("message_pane_foreword"),fk=(m.b.string,m.b.string,m.b.object.isRequired,m.b.func,{botName:null,botId:null,openAboutAppWithMemberId:void 0}),_k=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this.props.botId;this.props.openAboutAppWithMemberId({memberId:e}),this.props.clogger.track("APP_SPACE_ABOUT_CLICKED",{about_clicked_from_bot_dm:!0})}},{key:"render",value:function(){var e=this.props.botName;return h.a.createElement(M.a,{className:"p-message_pane__foreword__button",onClick:this.onClick},h.a.createElement(se.b,{type:"lightbulb-o",size:"inherit"})," ",bk.t("How does {name} work?",{name:Object(x.n)(e)}))}}]),t}(p.PureComponent);_k.displayName="AppHelpButton",_k.defaultProps=fk;var gk=Object(_.b)(function(e,t){var n=t.botId,a=Object(Ue.c)(e,n),r=Object(ye.a)({state:e});return a?{botName:Object(ne.w)(a),clogger:r}:{clogger:r}},function(e){return{openAboutAppWithMemberId:function(){return e(hk.c.apply(void 0,arguments))}}})(_k),vk=new x.b("message_pane_foreword"),yk=(m.b.bool.isRequired,m.b.string,m.b.oneOf(["self","bot","member"]).isRequired,m.b.bool,m.b.func,m.b.func.isRequired,m.b.bool.isRequired,{memberId:null,prefWhoCanSeeThis:!1,openAboutAppWithMemberId:d.a}),kk=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMemberClick=n.onMemberClick.bind(n),n}return u()(t,e),o()(t,[{key:"onMemberClick",value:function(e){e.preventDefault();var t=this.props,n=t.memberId,a=t.featureReactMemberProfileCard;this.canAppSpaceBeUsed()?this.props.openAboutAppWithMemberId({memberId:n}):a?this.props.showMemberProfile({memberId:n}):Object(fu.i)(n)}},{key:"canAppSpaceBeUsed",value:function(){var e=this.props,t=e.isAppSpaceEnabled;return"bot"===e.type&&t}},{key:"renderAvatar",value:function(){var e=this.props.memberId;return h.a.createElement("div",{className:"p-message_pane__foreword__avatars"},h.a.createElement(Re.c,{onClick:this.onMemberClick},h.a.createElement(mk.b,{id:e,size:"large",showPresence:!0,showStatus:!0,showAvatar:!0})))}},{key:"renderDescription",value:function(){var e=this.props,t=e.memberId;if("self"===e.type)return h.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},vk.rt("<b>This is your space.</b> Draft messages, list your to-dos, or keep links and files handy. You can also talk to yourself here, but please bear in mind you\u2019ll have to supply both sides of the conversation."));var n=vk.rt("This is the very beginning of your direct message history with {name}",{name:h.a.createElement(xy.a,{id:t,showTooltip:!0})});return this.props.prefWhoCanSeeThis&&(n=vk.rt("This is the very beginning of your direct message history with {name}. Only the two of you are in this conversation, and no one else can join it. <a>Learn more</a>",{name:h.a.createElement(xy.a,{id:t,showTooltip:!0})},function(e){var t=e.text,n=e.key;return h.a.createElement(G.a,{key:n,href:"https://get.slack.help/hc/articles/360002063088",rel:"noopener noreferrer"},t)})),h.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},n)}},{key:"renderButtons",value:function(){var e=this.props.memberId;return this.canAppSpaceBeUsed()?h.a.createElement("div",{className:"p-message_pane__foreword__buttons"},h.a.createElement(gk,{botId:e})):null}},{key:"render",value:function(){return h.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription(),this.renderButtons())}}]),t}(p.PureComponent);kk.displayName="BaseImForeword",kk.defaultProps=yk;var Ok=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);if(!a)return{};var r=Object(he.G)(a),i=Object(Ue.c)(e,r),o=void 0;return o=r===Object(y.b)(e)?"self":Object(ne.ab)(i)?"bot":"member",{isAppSpaceEnabled:Object(Ih.f)(e),memberId:r,type:o,prefWhoCanSeeThis:Object(ue.h)(e,"whocanseethis_dm_mpdm_badge"),featureReactMemberProfileCard:Object(y.i)(e,"feature_react_member_profile_card")}},function(e){return{openAboutAppWithMemberId:function(){return e(hk.c.apply(void 0,arguments))},showMemberProfile:function(){return e(Ke.j.apply(void 0,arguments))}}})(kk);Ok.propTypes={channelId:m.b.string},Ok.defaultProps={channelId:null};var jk=Ok,Ck=new x.b("message_pane_foreword"),Ek=(m.b.string,m.b.object,{memberId:void 0,sharedTeam:void 0}),wk=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderAvatar",value:function(){var e=this.props.memberId;return h.a.createElement("div",{className:"p-message_pane__foreword__avatars"},h.a.createElement(mk.b,{id:e,size:"large",showPresence:!0,showStatus:!0,showAvatar:!0}))}},{key:"renderDescription",value:function(){var e=this.props,t=e.sharedTeam,n=e.memberId,a=!t||Object(te.L)(t)?h.a.createElement(As.a,{type:"unknown"}):h.a.createElement("strong",null,Object(te.e)(t)),r=Ck.rt("{name} is from {team} and not a member of your team, so share files and information with care.",{name:h.a.createElement(xy.a,{id:n,showTooltip:!0}),team:a});return h.a.createElement("div",{className:"p-message_pane__foreword__description"},r)}},{key:"render",value:function(){return h.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription())}}]),t}(p.PureComponent);wk.displayName="ImSharedForeword",wk.defaultProps=Ek;var Sk=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);if(!a)return null;var r=Object(Ue.c)(e,Object(he.G)(a)),i=Object(ne.J)(r),o=Object($.i)(e,i);return{memberId:Object(he.G)(a),sharedTeam:o}})(wk),Ik=n("04ri"),Tk=n("VGIp"),Nk=new x.b("message_pane_foreword"),Rk=(m.b.string.isRequired,m.b.string,m.b.object.isRequired,m.b.func.isRequired,m.b.string,m.b.number,m.b.number,m.b.bool,m.b.bool,m.b.bool,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.pricingPlansPageUrl="pricing?ui_step=42&ui_element="+n.getClogUiElementVal(),n.onClickLearnMore=n.onClickLearnMore.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:this.getClogUiElementVal()}}})}},{key:"onClickLearnMore",value:function(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"click",ui_element:this.getClogUiElementVal()}}}),this.props.showPricingPlans({pricingPlansPageUrl:this.pricingPlansPageUrl,source:"limited_history_foreword"})}},{key:"getClogUiElementVal",value:function(){var e=this.props.channelType;return"mpim"===e||"im"===e?33:34}},{key:"formatMessagesHiddenTime",value:function(e){if(!this.props.featureTimeBasedMessageLimitV0Translations)return"";var t=Object(Ik.a)(e,{unitsIn:"seconds",unitsOut:"years"}),n=Object(Ik.a)(e,{unitsIn:"seconds",unitsOut:"months"}),a=Object(Ik.a)(e,{unitsIn:"seconds",unitsOut:"weeks"}),r=Object(Ik.a)(e,{unitsIn:"seconds",unitsOut:"days"});r<1&&(r=1);return r<30?Nk.t("{days, plural, =1 {1 day} other {# days}}",{days:r}):a<16?Nk.t("{weeks, plural, =1 {1 week} other {# weeks}}",{weeks:a}):n<18?Nk.t("{months, plural, =1 {1 month} other {# months}}",{months:n}):Nk.t("{years, plural, =1 {more than a year} other {more than # years}}",{years:t,fallbackHash:"a089f4bc63e29c3406e93a0e7a1bec7886dc07b2"})}},{key:"render",value:function(){var e=this.props,t=e.channelName,n=e.channelType,a=e.workspaceName,r=e.teamCreationDateInSeconds,i=e.teamMessageLimitInSeconds,o=e.isCutoffDateTreatmentGroup,s=e.isTimeHiddenTreatmentGroup,l=e.featureTimeBasedMessageLimitV0Translations,c=!0,u="",d="",m=Nk.t("Learn More");return l&&s&&i?(c=!1,u=Nk.t("Unlock {formatMessagesHiddenTime} of past messages in {workspaceName}",{formatMessagesHiddenTime:this.formatMessagesHiddenTime(Object(Tk.a)(Object(Cd.a)(i),Object(Cd.a)(r))),workspaceName:Object(x.n)(a)}),d=Nk.t("To view and search all the messages in your workspace\u2019s history, upgrade to one of our paid plans."),m=Nk.t("See Upgrade Options")):l&&o&&i?(c=!1,u=Nk.t("Unlock messages prior to {priorToDate} in {workspaceName}",{priorToDate:Object(dd.a)(i,"{date}"),workspaceName:Object(x.n)(a)}),d=Nk.t("To view and search all the messages in your workspace\u2019s history, rather than just the {maxMesssageLimitCount} most recent, upgrade to one of our paid plans.",{maxMesssageLimitCount:Object(Lt.a)(1e4)}),m=Nk.t("See Upgrade Options")):"mpim"===n||"im"===n?(d=Nk.t("To see and search this conversation\u2019s full history, upgrade to one of our paid plans."),u=Nk.t("There\u2019s more to this conversation")):(u=Nk.t("There\u2019s more to the conversation in {name}",{name:t}),d=Nk.t("To see and search this channel\u2019s full history, upgrade to one of our paid plans.")),h.a.createElement("div",{className:"p-message_pane__limited_history_foreword","data-qa":"msg_lim_header"},h.a.createElement("div",{className:"p-message_pane__limited_history_foreword_headline"},c&&h.a.createElement(p.Fragment,null,h.a.createElement(Mn.b,{text:":speech_balloon:",emojiSize:Mn.a.MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0"),u),h.a.createElement("div",{className:"p-message_pane__limited_history_foreword_subheading"},d),h.a.createElement(Re.d,{onClick:this.onClickLearnMore,"data-qa":"learn_more_btn",size:"small"},m))}}]),t}(p.PureComponent));Rk.displayName="LimitedHistoryForeword",Rk.defaultProps={channelName:"",workspaceName:"",teamCreationDateInSeconds:0,teamMessageLimitInSeconds:0,isCutoffDateTreatmentGroup:!1,isTimeHiddenTreatmentGroup:!1,featureTimeBasedMessageLimitV0Translations:!1};var Ak={showPricingPlans:is.e},Pk=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);if(!a)return{};var r=Object($.d)(e),i=r?Object(te.e)(r):"",o=Object(te.d)(r),s=Object(te.l)(r),l=0;return s>0&&(l=s/1e6),{channelType:Object(he.v)(a),channelName:Object(he.x)(e,a),clogger:Object(ye.a)({state:e}),workspaceName:i,teamCreationDateInSeconds:o,teamMessageLimitInSeconds:l,isCutoffDateTreatmentGroup:"treatment_cutoff_date"===Object(Cs.c)(e,"lc_time_based_message_limit_v0"),isTimeHiddenTreatmentGroup:"treatment_time_hidden"===Object(Cs.c)(e,"lc_time_based_message_limit_v0")}},Ak)(Object(Dt.a)("feature_time_based_message_limit_v0_translations")(Rk)),Mk=new x.b("message_pane_foreword"),Dk=(m.b.string.isRequired,m.b.arrayOf(m.b.string),m.b.arrayOf(m.b.object),m.b.string,m.b.oneOf(["everything","mentions_dms","nothing"]),m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.bool.isRequired,{memberIds:[],externalTeams:[],notificationPermission:"na",notificationSetting:"everything",featureReactMessages:!0,prefWhoCanSeeThis:!1,openChannelNotificationPrefsModal:d.a,openPrefsModal:d.a}),xk=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.openPrefsDialog=n.openPrefsDialog.bind(n),n.openChannelPrefsDialog=n.openChannelPrefsDialog.bind(n),n.state=Object(R.m)(),n}return u()(t,e),o()(t,[{key:"componentWillReceiveProps",value:function(e){this.props.notificationPermission!==e.notificationPermission&&this.setState(function(){return Object(R.m)()})}},{key:"getNotificationWarningText",value:function(){var e=this,t=this.state,n=t.notificationsEnabled,a=t.notificationDisabledType;if(n)return null;switch(a){case"not_yet_allowed":return Mk.rt("You have not yet allowed desktop notifications. Open the <button>Preferences Dialog</button> and follow the instructions to set them up.",null,function(t){var n=t.key,a=t.text;return h.a.createElement(M.a,{onClick:e.openPrefsDialog,key:n},a)});case"not_allowed":return Mk.t("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.");case"impossible":return Mk.rt("Your browser does not support desktop notifications. <a>Try one of our apps?</a>",{},function(e){var t=e.key,n=e.text;return h.a.createElement(a_.a,{target:"_blank",key:t,href:"/downloads"},n)});default:return null}}},{key:"openPrefsDialog",value:function(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"openChannelPrefsDialog",value:function(){this.props.openChannelNotificationPrefsModal({channelId:this.props.channelId})}},{key:"renderAvatars",value:function(){var e=this.props,t=e.memberIds,n=e.featureReactMemberProfileCard,a=t.map(function(e){return h.a.createElement(Ye.b,{key:e,className:"p-message_pane__foreword__avatar",userId:e,size:56,showCard:n})});return h.a.createElement("div",{className:"p-message_pane__foreword__avatars"},a)}},{key:"renderTeamName",value:function(e){return Object(te.L)(e)?h.a.createElement(As.a,{type:"unknown"}):Object(te.e)(e)}},{key:"renderDescription",value:function(){var e=this.props,t=e.memberIds,n=e.externalTeams;if(n.length){var a=n.map(this.renderTeamName),r=Mk.rt("This conversation includes people from {teams}, so share files and information with care.",{teams:Object(x.h)(a,{noEscape:!0,react:!0,strong:!0})});return h.a.createElement("div",{className:"p-message_pane__foreword__description"},r,this.renderDescriptionActions())}var i=t.map(function(e){return h.a.createElement(xy.a,{id:e,showTooltip:!0})}),o=Mk.rt("This is the very beginning of your direct message history with {names}",{names:Object(x.h)(i,{noEscape:!0,react:!0})});return this.props.prefWhoCanSeeThis&&(o=Mk.rt("This is the very beginning of your direct message history with {names}. Only the {number} of you are in this conversation, and no one else can join it. <a>Learn more</a>",{names:Object(x.h)(i,{noEscape:!0,react:!0}),number:i.length+1},function(e){var t=e.text,n=e.key;return h.a.createElement(a_.a,{key:n,href:"https://get.slack.help/hc/articles/360002063088",target:"_blank",rel:"noopener noreferrer"},t)})),h.a.createElement("div",{className:"p-message_pane__foreword__description"},o,this.renderDescriptionActions())}},{key:"renderDescriptionActions",value:function(){var e=this.getNotificationWarningText();if(e)return h.a.createElement("div",{className:"p-message_pane__foreword__notification_warning"},e);if(!this.props.featureReactMessages)return null;var t=this.props.notificationSetting;return"everything"===t?h.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},Mk.rt("You\u2019ll be notified for <strong>every new message</strong> in this conversation.",{fallbackHash:"d74e681b9c224e38f01310015fd4ae63f9c3ba9c"})," ",this.renderEditButton()):"mentions_dms"===t?h.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},Mk.rt("You\u2019ll be notified when <strong>a teammate mentions you or uses one of your keywords</strong>.")," ",this.renderEditButton()):h.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},Mk.rt("You won\u2019t receive notifications.")," ",this.renderEditButton())}},{key:"renderEditButton",value:function(){return this.props.featureReactMessages?h.a.createElement(M.a,{onClick:this.openChannelPrefsDialog},Mk.rt("Change this setting",{fallbackHash:"5301648dcf6b53cefc9ed52999aaa92d4603cae0"})):null}},{key:"render",value:function(){return h.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatars(),this.renderDescription())}}]),t}(p.PureComponent);xk.displayName="BaseMpimForeword",xk.defaultProps=Dk;var Lk=Object(Fb.createSelector)(function(e,t){var n=t.channelId;return Object(re.d)(e,n)},y.b,function(e,t){var n=Object(he.H)(e);return Object(Hu.a)(n,t)});var Fk=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);if(!a)return null;var r=[];if(Object(he.Y)(a)){var i=Object(he.M)(e,a,{includeSelfTeamId:!0});r=Object(te.N)(e,i).map(function(t){return Object($.i)(e,t)})}return{memberIds:Lk(e,{channelId:n}),externalTeams:r,notificationPermission:Object(N.b)(e),notificationSetting:Object(R.g)(e,n),featureReactMessages:Object(y.i)(e,"feature_react_messages"),prefWhoCanSeeThis:Object(ue.h)(e,"whocanseethis_dm_mpdm_badge"),featureReactMemberProfileCard:Object(y.i)(e,"feature_react_member_profile_card")}},function(e){return{openChannelNotificationPrefsModal:function(){return e(ge.a.apply(void 0,arguments))},openPrefsModal:function(){return e(fe.a.apply(void 0,arguments))}}})(xk);Fk.propTypes={channelId:m.b.string},Fk.defaultProps={channelId:null};var Bk=Fk,qk=new x.b("message_pane_foreword"),Uk=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=h.a.createElement("h1",{className:"p-message_pane__foreword__title"},qk.t("Hi, Slackbot here!")),t=h.a.createElement("div",{className:"p-message_pane__foreword__description display_flex"},h.a.createElement(Ye.b,{userId:"USLACKBOT",size:48,className:"p-message_pane__foreword__avatar"}),h.a.createElement("div",null,h.a.createElement("p",null,qk.rt("You can ask me simple questions about how Slack works, or just type a few keywords. For example: <b>Can I edit a message I\u2019ve posted?</b> Or simply: <b>edit message</b>.")),h.a.createElement("p",{className:"margin_0"},qk.rt("I\u2019m only a bot, but I\u2019ll do my best to answer! If I don\u2019t understand, I\u2019ll search the <a>Help Center</a>.",null,function(e){var t=e.key,n=e.text;return h.a.createElement(G.a,{key:t,rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us"},n)})))),n=f()("p-message_pane__foreword","p-message_pane__foreword--slackbot");return h.a.createElement("div",{className:n},e,t)}}]),t}(p.Component);Uk.displayName="SlackbotForeword";var Hk=Uk,Gk=new x.b("message_pane_foreword"),Wk=(m.b.object,m.b.string,m.b.bool,m.b.bool,m.b.arrayOf(m.b.shape({id:m.b.string.isRequired,name:m.b.string})),m.b.arrayOf(m.b.shape({id:m.b.string.isRequired,name:m.b.string})),m.b.string,m.b.bool,m.b.bool,m.b.bool.isRequired,function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.renderTeamName=e.renderTeamName.bind(e),e}return u()(t,e),o()(t,[{key:"renderTitle",value:function(){var e=this.props,t=e.channel,n=e.featureLongerChannelNames,a=f()("p-message_pane__foreword__title",{"p-message_pane__foreword__title--truncate":!n});return h.a.createElement("h1",{className:a},n?h.a.createElement(Ly.a,{channel:t}):h.a.createElement(pe.a,{channel:t,inline:!0,iconProps:{inherit:!0,align:"baseline"}}))}},{key:"renderAvatars",value:function(){var e=this.props,t=e.channel,n=e.sharedTeams,a=e.featureShipOrgAwareExternalSharedChannels;if(Object(sa.a)(n))return null;var r=n.map(function(e){var n=Object(he.vb)(t,e.id,{featureShipOrgAwareExternalSharedChannels:a});return h.a.createElement(mt.b,{key:e.id,id:e.id,size:56,isPendingShared:n,className:"p-message_pane__foreword__avatar"})});return h.a.createElement("div",{className:"p-message_pane__foreword__avatars"},r)}},{key:"renderTeamName",value:function(e){return Object(te.L)(e)?h.a.createElement(As.a,{type:"unknown"}):Object(te.e)(e)}},{key:"renderDescription",value:function(){var e=this.props,t=e.channelId,n=e.purpose,a=e.sharedTeams,r=e.externalTeams,i=e.isPendingShared,o=e.isUserRestricted,s=void 0;if(i){var l=r.map(this.renderTeamName),c=Object(x.h)(l,{noEscape:!0,react:!0,strong:!0});s=Gk.rt("This is a shared channel. Waiting for {names} to join...",{names:c})}else{var u=a.map(this.renderTeamName),d=Object(x.h)(u,{noEscape:!0,react:!0,strong:!0});s=Gk.rt("This is a shared channel between {names}.",{names:d})}return h.a.createElement(ck,{channelId:t,description:s,purpose:n,isUserRestricted:o})}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.isPrivate,a=f()("p-message_pane__foreword",{"p-message_pane__foreword--private":n});return h.a.createElement("div",{className:a},this.renderAvatars(),this.renderTitle(),this.renderDescription(),h.a.createElement(ik,{channelId:t}))}}]),t}(p.PureComponent));Wk.displayName="SharedForeword",Wk.defaultProps={channel:null,channelId:null,isPrivate:!1,isPendingShared:!1,sharedTeams:[],externalTeams:[],purpose:null,isUserRestricted:!1,featureShipOrgAwareExternalSharedChannels:!1};var Kk=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);if(!a)return null;var r=Object(Ue.b)(e),i=a.purpose?a.purpose.value:null,o=Object(he.xb)(a),s=Object(he.Y)(a),l=Object(he.ub)(a),c=[],u=[];if(s||l){var d=Object(he.M)(e,a,{includeSelfTeamId:!0});c=d.map(function(t){return Object($.i)(e,t)}),u=Object(te.N)(e,d).map(function(t){return Object($.i)(e,t)})}return{channel:a,isPendingShared:l,isPrivate:o,isUserRestricted:r.is_restricted,purpose:i,sharedTeams:c,externalTeams:u,featureShipOrgAwareExternalSharedChannels:Object(y.i)(e,"feature_ship_org_aware_external_shared_channels"),featureLongerChannelNames:Object(y.i)(e,"feature_longer_channel_names")}})(Wk),Vk=n("zBEu"),zk=new x.b("newxp_onboarding"),Yk=(m.b.string,{START:"onboarding_start",CANCELLED:"onboarding_cancelled",SLACKBOT:"onboarding_slackbot_conversation",COMPLETE:"onboarding_complete"}),Qk=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderHeaderAction",value:function(){return this.props.step===Yk.CANCELLED?zk.rt("I changed my mind. <a>Take the tutorial.</a>",null,function(e){var t=e.key,n=e.text;return h.a.createElement(G.a,{key:t,onClick:Vk.b},n)}):this.props.step===Yk.SLACKBOT?zk.rt("Got the hang of Slack already? <a>Skip the tutorial.</a>",null,function(e){var t=e.key,n=e.text;return h.a.createElement(G.a,{key:t,onClick:Vk.a},n)}):null}},{key:"renderFooter",value:function(){return this.props.step!==Yk.START?null:h.a.createElement("div",{className:"p-message_pane__newxp_foreword__footer"},h.a.createElement(Re.d,{type:"primary",size:"large",className:"p-message_pane__newxp_foreword__explore",onClick:Vk.g},zk.rt("Explore Slack")),h.a.createElement("div",{className:"p-message_pane__newxp_foreword__pre_skip"},zk.rt("Not your first Slack workspace? <a>Skip the tutorial</a>",null,function(e){var t=e.key,n=e.text;return h.a.createElement(G.a,{key:t,onClick:Vk.a,"data-qa":"skip_tutorial"},n)})))}},{key:"render",value:function(){var e=this.props.step,t=f()("p-message_pane__newxp_foreword",{"p-message_pane__newxp_foreword--start":"onboarding_start"===e});return h.a.createElement("div",{className:t},h.a.createElement("div",{className:"p-message_pane__newxp_foreword__header"},h.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_text"},zk.rt("Welcome!")),h.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_message"},zk.t("Slack is a collaboration hub for teams.",{fallbackHash:"2548745b7be53c916d085ad9d7a6350c53b003b3"})),h.a.createElement("div",{className:"p-message_pane__newxp_foreword__skip_messaging"},this.renderHeaderAction())),this.renderFooter())}}]),t}(p.PureComponent);Qk.displayName="NewxpForeword",Qk.defaultProps={step:null};var Jk=Qk,Xk=My,Zk=new x.b("message_pane_foreword"),$k=(m.b.object.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:35}}})}},{key:"render",value:function(){return h.a.createElement("div",{className:"p-message_pane__limited_history_alert"},h.a.createElement(Mn.b,{text:":speech_balloon:",emojiSize:Mn.a.MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0",Zk.rt("<b>There\u2019s more to this conversation.</b> To see and search this conversation\u2019s full history, upgrade to one of our paid plans."),"\xa0",h.a.createElement(G.a,{href:"/pricing?ui_step=42&ui_element=35",target:"_blank",rel:"noopener noreferrer","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"slackbot_message_limit_header","data-clog-ui-action":"click","data-clog-ui-step":"history"},Zk.t("Learn More")))}}]),t}(p.PureComponent));$k.displayName="LimitedHistoryAlert";var eO=Object(_.b)(function(e){return{clogger:Object(ye.a)({state:e})}})($k),tO=(n("2XjY"),new x.b("messages")),nO=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.pendingUpdate=null,n.recomputeOffsets(e),n.overscan=Math.max(200,e.height/2),n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(){for(var e,n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];(e=Qu()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this)).call.apply(e,[this].concat(a)),0===this.props.keys.length&&this.loadMore(),this.layout.setBottomMargin(this.getLoadingOffsetBottom()),this.pendingUpdate=!1}},{key:"getOffset",value:function(){var e=this.getLoadingOffsetTop();return this.startTop-e}},{key:"getLoadingOffsetTop",value:function(){return this.props.keys.length?this.props.reachedStart&&0===this.state.start?0:this.layout.getTotalHeight()<=this.props.height?0:0!==this.state.start?96:56:0}},{key:"getLoadingOffsetBottom",value:function(){return this.props.keys.length?this.props.reachedEnd&&this.state.end===this.props.keys.length?0:96:0}},{key:"getScrollTop",value:function(){return"number"==typeof this.scrollTop?this.scrollTop:"number"==typeof this.pendingScrollTop?this.pendingScrollTop:Qu()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getScrollTop",this).call(this)+this.getOffset()}},{key:"getContentHeight",value:function(){return this.endBottom-this.getOffset()+this.getLoadingOffsetBottom()}},{key:"getTop",value:function(e){return this.layout.getTop(e)-this.getOffset()}},{key:"getBottom",value:function(e){return this.layout.getBottom(e)-this.getOffset()}},{key:"setScrollTop",value:function(e){var n=e<this.getOffset(),a=e+this.props.height>this.endBottom+this.getLoadingOffsetBottom();if(n&&0!==this.state.start||a&&this.state.end!==this.props.keys.length)return this.scrollTop=e,void this.relayout();Qu()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setScrollTop",this).call(this,e-this.getOffset())}},{key:"scrollToOffset",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.animate,r=n.absolute;if(this.node&&!this.pendingUpdate){var i=r?e:e-this.getOffset();!r&&i>0&&i<this.getLoadingOffsetTop()&&(i=0);var o=this.bracketScrollTop(i);r||o===i?a?this.scrollAnimation=this.node.scrollWithAnimation(o):Qu()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setScrollTop",this).call(this,o):this.setScrollTop(e)}}},{key:"bracketScrollTop",value:function(e){return Math.max(0,Math.min(this.getContentHeight()-this.props.height,e))}},{key:"resetRendered",value:function(){this.overscan=this.props.height/2}},{key:"loadMore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.start,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.end,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getScrollTop(),r=this.layout.getTotalHeight(),i=0===e&&a<1,o=t===n.keys.length&&a+n.height>r-1,s=!n.keys.length||r<=n.height||i,l=!n.keys.length||r<=n.height||o;return s&&l?n.loadAround():s?n.loadPre():!!l&&n.loadPost()}},{key:"relayout",value:function(){var e=this;this.setState(function(t,n){if(n.isLoading)return null;var a=t.start,r=t.end,i=e.startKey,o=e.endKey;e.recomputeOffsets(n,a,r);var s=e.node?e.node.scrollTop():0,l=e.getScrollTop(),c=s-1<=0||l-1<=e.getOffset(),u=s+1>=e.getContentHeight()-n.height||l+1>=e.endBottom-n.height,d={start:a,end:r};if(e.startKey!==i||e.endKey!==o||c&&0!==a||u&&r!==n.keys.length){t.scrolling&&(e.overscan=8e3);var p=d=e.computeBounds(n,l),h=p.start,m=p.end;e.recomputeOffsets(n,h,m),c=l-1<=e.getOffset(),u=l+n.height+1>=e.endBottom+e.getLoadingOffsetBottom()}(c&&0===d.start||u&&d.end===n.keys.length||e.layout.getTotalHeight()<n.height&&0===d.start)&&e.loadMore(a,r,n);var b=e.layout.getTops();return d.start===a&&d.end===r&&b===t.tops?null:(e.scrollAnimation&&e.scrollAnimation.cancel(),e.pendingUpdate=!0,e.scrollTop=l,Z()({},d,{tops:b}))})}},{key:"recomputeOffsets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.start,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.end,a=this.layout.getTotalHeight()<=e.height;this.startKey=e.keys[t],this.endKey=e.keys[n-1],this.startTop=a?0:this.layout.getTop(this.startKey)||0,this.endBottom=this.layout.getBottom(this.endKey)||0}},{key:"computeBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments[1],a=n-this.overscan,r=n+e.height+this.overscan,i=Qu()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getBounds",this).call(this,a,r);return this.snapBounds(e,i)}},{key:"snapBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments[1],n=t.start,a=t.end;return{start:n<20?0:n,end:e.keys.length-a<20?e.keys.length:a}}},{key:"renderLoading",value:function(e,t){var n=e?{top:0,paddingTop:40}:{bottom:0,paddingBottom:15},a=e?"degradedLoadingTop":"degradedLoadingBottom",r=this.props.featureOfflineMode&&this.props.isOffline&&!t,i=tO.t("Loading history...");this.props.featureOfflineMode&&r&&(i=h.a.createElement("span",null,h.a.createElement(se.b,{type:"cloud-offline-small",size:"inherit"})," ",h.a.createElement("strong",null,tO.t("No connection."))," ",tO.t("Go online to load more messages.")));var o=f()("p-degraded_list__loading",{"p-degraded_list__loading--offline":r});return h.a.createElement("div",{key:a,className:o,style:n},i)}},{key:"renderItems",value:function(){var e=Qu()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItems",this).call(this),n=this.state.start>0,a=this.state.end<this.props.keys.length,r=this.props.keys.length>1&&(!this.props.reachedStart||n),i=this.props.keys.length>1&&(!this.props.reachedEnd||a);return[r&&this.renderLoading(!0,n)].concat(Le()(e),[i&&this.renderLoading(!1,a)])}}]),t}(ad),aO=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(ag.a)(e.shouldExcludeFirstItemFromGravity)&&(n.shouldExcludeFirstItemFromGravity=e.shouldExcludeFirstItemFromGravity),n}return u()(t,e),o()(t,[{key:"layout",value:function(){if(Qu()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"layout",this).call(this),this.totalHeight<this.containerHeight){var e=this.containerHeight-this.totalHeight;this.tops=Object(Ra.a)(this.tops,function(t){return t+e}),this.totalHeight=this.containerHeight}this.shouldExcludeFirstItemFromGravity&&this.shouldExcludeFirstItemFromGravity()&&this.keys.length>0&&(this.tops[Object(_f.a)(this.keys)]=0)}}]),t}(rd.a),rO=n("ukTK");function iO(){var e=window.location.search||"";if(e.indexOf("force_degraded_list=1")>0)return!0;if(e.indexOf("force_infinite_list=1")>0)return!1;var t=window.navigator.userAgent;return-1!==t.indexOf("Firefox")||(-1!==t.indexOf("Windows")||-1!==t.indexOf("Linux"))}var oO=n("H3xq").a,sO=n("PR8O"),lO=(n("EnhK"),ad),cO=nO,uO={channelId:m.b.string,timestamps:m.b.arrayOf(m.b.string),requestHistory:m.b.func,lastReadTs:m.b.string,isGhostLastRead:m.b.bool,startTs:m.b.string,startTsOffset:m.b.number,highlightTs:m.b.string,focusRequestedTs:m.b.string,rollups:m.b.objectOf(Pu.a.Rollup()),setUnreadPoint:m.b.func,isLoading:m.b.bool,isLoadingOlder:m.b.bool,reachedStart:m.b.bool,reachedEnd:m.b.bool,prevReachedEnd:m.b.bool,oldest:m.b.string,latest:m.b.string,onScroll:m.b.func,onVisibleRowsChanged:m.b.func,doneHighlighting:m.b.func,isFileExpanding:m.b.bool,isLimited:m.b.bool,isSlackbotIm:m.b.bool,useStickyDayDividers:m.b.bool,shouldIgnoreScrollKeys:m.b.func,shouldIgnoreArrowKeys:m.b.func,channelSessionId:m.b.string,theme:m.b.string,firstUnreadTs:m.b.string,featureReactMessages:m.b.bool,featureTinyspeck:m.b.bool,featureAriaApplicationMode:m.b.bool,messageContainerType:m.b.string,ariaLabel:m.b.string.isRequired,teamId:m.b.string,enterpriseId:m.b.string,sessionId:m.b.string,msgTriggers:m.b.object,currentUserId:m.b.string,jumpToTimestamp:m.b.func,makeMessageSummary:m.b.func,isScreenReaderEnabled:m.b.bool,windowLastFocusEvent:m.b.number,onFocusEnter:m.b.func,onFocusLeave:m.b.func,isBannerVisible:m.b.bool,setFocusRequestedTs:m.b.func,showThreadIfThreadable:m.b.func,featureReactThreads:m.b.bool,currentThreadKey:m.b.string,isThreadable:m.b.func,threadListId:m.b.string,telemeter:m.b.object,featureOfflineMode:m.b.bool,isOffline:m.b.bool,userAttentionIsOnChat:m.b.bool,removeFromSectionNavigation:m.b.func,addToSectionNavigation:m.b.func,setInitialActiveSection:m.b.func},dO={channelId:null,timestamps:[],requestHistory:d.a,lastReadTs:void 0,isGhostLastRead:!1,startTs:null,startTsOffset:null,highlightTs:null,focusRequestedTs:void 0,rollups:null,setUnreadPoint:d.a,isFileExpanding:!1,isLoading:!1,isLoadingOlder:!1,reachedStart:!1,reachedEnd:!1,prevReachedEnd:!1,oldest:void 0,latest:void 0,onScroll:d.a,onVisibleRowsChanged:d.a,doneHighlighting:d.a,isLimited:!1,isSlackbotIm:!1,useStickyDayDividers:!0,shouldIgnoreScrollKeys:function(){return!1},shouldIgnoreArrowKeys:function(){return!1},channelSessionId:null,theme:"light",firstUnreadTs:null,featureReactMessages:!1,featureTinyspeck:!1,featureAriaApplicationMode:!1,messageContainerType:void 0,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,currentUserId:null,jumpToTimestamp:d.a,makeMessageSummary:void 0,isScreenReaderEnabled:!1,windowLastFocusEvent:null,onFocusEnter:d.a,onFocusLeave:d.a,isBannerVisible:!1,setFocusRequestedTs:d.a,showThreadIfThreadable:d.a,featureReactThreads:!1,currentThreadKey:void 0,isThreadable:d.a,threadListId:void 0,telemeter:{store:d.a,measure:d.a},featureOfflineMode:!1,isOffline:!1,userAttentionIsOnChat:!1,removeFromSectionNavigation:d.a,addToSectionNavigation:d.a,setInitialActiveSection:d.a},pO=80,hO=60,mO=64,bO=120,fO={ABOVE:1,VISIBLE:2,BELOW:3},_O="0000000000.000001",gO=function(e){return Math.floor(e/1e3)+".000000"},vO=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=iO();if(n.state={degraded:a,isLoading:e.isLoading,isLoadingOlder:e.isLoadingOlder,isSelecting:!1,hasKeyboardFocus:!1,isFileExpanding:!1},n.DEFAULT_ROW_HEIGHT="light"===e.theme?pO:hO,n.STICKY_EPSILON=n.DEFAULT_ROW_HEIGHT/2,n.ANCHOR_OFFSET=a?bO:mO,n.heightCache=new rO.a({DEFAULT_HEIGHT:n.DEFAULT_ROW_HEIGHT}),n.layout=new aO({heightCache:n.heightCache,stickToBottom:!e.isFileExpanding||e.reachedEnd||e.prevReachedEnd,shouldExcludeFirstItemFromGravity:n.isFirstRowLimitedHistoryForeword.bind(n),STICKY_EPSILON:n.STICKY_EPSILON,STICKY_EPSILON_SETHEIGHT:2,ANCHOR_OFFSET:n.ANCHOR_OFFSET}),n.keys=[],n.rows=[],n.visibleRows=[],n.unreadIndex=null,n.list=null,n.useAnchor=!0,n.keyToScrollTo=null,n.width=0,n.hasRenderedOneMessage=!1,n.requestAround=n.requestAround.bind(n),n.requestOlder=n.requestOlder.bind(n),n.requestNewer=n.requestNewer.bind(n),n.renderRow=n.renderRow.bind(n),n.setListRef=n.setListRef.bind(n),n.getAriaLabelForRow=n.getAriaLabelForRow.bind(n),n.isItemAriaExpanded=n.isItemAriaExpanded.bind(n),n.onScroll=n.onScroll.bind(n),n.onListScrolled=n.onListScrolled.bind(n),n.onFocusEnter=n.onFocusEnter.bind(n),n.onFocusLeave=n.onFocusLeave.bind(n),n.debouncedOnListScrolled=Object(Ry.a)(n.onListScrolled,150),n.isMessage=n.isMessage.bind(n),n.onSelectionChange=n.onSelectionChange.bind(n),n.onJumpToUnreadShortcut=n.onJumpToUnreadShortcut.bind(n),n.focus=n.focus.bind(n),n.onShiftPageUp=n.onShiftPageUp.bind(n),n.onShiftPageDown=n.onShiftPageDown.bind(n),n.onEnd=n.onEnd.bind(n),n.onArrowKeyRight=n.onArrowKeyRight.bind(n),n.scrollToOffset=Object(Po.a)(n.scrollToOffset.bind(n),200),n.messagesRendered={},n.loadingHistoriesSeen=0,n.loadingHistoriesSeenHighEnd=0,n.loadingHistoriesPerHowManyMessages=84,n.loadingHistoriesPerHowManyMessagesHighEnd=500,n.scrollMetricsGatheringEnabled=Object(pb.a)(1)||n.props.featureTinyspeck,n.scrollMetricsGatheringEnabled){var i=Object(g.getStateByTeamId)(e.teamId),o=Object(dn.c)({state:i});n.debounceBatchMessagesSeen=Object(Ll.a)(function(){o.store("modern_history_load_seen_per_84_messages",n.loadingHistoriesSeen,{allow_zero:!0}),n.loadingHistoriesSeen=0},1e3),n.debounceBatchMessagesSeenHighEnd=Object(Ll.a)(function(){o.store("modern_history_load_seen_per_500_messages",n.loadingHistoriesSeenHighEnd,{allow_zero:!0}),n.loadingHistoriesSeenHighEnd=0},1e3)}return n.debounceCountHistoryLoadSeen=Object(Ll.a)(function(){n.loadingHistoriesSeen+=1,n.loadingHistoriesSeenHighEnd+=1},1e3),n.prqMetrics={channelSwitch:{}},n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){this.keyToScrollTo&&this.list&&(this.list.scrollToKey(this.keyToScrollTo,{lazy:this.lazyScroll}),this.keyToScrollTo=null);var t=this.props.isLoading||this.props.isLoadingOlder;Object(ag.a)(this.onJump)&&!t&&this.props.timestamps.length&&(this.onJump(),this.onJump=null),!!e.isFileExpanding&&!this.props.isFileExpanding?this.layout.setStickToBottom(!1):this.layout.setStickToBottom(this.props.reachedEnd||this.props.prevReachedEnd),this.onListScrolled(),this.maybeLogChannelSwitch(e),!e.userAttentionIsOnChat&&this.props.userAttentionIsOnChat&&this.props.addToSectionNavigation(),!this.props.userAttentionIsOnChat&&e.userAttentionIsOnChat&&this.props.removeFromSectionNavigation()}},{key:"maybeLogChannelSwitch",value:function(e){if(navigator.onLine)if(void 0!==this.props.msgTriggers[this.props.channelId]&&this.props.windowLastFocusEvent===this.props.msgTriggers[this.props.channelId].lastFocus){if(e.channelId!==this.props.channelId)this.trackChannelSwitchWithoutSync(e.channelId);else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&!1===e.isLoading&&!0===this.props.isLoading&&!0!==this.props.isLoadingOlder&&!1===this.prqMetrics.channelSwitch.hasLoggedVisible&&!1===this.prqMetrics.channelSwitch.hasLoggedUsable){this.trackChannelSwitchWithSync(n_.g,!1)}else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&!0===e.isLoading&&!1===this.props.isLoading&&!0!==this.props.isLoadingOlder&&!0===this.prqMetrics.channelSwitch.hasLoggedVisible){this.trackChannelSwitchWithSync(n_.f,!0)}}else this.prqMetrics.channelSwitch={}}},{key:"trackChannelSwitchWithoutSync",value:function(e){this.prqMetrics.channelSwitch.duration&&(Object(n_.f)(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop),Object(n_.g)(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop));var t=Object(g.getStateByTeamId)(this.props.teamId),n=Object(dn.c)({state:t}),a="start_channel_change_"+this.props.channelId,r=n.measure(a,"channel_change_react_msgs",null,{return_unprocessed:!0}).unprocessed;this.prqMetrics.channelSwitch={duration:r,prevChannelId:e,nextChannelId:this.props.channelId,fetchHistoryState:n_.c,hasLoggedVisible:!1,hasLoggedUsable:!1}}},{key:"trackChannelSwitchWithSync",value:function(e,t){var n="start_channel_change_"+this.prqMetrics.channelSwitch.nextChannelId,a=Object(g.getStateByTeamId)(this.props.teamId);e(Object(dn.c)({state:a}).measure(n,"channel_change_not_stored",null,{ephemeral:!0,return_unprocessed:!0}).unprocessed,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,n_.a,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop),t?(this.prqMetrics.channelSwitch={},this.prqMetrics.channelSwitch.hasLoggedUsable=!0):this.prqMetrics.channelSwitch.hasLoggedVisible=!0}},{key:"findTimestampClosestToStartTs",value:function(){var e=this.props,t=e.startTs,n=e.timestamps;return!!n.length&&(t?Object(Iu.a)(n,function(e){return e>=t}):null)}},{key:"focus",value:function(){this.list.focus()}},{key:"blur",value:function(){this.list.blur()}},{key:"setListRef",value:function(e){this.list=e}},{key:"jumpToUnread",value:function(e){var t=this,n=this.props,a=n.lastReadTs,r=n.isScreenReaderEnabled,i=n.firstUnreadTs,o=e&&"keydown"===e.type&&(r||this.state.hasKeyboardFocus),s=Object(Ja.a)(this.unreadIndex)&&this.keys[this.unreadIndex];s?o?(this.list.setActiveItem(i),this.list.scrollToKey(i)):this.list.scrollToKey(s):this.jumpToTimestamp({ts:a,onJump:function(){t.state.hasKeyboardFocus&&t.list.setActiveItem(t.props.firstUnreadTs)}})}},{key:"isAtBottom",value:function(){if(!this.list)return!1;var e=this.list.getScrollTop(),t=this.layout.getTotalHeight();return e+this.height>=Math.floor(t)-this.STICKY_EPSILON}},{key:"getUnreadLinePlacement",value:function(){if("number"!=typeof this.unreadIndex)return fO.ABOVE;if(!this.list)return fO.ABOVE;var e=this.list.getVisibleRange(),t=e.start,n=e.end;return this.unreadIndex<t?fO.ABOVE:this.unreadIndex<n?fO.VISIBLE:fO.BELOW}},{key:"getVisibleRows",value:function(){if(!this.list)return[];var e=this.list.getVisibleRange(),t=e.start,n=e.end;return this.rows.slice(t,n)}},{key:"getScrollmarkForFocusedItem",value:function(e){var t=e===_O?this.props.timestamps[0]:e;return{mark:e,offset:this.layout.getTop(t)-this.list.getScrollTop()}}},{key:"getScrollmark",value:function(){if(!this.list||!this.layout)return null;var e=this.state.hasKeyboardFocus?this.list.getActiveItem():this.previouslyActiveItem;if(this.previouslyActiveItem=null,e)return this.getScrollmarkForFocusedItem(e);var t=this.list.getScrollTop();if(this.layout.shouldStickToBottom(t))return null;var n=this.props.timestamps,a=this.layout.findAnchor(n,n,t+this.ANCHOR_OFFSET);return{mark:a,offset:this.layout.getTop(a)-t}}},{key:"onScroll",value:function(){this.useAnchor=!1,this.layout.setAnchor(!1),this.debouncedOnListScrolled(),this.props.onScroll()}},{key:"onSelectionChange",value:function(e){this.node&&this.setState(function(){return{isSelecting:e}})}},{key:"isMessage",value:function(e){var t=this.rows[e.index];return t&&("message"===t.type||"foreword"===t.type)}},{key:"onListScrolled",value:function(){var e=this.getVisibleRows();Object(Ny.a)(e,this.visibleRows)||(this.visibleRows=e,this.props.onVisibleRowsChanged(e))}},{key:"onShiftPageUp",value:function(){var e=this,t=this.getTimestampOfPrevDay();if(t){var n=this.state.hasKeyboardFocus;if(this.list.isScrolledToTop()&&this.props.reachedStart&&n)this.list.setActiveItem(this.getTimestampOfFirstMessageForDay(t));else{var a=gO(t),r=this.props.isBannerVisible?mO:28;this.jumpToTimestamp({ts:a,offset:r,onJump:function(){var a=e.getTimestampOfFirstMessageForDay(t);n&&e.list.setActiveItem(a),e.list.scrollToKey(a,{lazy:e.lazyScroll})}})}}}},{key:"onShiftPageDown",value:function(){var e=this,t=this.getTimestampOfNextDay();if(t){var n=this.state.hasKeyboardFocus;if(this.list.isScrolledToBottom()&&this.props.reachedEnd&&n)this.list.setActiveItem(this.getTimestampOfFirstMessageForDay(t));else{var a=gO(t),r=this.props.isBannerVisible?mO:28;this.jumpToTimestamp({ts:a,offset:r,onJump:function(){var a=e.getTimestampOfFirstMessageForDay(t);n&&e.list.setActiveItem(a),e.list.scrollToKey(a,{lazy:e.lazyScroll})}})}}}},{key:"onEnd",value:function(){var e=this,t=this.props,n=t.reachedEnd,a=t.timestamps,r=n?a[a.length-1]:null;return this.jumpToTimestamp({ts:r,onJump:function(){if(e.state.hasKeyboardFocus){var t=e.rows,n=t[t.length-1];"message"===(n&&n.type)&&e.list.setActiveItem(n.ts)}}}),!1}},{key:"onArrowKeyRight",value:function(e){var t=e.target;if(!Object(_u.a)(t)){var n=this.props,a=n.channelId,r=n.timestamps;if(n.featureReactThreads&&this.state.hasKeyboardFocus){var i=this.list.getInitialActiveItem();if(i&&Object(Ei.a)(r,i))this.props.showThreadIfThreadable({channelId:a,threadTs:i,requestFocus:!0})&&this.blur()}}}},{key:"onJumpToUnreadShortcut",value:function(e){sO.a&&this.jumpToUnread(e)}},{key:"onFocusEnter",value:function(e){var t=this;this.setState(function(){return{hasKeyboardFocus:e.isKeyboardFocus}},function(){t.props.onFocusEnter(e);var n=t.props,a=n.featureReactThreads,r=n.focusRequestedTs,i=n.setFocusRequestedTs;a&&r&&r===t.list.getActiveItem()&&i(null)})}},{key:"onFocusLeave",value:function(e){var t=this;this.state.hasKeyboardFocus&&(this.previouslyActiveItem=e.activeItem),this.setState(function(){return{hasKeyboardFocus:!1}},function(){t.props.onFocusLeave(e)})}},{key:"scrollToOffset",value:function(){var e;this.list&&(e=this.list).scrollToOffset.apply(e,arguments)}},{key:"shouldShowLimitedHistoryAlert",value:function(){var e=this.props,t=e.isLimited,n=e.isSlackbotIm;return t&&n}},{key:"shouldShowLimitedHistoryForeword",value:function(){var e=this.props,t=e.isLimited,n=e.isSlackbotIm;return t&&!n}},{key:"isFirstRowLimitedHistoryForeword",value:function(){if(!this.shouldShowLimitedHistoryForeword())return!1;var e=Object(_f.a)(this.rows);return e&&"foreword"===e.type}},{key:"requestAround",value:function(){var e=this;if(this.state.isLoading)return!1;if(this.props.reachedEnd)return this.requestOlder();if(this.props.reachedStart)return this.requestNewer();Object(ut.a)({teamId:this.props.teamId}).info("MESSAGE-LIST","requestAround channelId: "+this.props.channelId+" isLoading: "+this.state.isLoading+" timestamps: "+Object(wl.a)(this.props.timestamps)+" reachedStart: "+this.props.reachedStart+" reachedEnd: "+this.props.reachedEnd);var t=this.props,n=t.oldest,a=t.latest,r=t.timestamps,i=t.startTs;if(Object(sa.a)(r)&&!i)return this.props.requestHistory({});var o=n||r&&Object(_f.a)(r)||i,s=a||r&&Object(Tu.a)(r)||i,l=this.props.requestHistory({latest:o,oldest:s});return l&&(this.prqMetrics.channelSwitch.fetchHistoryState!==n_.a&&(this.prqMetrics.channelSwitch.fetchHistoryState=n_.b),l.then(function(){e.prqMetrics.channelSwitch.fetchHistoryState=n_.a}),this.setState(function(){return{isLoading:!0,isLoadingOlder:!1}})),l}},{key:"requestOlder",value:function(){var e=this;if(this.state.isLoading)return!1;var t=this.props,n=t.oldest,a=t.timestamps,r=t.startTs,i=n||a&&Object(_f.a)(a)||r,o=this.props.requestHistory({latest:i});return o&&(this.prqMetrics.channelSwitch.fetchHistoryState!==n_.a&&(this.prqMetrics.channelSwitch.fetchHistoryState=n_.b),o.then(function(){e.prqMetrics.channelSwitch.fetchHistoryState=n_.a}),this.setState(function(){return{isLoading:!0,isLoadingOlder:!0}})),o}},{key:"requestNewer",value:function(){var e=this;if(this.state.isLoading)return!1;var t=this.props,n=t.latest,a=t.timestamps,r=t.startTs,i=n||a&&Object(Tu.a)(a)||r,o=this.props.requestHistory({oldest:i});return o&&(this.prqMetrics.channelSwitch.fetchHistoryState!==n_.a&&(this.prqMetrics.channelSwitch.fetchHistoryState=n_.b),o.then(function(){e.prqMetrics.channelSwitch.fetchHistoryState=n_.a}),this.setState(function(){return{isLoading:!0,isLoadingOlder:!1}})),o}},{key:"renderMessage",value:function(e,t){var n=t.hasFocus,a=t.isHovered,r=t.isExpanded,i=e.ts,o=e.previousMessageTs,s=Object(Tu.a)(this.props.timestamps),l=i&&i===this.props.highlightTs;if(this.scrollMetricsGatheringEnabled){this.messagesRendered[e.ts]=!0;var c=Object(_o.a)(this.messagesRendered).length;c%this.loadingHistoriesPerHowManyMessages==0&&this.debounceBatchMessagesSeen(),c%this.loadingHistoriesPerHowManyMessagesHighEnd==0&&this.debounceBatchMessagesSeenHighEnd()}return h.a.createElement(oO,{ts:i,key:i,channelId:this.props.channelId,previousMessageTs:o,isLast:i===s,rollup:this.props.rollups[i],setUnreadPoint:this.props.setUnreadPoint,fadeAwayHighlight:l,doneHighlighting:this.props.doneHighlighting,channelType:this.props.channelType,channelSessionId:this.props.channelSessionId,isHovered:a,isThreadExpanded:r,threadListId:this.props.threadListId,messageContainerType:this.props.messageContainerType,renderActions:a||n,hasFocus:n,renderActionsOffscreen:this.state.hasKeyboardFocus,showThreadIfThreadable:this.props.showThreadIfThreadable})}},{key:"renderForeword",value:function(){return h.a.createElement(Xk,{key:"message-list-foreword",channelType:this.props.channelType,channelId:this.props.channelId,hasLimitedHistory:this.shouldShowLimitedHistoryForeword()})}},{key:"renderRow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hasFocus,a=t.isHovered,r=t.isExpanded,i=this.rows[e];if(!i||!i.type)return null;switch(i.type){case"message":return this.renderMessage(i,{hasFocus:n,isHovered:a,isExpanded:r});case"dayDividerLabel":return h.a.createElement(gd,{key:i.day,date:i.day,sticky:this.props.useStickyDayDividers});case"dayDivider":return h.a.createElement(_d,{key:i.day,date:i.day,isUnread:i.showDayDividerAsUnread,ghost:this.props.isGhostLastRead});case"unread":return h.a.createElement(md,{key:"unread",ghost:this.props.isGhostLastRead});case"loading":return this.debounceCountHistoryLoadSeen(),this.props.featureOfflineMode&&this.props.isOffline?h.a.createElement(Od,null):h.a.createElement("div",{key:"loading",className:f()("c-message_list__placeholders","c-message_list__placeholders--"+this.props.theme,{"c-message_list__placeholders--legacy":!Object(Me.a)()})});case"loadingSpinner":return this.props.featureOfflineMode&&this.props.isOffline?h.a.createElement(Od,null):h.a.createElement("div",{className:"c-message_list__spinner"},h.a.createElement(Yr.a,{size:"jumbo"}));case"foreword":return this.renderForeword({hasFocus:n});case"limited_history":return h.a.createElement(eO,null);default:return null}}},{key:"isItemAriaExpanded",value:function(e,t){var n=this.props,a=n.channelId,r=n.isThreadable,i=n.currentThreadKey;if(r){var o=this.rows[t];if(o&&o.type&&"message"===o.type){var s=Object(Ho.a)(i),l=s.threadTs,c=s.channelId,u=l===e&&a===c;return r({channelId:a,threadTs:e})?u:void 0}}}},{key:"getAriaLabelForRow",value:function(e){var t=this.props,n=t.channelId,a=t.makeMessageSummary,r=t.isScreenReaderEnabled;if(!a)return null;var i=this.rows[e];if(!i||!i.type)return null;if("message"!==i.type)return null;var o=i.ts,s=i.previousMessageTs,l=i.isFirstMsgForDay,c=i.isLastMsgForDay,u=i.isFirstUnreadMsg,d=i.day,p=this.props.rollups[o];return this.state.hasKeyboardFocus||r?a({channelId:n,ts:o,isFirstUnreadMsg:u,isFirstMsgForDay:l,isLastMsgForDay:c,previousMessageTs:s,day:d,rollup:p,hasFocus:this.state.hasKeyboardFocus}):null}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(this.setState(function(n){return e.isLoading===n.isLoading&&e.isLoadingOlder===n.isLoadingOlder?null:(Object(ut.a)({teamId:t.props.teamId}).info("MESSAGE-LIST","componentWillReceiveProps isLoading: "+e.isLoading+" isLoadingOlder: "+e.isLoadingOlder+" timestamps: "+Object(wl.a)(e.timestamps)),{isLoading:e.isLoading,isLoadingOlder:e.isLoadingOlder})}),e.channelId!==this.props.channelId||e.startTs!==this.props.startTs||e.highlightTs&&e.highlightTs!==this.props.highlightTs||e.timestamps.length&&!this.props.timestamps.length){this.useAnchor=!0;var n=e.startTs,a=this.props.timestamps,r=e.timestamps;if(Object(Ty.a)(n,Object(Iy.a)(Object(_f.a)(a)),Object(Sy.a)(Object(Tu.a)(a)))&&e.channelId===this.props.channelId){var i=Object(bf.a)(r,function(t){return t<=e.startTs});this.keyToScrollTo=i,this.lazyScroll=e.highlightLazy,this.useAnchor=!1}}e.channelId!==this.props.channelId&&(this.heightCache.invalidate(),this.list&&this.list.resetRendered&&this.list.resetRendered(),Object(ut.a)({teamId:this.props.teamId}).info("MESSAGE-LIST","Switching channels: "+e.channelId+" timestamps: "+Object(wl.a)(e.timestamps))),e.lastReadTs!==this.props.lastReadTs&&(this.unreadIndex=null)}},{key:"groupTimestampsByDay",value:function(e){return Object(Up.a)(e,function(e){return Ed(e)})}},{key:"getTimestampsForDays",value:function(e){return Object(_o.a)(this.groupTimestampsByDay(e)).sort()}},{key:"getTimestampOfDayClosestToTop",value:function(){var e=this.list.getVisibleRange().start,t=this.rows[e];if(t)return"dayDivider"===t.type?t.day.toString():"dayDividerLabel"===t.type?t.day.toString():"message"===t.type?t.day.ts.toString():void 0}},{key:"getStartTimestampForDayNavigation",value:function(){return this.state.hasKeyboardFocus?Ed(this.list.getInitialActiveItem()):this.getTimestampOfDayClosestToTop()}},{key:"getTimestampOfPrevDay",value:function(){var e=this.getStartTimestampForDayNavigation(),t=this.getTimestampOfFirstMessageForDay(e);if(!t)return e;if(t&&!this.list.isItemInView(t))return e;var n=this.getTimestampsForDays(this.props.timestamps);return n[Object(ff.a)(n,e)-1]}},{key:"getTimestampOfNextDay",value:function(){var e=this.getStartTimestampForDayNavigation(),t=this.getTimestampsForDays(this.props.timestamps),n=t[Object(ff.a)(t,e)+1];return n||(parseInt(e,10)+864e5).toString()}},{key:"getTimestampOfFirstMessageForDay",value:function(e){var t=this.getTimestampsForDays(this.props.timestamps),n=Object(ff.a)(t,e);if(!(n<0)&&(0!==n||this.props.reachedStart)){var a=this.groupTimestampsByDay(this.props.timestamps)[e];return a?a[0]:void 0}}},{key:"jumpToTimestamp",value:function(e){var t=e.ts,n=e.offset,a=e.onJump;Object(ag.a)(a)&&(this.onJump=a),this.props.jumpToTimestamp({ts:t,offset:n})}},{key:"render",value:function(){var e=this;if(this.props.featureOfflineMode&&this.props.isOffline&&Object(sa.a)(this.props.timestamps))return h.a.createElement(du,null);var t=this.groupTimestampsByDay(this.props.timestamps),n=Object(_o.a)(t).sort(),a=[],r=[],i=[],o=this.findTimestampClosestToStartTs(),s=this.props.firstUnreadTs,l=o;this.props.reachedStart&&(r.push(_O),a.push({type:"foreword",ts:_O}),this.shouldShowLimitedHistoryAlert()&&(r.push("limited_history"),a.push({type:"limited_history"}))),this.unreadIndex=null;var c=Object(_f.a)(this.props.timestamps)<=this.props.lastReadTs||this.props.reachedStart;Object(jd.a)(n,function(o,u){var d=parseInt(o,10),p=t[o],h=o+"."+e.props.channelId,m=c&&Object(_f.a)(p)===s;m&&(e.unreadIndex=a.length,e.props.startTs===e.props.lastReadTs&&(l=h)),a.push({type:"dayDividerLabel",day:d,showDayDividerAsUnread:m}),e.props.useStickyDayDividers&&i.push({key:h,index:r.length}),r.push(h),(u>0||e.props.reachedStart||e.state.degraded)&&(a.push({type:"dayDivider",day:d,showDayDividerAsUnread:m}),r.push(o+"divider")),e.state.degraded||e.state.isSelecting||0!==u||!e.state.isLoadingOlder||(r.push("loading"),a.push({type:"loading"}));var b=void 0;Object(jd.a)(p,function(t,i){if(c&&0!==i&&t===s){e.unreadIndex=a.length;r.push("unreadDivider"),a.push({type:"unread",day:d}),e.props.startTs===e.props.lastReadTs&&(l=s)}var o=0===u&&e.props.reachedStart,h=u===n.length-1&&e.props.reachedEnd,m=0===i&&(u>0||e.props.reachedStart),f=i===p.length-1&&(u<n.length-1||e.props.reachedEnd),_=s===t;a.push({type:"message",ts:t,previousMessageTs:b,isFirstMsgForDay:m,isLastMsgForDay:f,isFirstUnreadMsg:_,day:{ts:d,isFirstDay:o,isLastDay:h}}),r.push(t),b=t})}),!this.state.isLoading||this.state.isLoadingOlder||this.props.reachedEnd||this.props.prevReachedEnd||(r.push("loadingSpinner"),a.push({type:"loadingSpinner"})),this.layout.setAnchor(this.useAnchor&&l,this.useAnchor&&this.props.startTsOffset),!this.useAnchor&&this.keyToScrollTo&&Object(Ja.a)(this.props.startTsOffset)&&(this.layout.anchorOffset=this.props.startTsOffset),this.keys=r,this.rows=a;var u={firstVisibleUnreadTs:s,isGhostLastRead:this.props.isGhostLastRead,highlightTs:this.props.highlightTs,lastTimestamp:Object(Tu.a)(this.props.timestamps),reachedEnd:this.props.reachedEnd,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:this.props.useStickyDayDividers},d=this.state.degraded?cO:lO,p=this.props.shouldIgnoreScrollKeys,m=[{keys:["command+j","ctrl+j"],handler:this.onJumpToUnreadShortcut},{keys:["shift+pagedown"],handler:this.onShiftPageDown.bind(this),filter:p},{keys:["shift+pageup"],handler:this.onShiftPageUp.bind(this),filter:p},{keys:["right"],handler:this.onArrowKeyRight,filter:this.props.shouldIgnoreArrowKeys}],b=function(){if(e.state.isLoading)return null;var t=a[a.length-1],n=t&&t.type;return e.props.startTs===_O||!1===o&&"foreword"===n?_O:null===o&&"message"===n?t.ts:s||(o||null)}();return h.a.createElement(Nu.a,null,function(t){var n=t.width,a=t.height;return 0===n||0===a?null:(n!==e.width&&(e.heightCache.invalidate(),e.width=n),e.height=a,h.a.createElement(d,{ref:e.setListRef,className:"c-message_list",ariaLabel:e.props.ariaLabel,height:a,width:n,keys:r,rowRenderer:e.renderRow,getAriaLabelForRow:e.getAriaLabelForRow,layout:e.layout,stickyItems:i,stickyOffsetTop:-21,stickyZIndex:200,loadAround:e.requestAround,loadPre:e.requestOlder,loadPost:e.requestNewer,isLoading:e.state.isLoading,reachedStart:e.props.reachedStart,reachedEnd:e.props.reachedEnd||e.props.prevReachedEnd,fadeScrollbar:!0,onScroll:e.onScroll,onSelectionChange:e.onSelectionChange,onEnd:e.onEnd,onFocusEnter:e.onFocusEnter,onTabWithin:e.props.setInitialActiveSection,onFocusLeave:e.onFocusLeave,keyCommands:m,shouldIgnoreScrollKeys:e.props.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:e.props.shouldIgnoreArrowKeys,isFocusableItem:e.isMessage,unrelatedUpdateProps:u,featureReactMessages:e.props.featureReactMessages,activeItem:e.props.focusRequestedTs,initialActiveItem:b,useAriaApplicationMode:e.props.featureAriaApplicationMode,isItemAriaExpanded:e.isItemAriaExpanded,itemAriaControls:e.props.threadListId,featureOfflineMode:e.props.featureOfflineMode,isOffline:e.props.isOffline}))})}}]),t}(y_.a);vO.displayName="MessageList",vO.propTypes=uO,vO.defaultProps=dO;var yO=Object(Ay.a)(vO),kO=n("jWJI"),OO=n("JS8a"),jO=(n("3ise"),new x.b("unavailable_channel")),CO=(m.b.bool.isRequired,m.b.string.isRequired,m.b.bool.isRequired,m.b.bool,function(e){var t=e.isThread,n=e.isImOrMpim,a=e.unavailableTeamId;if(!e.featureEscGridMigrationsClient)return null;var r=void 0,i=h.a.createElement(Za.a,{id:a});r=t?jO.t("This thread is currently unavailable"):jO.rt("{teamName} is making changes to their workspace",{teamName:i});var o=void 0;o=t?jO.rt("{teamName} is making changes to their workspace, and this thread will be unavailable until that process is complete.",{teamName:i}):n?jO.t("This conversation will be unavailable until this process is complete."):jO.t("This channel will be unavailable until this process is complete.");var s=cdn_url+"/1295a/img/enterprise/unavailable_channel.png";return h.a.createElement(p.Fragment,null,h.a.createElement("img",{className:"p-unavailable_channel_image",src:s,srcSet:s+", "+s.replace(".png","@2x.png")+" 2x",alt:""}),h.a.createElement("h2",{className:"p-unavailable_channel_title"},r),h.a.createElement("div",{className:"p-unavailable_channel_content"},o))});CO.displayName="UnavailableChannelBlocker",CO.defaultProps={isThread:!1};var EO=CO,wO=n("c695"),SO=n("YB7p"),IO=new x.b("unavailable_channel"),TO=(m.b.bool.isRequired,m.b.string.isRequired,m.b.bool.isRequired,m.b.bool,m.b.object.isRequired,m.b.string.isRequired,m.b.oneOf(Object.values(he.a)).isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!1},n.handleReload=n.handleReload.bind(n),n}return u()(t,e),o()(t,[{key:"handleReload",value:function(){var e=this.props,t=e.channelId,n=e.channelPrivacyType,a=e.unavailableTeamId,r=e.clogger,i=e.isThread;this.setState(function(){return{loading:!0}});var o="UnavailableChannelReload: Remote team "+a+" has migrated their data, user triggered client reload";Object(gf.a)()?Object(SO.a)({reason:o,reasonKey:"unavailable_channel_reload"}):Object(SO.b)({reason:o,reasonKey:"unavailable_channel_reload",noCache:!0}),r.track(ve.k.CHANNEL_UNAVAILABLE,{channel_id:t,channel_type:t?t.charAt(0):null,channel_privacy_type:n,unavailable_team_id:a,contexts:{ui_context:{action:ve.v.CLICK,step:i?ve.z.THREAD:ve.z.MESSAGE_PANE,ui_element:ve.y.BTN_RELOAD}}}),r.sendDataAndEmptyQueue()}},{key:"render",value:function(){var e=this.props,t=e.isThread,n=e.isImOrMpim,a=e.unavailableTeamId;if(!e.featureEscGridMigrationsClient)return null;var r=void 0;r=t?IO.t("Reload Slack to view this thread"):n?IO.t("Reload Slack to view this conversation"):IO.t("Reload Slack to view this channel");var i=h.a.createElement(Za.a,{id:a}),o=void 0;o=t?IO.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this thread.",{teamName:i}):n?IO.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this conversation.",{teamName:i}):IO.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this channel.",{teamName:i});var s=cdn_url+"/e9645/img/enterprise/unavailable_channel_reload.png";return h.a.createElement(p.Fragment,null,h.a.createElement("img",{className:"p-unavailable_channel_image p-unavailable_channel_image--reload",src:s,srcSet:s+", "+s.replace(".png","@2x.png")+" 2x",alt:""}),h.a.createElement("h2",{className:"p-unavailable_channel_title"},r),h.a.createElement("div",{className:"p-unavailable_channel_content"},h.a.createElement("p",null,o),h.a.createElement("div",{className:"align_center"},h.a.createElement(wO.a,{type:"primary",size:"large",onClick:this.handleReload,disabled:this.state.loading,loading:this.state.loading},IO.t("Reload Slack")))))}}]),t}(p.PureComponent));TO.displayName="UnavailableChannelReload",TO.defaultProps={isThread:!1};var NO=TO,RO=(m.b.bool.isRequired,m.b.bool.isRequired,m.b.string.isRequired,m.b.bool.isRequired,m.b.bool,m.b.object.isRequired,m.b.string.isRequired,m.b.oneOf(Object.values(he.a)).isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clogImpression()}},{key:"componentDidUpdate",value:function(e){e.isReloadRequired===this.props.isReloadRequired&&e.channelId===this.props.channelId||this.clogImpression()}},{key:"clogImpression",value:function(){if(this.props.featureEscGridMigrationsClient){var e=this.props,t=e.channelId,n=e.channelPrivacyType,a=e.unavailableTeamId,r=e.clogger,i=e.isThread,o=e.isReloadRequired;r.track(ve.k.CHANNEL_UNAVAILABLE,{channel_id:t,channel_type:t?t.charAt(0):null,channel_privacy_type:n,unavailable_team_id:a,contexts:{ui_context:{action:ve.v.IMPRESSION,step:i?ve.z.THREAD:ve.z.MESSAGE_PANE,ui_properties:{element_name:o?"reload":"blocker"}}}})}}},{key:"render",value:function(){if(!this.props.featureEscGridMigrationsClient)return null;var e=this.props,t=e.isReloadRequired,n=e.isThread,a=f()("p-unavailable_channel",{"p-unavailable_channel_thread":n});return h.a.createElement("div",{className:a},t?h.a.createElement(NO,this.props):h.a.createElement(EO,this.props))}}]),t}(p.PureComponent));RO.displayName="UnavailableChannel",RO.defaultProps={isThread:!1};var AO=Object(_.b)(function(e,t){var n=t.unavailableTeamId,a=t.channelId,r=Object($.i)(e,n),i=Object(re.d)(e,a);return{isReloadRequired:Object(te.b)(r),isImOrMpim:Object(he.eb)(i)||Object(he.lb)(i),clogger:Object(ye.a)({state:e}),channelId:i.id,channelPrivacyType:Object(he.t)(i),featureEscGridMigrationsClient:Object(y.i)(e,"feature_esc_grid_migrations_client")}})(RO),PO=(n("qfOp"),new x.b("messages")),MO=(m.b.bool,m.b.bool,m.b.number,m.b.array,m.b.oneOf(["channel","private","im","mpim"]),m.b.string,m.b.bool,m.b.oneOf(["control","test"]),m.b.func,{isShared:!1,isPendingShared:!1,guestCount:0,connectedTeamIds:[],type:"channel",firstConnectedTeamName:"",featureContextBar:!1,contextBarExperimentGroup:"control",bumpMessagePaneUp:d.a}),DO=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderTeamIcons",value:function(){for(var e=this.props,t=e.isPendingShared,n=e.connectedTeamIds,a=[],r=n.length>3?3:n.length,i=0;i<r;i++)a.push(h.a.createElement(mt.b,{isPendingShared:t,className:"p-context_bar__icon",id:n[i],size:"16"}));return a}},{key:"renderIcon",value:function(){var e=this.props,t=e.isShared,n=e.guestCount;return t?this.renderTeamIcons():n>0?h.a.createElement(se.b,{type:"user-filled",size:"inherit",style:{fontSize:16},className:"p-context_bar__icon"}):null}},{key:"renderText",value:function(){var e=this.props,t=e.type,n=e.isShared,a=e.guestCount,r=e.isPendingShared,i=e.connectedTeamIds,o=e.firstConnectedTeamName;if(e.featureContextBar){if("im"===t)return n?PO.rt("This person is from {team}.",{team:h.a.createElement("strong",null,o)}):a>0?PO.rt("This person is a <strong>guest</strong> in your organization."):null;if("mpim"===t){if(n)return PO.rt("<strong>{numConnectedTeams, plural, =1 {{singleTeamName}} other {# other organizations}}</strong> {guestCount, plural, =0 {{numConnectedTeams, plural, =1 {is} other {are}}} =1 {and <strong># guest</strong> are} other {and <strong># guests</strong> are}} in this conversation.",{guestCount:a,singleTeamName:o,numConnectedTeams:i.length});if(a>0)return PO.rt("{guestCount, plural, =1 {<strong># guest</strong> is} other {<strong># guests</strong> are}} in this conversation.",{guestCount:a})}if(r)return PO.rt("{numConnectedTeams, plural, =1 {{singleTeamName} is} other {<strong># other organizations</strong> are}} invited to this channel.",{singleTeamName:h.a.createElement("strong",null,o),numConnectedTeams:i.length});if(n)return PO.rt("<strong>{numConnectedTeams, plural, =1 {{singleTeamName}} other {# other organizations}}</strong> {guestCount, plural, =0 {{numConnectedTeams, plural, =1 {is} other {are}}} =1 {and <strong># guest</strong> are} other {and <strong># guests</strong> are}} in this channel.",{guestCount:a,singleTeamName:o,numConnectedTeams:i.length});if(a>0)return PO.rt("{guestCount, plural, =1 {<strong># guest</strong> is} other {<strong># guests</strong> are}} in this channel.",{guestCount:a})}return""}},{key:"render",value:function(){var e=this.props,t=e.featureContextBar,n=e.contextBarExperimentGroup,a=e.isShared,r=e.guestCount;return t&&"test"===n&&(a||r>0)?(this.props.bumpMessagePaneUp(!0),h.a.createElement("div",{className:"p-context_bar"},this.renderIcon(),h.a.createElement("span",{className:"p-context_bar__text"},this.renderText()))):(this.props.bumpMessagePaneUp(!1),null)}}]),t}(p.PureComponent);DO.displayName="ContextBar",DO.defaultProps=MO;var xO=Object(_.b)(function(e){var t=Object(k.a)(e),n=Object(re.d)(e,t),a=Object(he.Y)(n),r=Object(he.ub)(n),i=Object(he.v)(n),o=Object(he.M)(e,n),s=o.length>0?Object(te.e)(Object($.i)(e,o[0])):"",l=Object(Xa.f)(e,t),c=Object(aa.a)(l,"counts.restricted_member_count"),u=Object(Cs.c)(e,"context_bar");return{isShared:a,isPendingShared:r,type:i,connectedTeamIds:o,firstConnectedTeamName:s,guestCount:c,featureContextBar:Object(y.i)(e,"feature_context_bar"),contextBarExperimentGroup:u}})(DO),LO=n("j/30"),FO=new x.b("messages"),BO=(m.b.string.isRequired,m.b.string.isRequired,m.b.func.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=Object(LO.a)(this.props.firstTimestamp,{shortenMonth:!0}),t=Object(LO.a)(this.props.lastTimestamp,{shortenMonth:!0});return h.a.createElement("div",{className:"p-archives_banner"},h.a.createElement("span",{className:"p-archives_banner__date_range"},FO.t("Viewing archives from {rangeStart} - {rangeEnd}",{rangeStart:e,rangeEnd:t})),h.a.createElement(Re.c,{className:"p-archives_banner__jump",onClick:this.props.jumpToRecent},FO.t("Jump to recent messages"),h.a.createElement(se.a,{type:"arrow_down"})))}}]),t}(p.PureComponent));BO.displayName="ArchivesBanner";var qO=BO;BO.defaultProps={};var UO=n("qc8s"),HO=n("k0G2"),GO=new x.b("messages"),WO=(m.b.bool.isRequired,m.b.number,m.b.oneOfType([m.b.string,m.b.number]),m.b.bool,m.b.bool,m.b.string,m.b.bool,m.b.oneOf(Object($v.a)(fO)),m.b.func,m.b.func,m.b.func,{displayCount:0,since:null,do24hrTime:!1,known:!1,channelId:null,ghost:!1,unreadPlacement:fO.VISIBLE,jumpToUnread:d.a,markMostRecentMsgRead:d.a,onHide:d.a}),KO=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.startFade=n.startFade.bind(n),n.onAnimationTick=n.onAnimationTick.bind(n),n.onAnimationEnd=n.onAnimationEnd.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.jumpOrMark=n.jumpOrMark.bind(n),n.markAsRead=n.markAsRead.bind(n),n.animation=null,n.state={hasUnreads:e.hasUnreads,displayCount:e.displayCount,since:e.since,unreadPlacement:e.unreadPlacement,opacity:1},n}return u()(t,e),o()(t,[{key:"componentWillReceiveProps",value:function(e){if(e.channelId!==this.props.channelId&&this.animation&&this.animation.cancel(),!this.state.hasUnreads||e.hasUnreads)this.setState(function(){return{hasUnreads:e.hasUnreads,displayCount:e.displayCount,since:e.since,unreadPlacement:e.unreadPlacement,opacity:1}});else{var t=e.ghost?3e3:0;this.startFade(t)}}},{key:"componentWillUnmount",value:function(){this.animation&&this.animation.cancel()}},{key:"onAnimationTick",value:function(e){var t=e.value,n=e.nextTick;this.animation&&(this.setState(function(){return{opacity:t}}),n())}},{key:"onAnimationEnd",value:function(){var e=this;this.setState(function(){return{hasUnreads:!1,opacity:1}},function(){e.props.onHide()})}},{key:"onKeyDown",value:function(e){var t=[HO.e,HO.j];Object(Ei.a)(t,e.keyCode)&&this.jumpOrMark(e)}},{key:"startFade",value:function(e){this.animation=Object($f.a)({delay:e,fromValue:1,toValue:0,duration:100,easing:"easeInQuad",onTick:this.onAnimationTick,onComplete:this.onAnimationEnd})}},{key:"markAsRead",value:function(e){e.stopPropagation(),Object(ut.b)().action("UNREAD-BANNER","Mark "+this.props.channelId+" read"),this.props.markMostRecentMsgRead({channelId:this.props.channelId,reason:hu.p.CLICKED}),this.animation&&this.animation.cancel(),this.onAnimationEnd()}},{key:"jumpOrMark",value:function(e){this.state.unreadPlacement===fO.VISIBLE?this.markAsRead(e):this.props.jumpToUnread(e)}},{key:"makeJumpLabel",value:function(){if(!Object(sO.a)())return GO.t("Jump");var e=Object(qe.p)()?GO.t("Cmd"):GO.t("Ctrl");return GO.rt("Jump <span>({cmdButton} + J)</span>",{cmdButton:e},function(e){var t=e.text,n=e.key;return h.a.createElement("span",{key:n,className:"normal"},t)})}},{key:"makeJumpAriaLabel",value:function(){if(Object(sO.a)()){var e=Object(qe.p)()?GO.t("Cmd"):GO.t("Ctrl");return GO.t("Jump to first unread message ({cmdButton} J)",{cmdButton:e,fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"})}}},{key:"renderJump",value:function(){var e=this.state.unreadPlacement;if(e===fO.VISIBLE)return null;var t=e===fO.ABOVE?"arrow_up":"arrow_down",n=this.makeJumpLabel(),a=this.makeJumpAriaLabel();return h.a.createElement(Re.c,{"aria-label":a,onMouseDown:this.jumpOrMark,onKeyDown:this.onKeyDown,className:"p-message_pane__unread_banner__jump"},h.a.createElement(se.a,{type:t,className:"p-message_pane__unread_banner__jump__arrow"}),n)}},{key:"renderClose",value:function(){var e=f()("p-message_pane__unread_banner__close",{"p-message_pane__unread_banner__close--detached":this.state.unreadPlacement!==fO.VISIBLE});return h.a.createElement(le.c,{tip:GO.t("Mark as read (esc)"),position:"bottom-right"},h.a.createElement(Re.c,{className:e,onClick:this.markAsRead,"aria-label":GO.t("Mark as read")},h.a.createElement("span",{className:"p-message_pane__unread_banner__close__label"},GO.t("Mark as read")),h.a.createElement(se.a,{type:"times_small",className:"p-message_pane__unread_banner__close__icon"})))}},{key:"render",value:function(){var e=this.state,t=e.hasUnreads,n=e.since,a=e.displayCount,r=this.props,i=r.do24hrTime,o=r.known;if(!t||!n)return null;var s=Math.floor(parseFloat(n));if(!s)return null;var l=Object(LO.a)(s,{excludeYear:!0}),c=Object(UO.a)(s,{do24hrTime:i}),u=o?"":"+",d=a;!o&&d>10&&(d=10*Math.floor(d/10));var p=GO.t("{count, plural, =1 {#{certainty} new message} other {#{certainty} new messages}} since {time} on {date}",{certainty:u,count:d,time:c,date:l});return d&&(1!==d||o)||(p=GO.t("New messages since {time} on {date}",{time:c,date:l})),h.a.createElement("div",{className:"p-message_pane__unread_banner p-message_pane__banner"},h.a.createElement("div",{className:"p-message_pane__unread_banner__banner"},this.renderJump(),h.a.createElement(Re.c,{className:"p-message_pane__unread_banner__msg",onMouseDown:this.jumpOrMark,onKeyDown:this.jumpOrMark,style:{opacity:this.state.opacity}},p)),this.renderClose())}}]),t}(p.PureComponent);KO.displayName="UnreadBanner",KO.defaultProps=WO;var VO=Object(_.b)(function(e,t){var n=t.since;"0000000000.000000"===n&&(n=Object(re.d)(e,t.channelId).created);return{do24hrTime:Object(ue.h)(e,"time24"),since:n}})(KO),zO=n("9/ob"),YO=n("e9Nc"),QO=(n("Rmar"),new x.b("search")),JO=(m.b.object.isRequired,m.b.bool.isRequired,m.b.func,m.b.object,{searchInProductEducationDismiss:d.a,channelForCurrentInFilterQuery:null}),XO=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onClickClose","onClickBannerContent"]),n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){this.props.showSearchScrollbackTip&&!e.showSearchScrollbackTip&&this.props.clogger.track("SEARCH_SCROLL_TIP",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id})}},{key:"onClickClose",value:function(e){e.stopPropagation(),e.preventDefault(),this.props.clogger.track("SEARCH_SCROLL_TIP_DISMISS",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id}),this.props.searchInProductEducationDismiss()}},{key:"onClickBannerContent",value:function(e){e.stopPropagation(),e.preventDefault(),this.props.clogger.track("SEARCH_SCROLL_TIP_CLICK",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id})}},{key:"render",value:function(){return this.props.showSearchScrollbackTip&&h.a.createElement(zO.a,{enabled:["feature_strollers_to_perch"]},h.a.createElement("div",{className:"p-message_pane__search_tip_banner"},h.a.createElement("div",{className:"p-message_pane__search_tip_banner_content",onClick:this.onClickBannerContent,role:"presentation"},QO.rt("<strong>Tip</strong>: Looking for something specific? Try a quick search.",{fallbackHash:"f74de2cccbeb348dd34450e1fc92a0fd0f502e71"}),h.a.createElement(Re.c,{className:"p-message_pane__search_tip_banner_action","aria-label":QO.t("Close",{ns:"toast"}),onClick:this.onClickClose},h.a.createElement(se.b,{inline:!0,type:"times"})))))}}]),t}(p.PureComponent);XO.displayName="SearchTipBanner",XO.defaultProps=JO;var ZO={searchInProductEducationDismiss:Wh.b},$O=Object(_.b)(function(e){return{showSearchScrollbackTip:Object(Wh.e)(e),clogger:Object(ye.a)({state:e}),channelForCurrentInFilterQuery:Object(YO.a)(e)}},ZO)(XO),ej=n("qgNY"),tj=new x.b("messages"),nj=(m.b.func.isRequired,m.b.bool,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.backToBriefings=n.backToBriefings.bind(n),n}return u()(t,e),o()(t,[{key:"backToBriefings",value:function(){this.props.displayModelOrViewById({id:"Vall_unreads"})}},{key:"render",value:function(){return this.props.isHighlightsBackButtonVisible?h.a.createElement(Re.d,{type:"outline",size:"small",className:"p-message_pane__briefings_back_button",onClick:this.backToBriefings},h.a.createElement(se.b,{className:"p-message_pane__briefings_back_button_icon",type:"arrow-left"}),tj.t("Back to my highlights")):null}}]),t}(p.PureComponent));nj.displayName="BriefingsBackButton",nj.defaultProps={isHighlightsBackButtonVisible:!1};var aj=Object(_.b)(function(e){return{isHighlightsBackButtonVisible:Object(S.o)(e)}},function(e){return{displayModelOrViewById:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;return e(Object(ej.a)({id:t}))}}})(nj),rj=n("anFW"),ij=(m.b.string.isRequired,m.b.bool.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.triggerFileUpload=n.triggerFileUpload.bind(n),n.hiddenFileInputRef=h.a.createRef(),n.commands=[{keys:["mod+u"],handler:n.triggerFileUpload}],n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){Object(Me.a)()&&(this.keyCommands=new gu.a,this.keyCommands.bindAll(this.commands))}},{key:"componentWillUnmount",value:function(){Object(Me.a)()&&(this.keyCommands.reset(),this.keyCommands=null)}},{key:"triggerFileUpload",value:function(){this.props.userAttentionIsOnChat&&this.hiddenFileInputRef&&this.hiddenFileInputRef.current.click()}},{key:"render",value:function(){var e=this.props.channelId;return Object(Me.a)()?h.a.createElement(rj.a,{ref:this.hiddenFileInputRef,channelId:e,viewContext:hu.y.MESSAGE_PANE}):null}}]),t}(p.Component));ij.displayName="FileUploadShortcut";var oj=Object(_.b)(function(e){return{userAttentionIsOnChat:Object(De.e)(e)}})(ij),sj=Object(Me.a)()?Object(Pe.a)(yO,"MessagePane",{index:0}):yO,lj=(m.b.object,m.b.string,m.b.string,m.b.oneOf(["channel","private","im","mpim"]),m.b.oneOf(["light","dense"]),m.b.arrayOf(m.b.string),m.b.bool,m.b.bool,m.b.bool,m.b.string,m.b.string,m.b.func,m.b.func,m.b.func,m.b.func,m.b.string,m.b.bool,m.b.number,m.b.bool,m.b.string,m.b.number,m.b.string,m.b.bool,m.b.string,m.b.objectOf(Pu.a.Rollup()),m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.string,m.b.string,m.b.string,m.b.string,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.string,m.b.string,m.b.string,m.b.object,m.b.bool,m.b.func,m.b.string,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.number,m.b.bool,m.b.number,m.b.number,m.b.func,m.b.bool,m.b.func,m.b.func,m.b.bool,m.b.string,m.b.func,m.b.string,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.object.isRequired,m.b.func,m.b.bool,m.b.oneOf(["warm","cold"]),m.b.bool,m.b.bool,m.b.bool,m.b.bool,{logger:{error:d.a},channelId:null,channelDisplayName:void 0,type:"channel",theme:"light",timestamps:[],reachedStart:!1,reachedEnd:!1,prevReachedEnd:!1,oldest:void 0,latest:void 0,fetchHistory:d.a,fetchSliHighlights:d.a,onMount:d.a,callAppHomeOpenEventByChannelId:d.a,lastReadTs:void 0,isGhostLastRead:!1,unreadCount:0,unreadCountKnown:!1,startTs:null,startTsOffset:null,highlightTs:null,highlightLazy:void 0,focusRequestedTs:void 0,rollups:null,isLoading:!1,isLoadingOlder:!1,setUnreadPoint:d.a,markMostRecentMsgRead:d.a,setUnreadLineVisibility:d.a,clearHighlightTs:d.a,jumpToTimestamp:d.a,saveScrollmark:d.a,isArchived:!1,isLimited:!1,isSlackbotIm:!1,isAppIm:!1,overlayVisible:!1,channelSessionId:null,prevChannelSwitchTs:null,newxpOnboardingStep:null,firstUnreadTs:null,featureReactMessages:!1,featureTinyspeck:!1,useGlobalNav:!1,featureClassicNav:!1,featureAriaApplicationMode:!1,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,hasMessagePaneUnmounted:!1,setMessagePaneHasUnmounted:d.a,currentUserId:null,isAppSpaceOpen:!1,isShared:!1,isOrgShared:!1,isYou:!1,isMuted:!1,hasUnreads:!1,hasDraft:!1,badgeCount:0,screenReaderOverride:void 0,windowLastBlurEvent:null,windowLastFocusEvent:null,makeMessageSummary:void 0,isScreenReaderEnabled:!1,setFocusRequestedTs:d.a,showThreadIfThreadable:d.a,featureReactThreads:!1,currentThreadKey:void 0,isThreadable:d.a,unavailableTeamId:"",canPostInChannel:!0,featureAnnounceOnly:!1,featureSonicInputs:!1,featureTriggerUserDmClick:!1,searchInProductEducationReset:d.a,bootInFlight:!1,bootType:null,isFileExpanding:!1,featureOfflineMode:!1,isOffline:!1,userAttentionIsOnChat:!1}),cj=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.list=null,n.onFocusEnter=n.onFocusEnter.bind(n),n.onFocusLeave=n.onFocusLeave.bind(n),n.onVisibleRowsChanged=n.onVisibleRowsChanged.bind(n),n.onUnreadBannerHide=n.onUnreadBannerHide.bind(n),n.setListRef=n.setListRef.bind(n),n.shouldIgnoreScrollKeys=n.shouldIgnoreScrollKeys.bind(n),n.shouldIgnoreArrowKeys=n.shouldIgnoreArrowKeys.bind(n),n.requestHistory=n.requestHistory.bind(n),n.jumpToMostRecent=n.jumpToMostRecent.bind(n),n.jumpToUnread=n.jumpToUnread.bind(n),n.bumpMessagePaneUp=n.bumpMessagePaneUp.bind(n),n.focus=n.focus.bind(n),n.state={showingArchiveBanner:!1,showingUnreadBanner:!1,showingContextBar:!1,unreadPlacement:fO.VISIBLE},n.historyRequests={},n.prqMetrics={usableVisible:{}},n.sendSessionFrameStats=n.sendSessionFrameStats.bind(n),n.recordSessionFrameStats=n.recordSessionFrameStats.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.onMount();var t=!!this.props.timestamps.length,n=!(!this.props.unreadCount&&!this.props.unreadCountKnown);t&&n&&("channel"===this.props.type||"private"===this.props.type)&&this.props.fetchSliHighlights({channelId:this.props.channelId,timestamps:Object(El.a)(this.props.timestamps,function(t){return t>e.props.lastReadTs}),lastReadTs:this.props.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs}),this.props.isAppIm&&this.logAppHomeRequest(this.props.channelId,"messages"),this.recordAndTrackTimeToVisible(),document.hasFocus()?this.recordSessionFrameStats():window.addEventListener("focus",this.recordSessionFrameStats)}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.channelId;if(this.setState(function(n){var a=t.getUnreadLinePlacement();if(!e.isLoading&&!Object(sa.a)(e.timestamps)){var r=!1===e.reachedEnd&&!e.prevReachedEnd;if(r!==n.showingArchiveBanner)return Z()({},n,{unreadPlacement:a,showingArchiveBanner:r})}return n.unreadPlacement!==a?Z()({},n,{unreadPlacement:a}):n}),this.setState(function(e){var n=t.getUnreadBannerDisplayCount()>0;return Z()({},e,{showingUnreadBanner:n})}),this.setState(function(e){var n=t.getUnreadBannerDisplayCount()>0;return Z()({},e,{showingUnreadBanner:n})}),n&&e.channelId!==n){var a=this.list&&this.list.getScrollmark();this.props.saveScrollmark({channelId:n,scrollmark:a}),this.historyRequests={},this.recordAndTrackTimeToUsable(ve.u.ABANDONED),this.state.caughtError&&this.setState(function(){return{caughtError:!1}}),e.isAppIm&&this.logAppHomeRequest(e.channelId,"messages")}e.channelId===n&&e.isAppIm!==this.props.isAppIm&&e.isAppIm&&this.logAppHomeRequest(e.channelId,"messages");var r=this.props.timestamps.length!==e.timestamps.length,i=this.props.unreadCount!==e.unreadCount||this.props.unreadCountKnown!==e.unreadCountKnown;!e.channelId||!r&&!i||"channel"!==e.type&&"private"!==e.type||this.props.fetchSliHighlights({channelId:e.channelId,timestamps:Object(El.a)(e.timestamps,function(t){return t>e.lastReadTs}),lastReadTs:e.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs})}},{key:"componentDidUpdate",value:function(){if(this.list){var e=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(e)}(!0===this.props.reachedStart&&!0===this.props.reachedEnd||this.props.timestamps.length>0)&&this.recordAndTrackTimeToUsable(ve.u.COMPLETED)}},{key:"componentWillUnmount",value:function(){if(Object(Me.a)()){var e=this.list&&this.list.getScrollmark(),t=this.props.channelId;this.props.saveScrollmark({channelId:t,scrollmark:e})}this.sendSessionFrameStats(),window.removeEventListener("focus",this.recordSessionFrameStats),this.props.setMessagePaneHasUnmounted(!0)}},{key:"onFocusEnter",value:function(e){this.hasFocus=!0,this.hasKeyboardFocus=e.isKeyboardFocus}},{key:"onFocusLeave",value:function(){this.hasFocus=!1,this.hasKeyboardFocus=!1}},{key:"onVisibleRowsChanged",value:function(){if(this.list){var e=this.getUnreadLinePlacement();this.setState(function(){return{unreadPlacement:e}});var t=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(t),this.list.isAtBottom()&&this.props.searchInProductEducationReset()}}},{key:"onUnreadBannerHide",value:function(){this.setState(function(){return{showingUnreadBanner:!1}})}},{key:"getUnreadLinePlacement",value:function(){return 1===this.props.unreadCount&&!this.props.unreadCountKnown||!this.list?fO.VISIBLE:this.list.getUnreadLinePlacement()}},{key:"getUnreadBannerDisplayCount",value:function(){var e=this.props,t=e.timestamps,n=e.lastReadTs,a=e.unreadCount,r=e.reachedEnd;return t.length&&r?t.filter(function(e){return e>n}).length:a}},{key:"setListRef",value:function(e){this.list=e}},{key:"bumpMessagePaneUp",value:function(e){this.setState(function(t){return t.showingContextBar===e?null:Z()({},t,{showingContextBar:e})})}},{key:"focus",value:function(){this.list.focus()}},{key:"blur",value:function(){this.list.blur()}},{key:"recordAndTrackTimeToVisible",value:function(){if(!this.props.hasMessagePaneUnmounted||this.props.bootInFlight)if(0===this.props.windowLastBlurEvent){var e=this.props.telemeter.measure("navigationStart","prq_time_to_visible",null,{return_unprocessed:!0}).unprocessed;Object(Me.a)()&&this.props.telemeter.store("prq_time_to_visible_"+this.props.bootType,e),this.prqMetrics.usableVisible=xl()({},this.props.channelId,e),Object(n_.j)(e,"APP_ICON",!1,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop),this.props.setMessagePaneHasUnmounted(!0)}else this.prqMetrics.usableVisible={}}},{key:"recordAndTrackTimeToUsable",value:function(e){if(!(Object(Me.a)()&&this.props.bootInFlight||0===Object.keys(this.prqMetrics.usableVisible).length))if(0===this.props.windowLastBlurEvent){var t=this.props.telemeter.measure("navigationStart","prq_time_to_usable",null,{return_unprocessed:!0}).unprocessed;Object(Me.a)()&&this.props.telemeter.store("prq_time_to_usable_"+this.props.bootType,t),Object(n_.i)(t,"APP_ICON",!0,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,e,window.desktop),this.prqMetrics.usableVisible={}}else this.prqMetrics.usableVisible={}}},{key:"recordSessionFrameStats",value:function(){window.removeEventListener("focus",this.recordSessionFrameStats),window.addEventListener("blur",this.sendSessionFrameStats),window.addEventListener("beforeunload",this.sendSessionFrameStats),Object(n_.e)(this.props.teamId,this.props.enterpriseId,ve.k.PRQ_SESSION_FRAME_STATS)&&jy()}},{key:"sendSessionFrameStats",value:function(){if(window.addEventListener("focus",this.recordSessionFrameStats),window.removeEventListener("blur",this.sendSessionFrameStats),window.removeEventListener("beforeunload",this.sendSessionFrameStats),Ey()){Cy();var e=wy();0!==e.durationMs&&Object(n_.h)(e.durationMs,e.histFrameRenderTime,e.histJankyWindows,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop)}}},{key:"shouldIgnoreScrollKeys",value:function(e){var t=e.target===document.body,n=this.hasFocus,a=Object(fu.e)(),r=this.props,i=r.channelId;if(r.featureSonicInputs){var o=Object(vf.a)({viewContext:hu.y.MESSAGE_PANE,channelId:i});a=!!o&&o.hasFocus()}return!(t||n||a)}},{key:"shouldIgnoreArrowKeys",value:function(e){var t=e.target,n=document.querySelector(".client_channels_list_container"),a=document.getElementById("col_flex"),r=n&&n.contains(t),i=a&&a.contains(t);return!(this.props.featureSonicInputs?this.props.userAttentionIsOnChat:Object(fu.f)())||i||r||Object(OO.b)()||!this.hasKeyboardFocus}},{key:"isUnreadLineVisible",value:function(){var e=this.props,t=e.isGhostLastRead,n=e.unreadCount,a=e.reachedEnd;return!e.isLoading&&(!t&&this.list.getUnreadLinePlacement()===fO.VISIBLE||!(n||!a||!this.list.isAtBottom()))}},{key:"componentDidCatch",value:function(e){this.setState(function(){return{caughtError:!0}}),this.props.logger.error("MessagePane componentDidCatch:",e,"message_pane_componentDidCatch")}},{key:"requestHistory",value:function(e){var t=e.oldest,n=e.latest,a=this.props,r=a.channelId,i=a.type,o=a.reachedStart,s=a.reachedEnd,l=a.logger;if(o&&s)return!1;var c=t,u=n;if(u&&o){if(!c)return!1;u=null}if(c&&s){if(!u)return!1;c=null}if(this.shouldPreventHistoryRequest({oldest:t,latest:n}))return l.error({channelId:r,latestTs:u,oldestTs:c},"message_pane_request_rate_limited"),!1;var d=this.props.fetchHistory({channelId:r,type:i,oldest:c,latest:u,reason:"message-pane/requestHistory"});return d&&this.logHistoryRequest({oldest:c,latest:u}),d}},{key:"logHistoryRequest",value:function(e){var t=e.oldest,n=e.latest,a=e.now,r=void 0===a?Date.now():a,i=t+"_"+n,o=this.historyRequests[i];o||(o={count:0,time:0},this.historyRequests[i]=o),r-1e4>o.time?(o.count=1,o.time=r):o.count+=1}},{key:"logAppHomeRequest",value:function(e,t){this.props.featureTriggerUserDmClick&&this.props.callAppHomeOpenEventByChannelId({channelId:e,appHomeSection:t})}},{key:"shouldPreventHistoryRequest",value:function(e){var t=e.oldest,n=e.latest,a=e.now,r=void 0===a?Date.now():a,i=this.historyRequests[t+"_"+n];return!!i&&(!(i.count<=3)&&!(i.time<r-1e4))}},{key:"jumpToMostRecent",value:function(){this.props.jumpToTimestamp({ts:null})}},{key:"jumpToUnread",value:function(e){this.list.jumpToUnread(e)}},{key:"renderArchivesBanner",value:function(){if(!this.state.showingArchiveBanner)return null;var e=this.props.timestamps;return Object(sa.a)(e)?null:h.a.createElement(qO,{firstTimestamp:Object(_f.a)(e),lastTimestamp:Object(Tu.a)(e),jumpToRecent:this.jumpToMostRecent})}},{key:"renderContextBar",value:function(){return this.state.showingArchivesBanner?null:h.a.createElement(xO,{bumpMessagePaneUp:this.bumpMessagePaneUp})}},{key:"renderUnreadBanner",value:function(){var e=this.props,t=e.unreadCount,n=e.unreadCountKnown,a=e.lastReadTs,r=e.channelId,i=e.isGhostLastRead,o=e.markMostRecentMsgRead,s=e.newxpOnboardingStep,l=e.overlayVisible,c=e.isArchived;return l?null:s&&s!==Yk.CANCELLED&&s!==Yk.COMPLETE?null:c?null:h.a.createElement(VO,{channelId:r,hasUnreads:t>0,displayCount:this.getUnreadBannerDisplayCount(),known:n,since:a,ghost:i,unreadPlacement:this.state.unreadPlacement,jumpToUnread:this.jumpToUnread,markMostRecentMsgRead:o,onHide:this.onUnreadBannerHide})}},{key:"renderDegradedBanner",value:function(){var e=this.props,t=e.newxpOnboardingStep;return e.overlayVisible?null:t?null:h.a.createElement(Io.a,null,h.a.createElement(Jo,null))}},{key:"renderSearchScrollbackTip",value:function(){return h.a.createElement($O,null)}},{key:"renderMessagePaneBannerContainer",value:function(){var e=this.props,t=e.newxpOnboardingStep;return e.overlayVisible?null:t?null:h.a.createElement(su,null)}},{key:"render",value:function(){if(this.props.isAppSpaceOpen)return null;if(this.state.caughtError)return null;if(this.props.newxpOnboardingStep===Yk.START)return h.a.createElement(Jk,{step:this.props.newxpOnboardingStep});if(this.props.unavailableTeamId)return h.a.createElement(AO,{channelId:this.props.channelId,unavailableTeamId:this.props.unavailableTeamId});if(!this.props.channelId)return null;var e=at.a.msie||at.a.msedge,t=!this.props.overlayVisible&&!e,n=f()("p-message_pane",{"p-message_pane--ie":e,"p-message_pane--global-nav":this.props.useGlobalNav,"p-message_pane--classic-nav":Object(Me.a)()&&this.props.featureClassicNav,"p-message_pane--context-bar":Object(Me.a)()&&this.state.showingContextBar}),a=this.props,r=a.type,i=a.channelDisplayName,o=a.isShared,s=a.isOrgShared,l=a.isYou,c=a.isMuted,u=a.hasUnreads,d=a.hasDraft,p=a.isArchived,m=a.unreadCount,b=a.badgeCount,_=a.canPostInChannel,g=a.featureAnnounceOnly,v=a.isFileExpanding,y=a.userAttentionIsOnChat,k=Object(O_.a)({type:r,displayName:i,isShared:o,isOrgShared:s,isYou:l,isMuted:c,hasUnreads:u,hasDraft:d,isArchived:p,unreadCount:m,badgeCount:b,canPost:_,featureAnnounceOnly:g,isSelected:!1,userActive:!1,isTyping:!1}),O=Object(Ho.e)(this.props.currentThreadKey),j=h.a.createElement("div",{className:n,"data-qa":"message_pane"},h.a.createElement("div",{className:"p-message_pane__top_banners"},h.a.createElement(So,null),this.renderDegradedBanner(),h.a.createElement(aj,null),this.renderUnreadBanner(),this.renderSearchScrollbackTip()),this.renderMessagePaneBannerContainer(),h.a.createElement("div",{className:"p-message_pane__list_container"},h.a.createElement(sj,{ref:this.setListRef,channelId:this.props.channelId,ariaLabel:k,timestamps:this.props.timestamps,startTs:this.props.startTs,startTsOffset:this.props.startTsOffset,shouldIgnoreScrollKeys:this.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:this.shouldIgnoreArrowKeys,highlightTs:this.props.highlightTs,highlightLazy:this.props.highlightLazy,focusRequestedTs:this.props.focusRequestedTs,requestHistory:this.requestHistory,lastReadTs:this.props.lastReadTs,isGhostLastRead:this.props.isGhostLastRead,rollups:this.props.rollups,isLoading:this.props.isLoading,isLoadingOlder:this.props.isLoadingOlder,setUnreadPoint:this.props.setUnreadPoint,reachedStart:this.props.reachedStart,reachedEnd:this.props.reachedEnd,prevReachedEnd:this.props.prevReachedEnd,oldest:this.props.oldest,latest:this.props.latest,onVisibleRowsChanged:this.onVisibleRowsChanged,doneHighlighting:this.props.clearHighlightTs,channelType:this.props.type,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:t,theme:this.props.theme,channelSessionId:this.props.channelSessionId,firstUnreadTs:this.props.firstUnreadTs,messageContainerType:hu.y.MESSAGE_PANE,featureReactMessages:this.props.featureReactMessages,featureTinyspeck:this.props.featureTinyspeck,featureAriaApplicationMode:this.props.featureAriaApplicationMode,teamId:this.props.teamId,enterpriseId:this.props.enterpriseId,sessionId:this.props.sessionId,msgTriggers:this.props.msgTriggers,windowLastFocusEvent:this.props.windowLastFocusEvent,currentUserId:this.props.currentUserId,screenReaderOverride:this.props.screenReaderOverride,jumpToTimestamp:this.props.jumpToTimestamp,makeMessageSummary:this.props.makeMessageSummary,isScreenReaderEnabled:this.props.isScreenReaderEnabled,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,isBannerVisible:this.state.showingUnreadBanner,setFocusRequestedTs:this.props.setFocusRequestedTs,showThreadIfThreadable:this.props.showThreadIfThreadable,featureReactThreads:this.props.featureReactThreads,currentThreadKey:this.props.currentThreadKey,isThreadable:this.props.isThreadable,threadListId:O,isFileExpanding:v,featureOfflineMode:this.props.featureOfflineMode,isOffline:this.props.isOffline,userAttentionIsOnChat:y})),this.renderArchivesBanner(),this.renderContextBar(),Object(Me.a)()?h.a.createElement(oj,{channelId:this.props.channelId}):null);return Object(Me.a)()?j:h.a.createElement(vd.a,{component:this,order:0},j)}}]),t}(p.PureComponent);cj.displayName="BaseMessagePane",cj.defaultProps=lj;var uj=Object(kO.a)(cj,{updateStore:function(e){var t=e.instance,n=e.dispatch,a=t.list&&t.list.getScrollmark();n(hy({channelId:t.props.channelId,scrollmark:a}))}}),dj=Object(Fb.createSelectorCreator)(Fb.defaultMemoize,bb.a),pj=dj([go.f,vo.b,function(e,t,n){return n}],function(e,t,n){var a=e.timestamps,r=e.start,i=e.end,o=e.reachedStart,s=e.reachedEnd,l=e.prevReachedEnd;if(!s&&!l&&a&&a.length-Object(ty.a)(a,n)<20)return{messages:[],rollups:{},reachedStart:!1,reachedEnd:!1};var c=Object(ey.a)(Object(bo.a)(a,function(e){return t[e]}),id.fb),u=Object(Sd.a)(c),d=u.rollups,p=u.messages;return{messages:p,timestamps:Object(bo.a)(p,function(e){return e.ts}),rollups:d,reachedStart:o,reachedEnd:s,prevReachedEnd:l,oldest:r,latest:i}});var hj={fetchHistory:py,fetchSliHighlights:by.c,setUnreadPoint:Qn.setUnreadPoint,markMostRecentMsgRead:Qn.markMostRecentMsgRead,setUnreadLineVisibility:function(e){return function(t,n){var a=Object(S.q)(n());a!==e&&(Object(ut.a)({getState:n}).info("CHECK-UNREADS","unreadLineVisible updated: "+a+" -> "+e),t(Object(Ea.n)(e)))}},clearHighlightTs:Ea.a,jumpToTimestamp:Ea.c,saveScrollmark:hy,onMount:my.b,setMessagePaneHasUnmounted:Ea.k,makeMessageSummary:Bu,setFocusRequestedTs:Ea.h,callAppHomeOpenEventByChannelId:fy,isThreadable:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){return id.sb.apply(void 0,[n()].concat(t))}},showThreadIfThreadable:Au.m,searchInProductEducationReset:Wh.d},mj=Object(_.b)(function(e){var t=Object(k.a)(e),n=Object(re.d)(e,t),a=Object(Cs.c)(e,"context_bar"),r=Object(y.i)(e,"feature_react_messages"),i=Object(y.i)(e,"feature_tinyspeck"),o=Object(hb.b)(e),s=Object(y.i)(e,"feature_classic_nav"),l=Object(y.i)(e,"feature_aria_application_mode"),c=Object(y.i)(e,"feature_context_bar"),u=Object(y.b)(e),d=Object(v.b)(e),p=Object(v.a)(e),h=Object(S.b)(e),m=Object(ob.b)(e),b=Object(S.e)(e),f=Object(sb.d)(e),_=Object(sb.e)(e),g=Object(Ho.b)(e),O=Object(dn.c)({state:e}),j=Object(ut.a)({state:e}),C=Object(_y.g)(e),E=Object(sb.b)(e);if(!n)return{featureReactMessages:r,featureTinyspeck:i,featureClassicNav:s,currentUserId:u,teamId:d,enterpriseId:p,sessionId:h,msgTriggers:m,hasMessagePaneUnmounted:b,windowLastBlurEvent:f,windowLastFocusEvent:_,telemeter:O,logger:j,bootInFlight:C,bootType:E};var w=Object(sy.d)(e,t),I=Object(sy.e)(e,t),T=Object(he.D)(n),N=!1,R=Object(S.d)(e);R&&R!==T&&(T=R,N=!0);var A=Object(S.h)(e),P=Object(S.i)(e),M=Object(S.g)(e),D=Object(S.f)(e),x=Object(he.S)(n),L=Object(go.h)(e,t,T),F=L&&L.reachedEnd,B=Object(S.b)(e),q=Object(S.l)(e),U=Object(Ru.a)(e),H=pj(e,t,A),G=H.timestamps,W=H.rollups,K=H.reachedStart,V=H.reachedEnd,z=H.prevReachedEnd,Y=H.oldest,Q=H.latest;(Object(he.yb)(n)&&!Object(he.kb)(n)||Object(he.V)(n))&&(T=Object(Tu.a)(G));var J=function(e){var t=e.state,n=e.channelId,a=e.timestamps,r=e.rollups,i=e.lastReadTs;return Object(Iu.a)(a,function(e){var a=Object(vo.a)(t,n,e),o=Object(y.b)(t);if(!a)return!1;if(r[e]){var s=Object($v.a)(r[e]),l=Object(bo.a)(s,"ts"),c=Object(bo.a)(l,function(e){return Object(vo.a)(t,n,e)});return Object(wu.a)(c,function(e){return Object(id.ib)(e,i,o)})}return Object(id.ib)(a,i,o)})}({state:e,channelId:t,timestamps:G,rollups:W,lastReadTs:T}),X=Object(Lu.b)(e),Z=Object(y.i)(e,"feature_react_threads"),$=Object(S.n)(e)&&Th(e,t),te=void 0;Object(he.Ib)(e,n)&&(te=Object(he.R)(e,n));var ne=Object(gy.e)(e),ae=Object(De.e)(e);return{isFileExpanding:ne,channelId:t,type:Object(he.v)(n),channelDisplayName:Object(he.x)(e,n,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),timestamps:G,reachedStart:K,reachedEnd:V,prevReachedEnd:z,oldest:Y,latest:Q,lastReadTs:T,isGhostLastRead:N,unreadCount:x,unreadCountKnown:F,startTs:A,startTsOffset:P,highlightTs:M,highlightLazy:D,focusRequestedTs:Object(y.i)(e,"feature_react_threads")?Object(S.c)(e):null,rollups:W,isAppSpaceOpen:$,isArchived:Object(he.V)(n),isLoading:w,isLoadingOlder:I,isLimited:Object(go.e)(e,t),isSlackbotIm:Object(he.Eb)(n),isAppIm:Object(he.hb)(e,t),overlayVisible:Object(S.p)(e),channelSessionId:B,prevChannelSwitchTs:q,theme:U,newxpOnboardingStep:Object(S.j)(e),firstUnreadTs:J,featureReactMessages:r,featureTinyspeck:i,useGlobalNav:o,featureClassicNav:s,featureAriaApplicationMode:l,teamId:d,enterpriseId:p,sessionId:h,msgTriggers:m,hasMessagePaneUnmounted:b,windowLastBlurEvent:f,windowLastFocusEvent:_,currentUserId:u,badgeCount:Object(re.c)(e,n),isShared:Object(he.Y)(n),isOrgShared:Object(he.rb)(n),isYou:Object(he.Qb)(e,n),isMuted:Object(wn.c)(e,t),hasUnreads:!!Object(he.S)(n),hasDraft:Object(he.y)(e,t),isScreenReaderEnabled:X,featureReactThreads:Z,currentThreadKey:Z?g:void 0,unavailableTeamId:te,canPostInChannel:Object(It.q)(e,t),featureAnnounceOnly:Object(y.i)(e,"feature_announce_only"),featureTriggerUserDmClick:Object(y.i)(e,"feature_trigger_user_dm_click"),featureContextBar:c,featureSonicInputs:Object(y.i)(e,"feature_sonic_inputs"),telemeter:O,logger:j,bootInFlight:C,bootType:E,featureOfflineMode:Object(y.i)(e,"feature_offline_mode"),isOffline:!Object(ee.c)(e),userAttentionIsOnChat:ae,contextBarExperimentGroup:a}},hj)(uj),bj=n("c+rX"),fj=n("kP+9"),_j=n("7wM6"),gj=Object(ka.b)("TS.ui.invite.showInviteMemberToChannelDialog"),vj=Object(ka.b)("TS.ui.mpim_conversion_modal.startMpimConversionModal"),yj=n("GPfB"),kj=n("KDee"),Oj=(Object(ka.b)("TS.notifs.canModelObHaveChannelMentions",function(){return!1}),Object(ka.b)("TS.notifs.muteOrUnmuteCorG")),jj=n("1czH"),Cj=new x.b("global_nav"),Ej=(m.b.string.isRequired,m.b.object,m.b.func,m.b.func,m.b.bool,{channel:void 0,close:d.a,back:d.a,featureGlobalNav:!1}),wj=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onDateChange=n.onDateChange.bind(n),n}return u()(t,e),o()(t,[{key:"onDateChange",value:function(e){var t=this.props,n=t.channelId,a=t.close,r=Ca()(e,"YYYY-MM-DD").format("X");Object(fu.q)(n,r),a()}},{key:"render",value:function(){var e=this.props,t=e.channel,n=e.back;if(!e.featureGlobalNav)return null;var a=t.created?Ca()(t.created,"X").format("YYYY-MM-DD"):void 0;return h.a.createElement(ie.f,Z()({},this.props,{width:325}),h.a.createElement(wa.a,{key:"date-picker",className:"p-global_nav__channel_date_picker",disableDatesBefore:a,disableDatesAfter:Ca()().format("YYYY-MM-DD"),onDateChange:this.onDateChange}),h.a.createElement(Re.c,{key:"date-picker-back",className:"p-global_nav__channel_date_picker_back","data-qa":"date_picker_back",onClick:n},Cj.t("Back to menu")))}}]),t}(p.Component);wj.displayName="JumpToDate",wj.defaultProps=Ej;var Sj=Object(_.b)(function(e,t){var n=t.channelId;return{channel:Object(re.d)(e,n),featureGlobalNav:Object(y.i)(e,"feature_global_nav")}})(wj),Ij=n("0xwB");function Tj(e,t){var n=Object(re.d)(e,t);if(!e||!n)return null;var a=Object(Ue.c)(e,Object(he.G)(n)),r=Object(Ue.b)(e),i=Object(he.v)(n),o="im"===i,s="mpim"===i,l="channel"===i,c=l||"private"===i,u=Object(he.Qb)(r.id,n),d=Object(Aa.d)(e,n),p=!o&&!Object(ne.Db)(r),h=u,m=o&&!u,b=o&&!u&&!Object(he.Eb)(n)&&!Object(ne.Db)(r)&&!Object(ne.Db)(a)&&!Object(ne.eb)(a)&&!Object(ne.lb)(a),f=c&&!Object(ne.Db)(r)&&!Object(ne.xb)(r)&&Object(he.kb)(n)&&(!Object(he.Bb)(n)||Object(Ij.c)(n))&&(!Object(y.l)(e)||!(Object(he.rb)(n)&&!Object(Ij.b)())),_=Object(It.O)(e,t),g=s&&Object(It.B)(e)&&!Object(he.Y)(n),v=!o&&(s||Object(he.kb)(n)&&!Object(he.V)(n));return{call:d,jump:!0,invite:p,editProfile:h,viewProfile:m,addMember:b,details:!0,options:f,retention:_,convertToPrivate:g,notifications:v,mute:v,apps:!0,email:Object(rt.a)(e,"allow_email_ingestion"),leave:c&&Object(he.kb)(n)&&!Object(he.V)(n)&&!Object(he.Bb)(n)&&!Object(ne.Db)(r)&&!Object(ne.xb)(r),join:c&&!Object(he.kb)(n)&&!Object(he.V)(n)&&!Object(ne.Db)(r)&&!Object(ne.xb)(r),exportHistory:!l&&Object(It.G)(e,t),unarchive:Object(he.V)(n)&&(!Object(y.i)(e,"feature_esc_disconnect_v2_client")||!Object(he.bb)(n))&&!Object(he.C)(n),delete:Object(he.V)(n)&&Object(ne.X)(r)&&l&&!Object(he.Bb)(n)}}var Nj=new x.b("global_nav"),Rj=Object(ot.b)("Un-archive a channel",function(e,t,n){var a=n.channelId;Object(y.i)(t(),"feature_global_nav")&&e(Object(ra.O)({channelId:a})).catch(function(n){Object(ut.a)({getState:t}).error("CHANNEL-ACTIONS","Unarchive failed with error",n);var a="restricted_action"===Object(aa.a)(n,"data.error")?Nj.t("You don\u2019t have permission to un-archive channels. Please talk to your Workspace Owner."):Nj.t("Sorry, something went wrong. Try again in a moment.");e(Object(st.e)({element:h.a.createElement(lt.a,{title:Nj.t("Un-archive failed")},a)}))})});Rj.propTypes={channelId:m.b.string.isRequired};var Aj=Rj,Pj=new x.b("global_nav"),Mj=(m.b.string.isRequired,m.b.object.isRequired,m.b.func,m.b.object,m.b.bool,m.b.bool,m.b.object,m.b.string,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.bool,{onMenuItemSelected:d.a,actions:void 0,displayName:void 0,isMuted:!1,joinChannel:d.a,unarchiveChannel:d.a,gantryStartCall:d.a,openChannelNotificationPrefsModal:d.a,team:void 0,canManagePostingPermissions:!1,showManagePostingPermissionsNewBadge:!1,featureGlobalNav:!1,featureAnnounceOnly:!1}),Dj=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMenuItemSelected=n.onMenuItemSelected.bind(n),n.getMuteLabel=n.getMuteLabel.bind(n),n.getItems=n.getItems.bind(n),n.preventClose=!1,n.state={mode:"menu"},n}return u()(t,e),o()(t,[{key:"onMenuItemSelected",value:function(e,t){this.preventClose?this.preventClose=!1:this.props.onMenuItemSelected(e,t)}},{key:"getMuteLabel",value:function(){var e=this.props,t=e.isMuted,n=e.channel,a=e.displayName,r=e.featureGlobalNav,i="mpim"===Object(he.v)(n);return r?t&&i?Pj.t("Unmute this conversation"):t&&!i?Pj.t("Unmute {channelName}",{channelName:a}):!t&&i?Pj.t("Mute this conversation"):t||i?null:Pj.t("Mute {channelName}",{channelName:a}):null}},{key:"getItems",value:function(){var e=this,t=this.props,n=t.channelId,a=t.channel,r=t.actions,i=t.displayName,o=t.joinChannel,s=t.team,l=t.canManagePostingPermissions,c=t.showManagePostingPermissionsNewBadge,u=t.featureGlobalNav,d=t.featureAnnounceOnly,p=Object(he.v)(a),h=Object(he.G)(a);if(!r||!p||!u)return[];var m="mpim"===p,b="channel"===p||"private"===p;return[{label:Pj.t("Jump to date\u2026"),show:r.jump,key:"jump",click:function(){e.preventClose=!0,e.setState(function(){return{mode:"jump-to-date"}})}},{label:m?Pj.t("Invite another member\u2026"):Pj.rt("Add people to {channelName}\u2026",{channelName:i}),show:r.invite,key:"invite",click:function(){return m?Object(yj.a)(a):Object(Gy.a)(n)}},{label:Pj.t("Edit your profile"),show:r.editProfile,key:"editProfile",click:function(){return Object(ga.a)()}},{label:Pj.t("View {userPossesive} profile",{userPossesive:Object(x.c)(i)}),show:r.viewProfile,key:"viewProfile",click:function(){return Object(fu.i)(h)}},{label:Pj.t("Add {userName} to a channel\u2026",{userName:i}),show:r.addMember,key:"addMember",click:function(){return gj(h)}},{label:b?Pj.t("View channel details"):Pj.t("View conversation details"),show:r.details,key:"details",click:function(){return Object(kj.c)("details")}},{label:Pj.t("Convert to a private channel\u2026"),show:r.convertToPrivate,key:"convertToPrivate",click:function(){return vj(a)}},{label:Pj.t("Edit message retention\u2026"),show:r.retention,key:"retention",click:function(){return Object(_j.a)(n,"retention")}},{label:Pj.t("Manage posting permissions"),show:d&&l&&r.options,key:"managePostingPermissions",badgeLabel:c?Pj.t("NEW"):void 0,click:function(){return Object(_j.a)(n,"posting_privilege")}},{label:Pj.t("Additional options\u2026"),show:r.options,key:"options",click:function(){return Object(_j.a)(n)}},{type:"separator",key:"separator-1"},{label:Pj.t("Notification preferences\u2026"),show:r.notifications,key:"notifications",click:function(){return e.props.openChannelNotificationPrefsModal({channelId:n})}},{label:this.getMuteLabel(),show:r.mute,key:"mute",click:function(){return Oj(n)}},{type:"separator",key:"separator-2"},{label:Pj.t("Add an app"),show:r.apps,key:"apps",click:function(){return Oa()}},{label:m?Pj.t("Send email to this conversation\u2026"):Pj.t("Send email to {channelName}\u2026",{channelName:i}),show:r.email,key:"email",href:Object(te.o)(s,"/services/new/email"),target:"_blank"},{type:"separator",key:"separator-3"},{label:Pj.t("Leave {channelName}",{channelName:i}),show:r.leave,key:"leave",click:function(){return Object(jj.r)(n)}},{label:Pj.t("Join {channelName}",{channelName:i}),show:r.join,key:"join",click:function(){return o({channelId:n})}},{type:"separator",key:"separator-4"},{label:Pj.t("Export message history\u2026"),show:r.exportHistory,key:"exportHistory",click:function(){return Object(_j.a)(n,"export")}},{type:"separator",key:"separator-5"},{label:Pj.t("Un-archive {channelName}",{channelName:i}),show:r.unarchive,key:"unarchive",click:function(){return e.props.unarchiveChannel({channelId:n})}},{label:Pj.t("Delete {channelName}",{channelName:i}),show:r.delete,key:"unarchive",click:function(){return Object(_j.a)(n,"delete")}}].filter(function(e){return e&&(e.show||"separator"===e.type)})}},{key:"render",value:function(){var e=this;switch(this.state.mode){case"menu":return h.a.createElement(ie.a,Z()({},this.props,{template:this.getItems(),onMenuItemSelected:this.onMenuItemSelected,stripTerminalSeparators:!0}));case"jump-to-date":return h.a.createElement(Sj,Z()({},this.props,{channelId:this.props.channelId,close:this.props.onMenuItemSelected,back:function(){e.preventClose=!0,e.setState(function(){return{mode:"menu"}})}}));default:return null}}}]),t}(p.Component);Dj.displayName="Menu",Dj.defaultProps=Mj;var xj={joinChannel:Qn.joinConversationApi,unarchiveChannel:Aj,gantryStartCall:Jn.d,openChannelNotificationPrefsModal:ge.a},Lj=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n),r=Object($.d)(e),i=Object(It.J)(e,n),o=Object(Ue.b)(e),s=(Object(ne.X)(o)||Object(ne.vb)(o))&&!Object(he.sb)(a);return{channel:a,actions:Tj(e,n),displayName:Object(he.x)(e,a,{imIncludeAtSign:!1}),isMuted:Object(wn.c)(e,n),team:r,canManagePostingPermissions:i,showManagePostingPermissionsNewBadge:s,featureGlobalNav:Object(y.i)(e,"feature_global_nav"),featureAnnounceOnly:Object(y.i)(e,"feature_announce_only")}},xj)(Dj),Fj=new x.b("channel_header"),Bj=(m.b.string,m.b.string,m.b.string.isRequired,m.b.string,m.b.oneOfType([m.b.array,m.b.bool]),m.b.oneOfType([m.b.object,m.b.bool]),m.b.string.isRequired,m.b.bool,m.b.bool.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.arrayOf(m.b.string),m.b.string,m.b.bool,m.b.object.isRequired,{channelId:void 0,name:void 0,userId:void 0,members:void 0,presences:void 0,sharedTeamIds:void 0,className:void 0,isMuted:!1,featureGlobalNav:!1}),qj=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderChannel=n.renderChannel.bind(n),n.renderPrivate=n.renderPrivate.bind(n),n.renderIM=n.renderIM.bind(n),n.renderMPIM=n.renderMPIM.bind(n),n.renderMenu=n.renderMenu.bind(n),n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_NAME"}}})}},{key:"renderChannel",value:function(e){return h.a.createElement(e,null,this.props.name)}},{key:"renderPrivate",value:function(e){return h.a.createElement(p.Fragment,null,h.a.createElement(se.b,{type:"lock",className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--private"}),h.a.createElement(e,null,this.props.name))}},{key:"renderIM",value:function(e){var t=this.props.userId;return h.a.createElement(p.Fragment,null,h.a.createElement(e,null,h.a.createElement(Nn.a,{id:t,key:"name"})),h.a.createElement(Te.a,{memberId:t,className:"p-global_nav__channel_name_presence",key:"presence"}),h.a.createElement(Ne.b,{memberId:t,tooltip:!1,key:"custom-status"}))}},{key:"renderMPIM",value:function(e){var t=this,n=this.props,a=n.members,r=n.presences,i=Object(v_.a)(Object(El.a)(a,function(e){return e!==t.props.currentUser}),function(e,t){var n=r[e]===He.b?"p-global_nav__channel_name_member--away":void 0;return h.a.createElement(p.Fragment,{key:e},t>0?", ":null,h.a.createElement(Nn.a,{id:e,className:n}),h.a.createElement(Ne.b,{memberId:e,tooltip:!1,noText:!0}))});return h.a.createElement(e,null,i)}},{key:"renderShared",value:function(){var e=this.props,t=e.isOrgShared,n=e.isExternallyShared,a=e.isPendingExternallyShared,r=e.sharedTeamIds;return t?h.a.createElement(le.c,{tip:Fj.t("Shared channel"),position:"bottom"},h.a.createElement(se.b,{type:"shared-channel",inline:!0,className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--shared"})):n?h.a.createElement(k_.a,{sharedTeamIds:r,pending:a,inline:!0,tooltip:!0,tooltipPosition:"bottom",className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--shared"}):null}},{key:"renderMenu",value:function(e){return h.a.createElement(Lj,Z()({},e,{channelId:this.props.channelId}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.type,a=t.className,r=t.isMuted;if(!t.featureGlobalNav)return null;var i=function(t){var n=t.children;return h.a.createElement(ie.e,{renderMenu:e.renderMenu,position:"bottom-left",offsetX:-4,offsetY:4,onClick:e.onClick},h.a.createElement(Re.c,{className:"p-global_nav__channel_name_name"},n))},o=void 0;switch(n){case"channel":o=this.renderChannel(i);break;case"private":o=this.renderPrivate(i);break;case"im":o=this.renderIM(i);break;case"mpim":o=this.renderMPIM(i)}var s=f()("p-global_nav__channel_name","p-global_nav__channel_name--model","p-global_nav__channel_name--"+n,r&&"p-global_nav__channel_name--muted",a);return h.a.createElement("div",{className:s,"data-qa":"channel_name"},o,this.renderShared())}}]),t}(p.Component);qj.displayName="Name",qj.defaultProps=Bj;var Uj=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n),r=Object(he.H)(a),i=r&&Object(Ra.a)(Object(fb.a)(r),function(t){return Object(He.f)(e,t)});return{channelId:n,name:Object(he.x)(e,a,{imIncludeAtSign:!1}),type:Object(he.v)(a),userId:Object(he.G)(a)||a.user_id,currentUser:Object(y.b)(e),isMuted:Object(wn.c)(e,n),members:r,presences:i,isOrgShared:Object(he.sb)(a),isExternallyShared:Object(he.Y)(a),isPendingExternallyShared:Object(he.ub)(a),sharedTeamIds:Object(he.M)(e,a),featureGlobalNav:Object(y.i)(e,"feature_global_nav"),clogger:Object(ye.a)({state:e})}})(qj),Hj=Object(ka.b)("TS.ui.channel_topic_dialog.start"),Gj=new x.b("global_nav"),Wj=(m.b.string,m.b.bool.isRequired,m.b.bool,m.b.bool.isRequired,{topic:void 0,canEdit:!0}),Kj=function(e){e.target&&"A"===e.target.tagName||Hj()},Vj=function(e){var t=e.topic,n=e.isChannel,a=e.canEdit;if(!e.featureGlobalNav||!n)return null;var r=void 0;if(t){var i=h.a.createElement("div",{className:"p-global_nav__channel_topic_edit"},Gj.t("edit"));r=h.a.createElement(p.Fragment,null,h.a.createElement("div",{className:"p-global_nav__channel_topic_text"},h.a.createElement(Pn.a,{text:t,className:"p-global_nav__channel_topic_content",noJumbomoji:!0,noHighlights:!0})),a&&i)}else r=a?h.a.createElement("div",{className:"p-global_nav__channel_topic_placeholder"},Gj.t("Add a topic\u2026")):null;var o=f()("p-global_nav__channel_topic",{"p-global_nav__channel_topic--empty":!t});return h.a.createElement(Re.c,{className:o,onClick:Kj},r)};Vj.displayName="Topic",Vj.defaultProps=Wj;var zj=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return{topic:a&&a.topic&&a.topic.value,isChannel:!(!Object(he.yb)(a)&&!Object(he.xb)(a)),canEdit:Object(It.w)(e,n).ok,featureGlobalNav:Object(y.i)(e,"feature_global_nav")}})(Vj),Yj=new x.b("global_nav"),Qj=(m.b.string.isRequired,m.b.oneOf(["channel","private","im","mpim"]),m.b.bool,m.b.bool.isRequired,m.b.func.isRequired,m.b.bool.isRequired,m.b.object.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this.props,t=e.channelId,n=e.starred,a=e.clogger;this.props.updateStar(!n,{channel:t}),a.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_STAR"}}})}},{key:"getTip",value:function(){var e=this.props,t=e.type,n=e.starred;return e.featureGlobalNav?"im"===t||"mpim"===t?n?Yj.t("Unstar this conversation"):Yj.t("Star this conversation"):n?Yj.t("Unstar this channel"):Yj.t("Star this channel"):null}},{key:"render",value:function(){var e=this.props,t=e.starred;return e.show?h.a.createElement(le.c,{position:"bottom",tip:this.getTip()},h.a.createElement(Re.c,{className:f()("p-global_nav__channel_star",t&&"p-global_nav__channel_star--starred"),onClick:this.onClick,"aria-label":this.getTip()},h.a.createElement(se.b,{type:t?"star":"star-o",size:"inherit"}))):null}}]),t}(p.Component));Qj.displayName="Star",Qj.defaultProps={starred:!1,type:"channel"};var Jj={updateStar:Wa.a},Xj=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return{type:Object(he.v)(a),show:Object(he.k)(a),starred:Object(he.Fb)(a),featureGlobalNav:Object(y.i)(e,"feature_global_nav"),clogger:Object(ye.a)({state:e})}},Jj)(Qj),Zj=n("kLJo"),$j=n("sDWr"),eC=new x.b("global_nav"),tC=(m.b.number,m.b.bool,m.b.bool,m.b.object.isRequired,{count:void 0,isChannel:!0,featureGlobalNav:!1}),nC=function(e){var t=e.count,n=e.isChannel,a=e.clogger;if(!e.featureGlobalNav)return null;if(!t&&!n)return null;var r=function(e){var t=e.key,n=e.text;return h.a.createElement(p.Fragment,{key:t},h.a.createElement("span",{className:"bold"},n),"\xa0")},i=Object(Ja.a)(t)?eC.rt("{count, plural, =1 {<span>#</span>Pin} other {<span>#</span>Pins}}",{count:t},r):eC.rt("<span>\u2013</span>Pins",{count:t},r),o=Object(Ja.a)(t)?eC.t("{count, plural, =1 {# pins} other {# pins}}. View pinned items",{count:t},r):eC.t("View pinned items");return h.a.createElement(le.c,{position:"bottom",tip:eC.t("View pinned items"),offsetY:-4,delay:le.a},h.a.createElement(Re.c,{className:"p-global_nav__channel_info_item p-global_nav__channel_info_pins",onClick:function(){if(Object(Me.a)()){var e=Object(Zj.e)();Object(Zj.g)($j.d,e.params)}Object(kj.f)(),a.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_PINS"}}})},"aria-label":o},i))};nC.displayName="Pins",nC.defaultProps=tC;var aC=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return{count:a&&a.pinned_items_count,isChannel:Object(he.yb)(a)||Object(he.xb)(a),featureGlobalNav:Object(y.i)(e,"feature_global_nav"),clogger:Object(ye.a)({state:e})}})(nC),rC=new x.b("global_nav"),iC=(m.b.number,m.b.bool,m.b.object.isRequired,{count:void 0,featureGlobalNav:!1}),oC=function(e){var t=e.count,n=e.clogger;if(!e.featureGlobalNav)return null;var a=function(e){var t=e.key,n=e.text;return h.a.createElement(p.Fragment,{key:t},h.a.createElement("span",{className:"bold"},n),"\xa0")},r=Object(Ja.a)(t)?rC.rt("{count, plural, =1 {<span>#</span>Member} other {<span>#</span>Members}}",{count:t},a):rC.rt("<span>\u2013</span>Members",{count:t},a),i=Object(Ja.a)(t)?rC.t("{count, plural, =1 {# member} other {# members}}. View member list",{count:t},a):rC.t("View member list");return h.a.createElement(le.c,{position:"bottom",tip:rC.t("View member list"),offsetY:-4,delay:le.a},h.a.createElement(Re.c,{className:"p-global_nav__channel_info_item",onClick:function(){Object(kj.e)(),n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_MEMBERS"}}})},"aria-label":i},r))};oC.displayName="Members",oC.defaultProps=iC;var sC=Object(_.b)(function(e,t){var n=t.channelId,a=Object(Xa.f)(e,n);return{count:a&&a.counts&&a.counts.member_count,featureGlobalNav:Object(y.i)(e,"feature_global_nav"),clogger:Object(ye.a)({state:e})}})(oC),lC=new x.b("channel_header"),cC=(m.b.string.isRequired,m.b.bool,m.b.object.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.renderMenu=n.renderMenu.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_ACTIONS"}}})}},{key:"renderMenu",value:function(e){return h.a.createElement(Lj,Z()({},e,{channelId:this.props.channelId}))}},{key:"render",value:function(){return this.props.featureGlobalNav?h.a.createElement(ie.e,{renderMenu:this.renderMenu,position:"bottom-right",offsetY:-4,onClick:this.onClick},h.a.createElement(le.c,{position:"bottom-right",tip:lC.t("Channel settings"),offsetY:-4},h.a.createElement(Re.c,{className:"p-global_nav__channel_info_item","aria-label":lC.t("Channel settings")},h.a.createElement(se.b,{type:"cog-o"})))):null}}]),t}(p.Component));cC.displayName="Actions",cC.defaultProps={featureGlobalNav:!1};var uC=Object(_.b)(function(e){return{featureGlobalNav:Object(y.i)(e,"feature_global_nav"),clogger:Object(ye.a)({state:e})}})(cC),dC=n("OC5O"),pC=n("fWmQ"),hC=new x.b("global_nav"),mC=(m.b.bool,m.b.oneOf(["messages","about"]),m.b.bool,function(e){var t=e.isBot,n=e.activeTab;return e.featureGlobalNav&&t?h.a.createElement(p.Fragment,null,h.a.createElement("div",{className:"p-global_nav__channel_bot_tabs"},h.a.createElement(Re.c,{className:f()("p-global_nav__channel_bot_tab","messages"===n&&"p-global_nav__channel_bot_tab--active"),onClick:function(){return Object(pC.a)("messages")},"data-qa":"global_nav_channel_bot_tabs_messages"},hC.t("Messages")),h.a.createElement(Re.c,{className:f()("p-global_nav__channel_bot_tab","about"===n&&"p-global_nav__channel_bot_tab--active"),onClick:function(){return Object(pC.a)("about")},"data-qa":"global_nav_channel_bot_tabs_about"},hC.t("About"))),h.a.createElement("div",{className:"p-global_nav__channel_divider"})):null});mC.displayName="BotTabs",mC.defaultProps={isBot:!1,activeTab:"messages",featureGlobalNav:!1};var bC=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n),r=Object(he.G)(a);if(!r)return{};var i=Object(Ue.c)(e,r);return{isBot:Object(ne.ab)(i),activeTab:Object(dC.b)(e),featureGlobalNav:Object(y.i)(e,"feature_global_nav")}})(mC),fC=n("i1Fx"),_C=new x.b("global_nav"),gC=(m.b.bool,m.b.object,m.b.string,m.b.bool,m.b.func,{show:!1,channel:void 0,tooltipMessage:void 0,featureGlobalNav:!1,startCall:d.a}),vC=function(e){var t=e.show,n=e.channel,a=e.tooltipMessage,r=e.featureGlobalNav,i=e.startCall;return t&&n&&r?h.a.createElement(le.c,{position:"bottom",tip:a,offsetY:-4},h.a.createElement(Re.c,{className:"p-global_nav__channel_info_item p-global_nav__channel_call_button",onClick:function(){return Object(Me.a)()?i():Object(fC.c)(n)},"aria-label":_C.t("Start a call")},h.a.createElement(se.b,{className:"p-global_nav__channel_call_button_icon",type:"phone"}))):null};vC.displayName="CallButton",vC.defaultProps=gC;var yC={startCall:Jn.d},kC=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return a?{show:Object(Aa.d)(e,a),channel:a,tooltipMessage:Object(Aa.b)(e,a),featureGlobalNav:Object(y.i)(e,"feature_global_nav")}:null},yC)(vC),OC=new x.b("channel_header"),jC=(m.b.bool,m.b.bool,m.b.bool,m.b.object.isRequired,function(e){var t=e.isChannel,n=e.active,a=e.clogger;if(!e.featureGlobalNav)return null;var r=void 0;t&&n&&(r=OC.t("Hide channel details")),t&&!n&&(r=OC.t("View channel details")),!t&&n&&(r=OC.t("Hide conversation details")),t||n||(r=OC.t("View conversation details"));var i=f()("p-global_nav__channel_info_item",{"p-global_nav__channel_details_button--active":n});return h.a.createElement(le.c,{position:"bottom-right",tip:r,offsetY:-4,delay:le.a},h.a.createElement(Re.c,{className:i,onClick:function(){if(Object(Me.a)()){var e=Object(Zj.e)();Object(Zj.g)($j.d,e.params)}Object(kj.d)("details"),a.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_DETAILS"}}})}},OC.t("Details")))});jC.displayName="Details",jC.defaultProps={isChannel:!0,active:!1,featureGlobalNav:!1};var CC=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return a?{isChannel:Object(he.yb)(a)||Object(he.xb)(a),active:"details"===Object(O.h)(e),featureGlobalNav:Object(y.i)(e,"feature_global_nav"),clogger:Object(ye.a)({state:e})}:null})(jC),EC=(m.b.string.isRequired,m.b.oneOf(["channel","private","mpim","im"]),m.b.bool,{channelType:void 0,featureGlobalNavLayout:!1}),wC=function(e){var t=e.channelId,n=e.channelType,a=e.featureGlobalNavLayout;if(!t||!n)return null;var r=f()("p-global_nav__channel",{"p-global_nav__channel--relayout":a});return h.a.createElement("div",{className:r},h.a.createElement(Xj,{channelId:t}),h.a.createElement(Uj,{channelId:t}),h.a.createElement(zj,{channelId:t}),h.a.createElement("div",{className:"p-global_nav__channel_spacer--fill"}),h.a.createElement(bC,{channelId:t}),"im"!==n&&h.a.createElement(sC,{channelId:t}),h.a.createElement(aC,{channelId:t}),h.a.createElement(CC,{channelId:t}),h.a.createElement("div",{className:"p-global_nav__channel_divider"}),h.a.createElement(kC,{channelId:t}),h.a.createElement(uC,{channelId:t}))};wC.displayName="ModelHeader",wC.defaultProps=EC;var SC=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return a?{channelType:Object(he.v)(a),featureGlobalNavLayout:Object(y.i)(e,"feature_global_nav_layout")}:{}})(wC),IC=new x.b("global_nav"),TC=(m.b.bool,m.b.bool,function(e){var t=e.featureGlobalNav,n=e.featureGlobalNavLayout;if(!t)return null;var a=IC.t("Threads"),r=f()({"p-global_nav__channel":!0,"p-global_nav__channel--synthetic":!0,"p-global_nav__channel--relayout":n});return h.a.createElement("div",{className:r,"data-qa":"channel_name"},h.a.createElement("div",{className:"p-global_nav__channel_name p-global_nav__channel_name--synthetic"},a))});TC.displayName="AllThreadsHeader",TC.defaultProps={featureGlobalNav:!1,featureGlobalNavLayout:!1};var NC=Object(Dt.a)("feature_global_nav","feature_global_nav_layout")(TC),RC=n("04pn"),AC=new x.b("global_nav"),PC=(m.b.bool,m.b.string,m.b.number,m.b.func,m.b.bool,m.b.bool,{hasUnreads:!0,sortOrder:"alphabetical",newUnreads:0,setUserPrefByApi:d.a,featureGlobalNav:!1,featureGlobalNavLayout:!1}),MC=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSortButton=n.renderSortButton.bind(n),n.renderSortMenu=n.renderSortMenu.bind(n),n}return u()(t,e),o()(t,[{key:"changeSort",value:function(e){e!==this.props.sortOrder&&(this.props.setUserPrefByApi({pref:"all_unreads_sort_order",value:e}),Object(RC.b)())}},{key:"renderSortMenu",value:function(e){var t=this;if(!this.props.featureGlobalNav)return null;var n=[{label:AC.t("Alphabetically"),click:function(){return t.changeSort("alphabetical")}},{label:AC.t("Scientifically"),click:function(){return t.changeSort("priority")}},{label:AC.t("Newest channel"),click:function(){return t.changeSort("newest")}},{label:AC.t("Oldest channel"),click:function(){return t.changeSort("oldest")}}];return h.a.createElement(ie.a,Z()({},e,{template:n}))}},{key:"renderSortButton",value:function(){var e=this.props,t=e.hasUnreads,n=e.sortOrder;if(!e.featureGlobalNav)return null;if(!t)return null;var a={alphabetical:AC.rt("<strong>Sort:</strong> Alphabetically"),priority:AC.rt("<strong>Sort:</strong> Scientifically"),oldest:AC.rt("<strong>Sort:</strong> Oldest channel"),newest:AC.rt("<strong>Sort:</strong> Newest channel")}[n];return h.a.createElement(ie.e,{renderMenu:this.renderSortMenu,position:"bottom-right",offsetY:4},h.a.createElement(Re.c,{className:"p-global_nav__unread_sort"},a,h.a.createElement(se.b,{type:"chevron-down",inline:!0})))}},{key:"renderRefreshButton",value:function(){var e=this.props,t=e.newUnreads;if(!e.featureGlobalNav||!t)return null;var n=AC.t("{newUnreadsCount, plural, =1 {# new message} other {# new messages}}",{newUnreadsCount:t});return h.a.createElement(Re.d,{type:"outline",size:"small",className:"p-global_nav__unread_refresh",onClick:RC.c},h.a.createElement(se.b,{type:"sync",className:"p-global_nav__unread_refresh_icon",size:"inherit"}),n)}},{key:"render",value:function(){if(!this.props.featureGlobalNav)return null;var e=f()({"p-global_nav__channel":!0,"p-global_nav__channel--synthetic":!0,"p-global_nav__channel--relayout":this.props.featureGlobalNavLayout});return h.a.createElement("div",{className:e},h.a.createElement("div",{className:"p-global_nav__channel_name p-global_nav__channel_name--synthetic","data-qa":"channel_name"},AC.t("All Unreads")),this.renderRefreshButton(),h.a.createElement("div",{className:"p-global_nav__channel_spacer--fill"}),this.renderSortButton())}}]),t}(p.Component);MC.displayName="AllUnreadsHeader",MC.defaultProps=PC;var DC={setUserPrefByApi:D.f},xC=Object(_.b)(function(e){return{hasUnreads:Object(Vi.d)(e),sortOrder:wi(e),newUnreads:Object(dC.c)(e),featureGlobalNav:Object(y.i)(e,"feature_global_nav"),featureGlobalNavLayout:Object(y.i)(e,"feature_global_nav_layout")}},DC)(MC),LC=(m.b.string,{id:void 0}),FC=function(e){var t=e.id;return t?"Vall_threads"===t?h.a.createElement(NC,null):"Vall_unreads"===t?h.a.createElement(xC,null):"Vsearch"===t?h.a.createElement(fj.a,null):h.a.createElement(SC,{channelId:t}):null};FC.displayName="ChannelHeader",FC.defaultProps=LC;var BC=Object(_.b)(function(e){return{id:Object(k.a)(e)}})(FC),qC=(m.b.func,{closeFlexpane:d.a}),UC=function(e){return h.a.createElement(Re.c,{className:"p-global_nav__flex_btn",onClick:e.closeFlexpane},h.a.createElement(se.b,{type:"times"}))};UC.displayName="FlexClose",UC.defaultProps=qC;var HC=Object(_.b)(null,{closeFlexpane:Ke.a})(UC),GC=n("SAUz"),WC=new x.b("global_nav"),KC=function(e){var t=e.channelId,n=e.threadTs,a=e.name,r=e.isChannel;if(!e.featureGlobalNav)return null;var i=Object(id.v)(t,n),o=void 0;if(a){var s=h.a.createElement(G.a,{href:i,className:"p-global_nav__flex_thread_permalink"},a);o=r?WC.rt("Thread in {channelName}",{channelName:s}):WC.rt("Thread with {displayName}",{displayName:s})}else o=WC.t("Thread");return h.a.createElement("h2",{className:"p-global_nav__flex_title overflow_ellipsis"},o)};KC.displayName="ThreadHeader",KC.defaultProps={channelId:void 0,threadTs:void 0,name:void 0,isChannel:!0,featureGlobalNav:!1};var VC=Object(_.b)(function(e){var t=Object(O.c)(e)[0],n=Object(Ho.a)(t),a=n.channelId,r=n.threadTs,i=Object(re.d)(e,a);return i?{channelId:a,threadTs:r,name:Object(he.x)(e,i),isChannel:Object(he.yb)(i)||Object(he.xb)(i),featureGlobalNav:Object(y.i)(e,"feature_global_nav")}:null})(KC),zC=new x.b("global_nav"),YC=function(e){var t=e.name,n=e.isChannel;return e.featureGlobalNav?n&&t?h.a.createElement("h2",{className:"p-global_nav__flex_title overflow_ellipsis"},zC.t("About {channelName}",{channelName:t})):h.a.createElement("h2",{className:"p-global_nav__flex_title"},zC.t("About this conversation")):null};YC.defaultProps={name:void 0,isChannel:!0,featureGlobalNav:!1};var QC=Object(_.b)(function(e){var t=Object(k.a)(e),n=Object(re.d)(e,t);return n?{name:Object(he.x)(e,n),isChannel:Object(he.xb)(n)||Object(he.yb)(n),featureGlobalNav:Object(y.i)(e,"feature_global_nav")}:null})(YC),JC=new x.b("global_nav"),XC=(m.b.bool,m.b.bool,m.b.bool,m.b.bool,function(e){var t=e.isAdminUser,n=e.isEnterprise,a=e.isDetailPane;if(!e.featureGlobalNav)return null;var r=n?JC.t("Organization Directory"):JC.t("Workspace Directory"),i=t&&!a&&h.a.createElement(p.Fragment,null,h.a.createElement(le.c,{tip:JC.t("Manage members"),position:"bottom-right"},h.a.createElement(Re.c,{href:"/admin",className:"p-global_nav__flex_btn p-global_nav__flex_btn--link"},h.a.createElement(se.b,{type:"cog-o"}))),h.a.createElement("div",{className:"p-global_nav__flex_divider"}));return h.a.createElement(p.Fragment,null,h.a.createElement("h2",{className:"p-global_nav__flex_title"},r),i)});XC.displayName="DirectoryHeader",XC.defaultProps={isAdminUser:!1,isEnterprise:!1,isDetailPane:!1,featureGlobalNav:!1};var ZC=Object(_.b)(function(e){return{isAdminUser:Object(ne.X)(Object(Ue.b)(e)),isEnterprise:Object(te.q)(Object($.d)(e)),isDetailPane:!Object(sa.a)(Object(O.c)(e)),featureGlobalNav:Object(y.i)(e,"feature_global_nav")}})(XC),$C=n("Vfgr"),eE=n("sJR0"),tE=n("pGee"),nE=n("uhZy"),aE=n("DQNL"),rE=n("kpmE"),iE=n("rVFV"),oE=80,sE=new x.b("user_groups"),lE=void 0,cE=void 0;var uE=Object(ot.b)("Validate user group name",function(e,t,n){var a=n.name,r=n.prevName,i=n.reason,o=t();if(function(e,t){Object(y.i)(e,"feature_sonic_user_groups")&&(cE={hasNameRequiredWarning:sE.t("Please enter a name for this group."),hasReservedName:sE.t('The name "{name}" is reserved and cannot be used.',{name:t,fallbackHash:"fc741acb2c5d6bf755a8dfceb173bf447313e359"}),hasMaxLengthWarning:sE.t("Names can\u2019t be more than {maxLength} characters.",{maxLength:oE}),hasNameTakenWarning:sE.t("This name is already in use by another group."),unknownError:sE.t("Sorry, something went wrong. Please try a different name.")})}(o,a),function(e){Object(y.i)(e,"feature_sonic_user_groups_a11y_refactor")&&(lE={admins:sE.t("Team Admins"),owners:sE.t("Team Owners")})}(o),!a||!a.trim())return Promise.resolve(cE.hasNameRequiredWarning);var s=a.toLowerCase().trim();return r&&s===r.toLowerCase().trim()?Promise.resolve(""):!Object(y.i)(o,"feature_sonic_user_groups_a11y_refactor")||s!==lE.admins.toLowerCase()&&s!==lE.owners.toLowerCase()?Object(iE.a)(a)>oE?Promise.resolve(cE.hasMaxLengthWarning):e(Object(rE.l)({name:a,reason:i})).then(function(e){var t=e.error;return"name_already_exists"===t?cE.hasNameTakenWarning:t?cE.unknownError:""}):Promise.resolve(cE.hasReservedName)});uE.propTypes={name:m.b.string,prevName:m.b.string};var dE=uE,pE=new x.b("user_groups"),hE=80,mE=void 0,bE=void 0;var fE=Object(ot.b)("Validate user group handle",function(e,t,n){var a=n.handle,r=n.prevHandle,i=n.reason,o=t();return function(e,t){Object(y.i)(e,"feature_sonic_user_groups")&&(mE={hasHandleRequiredWarning:pE.t("Please enter a handle for this group."),hasMaxLengthWarning:pE.t("Handles can\u2019t be more than {maxLength} characters.",{maxLength:hE}),hasReservedHandle:pE.t("The group name @{handle} is reserved and cannot be used.",{handle:t,fallbackHash:"87ee177397df658b72975b506208aebb74090907"}),hasSpecialsWarning:pE.t("Handles can only contain letters or numbers."),hasPunctuationWarning:pE.t("Handles can only contain letters or numbers."),hasLowercaseWarning:pE.t("Handles can only be in lowercase."),hasHandleTakenWarning:pE.t("This handle is already in use by a member, channel, or another group."),unknownError:pE.t("Sorry, something went wrong. Please try a different handle.")})}(o,a),function(e){Object(y.i)(e,"feature_sonic_user_groups_a11y_refactor")&&(bE={admins:pE.t("admins"),owners:pE.t("owners")})}(o),a&&a.trim()?a===r?Promise.resolve(""):!Object(y.i)(o,"feature_sonic_user_groups_a11y_refactor")||a.toLowerCase()!==bE.admins.toLowerCase()&&a.toLowerCase()!==bE.owners.toLowerCase()?/[ .,;'`~!@#$%^&*+=\\:"<>?|]/.test(a.trim())?Promise.resolve(mE.hasSpecialsWarning):/^[-|_]+$/.test(a)?Promise.resolve(mE.hasPunctuationWarning):/[A-Z]/.test(a)?Promise.resolve(mE.hasLowercaseWarning):Object(iE.a)(a)>hE?Promise.resolve(mE.hasMaxLengthWarning):e(Object(rE.k)({handle:a,reason:i})).then(function(e){var t=e.error;return"handle_already_exists"===t?mE.hasHandleTakenWarning:t?mE.unknownError:""}):Promise.resolve(mE.hasReservedHandle):Promise.resolve(mE.hasHandleRequiredWarning)});fE.propTypes={handle:m.b.string,prevHandle:m.b.string};var _E=fE,gE=n("20gP"),vE=n("Zhly"),yE=n("dI1W"),kE=n("jYCR"),OE=new x.b("user_groups"),jE=(m.b.array,m.b.bool,m.b.bool.isRequired,{selectedChannels:[],onChange:d.a}),CE={entities:{channels:{includePublic:!0,includePrivate:!0,includeFromAnotherTeam:!1,includeMpims:!1,includeArchived:!1,searchPreviousNames:!1,onlyVisibleMpims:!1,includeRequired:!0}},limit:100,tiered:!0,sort:{frecency:!0}},EE=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"getSelectedOptions",value:function(){return(this.props.selectedChannels||[]).map(function(e){return{value:e}})}},{key:"renderChannelOption",value:function(e){return h.a.createElement(vE.a,{channel:e.entity,channelId:e.value})}},{key:"render",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=this.props.onChange,t=OE.t("Default channels"),n=OE.t("Group members are added to these channels automatically.");return h.a.createElement($l.a,{htmlFor:"user_group_default_channel_select",id:"user_group_default_channel",key:"user_group_default_channel",text:t,optional:!0},h.a.createElement(gE.b,{selectedOptions:this.getSelectedOptions(),renderOption:this.renderChannelOption,width:"100%",optionsRowHeight:32,onSelectedItemsChange:e,selectId:"user_group_default_channel_select",searcherOptions:CE}),h.a.createElement(yE.a,null,n))}}]),t}(p.PureComponent);EE.displayName="UserGroupDefaultChannelPicker",EE.defaultProps=jE;var wE={search:kE.a},SE=Object(_.b)(function(e){return{getChannelById:function(t){return Object(re.d)(e,t)},featureSonicUserGroups:Object(y.i)(e,"feature_sonic_user_groups")}},wE)(EE),IE=new x.b("user_groups"),TE=(m.b.object.isRequired,m.b.shape({name:m.b.string,handle:m.b.string,purpose:m.b.string,channels:m.b.array}),m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.bool.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.shape({nameError:m.b.string,handleError:m.b.string,purposeError:m.b.string}),m.b.string,m.b.func.isRequired,m.b.number.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={name:e.detailsFormValues.name,handle:e.detailsFormValues.handle,purpose:e.detailsFormValues.purpose,channels:e.detailsFormValues.channels};var a=!n.state.name||!n.state.handle;return n.props.setRequiredFieldsEmpty(a),n.validateUserGroupName=Object(Ll.a)(n.validateUserGroupName,300).bind(n),n.validateUserGroupHandle=Object(Ll.a)(n.validateUserGroupHandle,300).bind(n),Object(T.a)(n,["onNameChange","onHandleChange","onPurposeChange","onChannelsUpdate","getFormValues","setUserGroupFormRef","maybeRenderApiError"]),n.postValidateHandle=null,n.postValidateName=null,n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t=!this.state.name||!this.state.handle;this.props.setRequiredFieldsEmpty(t)}}},{key:"componentWillUnmount",value:function(){this.props.onRef(void 0)}},{key:"onNameChange",value:function(e){return this.postValidateName&&(this.postValidateName.cancel(),this.postValidateName=null),this.setState(function(){return{name:e}}),this.validateUserGroupName(e)}},{key:"onHandleChange",value:function(e){this.postValidateHandle&&(this.postValidateHandle.cancel(),this.postValidateHandle=null);var t=e.replace(/ /g,"");return this.setState(function(){return{handle:t}})," "!==e.charAt(0)?this.validateUserGroupHandle(t):Promise.resolve()}},{key:"onPurposeChange",value:function(e){this.props.onPurposeChange(e),this.setState(function(){return{purpose:e}})}},{key:"onChannelsUpdate",value:function(e){var t=e.map(function(e){return e.value});this.setState(function(){return{channels:t}})}},{key:"getFormValues",value:function(){return this.state}},{key:"setUserGroupFormRef",value:function(e){this.defaultChannelsRef=e}},{key:"validateUserGroupHandle",value:function(e){var t=this,n=this.props.userGroup;return this.props.validateUserGroupHandle({handle:e,prevHandle:Object(aE.f)(n,{includeAtSign:!1}),reason:"user-group-edit-create-form"}).then(function(e){t.props.setFormErrors({handleError:e})}).finally(function(){t.postValidateHandle=null})}},{key:"validateUserGroupName",value:function(e){var t=this,n=this.props.userGroup;return this.props.validateUserGroupName({name:e,prevName:Object(aE.h)(n),reason:"user-group-edit-create-form"}).then(function(e){t.props.setFormErrors({nameError:e})}).finally(function(){t.postValidateName=null})}},{key:"hasValidationErrors",value:function(e){return Object(Iu.a)(e,function(e){return e})}},{key:"maybeRenderApiError",value:function(){if(!this.props.featureSonicUserGroups)return null;if(this.props.submitError){var e=IE.t("We\u2019re not sure why, but that didn\u2019t work. Try again?");return h.a.createElement(la.a,{level:"error",type:"inline",className:"margin_bottom_100"},e)}return!1}},{key:"maybeRenderAutogeneratedUserGroupAlert",value:function(){var e=this.props.userGroup;if(!Object(aE.n)(e))return null;var t=IE.t("This user group is automatically generated for Workspace Admins.",{fallbackHash:"0cf6a765aa60fc4bc7f34f9ec7e18139d7ab4c37"}),n=IE.t("This user group is automatically generated for Workspace Owners.",{fallbackHash:"18d8fa9ec13425420cc46bc2669fc1f2055284c6"}),a=void 0;return Object(aE.p)(e)&&(a=n),Object(aE.o)(e)&&(a=t),h.a.createElement(la.a,{level:"info",type:"inline",className:"margin_bottom_100"},a)}},{key:"renderUserGroupNameField",value:function(){var e=this;if(!this.props.featureSonicUserGroups)return null;var t=IE.t("Name"),n=IE.t("e.g. Accounts Team");return h.a.createElement("div",null,h.a.createElement($l.a,{htmlFor:"name_label",id:"user_group_name",key:"user_group_name",text:t},h.a.createElement(Yl.a,{name:"user_group_name",id:"name_input",placeholder:n,labelId:"user_group_name",value:this.state.name,type:"text",onChange:function(t){return e.onNameChange(t)},errorText:this.props.errors.nameError,isRequired:!0,useInlineAlert:!0,isDisabled:Object(aE.n)(this.props.userGroup)})))}},{key:"renderUserGroupHandleField",value:function(){var e=this;if(!this.props.featureSonicUserGroups)return null;var t=IE.t("e.g. accounts-team"),n=IE.t("You\u2019ll use the display name to get the group\u2019s attention. It should be all lowercase, with no spaces."),a=IE.t("Handle");return h.a.createElement("div",null,h.a.createElement($l.a,{htmlFor:"handle_label",id:"user_group_handle",key:"user_group_handle",text:a},h.a.createElement(Yl.a,{name:"user_group_handle",id:"handle_input",placeholder:t,labelId:"user_group_handle",value:this.state.handle,type:"text",onChange:function(t){return e.onHandleChange(t)},errorText:this.props.errors.handleError,hintText:n,isRequired:!0,icon:"mentions",useInlineAlert:!0,isDisabled:Object(aE.n)(this.props.userGroup)})))}},{key:"renderUserGroupPurposeField",value:function(){var e=this;if(!this.props.featureSonicUserGroups)return null;var t=IE.t("Purpose"),n=IE.t("What is this group about?");return h.a.createElement("div",null,h.a.createElement($l.a,{htmlFor:"purpose_label",id:"user_group_purpose",key:"user_group_purpose",text:t,optional:!0},h.a.createElement(lc.a,{name:"user_group_purpose",id:"purpose_input",labelId:"user_group_purpose",value:this.state.purpose,type:"text",onChange:function(t){return e.onPurposeChange(t)},errorText:this.props.errors.purposeError,hintText:n,maxCharacterLimit:this.props.purposeMaxLength,useInlineAlert:!0})))}},{key:"renderDefaultChannelSelect",value:function(){return h.a.createElement(SE,{selectedChannels:this.state.channels,onChange:this.onChannelsUpdate})}},{key:"render",value:function(){return this.props.featureSonicUserGroups?h.a.createElement("div",null,this.maybeRenderApiError(),this.maybeRenderAutogeneratedUserGroupAlert(),h.a.createElement("form",{className:"p-user_group_create_form"},this.renderUserGroupNameField(),this.renderUserGroupHandleField(),this.renderUserGroupPurposeField(),this.renderDefaultChannelSelect())):null}}]),t}(p.PureComponent));TE.displayName="UserGroupEditCreateForm",TE.defaultProps={detailsFormValues:{name:"",handle:"",purpose:"",channels:[]},errors:{nameError:"",handleError:"",purposeError:""},submitError:""};var NE={validateUserGroupName:dE,validateUserGroupHandle:_E},RE=Object(_.b)(function(e){return{featureSonicUserGroups:Object(y.i)(e,"feature_sonic_user_groups")}},NE)(TE),AE=n("qPro"),PE=n("TegG"),ME=(n("UJZI"),new x.b("user_groups")),DE=(m.b.func,m.b.bool,m.b.func,m.b.array,{onSelectedItemsChange:d.a,featureSonicUserGroupsA11yRefactor:!1,getMemberById:d.a,userGroupMemberIds:[]}),xE=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["getSelectedMembers","renderMemberOption"]),n}return u()(t,e),o()(t,[{key:"getSelectedMembers",value:function(e){var t=this;return e.map(function(e){return t.formatMemberOption(t.props.getMemberById(e))})}},{key:"formatMemberOption",value:function(e){return e?{label:Object(ne.B)(e),value:e.id}:null}},{key:"renderMemberOption",value:function(e){return h.a.createElement(PE.a,{id:e.value})}},{key:"render",value:function(){var e=this.props,t=e.featureSonicUserGroupsA11yRefactor,n=e.userGroupMemberIds;if(!t)return null;var a=this.getSelectedMembers(n);return h.a.createElement(gE.b,{isRequired:!0,key:"user_group_member_select",selectId:"user_group_member_select",renderOption:this.renderMemberOption,selectedOptions:a,onSelectedItemsChange:this.props.onSelectedItemsChange,placeholderText:ME.t("Search by name"),width:"100%",maxHeight:148,optionsRowHeight:32,searcherOptions:{entities:{members:{includeSelf:!0,onlyLocalTeam:!0,includeSlackbot:!1,includeBots:!1,includeDeleted:!1,includeGuests:!1}},allowEmptyQuery:!0,sort:{frecency:!1,selfFirst:!1},limit:40}})}}]),t}(p.PureComponent);xE.displayName="UserGroupMemberSelector",xE.defaultProps=DE;var LE=Object(_.b)(function(e,t){var n=t.groupId,a=Object(tE.e)(e,n),r=Object(aE.g)(a);return{featureSonicUserGroupsA11yRefactor:Object(y.i)(e,"feature_sonic_user_groups_a11y_refactor"),userGroupMemberIds:r,getMemberById:function(t){return Object(Ue.c)(e,t)}}})(xE),FE=new x.b("user_groups"),BE=(m.b.string,m.b.func,m.b.bool,m.b.bool,m.b.array,m.b.func,m.b.string,m.b.func,m.b.func,{groupId:void 0,onSelectedItemsChange:d.a,featureSonicUserGroups:!1,featureSonicUserGroupsA11yRefactor:!1,userGroupMemberIds:[],fetchAndUpsertUserGroupMembers:d.a,teamId:void 0,getMemberById:d.a,search:d.a}),qE=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={updatedGroupMembers:e.userGroupMemberIds,searchResults:[],searchQuery:"",loading:!1,resultFocusIndex:-1,lastKnownResultFocusIndex:-1,displayNoMemberError:!1,haveUpsertedExistingMembers:!1},Object(T.a)(n,["onSearchInputChange","onClearSearch","setAddMember","setRemoveMember","setListRef","setAddedMembersTitleRef","setAllMembers","handleUpKey","handleDownKey","handleEnterKey","onSearchInputFocusIn","onSearchInputFocusOut","onSelectedItemsChange"]),n.list=null,n.addedMembersTitle=null,n.ADDED_MEMBERS_TITLE_HEIGHT=22,n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.groupId;t?(this.setLoading(!0),this.props.fetchAndUpsertUserGroupMembers({groupId:t}).then(function(t){e.setState(function(){return{haveUpsertedExistingMembers:!0}}),Object(sa.a)(t)?e.getMembers(""):e.setState(function(){return{updatedGroupMembers:t,loading:!1}})})):this.getMembers("")}},{key:"componentDidUpdate",value:function(e,t){!Object(Ny.a)(this.state.searchResults,t.searchResults||!Object(Ny.a)(this.state.searchQuery,t.searchQuery))&&this.list&&this.list.scrollToOffset(0),t.updatedGroupMembers.length!==this.state.updatedGroupMembers.length&&Object(sa.a)(this.state.updatedGroupMembers)&&this.getMembers(""),this.addedMembersTitle&&(this.ADDED_MEMBERS_TITLE_HEIGHT=this.addedMembersTitle.clientHeight)}},{key:"componentWillUnmount",value:function(){this.keyCommands&&this.keyCommands.reset()}},{key:"onSearchInputChange",value:function(e){this.state.displayNoMemberError&&this.setDisplayNoMemberError(!1);var t=e&&e.target&&e.target.value;t?(this.getMembers(t),this.setSearchQuery(t),this.setResultFocusIndex(0)):this.onClearSearch()}},{key:"onClearSearch",value:function(){Object(sa.a)(this.state.updatedGroupMembers)&&this.getMembers(""),this.setSearchQuery(""),this.setResultFocusIndex(0),this.setDisplayNoMemberError(!1)}},{key:"onSearchInputFocusIn",value:function(){this.bindKeyCommands(),this.state.lastKnownResultFocusIndex<0?(this.setLastKnownResultFocusIndex(0),this.setResultFocusIndex(0)):this.setResultFocusIndex(this.state.lastKnownResultFocusIndex)}},{key:"onSearchInputFocusOut",value:function(){this.keyCommands&&this.keyCommands.reset(),this.setLastKnownResultFocusIndex(this.state.resultFocusIndex),this.setResultFocusIndex(-1)}},{key:"onSelectedItemsChange",value:function(e){this.setDisplayNoMemberError(!e.length),this.setAllMembers(e.map(function(e){return e.value})),this.props.onSelectedItemsChange(e)}},{key:"getUpdatedUserGroupMembers",value:function(){return this.state.updatedGroupMembers}},{key:"setSearchQuery",value:function(e){this.setState(function(){return{searchQuery:e}})}},{key:"setSearchResults",value:function(e){this.setState(function(){return{searchResults:e}})}},{key:"setLoading",value:function(e){this.setState(function(){return{loading:e}})}},{key:"setDisplayNoMemberError",value:function(e){this.setState(function(){return{displayNoMemberError:e}})}},{key:"setRemoveMember",value:function(e){this.setState(function(t){return{updatedGroupMembers:Object(Hu.a)(t.updatedGroupMembers,e)}})}},{key:"setAddMember",value:function(e){this.setState(function(t){return{updatedGroupMembers:[e].concat(Le()(t.updatedGroupMembers))}},this.onClearSearch)}},{key:"setAllMembers",value:function(e){this.setState(function(){return{updatedGroupMembers:e}})}},{key:"setResultFocusIndex",value:function(e){this.setState(function(){return{resultFocusIndex:e}})}},{key:"setLastKnownResultFocusIndex",value:function(e){this.setState(function(){return{lastKnownResultFocusIndex:e}})}},{key:"setListRef",value:function(e){this.list=e}},{key:"setAddedMembersTitleRef",value:function(e){this.addedMembersTitle=e}},{key:"getMembers",value:function(e){var t=this;return this.setLoading(!0),this.props.search({query:e,options:{entities:{members:{includeSelf:!0,onlyLocalTeam:!0,includeSlackbot:!1,includeBots:!1,includeDeleted:!0}},allowEmptyQuery:!0,sort:{frecency:!1,selfFirst:!1},limit:40}}).then(function(e){var n=Object(El.a)(e,function(e){if(!e)return!1;if(Object(ne.ob)(e))return!1;if(e.enterprise_user){var n=e.enterprise_user.teams;if(!n)return!1;if(!Object(Ei.a)(n,t.props.teamId))return!1}return!0}),a=Object(qp.a)(n,["real_name"]).map(function(e){return e.id});t.setSearchResults(a),t.setLoading(!1)})}},{key:"getRowProps",value:function(e){var t=this;if(!this.props.featureSonicUserGroups)return{};var n=FE.t("Add"),a=FE.t("Remove"),r=this.state.updatedGroupMembers;return Object(Ei.a)(r,e)?{onClick:function(){return t.setRemoveMember(e)},text:a,buttonAria:this.formatRowAriaLabel(a,e)}:{onClick:function(){return t.setAddMember(e)},text:n,buttonAria:this.formatRowAriaLabel(n,e)}}},{key:"getDisplayedListLength",value:function(){var e=this.state,t=e.searchResults,n=e.searchQuery,a=e.updatedGroupMembers;return n?t.length:a.length?a.length:t.length}},{key:"handleUpKey",value:function(e){e.preventDefault();var t=this.state.resultFocusIndex,n=this.getDisplayedListLength();n?this.setResultFocusIndex(0===t?n-1:t-1):this.setResultFocusIndex(0)}},{key:"handleDownKey",value:function(e){e.preventDefault();var t=this.state.resultFocusIndex,n=this.getDisplayedListLength();n?this.setResultFocusIndex((t+1)%n):this.setResultFocusIndex(0)}},{key:"handleEnterKey",value:function(e){if(!(this.state.resultFocusIndex<0)){e.preventDefault();var t=this.state,n=t.searchQuery,a=t.searchResults,r=t.updatedGroupMembers,i=t.resultFocusIndex;if(Object(sa.a)(r)){var o=a[i];this.setSearchQuery(""),this.setAddMember(o)}else if(n){var s=a[i];this.setSearchQuery(""),Object(Ei.a)(r,s)?this.setRemoveMember(s):this.setAddMember(s)}else{var l=r[i];this.setRemoveMember(l)}}}},{key:"bindKeyCommands",value:function(){var e=[{keys:["up"],handler:this.handleUpKey},{keys:["down"],handler:this.handleDownKey},{keys:["enter"],handler:this.handleEnterKey}];this.keyCommands||(this.keyCommands=new gu.a),this.keyCommands.bindAll(e)}},{key:"validateUpdatedGroupMemberCount",value:function(){var e=this.state.updatedGroupMembers.length>0;return e||this.setDisplayNoMemberError(!0),e}},{key:"doDisplayGroupMembersList",value:function(){return!this.state.searchQuery&&!!this.state.updatedGroupMembers.length}},{key:"formatRowAriaLabel",value:function(e,t){return e+" "+Object(ne.B)(this.props.getMemberById(t))+" "}},{key:"maybeRenderNoMembersAlert",value:function(){return this.props.featureSonicUserGroups&&this.state.displayNoMemberError?h.a.createElement(la.a,{type:"inline",level:"error",className:"margin_right_150 margin_left_150 margin_bottom_100","data-qa-user-group-error":!0},FE.t("User groups need to have at least one member.")):null}},{key:"renderLoadingSpinner",value:function(){return h.a.createElement("div",{className:"full_height full_width display_flex align_items_center","data-qa-user-group-loading":!0},h.a.createElement(Yr.a,{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderRowButton",value:function(e){var t=e.text,n=e.buttonAria,a=Be()(e,["text","buttonAria"]);return h.a.createElement("div",{className:"p-user_group_member_management__row_button"},h.a.createElement(Re.d,Z()({size:"small",type:"outline"},a,{tabIndex:"-1","aria-label":n}),t))}},{key:"renderMemberRow",value:function(e){var t=e.id,n=e.index,a=this.getRowProps(t),r=a.onClick,i=Be()(a,["onClick"]),o=f()({"p-user_group_member_management__row_container--active":n===this.state.resultFocusIndex});return h.a.createElement("div",{className:o},h.a.createElement("div",{className:"p-user_group_member_management__row","aria-hidden":!0},h.a.createElement("div",{className:"p-user_group_member_management__row_member"},h.a.createElement(mk.b,{id:t,size:"medium",showTooltip:!1}))),this.renderRowButton(Z()({onClick:r},i)))}},{key:"renderMemberList",value:function(){var e=this.state,t=e.searchResults,n=e.loading,a=e.updatedGroupMembers;return n?this.renderLoadingSpinner():this.doDisplayGroupMembersList()?this.renderList({items:a}):Object(sa.a)(t)?this.renderEmptyList():this.renderList({items:t})}},{key:"renderList",value:function(e){var t=this,n=e.items,a=[].concat(n),r=this.doDisplayGroupMembersList(),i=void 0;return i=this.state.resultFocusIndex>-1?a[this.state.resultFocusIndex]:this.state.lastKnownResultFocusIndex>-1?a[this.state.lastKnownResultFocusIndex]:a[0],h.a.createElement(Nu.a,null,function(e){var o=e.width,s=e.height;return h.a.createElement(Xu.a,{width:o,height:r?s-t.ADDED_MEMBERS_TITLE_HEIGHT:s,keys:a,ref:t.setListRef,rowRenderer:function(e){return t.renderMemberRow({id:n[e],index:e})},itemToScroll:i,hideHiddenStopTabs:!0})})}},{key:"renderEmptyList",value:function(){return this.props.featureSonicUserGroups?h.a.createElement("div",{"data-qa-user-group-empty-list":!0,className:"p-user_group_member_management__empty"},h.a.createElement("div",{className:"margin_top_100 margin_bottom_100"},FE.rt("No matches found for <strong>{searchQuery}</strong>",{searchQuery:this.state.searchQuery})),h.a.createElement(Re.d,{type:"outline",size:"small",onClick:this.onClearSearch},FE.t("Clear Search"))):null}},{key:"renderSearch",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=f()("p-user_group_member_management__search",{"p-user_group_member_management__search--no_list_title":!this.doDisplayGroupMembersList()});return h.a.createElement("div",{className:e,"data-qa-user-group-member-management-search-container":!0},h.a.createElement($l.a,{className:"bold",text:FE.t("Add members"),"data-qa-user-group-member-management-search-label":!0},h.a.createElement(AE.a,{placeholder:FE.t("Search by name"),icon:"search",autoFocus:!0,"aria-controls":"user_group_member_management_list",onChange:this.onSearchInputChange,value:this.state.searchQuery,onFocus:this.onSearchInputFocusIn,onBlur:this.onSearchInputFocusOut,callOnFocusOnAutoFocus:!0})))}},{key:"renderUserGroupMemberSelector",value:function(){if(!this.props.featureSonicUserGroupsA11yRefactor)return null;var e=this.state.haveUpsertedExistingMembers,t=this.props.groupId;return h.a.createElement("div",{className:"p-user_group_member_selector","data-qa-user-group-member-management-body":!0},!t||e?h.a.createElement("div",null,this.maybeRenderNoMembersAlert(),h.a.createElement(LE,{groupId:this.props.groupId,onSelectedItemsChange:this.onSelectedItemsChange})):h.a.createElement("div",{className:"p-user_group_member_selector_loading_spinner_container"},this.renderLoadingSpinner()))}},{key:"render",value:function(){return this.props.featureSonicUserGroupsA11yRefactor?this.renderUserGroupMemberSelector():h.a.createElement("div",{className:"overflow_hidden","data-qa-user-group-member-management-body":!0},this.maybeRenderNoMembersAlert(),this.renderSearch(),h.a.createElement("div",{className:"p-user_group_member_management__list",id:"user_group_member_management_list","aria-live":"polite"},this.renderMemberList()))}}]),t}(p.PureComponent);qE.displayName="UserGroupMemberManagement",qE.defaultProps=BE;var UE={search:kE.a,fetchAndUpsertUserGroupMembers:eE.i},HE=Object(_.b)(function(e,t){var n=t.groupId,a=Object(tE.e)(e,n),r=Object(aE.g)(a);return{featureSonicUserGroups:Object(y.i)(e,"feature_sonic_user_groups"),featureSonicUserGroupsA11yRefactor:Object(y.i)(e,"feature_sonic_user_groups_a11y_refactor"),userGroupMemberIds:r,teamId:Object(v.b)(e),getMemberById:function(t){return Object(Ue.c)(e,t)}}},UE,null,{withRef:!0})(qE),GE=Object(ot.b)("Validate the user group form",function(e,t,n){var a=n.name,r=n.handle,i=n.prevName,o=n.prevHandle;return Promise.all([e(dE({name:a,prevName:i})),e(_E({handle:r,prevHandle:o}))]).then(function(e){var t=No()(e,2);return{nameError:t[0],handleError:t[1]}})});GE.propTypes={name:m.b.string,handle:m.b.string,prevName:m.b.string,prevHandle:m.b.string};var WE=GE,KE=new x.b("user_groups"),VE=(m.b.object.isRequired,m.b.string,m.b.string,m.b.string,m.b.string,m.b.array,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.bool.isRequired,m.b.func,m.b.func,m.b.func,m.b.func.isRequired,{userGroupId:"",userGroupName:null,userGroupHandle:null,userGroupPurpose:"",userGroupDefaultChannels:[],closeModal:d.a,enqueueToast:d.a,showUserGroupDetails:d.a}),zE=void 0,YE=Object(ut.b)(),QE=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={formSubmitPending:!1,errors:{nameError:"",handleError:"",purposeError:""},formStep:"",submitError:"",requiredFieldsEmpty:!1,detailsFormValues:{name:n.props.userGroupName,handle:n.props.userGroupHandle,purpose:n.props.userGroupPurpose,channels:n.props.userGroupDefaultChannels},purposeTooLong:!1},Object(T.a)(n,["setFormErrors","setUserGroupFormRef","setUserGroupMemberManagementRef","setRequiredFieldsEmpty","onSubmitSuccess","onSubmitFailure","onDetailsStepComplete","onEditDialogSubmit","onCreateDialogSubmit","createDialogViewInfo","shouldShowCloseDialogSpeedBump","onSelectedItemsChange","onPurposeChange"]),n.onPurposeChange=Object(Ll.a)(n.onPurposeChange,300).bind(n),n.formRef=null,n}return u()(t,e),o()(t,[{key:"componentWillMount",value:function(){this.createDialogViewInfo(),this.props.userGroupId?this.setDialogStep(zE.edit.id):this.setDialogStep(zE.details.id)}},{key:"onDetailsStepComplete",value:function(){var e=this,t=this.formRef.getFormValues();return this.setFormSubmitPending(!0),this.props.validate(Z()({},t,{prevName:this.props.userGroupName,prevHandle:this.props.userGroupHandle})).then(function(n){e.setFormErrors(n),e.hasValidationErrors(n)?e.setFormSubmitPending(!1):e.state.formStep===zE.edit.id?e.onEditDialogSubmit(t):(e.setDetailsFormValues(t),e.setDialogStep(zE.members.id),e.setFormSubmitPending(!1))})}},{key:"onEditDialogSubmit",value:function(e){var t=this,n=e.name,a=e.handle,r=e.purpose,i=e.channels;if(!this.props.featureSonicUserGroups)return null;var o=this.props.userGroupId;return this.props.updateUserGroup({groupId:o,name:Object($C.a)(n),handle:a,description:r,channels:i,reason:"onEditDialogSubmit"}).then(function(){t.props.enqueueToast({element:h.a.createElement(pt.b,null,KE.t("Group has been updated."))}),t.onSubmitSuccess()}).catch(function(e){YE.error("Error editing user group: "+e),t.onSubmitFailure(e)})}},{key:"onCreateDialogSubmit",value:function(){var e=this;if(!this.props.featureSonicUserGroups)return null;var t=this.state.detailsFormValues,n=(t=void 0===t?{}:t).name,a=t.handle,r=t.purpose,i=t.channels;if(!this.userGroupMemberManagementRef)return!1;if(!this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount())return this.setRequiredFieldsEmpty(!0),!1;var o=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.createUserGroup({name:Object($C.a)(n),handle:a,description:r,channels:i,users:o,reason:"onCreateDialogSubmit"}).then(function(t){var n=t.id;e.props.showUserGroupDetails({groupId:n}),e.props.addUserGroupIds([n])}).then(function(){e.props.enqueueToast({element:h.a.createElement(pt.b,null,KE.t("User group created!"))}),e.onSubmitSuccess()}).catch(function(t){YE.error("Error creating user group: "+t),e.onSubmitFailure(t)})}},{key:"onSubmitSuccess",value:function(){this.setFormSubmitPending(!1),this.props.closeModal(),this.setApiError("")}},{key:"onSubmitFailure",value:function(e){this.setFormSubmitPending(!1),this.setApiError(e)}},{key:"onSelectedItemsChange",value:function(e){this.setRequiredFieldsEmpty(!e.length)}},{key:"onPurposeChange",value:function(e){var t=e.length>140;this.setState(function(){return{purposeTooLong:t}})}},{key:"getMemberSelectorDialogProps",value:function(){var e=this;return this.props.featureSonicUserGroups?{title:zE.members.title,contentLabel:zE.members.title,shouldCloseOnGo:!0,bodyClassName:"p-user_group_member_management__dialog_body",onGo:this.onCreateDialogSubmit,goButtonText:zE.members.goButtonText,shouldCloseOnCancel:!1,cancelText:KE.t("Back"),onCancel:function(){e.setDialogStep(zE.details.id)},footerText:zE.members.footerText}:null}},{key:"getDetailsFormDialogProps",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=this.state.formStep,t=Object(Iu.a)(zE,function(t){return t.id===e});return{title:t.title,contentLabel:t.title,goButtonText:t.goButtonText,onGo:this.onDetailsStepComplete,shouldCloseOnCancel:!0,cancelText:KE.t("Cancel"),shouldCloseOnGo:!1,footerText:t.footerText}}},{key:"setFormErrors",value:function(e){this.setState(function(t){return{errors:Z()({},t.errors,e)}})}},{key:"setDetailsFormValues",value:function(e){this.setState(function(t){return{detailsFormValues:Z()({},t.detailsFormValues,e)}})}},{key:"setFormSubmitPending",value:function(e){this.setState(function(){return{formSubmitPending:e}})}},{key:"setDialogStep",value:function(e){this.setState(function(){return{formStep:e}})}},{key:"setUserGroupFormRef",value:function(e){this.formRef=e}},{key:"setApiError",value:function(e){this.setState(function(){return{submitError:e}})}},{key:"setUserGroupMemberManagementRef",value:function(e){this.userGroupMemberManagementRef=e&&e.getWrappedInstance?e.getWrappedInstance():e}},{key:"setRequiredFieldsEmpty",value:function(e){this.setState(function(){return{requiredFieldsEmpty:e}})}},{key:"shouldShowCloseDialogSpeedBump",value:function(e){if("go"===e||this.state.formStep===zE.members.id)return!1;var t=this.formRef.getFormValues();return!Object(Ny.a)(this.state.detailsFormValues,t)}},{key:"createDialogViewInfo",value:function(){this.props.featureSonicUserGroups&&(zE={details:{id:"details",footerText:KE.t("Step 1 of 2"),title:KE.t("Create User Group"),goButtonText:KE.t("Next")},members:{id:"members",footerText:KE.t("Step 2 of 2"),title:KE.t("Add members"),goButtonText:KE.t("Create Group")},edit:{id:"edit",footerText:null,title:KE.t("Edit User Group"),goButtonText:KE.t("Save")}})}},{key:"hasValidationErrors",value:function(e){return!!Object(Iu.a)(e,function(e){return e.length})}},{key:"renderDetailsForm",value:function(){var e=this;return h.a.createElement("div",null,h.a.createElement(RE,Z()({},this.props,{detailsFormValues:this.state.detailsFormValues,errors:this.state.errors,submitError:this.state.submitError,setFormErrors:this.setFormErrors,onRef:function(t){return e.setUserGroupFormRef(t)},setRequiredFieldsEmpty:this.setRequiredFieldsEmpty,onPurposeChange:this.onPurposeChange,purposeMaxLength:140,userGroup:this.props.userGroup})))}},{key:"renderMemberSelector",value:function(){return this.props.featureSonicUserGroups?h.a.createElement(HE,{groupId:this.props.userGroupId,ref:this.setUserGroupMemberManagementRef,onSelectedItemsChange:this.onSelectedItemsChange}):null}},{key:"renderDialogStep",value:function(){return this.state.formStep===zE.details.id||this.state.formStep===zE.edit.id?this.renderDetailsForm():this.state.formStep===zE.members.id?this.renderMemberSelector():""}},{key:"render",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=this.hasValidationErrors(this.state.errors)||this.state.requiredFieldsEmpty||this.state.purposeTooLong,t=this.state.formStep===zE.details.id||this.state.formStep===zE.edit.id?this.getDetailsFormDialogProps():this.getMemberSelectorDialogProps();return h.a.createElement(lr.a,Z()({showCancelButton:!0,goButtonIsDisabled:e,goButtonIsPending:this.state.formSubmitPending},t,{getShouldShowSpeedBump:this.shouldShowCloseDialogSpeedBump,speedBumpCancelButtonText:KE.t("Keep Editing"),speedBumpContinueButtonText:KE.t("Close"),speedBumpBodyText:KE.t("Your work won\u2019t be saved - are you sure you want to close?")}),this.renderDialogStep())}}]),t}(p.PureComponent);QE.displayName="UserGroupEditCreateDialog",QE.defaultProps=VE;var JE={createUserGroup:eE.f,updateUserGroup:eE.n,closeModal:st.a,enqueueToast:dt.c,showUserGroupDetails:Ke.n,validate:WE,addUserGroupIds:nE.a},XE=Object(_.b)(function(e,t){var n=Object(tE.e)(e,t.userGroupId);return n?{userGroup:n,userGroupName:Object(aE.h)(n),userGroupHandle:Object(aE.f)(n,{includeAtSign:!1}),userGroupPurpose:Object(aE.e)(n),userGroupDefaultChannels:Object(aE.d)(e,n),featureSonicUserGroups:Object(y.i)(e,"feature_sonic_user_groups")}:{userGroup:{},userGroupName:"",userGroupHandle:"",userGroupPurpose:"",userGroupDefaultChannels:[],featureSonicUserGroups:Object(y.i)(e,"feature_sonic_user_groups")}},JE)(QE),ZE=new x.b("global_nav"),$E=(m.b.bool,m.b.bool,function(e){var t=e.featureGlobalNav,n=e.dispatchOpenModal;if(!t)return null;var a=ZE.t("User Groups"),r=Object(Ij.a)()?h.a.createElement(p.Fragment,null,h.a.createElement(le.c,{tip:ZE.t("Create a user group"),position:"bottom-right"},h.a.createElement(Re.c,{"data-qa":"user_group_create_button",onClick:function(){n({element:h.a.createElement(XE,null)})},className:"p-global_nav__flex_btn p-global_nav__flex_btn--link"},h.a.createElement(se.b,{type:"compose-dm"}))),h.a.createElement("div",{className:"p-global_nav__flex_divider"})):null;return h.a.createElement(p.Fragment,null,h.a.createElement("h2",{className:"p-global_nav__flex_title"},a),r)});$E.displayName="UserGroupsHeader",$E.defaultProps={featureGlobalNav:!1,dispatchOpenModal:!1};var ew=Object(_.b)(function(e){return{featureGlobalNav:Object(y.i)(e,"feature_global_nav")}},function(e){return{dispatchOpenModal:function(){return e(st.e.apply(void 0,arguments))}}})($E),tw=new x.b("global_nav"),nw=(m.b.number,m.b.bool,m.b.func,{numDownloads:0,featureGlobalNav:!1,clearDownloads:d.a}),aw=function(e){var t=e.numDownloads,n=e.featureGlobalNav,a=e.clearDownloads;if(!n)return null;var r=t>1&&h.a.createElement(p.Fragment,null,h.a.createElement(Re.c,{onClick:a,className:"p-global_nav__flex_btn"},tw.t("Clear all")),h.a.createElement("div",{className:"p-global_nav__flex_divider"}));return h.a.createElement(p.Fragment,null,h.a.createElement("h2",{className:"p-global_nav__flex_title"},tw.t("Downloads")),r)};aw.displayName="DownloadsHeader",aw.defaultProps=nw;var rw={clearDownloads:function(){return Object(C.b)()}},iw=Object(_.b)(function(e){return{numDownloads:(Object(C.f)(e)||[]).length,featureGlobalNav:Object(y.i)(e,"feature_global_nav")}},rw)(aw),ow=new x.b("global_nav"),sw=(m.b.string,m.b.bool,m.b.bool,m.b.bool,m.b.string,{flexName:void 0,featureGlobalNav:void 0,featureGlobalNavLayout:void 0,featureSonicUserGroups:void 0,flexOrigin:void 0}),lw=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderTitle",value:function(){var e=this.props,t=e.flexName,n=e.featureGlobalNav,a=e.flexOrigin,r=e.featureSonicUserGroups;if(!n)return null;var i="p-global_nav__flex_title";switch(t){case"convo":case"thread":return h.a.createElement(VC,null);case"files":return"starred_items"===a?h.a.createElement("h2",{className:i},ow.t("Starred Items")):h.a.createElement("h2",{className:i},ow.t("Files"));case"stars":case"starred_items":return h.a.createElement("h2",{className:i},ow.t("Starred Items"));case"mentions":return h.a.createElement("h2",{className:i},ow.t("Activity"));case"team":return h.a.createElement(ZC,null);case"whats_new":return h.a.createElement("h2",{className:i},ow.t("What\u2019s New"));case"groups":case"user_groups":return r?h.a.createElement(ew,null):h.a.createElement("h2",{className:i},ow.t("User Groups"));case"shortcuts":return h.a.createElement("h2",{className:i},ow.t("Keyboard Shortcuts"));case"downloads":return h.a.createElement(iw,null);case"details":return h.a.createElement(QC,null);case"apps":return h.a.createElement("h2",{className:i},ow.t("About this app"));default:return h.a.createElement("h2",{className:i},"Unimplemented: ",t)}}},{key:"render",value:function(){var e=this.props,t=e.flexName,n=e.featureGlobalNavLayout;if(!t)return null;var a=f()(xl()({"p-global_nav__flex":!0,"p-global_nav__flex--sonic":Object(Me.a)(),"p-global_nav__flex--legacy":!Object(Me.a)(),"p-global_nav__flex--relayout":n},"p-global_nav__flex--"+t,!0));return h.a.createElement("div",{className:a},h.a.createElement(GC.a,null),this.renderTitle(),h.a.createElement(HC,null))}}]),t}(p.Component);lw.displayName="FlexHeader",lw.defaultProps=sw;var cw=Object(_.b)(function(e){return{flexName:Object(O.h)(e),flexOrigin:Object(O.a)(e),featureGlobalNav:Object(y.i)(e,"feature_global_nav"),featureGlobalNavLayout:Object(y.i)(e,"feature_global_nav_layout"),featureSonicUserGroups:Object(y.i)(e,"feature_sonic_user_groups")}})(lw),uw=n("mM05"),dw=n.n(uw),pw=n("7nxQ"),hw=n("XRnC"),mw=Object(ot.b)("Start editing the last message in a given channel",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.threadTs,i=n.viewContext,o=t(),s=Object(xu.c)(o,{channelId:a,threadTs:r});return!!s&&(e(Object(xu.e)({channelId:a,ts:s.ts,viewContext:i,scroll:!0})),!0)});mw.propTypes={channelId:m.b.string.isRequired,threadTs:m.b.string,viewContext:m.b.string};var bw=mw,fw=n("/Q0P"),_w=n("Ggy7"),gw=h.a.lazy(function(){return Promise.resolve().then(n.bind(null,"6EwF"))}),vw=Object(ot.b)("Opens the snippet dialog",function(e,t,n){var a=n.initialText.replace(/\u2018|\u2019/g,"'").replace(/\u201c|\u201d/g,'"');Object(Me.a)()?e(Object(fw.a)({element:h.a.createElement(gw,Z()({},n,{initialSnippetText:a,initialText:"",resetSnippetText:a,resetChannelId:n.initialChannelId}))})):Object(_w.a)(a,n.fromPrompt)});vw.propTypes={initialText:m.b.string,initialChannelId:m.b.string.isRequired,threadTs:m.b.string,viewContext:m.b.string};var yw=vw,kw=n("AITD"),Ow=new x.b("coachmarks"),jw={anchorElement:m.b.instanceOf(Element),setTractorFilesCoachmarkVisibility:m.b.func},Cw={anchorElement:null,setTractorFilesCoachmarkVisibility:d.a},Ew=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.setTractorFilesCoachmarkVisibility,n=e.anchorElement;return h.a.createElement("div",{className:"position_relative"},h.a.createElement(Ng.a,{anchorElement:n,"data-qa":"coachmark",isOpen:!0,arrowPosition:80,orientation:"right",offsetY:-40,closeCoachmark:function(){return t(!1)},coachmarkClassNames:"c-message-pane__c-coachmark"},h.a.createElement("h3",null,Ow.t("Share a file in the channel")),h.a.createElement("p",null,Ow.rt('Click the <i class="c-icon c-icon--paperclip"></i> paperclip icon next to the message input box to <strong>add a file from your computer</strong>.'))))}}]),t}(Ng.a);Ew.displayName="TractorShareFilesCoachmark";var ww=Ew;Ew.propTypes=jw,Ew.defaultProps=Cw;var Sw=n("eglI"),Iw=n("9PC1"),Tw=n("btvA"),Nw=n("vhAc"),Rw=function(e,t){return function(e,t){return Object(g.dispatchForTeamId)(e,Object(Nw.b)({resourceType:"channel",resourceId:t})).then(function(e){return e.map(function(e){return{appId:Object(aa.a)(e,"app.app_id"),id:Object(aa.a)(e,"action_id"),name:Object(aa.a)(e,"name"),description:Object(aa.a)(e,"description"),type:Object(aa.a)(e,"type"),app:Object(aa.a)(e,"app"),channelId:t}})})}(e,t).then(function(n){Object(g.dispatchForTeamId)(e,Object(oy.b)({channelId:t})),Object(g.dispatchForTeamId)(e,Object(oy.d)({channelId:t,isLoaded:!1})),Aw().markObjectsAsFresh(e,[t]),Object(g.dispatchForTeamId)(e,Object(oy.e)({channelId:t,actions:n})),Object(g.dispatchForTeamId)(e,Object(oy.d)({channelId:t,isLoaded:!0}))})},Aw=Object(Fp.a)(function(){return new Tw.b({fetch:function(e,t){return Promise.map(t,function(t){return Rw(e,t)})},isEnabled:function(e){var t=Object(g.getStateByTeamId)(e);return Object(y.i)(t,"feature_channel_actions_client")}})});Object(ot.b)("Mark actions for channelIds as stale",function(e,t,n){var a=Aw(),r=t(),i=Object(v.b)(r);a.markObjectsAsStale(i,n)}).propTypes=m.b.arrayOf(m.b.string).isRequired;var Pw=function(e,t){Aw().maybeRefetch(e,t)},Mw=Object(Si.b)(function(e){return e&&e.channelActions}),Dw=Object(Si.b)(function(e){return Mw(e).actionMetaByChannelId}),xw=(Object(Si.b)(function(e,t){return Mw(e).actions[t]||null}),Object(Si.b)(function(e,t){var n=Mw(e).actionIdsByChannelId[t];return Array.isArray(n)?n:[]})),Lw=Object(Si.b)(function(e,t){var n=xw(e,t),a=Mw(e).actions;return n?n.map(function(e){return a[e]}).filter(function(e){return void 0!==e}):[]}),Fw=Object(Si.b)(function(e,t){return Dw(e)[t]||null}),Bw=Object(Si.b)(function(e,t){var n=Fw(e,t),a=xw(e,t);if(n){if(!1===n.isLoaded&&n.count>=0)return n.count;if(!0===n.isLoaded)return a.length}return null}),qw=Object(Si.b)(function(e,t){var n=Fw(e,t),a=Lw(e,t),r=Object(v.b)(e);return n&&n.count>0&&Pw(r,t),a}),Uw=n("cMxN"),Hw=n("Pb16"),Gw=n("DVJN"),Ww=Object(ot.b)("Runs a channel action",function(e,t,n){if(!Object(y.i)(t(),"feature_channel_actions_client"))return Promise.resolve();var a=Z()({},n,{type:Gw.a.channelAction});return e(Object(Nw.c)(a)).catch(function(){var t=Object(Hw.a)({onRetry:function(){return e(Ww(a))}});e(Object(dt.c)({element:t}))})});Ww.propTypes={actionId:m.b.string.isRequired,appId:m.b.string.isRequired,channelId:m.b.string.isRequired};var Kw=n("nlS/"),Vw=n("Fuyg"),zw=n("/m+M"),Yw=n("Jn9h"),Qw=n("X5Eo"),Jw=n("hXpn"),Xw=(n("No7/"),function(e){var t=e.children,n=Be()(e,["children"]);return h.a.createElement("span",Z()({},n,{className:"p-app_action_picker_item__text--secondary"}),t)});Xw.displayName="SecondaryText",Xw.defaultProps={children:null};var Zw=Object(p.memo)(function(e){var t=e.renderAvatar,n=e.primaryContent,a=e.secondaryContent,r=e.isActive;return h.a.createElement(Jw.a,{size:"small",className:f()("p-app_action_picker_item",{"p-app_action_picker_item--active":r}),primaryContent:h.a.createElement(Qw.a,{size:"small",avatar:function(e){var n=e.className;return t(f()(n,"p-app_action_picker_item__icon"))},text:n}),secondaryContent:a})});Zw.propTypes={primaryContent:m.b.node,secondaryContent:m.b.node,renderAvatar:m.b.func,isActive:m.b.bool},Zw.defaultProps={primaryContent:null,secondaryContent:null,renderAvatar:d.a,isActive:!1};var $w=Zw,eS=function(e){var t=e.action,n=e.app,a=e.appName,r=Be()(e,["action","app","appName"]),i=h.a.createElement(Xw,null,a),o=Object(p.useCallback)(function(e){var a=Object(aa.a)(t,"app.icons.image_64",Object(Cm.a)(n,64));return h.a.createElement(Yw.a,{className:e,src:a,alt:name})},[t,n]);return h.a.createElement($w,Z()({},r,{renderAvatar:o,primaryContent:t.name,secondaryContent:i}))};eS.displayName="AppActionPickerActionItem",eS.defaultProps={app:null,appName:""};var tS=Object(_.b)(function(e,t){var n=t.action.appId;return{app:Object(Ih.d)(e,n)||null}})(eS),nS=(n("eSdw"),new x.b("app_action_picker")),aS=Object(p.memo)(function(e){var t=e.channelActions,n=e.channelId,a=e.initialFilterValue,r=e.onSelected,i=e.launchWorkflowBuilder,o=e.runChannelAction,s=Object(p.useRef)(null),l=Object(p.useState)({filterQuery:a||"",activeRowIndex:null}),c=No()(l,2),u=c[0],d=c[1],m=Object(zw.a)().featureChannelActionsClient,b=Object(p.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e(),a=n.activeRowIndex,r=n.filterQuery;void 0===a&&void 0===r||d(Z()({},u,void 0!==a?{activeRowIndex:a}:{},void 0!==r?{filterQuery:r}:{})),t&&t()},[u]),f=Object(p.useMemo)(function(){return{label:"LABEL_CHANNEL_ACTIONS",options:t.map(function(e){return{value:e.id,label:e.name,description:e.description,type:"OPTION_CHANNEL_ACTION",appName:e.app.app_name,action:e}})}},[t]),_=Object(p.useMemo)(function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object(Vw.a)(t);return e.map(function(e){return Z()({},e,{options:e.options.filter(function(e){var t=Object(Vw.a)(e.label),a=Object(Vw.a)(e.description)||"",r=Object(Vw.a)(e.appName)||"";if("OPTION_CHANNEL_ACTION"===e.type){if(t.includes(n))return!0;if(a.includes(n))return!0;if(r.includes(n))return!0}return!1})})}).filter(function(e){return e.options.length>0})}([f],u.filterQuery)},[f,u.filterQuery]),g=Object(p.useCallback)(function(e){if("OPTION_CHANNEL_ACTION"===e.type){var t=e.action;o({appId:t.appId,actionId:t.id,channelId:n}),r()}},[n,r,o]),v=Object(p.useCallback)(function(e,t){var a=t.isActive;return"heading"===e.type?"LABEL_CHANNEL_ACTIONS"===e.label?h.a.createElement("div",null,m?nS.rt("Pinned in {channelName}",{channelName:h.a.createElement(pe.a,{channelId:n})}):""):h.a.createElement("div",null,e.label):h.a.createElement(tS,{key:e.key,action:e.action,channelId:n,onSelected:r,isActive:a,appName:e.appName})},[n,m,r]),y=Object(p.useCallback)(function(e){return m?""===e?h.a.createElement("div",{className:"app_action_picker__empty"},nS.t("No app actions available for this channel."),h.a.createElement("br",null),nS.rt("Create an app using <a>Workflow Builder</a>.",null,function(e){var t=e.text;return h.a.createElement(G.a,{onClick:function(){r(),i()}},t)})):h.a.createElement("div",{className:"app_action_picker__empty"},nS.t('No app action results found for "{query}".',{query:Object(x.n)(e)}),h.a.createElement("br",null),nS.rt("Try again or create an app using <a>Workflow Builder</a>.",null,function(e){var t=e.text;return h.a.createElement(G.a,{onClick:function(){r(),i()}},t)})):null},[m,r,i]);return h.a.createElement("div",{className:"p-app_action_picker"},h.a.createElement(Kw.b,{ariaLabel:m?nS.t("Search actions"):"",focusOnMount:!0,inputRef:s,maxOptionsListHeight:400,onOptionSelected:g,optionsRowHeight:44,placeholderText:m?nS.t("Search actions"):"",renderOption:v,resultsInPopover:!1,selectState:{filterQuery:u.filterQuery,activeRowIndex:u.activeRowIndex,options:_,isExpanded:!0,selectId:"app_action_picker"},emptyStateMessage:y,setSelectState:b,showDropdownIcon:!1,size:"large",width:400}))});aS.defaultProps={channelActions:[],onSelected:d.a,initialFilterValue:null};var rS=Object(_.b)(function(e,t){var n=t.channelId;return{channelId:n,channelActions:qw(e,n)}},function(e){return{runChannelAction:function(t){return e(Ww(t))},launchWorkflowBuilder:function(){return e(Object(Tt.a)())}}})(aS),iS=new x.b("app_action_picker"),oS=(m.b.string,m.b.node.isRequired,m.b.number,m.b.number,m.b.string,m.b.func,m.b.func,m.b.bool,m.b.string,m.b.bool,m.b.string,{channelId:null,offsetX:0,offsetY:-14,position:"top-left",onClick:d.a,onClose:d.a,forceOpen:!1,featureChannelActionsClient:!1,initialFilterValue:null,threadTs:null}),sS=function(e){var t=e.children,n=e.channelId,a=e.featureChannelActionsClient,r=e.forceOpen,i=e.initialFilterValue,o=e.offsetX,s=e.offsetY,l=e.onClick,c=e.onClose,u=e.position,d=e.threadTs,p=Be()(e,["children","channelId","featureChannelActionsClient","forceOpen","initialFilterValue","offsetX","offsetY","onClick","onClose","position","threadTs"]);return a?h.a.createElement(Uw.b,Z()({},p,{ariaHasPopup:!0,onClick:l,onClose:c,forceOpen:r,renderPopover:function(e){return h.a.createElement(Uw.a,Z()({shouldFade:!1,allowanceX:15,allowanceY:15,position:u,offsetX:o,offsetY:s,ariaLabel:iS.t("App Actions"),ariaRole:"dialog"},e),h.a.createElement(rS,{channelId:n,onSelected:e.onClose,initialFilterValue:i,threadTs:d}))}}),t):null};sS.displayName="AppActionPickerTrigger",sS.defaultProps=oS;var lS=Object(Dt.a)("feature_channel_actions_client")(sS),cS=(n("9AGP"),Object(p.forwardRef)(function(e,t){var n=e.teamId,a=e.channelId,r=e.channelActionsCount,i=Be()(e,["teamId","channelId","channelActionsCount"]),o=r&&r>0;return Object(p.useEffect)(function(){o&&Pw(n,a)},[n,a,o]),h.a.createElement(lS,Z()({channelId:a},i),h.a.createElement(Nd.a,{ref:t,className:f()("p-app_action_picker_trigger_button",{"p-app_action_picker_trigger_button--highlight":o}),icon:o?"bolt-filled":"bolt"}))}));cS.defaultProps={channelActionsCount:null},cS.displayName="AppActionPickerTriggerButton";var uS=Object(_.b)(function(e,t){var n=t.channelId;return{teamId:Object(v.b)(e),channelActionsCount:Bw(e,n)}})(cS),dS=n("a+Oh"),pS=n("NAkb"),hS=n("Pe1S"),mS=new x.b("offline_mode"),bS=new x.b("msg_input"),fS=(m.b.string,m.b.string,m.b.object,m.b.string,m.b.string,m.b.string,m.b.func,m.b.string,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.object.isRequired,m.b.bool,m.b.bool,m.b.number,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.object,m.b.number,m.b.func,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.object.isRequired,m.b.object.isRequired,m.b.number,m.b.number,m.b.number,m.b.bool,m.b.object,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.func,m.b.bool,m.b.func,m.b.func,m.b.func,{channelId:void 0,teamId:void 0,legacyChannel:void 0,threadTs:void 0,viewContext:void 0,placeholder:void 0,sendMessage:function(){return Promise.resolve()},className:void 0,enableEmojiButton:!1,enableMentionButton:!1,enableBroadcastKeywords:!0,enableJumbomoji:!1,arrowHistory:!1,useSendButton:!1,isDisabled:!1,maxLines:void 0,useLegacyCreate:!1,useLegacyDrafts:!1,focusOnMount:!1,focusOnPaste:!1,draft:void 0,draftDelay:1e3,setChannelDraft:d.a,clearChannelDraft:d.a,editLastMessage:d.a,openSnippetDialog:d.a,featureOfflineMode:!1,featureSonicInputs:!1,clientToolBar:!1,featureWysiwygComposer:!1,wasRecentlyOnline:!1,onTextChange:d.a,onFocus:d.a,onBlur:d.a,enqueueToast:d.a,openModal:d.a,maxLength:void 0,tabIndex:void 0,fileButtonTabIndex:void 0,showFocusOutline:!1,additionalDraftContent:void 0,onDraftRestore:d.a,triggerNavigateBack:d.a,triggerNavigateForward:d.a,shouldShowTractorFilesCoachmark:!1,setTractorFilesCoachmarkVisibility:d.a,appActionPickerEnabled:!1}),_S=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onEnter","onFileMenuClose","onFileMenuOpen","onLeftWhenEmpty","onCmdLeftWhenEmpty","onCmdRightWhenEmpty","onPasteLimit","onTextChange","onUpArrow","openSnippetDialog","renderInput"]),n.state={isPlusMenuOpen:!1,forcePlusMenuOpen:!1},n.getComputedModules=Object(Ob.a)(function(e,t,n,a){if(!n&&!a)return e;var r=Object(hS.a)({featureWysiwygComposer:a});return Z()({},e,{composer:Z()({},r,{teamId:t}),slacklink:a&&{convertImages:!1,disableLinksWithLabels:!0},slackmarkdown:a&&{convertHeaders:!1,convertHorizontalRule:!1}})}),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.handlePropChanges(),this.maybeFocusInput()}},{key:"componentDidUpdate",value:function(e){this.handlePropChanges(e),this.maybeFocusInput(e)}},{key:"componentWillUnmount",value:function(){this.updateDraftThrottled&&this.updateDraftThrottled.flush()}},{key:"onEnter",value:function(e){var t=e.metaKey,n=e.ctrlKey,a=e.shiftKey,r=this.props,i=r.sendMessage,o=r.useLegacyDrafts,s=r.featureOfflineMode,l=r.featureSonicInputs,c=r.wasRecentlyOnline,u=this.getInputRef();if(!u)return!1;if(u.isEmpty()&&!a)return!1;if(o||this.updateDraftThrottled.cancel(),s&&!c){var d=mS;return this.props.enqueueToast({element:h.a.createElement(pt.b,{ariaAssertive:!0,position:"top-right",icon:"cloud-offline-small"},h.a.createElement("span",null,h.a.createElement("strong",null,d.rt("No connection."))," ",d.rt("You\u2019ll be able to send messages as soon as you\u2019re back online.")))}),!1}return l&&(Object(qe.p)()&&t&&a||!Object(qe.p)()&&n&&a)?(this.openSnippetDialog(),!1):(i(),!1)}},{key:"onUpArrow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.props.arrowHistory||e){var t=this.getInputRef();t&&t.isEmpty()&&this.props.editLastMessage()}}},{key:"onLeftWhenEmpty",value:function(){this.setState(function(){return{isPlusMenuOpen:!0,forcePlusMenuOpen:!0}})}},{key:"onCmdLeftWhenEmpty",value:function(){this.props.logger.info("MESSAGE-INPUT","onCmdLeftWhenEmpty"),this.props.triggerNavigateBack({fromKeyboardShortcut:!0})}},{key:"onCmdRightWhenEmpty",value:function(){this.props.logger.info("MESSAGE-INPUT","onCmdRightWhenEmpty"),this.props.triggerNavigateForward({fromKeyboardShortcut:!0})}},{key:"onTextChange",value:function(){var e=this.props,t=e.onTextChange,n=e.useLegacyDrafts,a=e.featureWysiwygComposer,r=this.getInputRef();n||this.updateOrClearDraft({inputRef:r}),t(r.value(),a?r.getContents().contents:[])}},{key:"onFileMenuOpen",value:function(){this.setState(function(){return{isPlusMenuOpen:!0}});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_button"}}})}},{key:"onFileMenuClose",value:function(){this.setState(function(){return{isPlusMenuOpen:!1,forcePlusMenuOpen:!1}})}},{key:"onPasteLimit",value:function(){this.props.openModal({element:this.renderPasteLimitDialog(),isStackable:!0})}},{key:"getInputRef",value:function(){var e=this.props.forwardedRef;return e.current.getWrappedInstance?e.current.getWrappedInstance():e.current}},{key:"handlePropChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=t.channelId,a=t.threadTs,r=t.draft,i=t.draftDelay,o=t.logger,s=t.useLegacyDrafts,l=t.onDraftRestore,c=t.additionalDraftContent;if(!s){if(e.draftDelay!==i&&(this.updateDraftThrottled=Object(Ll.a)(this.updateDraft,i)),!s&&e.additionalDraftContent!==c){var u=this.getInputRef();this.updateOrClearDraft({inputRef:u})}if(e.channelId!==n||e.threadTs!==a){this.updateDraftThrottled.flush();var d=this.getInputRef();d.clearHistory(),n&&(r?(o.debug("DRAFT","Restoring draft to "+n),r.ops&&d.value({contents:r.ops}),r.range&&d.setCursor(r.range.index,r.range.length),l(r)):(o.debug("DRAFT","No draft, clearing input for "+n),d.clear()))}}}},{key:"maybeFocusInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=t.channelId,a=t.threadTs,r=t.focusOnMount,i=t.logger;if(r&&(r!==e.focusOnMount||n&&!a&&e.channelId!==n||a&&e.threadTs!==a)){var o=this.getInputRef();try{o.focus()}catch(e){i.error("MESSAGE-INPUT","maybeFocusInput caught error: "+(e&&e.message)),e.stack&&i.error("MESSAGE-INPUT",e.stack)}}}},{key:"openSnippetDialog",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.viewContext,r=this.getInputRef();return this.props.openSnippetDialog({initialText:r?r.displayValue():"",initialChannelId:t,threadTs:n,viewContext:a}),r.value(""),!1}},{key:"updateOrClearDraft",value:function(e){var t=e.inputRef,n=this.props,a=n.channelId,r=n.threadTs,i=n.logger,o=n.useLegacyDrafts;if(a&&t&&!o){var s=t.getContents();if(t.getLength()&&Object($C.a)(Object(Iw.o)(s.contents,"a")).length){var l=new dw.a(s.contents);i.debug("DRAFT","Updating draft in "+a),this.updateDraftThrottled({channelId:a,threadTs:r,delta:l})}else i.debug("DRAFT","Clearing draft for "+a),this.updateDraftThrottled({channelId:a,threadTs:r})}}},{key:"updateDraft",value:function(e){var t=e.channelId,n=e.threadTs,a=e.delta,r=this.props.additionalDraftContent;if(a){var i=this.getInputRef();this.props.setChannelDraft(Z()({channelId:t,threadTs:n,delta:a,range:i.getSelection()},r))}else this.props.clearChannelDraft({channelId:t,threadTs:n})}},{key:"renderPasteLimitDialog",value:function(){var e=bS;return h.a.createElement(lr.a,{title:e.t("That\u2019s a bit too long to paste"),cancelText:e.t("Create a snippet"),goButtonText:e.t("OK"),onCancel:this.openSnippetDialog,showCancelButton:!0},e.rt("To keep things running smoothly, there\u2019s a limit on the number of characters you can paste into Slack. If you\u2019d like you could <b>create a snippet</b> instead."))}},{key:"renderInput",value:function(e){var t=e.modules,n=e.isOpen,a=e.legacyTextyClassName,r=this.props,i=r.placeholder,o=r.channelId,s=r.enableEmojiButton,l=r.enableMentionButton,c=r.enableBroadcastKeywords,u=r.useLegacyCreate,d=r.onFocus,p=r.onBlur,m=r.forwardedRef,b=r.enableJumbomoji,f=r.isDisabled,_=r.maxLines,g=r.threadTs,v=r.viewContext,y=r.maxLength,k=r.tabIndex,O=r.clientToolBar,j=r.featureWysiwygComposer,C=r.teamId,E=r.focusOnPaste,w=function(e){if(!e)return"";var t=document.createElement("span");return t.innerHTML=e,t.textContent.trim()}(i),S=this.getComputedModules(t,C,O,j);return h.a.createElement(Sw.default,{legacyTextyClassName:a,channelId:o,className:"p-message_input_field",ariaLabel:w,focusOnPaste:E,placeholder:i,onEnter:this.onEnter,onUpArrow:this.onUpArrow,onLeftWhenEmpty:this.onLeftWhenEmpty,onCmdLeftWhenEmpty:Object(Me.a)()?this.onCmdLeftWhenEmpty:null,onCmdRightWhenEmpty:Object(Me.a)()?this.onCmdRightWhenEmpty:null,"data-qa":"message_input","data-thread-key":g?Object(Ho.c)(o,g):null,"data-view-context":v,ref:m,useLegacyCreate:u,maxLines:_,modules:S,isAutocompleteOpen:n,isDisabled:f,enableEmojiButton:s,enableMentionButton:l,enableBroadcastKeywords:c,enableJumbomoji:b,onTextChange:this.onTextChange,onFocus:d,onBlur:p,onPasteLimit:this.onPasteLimit,maxLength:y,tabIndex:k,useFocusRing:!1})}},{key:"renderLegacyAutocomplete",value:function(){var e=this.props,t=e.legacyChannel,n=e.threadTs,a=e.forwardedRef,r={tabcomplete:{searchOptions:{model_ob:t,in_thread:!!n},positionMenu:function(e){var t=a.current.getWrappedInstance?a.current.getWrappedInstance():a.current;e.style.width=t.container.offsetWidth+"px",Object(pS.a)(e,t.container)}}};return this.renderInput({modules:r,legacyTextyClassName:"c-texty_input"})}},{key:"renderModernAutocomplete",value:function(){return h.a.createElement(ur.a,{completeOnMembers:!0,completeOnChannels:!0,completeOnCommands:!0,completeOnEmoji:!0,channelId:this.props.channelId,threadTs:this.props.threadTs,renderInput:this.renderInput,shouldCompleteOnTab:!this.props.useSendButton})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.useLegacyCreate,a=e.channelId,r=e.threadTs,i=e.viewContext,o=e.showFocusOutline,s=e.fileButtonTabIndex,l=e.shouldShowTractorFilesCoachmark,c=e.setTractorFilesCoachmarkVisibility,u=e.appActionPickerEnabled,d=f()(t,"p-message_input",{"p-message_input--app-action-button-visible":u,"p-message_input--focus-visible":o}),p=h.a.createElement(tT,{channelId:a,threadTs:r,viewContext:i,isOpen:this.state.isPlusMenuOpen,forceOpen:this.state.forcePlusMenuOpen,onFileMenuOpen:this.onFileMenuOpen,onFileMenuClose:this.onFileMenuClose,fileButtonTabIndex:s,useLegacyCreate:n}),m=u?h.a.createElement(uS,{key:a,channelId:a,threadTs:r}):null;return h.a.createElement("div",{className:d},m,n?this.renderLegacyAutocomplete():this.renderModernAutocomplete(),l?h.a.createElement(Rg.b,{orientation:"right",coachmarkElement:h.a.createElement(ww,{setTractorFilesCoachmarkVisibility:c}),style:{position:"absolute",bottom:4,height:34,width:34}},p):p)}}]),t}(p.Component);_S.displayName="MessageInput",_S.defaultProps=fS;var gS={setChannelDraft:function(){return lb.e.apply(void 0,arguments)},clearChannelDraft:function(){return lb.a.apply(void 0,arguments)},enqueueToast:function(){return dt.c.apply(void 0,arguments)},openModal:function(){return st.e.apply(void 0,arguments)},openSnippetDialog:function(){return yw.apply(void 0,arguments)},triggerNavigateBack:function(e){return Gf(e)},triggerNavigateForward:function(e){return Wf(e)},setTractorFilesCoachmarkVisibility:function(){return Zi.f.apply(void 0,arguments)}},vS=Object(_.b)(function(e,t){var n=t.channelId,a=t.threadTs,r=Object(y.i)(e,"feature_channel_actions_client"),i=Object(ue.b)(e),o=Object(Me.a)()&&r&&i.enabled&&!a;return{legacyChannel:Object(Me.a)()?null:Object(re.d)(e,n),enableJumbomoji:Object(kw.a)(e),arrowHistory:Object(ue.h)(e,"arrow_history"),draft:Object(lb.d)(e,{channelId:n,threadTs:a}),featureOfflineMode:Object(y.i)(e,"feature_offline_mode"),featureSonicInputs:Object(y.i)(e,"feature_sonic_inputs"),clientToolBar:"composer_toolbar"===Object(Cs.c)(e,"composer_toolbar"),featureWysiwygComposer:Object(dS.a)(e),wasRecentlyOnline:Object(ee.h)(e),logger:Object(ut.a)({state:e}),clogger:Object(ye.a)({state:e}),teamId:Object(v.b)(e),shouldShowTractorFilesCoachmark:Object(Ji.b)(e),appActionPickerEnabled:o}},gS)(_S),yS=h.a.forwardRef(function(e,t){return h.a.createElement(vS,Z()({},e,{forwardedRef:t||h.a.createRef()}))}),kS=n("XlRd"),OS=(Object(ka.b)("TS.client.ui.files.backButtonOnClick"),Object(ka.b)("TS.client.ui.files.chooseFile")),jS=n("AFNo"),CS=n("SZMM"),ES=Object(jS.f)("Opens the docs Gantry app in a new window",function(e,t){var n=t(),a=Object(k.a)(n),r=Object($.d)(n),i=Object(te.i)(r),o=Object(v.a)(n);if(Object(Go.a)(a)){var s={origin_team:o||i,origin_channel:a};e(Object(CS.c)({pathname:"/docs/"+i,queryStringParams:s}))}});ES.propTypes=m.b.object;var wS=n("n3t6"),SS=n("h9dl"),IS=n("sJy+"),TS=n("a3KO"),NS=n("N0/W"),RS=new x.b("menu_file"),AS={success:m.b.bool,response:m.b.object,wasShared:m.b.bool,channel:m.b.string,threadTs:m.b.string},PS=Object(ot.b)("On Gdrive Creation Complete",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.success,r=n.response,i=n.wasShared,o=n.channel,s=n.threadTs,l=t(),c=Object(K.b)(l);a&&r&&r.data&&r.data.url&&!i&&c&&e(Object(TS.c)({ephemeralType:"created_google_drive_document",message:{channel:o,thread_ts:s,slackbot_feels:"sad_surprise",text:RS.t("It looks like your browser is blocking popups so here\u2019s a link to your <{url}|document>",{url:r.data.url})}}))});PS.propTypes=AS;var MS=PS,DS=n("OqoL"),xS=new x.b("files"),LS={type:m.b.string.isRequired,title:m.b.string,comment:m.b.string,broadcast:m.b.bool,shareFile:m.b.bool,channel:m.b.string,threadTs:m.b.string,reason:m.b.string},FS=Object(ot.b)("Create a Gdrive File",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.type,r=n.title,i=n.comment,o=n.broadcast,s=n.shareFile,l=n.channel,c=n.threadTs,u=n.reason,d=t(),p=Object(ut.a)({state:d});s&&l&&e(Object(Td.a)({id:l}));var h=Object(k.a)(t());return e(Object(NS.b)({serviceStub:"gdrive",mimeType:"application/vnd.google-apps."+a,filename:r||"",reason:u||"create-gdrive-file"})).then(function(t){var n=Object(CS.d)(t.url);n&&!n.closed||e(Object(K.c)(!0)),s?e(Object(NS.s)({channels:l,threadTs:c,title:r||"",initialComment:Object(DS.b)(d,i),broadcast:o,link:t.url,reason:u||"create-gdrive-file"})).then(function(){return e(MS({success:!0,response:t,wasShared:s,channel:h,threadTs:c}))}).catch(function(t){p.error("CREATE_GOOGLE_DRIVE_FILE",t),e(Object(TS.c)({ephemeralType:TS.a.gdriveShareFileError,message:{channel:h,thread_ts:c,slackbot_feels:"sad_surprise",text:xS.t("Oh no! I couldn\u2019t import your newly created file")}}))}):e(MS({success:!0,response:t,wasShared:s,channel:h,threadTs:c}))}).catch(function(t){e(MS({success:!1}));var n=xS.t("Darn, that didn\u2019t work. Try again or <https://my.slack.com/help/requests/new|contact us> if it\u2019s still not working.");t&&t.data&&"filename_too_long"===t.data.error&&(n=xS.t("Sorry! The name of that file is too long for us to handle. Please try importing a file with a shorter filename.")),p.error("CREATE_GOOGLE_DRIVE_FILE",t),e(Object(TS.c)({ephemeralType:TS.a.unhandledGdriveCreate,message:{channel:h,thread_ts:c,slackbot_feels:"sad_surprise",text:n}}))})});FS.propTypes=LS;var BS=FS,qS=n("IyaR"),US=n("Y6FH"),HS=n("Hvpu"),GS=n("Zwlx"),WS=n("iJ4v"),KS=n("r6UO"),VS=(n("T/b3"),new x.b("create-gdoc-dialog")),zS=(m.b.string,m.b.func,m.b.func,m.b.func,m.b.func,m.b.string,m.b.string,m.b.func,m.b.string,m.b.func,m.b.string,m.b.bool,m.b.bool,m.b.oneOf(["mpim","im","channel","private"]),m.b.node.isRequired,{type:void 0,closeModal:d.a,getShareableChannelId:d.a,createGdriveFile:d.a,onGDriveCreateComplete:d.a,threadTs:void 0,msgText:"",setMsgText:d.a,selectedChannelId:void 0,setSelectedChannel:d.a,disallowedKeywordInMsgText:void 0,canPostInSelectedChannel:!1,canThread:!1,channelType:null}),YS=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onTextChange","onShareChannelChange","onGo","onCancel","onBroadcastChange","onTitleInputChange","onShareWithChange","setTitleInputRef"]),n.titleInput=null,n._isMounted=!1,n.state={overMsgLengthLimit:!1,titleInputValue:"",submitting:!1,shareWith:!0,broadcast:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"onTextChange",value:function(e){var t=e.text,n=e.overLimit;this.props.setMsgText(t),this.setState(function(){return{overMsgLengthLimit:n}})}},{key:"onShareChannelChange",value:function(e){this.props.setSelectedChannel(e)}},{key:"onGo",value:function(){this.isGoButtonDisabled()||this.createGDocOnGo()}},{key:"onCancel",value:function(){this.props.onGDriveCreateComplete(!1)}},{key:"onTitleInputChange",value:function(e){this.setState(function(){return{titleInputValue:e}})}},{key:"onShareWithChange",value:function(e){var t=e.target.checked;this.setState(function(){return{shareWith:!!t}})}},{key:"onBroadcastChange",value:function(e){this.setState(function(){return{broadcast:e}})}},{key:"getCleanMsgText",value:function(){var e=Object(wS.a)(this.props.msgText);return Object($C.a)(e)}},{key:"getDialogTitle",value:function(){switch(this.props.type){case"document":return VS.t("Create a Google Document");case"presentation":return VS.t("Create a Google Presentation");case"spreadsheet":return VS.t("Create a Google Spreadsheet");default:return VS.t("Create a Google file")}}},{key:"setTitleInputRef",value:function(e){e&&(this.titleInput=e,this.focusTitleInput())}},{key:"focusTitleInput",value:function(){this.titleInput&&this.titleInput.focus()}},{key:"isGoButtonDisabled",value:function(){var e=this.props,t=e.disallowedKeywordInMsgText,n=e.canPostInSelectedChannel,a=e.threadTs,r=e.canThread,i=this.state,o=i.overMsgLengthLimit,s=i.shareWith,l=i.titleInputValue,c=i.submitting,u=l&&l.length>hu.r;return s&&!n&&!a||s&&a&&!r||!!t||o||u||c}},{key:"createGDocOnGo",value:function(){var e=this,t=this.props,n=t.selectedChannelId,a=t.getShareableChannelId,r=t.type,i=t.threadTs,o=this.state,s=o.titleInputValue,l=o.shareWith,c=o.broadcast;n&&(a({channelOrMemberId:n}).then(function(t){var n=e.getCleanMsgText(),a=s||VS.t("Untitled",{fallbackHash:"621521f9a8788695ec292cbec54d2792cfdf0a7d",fallbackHashNs:"space"});e.props.createGdriveFile({type:r,title:a,comment:n,broadcast:c,shareFile:l,channel:t,threadTs:i,reason:"create-gdrive-file"}).then(function(){e._isMounted&&e.setState(function(){return{submitting:!1}}),e.props.closeModal()})}),this.setState(function(){return{submitting:!0}}))}},{key:"maybeRenderBroadcast",value:function(){var e=this.props,t=e.threadTs,n=e.canPostInSelectedChannel,a=e.channelType,r=e.selectedChannelName,i=this.state.broadcast;return t&&n?h.a.createElement("div",{className:"p-create_gdoc_dialog__broadcast_section"},h.a.createElement(KS.a,{channelType:a,selectedChannelName:r,value:i,onChange:this.onBroadcastChange})):null}},{key:"renderChannelPicker",value:function(){var e=this.props.selectedChannelId,t=this.state.shareWith;return h.a.createElement(US.a,{onChange:this.onShareChannelChange,initialChannelId:e,isDisabled:!t})}},{key:"renderShareAlert",value:function(){if(!this.state.shareWith)return null;var e=Object(GS.a)(Z()({},this.props));return e?h.a.createElement("div",{className:"p-share_dialog__section"},h.a.createElement(IS.d,{type:"inline",level:"warning",className:"margin_bottom_100"},e)):null}},{key:"renderShareWith",value:function(){var e=this.state.shareWith;return h.a.createElement($l.a,{text:VS.t("Share with:"),htmlFor:"create-gdoc-share-with",type:"inline"},h.a.createElement(Xl.a,{id:"create-gdoc-share-with",defaultChecked:e,onChange:this.onShareWithChange,"data-qa":"share_with"}))}},{key:"renderTitleInput",value:function(){var e=this.state.titleInputValue,t="p-create_gdoc_dialog__title";return h.a.createElement("div",{className:"p-share_dialog__section p-share_dialog__section_bottom_padding"},h.a.createElement($l.a,{htmlFor:t,text:VS.t("Title"),optional:!0},h.a.createElement(Yl.a,{id:t,name:t,maxCharacterLimit:hu.r,counterMinimumCharacters:hu.A,onChange:this.onTitleInputChange,value:e,ref:this.setTitleInputRef,"data-qa":"create_gdoc_title"})))}},{key:"renderShareWithPicker",value:function(){var e=this.props,t=e.selectedChannelId,n=e.threadTs;return n?h.a.createElement(WS.a,{channelId:t,threadTs:n}):h.a.createElement("div",{className:"p-create_gdoc_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderMessageInput",value:function(){var e=this.props.msgText;if(!this.state.shareWith)return null;var t=VS.t("Add a message, if you\u2019d like."),n=f()("p-share_dialog__section","p-share_dialog__create_gdoc_message_input");return h.a.createElement("div",{className:n},h.a.createElement(qS.a,{text:e,onTextChange:this.onTextChange,placeholder:t,ariaLabel:t,onEnter:this.onGo}),this.maybeRenderBroadcast())}},{key:"render",value:function(){return h.a.createElement(lr.a,{className:"p-create_gdoc_dialog",title:this.getDialogTitle(),useSlackScrollbarWithPadding:!0,goButtonText:VS.t("Create"),onGo:this.onGo,onClose:this.onCancel,showCancelButton:!1,footerText:this.renderShareWithPicker(),goButtonIsDisabled:this.isGoButtonDisabled()},this.renderTitleInput(),this.renderShareAlert(),this.renderMessageInput())}}]),t}(p.Component);YS.displayName="CreateGDocDialog",YS.defaultProps=zS;var QS=Object(_.b)(function(e,t){var n=t.selectedChannelId,a=Object(HS.b)(e,t),r=Object(re.d)(e,n)||Object(re.j)(e,n);return Z()({},a,{selectedChannel:r})},function(e){return{closeModal:function(){return e(st.a.apply(void 0,arguments))},getShareableChannelId:function(){return e(SS.a.apply(void 0,arguments))},createGdriveFile:function(){return e(BS.apply(void 0,arguments))},onGDriveCreateComplete:function(){return e(MS.apply(void 0,arguments))}}})(YS),JS=Object(HS.a)(QS),XS=Object(ot.b)("Opens the create gdoc file dialog",function(e,t,n){e(Object(st.e)({element:h.a.createElement(JS,n)}))});XS.propTypes={type:m.b.string,displayType:m.b.string,initialChannelId:m.b.string};var ZS=XS,$S=n("gSGL"),eI=n("6LIB"),tI=new x.b("file-upload"),nI={SINGLE_LINK_MISSING:"single",MULTIPLE_LINK_MISSING:"multiple",WEBLINK:"weblink"};function aI(e){var t=e.type,n=e.featureBoxContentPicker,a=e.proceedToNextDialog,r=n?tI.t("Your file can\u2019t be added"):"",i="";switch(t){case nI.SINGLE_LINK_MISSING:i=n?tI.t("Your Box file is missing a shared link, which we\u2019ll need to add it to Slack."):"";break;case nI.MULTIPLE_LINK_MISSING:i=n?tI.t("One or more of your Box files is missing a shared link, which we\u2019ll need to add it to Slack."):"";break;case nI.WEBLINK:i=n?tI.t("Apologies! Links from Box can\u2019t be added this way yet."):"";break;default:return null}var o=a!==d.a?function(){Object(Il.a)(function(){a()})}:d.a;return h.a.createElement(lt.a,{title:r,onGo:o},h.a.createElement("p",null,i))}aI.displayName="BoxLinkAlert",aI.defaultProps={type:nI.SINGLE,proceedToNextDialog:d.a,featureBoxContentPicker:!1};var rI=Object(Dt.a)("feature_box_content_picker")(aI),iI=Object(jS.f)("Display Box Link Alert error",function(e,t,n){return e(Object(st.e)({element:h.a.createElement(rI,n)}))});iI.propTypes={};var oI=iI,sI=n("hqEo"),lI=n("fp5s"),cI={url:m.b.string.isRequired,windowFeatures:m.b.object,hidden:m.b.bool,processEvent:m.b.func},uI={width:590,height:520},dI=Object(ot.b)("Open third-party file picker window and handle callback",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.hidden,r=n.url,i=n.windowFeatures,o=n.processEvent,s=Object(ut.a)({getState:t,label:"REMOTE-FILE-PICKER"}),l=Z()({},uI,i);Object(qe.u)()&&window.desktop&&(window.desktop.delegate.canOpenURLInWindow(r)||s.error("REMOTE-FILE-PICKER","Trying to open remote file picker URL in SSB but URL is not whitelisted: "+r));var c=Object(lI.a)("fp_"),u=r+(r.includes("?")?"&":"?")+"source_id="+c,p=void 0,h=function(){return p.cancel()},m=void 0,b=void 0;try{if(Object(qe.u)())(m=a?Object(CS.d)(u,{show:!1,skipTaskbar:!0,frame:!1,opacity:0,transparent:!0,focusable:!1}):Object(CS.d)(u,l)).addListener("close",h);else if(a)(b=document.createElement("iframe")).setAttribute("data-qa","picker-frame"),b.src=u,b.style.cssText="display:none",document.body.appendChild(b),m=b.contentWindow;else{var f=Object(bo.a)(l,function(e,t){var n=String(e);return!0===e?n="1":!1===e&&(n="0"),t+"="+n}).join(",");(m=window.open(u,void 0,f))&&m.addEventListener("beforeunload",h)}if(!m)return Promise.reject(new Error("Unable to open window"))}catch(e){return Promise.reject(e)}return(p=function(e){return new Promise(function(t,n,a){var r=void 0,i=function(a){var i=function(e){n(e),r()};try{e(a,{resolve:function(e){t(e),r()},reject:i})}catch(e){i(e)}};a(r=function(){return window.removeEventListener("message",i)}),window.addEventListener("message",i)})}(o||function(e,t){return function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.resolve,i=a.reject;if(!Object(qe.u)()){if(n.source!==e)return;if(n.origin!==window.location.origin)return}if(n.data&&n.data._sourceId===t){n.data.ok&&r(n.data);var o=new Error("Data not OK");o.data=n.data,i(o)}}}(m,c))).finally(function(){b?b.remove():m&&m.close()}).catch(d.a),p});dI.propTypes=cI;var pI=dI,hI=new x.b("files"),mI={channelId:m.b.string.isRequired,threadTs:m.b.string,metadata:m.b.shape({fileUploadAction:m.b.oneOfType([m.b.number,m.b.string]),fileUploadSrc:m.b.oneOfType([m.b.number,m.b.string])})},bI=function(e){var t=qe.k?"A06147X5W":"A0F82E57C",n=Object($.d)(e);return Object(te.o)(n,"/apps/"+t)},fI=Object(ot.b)("Open a window to pick a Box file",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.threadTs,i=n.metadata,o=Object(y.i)(t(),"feature_sonic_cloud_files_picker"),s=Object(y.i)(t(),"feature_box_content_picker");if(!o||!s)return Object(Oo.k)(a,r,i);var l=t(),c=Object(v.b)(l),u=location.origin+"/files/import/box?team="+c;return e(pI({url:u,windowFeatures:{height:675,width:925}})).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).chosen_files,n=void 0===t?[]:t,o=[],s=[],l=[];n.forEach(function(e){e&&(!function(e){return!!(Object(eI.a)(e)&&"file"===e.type&&Object($S.a)(e.name)&&Object(eI.a)(e.shared_link)&&Object($S.a)(e.shared_link.url))}(e)?"web_link"===e.type?l.push({name:e.name,url:e.url}):s.push(e):o.push({name:e.name,link:e.shared_link.url,is_box:!0}))});var c=o.length?function(){return e(Object(sI.a)({files:o,initialChannelId:a,threadTs:r,metadata:i}))}:d.a,u=l.length?function(){return e(oI({type:nI.WEBLINK,proceedToNextDialog:c}))}:c;return s.length>0?e(oI({type:n.length>1?nI.MULTIPLE_LINK_MISSING:nI.SINGLE_LINK_MISSING,proceedToNextDialog:u})):l.length?u():c()}).catch(function(t){if(t&&t.data&&t.data.error)switch(t.data.error){case"no_access_token":case"unauthorized":e(Object(TS.c)({ephemeralType:TS.a.boxFilePickerError,message:{channel:a,thread_ts:r,slackbot_feels:"sad_surprise",text:s?hI.t("Apologies, but you\u2019ll need to <{url}|reconnect Box to Slack> to continue. It only takes a click or two!",{url:bI(l)}):""}}))}throw t})});fI.propTypes=mI;var _I=fI,gI=n("EJiy"),vI=n.n(gI),yI=n("/1FC"),kI=n("c8Bs"),OI={channelId:m.b.string.isRequired,threadTs:m.b.string,metadata:m.b.shape({fileUploadAction:m.b.oneOfType([m.b.number,m.b.string]),fileUploadSrc:m.b.oneOfType([m.b.number,m.b.string])})},jI=function(e){return!(!e||"object"!==(void 0===e?"undefined":vI()(e)))&&("string"==typeof e.name&&("number"==typeof e.bytes&&("string"==typeof e.link&&(!e.icon||"string"==typeof e.icon))))},CI=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.resolve,a=t.reject;if("https://www.dropbox.com"===e.origin){var r=void 0;try{r="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){return}if(r&&"object"===(void 0===r?"undefined":vI()(r)))switch(r.method){case"files_selected":Object(yI.a)(r.params)&&Object(kI.a)(r.params,jI)&&n({chosen_files:r.params}),a(new Error("Invalid file(s) from Dropbox"));break;case"close_dialog":n({chosen_files:[]})}}},EI=void 0,wI=Object(ot.b)("Open a window to pick a Box file",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.threadTs,i=n.metadata;if(!Object(y.i)(t(),"feature_sonic_cloud_files_picker"))return Object(Oo.l)(a,r,i);var o=t(),s=Object(v.b)(o);EI&&EI.isPending()&&EI.cancel();var l=location.origin+"/files/import/dropbox?team="+s;return(EI=e(pI({url:l,processEvent:CI,windowFeatures:{height:552,width:640}}))).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).chosen_files,n=(void 0===t?[]:t).map(function(e){return{name:e.name,size:e.bytes,link:e.link,icon:e.icon,is_dropbox:!0}});return n.length?e(Object(sI.a)({files:n,initialChannelId:a,threadTs:r,metadata:i})):null})});wI.propTypes=OI;var SI=wI,II=n("TwEf"),TI=new x.b("files"),NI={channelId:m.b.string.isRequired,threadTs:m.b.string,metadata:m.b.shape({fileUploadAction:m.b.oneOfType([m.b.number,m.b.string]),fileUploadSrc:m.b.oneOfType([m.b.number,m.b.string])}),reason:m.b.string},RI="filename_too_long",AI="unidentified_external_url",PI="file_type_has_no_handler",MI=Object(ot.b)("Open a window to pick a GDrive file",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.threadTs,i=n.metadata,o=n.reason;if(!Object(y.i)(t(),"feature_sonic_cloud_files_picker"))return Object(Oo.i)(a,r,i);var s=t(),l=Object(v.b)(s),c=location.origin+"/files/import/gdrive?team="+l;return e(pI({url:c,windowFeatures:{height:675}})).then(function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).chosen_files,l=Date.now();Promise.map(n,function(n){return e(Object(NS.s)({channels:a,threadTs:r,link:n.url,reason:o||"open-gdrive-file-picker"})).then(function(){var e;Object(ye.a)({state:s}).track(ve.k.FILE_COMPLETE_UPLOAD_SUCCESS,(e={},xl()(e,ve.d.type,ve.n.EXTERNAL),xl()(e,ve.d.duration,Date.now()-l),xl()(e,ve.d.has_upload_message,!1),xl()(e,ve.d.file_count,1),xl()(e,ve.d.retry_count,0),xl()(e,ve.d.upload_size,n.sizeBytes?n.sizeBytes:0),xl()(e,ve.d.retry_reason,""),xl()(e,ve.d.did_disconnect_during_upload,!1),xl()(e,ve.d.file_upload_action,i&&i.fileUploadAction),xl()(e,ve.d.file_upload_src,i&&i.fileUploadSrc),e))}).catch(function(n){var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.text,i=t.ephemeralType;return e(Object(TS.c)({ephemeralType:i||TS.a.gdriveShareFileError,message:{channel:a,thread_ts:r,slackbot_feels:"sad_surprise",text:n||TI.t("Hmm, something went wrong. Try again?",{fallbackHash:"83743049d08a764e93ca79d5621ee1e19f02bc75",fallbackHashNs:"app_management_modal"})}}))},o=n&&n.data&&n.data.error;return o===RI?i({text:"Sorry! The name of that file is too long for us to handle. Please try importing a file with a shorter filename."}):[PI,AI].includes(o)&&n.args&&n.args.link?e(Object(II.a)({channel:a,thread_ts:r,text:n.args.link,unfurl_links:!1,unfurl_media:!1})).then(function(){return i({ephemeralType:TS.a.fileTypeHasNoHandler,text:TI.t("We don\u2019t currently support importing that type of Google Drive file, but we included the link so that others can access it.")})}).catch(i):(Object(ut.a)({getState:t}).error("GDRIVE_FILE_PICKER",n),i())})})})});MI.propTypes=NI;var DI=MI,xI=new x.b("files"),LI={channelId:m.b.string.isRequired,threadTs:m.b.string,metadata:m.b.shape({fileUploadAction:m.b.oneOfType([m.b.number,m.b.string]),fileUploadSrc:m.b.oneOfType([m.b.number,m.b.string])}),reason:m.b.string},FI="auth_required",BI="onenote_not_supported",qI="popupOpen",UI=function(e){var t=Object($.d)(e);return Object(te.o)(t,qe.k?"apps/A061CBSP3":"apps/A53TM6XA9")},HI=Object(ot.b)("Open a window to pick a OneDrive file",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.threadTs,i=n.metadata,o=n.reason;if(!Object(y.i)(t(),"feature_sonic_cloud_files_picker"))return Object(Oo.j)(a,r,i);var s=t(),l=Object(v.b)(s),c=location.origin+"/files/import/onedrive?team="+l;return fetch(c,{cache:"no-store",mode:"same-origin",credentials:"same-origin"}).then(function(){if(403===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).status)throw new Error(FI)}).then(function(){return e(pI({url:c,hidden:!0}))}).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).chosen_files,n=Date.now();return Promise.map(t,function(t){return e(Object(NS.s)({channels:a,threadTs:r,link:t,reason:o||"open-onedrive-file-picker"})).then(function(){var e;Object(ye.a)({state:s}).track(ve.k.FILE_COMPLETE_UPLOAD_SUCCESS,(e={},xl()(e,ve.d.type,ve.n.EXTERNAL),xl()(e,ve.d.duration,Date.now()-n),xl()(e,ve.d.has_upload_message,!1),xl()(e,ve.d.file_count,1),xl()(e,ve.d.retry_count,0),xl()(e,ve.d.upload_size,0),xl()(e,ve.d.retry_reason,""),xl()(e,ve.d.did_disconnect_during_upload,!1),xl()(e,ve.d.file_upload_action,i&&i.fileUploadAction),xl()(e,ve.d.file_upload_src,i&&i.fileUploadSrc),e))})})}).catch(function(n){var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.text,i=t.ephemeralType;return e(Object(TS.c)({ephemeralType:i||TS.a.onedriveSdkError,message:{channel:a,thread_ts:r,slackbot_feels:"sad_surprise",text:n||xI.t("Darn, that didn\u2019t work. Try again or <https://my.slack.com/help/requests/new|contact us> if it\u2019s still not working.")}}))},o=n&&(n.data&&n.data.error||n.message);return o===FI?i({text:xI.t("Looks like you\u2019re trying to add a OneDrive file \u2014 first you\u2019ll need to connect <{url}|OneDrive to Slack>.\n\n Once your account is connected, you\u2019ll be able to easily share files, see file previews, and even find your files later as you search in Slack. <{url}|Learn more about using OneDrive in Slack>.",{url:UI(s)})}):o===BI?i({text:xI.t("It seems like we\u2019re not able to import OneNote notebooks.")}):o===qI?e(Object(K.c)(!0)):(Object(ut.a)({getState:t}).error("ONEDRIVE_FILE_PICKER",n),i())})});HI.propTypes=LI;var GI=HI,WI=n("EHyS"),KI=n("hjTk"),VI=Object(ot.b)("Creates and opens a legacy Post",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).openInBrowser;if(Object(gf.a)()){var a=t(),r=Object($.d)(a),i=Object(te.o)(r,"/files/create/post"+location.search),o=Object(v.a)(a);i=Object(cs.o)(i,"origin_team",o||r.id);var s=Object(k.a)(a);i=Object(cs.o)(i,"origin_channel",Object(Go.a)(s)?s:""),Object(KI.a)(i)}else Object(Oo.b)(null,n)});VI.defaultProps={openInBrowser:!0},VI.propTypes={openInBrowser:m.b.bool};n("GdkL");var zI=new x.b("menu_file"),YI=(m.b.string.isRequired,m.b.string,m.b.string,m.b.string,m.b.object,m.b.bool,m.b.bool,m.b.bool,m.b.object,m.b.object.isRequired,m.b.func,m.b.func.isRequired,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.bool,m.b.bool.isRequired,m.b.bool.isRequired,m.b.bool,{threadTs:void 0,viewContext:void 0,disableFileUploadsPref:void 0,menuProps:{},featureDocs:!1,featureSonicInputs:!1,featureSonicSnippets:!1,hiddenFileInputRef:void 0,createDocPost:d.a,showBoxMenuItem:!1,showDropboxMenuItem:!1,showGdriveMenuItem:!1,showOneDriveMenuItem:!1,openSnippetDialog:d.a,openCreateGDocDialog:d.a,openBoxFilePicker:d.a,openOnedriveFilePicker:d.a,openDropboxFilePicker:d.a,openGdriveFilePicker:d.a,featureBoxContentPicker:!1,featureSonicCloudFilesPicker:!1,featureModernGdriveCreate:!1}),QI=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.activeCloudServices=[],Object(T.a)(n,["selectFileFromComputer","createDoc","createSnippet","createLegacyPost","createGDRiveDocument","createGDRiveSpreadsheet","createGDRivePresentation","renderCreateNewSubmenu","handleBoxFileProvider","handleDropboxFileProvider","handleGdriveFileProvider","handleOnedriveFileProvider","renderMultipleCloudServices"]),n}return u()(t,e),o()(t,[{key:"selectFileFromComputer",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.viewContext,r=e.hiddenFileInputRef,i=e.clogger;r&&r.current?(r.current.click(),i.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_upload"}}})):OS(t,n,a)}},{key:"createDoc",value:function(){this.props.createDocPost()}},{key:"createSnippet",value:function(){var e=this.props,t=e.clogger,n=e.channelId,a=e.viewContext,r=e.threadTs;t.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_snippet"}}});var i=Object(vf.a)({viewContext:a,channelId:n,threadTs:r});this.props.openSnippetDialog({initialText:i&&i.getDisplayValue?i.getDisplayValue():"",initialChannelId:n,threadTs:r,viewContext:a}),i&&i.clear()}},{key:"createLegacyPost",value:function(e){var t=Object(WI.a)(e);this.props.createAndOpenLegacyPost({openInBrowser:t}),this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_space"}}})}},{key:"createGDRiveDocument",value:function(){this.props.openCreateGDocDialog({type:"document",displayType:this.props.featureSonicInputs?zI.t("Document"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs}),this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_document"}}})}},{key:"createGDRiveSpreadsheet",value:function(){this.props.openCreateGDocDialog({type:"spreadsheet",displayType:this.props.featureSonicInputs?zI.t("Spreadsheet"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs}),this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_spreadsheet"}}})}},{key:"createGDRivePresentation",value:function(){this.props.openCreateGDocDialog({type:"presentation",displayType:this.props.featureSonicInputs?zI.t("Presentation"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs}),this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_presentation"}}})}},{key:"handleBoxFileProvider",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a={fileUploadAction:ve.l.PLUS_MENU,fileUploadSrc:ve.m.BOX};return this.props.openBoxFilePicker({channelId:t,threadTs:n,metadata:a})}},{key:"handleDropboxFileProvider",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a={fileUploadAction:ve.l.PLUS_MENU,fileUploadSrc:ve.m.DROPBOX};return this.props.openDropboxFilePicker({channelId:t,threadTs:n,metadata:a})}},{key:"handleGdriveFileProvider",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a={fileUploadAction:ve.l.PLUS_MENU,fileUploadSrc:ve.m.GOOGLE_DRIVE};return this.props.openGdriveFilePicker({channelId:t,threadTs:n,metadata:a,reason:"cloud-files-menu/gdrive"})}},{key:"handleOnedriveFileProvider",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a={fileUploadAction:ve.l.PLUS_MENU,fileUploadSrc:ve.m.ONEDRIVE};return this.props.openOnedriveFilePicker({channelId:t,threadTs:n,metadata:a,reason:"cloud-files-menu/onedrive"})}},{key:"renderMultipleCloudServices",value:function(){var e=this.props,t=e.featureSonicCloudFilesPicker,n=e.featureOfflineMode,a=e.isOffline,r={},i=this.props;r.box=i.showBoxMenuItem,r.dropbox=i.showDropboxMenuItem,r.gdrive=i.showGdriveMenuItem,r.onedrive=i.showOneDriveMenuItem;var o=[{name:"box",props:{label:zI.t("Box",{fallbackHash:"239ca5767afac9641593464ce02bc454d6ac07a9",fallbackHashNs:"files"}),icon:h.a.createElement(se.b,{type:"box"}),onSelected:this.handleBoxFileProvider,enableForSonic:this.props.featureBoxContentPicker,dataQa:"box_picker_menu_item"}},{name:"dropbox",props:{label:zI.t("Dropbox",{fallbackHash:"ac88abd7dfaa8f7a7ddc7b890eb6757030e093f4",fallbackHashNs:"files"}),icon:h.a.createElement(se.b,{type:"dropbox"}),onSelected:this.handleDropboxFileProvider,enableForSonic:!0,dataQa:"dropbox_picker_menu_item"}},{name:"gdrive",props:{label:zI.t("Google Drive",{fallbackHash:"07c2964c41f409a224efb389f282268e4928b85f",fallbackHashNs:"files"}),icon:h.a.createElement(se.b,{type:"google-drive"}),onSelected:this.handleGdriveFileProvider,enableForSonic:!0,dataQa:"gdrive_picker_menu_item"}},{name:"onedrive",props:{label:zI.t("OneDrive",{fallbackHash:"80753c986574153732103504426f45909268f96b",fallbackHashNs:"files"}),icon:h.a.createElement(se.b,{type:"onedrive"}),onSelected:this.handleOnedriveFileProvider,enableForSonic:!0,dataQa:"onedrive_picker_menu_item"}}];return this.activeCloudServices=Object(El.a)(o,function(e){return r[e.name]?r[e.name]:null}),Object(bo.a)(this.activeCloudServices,function(e,r){return h.a.createElement(ie.b,{key:r,label:e.props.label,icon:e.props.icon,onSelected:e.props.onSelected,className:t&&e.props.enableForSonic?"":Object(kS.b)(),disabled:n&&a,showOfflineIcon:n&&a,"data-qa":e.props.dataQa},t&&e.props.enableForSonic?null:h.a.createElement(kS.a,null))})}},{key:"renderCreateNewMenuItems",value:function(){var e=this.props,t=e.featureDocs,n=e.featureSonicSnippets,a=e.showGdriveMenuItem,r=e.threadTs,i=e.featureOfflineMode,o=e.isOffline,s=e.featureModernGdriveCreate,l=zI.t("Post"),c=!r&&h.a.createElement(ie.b,{key:"create-new-post",label:l,icon:h.a.createElement(se.b,{type:"create-post"}),onSelected:t?this.createDoc:this.createLegacyPost,disabled:i&&o,showOfflineIcon:i&&o,"data-qa":"create_new_doc"}),u=(n&&Object(Me.a)()||!r)&&h.a.createElement(ie.b,{key:"create-new-snippet",label:zI.t("Code or text snippet"),icon:h.a.createElement(se.b,{type:"create-snippet"}),onSelected:this.createSnippet,className:n?void 0:Object(kS.b)(),disabled:i&&o,showOfflineIcon:i&&o,"data-qa":"create_new_snippet"},n?null:h.a.createElement(kS.a,null)),d=!a||r&&!Object(Me.a)()?[]:[(u||c)&&h.a.createElement(ie.d,{key:"gdrive-separator"}),h.a.createElement(ie.c,{key:"gdrive-header",label:zI.t("Google Drive")}),h.a.createElement(ie.b,{key:"gdrive_doc",label:zI.t("Document"),icon:h.a.createElement(se.b,{type:"google-drive",className:"p-new_file_menu__gdoc_icon"}),onSelected:this.createGDRiveDocument,className:s?"undefined":Object(kS.b)(),disabled:i&&!Object(kS.b)()&&o,showOfflineIcon:i&&o,"data-qa":"google_doc_menu_item"},s?null:h.a.createElement(kS.a,null)),h.a.createElement(ie.b,{key:"gdrive_sheet",label:zI.t("Spreadsheet"),icon:h.a.createElement(se.b,{type:"google-drive",className:"p-new_file_menu__gsheet_icon"}),onSelected:this.createGDRiveSpreadsheet,className:s?void 0:Object(kS.b)(),disabled:i&&!Object(kS.b)()&&o,showOfflineIcon:i&&o,"data-qa":"google_sheet_menu_item"},s?null:h.a.createElement(kS.a,null)),h.a.createElement(ie.b,{key:"gdrive_presentation",label:zI.t("Presentation"),icon:h.a.createElement(se.b,{type:"google-drive",className:"p-new_file_menu__gpres_icon"}),onSelected:this.createGDRivePresentation,className:s?void 0:Object(kS.b)(),disabled:i&&!Object(kS.b)()&&o,showOfflineIcon:i&&o,"data-qa":"google_presentation_menu_item"},s?null:h.a.createElement(kS.a,null))];return Object(El.a)([c,u].concat(d))}},{key:"renderCreateNewSubmenu",value:function(e){var t=this.props.menuProps,n=this.renderCreateNewMenuItems();return h.a.createElement(ie.f,Z()({},t,e,{"data-qa":"create_new_submenu"}),n)}},{key:"renderCreateNew",value:function(){var e=this.props,t=e.threadTs,n=e.showGdriveMenuItem,a=this.renderCreateNewMenuItems();if(0===a.length)return null;var r=!t&&Object(Me.a)()&&n?{top:-80}:void 0;return[1===a.length?a[0]:h.a.createElement(de.a,{key:"create-new-submenu",label:zI.t("Create new..."),icon:h.a.createElement(se.b,{type:"plus-circle"}),renderSubmenu:this.renderCreateNewSubmenu,"data-qa":"create_new_submenu",forceLeft:!!t,submenuStyle:r}),h.a.createElement(ie.d,{key:"create-new-separator"})]}},{key:"render",value:function(){var e=this.props,t=e.disableFileUploadsPref,n=e.menuProps,a=e.showBoxMenuItem,r=e.showDropboxMenuItem,i=e.showGdriveMenuItem,o=e.showOneDriveMenuItem,s="disable_all"!==t,l="disable_all_except_images"===t,c=a||r||i||o?zI.t("Add from\u2026"):zI.t("Add an image from\u2026");return h.a.createElement(ie.f,n,this.renderCreateNew(),h.a.createElement(ie.c,{label:l?c:zI.t("Add a file from\u2026")}),this.renderMultipleCloudServices(this.props),s&&h.a.createElement(ie.b,{"data-qa":"add_file_from_computer_menu_item",label:zI.t("Your computer"),icon:h.a.createElement(se.b,{type:"laptop"}),onSelected:this.selectFileFromComputer}))}}]),t}(p.Component);QI.displayName="NewFileMenu",QI.defaultProps=YI;var JI=Object(_.b)(function(e){var t=Object(rt.a)(e,"dropbox_legacy_picker"),n=Object(ue.h)(e,"dropbox_enabled")||t;return{disableFileUploadsPref:Object(rt.a)(e,"disable_file_uploads"),featureSonicInputs:Object(y.i)(e,"feature_sonic_inputs"),featureSonicSnippets:Object(y.i)(e,"feature_sonic_snippets"),featureDocs:Object(y.i)(e,"feature_docs"),featureBoxContentPicker:Object(y.i)(e,"feature_box_content_picker"),featureSonicCloudFilesPicker:Object(y.i)(e,"feature_sonic_cloud_files_picker"),featureModernGdriveCreate:Object(y.i)(e,"feature_modern_gdrive_create"),clogger:Object(ye.a)({state:e}),showBoxMenuItem:Object(ue.h)(e,"box_enabled")&&!Object(y.i)(e,"feature_disable_box_plus_menu"),showDropboxMenuItem:n,showGdriveMenuItem:Object(rt.a)(e,"gdrive_enabled_team"),showOneDriveMenuItem:Object(y.i)(e,"feature_onedrive_picker")&&Object(rt.a)(e,"onedrive_enabled_team"),featureOfflineMode:Object(y.i)(e,"feature_offline_mode"),isOffline:!Object(ee.c)(e)}},function(e){return{createDocPost:function(){return e(ES.apply(void 0,arguments))},createAndOpenLegacyPost:function(){return e(VI.apply(void 0,arguments))},openSnippetDialog:function(){return e(yw.apply(void 0,arguments))},openCreateGDocDialog:function(){return e(ZS.apply(void 0,arguments))},openBoxFilePicker:function(){return e(_I.apply(void 0,arguments))},openDropboxFilePicker:function(){return e(SI.apply(void 0,arguments))},openGdriveFilePicker:function(){return e(DI.apply(void 0,arguments))},openOnedriveFilePicker:function(){return e(GI.apply(void 0,arguments))}}})(QI),XI=n("DCka"),ZI=new x.b("message_input_plus_button"),$I=(m.b.string,m.b.string,m.b.string,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.bool,m.b.number,m.b.bool,m.b.object.isRequired,{channelId:void 0,threadTs:void 0,viewContext:void 0,featureOfflineMode:!1,isOpen:!1,onFileMenuOpen:d.a,onFileMenuClose:d.a,forceOpen:!1,fileButtonTabIndex:void 0,useLegacyCreate:!1}),eT=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.renderMenu=e.renderMenu.bind(e),e.hiddenFileInputRef=h.a.createRef(),e}return u()(t,e),o()(t,[{key:"renderMenu",value:function(e){var t=this.props,n=t.channelId,a=t.threadTs,r=t.logger,i=t.viewContext;return n?h.a.createElement(XI.a,{subtype:"MSG_INPUT_FILE_BTN"},h.a.createElement(JI,{menuProps:e,channelId:n,threadTs:a,viewContext:i,hiddenFileInputRef:this.hiddenFileInputRef})):(r.error("MSG_INPUT_FILE_BTN","Missing channelId in "+i),null)}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.viewContext,r=e.featureOfflineMode,i=e.isOpen,o=e.onFileMenuOpen,s=e.onFileMenuClose,l=e.forceOpen,c=e.fileButtonTabIndex,u=e.useLegacyCreate,d=f()("p-message_input_file_button",{"p-message_input_file_button--active":i}),m=h.a.createElement(Re.c,{className:d,"aria-label":ZI.t("File menu"),tabIndex:c||null},h.a.createElement(se.b,{className:"p-message_input_file_icon",type:u?"plus-thick":"paperclip"}),h.a.createElement(rj.a,{ref:this.hiddenFileInputRef,channelId:t,threadTs:n,viewContext:a})),b=h.a.createElement(ie.e,{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:o,onClose:s,forceOpen:l},m);if(r){var _=h.a.createElement(ov.a,{tooltipLabel:ZI.t("File menu")});return h.a.createElement(p.Fragment,null,h.a.createElement(Ae.b,null,b),h.a.createElement(Ae.a,null,h.a.createElement(ie.e,{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:o,onClose:s},h.a.createElement(le.c,{tip:_},m))))}return b}}]),t}(p.Component);eT.displayName="MessageInputFileButton",eT.defaultProps=$I;var tT=Object(_.b)(function(e){return{featureOfflineMode:Object(y.i)(e,"feature_offline_mode"),logger:Object(ut.a)({state:e})}})(eT),nT=new x.b("msg_input"),aT=(m.b.func.isRequired,m.b.bool,m.b.bool,m.b.string,m.b.number,m.b.bool,m.b.string,m.b.bool,{isDisabled:!1,isOffline:!1,className:void 0,tabIndex:-1,featureOfflineMode:!1,buttonSize:void 0,showTooltip:!1}),rT=function(e){var t=e.isDisabled,n=e.isOffline,a=e.className,r=e.sendMessage,i=e.featureOfflineMode,o=e.tabIndex,s=e.buttonSize,l=e.showTooltip,c=nT.t("Send"),u=void 0;l&&(u=Object(qe.p)()?nT.t("\u2318Enter"):nT.t("Ctrl+Enter"));var d="top",p=h.a.createElement(Re.d,{className:a,pillarClassName:"p-message_input__send",disabled:t||n,tabIndex:o,onClick:r,size:s},c);return i&&n&&(p=h.a.createElement("div",{style:{marginLeft:"auto"}},p),d="top-right",u=h.a.createElement(ov.a,{tooltipLabel:c})),t&&!i?p:u?h.a.createElement(le.c,{tip:u,position:d},p):p};rT.displayName="MessageInputSendButton",rT.defaultProps=aT;var iT=Object(_.b)(function(e){return{isOffline:!Object(ee.c)(e),featureOfflineMode:Object(y.i)(e,"feature_offline_mode"),showTooltip:Object(ue.h)(e,"msg_input_send_btn")}})(rT),oT=yS,sT=n("zfae"),lT=n("L8gx"),cT=n("/u/P"),uT=n("Q+UV"),dT=n("wMtF"),pT=(m.b.node.isRequired,m.b.string.isRequired,m.b.string,m.b.object.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,{threadTs:void 0}),hT=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={forceOpen:!1},n.onEmojiSelected=n.onEmojiSelected.bind(n),n.onClose=n.onClose.bind(n),n}return u()(t,e),o()(t,[{key:"onEmojiSelected",value:function(e,t){this.reactionKey?this.props.changeReactionFromUserAction({key:this.reactionKey,name:t}):this.props.logger.warn("GLOBAL-RXN-SHORTCUT","No reaction key")}},{key:"onClose",value:function(){this.setState(function(){return{forceOpen:!1}})}},{key:"startReactionPopoverForLastMessage",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.logger,r=void 0;(r=n?this.props.getLastMessageInThread(t,n):this.props.getLastMessageInChannel(t))?(this.reactionKey=Object(uT.b)(r),a.info("GLOBAL-RXN-SHORTCUT","Opening reaction popover for "+this.reactionKey),this.setState(function(){return{forceOpen:!0}})):a.info("GLOBAL-RXN-SHORTCUT","Could not find last message")}},{key:"render",value:function(){var e=this.props.children,t=this.state.forceOpen;return h.a.createElement(dT.a,{showHandyReactions:!0,customTrigger:!0,forceOpen:t,onEmojiSelected:this.onEmojiSelected,onClose:this.onClose},h.a.createElement(fT,null,e))}}]),t}(p.PureComponent);hT.displayName="MessageInputReactionPopover",hT.defaultProps=pT;var mT={getLastMessageInChannel:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){return lT.a.apply(void 0,[n()].concat(t))}},getLastMessageInThread:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){return cT.a.apply(void 0,[n()].concat(t))}},changeReactionFromUserAction:function(){return sT.c.apply(void 0,arguments)}},bT=Object(_.b)(function(e){return{logger:Object(ut.a)({state:e})}},mT,null,{withRef:!0})(hT),fT=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){return this.props.children}}]),t}(p.PureComponent);fT.displayName="PassThrough";var _T=n("mLe0"),gT=n("pWPO"),vT=function(e,t){var n=t.featureWysiwygComposer;if(!e)return!1;if(!Object(Iw.o)(e.contents,"a").trim())return!1;if(n){if(Object(_T.a)(new dw.a(e.contents))>hu.u)return!1}else if(Object(gT.a)(e).length>hu.u)return!1;return!0},yT=(n("HyiT"),new x.b("notification_bar")),kT=(m.b.bool,m.b.array,m.b.func,m.b.number,m.b.bool,m.b.bool,m.b.bool,{wasRecentlyOnline:!1,typingNames:null,snippetCallback:d.a,tooLongCount:0,inputHasText:!1,showFormattingHint:!1,isLegacy:!1}),OT=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderLeft",value:function(){var e=this.props,t=e.wasRecentlyOnline,n=e.typingNames,a=e.inputHasText;if(!t){var r=a?yT.t("Slack is trying to connect, so messages can\u2019t be sent yet."):yT.t("Slack is trying to connect.");return h.a.createElement("span",{id:"msg_input_info",className:"p-notification_bar__offline","aria-live":"polite"},r," ",h.a.createElement(se.a,{type:"cloud-offline-small-filled",className:"p-notification_bar__offline_icon"}))}if(n&&n.length>0){var i=yT.t("several people are typing");return 1===n.length?i=yT.rt("<b>{name}</b> is typing",{name:n[0]}):2===n.length&&(i=yT.rt("<b>{name}</b> and <b>{other_name}</b> are typing",{name:n[0],other_name:n[1]})),h.a.createElement("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"p-notification_bar__typing"},i)}return null}},{key:"renderRight",value:function(){var e=this.props,t=e.wasRecentlyOnline,n=e.snippetCallback,a=e.tooLongCount;if(t&&a>0){var r=yT.t("Your message is {diff_count, plural, =1{# character}other{# characters}} too long.",{diff_count:a}),i=yT.t("Make a snippet instead?"),o=yT.t("A snippet is a text file that can be much longer than a normal message.");return h.a.createElement("div",null,h.a.createElement("span",null,r," "),h.a.createElement(le.c,{tip:o},h.a.createElement("span",null,h.a.createElement(G.a,{tabIndex:"5",onClick:n},i))))}var s=t?Object(pw.c)()?yT.rt("<b>\uff0abold\uff0a</b> <code>\uff40code\uff40</code> <code>\uff40\uff40\uff40preformatted\uff40\uff40\uff40</code> <span>\uff1equote</span>"):yT.rt("<b>*bold*</b> <i>_italics_</i> ~strike~ <code>`code`</code> <code>```preformatted```</code> <span>{quote}quote</span>",{quote:">",fallbackHash:"78fa2eabded9ec376bac82c1ade55d4f646aca2c"}):"";return h.a.createElement("span",{className:"p-notification_bar__formatting","aria-hidden":"true"},s)}},{key:"render",value:function(){var e=this.props,t=e.showFormattingHint,n=e.wasRecentlyOnline,a=e.tooLongCount,r=e.isLegacy,i=f()("p-notification_bar__section","p-notification_bar__section--right",{"p-notification_bar__section--is-visible":n&&(t||a>0)}),o=f()("p-notification_bar",{"p-notification_bar--legacy":r});return h.a.createElement("div",{className:o},h.a.createElement("div",{className:"p-notification_bar__section p-notification_bar__section--left"},this.renderLeft()),h.a.createElement("div",{className:i},this.renderRight()))}}]),t}(p.PureComponent);OT.displayName="NotificationBar",OT.defaultProps=kT;var jT=Object(_.b)(function(e,t){var n=t.inputText,a=t.wysiwygTextLength,r=t.wasRecentlyOnline,i=Object(dS.a)(e),o=void 0!==r?r:Object(ee.h)(e),s=0,l=void 0;if(i&&a)l=a,s=Math.max(0,l-hu.u);else if((l=n.length)>hu.u/2){var c=Object(DS.b)(e,n);s=Math.max(0,c.length-hu.u)}return{wasRecentlyOnline:o,tooLongCount:s,showFormattingHint:l>2,inputHasText:l>0}})(OT),CT=new x.b("coachmarks"),ET={anchorElement:m.b.instanceOf(Element),completeJoinerOnboarding:m.b.func},wT=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.anchorElement,n=e.completeJoinerOnboarding;return h.a.createElement("div",{className:"position_relative"},h.a.createElement(Ng.a,{anchorElement:t,isOpen:!0,onClickPrimaryButton:n,closeCoachmark:n,coachmarkClassNames:"c-joiner-coachmark",arrowPosition:10,offsetX:30,offsetY:45,primaryCallToActionText:CT.t("Got It",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0"}),orientation:"top"},h.a.createElement("h3",null,CT.rt("Say hello!",{fallbackHash:"ff30242209ddac7a521de4f37aabe952bc39165f"})),h.a.createElement("p",null,CT.rt("Type a message to let your team know you\u2019re here.",{fallbackHash:"cacc432d26db2e0a0a36a197f329204ee25e63e1"}))))}}]),t}(Ng.a);wT.displayName="JoinerOnboardingCoachmark";var ST=wT;wT.propTypes=ET,wT.defaultProps={anchorElement:null,completeJoinerOnboarding:!1};var IT=new x.b("coachmarks"),TT={anchorElement:m.b.instanceOf(Element),setTractorMessageCoachmarkVisibility:m.b.func},NT={anchorElement:null,setTractorMessageCoachmarkVisibility:d.a},RT=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.anchorElement,n=e.setTractorMessageCoachmarkVisibility;return h.a.createElement("div",{className:"position_relative"},h.a.createElement(Ng.a,{anchorElement:t,"data-qa":"coachmark",isOpen:!0,orientation:"top",offsetX:30,offsetY:45,arrowPosition:10,closeCoachmark:function(){return n(!1)}},h.a.createElement("h3",null,IT.t("Just type and press Enter")),h.a.createElement("p",null,IT.t("Your Slack teammates will see your messages when they join. Feel free to use your own words instead!"))))}}]),t}(Ng.a);RT.displayName="TractorSendMessageCoachmark";var AT=RT;RT.propTypes=TT,RT.defaultProps=NT;var PT=n("yZHI"),MT=n("a6/V");function DT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.e,n=e.isMenuVisible;return!!t&&(!(void 0!==n&&n)&&(!Object(_u.a)(t.target)&&(!!Object(MT.a)(t)&&(!t||t.keyCode!==HO.j))))}var xT=n("M46C"),LT=n("qIoO"),FT=(n("HQme"),new x.b("msg_input")),BT=(m.b.string,m.b.string,m.b.bool,m.b.bool,{tooltip:null,border:!1,padding:void 0,featureAnnounceOnly:!1}),qT=function(e){var t=e.tooltip,n=e.border,a=e.padding;if(!e.featureAnnounceOnly)return null;var r=f()("p-message_input_announce_only_roadblock",{"p-message_input_announce_only_roadblock--border":n,"p-message_input_announce_only_roadblock--large_padding":"large"===a});return h.a.createElement("div",{className:r},h.a.createElement(se.b,{type:"emoji-objects",className:"p-message_input_announce_only_roadblock__icon",inline:!0}),FT.t("Read-only"),t&&h.a.createElement(le.c,{position:"top-right",tip:t},h.a.createElement(se.b,{type:"question-circle",className:"p-message_input_announce_only_roadblock__tip",inline:!0})))};qT.displayName="MessageInputAnnounceOnlyRoadblock",qT.defaultProps=BT;var UT=qT,HT=new x.b("view"),GT=(m.b.string.isRequired,m.b.object,m.b.bool,m.b.bool,m.b.string,m.b.func.isRequired,m.b.object,m.b.func.isRequired,m.b.func.isRequired,m.b.bool,m.b.bool,{channel:void 0,showCloseButton:!1,channelIsIMWithDeletedMember:!1,prevChannelId:void 0,member:void 0,featureEscDisconnectV2Client:!1,featureAnnounceOnly:!1}),WT=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onCloseButtonClicked=e.onCloseButtonClicked.bind(e),e}return u()(t,e),o()(t,[{key:"onCloseButtonClicked",value:function(){Object(he.eb)(this.props.channel)?this.props.closeChannelApi({channelId:this.props.channelId}):this.props.archiveChannel({id:this.props.channelId,wasArchivedThisSession:!1}),this.props.displayModelOrViewById({id:this.props.prevChannelId})}},{key:"render",value:function(){var e=this.props,t=e.channel,n=e.showCloseButton,a=e.channelIsIMWithDeletedMember,r=e.member,i=e.featureEscDisconnectV2Client,o=e.featureAnnounceOnly;if(!t)return null;var s=Object(he.W)(t)?HT.t("Close Channel"):HT.t("Close"),l=null,c="";if(i&&Object(he.bb)(t))c=Object(he.eb)(t)?HT.rt("Your two organizations are no longer connected."):Object(he.lb)(t)?HT.rt("These organizations are no longer connected."):HT.rt("This channel is no longer shared with your organization.");else if(Object(he.V)(t)&&!Object(he.eb)(t))c=Object(he.C)(t)?HT.rt("You are viewing {channel_or_group}, a moved channel",{channel_or_group:h.a.createElement("strong",null,h.a.createElement(pe.a,{channel:t}))}):HT.rt("You are viewing {channel_or_group}, an archived channel",{channel_or_group:h.a.createElement("strong",null,h.a.createElement(pe.a,{channel:t}))});else if(a&&r&&Object(ne.bb)(r))c=HT.t("You are viewing messages from {app_name} which has been removed from your workspace",{app_name:Object(ne.E)(r)});else if(a)l=h.a.createElement(se.b,{type:"archive"}),c=HT.rt("You are viewing the archives of a deactivated account",{fallbackHash:"a2f3df2a30993d2303ac6a87adcd41cb35c1799f"});else{if(o){var u=HT.t("Posting to this channel has been restricted to select members");return h.a.createElement(UT,{tooltip:u,featureAnnounceOnly:o,border:!0,padding:"large"})}c=HT.rt("Your Workspace Owners have limited who can post to {channel_or_group}",{channel_or_group:h.a.createElement("strong",null,h.a.createElement(pe.a,{channel:t}))})}return h.a.createElement("div",{className:"p-message_pane_input__disabled"},h.a.createElement("span",null,l," ",c),n&&h.a.createElement(Re.d,{pillarClassName:"p-message_pane_input__disabled_button",onClick:this.onCloseButtonClicked,type:"outline",size:"small"},s))}}]),t}(p.Component);WT.displayName="MessagePaneInputDisabled",WT.defaultProps=GT;var KT={closeChannelApi:Qn.closeChannelApi,archiveChannel:Qn.archiveChannel,displayModelOrViewById:ej.a},VT=Object(_.b)(function(e,t){var n=t.channelId,a=Object(y.i)(e,"feature_esc_disconnect_v2_client"),r=Object(re.d)(e,n),i=Object(he.eb)(r)?Object(Ue.c)(e,Object(he.G)(r)):null,o=Object(he.jb)(e,r);return{channel:r,member:i,channelIsIMWithDeletedMember:o,prevChannelId:Object(LT.a)(e),showCloseButton:Object(he.V)(r)&&(!a||!Object(he.bb)(r))||o,featureEscDisconnectV2Client:a,featureAnnounceOnly:Object(y.i)(e,"feature_announce_only")}},KT)(WT),zT=n("GdsW"),YT=new x.b("archives"),QT=(m.b.string.isRequired,m.b.object.isRequired,m.b.bool,m.b.bool,m.b.number,m.b.string,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.bool,m.b.string,m.b.bool.isRequired,m.b.bool.isRequired,{channelCreatedBySelf:!1,channelDetailsVisible:!1,dateCreated:void 0,createdById:void 0,userAttentionIsOnChat:!1,previousChannelId:void 0}),JT=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onJoinButtonClicked=e.onJoinButtonClicked.bind(e),e.onDetailsButtonClicked=e.onDetailsButtonClicked.bind(e),e.handleKeyDown=e.handleKeyDown.bind(e),e}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"onDetailsButtonClicked",value:function(){this.props.showDetails()}},{key:"onJoinButtonClicked",value:function(){this.props.joinConversationApi({channelId:this.props.channelId})}},{key:"handleKeyDown",value:function(e){var t=this.props,n=t.userAttentionIsOnChat,a=t.previousChannelId;if(!(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)&&!Object(_u.a)(document.activeElement)&&(!Object(Me.a)()||n)&&(Object(Me.a)()||Object(fu.f)()))if(e.keyCode!==HO.e){if(e.keyCode===HO.f){if(Object(Me.a)())return void this.props.displayModelOrViewById({id:a});Object(zT.a)()}}else this.onJoinButtonClicked()}},{key:"render",value:function(){var e=this.props,t=e.channel,n=e.dateCreated,a=e.createdById,r=e.channelCreatedBySelf,i=e.channelDetailsVisible,o=e.featureOfflineMode,s=e.isOffline,l=h.a.createElement(Dy.a,{type:"unknown"});n&&(l=Object(Zt.k)(n));var c=h.a.createElement(Dy.a,{type:"unknown"});a&&(c=h.a.createElement(mk.a,{id:a}));var u=YT.rt("You are viewing {channel_name}",{channel_name:h.a.createElement("strong",null,h.a.createElement(Ly.a,{channel:t,bold:!0}))}),d="";d=r?YT.rt("Created by you on {created_at}",{created_at:l}):YT.rt("Created by {name} on {created_at}",{name:c,created_at:l});var p=h.a.createElement(Re.d,{pillarClassName:"p-message_pane_input__preview_join",onClick:this.onJoinButtonClicked,type:"primary",size:"medium",disabled:o&&s},YT.t("Join Channel"));if(o&&s){var m=h.a.createElement(ov.a,{tooltipLabel:YT.t("Go online to join this channel")});p=h.a.createElement(le.c,{tip:m},h.a.createElement("div",{className:"inline_block"},p))}return h.a.createElement("div",{className:"p-message_pane_input__preview"},h.a.createElement("div",{className:"p-message_pane_input__preview_subtitle"},u),h.a.createElement("div",{className:"p-message_pane_input__preview_metadata"},d),h.a.createElement("div",null,p,!i&&h.a.createElement(Re.d,{pillarClassName:"p-message_pane_input__preview_details",onClick:this.onDetailsButtonClicked,type:"outline",size:"medium"},YT.t("See More Details"))))}}]),t}(p.Component);JT.displayName="MessagePaneInputPreview",JT.defaultProps=QT;var XT={joinConversationApi:Qn.joinConversationApi,showDetails:Ke.e,displayModelOrViewById:ej.a},ZT=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n),r=Object(O.h)(e);return{channel:a,channelDetailsVisible:"details"===r||"channel_info"===r,createdById:a.creator,dateCreated:a.created,channelCreatedBySelf:a.creator===Object(y.b)(e),userAttentionIsOnChat:Object(De.e)(e),previousChannelId:Object(LT.a)(e),featureOfflineMode:Object(y.i)(e,"feature_offline_mode"),isOffline:!Object(ee.c)(e)}},XT)(JT),$T=new x.b("msg_input"),eN=(m.b.bool,m.b.string,m.b.string,m.b.bool,m.b.string,{isSelfDm:!1,channelName:void 0,memberId:void 0,showStatus:!1,forcePlaceholderText:void 0}),tN=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.channelName,n=e.isSelfDm,a=e.showStatus,r=e.memberId,i=e.forcePlaceholderText,o=void 0;i?o=i:(o=$T.t("Message channel"),n?o=$T.t("Jot something down"):t&&(o=$T.rt("Message {msg}",{msg:t})));var s=!i&&a&&h.a.createElement(Ne.b,{memberId:r,tooltip:!1});return h.a.createElement("div",{className:"c-texty_input__placeholder"},o,s)}}]),t}(p.Component);tN.displayName="MessagePaneInputPlaceholder",tN.defaultProps=eN;var nN=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n),r=Object(he.x)(e,a,{imIncludeAtSign:!1}),i=Object(y.b)(e),o=Object(he.Qb)(i,a),s=Object(he.G)(a),l=s?Object(Ue.c)(e,s):null;return{channelName:r,isSelfDm:o,memberId:s||void 0,showStatus:Object(he.eb)(a)&&!o&&Object(ne.T)(l)}})(tN),aN=(n("0Eo7"),m.b.object,m.b.string,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.array,m.b.bool,m.b.bool,m.b.string,m.b.bool,m.b.object.isRequired,m.b.bool,m.b.bool,m.b.func,m.b.bool,m.b.func,m.b.bool,m.b.func,m.b.func,m.b.func,{channel:void 0,channelId:void 0,prepareAndSendMessage:function(){return Promise.resolve()},currentUserStartedTyping:d.a,currentUserEndedTyping:d.a,editLastMessageInChannel:d.a,openSnippetDialog:d.a,useSendButton:!1,userCanPost:!0,typingNames:[],teamId:void 0,featureWysiwygComposer:!1,isUnavailable:!1,shouldShowJoinerLandingPlaceCoachmark:!1,completeJoinerOnboardingCallback:d.a,shouldShowTractorMessageCoachmark:!1,setTractorMessageCoachmarkVisibility:d.a,userAttentionIsOnChat:!1,removeFromSectionNavigation:d.a,addToSectionNavigation:d.a,setInitialActiveSection:d.a}),rN=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object(T.a)(e,["handleKeyDown","onTextChange","sendMessage","editLastMessage","snippetCallback","startListeningToKeydown","stopListeningToKeydown","registerInput","unregisterInput","focus","blur","onFocus","onBlur"]),e.textyRef=h.a.createRef(),e.reactionPopoverRef=h.a.createRef(),e.state={textyValue:"",textyWysiwygLength:0,hasKeyboardFocus:!1},e}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.updatePlaceholder(),this.registerInput(),this.restoreLegacyDraft()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.userCanPost,a=t.channel;return(n&&!e.userCanPost||!Object(he.wb)(a)&&Object(he.wb)(e.channel))&&this.unmountPlaceholder(),!0}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.userAttentionIsOnChat,a=t.channelId,r=t.userCanPost,i=t.channel;e.userAttentionIsOnChat&&!n?(this.props.removeFromSectionNavigation(),this.stopListeningToKeydown()):!e.userAttentionIsOnChat&&n&&(this.props.addToSectionNavigation(),this.startListeningToKeydown()),e.channelId!==a&&(e.channelId&&this.unregisterInput(e.channelId),a&&(this.registerInput(),this.restoreLegacyDraft())),(a&&e.channelId!==a||!e.userCanPost&&r||(!e.channel||Object(he.wb)(e.channel))&&!Object(he.wb)(i))&&this.updatePlaceholder()}},{key:"componentWillUnmount",value:function(){var e=this.props.channelId;this.stopListeningToKeydown(),this.unmountPlaceholder(),this.unregisterInput(e),this.shouldNotListenToKeyDownAgain=!0}},{key:"onTextChange",value:function(e,t){var n=this.props.channelId;this.setState(function(){return{textyValue:e,textyWysiwygLength:Object(_T.a)(new dw.a(t))}}),Object(Me.a)()||Object(kf.h)(e),e&&0!==e.indexOf("/")&&Object($C.a)(e).length?this.props.currentUserStartedTyping({channelId:n}):this.props.currentUserEndedTyping({channelId:n})}},{key:"onFocus",value:function(){this.stopListeningToKeydown(),this.props.setInitialActiveSection("MessagePane")}},{key:"onBlur",value:function(){this.startListeningToKeydown(),this.getInputRef()&&this.setState(function(){return{hasKeyboardFocus:!1}})}},{key:"getInputRef",value:function(){return this.textyRef.current?this.textyRef.current.getWrappedInstance?this.textyRef.current.getWrappedInstance():this.textyRef.current:null}},{key:"restoreLegacyDraft",value:function(){var e=this.props.channelId,t=this.getInputRef();if(e&&!Object(Me.a)()&&t){var n=Object(cb.a)(e);t.value(n||"");var a=Object(kf.b)(e);a?t.setCursor(a.start,a.length):t.setCursorAtEnd()}}},{key:"registerInput",value:function(){var e=this,t=this.props.channelId;t&&Object(vf.b)({viewContext:hu.y.MESSAGE_PANE,channelId:t,functions:{getContainer:function(){var t=e.getInputRef();return t?t.container:null},isEmpty:function(){var t=e.getInputRef();return t?t.isEmpty():null},clear:function(){var t=e.getInputRef();t&&t.clear()},prependContents:function(t){var n=e.getInputRef();n&&n.prependContents(t)},setContents:function(t){var n=e.getInputRef();n&&n.setContents(t)},setText:function(t){var n=e.getInputRef();n&&n.value(t)},getText:function(){var t=e.getInputRef();return t?t.value():null},getLength:function(){var t=e.getInputRef();return t?t.getLength():null},getDisplayValue:function(){var t=e.getInputRef();return t?t.displayValue():null},focus:function(){var t=e.getInputRef();t&&t.setCursorAtEnd()},focusWithoutSettingCursor:function(){var t=e.getInputRef();t&&t.focus()},hasFocus:function(){var t=e.getInputRef();return!!t&&t.hasFocus()},isEnabled:function(){var t=e.getInputRef();return!!t&&t.isEnabled()},getSelection:function(){var t=e.getInputRef();return t?t.getSelection():null},insertContentsAtCursor:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user",r=e.getInputRef();r&&r.insertContentsAtCursor(t,n,a)},setCursor:function(t,n){var a=e.getInputRef();a&&a.setCursor(t,n)},setCursorAtEnd:function(){var t=e.getInputRef();t&&t.setCursorAtEnd()},setPlaceholder:function(t){e.updatePlaceholder(t)},getContentsForCurrentSelection:function(){var t=e.getInputRef();if(!t)return null;var n=t.getSelection();return n?t.getContentsForRange(n.index,n.length):null},openReactionPopoverForLastMessage:function(){e.reactionPopoverRef.current&&e.reactionPopoverRef.current.getWrappedInstance().startReactionPopoverForLastMessage()}}})}},{key:"unregisterInput",value:function(e){e&&Object(vf.c)({viewContext:hu.y.MESSAGE_PANE,channelId:e})}},{key:"unmountPlaceholder",value:function(){var e=this.getInputRef();if(e){var t=e.container.querySelector(".ql-placeholder");t&&Nl.a.unmountComponentAtNode(t)}}},{key:"updatePlaceholder",value:function(e){var t=this.props,n=t.teamId,a=t.channelId,r=this.getInputRef();if(r){var i=r.container.querySelector(".ql-placeholder");i&&Nl.a.render(h.a.createElement(_.a,{store:Object(g.getStoreInstanceByTeamId)(n)},h.a.createElement(nN,{channelId:a,forcePlaceholderText:e})),i)}}},{key:"editLastMessage",value:function(){this.props.editLastMessageInChannel({channelId:this.props.channelId})}},{key:"handleKeyDown",value:function(e){if(DT({e:e,isMenuVisible:Object(ie.g)()})&&!Object(PT.a)(e.target,function(e){return e.classList.contains("p-threads_flexpane")})){var t=this.getInputRef();Object(pw.c)()?setTimeout(function(){return t.focus()},0):t.focus()}}},{key:"startListeningToKeydown",value:function(){this.shouldNotListenToKeyDownAgain||this.props.userAttentionIsOnChat&&document.addEventListener("keydown",this.handleKeyDown)}},{key:"stopListeningToKeydown",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"sendMessage",value:function(){var e=this,t=this.props,n=t.channelId,a=t.useSendButton,r=t.featureWysiwygComposer,i=t.telemeter,o=this.getInputRef(),s=o.value(),l=o.getContents();return vT(o.getContents(),{featureWysiwygComposer:r})?(Object(xT.a)()&&i.mark("msg_input_try_to_submit"),o.clear(),a&&o.focus(),this.props.prepareAndSendMessage({channelId:n,text:s,delta:r?new dw.a(l.contents):null,includeBroadcastKeywordWarning:!0,includePrivateFileReshareWarning:!0}).then(function(){var t=e.getInputRef();t&&t.clearHistory()}).catch(function(){o.isEmpty()&&o.setContents(l)})):null}},{key:"snippetCallback",value:function(){var e=this.getInputRef();this.props.openSnippetDialog({initialChannelId:this.props.channelId,initialText:e.displayValue(),fromPrompt:!0,viewContext:hu.y.MESSAGE_PANE}),e.clear()}},{key:"focus",value:function(){var e=this.getInputRef();e&&(e.setCursorAtEnd(),this.setState(function(){return{hasKeyboardFocus:!0}}))}},{key:"blur",value:function(){var e=this.getInputRef();e&&e.blur(),this.onBlur()}},{key:"renderInput",value:function(){var e=this.props,t=e.channelId,n=e.useSendButton,a=this.state.hasKeyboardFocus,r=h.a.createElement(oT,{channelId:t,viewContext:hu.y.MESSAGE_PANE,className:"p-workspace__input",sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,useSendButton:n,useLegacyDrafts:!Object(Me.a)(),ref:this.textyRef,enableEmojiButton:!0,enableMentionButton:!0,focusOnMount:!0,focusOnPaste:!0,onTextChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,maxLines:null,showFocusOutline:a,tabIndex:1,fileButtonTabIndex:2});return Object(Me.a)()?h.a.createElement(bT,{ref:this.reactionPopoverRef,channelId:t},r):r}},{key:"render",value:function(){var e=this.props,t=e.typingNames,n=e.useSendButton,a=e.completeJoinerOnboardingCallback,r=e.userCanPost,i=e.channel,o=e.channelId,s=e.shouldShowTractorMessageCoachmark,l=e.setTractorMessageCoachmarkVisibility,c=e.shouldShowJoinerLandingPlaceCoachmark,u=this.state,d=u.textyValue,p=u.textyWysiwygLength,m=null;if(c?m=h.a.createElement(ST,{completeJoinerOnboarding:a}):s&&(m=h.a.createElement(AT,{setTractorMessageCoachmarkVisibility:l})),this.props.isUnavailable)return null;if(o&&!r)return h.a.createElement(VT,{channelId:this.props.channelId});if(o&&Object(he.wb)(i))return h.a.createElement(ZT,{channelId:this.props.channelId});var b=h.a.createElement("div",{className:"p-workspace__message_pane_input"},h.a.createElement("div",{className:"p-workspace__message_pane_input_inner"},this.renderInput(),h.a.createElement(jT,{typingNames:t,snippetCallback:this.snippetCallback,inputText:d,wysiwygTextLength:p})),n&&h.a.createElement(iT,{isDisabled:!d,sendMessage:this.sendMessage,className:"p-workspace__message_pane_send",tabIndex:1}));return Object(Me.a)()?c||s?h.a.createElement(Rg.b,{coachmarkElement:m,orientation:"top",style:{width:"100%"}},b):b:h.a.createElement(vd.a,{component:this,order:2},b)}}]),t}(p.Component);rN.displayName="MessagePaneInput",rN.defaultProps=aN;var iN={prepareAndSendMessage:function(){return hw.a.apply(void 0,arguments)},currentUserStartedTyping:function(){return __.d.apply(void 0,arguments)},currentUserEndedTyping:function(){return __.c.apply(void 0,arguments)},editLastMessageInChannel:function(){return bw.apply(void 0,arguments)},openSnippetDialog:function(){return yw.apply(void 0,arguments)},completeJoinerOnboardingCallback:function(){return $i.apply(void 0,arguments)},setTractorMessageCoachmarkVisibility:function(){return Zi.g.apply(void 0,arguments)}},oN=Object(Me.a)()?Object(Pe.a)(rN,"MessagePaneInput",{order:5}):rN,sN=Object(_.b)(function(e){var t=Object(k.a)(e),n=Object(re.d)(e,t),a=Object(bo.a)(Object(__.f)(e,t),function(t){return Object(Ue.c)(e,t)});a.sort(function(t,n){return Object(x.o)(Object(ne.R)(e,t),Object(ne.R)(e,n))});var r=Object(It.q)(e,t)||Object(y.i)(e,"feature_announce_only_websocket")&&Object(he.z)(e,n),i=a.map(function(t){return Object(ne.P)(e,t)});return{channelId:t,channel:n,userCanPost:r&&!Object(he.V)(n),typingNames:i.length>0?i:g_.a,useSendButton:Object(ue.h)(e,"msg_input_send_btn"),userAttentionIsOnChat:Object(De.e)(e),teamId:Object(v.b)(e),featureWysiwygComposer:Object(dS.a)(e),isUnavailable:Object(he.Ib)(e,n),telemeter:Object(dn.c)({state:e}),shouldShowTractorMessageCoachmark:Object(Ji.c)(e),shouldShowJoinerLandingPlaceCoachmark:Object(Ji.a)(e)}},iN)(oN),lN=n("okoL"),cN=n("Ypgw"),uN=n("izWf");function dN(e,t,n){return Object(iy.a)(Object(El.a)(n,function(n){return function(e,t,n){var a=Object(vo.a)(e,t,n);return a&&!Object(id.pb)(a)&&!Object(id.bb)(a)}(e,t,n)}))}function pN(e){var t=e.timestamps;return Object(Tu.a)(t)}var hN=n("Gz0X");var mN=function(e){var t=e.messages,n=e.timestamps,a=e.threadTs,r=e.lastRead,i=e.reachedStart,o=t[a];if(!o)return"0000000000.000000";var s=Object(El.a)(n,function(e){return e!==a});if(Object(id.S)(o)<=4)return"0000000000.000000";var l=Object(hN.a)(s,function(e){return e<=r});return i&&l.length<=2?"0000000000.000000":l.length===s.length?Object(_f.a)(Object(lN.a)(l,2)):Object(Tu.a)(l)},bN=n("m7fc");var fN=function(e){var t=e.threads,n=e.minimumVisibleTsByThread,a=e.maximumVisibleTsByThread,r=e.firstReadThreadKey,i=e.isDoingGlobalRefresh,o=e.currentUserId,s=e.initialLastReadByThread,l=e.hasMore,c=e.logError,u=void 0===c?d.a:c,p=[],h=[];i&&(p.push("global-loading"),h.push({type:"loading"}));var m=Object(bN.a)(t,function(e){return e.threadKey!==r}).some(function(e){return Object($v.a)(e.messages).some(function(t){return t?t.ts>s[e.threadKey]&&t.user!==o:(u("Missing message in "+e.threadKey),!1)})});if(t.forEach(function(e){var t=e.channelId,o=e.threadTs,l=e.timestamps,c=e.threadKey,u=e.messages,d=e.reachedStart,b=n[c],f=a[c];i||m||c!==r||(p.push("divider-"+c),h.push({type:"divider"}));var _={channelId:t,threadTs:o,threadKey:c},g=l.some(function(e){return e>f});p.push("heading-"+c),h.push(Z()({type:"heading"},_)),p.push("root-"+c),h.push(Z()({type:"root"},_)),(!d||Object(wu.a)(l,function(e){return e!==o&&e<b}))&&(p.push("load_older-"+c),h.push(Z()({type:"load_older",messages:u},_))),l.forEach(function(t){if(t!==o&&!(t<b||t>f)){var n=s&&t>s[e.threadKey];p.push(c+"-"+t),h.push(Z()({type:"reply",ts:t,isNewReply:n},_))}}),g&&(p.push("load_newer-"+c),h.push(Z()({type:"load_newer"},_))),p.push("footer-"+c),h.push(Z()({type:"footer"},_))}),l&&t){var b=Object(Tu.a)(t),f=b&&b.threadKey;p.push("loading_more_threads-"+f),h.push({type:"loading_more_threads"})}return{keys:p,rows:h}};var _N=n("4RH7"),gN=(m.b.string,m.b.string,m.b.array,m.b.number,m.b.bool,m.b.bool,m.b.func,{channelId:void 0,threadTs:void 0,replyUsers:[],replyUsersCount:0,featureReactAllThreads:!1,firstItem:!1,clogLinkClick:d.a}),vN=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clogClick=n.clogClick.bind(n),n}return u()(t,e),o()(t,[{key:"clogClick",value:function(){(0,this.props.clogLinkClick)("CLICK_CHANNEL_NAME")}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.replyUsers,r=e.replyUsersCount,i=e.featureReactAllThreads,o=e.firstItem;if(!i)return null;var s=Object(id.v)(t,n),l=f()("p-threads_view_header",{"p-threads_view_header--first":o});return h.a.createElement("div",{className:l},h.a.createElement(G.a,{href:s,className:"p-threads_view_header__permalink",clogLinkClick:this.clogClick},h.a.createElement(pe.a,{channelId:t,className:"p-threads_view_header__channel_name"})),h.a.createElement(_N.a,{replyUsers:a,replyUsersCount:r,className:"p-threads_view_header__participant_list"}))}}]),t}(p.Component);vN.displayName="Header",vN.defaultProps=gN;var yN=Object(_.b)(function(e,t){var n=t.channelId,a=t.threadTs,r=Object(vo.a)(e,n,a);if(!r)return null;var i=Object(id.T)(r),o=Object(id.U)(r);return r.replies?(i=Object(bo.a)(r.replies,"user"),r.user&&i.push(r.user),o=Object(ny.a)(i).length):r.user&&i.push(r.user),{replyUsers:i,replyUsersCount:o,featureReactAllThreads:Object(y.i)(e,"feature_react_all_threads")}})(vN),kN=(m.b.bool,m.b.bool,m.b.node,{first:!1,last:!1,children:void 0}),ON=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.first,n=e.last,a=f()("p-threads_view__default_background",{"p-threads_view__default_background--first":t,"p-threads_view__default_background--last":n});return h.a.createElement("div",{className:a},this.props.children)}}]),t}(p.PureComponent);ON.displayName="ThreadsDefaultBackground",ON.defaultProps=kN;var jN=ON,CN=new x.b("message_kit"),EN=(m.b.object.isRequired,m.b.string,m.b.oneOf(["light","dense"]),m.b.func,m.b.func,m.b.bool,m.b.bool,m.b.bool,{className:void 0,theme:"light",clogLinkClick:d.a,clogThreadEvent:d.a,focused:!1,renderActionsOffscreen:!1,featureConsolidateContentRendering:m.b.bool}),wN=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"getMessageBody",value:function(e){var t=this.props.featureConsolidateContentRendering;return h.a.createElement(h.a.Fragment,null,h.a.createElement(Hd.a,{msg:e}),"\xa0\xa0",h.a.createElement(Gd.a,{msg:e,relative:!0,clickable:!0},CN.t("Open in channel")),h.a.createElement("br",null),t?h.a.createElement(h.a.Fragment,null,h.a.createElement(Wd.a,{msg:e}),h.a.createElement(Kd.a,{msg:e,blocksContainerContext:Fd.a.all_threads})):this.renderContent(e),h.a.createElement(Ud.b,{msg:e}),h.a.createElement(Bd.a,{msg:e}),h.a.createElement(Vd.a,{msg:e}))}},{key:"getCompactMessageBody",value:function(e){var t=this.props.featureConsolidateContentRendering;return h.a.createElement(mp.a,null,h.a.createElement(Hd.a,{msg:e,className:"p-threads_view_sender--compact"}),"\xa0\xa0",t?h.a.createElement(h.a.Fragment,null,h.a.createElement(Wd.a,{msg:e}),h.a.createElement(Kd.a,{msg:e,blocksContainerContext:Fd.a.all_threads})):this.renderContent(e),h.a.createElement(Ud.b,{msg:e}),h.a.createElement(Bd.a,{msg:e}),h.a.createElement(Vd.a,{msg:e}))}},{key:"renderContent",value:function(e){var t=Fd.a.all_threads;return e.blocks?h.a.createElement(Kd.a,{msg:e,blocksContainerContext:t}):h.a.createElement(Wd.a,{msg:e})}},{key:"render",value:function(){var e=this.props,t=e.msg,n=e.theme,a=e.clogLinkClick,r=e.focused,i=e.renderActionsOffscreen,o=e.clogThreadEvent,s="dense"===n,l=f()("p-threads_view_root","c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className),c=s?h.a.createElement("div",{className:"p-threads_view_compact_timestamp"},h.a.createElement(Gd.a,{msg:t,relative:!0,compact:!0,clickable:!0},CN.t("Open in channel"))):null,u=s?"above":"default",d=s?this.getCompactMessageBody(t):this.getMessageBody(t);return h.a.createElement($d.a,{msg:t},h.a.createElement(jN,{first:!0},h.a.createElement(ep.a,{msg:t,className:l},h.a.createElement(tp.a,{hovered:r},h.a.createElement(np.a,{msg:t,showComment:!0,showShare:!1,showJump:!0,messageContainerType:hu.y.THREADS_VIEW,renderOffscreen:i,position:u,clogLinkClick:a,clogThreadEvent:o},h.a.createElement(lp.a,{msg:t},h.a.createElement(cp.a,{msg:t},h.a.createElement(ap.a,{light:h.a.createElement(qd.a,{msg:t}),compact:c},h.a.createElement(hp,{msg:t},d)))))))))}}]),t}(p.PureComponent);wN.displayName="RootMessage";var SN=wN;wN.defaultProps=EN;var IN=n("qnZ7"),TN=n("0wDQ"),NN=(n("Mzw9"),new x.b("message")),RN=(m.b.object.isRequired,m.b.string,m.b.node,m.b.func.isRequired,m.b.func.isRequired,{className:void 0,children:void 0}),AN=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.resend=n.resend.bind(n),n.cancel=n.cancel.bind(n),n}return u()(t,e),o()(t,[{key:"getText",value:function(){return this.props.msg.isEKMError?NN.t("Your message couldn\u2019t be sent because your admins have disabled sending messages to this channel."):NN.t("Slack couldn\u2019t send this message")}},{key:"resend",value:function(){var e=this.props.msg,t=e.ts,n=e.channel;this.props.resendMessage(n,t)}},{key:"cancel",value:function(){var e=this.props.msg,t=e.ts,n=e.channel;this.props.removeMessageAndTimestamp({channelId:n,ts:t})}},{key:"renderFooter",value:function(){var e=this.props.msg,t=e.showResend,n=e.showCancel,a=e.isEKMError;if(!t&&!n)return null;var r=t&&h.a.createElement(M.a,{className:"c-message_kit__resend__resend",onClick:this.resend},NN.t("Try again")),i=n&&h.a.createElement(M.a,{className:"c-message_kit__resend__cancel",onClick:this.cancel},a?NN.t("Clear"):NN.t("Cancel")),o=r&&i&&h.a.createElement("span",{className:"c-message_kit__resend__separator"},"\xa0|\xa0");return h.a.createElement("div",{className:"c-message_kit__resend__footer"},h.a.createElement("div",{className:"c-message_kit__resend__footer__border"}),h.a.createElement("div",null,this.getText(),"\u2002",r,o,i))}},{key:"render",value:function(){var e=this.props.msg,t=e.showResend,n=e.showCancel,a=Object(id.ub)(this.props.msg);if(!t&&!n&&!a)return this.props.children;var r=f()("c-message_kit__resend",this.props.className,{"c-message_kit__resend--with_buttons":t||n,"c-message_kit__resend--unprocessed":a});return h.a.createElement("div",{className:r},this.props.children,this.renderFooter())}}]),t}(p.PureComponent);AN.displayName="MessageResend",AN.defaultProps=RN;var PN={resendMessage:function(){return IN.a.apply(void 0,arguments)},removeMessageAndTimestamp:function(){return TN.a.apply(void 0,arguments)}},MN=Object(_.b)(null,PN)(AN),DN=new x.b("threads"),xN=(m.b.object.isRequired,m.b.string,m.b.bool,m.b.func,m.b.bool,m.b.bool,m.b.bool,m.b.oneOf(["light","dense"]),m.b.func,m.b.bool,{className:void 0,highlight:void 0,clearHighlight:void 0,focused:!1,renderActionsOffscreen:!1,isNewReply:!1,theme:"light",clogThreadEvent:d.a,featureConsolidateContentRendering:!1}),LN=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"getMessageBody",value:function(e){var t=this.props.featureConsolidateContentRendering;return h.a.createElement(h.a.Fragment,null,h.a.createElement(Hd.a,{msg:e}),"\xa0\xa0",h.a.createElement(Gd.a,{msg:e,relative:!0,clickable:!0},DN.t("Open in sidebar",{fallbackHash:"12680843c28c99d16fef1b02d2c6bbce0760c86b",fallbackHashNs:"templates_helpers"})),h.a.createElement("br",null),h.a.createElement(MN,{msg:e},t?h.a.createElement(h.a.Fragment,null,h.a.createElement(Wd.a,{msg:e}),h.a.createElement(Kd.a,{msg:e,blocksContainerContext:Fd.a.all_threads})):this.renderContent(e),h.a.createElement(Ud.b,{msg:e}),h.a.createElement(Bd.a,{msg:e})),h.a.createElement(Vd.a,{msg:e}))}},{key:"getCompactMessageBody",value:function(e){var t=this.props.featureConsolidateContentRendering;return h.a.createElement(mp.a,null,h.a.createElement(Hd.a,{msg:e,className:"p-threads_view_sender--compact"}),"\xa0\xa0",h.a.createElement(MN,{msg:e},t?h.a.createElement(h.a.Fragment,null,h.a.createElement(Wd.a,{msg:e}),h.a.createElement(Kd.a,{msg:e,blocksContainerContext:Fd.a.all_threads})):this.renderContent(e),h.a.createElement(Ud.b,{msg:e}),h.a.createElement(Bd.a,{msg:e})),h.a.createElement(Vd.a,{msg:e}))}},{key:"renderContent",value:function(e){var t=Fd.a.all_threads;return e.blocks?h.a.createElement(Kd.a,{msg:e,blocksContainerContext:t}):h.a.createElement(Wd.a,{msg:e})}},{key:"render",value:function(){var e=this.props,t=e.msg,n=e.highlight,a=e.clearHighlight,r=e.focused,i=e.renderActionsOffscreen,o=e.isNewReply,s=e.theme,l=e.clogThreadEvent,c="dense"===s,u=f()("c-message_kit__message","c-message_kit__thread_message","p-threads_view_reply",{"p-threads_view_reply--new_reply":o},this.props.className),d=c?h.a.createElement("div",{className:"p-threads_view_compact_timestamp"},h.a.createElement(Gd.a,{msg:t,relative:!0,compact:!0,clickable:!0},DN.t("Open in sidebar",{fallbackHash:"12680843c28c99d16fef1b02d2c6bbce0760c86b",fallbackHashNs:"templates_helpers"}))):null,p=c?"above":"default",m=c?this.getCompactMessageBody(t):this.getMessageBody(t);return h.a.createElement($d.a,{msg:t},h.a.createElement(jN,null,h.a.createElement(ep.a,{msg:t,className:u,highlight:n,clearHighlight:a},h.a.createElement(tp.a,{hovered:r},h.a.createElement(np.a,{msg:t,showComment:!1,showShare:!1,messageContainerType:hu.y.THREADS_FLEXPANE,renderOffscreen:i,position:p,clogThreadEvent:l},h.a.createElement(cp.a,{msg:t,showBroadcast:!0},h.a.createElement(ap.a,{light:h.a.createElement(qd.a,{msg:t}),compact:d},h.a.createElement(hp,{msg:t},m))))))))}}]),t}(p.PureComponent);LN.displayName="ReplyMessage";var FN=LN;LN.defaultProps=xN;var BN=n("8QLk"),qN=new x.b("threads"),UN=(m.b.string,m.b.string,m.b.string,m.b.object,m.b.object,m.b.func,m.b.bool,m.b.oneOf(["light","dense"]),{channelId:void 0,threadTs:void 0,minimumVisibleTs:void 0,rootMsg:void 0,messages:{},loadOlderReplies:d.a,featureReactAllThreads:!1,theme:"light"}),HN=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoading:!1},n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this,t=this.props,n=t.channelId,a=t.threadTs,r=t.loadOlderReplies;!this.state.isLoading&&r&&(this.setState(function(){return{isLoading:!0}}),r(n,a).then(function(){e.setState(function(){return{isLoading:!1}})}))}},{key:"render",value:function(){var e=this.props,t=e.minimumVisibleTs,n=e.rootMsg,a=e.messages,r=e.featureReactAllThreads,i=e.theme;if(!r)return null;var o="dense"===i,s=[],l=Object(id.Q)(n),c=Object(id.D)(n);Object(jd.a)(a,function(e,t){!Object(id.bb)(e)&&!Object(id.pb)(e)&&t!==l&&t<=c&&s.push(t)});var u=Object(id.S)(n)-s.length,d=s.filter(function(e){return e<t}),p=Object(BN.a)(u+d.length,0,100);if(!p)return null;var m=f()("p_threads_view_load_older_button",{"p_threads_view_load_older_button--with-gutter":o});return h.a.createElement(jN,null,h.a.createElement("div",{className:m},h.a.createElement(G.a,{onClick:this.onClick},qN.t("Show {showPrevCount, plural, =1 {# more reply} other {# more replies}}",{showPrevCount:p})),this.state.isLoading?h.a.createElement(Yr.a,{size:"medium",className:"margin_left_25",inline:!0}):null))}}]),t}(p.Component);HN.displayName="LoadOlderButton",HN.defaultProps=UN;var GN=Object(_.b)(function(e,t){var n=t.channelId,a=t.threadTs,r=t.messages;return{rootMsg:Object(vo.a)(e,n,a),messages:r,featureReactAllThreads:Object(y.i)(e,"feature_react_all_threads")}})(HN),WN=new x.b("threads"),KN=(m.b.string,m.b.string,m.b.string,m.b.arrayOf(m.b.string),m.b.func,m.b.bool,m.b.oneOf(["light","dense"]),{channelId:void 0,threadTs:void 0,maximumVisibleTs:"0000000000.000000",timestamps:[],loadNewerReplies:d.a,featureReactAllThreads:!1,theme:"light"}),VN=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this.props,t=e.channelId,n=e.threadTs;(0,e.loadNewerReplies)(t,n)}},{key:"render",value:function(){var e=this.props,t=e.maximumVisibleTs,n=e.timestamps,a=e.featureReactAllThreads,r=e.theme;if(!a)return null;var i="dense"===r,o=n.filter(function(e){return e>t});if(!o.length)return null;var s=WN.t("{count, plural, =1 {# new reply} other {# new replies}}",{count:o.length}),l=f()("p_threads_view_load_newer_button",{"p_threads_view_load_newer_button--with-gutter":i});return h.a.createElement(jN,null,h.a.createElement("div",{className:l},h.a.createElement("span",{className:"p_threads_view_load_newer_button__blue_dot"},"\u2022"),h.a.createElement(G.a,{onClick:this.onClick},s)))}}]),t}(p.Component);VN.displayName="LoadNewerButton",VN.defaultProps=KN;var zN=Object(_.b)(function(e,t){var n=t.channelId,a=t.threadTs,r=Object(Ho.c)(n,a);return{timestamps:(Object(go.h)(e,r)||{timestamps:[]}).timestamps,featureReactAllThreads:Object(y.i)(e,"feature_react_all_threads")}})(VN),YN=n("WFc3"),QN=(n("t5GV"),new x.b("threads")),JN=(m.b.string.isRequired,m.b.string.isRequired,m.b.string,m.b.func,m.b.func,m.b.func,m.b.string,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.number,m.b.func,m.b.bool.isRequired,{channelType:"channel",prepareAndSendMessage:function(){return Promise.resolve()},legacySendSlashCommand:d.a,editLastMessageInChannel:d.a,viewContext:void 0,useSendButton:!1,focusInputOnMount:!1,featureReactThreads:!0,featureSonicInputs:!0,featureWysiwygComposer:!1,replyCount:0,clogThreadEvent:d.a}),XN=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.inputRef=h.a.createRef(),n.reactionPopoverRef=h.a.createRef(),n.state={hasEnteredText:!1,hasFocus:!1,broadcast:!1,broadcastControlsHeight:0},Object(T.a)(n,["onBroadcastChange","onBroadcastControlsMouseDown","onTextChange","onFocus","onBlur","sendMessage","editLastMessage","onExpandAnimationTick","onExpandAnimationEnd","handleDraftRestore"]),n.getAdditionalDraftContent=Object(Ob.a)(function(e){return{broadcast:e}}),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.channelId,a=t.threadTs,r=t.viewContext;if(!Object(Me.a)()&&this.inputRef.current){var i=Object(cb.c)(n,a);i&&this.inputRef.current.getWrappedInstance().value(i)}Object(vf.b)({viewContext:r,channelId:n,threadTs:a,functions:{clear:function(){var t=e.getInputRef();t&&t.clear()},isEmpty:function(){var t=e.getInputRef();return t?t.isEmpty():null},prependContents:function(t){var n=e.getInputRef();n&&n.prependContents(t)},setContents:function(t){var n=e.getInputRef();n&&n.setContents(t)},setText:function(t){var n=e.getInputRef();n&&n.value(t)},getText:function(){var t=e.getInputRef();return t?t.value():null},getDisplayValue:function(){var t=e.getInputRef();return t?t.displayValue():null},setBroadcast:function(t){return e.setState(function(){return{broadcast:t}})},getBroadcast:function(){return e.state.broadcast},focus:function(){var t=e.getInputRef();t&&t.setCursorAtEnd()},clearHistory:function(){var t=e.getInputRef();t&&t.clearHistory()},setCursorAtEnd:function(){var t=e.getInputRef();t&&t.setCursorAtEnd()},getContentsForCurrentSelection:function(){var t=e.getInputRef();if(!t)return null;var n=t.getSelection();return n?t.getContentsForRange(n.index,n.length):null},openReactionPopoverForLastMessage:function(){e.reactionPopoverRef.current&&e.reactionPopoverRef.current.getWrappedInstance().startReactionPopoverForLastMessage()}}})}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.hasFocus||this.state.hasEnteredText,a=t.hasFocus||t.hasEnteredText;n&&!a?this.startExpandAnimation(0,40):!n&&a&&this.startExpandAnimation(40,0)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.viewContext;Object(vf.c)({viewContext:a,channelId:t,threadTs:n}),this.expandAnimation&&this.expandAnimation.cancel()}},{key:"onBroadcastChange",value:function(e){var t=e.target.checked;this.setState(function(){return{broadcast:!!t}}),this.state.hasEnteredText||(this.inputRef.current.getWrappedInstance().focus(),this.preventUnfocus=!1)}},{key:"onBroadcastControlsMouseDown",value:function(e){e.preventDefault(),this.state.hasEnteredText||(this.preventUnfocus=!0)}},{key:"onTextChange",value:function(e){this.setState(function(){return{hasEnteredText:!!e}});var t=this.props,n=t.channelId,a=t.threadTs;Object(Me.a)()||Object(cb.g)(n,a,e)}},{key:"onFocus",value:function(){this.setState(function(){return{hasFocus:!0}})}},{key:"onBlur",value:function(){this.preventUnfocus?this.preventUnfocus=!1:this.setState(function(){return{hasFocus:!1}})}},{key:"onExpandAnimationTick",value:function(e){var t=e.value,n=e.nextTick;this.setState(function(){return{broadcastControlsHeight:t}},n)}},{key:"onExpandAnimationEnd",value:function(){this.expandAnimation=null}},{key:"getInputRef",value:function(){return this.inputRef.current.getWrappedInstance?this.inputRef.current.getWrappedInstance():this.inputRef.current}},{key:"handleDraftRestore",value:function(e){this.setState(function(t){var n=t.broadcastControlsHeight;return{broadcast:!!e.broadcast,broadcastControlsHeight:e.ops?40:n}})}},{key:"startExpandAnimation",value:function(e,t){this.state.broadcastControlsHeight!==t&&(this.expandAnimation&&this.expandAnimation.cancel(),this.expandAnimation=Object($f.a)({fromValue:e,toValue:t,duration:150,easing:"easeInOutQuad",onTick:this.onExpandAnimationTick,onComplete:this.onExpandAnimationEnd}))}},{key:"editLastMessage",value:function(){this.props.editLastMessageInChannel({channelId:this.props.channelId,threadTs:this.props.threadTs,viewContext:this.props.viewContext})}},{key:"sendMessage",value:function(){var e=this,t=this.props,n=t.channelId,a=t.threadTs,r=t.replyCount,i=t.clogThreadEvent,o=t.featureSonicInputs,s=t.featureWysiwygComposer,l=this.state.broadcast;this.setState(function(){return{broadcast:!1}});var c=this.getInputRef(),u=c.value();if(!o&&Object(YN.a)(u))return c.clear(),this.props.legacySendSlashCommand(n,a,u),Promise.resolve();if(!vT(c.getContents(),{featureWysiwygComposer:s}))return null;i({event:l?"THREADS_REPLY_BROADCAST_CLICKED":"THREADS_REPLY",metadata:{num_msg_in_thread:r+1}});var d=c.getContents();return c.clear(),c.focus(),this.props.prepareAndSendMessage({channelId:n,text:u,delta:s?new dw.a(d.contents):null,replyToTs:a,shouldBroadcast:l}).then(function(){var t=e.getInputRef();t&&t.clearHistory()}).catch(function(){c.isEmpty()&&c.setContents(d)})}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.viewContext,r=e.channelType,i=e.useSendButton,o=e.focusInputOnMount,s=e.userCanPost,l=e.featureReactThreads,c=e.featureSonicInputs,u=this.state,d=u.broadcast,p=u.hasEnteredText,m=u.hasFocus,b=u.broadcastControlsHeight;if(!l)return null;var _=f()("p-threads_footer__broadcast_controls",{"p-threads_footer__broadcast_controls--visible":p||m}),g={height:b},v="";v="mpim"===r?QN.t("Also send to the group"):"im"===r?QN.t("Also send as direct message"):QN.rt("Also send to <span></span>",null,function(){return h.a.createElement(pe.a,{channelId:t,inline:!0,className:"p-threads_footer__broadcast_channel"})});var y="";y="mpim"===r||"im"===r?QN.t("Choose this if you\u2019d like your reply to post in the main conversation, too"):QN.t("Choose this if you\u2019d like your reply to post in the channel, too");var k="p-thread_footer__broadcast_checkbox--"+Object(Ho.c)(t,n)+"--"+a,O=f()("p-threads_footer__input",{"p-threads_footer__input--legacy":!c}),j=h.a.createElement(oT,{className:O,channelId:t,threadTs:n,viewContext:a,placeholder:QN.t("Reply\u2026",{fallbackHash:"fefcf598b8ea8332c1557b2ee245e83e5c8b0aef"}),enableEmojiButton:!0,enableBroadcastKeywords:!1,onTextChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,ref:this.inputRef,useLegacyCreate:!c,useLegacyDrafts:!Object(Me.a)(),maxLines:8,useSendButton:i,focusOnMount:o,maxLength:hu.u,onDraftRestore:this.handleDraftRestore,additionalDraftContent:this.getAdditionalDraftContent(d)});return Object(Me.a)()&&(j=h.a.createElement(bT,{ref:this.reactionPopoverRef,channelId:t,threadTs:n},j)),h.a.createElement("div",{className:"p-threads_footer__input_container","data-qa":"reply_container"},j,h.a.createElement("div",{className:_,style:g},h.a.createElement("div",{className:"p-threads_footer__broadcast_controls_inner"},s&&h.a.createElement(h.a.Fragment,null,h.a.createElement($l.a,{className:"p-threads_footer__broadcast_label",text:v,htmlFor:k,type:"inline",onMouseDown:this.onBroadcastControlsMouseDown},h.a.createElement(Xl.a,{className:"p-threads_footer__broadcast_checkbox",id:k,checked:d,onChange:this.onBroadcastChange})),h.a.createElement(le.c,{tip:y},h.a.createElement(se.b,{className:"p-threads_footer__info_tooltip",type:"question_circle",inline:!0,size:"inherit"}))),h.a.createElement(iT,{isDisabled:!p,className:"p-threads_footer__send_button",sendMessage:this.sendMessage,buttonSize:"small",tabIndex:0}))))}}]),t}(p.Component);XN.displayName="InputContainer",XN.defaultProps=JN;var ZN={prepareAndSendMessage:function(){return hw.a.apply(void 0,arguments)},editLastMessageInChannel:function(){return bw.apply(void 0,arguments)},legacySendSlashCommand:function(e,t,n){return function(a,r){var i=r(),o=Object(re.d)(i,e),s=Object(vo.a)(i,e,t);o&&s&&Object(fu.k)(o,n,s)}}},$N=Object(_.b)(function(e,t){var n=t.channelId,a=t.threadTs,r=Object(re.d)(e,n),i=Object(vo.a)(e,n,a);return{channelType:Object(he.v)(r),featureReactThreads:Object(y.i)(e,"feature_react_threads"),featureSonicInputs:Object(y.i)(e,"feature_sonic_inputs"),featureWysiwygComposer:Object(dS.a)(e),useSendButton:Object(ue.h)(e,"msg_input_send_btn"),replyCount:Object(id.S)(i),userCanPost:Object(It.q)(e,n)}},ZN)(XN),eR=(n("fxy3"),new x.b("threads")),tR=(m.b.string.isRequired,m.b.string.isRequired,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.func,m.b.bool,m.b.bool,m.b.bool,m.b.string,m.b.func,{unknown:!1,archived:!1,frozen:!1,imWithDeletedMember:!1,cannotReply:!1,nonMember:!1,canJoin:!1,focusInputOnMount:!0,joinConversationApi:d.a,featureReactThreads:!1,featureAnnounceOnly:!1,featureEscDisconnectV2Client:!1,viewContext:void 0,clogThreadEvent:d.a}),nR=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.joinChannel=n.joinChannel.bind(n),n}return u()(t,e),o()(t,[{key:"joinChannel",value:function(){var e=this.props.channelId;this.props.joinConversationApi({channelId:e})}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.unknown,r=e.archived,i=e.frozen,o=e.imWithDeletedMember,s=e.cannotReply,l=e.nonMember,c=e.canJoin,u=e.focusInputOnMount,d=e.featureReactThreads,p=e.featureAnnounceOnly,m=e.featureEscDisconnectV2Client,b=e.viewContext,f=e.clogThreadEvent;if(!d)return null;if(a||o)return null;if(r||i)return h.a.createElement(la.a,{level:"default",type:"inline",align:"center",className:"p-threads_footer_alert p-threads_footer_alert--archived"},m&&i?eR.t("This channel is no longer shared with your organization."):eR.t("You are viewing a thread from an archived channel"));if(p&&s){var _=eR.t("Posting to this thread has been restricted to select members");return h.a.createElement(UT,{tooltip:_,featureAnnounceOnly:p})}return s?h.a.createElement(la.a,{level:"default",type:"inline",align:"center",className:"p-threads_footer_alert p-threads_footer_alert--no_reply"},eR.rt("Your Workspace Owners have limited who can post to <ChannelName></ChannelName>",null,function(){return h.a.createElement(pe.a,{channelId:t,inline:!0,iconProps:{inherit:!0}})})):l?c?h.a.createElement("div",{className:"p-threads_footer_join_container"},h.a.createElement(Re.d,{type:"primary",size:"medium",onClick:this.joinChannel},eR.t("Join Channel")),!p&&h.a.createElement("p",{className:"p-threads_footer_join_label"},eR.rt("You\u2019ll need to join <ChannelName></ChannelName> to reply",null,function(){return h.a.createElement(pe.a,{channelId:t,inline:!0,iconProps:{inherit:!0}})}))):null:h.a.createElement($N,{channelId:t,threadTs:n,key:Object(Ho.c)(t,n),focusInputOnMount:u,viewContext:b,clogThreadEvent:f})}}]),t}(p.Component);nR.displayName="ThreadFooter",nR.defaultProps=tR;var aR=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n),r=Object(y.i)(e,"feature_esc_disconnect_v2_client");return{unknown:Object(he.Kb)(a),archived:Object(he.V)(a),frozen:r&&Object(he.bb)(a),imWithDeletedMember:Object(he.jb)(e,a),cannotReply:!Object(he.l)(e,a),nonMember:Object(he.yb)(a)&&!Object(he.kb)(a),canJoin:Object(It.g)(e,n),featureEscDisconnectV2Client:r,featureReactThreads:Object(y.i)(e,"feature_react_threads"),featureAnnounceOnly:Object(y.i)(e,"feature_announce_only")}},{joinConversationApi:Qn.joinConversationApi})(nR);function rR(e){return h.a.createElement(jN,{last:!0},h.a.createElement("div",{className:"p-threads_view__footer"},h.a.createElement(aR,e)))}rR.displayName="Footer";var iR=rR,oR=n("81nI"),sR=new x.b("threads");m.b.bool;function lR(e){if(!e.featureReactAllThreads)return null;var t=Object(pw.a)(),n=Object(oR.b)({zdLocale:t,articleId:"115000769927"});return h.a.createElement("div",{className:"p-threads_view_empty"},h.a.createElement("div",{className:"p-threads_view_empty__contents"},h.a.createElement("div",{className:"p-threads_view_empty__emoji"},h.a.createElement(Mn.b,{text:":seedling:",emojiSize:Mn.a.LARGE})),h.a.createElement("p",{className:"p-threads_view_empty__header"},sR.t("Tend to your threads")),h.a.createElement("p",{className:"p-threads_view_empty__message"},sR.t("Threads you\u2019re involved in will be collected right here.")," ",h.a.createElement("br",null),h.a.createElement(G.a,{href:n},sR.t("Learn about threads")))))}lR.displayName="ThreadsEmptyState",lR.defaultProps={featureReactAllThreads:!0};var cR=Object(_.b)(function(e){return{featureReactAllThreads:Object(y.i)(e,"feature_react_all_threads")}})(lR),uR=(m.b.string,m.b.string,m.b.bool,{className:void 0,label:void 0,showSpinner:!1}),dR=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.label,a=e.showSpinner;return h.a.createElement("div",{className:t},h.a.createElement("div",{className:"p-threads_view__divider_line"}),h.a.createElement("div",{className:"p-threads_view__divider_label"},a&&h.a.createElement(Yr.a,{color:"blue",size:"medium",className:"p-threads_view__divider_spinner"}),n))}}]),t}(p.PureComponent);dR.displayName="Divider";var pR=dR;dR.defaultProps=uR;var hR=new x.b("threads"),mR=(m.b.bool,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props.slowLoadingMore;return h.a.createElement("div",{className:"p-threads_view__loading_more_threads"},e?hR.t("Still loading... sorry for the long wait!"):hR.t("Loading more messages...",{fallbackHash:"49f93cf64ea9ce3b4fee3f46ee40103e4840b333",fallbackHashNs:"unread"}))}}]),t}(p.PureComponent));mR.displayName="LoadingMoreThreadsIndicator";var bR=mR;mR.defaultProps={slowLoadingMore:!1};var fR=new x.b("threads"),_R=(m.b.number,m.b.bool,m.b.func,m.b.bool,{totalNewThreads:0,userHasUnreadThreads:!1,onClick:d.a,featureReactAllThreads:!1}),gR=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.onClick()}},{key:"render",value:function(){var e=this.props,t=e.totalNewThreads,n=e.userHasUnreadThreads;if(!e.featureReactAllThreads)return null;if(!t)return null;if(!n)return null;var a=fR.rt('{totalNewThreads,plural,=1{{totalNewThreads} new thread}other{{totalNewThreads} new threads}} <span className="p-new_threads_banner__cta">Click to refresh</span>',{totalNewThreads:t});return h.a.createElement(Re.c,{className:"p-new_threads_banner p-message_pane__banner",onClick:this.onClick},a)}}]),t}(p.Component);gR.displayName="NewThreadsBanner",gR.defaultProps=_R;var vR=Object(_.b)(function(e){return{totalNewThreads:Object(yi.i)(e),userHasUnreadThreads:Object(y.i)(e,"feature_incremental_unread_counts")?Object(zi.j)(e):Object(Vi.c)(e),featureReactAllThreads:Object(y.i)(e,"feature_react_all_threads")}})(gR),yR=(n("NPry"),new x.b("threads")),kR=ld(SN),OR=ld(FN),jR={threadKey:m.b.string,channelId:m.b.string,threadTs:m.b.string,reachedStart:m.b.bool,timestamps:m.b.arrayOf(m.b.string),messages:m.b.objectOf(m.b.object),lastRead:m.b.string,subscribed:m.b.bool,maxMarkableTs:m.b.string},CR=(m.b.arrayOf(m.b.shape(jR)),m.b.bool,m.b.bool,m.b.string,m.b.string,m.b.string,m.b.func,m.b.func,m.b.func,m.b.shape({error:m.b.func,info:m.b.func}),m.b.func,m.b.func,m.b.func,m.b.bool,m.b.oneOf(["light","dense"]),m.b.func,m.b.func,m.b.object,m.b.number,m.b.func,m.b.string,m.b.func,m.b.number,m.b.bool,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.func,{threads:void 0,threadsPresent:!1,hasMore:!0,refreshId:void 0,cursorTs:void 0,currentUserId:void 0,refreshThreads:d.a,loadMoreThreads:d.a,truncateThreads:d.a,logger:{error:d.a,info:d.a},requestReplies:d.a,markThread:d.a,markAllThreads:d.a,featureAriaApplicationMode:!1,theme:"light",makeMessageSummary:d.a,clearTotalNewThreads:d.a,clogger:{track:d.a},allThreadsRefreshCount:void 0,showThreadOrRefresh:d.a,focusRequestedThreadKey:void 0,setFocusRequestedThreadKey:d.a,totalUnreadReplies:void 0,featureOfflineMode:!1,isOffline:!1,userAttentionIsOnChat:!1,removeFromSectionNavigation:d.a,addToSectionNavigation:d.a,setInitialActiveSection:d.a}),ER=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["fetchAround","fetchPre","fetchPost","renderRow","loadOlderReplies","loadNewerReplies","tryAgain","getAriaLabelForRow","isFocusableItem","onKeyDown","reloadThreads","clogThreadEvent","clogThreadCloseEvent","onFocusEnter","onFocusLeave","onArrowKeyRight","shouldIgnoreArrowKeys","logError","logInfo","focus"]),n.state={minimumVisibleTsByThread:{},maximumVisibleTsByThread:{},initialLastReadByThread:{},currentRefreshId:void 0,firstReadThreadKey:void 0,threadKeysOrdered:[],isDoingGlobalRefresh:!0,slowLoadingMore:!1,errored:!1,hasKeyboardFocus:!1},n.pendingPromises=[],n.threadsEventSeqId=0,n.initializedTime=Date.now(),n.clogThreadCloseHasBeenCalled=!1,n.listRef=h.a.createRef(),n}return u()(t,e),o()(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.threads,a=e.currentUserId,r=e.refreshId,i=e.logger,o=t.minimumVisibleTsByThread,s=t.maximumVisibleTsByThread,l=t.initialLastReadByThread,c=t.firstReadThreadKey,u=t.threadKeysOrdered;if(r!==t.currentRefreshId&&(o={},s={},l={},c=null,u=[]),Object(sa.a)(u)){var d=function(e){var t=Object(El.a)(e,"subscribed");return Object(qp.a)(t,function(e){return(e.maxMarkableTs>e.lastRead?1:0)+"-"+e.maxMarkableTs}).reverse()}(n);if(u=Object(bo.a)(d,"threadKey"),t.currentRefreshId){var p=Object(bo.a)(n,"threadKey");Object(Ny.a)(u,p)||i.error("THREADS-VIEW","Thread order different after refreshing: "+u+" - "+p)}}if(!c){var h=Object(fb.a)(n,"threadKey");c=Object(Iu.a)(u,function(e){return h[e].maxMarkableTs<=h[e].lastRead})}var m={};n.forEach(function(e){if(!o[e.threadKey]){var t=mN(e);m[e.threadKey]=t}});var b={};n.forEach(function(e){var t=s[e.threadKey];if(t){e.messages[t]||(t=Object(bf.a)(e.timestamps,function(e){return e<t}),b[e.threadKey]=t);var n=Object(El.a)(e.timestamps,function(e){return e>t}),r=Object(wu.a)(n,function(t){var n=e.messages[t];return n&&n.user===a}),i=Object(wu.a)(n,function(t){var n=e.messages[t];return Object(id.bb)(n)});if(!r&&!i)return}var o=pN(e);b[e.threadKey]=o});var f={};return n.forEach(function(e){l[e.threadKey]||(f[e.threadKey]=e.lastRead)}),Object(sa.a)(m)&&Object(sa.a)(b)&&Object(sa.a)(f)&&r===t.currentRefreshId&&c===t.firstReadThreadKey&&(u===t.threadKeysOrdered||Object(Ny.a)(u,t.threadKeysOrdered))?null:Z()({},t,{currentRefreshId:r,firstReadThreadKey:c,threadKeysOrdered:u,minimumVisibleTsByThread:Z()({},o,m),maximumVisibleTsByThread:Z()({},s,b),initialLastReadByThread:Z()({},l,f)})}}]),o()(t,[{key:"componentDidMount",value:function(){this.logInfo("mounting"),this.clogThreadEvent({event:"THREADS_VIEW_OPEN"}),this.loadThreads()}},{key:"shouldComponentUpdate",value:function(e,t){if(!Object(bb.a)(this.state,t))return!0;var n=this.props,a=n.threads,r=Be()(n,["threads"]),i=e.threads,o=Be()(e,["threads"]);if(!Object(bb.a)(r,o))return!0;return!Object(bb.a)(a,i,3)}},{key:"componentDidUpdate",value:function(e){!e.userAttentionIsOnChat&&this.props.userAttentionIsOnChat&&this.props.addToSectionNavigation(),!this.props.userAttentionIsOnChat&&e.userAttentionIsOnChat&&this.props.removeFromSectionNavigation(),e.allThreadsRefreshCount<this.props.allThreadsRefreshCount&&!1===this.loading&&this.reloadThreads(),e.refreshId!==this.props.refreshId&&Object(Ja.a)(this.nextScrollTop)&&(this.listRef.current.scrollToOffset(this.nextScrollTop),this.nextScrollTop=null)}},{key:"componentWillUnmount",value:function(){this.logInfo("unmounting"),this.clogThreadCloseEvent("OTHER"),this.pendingPromises.forEach(function(e){return e.cancel()}),this.props.truncateThreads()}},{key:"onFocusEnter",value:function(e){var t=this;this.setState(function(){return{hasKeyboardFocus:e.isKeyboardFocus}},function(){var e=t.props.focusRequestedThreadKey,n=t.listRef.current;if(n&&e){var a=n.getActiveItem(),r=t.threadKeyForListKey(a);e&&r===e&&(t.logInfo("Focused "+e),t.props.setFocusRequestedThreadKey(null))}})}},{key:"onFocusLeave",value:function(){this.setState(function(){return{hasKeyboardFocus:!1}})}},{key:"onKeyDown",value:function(e){var t=this;if(!Object(_u.a)(document.activeElement)&&Object(MT.a)(e)){var n=this.getKeyboardFocusedThreadKey();if(n){var a=Object(Ho.a)(n),r=a.channelId,i=a.threadTs,o=Object(vf.a)({viewContext:hu.y.THREADS_VIEW,channelId:r,threadTs:i});if(o){var s=function(){t.blur(),o.focus()};Object(pw.c)()?setTimeout(s,0):s()}}}}},{key:"onArrowKeyRight",value:function(){var e=this.getKeyboardFocusedThreadKey(),t=Object(Ho.a)(e),n=t.channelId,a=t.threadTs;n&&a&&(this.props.showThreadOrRefresh({channelId:n,threadTs:a,requestFocus:!0}),this.blur())}},{key:"getKeyboardFocusedThreadKey",value:function(){var e=this.listRef.current;if(!e)return null;var t=e.getInitialActiveItem();return this.threadKeyForListKey(t)}},{key:"getAriaLabelForRow",value:function(e){if(!this.props.makeMessageSummary)return null;var t=this.rows[e];if(!t||!t.type)return null;if("root"!==t.type&&"reply"!==t.type)return null;var n="root"===t.type?t.threadTs:t.ts;return this.props.makeMessageSummary({channelId:t.channelId,ts:n,hasFocus:this.state.hasKeyboardFocus,day:{ts:n,isFirstDay:!1,isLastDay:!1}})}},{key:"shouldIgnoreArrowKeys",value:function(e){return!!Object(_u.a)(e.target)||!this.state.hasKeyboardFocus}},{key:"threadKeyForListKey",value:function(e){if(!e)return null;var t=this.keys.indexOf(e),n=this.rows[t];return n?n.threadKey:null}},{key:"focus",value:function(){var e=this.listRef.current;e&&e.focus()}},{key:"blur",value:function(){var e=this.listRef.current;e&&e.blur()}},{key:"isFocusableItem",value:function(e){var t=e.index,n=this.rows[t];if(!n)return!1;return Object(Ei.a)(["root","reply","heading","load_older","load_newer"],n.type)}},{key:"clogThreadCloseEvent",value:function(e){if(!this.clogThreadCloseHasBeenCalled){var t={view_session_elapsed_time:Date.now()-this.initializedTime,view_session_index:this.threadsEventSeqId,num_threads_loaded:this.props.threads.length,view_exit_event:e};this.clogThreadEvent({event:"THREADS_VIEW_CLOSE",metadata:t}),this.clogThreadCloseHasBeenCalled=!0}}},{key:"incrementTrackingSeqId",value:function(){this.threadsEventSeqId+=1}},{key:"clogThreadEvent",value:function(e){var t=e.event,n=e.metadata;this.props.clogger.track(t,Z()({is_threads_view:1,is_flexpane:0,view_session_index:this.threadsEventSeqId},n)),this.incrementTrackingSeqId()}},{key:"componentDidCatch",value:function(e){this.setState(function(){return{errored:!0}}),this.logError("Threads view componentDidCatch"),this.props.logger.error("THREADS-VIEW",e,"threads_view_did_catch")}},{key:"loadThreads",value:function(){var e=this;if(this.loading&&this.logError("Unexpectedly already loading"),this.props.refreshThreads){this.loading=!0;var t=this.props.refreshThreads({limit:8,refreshId:"threads-view-refresh-"+Date.now()}).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).maxTs;e.listRef&&e.listRef.current&&(e.nextScrollTop=e.listRef.current.getScrollTop()),t?(e.logInfo("marking all: "+t),e.props.markAllThreads({maxTs:t})):e.logInfo("no threads to mark"),e.setState(function(){return{isDoingGlobalRefresh:!1,errored:!1}})}).catch(function(t){e.setState(function(){return{errored:!0}}),e.logError("refreshThreads caught error"),e.props.logger.error("THREADS-VIEW",t,"threads_view_loading_error")}).finally(function(){e.loading=!1,Object(_b.a)(e.pendingPromises,t)});this.pendingPromises.push(t)}}},{key:"reloadThreads",value:function(){var e=this;this.logInfo("Reloading threads"),this.setState(function(){return{currentRefreshId:null}},function(){e.listRef&&e.listRef.current&&e.listRef.current.scrollToOffset(0),e.props.clearTotalNewThreads(),e.loadThreads()})}},{key:"tryAgain",value:function(){var e=this;this.setState(function(e){return Z()({},e,{errored:!1})},function(){return e.loadThreads()})}},{key:"loadOlderReplies",value:function(e,t){var n=this,a=Object(Ho.c)(e,t),r=Object(Iu.a)(this.props.threads,{threadKey:a});if(!r)return this.logError("Could not find "+a+" in loadOlderReplies"),Promise.resolve();this.logInfo("Loading older replies in "+a);var i=r.timestamps,o=this.state.minimumVisibleTsByThread[r.threadKey],s=Object(El.a)(i,function(e){return e<o&&e!==t});if(s.length>=100)return this.setState(function(e){return Z()({},e,{minimumVisibleTsByThread:Z()({},e.minimumVisibleTsByThread,xl()({},a,Object(_f.a)(Object(lN.a)(s,100))))})}),Promise.resolve();if(r.reachedStart)return this.setState(function(e){return Z()({},e,{minimumVisibleTsByThread:Z()({},e.minimumVisibleTsByThread,xl()({},a,"0000000000.000000"))})}),Promise.resolve();var l=this.props.requestReplies({channelId:e,threadTs:t,latest:Object(_f.a)(i),limit:100}).then(function(e){var t=e.msgs,r=Object(_f.a)(Object(lN.a)(t,100-s.length));n.setState(function(e){return Z()({},e,{minimumVisibleTsByThread:Z()({},e.minimumVisibleTsByThread,xl()({},a,r.ts))})})}).finally(function(){Object(_b.a)(n.pendingPromises,l)});return this.pendingPromises.push(l),l}},{key:"loadNewerReplies",value:function(e,t){var n=this,a=Object(Ho.c)(e,t),r=Object(Iu.a)(this.props.threads,{threadKey:a});r?this.setState(function(e){return Z()({},e,{maximumVisibleTsByThread:Z()({},e.maximumVisibleTsByThread,xl()({},a,pN(r)))})},function(){n.logInfo("Marking "+a+" to "+r.maxMarkableTs),n.props.markThread({channelId:e,ts:t,lastRead:r.maxMarkableTs,reason:"mark-thread-as-read-from-threads-view"})}):this.logError("Could not find "+a+" in loadNewerReplies")}},{key:"fetchAround",value:function(){return!1}},{key:"fetchPre",value:function(){return!1}},{key:"fetchPost",value:function(){var e=this,t=this.props,n=t.threads,a=t.hasMore,r=t.cursorTs;if(this.loading||!a||!n||!n.length||!r)return!1;var i=setTimeout(function(){e.setState(function(e){return Z()({},e,{slowLoadingMore:!0})})},hu.L);this.loading=!0,this.logInfo("Loading more from "+r);var o=this.props.loadMoreThreads({currentTs:r,limit:8}).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).threads;n&&e.setState(function(e){var n=Object(bo.a)(t,"threadKey");return{threadKeysOrdered:Object(ny.a)([].concat(Le()(e.threadKeysOrdered),Le()(n)))}})}).finally(function(){var t=e.state.slowLoadingMore;e.loading=!1,Object(_b.a)(e.pendingPromises,o),clearTimeout(i),t&&e.setState(function(e){return Z()({},e,{slowLoadingMore:!1})})});return this.pendingPromises.push(o),o}},{key:"determineFocusItemForRender",value:function(e,t){var n=this.props.focusRequestedThreadKey;if(n)return"root-"+n;var a=this.listRef.current;if(!a)return null;var r=a.getInitialActiveItem();if(!r)return null;if((Object(Su.a)(r,"load_older-")||Object(Su.a)(r,"load_newer-"))&&!Object(Ei.a)(t,r)){var i=e.indexOf(r);if(-1===i)return null;var o=e[i-1],s=t.indexOf(o);if(-1===s)return null;var l=t[s+1];if(l)return l}return null}},{key:"logInfo",value:function(e){this.props.logger.info("THREADS-VIEW",e)}},{key:"logError",value:function(e){this.props.logger.error("THREADS-VIEW",e)}},{key:"renderRow",value:function(e,t){var n=t.hasFocus,a=this.rows[e],r=this.state,i=r.minimumVisibleTsByThread,o=r.maximumVisibleTsByThread,s=r.slowLoadingMore,l=r.hasKeyboardFocus,c=this.props,u=c.theme,d=c.featureOfflineMode,p=c.isOffline,m=f()("p-threads_view__divider",{"p-threads_view__divider--first":0===e}),b=yR.t("Loading threads\u2026");switch(a.type){case"heading":return h.a.createElement(yN,{channelId:a.channelId,threadTs:a.threadTs,firstItem:0===e,clogLinkClick:this.clogThreadCloseEvent});case"root":return h.a.createElement(kR,{channelId:a.channelId,ts:a.threadTs,theme:u,clogLinkClick:this.clogThreadCloseEvent,focused:n,renderActionsOffscreen:l,clogThreadEvent:this.clogThreadEvent});case"load_older":return h.a.createElement(GN,{messages:a.messages,channelId:a.channelId,threadTs:a.threadTs,minimumVisibleTs:i[a.threadKey],loadOlderReplies:this.loadOlderReplies,theme:u});case"load_newer":return h.a.createElement(zN,{channelId:a.channelId,threadTs:a.threadTs,maximumVisibleTs:o[a.threadKey],loadNewerReplies:this.loadNewerReplies,theme:u});case"reply":return h.a.createElement(OR,{channelId:a.channelId,ts:a.ts,minimumVisibleTs:i[a.threadKey],isNewReply:a.isNewReply,theme:u,focused:n,renderActionsOffscreen:l,clogThreadEvent:this.clogThreadEvent});case"divider":return h.a.createElement(pR,{className:m,label:yR.t("You\u2019re up to date")});case"loading":return h.a.createElement(pR,{className:m,label:b,showSpinner:!0});case"footer":return h.a.createElement(iR,{channelId:a.channelId,threadTs:a.threadTs,focusInputOnMount:!1,viewContext:hu.y.THREADS_VIEW,clogThreadEvent:this.clogThreadEvent});case"loading_more_threads":return d&&p?h.a.createElement(Od,{caption:yR.t("Go online to load more threads.")}):h.a.createElement(bR,{slowLoadingMore:s});default:return this.logError("Unknown row type "+a.type),null}}},{key:"renderTopBanners",value:function(){return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"p-threads_view__top_banners"},h.a.createElement(So,null),h.a.createElement(Io.a,null,h.a.createElement(Jo,null)),h.a.createElement(vR,{onClick:this.reloadThreads})),h.a.createElement(su,null))}},{key:"render",value:function(){var e=this,t=this.props,n=t.threads,a=t.threadsPresent,r=t.currentUserId,i=t.hasMore,o=t.featureAriaApplicationMode,s=t.totalUnreadReplies,l=t.featureOfflineMode,c=t.isOffline,u=this.state,d=u.minimumVisibleTsByThread,p=u.maximumVisibleTsByThread,m=u.firstReadThreadKey,b=u.threadKeysOrdered,f=u.isDoingGlobalRefresh,_=u.initialLastReadByThread;if(u.errored)return h.a.createElement(h.a.Fragment,null,this.renderTopBanners(),h.a.createElement("div",{className:"p-threads_view"},h.a.createElement(as,{tryAgain:this.tryAgain,"data-qa":"threads_view_error"},yR.t("Something\u2019s fishy! Slack can\u2019t seem to load your threads.")," ",h.a.createElement("br",null),yR.rt("You can try again, but if the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text;return h.a.createElement(G.a,{href:"https://slack.com/help/contact"},t)}))));if(l&&c&&!a)return h.a.createElement(h.a.Fragment,null,this.renderTopBanners(),h.a.createElement(du,{caption:yR.t("Go online to get the latest threads.")}));if(!a)return h.a.createElement(h.a.Fragment,null,this.renderTopBanners(),h.a.createElement($o,null));var g=Object(fb.a)(n,"threadKey"),v=Object(Ao.a)(Object(bo.a)(b,function(e){return g[e]})),y=this.keys,k=fN({threads:v,minimumVisibleTsByThread:d,maximumVisibleTsByThread:p,firstReadThreadKey:m,isDoingGlobalRefresh:f,currentUserId:r,initialLastReadByThread:_,hasMore:i,logError:this.logError}),O=k.rows,j=k.keys;this.rows=O,this.keys=j;var C=this.determineFocusItemForRender(y,this.keys);if(0===v.length)return h.a.createElement(h.a.Fragment,null,this.renderTopBanners(),h.a.createElement(cR,null));var E=this.keys.filter(function(e){return Object(Su.a)(e,"footer-")}),w=[{keys:["right"],handler:this.onArrowKeyRight,filter:this.shouldIgnoreArrowKeys}],S=void 0;S=yR.t("Threads"),Object(Ja.a)(s)&&(S=yR.t("Threads, {totalUnreadReplies, plural, =0 {no new replies} =1 {# new reply} other {# new replies}}",{totalUnreadReplies:s}));var I=h.a.createElement(rs.a,{id:hu.y.THREADS_VIEW},h.a.createElement("div",{className:"p-threads_view",onKeyDown:this.onKeyDown},this.renderTopBanners(),h.a.createElement(Nu.a,null,function(t){var n=t.width,a=t.height;return h.a.createElement(Xu.a,{ref:e.listRef,width:n,height:a,keys:e.keys,rowRenderer:e.renderRow,isFocusableItem:e.isFocusableItem,loadAround:e.fetchAround,loadPre:e.fetchPre,loadPost:e.fetchPost,persistentKeys:E,getAriaLabelForRow:e.getAriaLabelForRow,ariaLabel:S,useAriaApplicationMode:o,onFocusEnter:e.onFocusEnter,onFocusLeave:e.onFocusLeave,onTabWithin:e.props.setInitialActiveSection,keyCommands:w,activeItem:C})})));return Object(Me.a)()?I:h.a.createElement(vd.a,{component:this,order:.1},I)}}]),t}(p.Component);ER.displayName="ThreadsView",ER.defaultProps=CR;var wR=Object(Me.a)()?Object(Pe.a)(ER,"ThreadsView",{index:0}):ER;var SR=Object(_.b)(function(e){var t=Object(ut.a)({state:e}),n=Object(ye.a)({state:e}),a=Object(yi.e)(e),r=Object(Ao.a)(Object(bo.a)(a,function(n){var a=n.threadKey,r=Object(Ho.a)(a),i=r.channelId,o=r.threadTs,s=Object(re.d)(e,i);if(!s||Object(zr.e)(s))return t.warn("Skipping "+a+" in unknown or non-existent channel"),null;if(Object(he.yb)(s)&&!Object(he.kb)(s))return t.warn("Skipping "+a+" in non-member public channel"),null;var l=Object(go.f)(e,a)||{timestamps:[],reachedStart:!0},c=l.timestamps,u=l.reachedStart,d={},p=Object(vo.a)(e,i,o);if(!p)return t.warn("Skipping "+a+" with missing root message"),null;d[o]=p,c.forEach(function(t){var n=Object(vo.a)(e,i,t);n&&(d[t]=n)});var h=Object(cN.d)(e,{channelId:i,ts:o});return{threadKey:a,channelId:i,threadTs:o,reachedStart:u,timestamps:c,messages:d,lastRead:h.lastRead,subscribed:h.subscribed,maxMarkableTs:dN(e,i,c)||o}}));return{logger:t,clogger:n,featureAriaApplicationMode:Object(y.i)(e,"feature_aria_application_mode"),threadsPresent:void 0!==a,threads:r,hasMore:Object(yi.g)(e),refreshId:Object(yi.h)(e),cursorTs:Object(yi.f)(e),currentUserId:Object(y.b)(e),theme:Object(Ru.a)(e),allThreadsRefreshCount:Object(yi.c)(e),focusRequestedThreadKey:Object(yi.d)(e),totalUnreadReplies:Object(yi.j)(e),featureOfflineMode:Object(y.i)(e,"feature_offline_mode"),isOffline:!Object(ee.c)(e),userAttentionIsOnChat:Object(De.e)(e)}},function(e){return{refreshThreads:function(){return e(yi.o.apply(void 0,arguments))},loadMoreThreads:function(){return e(yi.m.apply(void 0,arguments))},truncateThreads:function(){return e(yi.q.apply(void 0,arguments))},requestReplies:function(){return e(Au.j.apply(void 0,arguments))},clearTotalNewThreads:function(){return e(yi.a.apply(void 0,arguments))},markThread:function(){return e(cN.e.apply(void 0,arguments))},markAllThreads:function(){return e(uN.c.apply(void 0,arguments))},makeMessageSummary:function(){return e(Bu.apply(void 0,arguments))},showThreadOrRefresh:function(){return e(Au.n.apply(void 0,arguments))},setFocusRequestedThreadKey:function(){return e(yi.p.apply(void 0,arguments))}}})(wR),IR=n("O6kw"),TR=n("NZ+B"),NR=(n("PhaV"),new x.b("files")),RR=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={spriteLoaded:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this,t=new Image;this.spritePromise=new Promise(function(e){t.onload=function(){e()},t.src=cdn_url+"/be529/img/dragdrop_sprites@2x.png"}).then(function(){e.setState(function(){return{spriteLoaded:!0}})})}},{key:"componentWillUnmount",value:function(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}},{key:"render",value:function(){var e=this.props,t=e.featureAnnounceOnly,n=e.teamName,a=e.channelName,r=e.userCanPost,i=e.isImOrMpim,o=e.useNightIllustration,s=this.state.spriteLoaded,l=!1;if(Object(TR.a)(o))l=o;else{var c=(new Date).getHours();l=c>=20||c<8}var u=f()("p-message_pane_drag_overlay",{"p-message_pane_drag_overlay--night":!!l}),d=t&&!r?NR.t("Read-only"):NR.rt("Upload to {teamName}",{teamName:n}),p="";p=t&&!r?NR.t("Only selected team members can post in this channel."):i?NR.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately with {userName}',{userName:a}):NR.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately to {channelName}',{channelName:a});var m="";return t&&!r?m=h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),h.a.createElement(se.b,{type:"emoji-objects",className:"p-message_pane_drag_overlay__anim_readonly",inline:!0})):s&&(m=h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_03"}),h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_02"}),h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_01"}))),h.a.createElement("div",{className:u},h.a.createElement("div",{className:"p-message_pane_drag_overlay__info"},h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim"},m),h.a.createElement("div",{className:"p-message_pane_drag_overlay__title"},d),h.a.createElement("div",{className:"p-message_pane_drag_overlay__subtitle"},p)))}}]),t}(p.PureComponent);RR.displayName="MessagePaneDragOverlay",RR.defaultProps={featureAnnounceOnly:!1,teamName:"",channelName:"",isImOrMpim:!1,useNightIllustration:void 0};var AR=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n),r=Object($.d)(e);return{featureAnnounceOnly:Object(y.i)(e,"feature_announce_only"),channelName:Object(he.x)(e,a,{imIncludeAtSign:!1}),teamName:Object(te.e)(r),userCanPost:Object(It.q)(e,a.id),isImOrMpim:Object(he.eb)(a)||Object(he.lb)(a)}})(RR),PR=(n("uC0n"),new x.b("threads")),MR=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={spriteLoaded:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this,t=new Image;this.spritePromise=new Promise(function(e){t.onload=function(){e()},t.src=cdn_url+"/a7c8f/img/dragdrop_threads_sprites@2x.png"}).then(function(){e.setState(function(){return{spriteLoaded:!0}})})}},{key:"componentWillUnmount",value:function(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}},{key:"render",value:function(){var e=this.props,t=e.featureAnnounceOnly,n=e.userCanThread,a=e.useNightIllustration,r=this.state.spriteLoaded,i=!1;if(Object(TR.a)(a))i=a;else{var o=(new Date).getHours();i=o>=20||o<8}var s=f()("p-thread_drag_overlay",{"p-thread_drag_overlay--night":!!i}),l="";t&&!n?l=h.a.createElement("div",{className:"p-thread_drag_overlay__anim--readonly"},h.a.createElement("div",{className:"p-thread_drag_overlay__anim_circle"}),h.a.createElement(se.b,{type:"emoji-objects",className:"p-thread_drag_overlay__anim_readonly",inline:!0})):r&&(l=h.a.createElement("div",{className:"p-thread_drag_overlay__anim"},h.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_01"}),h.a.createElement("div",{className:"p-thread_drag_overlay__anim_card_01"}),h.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_02"})));var c=t&&!n?PR.t("Read-only"):PR.t("Upload to thread"),u=PR.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately'),d=t&&!n?PR.t("Only selected team members can post in this thread."):u;return h.a.createElement("div",{className:s},h.a.createElement("div",{className:"p-thread_drag_overlay__info"},l,h.a.createElement("div",{className:"p-thread_drag_overlay__title"},c),h.a.createElement("div",{className:"p-thread_drag_overlay__subtitle"},d)))}}]),t}(p.PureComponent);MR.displayName="DragOverlay",MR.defaultProps={featureAnnounceOnly:!1,useNightIllustration:void 0};var DR=Object(_.b)(function(e){var t=Object(Ho.b)(e),n=Object(Ho.a)(t).channelId,a=Object(re.d)(e,n);return{featureAnnounceOnly:Object(y.i)(e,"feature_announce_only"),userCanThread:Object(he.l)(e,a)}})(MR),xR=(n("Jm6a"),{MESSAGE_PANE:"message_pane",THREAD:"thread"}),LR=(m.b.oneOf(Object($v.a)(xR)).isRequired,m.b.node,m.b.string.isRequired,m.b.string,m.b.string,m.b.string,m.b.object,m.b.string,m.b.bool,m.b.bool,m.b.string,m.b.func,m.b.func,{children:void 0,threadTs:void 0,viewContext:void 0,className:void 0,elementProps:void 0,disableFileUploadsPref:void 0,featureAnnounceOnly:!1,userCanPostInChannel:!0,teamId:void 0,openFileUploadDialog:d.a,filterFilesForUpload:function(){return Promise.resolve([])}}),FR=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={dragging:!1},n.activeElements=new Set,n.containerRef=h.a.createRef(),n.onDrop=n.onDrop.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.containerRef.current;t.addEventListener("dragenter",function(t){e.shouldPreventDrag(t)||(t.preventDefault(),e.activeElements.add(t.target),1===e.activeElements.size&&e.setState(function(e){return Z()({},e,{dragging:!0})}))}),t.addEventListener("dragleave",function(t){t.preventDefault(),e.activeElements.delete(t.target),0===e.activeElements.size&&e.setState(function(e){return Z()({},e,{dragging:!1})})}),t.addEventListener("dragover",function(t){e.shouldPreventDrag(t)||t.preventDefault()}),t.addEventListener("dragend",function(){e.setState(function(e){return Z()({},e,{dragging:!1})}),e.activeElements.clear()}),t.addEventListener("drop",this.onDrop)}},{key:"onDrop",value:function(e){var t=this.props,n=t.channelId,a=t.threadTs,r=t.viewContext,i=t.teamId;e.preventDefault(),this.setState(function(e){return Z()({},e,{dragging:!1})}),this.activeElements.clear();var o=e.dataTransfer.files,s=Object(vf.a)({viewContext:r,channelId:n,threadTs:a}),l={fileUploadAction:ve.l.DRAG_AND_DROP,fileUploadSrc:ve.m.LOCAL};e.shiftKey?this.props.filterFilesForUpload({selectedFiles:[].concat(Le()(o)),channelId:n,threadTs:a}).then(function(e){e&&e.length&&Object(jo.a)(i).uploadFiles({files:e,shareData:{channelId:n,threadTs:a,metadata:l}})}):this.props.openFileUploadDialog({files:[].concat(Le()(o)),threadTs:a,initialChannelId:n,inputProxy:s,metadata:l})}},{key:"shouldPreventDrag",value:function(e){var t=this.props,n=t.disableFileUploadsPref,a=t.featureAnnounceOnly,r=t.userCanPostInChannel,i=Object(aa.a)(e,"dataTransfer.types");return!Object(Ei.a)(i.map(function(e){return e.toLowerCase()}),"files")||("disable_all"===n||!a&&!r)}},{key:"maybeRenderOverlay",value:function(){if(!this.state.dragging)return null;var e=this.props.channelId;switch(this.props.location){case xR.MESSAGE_PANE:return h.a.createElement(AR,{channelId:e});case xR.THREAD:return h.a.createElement(DR,null);default:return null}}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.elementProps;return h.a.createElement("div",Z()({className:f()("p-file_drag_drop__container",n),ref:this.containerRef},a),t,this.maybeRenderOverlay())}}]),t}(p.Component);FR.displayName="FileDragDrop",FR.defaultProps=LR;var BR=Object(rs.b)(Object(_.b)(function(e,t){var n=t.channelId;return{featureAnnounceOnly:Object(y.i)(e,"feature_announce_only"),disableFileUploadsPref:Object(rt.a)(e,"disable_file_uploads"),userCanPostInChannel:Object(It.q)(e,n),teamId:Object(v.b)(e)}},function(e){return{openFileUploadDialog:function(){return e(sI.a.apply(void 0,arguments))},filterFilesForUpload:function(){return e(IR.a.apply(void 0,arguments))}}})(FR)),qR=n("+Lv6"),UR=(m.b.string,m.b.bool,m.b.bool,m.b.string,m.b.string,m.b.func.isRequired,m.b.func.isRequired,{primaryView:void 0,userAttentionIsOnChat:!1,userCanPostInChannel:!1,teamId:void 0,disableFileUploadsPref:void 0}),HR=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onPaste=n.onPaste.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){window.addEventListener("paste",this.onPaste)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("paste",this.onPaste)}},{key:"onPaste",value:function(e){var t=this.props,n=t.primaryView,a=t.userAttentionIsOnChat,r=t.userCanPostInChannel,i=t.teamId;if(e&&e.clipboardData&&a){var o=this.getFiles(e);if(!Object(sa.a)(o)){var s=void 0,l=void 0,c=void 0,u=void 0,d=void 0;if(Object(PT.a)(document.activeElement,function(e){var t=e.classList.contains("p-threads_footer__input");return t&&(u=e.querySelector(".p-message_input_field").getAttribute("data-thread-key"),d=e.querySelector(".p-message_input_field").getAttribute("data-view-context")),t})&&u){var p=Object(Ho.a)(u),h=p.channelId,m=p.threadTs;s=h,l=m,c=Object(vf.a)({viewContext:d,channelId:h,threadTs:m})}else Object(Go.a)(n)&&r&&n&&(s=n,c=Object(vf.a)({viewContext:hu.y.MESSAGE_PANE,channelId:n}));if(s){var b={fileUploadAction:ve.l.COPY_AND_PASTE,fileUploadSrc:ve.m.LOCAL},f=!1;if(window.desktop&&window.desktop.app&&window.desktop.app.getModifierKeys){var _=window.desktop.app.getModifierKeys();f=_&&_.shift}f?this.props.filterFilesForUpload({selectedFiles:[].concat(Le()(o)),channelId:s,threadTs:l}).then(function(e){e&&e.length&&Object(jo.a)(i).uploadFiles({files:e,shareData:{channelId:s,threadTs:l,metadata:b}})}):this.props.openFileUploadDialog({files:Array.from(o),initialChannelId:s,fromPaste:!0,threadTs:l,inputProxy:c,metadata:b}),e.preventDefault()}}}}},{key:"getFiles",value:function(e){if("disable_all"===this.props.disableFileUploadsPref)return null;var t=Object(bo.a)(e.clipboardData.items,function(e){return e.type});return Object(El.a)(e.clipboardData.files,function(e){if(-1!==e.type.indexOf("image")){if(Object(qe.p)()&&Object(Ei.a)(t,"text/plain")&&Object(Ei.a)(t,"text/html")&&Object(Ei.a)(t,"text/rtf"))return!1;if(Object(qe.B)()&&Object(Ei.a)(t,"text/plain")&&Object(Ei.a)(t,"text/html")&&Object(Ei.a)(t,"image/png"))return!1}return!0})}},{key:"render",value:function(){return null}}]),t}(p.Component);HR.displayName="ClipboardHandler",HR.defaultProps=UR;var GR={openFileUploadDialog:function(){return sI.a.apply(void 0,arguments)},filterFilesForUpload:function(){return IR.a.apply(void 0,arguments)}},WR=Object(_.b)(function(e){var t=Object(k.a)(e),n=Object(Go.a)(t)&&t;return{primaryView:Object(k.a)(e),userAttentionIsOnChat:Object(De.e)(e),userCanPostInChannel:n&&Object(It.q)(e,n),disableFileUploadsPref:Object(rt.a)(e,"disable_file_uploads"),teamId:Object(v.b)(e)}},GR)(HR),KR=n("MIIS"),VR=n("DBPf"),zR=(m.b.string,m.b.string,m.b.bool.isRequired,m.b.number.isRequired,m.b.number.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={highlightCount:0,unreadCount:0,showHighlights:!1,showUnreads:!1},n}return u()(t,e),o()(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=!e.isWindowFocused&&(t.showHighlights||e.highlightCount>t.highlightCount),a=!e.isWindowFocused&&(t.showUnreads||e.unreadCount>t.unreadCount);return{highlightCount:e.highlightCount,unreadCount:e.unreadCount,showHighlights:n,showUnreads:a}}}]),o()(t,[{key:"render",value:function(){var e=this.props,t=e.viewName,n=e.teamName;if(!n)return null;var a=t?t+" | "+n:n;return this.state.showHighlights?a="! "+a:this.state.showUnreads&&(a="* "+a),h.a.createElement(VR.a,{title:a})}}]),t}(p.PureComponent));zR.displayName="WorkspaceDocumentTitle",zR.defaultProps={viewName:"",teamName:""};var YR=zR,QR=new x.b("view"),JR=(m.b.shape({getState:m.b.func.isRequired,subscribeImmediate:m.b.func,subscribe:m.b.func.isRequired}).isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderWithState=n.renderWithState.bind(n),n}return u()(t,e),o()(t,[{key:"renderWithState",value:function(e){var t=Object(k.a)(e),n=Object(re.d)(e,t),a=Object($.d)(e),r="";return t===wh.a.allUnreads||"Punreads"===t?r=QR.t("Unread Messages"):t===wh.a.allThreads?r=QR.t("Threads"):n&&(r=Object(he.x)(e,n,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1})),h.a.createElement(YR,{viewName:r,teamName:a&&a.name,isWindowFocused:!!Object(sb.g)(e),highlightCount:Object(zi.f)(e),unreadCount:Object(zi.g)(e)})}},{key:"render",value:function(){return h.a.createElement(KR.a,{render:this.renderWithState,store:this.props.store})}}]),t}(p.Component));JR.displayName="ConnectedWorkspaceDocumentTitle";var XR=JR,ZR=n("2LCd"),$R=n("5iqv"),eA={id:m.b.string.isRequired,isEnabled:m.b.bool.isRequired,featurePages:m.b.bool},tA=function(e){var t=e.id,n=e.isEnabled,a=e.featurePages;return t&&a&&n?Oh(t).view(t):null};tA.propTypes=eA,tA.defaultProps={featurePages:!1};var nA=Object(_.b)(function(e){var t=Object(k.a)(e);return{id:t,isEnabled:Object(Sh.e)(e,t),featurePages:Object(y.i)(e,"feature_pages")}})(tA),aA=n("qMFv"),rA=n("u2vH"),iA=(m.b.object,{appProfile:void 0});function oA(e){var t=e.appProfile;if(!t)return null;var n=Object(Cm.a)(t.profile,512);return h.a.createElement("div",{className:"p-app_space_profile__side__avatar"},h.a.createElement("img",{className:"rounded",src:n,alt:"app avatar","data-qa":"app_profile_avatar"}))}oA.displayName="AppSpaceProfileSideAvatar",oA.defaultProps=iA;var sA=oA,lA=new x.b("app_space"),cA=(m.b.bool.isRequired,m.b.string,m.b.string,m.b.func,m.b.object,m.b.object,{settingsUrl:void 0,homepageUrl:void 0,openAppManagementModal:d.a,appProfile:void 0,clogger:{track:d.a}}),uA=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSettingsButtonClick=n.onSettingsButtonClick.bind(n),n.onWebsiteButtonClick=n.onWebsiteButtonClick.bind(n),n}return u()(t,e),o()(t,[{key:"onWebsiteButtonClick",value:function(){this.props.clogger.track(ve.k.APP_CLICK_LINK_APP_HOMEPAGE_IN_APP_SPACE_ABOUT_TAB,{contexts:{ui_context:{step:ve.z.APP_SPACE_ABOUT_TAB,action:ve.v.CLICK,ui_element:ve.y.LINK_APP_HOMEPAGE}}})}},{key:"onSettingsButtonClick",value:function(e){var t=this.props.appProfile;this.props.clogger.track(ve.k.APP_CLICK_LINK_APP_SETTINGS_IN_APP_SPACE_ABOUT_TAB,{contexts:{ui_context:{step:ve.z.APP_SPACE_ABOUT_TAB,action:ve.v.CLICK,ui_element:ve.y.LINK_APP_SETTINGS}}}),Object(rA.H)(t)&&(e.preventDefault(),this.props.openAppManagementModal({serviceId:Object(rA.p)(t),referringEventId:"APP_SPACE_ABOUT_OPEN"}))}},{key:"renderSettingsButton",value:function(){var e=this.props,t=e.showSettingsUrl,n=e.settingsUrl,a=e.appProfile,r=lA.t("Settings",{fallbackHash:"c7f73bb54d928922c3838bb789ee9fb8a5b1eb37",fallbackHashNs:"app_profile"});return t?h.a.createElement(Re.d,{type:"outline",size:"medium",href:Object(rA.H)(a)?void 0:n,"data-qa":"app_profile_settings_link",onClick:this.onSettingsButtonClick,className:"p-app_space_profile__side_link",title:r},r):null}},{key:"renderWebsiteUrl",value:function(){var e=this.props.homepageUrl,t=lA.t("App Homepage",{fallbackHash:"ee2dbe71c27837ecd0a10d866992e1b3ff0d9b2f",fallbackHashNs:"app_profile"});return e?h.a.createElement(Re.d,{type:"outline",size:"medium",href:e,"data-qa":"app_profile_homepage_link",className:"p-app_space_profile__side_link",title:t,onClick:this.onWebsiteButtonClick},t):null}},{key:"render",value:function(){return h.a.createElement("div",{className:"p-app_space_profile__side__links"},this.renderSettingsButton(),this.renderWebsiteUrl())}}]),t}(p.PureComponent);uA.displayName="BaseAppSpaceProfileSideLinks",uA.defaultProps=cA;var dA={openAppManagementModal:Xr.a},pA=Object(_.b)(function(e,t){var n=t.appProfile;return{clogger:Object(ye.a)({state:e}),showSettingsUrl:Object(rA.A)(e,n),settingsUrl:Object(rA.z)(e,n),homepageUrl:Object(rA.k)(n)}},dA)(uA),hA=n("Owxj"),mA=(m.b.string,function(e){var t=e.formattedDescription,n=Object(p.useCallback)(function(e){e&&e.target&&e.target.href&&"A"===e.target.tagName&&(e.preventDefault(),Object(KI.a)(e.target.href))},[]);return t?h.a.createElement("div",{onClick:n,dangerouslySetInnerHTML:{__html:t}}):null});mA.displayName="BaseFormattedAppDescription",mA.defaultProps={formattedDescription:""};var bA=Object(_.b)(function(e,t){var n=t.formattedDescription;return{formattedDescription:Object(hA.a)(e,{messageText:n,teamId:Object(v.b)(e)})}})(mA),fA=new x.b("app_space"),_A=(m.b.object,m.b.string,m.b.string,{appProfile:void 0,truncatedDescription:"",formattedDescription:""});function gA(e){var t=e.appProfile,n=e.formattedDescription,a=e.truncatedDescription,r=Object(p.useState)(!1),i=No()(r,2),o=i[0],s=i[1];if(!t||!n)return null;var l=Object(rA.I)(t),c=h.a.createElement(bA,{formattedDescription:n});return h.a.createElement("section",null,h.a.createElement("div",{className:"p-app_space_profile__description","data-qa":"app_profile_desc"},l?c:h.a.createElement(p.Fragment,null,h.a.createElement("span",{className:"p-app_space_profile__description__collapsed"},o?c:h.a.createElement(Pn.a,{emoji:!0,text:a}))," ",h.a.createElement(G.a,{onClick:function(){return s(!o)},"data-qa":"toggle-app-description-expansion"},o?fA.t("Show less"):fA.t("Read more")))))}gA.displayName="AppSpaceProfileDescription",gA.defaultProps=_A;var vA=Object(_.b)(function(e,t){var n=t.appProfile;return{truncatedDescription:Object(hA.a)(e,{messageText:Object(rA.s)(n),teamId:Object(v.b)(e)}),formattedDescription:Object(rA.i)(n)}})(Object(ud.a)(gA)),yA=n("Pl1I"),kA=new x.b("app_space");m.b.bool,m.b.bool,m.b.string,m.b.string,m.b.bool,m.b.string,m.b.string,m.b.bool;function OA(e){var t=e.isPublished,n=e.isDistributed,a=e.appType,r=e.installedUserId,i=e.installerIsYou,o=e.appName,s=e.appHomeTeamDisplayName,l=e.featureAddAppHomeTeamName;return t?null:h.a.createElement("section",null,h.a.createElement("div",{className:"p-app_space_profile__disclaimer","data-qa":"app_space_profile_disclaimer"},n?h.a.createElement(p.Fragment,null,kA.t("This app has not been reviewed or approved by Slack.")," ",h.a.createElement(G.a,{href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team"},kA.t("Learn more")),"."):h.a.createElement(yA.a,{isError:!1,appType:a,memberId:r,installerIsYou:i,appName:o,appHomeTeamDisplayName:s,featureAddAppHomeTeamName:l})))}OA.defaultProps={isPublished:!1,isDistributed:!1,appType:"",installedUserId:"",installerIsYou:!1,appName:"",appHomeTeamDisplayName:"",featureAddAppHomeTeamName:!1};var jA=Object(_.b)(function(e,t){var n=t.appProfile;return{isPublished:Object(rA.F)(n),isDistributed:Object(rA.D)(n),appType:Object(rA.t)(n),installedUserId:Object(rA.w)(n),installerIsYou:Object(rA.x)(e,n),appName:Object(rA.n)(n),appHomeTeamDisplayName:Object(rA.j)(e,n),featureAddAppHomeTeamName:Object(y.i)(e,"feature_add_app_home_team_name")}})(OA),CA=new x.b("app_space");m.b.object.isRequired,m.b.string,m.b.bool,m.b.string;function EA(e){var t=e.appProfile,n=e.appName,a=e.isCustomIntegration,r=e.manageUrl;return h.a.createElement("div",{className:"p-app_space_profile__info"},h.a.createElement("div",{className:"p-app_space_profile__side"},h.a.createElement(sA,{appProfile:t}),h.a.createElement(pA,{appProfile:t})),h.a.createElement("div",{className:"p-app_space_profile__about"},!!n&&h.a.createElement("h2",{className:"p-app_space__header","data-qa":"app_profile_name"},n),h.a.createElement(vA,{appProfile:t}),h.a.createElement(jA,{appProfile:t}),a&&h.a.createElement(Re.d,{type:"outline",href:r},CA.t("Manage",{note:"Manage permissions"}))))}EA.displayName="AppSpaceProfileInfo",EA.defaultProps={appName:"",isCustomIntegration:!1,manageUrl:""};var wA=Object(_.b)(function(e,t){var n=t.appProfile;return{appName:Object(rA.n)(n),isCustomIntegration:Object(rA.C)(n),manageUrl:Object(rA.y)(e,n)}})(EA),SA=n("4phY"),IA=new x.b("app_space"),TA=(m.b.string,m.b.string,m.b.array,m.b.string,m.b.bool,m.b.func,{appName:"",appIcon:"",appScreenshots:[],youtubeUrl:"",featureReactFileViewer:!1,openFileViewer:d.a}),NA=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleYoutubeClick=n.handleYoutubeClick.bind(n),n.handleImageClick=n.handleImageClick.bind(n),n}return u()(t,e),o()(t,[{key:"handleYoutubeClick",value:function(){var e=this.props,t=e.appName,n=e.appScreenshots,a=e.appIcon,r=e.youtubeUrl;if(e.featureReactFileViewer)this.props.openFileViewer({title:t,youtube:{src:r}});else{var i=Object(rA.B)(r);Object(fu.g)({youtubeId:i,screenshots:n,appName:t,appIcon:a},0)}}},{key:"handleImageClick",value:function(e){var t=this.props,n=t.appName,a=t.appScreenshots,r=t.appIcon,i=t.youtubeUrl;if(t.featureReactFileViewer)this.props.openFileViewer({title:n,image:{src:a[e].image_1600,altText:n,thumbnailUrl:a[e].image_440,height:400,width:600}});else{var o=Object(rA.B)(i),s=i?e+1:e;Object(fu.g)({youtubeId:o,screenshots:a,appName:n,appIcon:r},s)}}},{key:"generateThumbnailUrl",value:function(e){var t=Object(rA.B)(e);return""!==t&&"https://i.ytimg.com/vi/"+t+"/hqdefault.jpg"}},{key:"renderYoutubeVideo",value:function(){var e=this.props,t=e.youtubeUrl,n=e.appName;if(!t)return null;var a=this.generateThumbnailUrl(t);if(!a)return null;var r=IA.t("Video of {appName}",{note:"Alt text for a screenreader to play a video about an app",appName:n});return h.a.createElement(Re.c,{onClick:this.handleYoutubeClick,className:"p-app_space_profile__screenshots_item"},h.a.createElement("img",{src:a,alt:r,className:"p-app_space_profile__youtube_thumbnail"}),h.a.createElement("div",{className:"p-app_space_profile__youtube_play_button"},h.a.createElement(se.b,{type:"play",size:"inherit"})))}},{key:"renderScreenshots",value:function(){var e=this,t=this.props,n=t.appScreenshots,a=t.appName;if(!n||!n.length)return null;var r=IA.t("Screenshot of {appName}",{note:"Alt text for screenshots of an app in the full screen modal.",appName:a});return n.map(function(t,n){return h.a.createElement(Re.c,{key:t.id,onClick:function(){return e.handleImageClick(n)},className:"p-app_space_profile__screenshots_item"},h.a.createElement("img",{src:t.image_440,alt:r}))})}},{key:"render",value:function(){var e=this.props,t=e.youtubeUrl,n=e.appScreenshots;return n&&n.length||t&&""!==t?h.a.createElement("div",{className:"p-app_space__screenshots"},h.a.createElement("h3",{className:"p-app_space__subheader"},IA.t("Screenshots",{note:"Heading for screenshots of an app in the app profile."})),h.a.createElement("div",{className:"p-app_space_profile__screenshots","data-qa":"app_profile_screenshots"},this.renderYoutubeVideo(),this.renderScreenshots())):null}}]),t}(p.PureComponent);NA.displayName="AppSpaceScreenshots",NA.defaultProps=TA,NA.displayName="AppSpaceScreenshots";var RA=NA;var AA=Object(_.b)(function(e,t){var n=t.appProfile;return{youtubeUrl:Object(rA.u)(n),appScreenshots:Object(rA.o)(n),appName:Object(rA.n)(n),appIcon:Object(Cm.a)(n.profile,512),featureReactFileViewer:Object(y.i)(e,"feature_react_file_viewer")}},function(e){return{openFileViewer:function(t){return e(Object(SA.a)(t))}}})(RA),PA=n("KPXh"),MA=n("zwKj"),DA=new x.b("app_space"),xA=(m.b.func,m.b.object,m.b.shape({name:m.b.string.isRequired,usage:m.b.string.isRequired,description:m.b.string.isRequired}).isRequired,m.b.string,m.b.string,{autoFillSlashCommand:d.a,clogger:{track:d.a},appId:"",botId:""});function LA(e){var t=e.autoFillSlashCommand,n=e.clogger,a=e.appId,r=e.botId,i=e.command,o=Object(PA.f)(i),s=Object(PA.h)(i),l=Object(PA.e)(i),c=Object(p.useCallback)(function(){t({commandName:o}),n.track(ve.k.APP_SPACE_ABOUT_SLASH_COMMAND_CLICK,{app_id:a,bot_id:r,contexts:{core:{app_id:a,bot_id:r}}})},[t,o,n,a,r]);return h.a.createElement("div",{className:"p-app_space_profile__slash_command","data-qa":"app_space_profile_slash_command"},h.a.createElement("div",null,h.a.createElement("div",null,h.a.createElement("strong",null,o),h.a.createElement("span",null,s)),h.a.createElement("div",{className:"p-app_space_profile__slash_command_desc"},l)),h.a.createElement("div",null,h.a.createElement(Re.d,{type:"outline","data-qa":o,onClick:c},DA.t("Start command"))))}LA.displayName="AppSpaceSlashCommand",LA.defaultProps=xA;var FA={autoFillSlashCommand:function(){return MA.a.apply(void 0,arguments)}},BA=Object(_.b)(function(e){return{clogger:Object(ye.a)({state:e})}},FA)(LA),qA=new x.b("app_space");m.b.object.isRequired;function UA(e){var t=e.appProfile,n=Object(rA.d)(t),a=Object(rA.l)(t),r=Object(rA.p)(t);return n&&n.length?h.a.createElement(p.Fragment,null,h.a.createElement("h3",{className:"p-app_space__subheader"},h.a.createElement("span",null,qA.t("Commands",{note:"Slash commands the app responds to"})),h.a.createElement("span",{className:"p-app_space__subheader__helper"},qA.t("Use / to start commands in any conversation",{note:"How to use slash commands helper text"}))),h.a.createElement("div",{className:"p-app_space_profile__slash_commands"},h.a.createElement("section",null,n.map(function(e){return h.a.createElement(BA,{key:e.name,command:e,appId:a,botId:r})})))):null}UA.displayName="AppSpaceSlashCommands";var HA=h.a.memo(UA),GA=(n("VTc2"),m.b.object,m.b.object,{appProfile:void 0,clogger:{track:d.a}});function WA(e){var t=e.clogger,n=e.appProfile,a=Object(rA.l)(n),r=Object(rA.p)(n),i=Object(p.useCallback)(function(){t.track("APP_SPACE_ABOUT_OPEN",{app_id:a,bot_id:r,contexts:{core:{app_id:a,bot_id:r}}})},[t,a,r]),o=Object(p.useCallback)(function(){return Object(aA.b)(n,r)},[n,r]);return Object(p.useEffect)(function(){a&&r&&(o(),i())},[a,r,i,o]),!n||Object(zr.e)(n)?null:h.a.createElement("div",{className:"p-app_space_profile","data-qa":"app_space_profile"},h.a.createElement(wA,{appProfile:n}),h.a.createElement(AA,{appProfile:n}),h.a.createElement(HA,{appProfile:n}))}WA.displayName="BaseAppSpace",WA.defaultProps=GA;var KA=Object(_.b)(function(e){var t=Object(k.a)(e);return Th(e,t)&&Object(S.n)(e)?{appProfile:Object(Jr.b)(e,t),clogger:Object(ye.a)({state:e})}:{}})(WA),VA=n("/xs0"),zA=Object(ot.b)("Jump the message pane to the end",function(e){e(Object(Ea.c)({ts:null}))});var YA=Object(ot.b)("Handle key commands that trigger search",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).channelId;e(Object(Qn.markMostRecentMsgRead)({channelId:n,reason:"triggerMarkAsReadFromEscKey"})),e(Object(Ea.i)(null))});YA.propTypes={channelId:m.b.string};var QA=YA;var JA=Object(ot.b)("Handle the escape key trigger",function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).event.preventDefault();var n=t(),a=Object(k.a)(n);Object(Go.a)(a)&&(!function(e,t){var n=Object(S.h)(e),a=Object(go.h)(e,t,n);return a&&!a.reachedEnd}(n,a)?function(e,t){var n=Object(re.d)(e,t);return Object(he.Lb)(n)||Object(S.d)(e)}(n,a)&&e(QA({channelId:a})):e(zA()))});JA.propTypes={event:m.b.object.isRequired};var XA=JA,ZA=n("3zPy"),$A=Object(ot.b)("Handle key commands that trigger search",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.event,r=n.keyCode;a.preventDefault(),r===ZA.codes.f?e(Object(Hh.b)()):e(Object(Hh.c)())});$A.propTypes={event:m.b.object.isRequired,keyCode:m.b.number.isRequired};var eP=$A,tP=Object(Si.b)(function(e){var t={};return Object(re.f)(e).forEach(function(n){if(Object(he.S)(n)){var a=Object(go.h)(e,n.id);t[n.id]=Object(he.E)(n,a.timestamps)}}),t}),nP=Object(ot.b)("Mark all channels as read",function(e,t){var n=tP(t());e(Object(yo.b)({markers:n,reason:"markAllAsRead"})),e(Object(Ea.i)(null)),e(Object(Ri.b)())});nP.propTypes={};var aP=nP,rP=new x.b("client"),iP=(m.b.func.isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={dontAskAgain:!1},n.onGo=n.onGo.bind(n),n.onCheckboxToggle=n.onCheckboxToggle.bind(n),n}return u()(t,e),o()(t,[{key:"onCheckboxToggle",value:function(){this.setState(function(e){return{dontAskAgain:!e.dontAskAgain}})}},{key:"onGo",value:function(){this.state.dontAskAgain&&this.props.setUserPrefByApi({pref:"confirm_clear_all_unreads",value:!1}),this.props.markAllAsRead()}},{key:"render",value:function(){var e=this.state.dontAskAgain;return h.a.createElement(lr.a,{"data-qa":"shift_escape_confirm_dialog",title:rP.t("Clear all unreads?"),goButtonText:rP.t("Yes, clear all!"),onGo:this.onGo,showCancelButton:!0},h.a.createElement("p",null,rP.rt("<b>Shift+esc</b> will clear all unread messages and notifications. Are you sure you want to do this? It\u2019s liberating\u2026 but there\u2019s no going back.")),h.a.createElement($l.a,{htmlFor:"dont_ask_again",type:"inline",text:rP.t("Don\u2019t ask me again, please")},h.a.createElement(Xl.a,{id:"dont_ask_again",checked:e,onChange:this.onCheckboxToggle})))}}]),t}(h.a.PureComponent));iP.displayName="ShiftEscapeConfirmDialog";var oP=Object(_.b)(null,function(e){return{markAllAsRead:function(){return e(aP.apply(void 0,arguments))},setUserPrefByApi:function(){return e(D.f.apply(void 0,arguments))}}})(iP),sP=Object(ot.b)("Opens the Channel Create modal in client",function(e){return e(Object(st.e)({element:h.a.createElement(oP,null)}))});sP.propTypes={};var lP=sP,cP=Object(ot.b)("Handle key commands that trigger search",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).event;if(!n.repeat){n.preventDefault();var a=t();if(Object(ue.h)(a,"confirm_clear_all_unreads"))e(lP());else{var r=tP(a);e(Object(yo.b)({markers:r,reason:"triggerMarkAllAsReadFromEscKey"})),e(Object(Ea.i)(null)),e(Object(Ri.b)())}}});cP.propTypes={event:m.b.object.isRequired};var uP=cP,dP=Object(ot.b)("Cmd+Shift+\\ handler",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).event,a=Object(ut.a)({getState:t,label:"GLOBAL-RXN-SHORTCUT"}),r=Object(k.a)(t()),i=hu.y.MESSAGE_PANE,o=Object(Go.a)(r)?r:void 0,s=void 0,l=document.activeElement;if(Object(_u.a)(l)){var c=void 0;if(Object(PT.a)(document.activeElement,function(e){var t=e.classList.contains("p-threads_footer__input");return t&&(c=e.querySelector(".p-message_input_field").getAttribute("data-thread-key"),i=e.querySelector(".p-message_input_field").getAttribute("data-view-context")),t}),c){var u=Object(Ho.a)(c);o=u.channelId,s=u.threadTs}}var d=Object(vf.a)({viewContext:i,channelId:o,threadTs:s});d?d.openReactionPopoverForLastMessage?(d.openReactionPopoverForLastMessage(),n.preventDefault()):a.warn("No openReactionPopoverForLastMessage for "+i+"-"+o+"-"+s):a.info("No input for "+i+"-"+o+"-"+s)});dP.propTypes={event:m.b.object.isRequired};var pP=dP,hP=n("NB3s"),mP=n("u4Vc"),bP=(n("PQ52"),new x.b("keyboard_shortcuts")),fP=(m.b.func.isRequired,m.b.func.isRequired,m.b.string,m.b.object,{keyboardLocale:null,telemeter:{count:d.a}}),_P=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.closeAndShowKeyboardShortcuts=n.closeAndShowKeyboardShortcuts.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.telemeter.count("displayed_keyboard_shortcuts_coachmark")}},{key:"componentWillUnmount",value:function(){this.props.telemeter.count("dismissed_keyboard_shortcuts_coachmark")}},{key:"getSlashKey",value:function(){var e=this.props.keyboardLocale;return Object(x.g)("/",{kb:e})}},{key:"closeAndShowKeyboardShortcuts",value:function(){this.props.telemeter.count("opened_keyboard_shortcuts_fp_from_coachmark"),this.props.showKeyboardShortcuts()}},{key:"render",value:function(){var e=Object(qe.p)()?bP.t("Cmd"):bP.t("Ctrl"),t=this.getSlashKey(),n=bP.t("F6");return h.a.createElement(hP.a,{closeModal:this.props.closeModal},h.a.createElement(hP.h,null,h.a.createElement(hP.j,{title:bP.t("Navigating Slack with a keyboard?")})),h.a.createElement(hP.d,null,h.a.createElement(hP.e,null,h.a.createElement("p",null,bP.t("Shortcuts make it easier to get around in Slack. Here are a few you might find helpful:")),h.a.createElement("ul",{className:"p-keyboard_shortcut_prompt__list"},h.a.createElement("li",{className:"p-keyboard_shortcut_prompt__list_item"},h.a.createElement("span",{className:"c-keyboard_key"},h.a.createElement(se.b,{type:"arrow-up-medium"})),h.a.createElement("span",{className:"c-keyboard_key"},h.a.createElement(se.b,{type:"arrow-down-medium"}))," ",bP.t(" Move focus through messages")),h.a.createElement("li",{className:"p-keyboard_shortcut_prompt__list_item"},!ze.V&&h.a.createElement("span",{className:"c-keyboard_key"},e),h.a.createElement("span",{className:"c-keyboard_key"},n)," ",bP.t(" Move focus to the next section")),h.a.createElement("li",{className:"p-keyboard_shortcut_prompt__list_item"},!ze.V&&h.a.createElement("span",{className:"c-keyboard_key"},e),h.a.createElement("span",{className:"c-keyboard_key"},bP.t("K"))," ",bP.t("Quick Switcher"))),h.a.createElement("p",{className:"no_bottom_margin"},bP.rt('And that\u2019s just the beginning. To view the full list of keyboard shortcuts, just press <span class="c-keyboard_key">{cmd_key}</span> + <span class="c-keyboard_key">{slash_key}</span>',{cmd_key:e,slash_key:t})))),h.a.createElement(hP.f,null,h.a.createElement(hP.g,null,h.a.createElement(Re.d,{type:"outline",onClick:this.closeAndShowKeyboardShortcuts},bP.t("View More")),h.a.createElement(hP.c,{type:"primary"},bP.t("Got it")))))}}]),t}(p.Component);_P.displayName="KeyboardShortcutPrompt",_P.defaultProps=fP;var gP={closeModal:function(){return st.a.apply(void 0,arguments)},showKeyboardShortcuts:function(){return Ke.h.apply(void 0,arguments)}},vP=Object(_.b)(function(e){return{telemeter:Object(dn.c)({state:e})}},gP)(_P),yP=Object(Fm.a)(vP),kP=Object(ot.b)("Opens the keyboard shortcut prompt",function(e){e(Object(st.e)({element:h.a.createElement(yP,null),name:mP.a}))}),OP=0,jP=void 0,CP=Object(ot.b)("After 5 consecutive tabs we show a dialog explaining kb shortcuts",function(e){if(4===OP)return e(kP()),e(Object(D.f)({pref:"seen_keyboard_shortcuts_coachmark",value:!0})),clearTimeout(jP),void(OP=0);OP+=1,clearTimeout(jP),jP=setTimeout(function(){OP=0},1e3)}),EP=n("Nc5J"),wP=n("0Mct"),SP=n("Rmtr"),IP=[{keys:["mod+f","mod+g"],handler:eP,ignoreIf:function(e){return!Object(De.e)(e)||!ze.V&&!Object(ue.h)(e,"f_key_search")}},{keys:["mod+k","mod+t"],handler:Ef.a,ignoreIf:function(e){var t=Object(SP.e)(e)||Object(Ef.b)(e);return!Object(De.e)(e)&&!t||!ze.V&&!Object(ue.h)(e,"k_key_omnibox")}},{keys:["esc"],handler:XA,ignoreIf:function(e){return!Object(De.e)(e)}},{keys:["shift+esc"],handler:uP,ignoreIf:function(e){return!Object(De.e)(e)}},{keys:["mod+shift+y"],handler:function(){return Object(We.a)({fromKeyboardShortcut:!0})},ignoreIf:function(e){return!Object(De.e)(e)}},{keys:["mod+,"],handler:function(){return Object(fe.a)({fromKeyboardShortcut:!0})},ignoreIf:function(e){return!Object(De.e)(e)||!(Object(qe.p)()&&ze.V)}},{keys:["mod+shift+k"],handler:function(){return Object(Zn.a)()},ignoreIf:function(e){return!Object(De.e)(e)}},{keys:["mod+shift+l"],handler:function(){return Object(J_.a)()},ignoreIf:function(e){return!Object(De.e)(e)}},{keys:["mod+."],handler:Ke.s,ignoreIf:function(e){return!Object(De.e)(e)}},{keys:["mod+/"],handler:function(e){return e.event.preventDefault(),Object(Ke.t)()},ignoreIf:function(e){return!Object(De.e)(e)&&!Object(De.d)(e)}},{keys:["mod+shift+a"],handler:EP.a,ignoreIf:function(e){return!Object(De.e)(e)||!Object(y.i)(e,"feature_react_all_unreads")||!Object(ue.h)(e,"enable_unread_view")}},{keys:["mod+shift+t"],handler:wP.a,ignoreIf:function(e){return!Object(De.e)(e)||!ze.V}},{keys:["mod+shift+m"],handler:Ke.q,ignoreIf:function(e){return!(!at.a.chrome||ze.V)||!Object(De.e)(e)}},{keys:["mod+shift+s"],handler:Ke.v,ignoreIf:function(e){return!Object(De.e)(e)}},{keys:["mod+shift+e"],handler:Ke.u,ignoreIf:function(e){return!Object(De.e)(e)}},{keys:["mod+shift+i"],handler:Ke.r,ignoreIf:function(e){return!ze.V||!Object(De.e)(e)||!Object(Go.a)(Object(k.a)(e))}},{keys:["mod+shift+\\"],handler:pP,ignoreIf:function(e){return!Object(De.e)(e)}},{keys:["command+left"],handler:function(e){var t=e.event;return Gf({event:t,fromKeyboardShortcut:!0})},ignoreIf:function(e){return!Object(qe.p)()||!Object(De.e)(e)||Object(_u.a)(document.activeElement)}},{keys:["command+right"],handler:function(e){var t=e.event;return Wf({event:t,fromKeyboardShortcut:!0})},ignoreIf:function(e){return!Object(qe.p)()||!Object(De.e)(e)||Object(_u.a)(document.activeElement)}},{keys:["command+["],handler:function(e){var t=e.event;return Gf({event:t,fromKeyboardShortcut:!0})},ignoreIf:function(e){return!Object(mb.a)(e)||!Object(qe.p)()}},{keys:["command+]"],handler:function(e){var t=e.event;return Wf({event:t,fromKeyboardShortcut:!0})},ignoreIf:function(e){return!Object(mb.a)(e)||!Object(qe.p)()}},{keys:["alt+left"],handler:function(e){var t=e.event;return Gf({event:t,fromKeyboardShortcut:!0})},ignoreIf:function(e){return!Object(mb.a)(e)||Object(qe.p)()}},{keys:["alt+right"],handler:function(e){var t=e.event;return Wf({event:t,fromKeyboardShortcut:!0})},ignoreIf:function(e){return!Object(mb.a)(e)||Object(qe.p)()}},{keys:["tab"],handler:CP,ignoreIf:function(e){return!Object(De.e)(e)||Object(_u.a)(document.activeElement)||Object(ue.h)(e,"seen_keyboard_shortcuts_coachmark")}}],TP=n("oHBb");m.b.node.isRequired,m.b.object.isRequired;function NP(e){var t=e.children,n=e.clogger;return h.a.createElement(TP.a.Provider,{value:n},t)}NP.displayName="CloggerContextProvider";var RP=Object(_.b)(function(e){return{clogger:Object(ye.a)({state:e})}})(NP),AP=n("mqWI");m.b.node.isRequired,m.b.object.isRequired;function PP(e){var t=e.children,n=e.logger;return h.a.createElement(AP.a.Provider,{value:n},t)}PP.displayName="LoggerContextProvider";var MP=Object(_.b)(function(e){return{logger:Object(ut.a)({state:e})}})(PP),DP=n("5APj");m.b.node.isRequired;function xP(e){var t=e.children;return h.a.createElement(DP.a,null,h.a.createElement(RP,null,h.a.createElement(MP,null,t)))}xP.displayName="AppContextProviders";var LP=xP,FP=n("9rZX"),BP=n.n(FP),qP=n("VwqH"),UP=n("7Ztl"),HP=(n("Lpwv"),n("+rBa")),GP=n("1YQg"),WP=n("59b6"),KP=Object(_.b)(function(e){var t=Object(UP.c)(e),n=Object(WP.b)(e);return{invitingCall:t&&t.id,callTitle:n}},function(e){return{onAcceptCall:function(t){return e(Object(HP.a)(t))},onRejectCall:function(t){return e(Object(HP.b)({id:t,response:GP.c.Reject}))}}})(function(e){var t=e.invitingCall,n=e.onAcceptCall,a=e.onRejectCall,r=e.callTitle;if(Object(W.a)()&&Object(ut.b)().error("BrowserIncomingCall should only be instantiated in a browser."),!t)return null;return h.a.createElement(BP.a,{isOpen:!0,overlayClassName:"p-browser_incoming_call--shroud",shouldFocusAfterRender:!0,shouldReturnFocusAfterClose:!0,style:{content:{background:"transparent",border:"none",left:"50%",margin:"0",padding:"0",width:"200px"}},contentLabel:r},h.a.createElement("div",{className:"p-browser_incoming_call"},h.a.createElement(qP.a,{callId:t,onAcceptCall:n,onRejectCall:a})))}),VP=n("Gmrf"),zP=(m.b.string,m.b.func,{lastError:void 0,enqueueToast:d.a}),YP=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentWillReceiveProps",value:function(e){e.lastError&&e.lastError!==this.props.lastError&&this.props.enqueueToast({element:h.a.createElement(pt.b,{position:"bottom-right",offsetY:66,shouldAutoFade:!1},h.a.createElement(se.b,{type:"exclamation-circle",className:"margin_right_50"}),h.a.createElement("span",null,e.lastError))})}},{key:"render",value:function(){return null}}]),t}(p.Component);YP.displayName="DebugError",YP.defaultProps=zP;var QP={enqueueToast:dt.c},JP=Object(_.b)(function(e){var t=Object(VP.b)(e);return{lastError:Object(y.i)(e,"feature_tinyspeck")?t&&t.toString&&t.toString():void 0}},QP)(YP),XP=n("UUlk"),ZP=n("uFGw"),$P=n("J9z2"),eM=n("/gpl"),tM=n("P2f5"),nM=n("N52Z"),aM=n("GTwG"),rM=n("P9LH"),iM=n("mOAw"),oM=n("u9my"),sM=n("K5QD"),lM=n("2Jxo"),cM=n("/MYD"),uM=n("y7mK"),dM=Object(ka.b)("TS.ui.comments.startDelete"),pM=new x.b("comments"),hM=(m.b.bool,m.b.func,m.b.string,m.b.string,m.b.bool,{isStarred:!1,updateStar:d.a,commentId:void 0,fileId:void 0,featureReactThreads:!1}),mM=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderMenu=n.renderMenu.bind(n),n.toggleStar=n.toggleStar.bind(n),n.deleteComment=n.deleteComment.bind(n),n}return u()(t,e),o()(t,[{key:"toggleStar",value:function(){var e=this.props,t=e.commentId,n=e.fileId,a=e.isStarred;t&&n&&this.props.updateStar(!a,{file_comment:t,file_comment_file:n})}},{key:"deleteComment",value:function(){var e=this.props,t=e.commentId,n=e.fileId;t&&n&&dM(n,t)}},{key:"renderMenu",value:function(e){if(!this.props.featureReactThreads)return null;var t=this.props.isStarred;return h.a.createElement(ie.f,e,h.a.createElement(ie.b,{label:t?pM.t("Unstar this file comment"):pM.t("Star this file comment"),onSelected:this.toggleStar}),h.a.createElement(ie.d,null),h.a.createElement(ie.b,{label:pM.t("Delete comment"),danger:!0,onSelected:this.deleteComment}))}},{key:"render",value:function(){return this.props.featureReactThreads?h.a.createElement(ie.e,{renderMenu:this.renderMenu,position:"left-bottom"},h.a.createElement(oe.a,{className:"p-comment__actions","aria-label":pM.t("Show more actions")},h.a.createElement(se.b,{type:"cog",size:"inherit"}))):null}}]),t}(p.PureComponent);mM.displayName="CommentActions",mM.defaultProps=hM;var bM=Object(_.b)(function(e){return{featureReactThreads:Object(y.i)(e,"feature_react_threads")}},{updateStar:Wa.a})(mM),fM=(n("2ekl"),new x.b("comments")),_M=(m.b.bool,m.b.bool,m.b.bool,m.b.shape({id:m.b.string,user:m.b.string,timestamp:m.b.number,comment:m.b.string}).isRequired,m.b.string,{featureFileThreads:!0,featureReactThreads:!1,time24:!1,fileId:void 0}),gM=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.comment,n=e.time24,a=e.featureFileThreads,r=e.featureReactThreads,i=e.fileId;if(!a&&!Object(Me.a)())return null;var o=t.user,s=t.timestamp,l=t.comment,c=t.is_starred,u=t.id;return h.a.createElement("div",{className:"p-comment"},h.a.createElement("div",{className:"p-comment__header"},o?h.a.createElement(uM.a,{userId:o}):null,h.a.createElement("span",{className:"p-comment__timestamp"},fM.t("{date} at {time}",{date:Object(cM.a)(s,{shortenMonth:!0}),time:Object(UO.a)(s,{do24hrTime:n})})),r&&h.a.createElement(bM,{isStarred:c,commentId:u,fileId:i})),h.a.createElement("div",{className:"p-comment__body"},h.a.createElement(Pn.a,{text:l,memberId:o})))}}]),t}(p.PureComponent);gM.displayName="Comment",gM.defaultProps=_M;var vM=Object(_.b)(function(e){return{featureFileThreads:Object(y.i)(e,"feature_file_threads"),featureReactThreads:Object(y.i)(e,"feature_react_threads"),time24:Object(ue.h)(e,"time24")}})(gM),yM=(n("G4eq"),new x.b("comments")),kM=(m.b.func,m.b.number,m.b.bool,{toggleList:d.a,commentCount:0,expanded:!1});function OM(e){var t=e.toggleList,n=e.commentCount,a=e.expanded,r=a?yM.t("Hide older comments",{fallbackHash:"f560b67c78f367354057065ac81410a1c310432b"}):yM.t("See older comments"),i=a?"caret-down":"caret-right";return h.a.createElement("div",{className:"p-comment_list__toggle_container"},h.a.createElement(M.a,{onClick:t,"aria-expanded":a},r),h.a.createElement("span",{className:"p-comment_list__toggle_count_button",role:"presentation",onClick:t},h.a.createElement(se.b,{type:"comment-alt"}),h.a.createElement("span",{className:"p-comment_list__toggle_count"},n),h.a.createElement(se.b,{type:i,className:"p-comment_list__toggle_caret"})))}OM.displayName="CommentListToggle",OM.defaultProps=kM;var jM={comments:m.b.array,featureFileThreads:m.b.bool,fileId:m.b.string},CM={comments:void 0,featureFileThreads:!0,fileId:void 0},EM=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggle=n.toggle.bind(n),n.state={expanded:!1},n}return u()(t,e),o()(t,[{key:"toggle",value:function(){this.setState(function(e){return{expanded:!e.expanded}})}},{key:"render",value:function(){var e=this.props,t=e.comments,n=e.featureFileThreads,a=e.fileId,r=this.state.expanded;if(!n&&!Object(Me.a)())return null;if(Object(sa.a)(t))return null;var i=t.map(function(e){var t=e.id;return h.a.createElement(vM,{key:t,comment:e,fileId:a})}),o=f()("p-comment_list",{"p-comment_list--expanded":r});return h.a.createElement("div",{className:o},h.a.createElement(OM,{expanded:r,commentCount:t.length,toggleList:this.toggle}),h.a.createElement("div",{className:"p-comment_list__comments"},i))}}]),t}(y_.a);EM.displayName="CommentList",EM.propTypes=jM,EM.defaultProps=CM;var wM=Object(Dt.a)("feature_file_threads")(EM),SM=n("JXW8"),IM=n("5yEy"),TM=n("VfGJ"),NM=n("O/xh"),RM=n("1Lli"),AM=n("NvKv"),PM=new x.b("file-details"),MM=(m.b.string.isRequired,m.b.shape({sharedTeamIds:m.b.arrayOf(m.b.string),teamId:m.b.string,channelId:m.b.string,channelName:m.b.string,isPublic:m.b.bool,ts:m.b.string,threadTs:m.b.string,replyCount:m.b.number}).isRequired,m.b.string,m.b.string,m.b.func,{teamIdForIcon:void 0,teamDomain:void 0,openThread:d.a}),DM=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onShareClick=n.onShareClick.bind(n),n}return u()(t,e),o()(t,[{key:"onShareClick",value:function(e){var t=this.props,n=t.share,a=t.fileId,r=t.openThread;e.preventDefault();var i=n.threadTs||n.ts,o=i!==n.ts?n.ts:null,s=a;r({channelId:n.channelId,threadTs:i,highlightTs:o,origin:"file_details",originId:s})}},{key:"getReplyCountText",value:function(e,t,n){var a=e||{},r=a.replyCount,i=a.ts,o=a.threadTs;if(!r)return null;var s="";return s=o&&i!==o?PM.t("from a thread"):PM.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:r}),h.a.createElement(h.a.Fragment,null,h.a.createElement("span",{className:"p-file_details__share_metadata_dot"},"\xb7"),h.a.createElement(G.a,{href:t,onClick:n},h.a.createElement("span",{className:"p-file_details__share_metadata_reply_count"},s)))}},{key:"render",value:function(){var e=this.props,t=e.share,n=e.teamIdForIcon,a=e.teamDomain,r=void 0,i=!1,o=void 0,s=void 0;return n?(r={id:t.channelId,name:t.channelName,is_channel:!0,is_private:!t.isPublic,shared_team_ids:t.sharedTeamIds,team_id:n},i=!0):s=this.onShareClick,a&&(o=Object(id.u)({teamDomain:a,channelId:t.channelId,ts:t.ts,threadTs:t.threadTs})),h.a.createElement("div",{className:"p-file_details__share",key:t.channelId+"_"+t.ts},h.a.createElement(G.a,{href:o,onClick:s,className:"p-file_details__share_channel_link"},h.a.createElement(pe.a,{channel:r,channelId:t.channelId,className:"p-file_details__share_channel",iconProps:{inherit:!0},showTeamIconForXwsChannels:i})),h.a.createElement("span",{className:"p-file_details__share_metadata"},h.a.createElement(AM.a,{timestamp:t.ts,relative:!0}),this.getReplyCountText(t,o,s)))}}]),t}(p.Component);DM.displayName="FileDetailsShareLocation",DM.defaultProps=MM;var xM=Object(_.b)(function(e,t){var n=t.share,a=Object($.d)(e);if(!a)return{};var r=a.id,i=a.enterprise_id,o=a.domain,s=void 0,l=n.teamId===i&&!Object(sa.a)(n.sharedTeamIds)&&!Object(Ei.a)(n.sharedTeamIds,r),c=n.teamId&&n.teamId!==r&&n.teamId!==i;if(l||c){s=Object(_f.a)(n.sharedTeamIds)||n.teamId;var u=Object($.j)(e,[s]);o=Object(te.r)(u&&u[0])?u[0].domain:null}return{teamIdForIcon:s,teamDomain:o}},{openThread:Ke.l})(DM),LM=new x.b("file-details"),FM=(Pu.a.File(),m.b.bool,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"getFormattedSharesData",value:function(e){var t=this,n=[];Object(jd.a)(e.public,function(e,a){Object(jd.a)(e,function(e){var r=t.formatShareData(e,a,!0);r&&n.push(r)})});Object(jd.a)(e.private,function(e,a){Object(jd.a)(e,function(e){var r=t.formatShareData(e,a,!1);r&&n.push(r)})});var a=n.concat([]);return Object(RM.a)(a,"ts","desc")}},{key:"formatShareData",value:function(e,t,n){var a=this.props.featureShipOrgAwareExternalSharedChannels;if("0000000000.000000"===e.ts)return Object(ut.b)().warn("Skipping 0000000000.000000 share for "+this.props.file.id),null;var r=e.reply_count||null,i=e.reply_users,o=e.reply_users_count,s=e.latest_reply||e.ts,l=a?e.internal_team_ids:e.shared_team_ids;return{channelId:t,replyCount:r,replyUsers:i,replyUsersCount:o,latest:s,ts:e.ts,threadTs:e.thread_ts,channelName:e.channel_name,teamId:e.team_id,sharedTeamIds:l,isPublic:n}}},{key:"render",value:function(){var e=this.props.file;if(!e||!e.shares)return null;var t=e.shares,n=!!Object.keys(e.shares).length,a=n&&this.getFormattedSharesData(t);return n&&h.a.createElement("div",{className:"p-file_details__shares"},h.a.createElement("div",{className:"p-file_details__share_divider"},h.a.createElement("span",null,LM.rt("Shared in")),h.a.createElement("hr",null)),a.map(function(t){return h.a.createElement(xM,{key:t.ts+"-"+t.channelId,share:t,fileId:e.id})}))}}]),t}(p.PureComponent));FM.displayName="FileDetailsShares";var BM=FM;FM.defaultProps={file:null,featureShipOrgAwareExternalSharedChannels:!1};var qM=n("s/YD"),UM=new x.b("file-details"),HM=(m.b.func,{tryAgain:d.a});function GM(e){var t=e.tryAgain;return h.a.createElement("div",{role:"alert",className:"p-file_details__error"},h.a.createElement("p",{className:"p-file_details__error_header"},UM.t("Couldn't load file")),h.a.createElement("p",null,UM.rt("If the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text,n=e.key;return h.a.createElement(G.a,{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:n},t)})),h.a.createElement(Re.d,{type:"primary",onClick:t},UM.t("Try Again")))}GM.displayName="FileDetailsError",GM.defaultProps=HM;var WM=new x.b("file-details");function KM(){return h.a.createElement("div",{role:"alert",className:"p-file_details__tombstone"},h.a.createElement("div",{className:"p-file_details__tombstone_icon"},h.a.createElement(se.b,{type:"trash",size:"inherit"})),h.a.createElement("p",null,WM.t("This file was deleted.")))}KM.displayName="FileDetailsTombstone";n("JHKc"),n("FXxD");var VM=new x.b("file-details"),zM=(Pu.a.File(),m.b.string,m.b.bool,m.b.bool,m.b.func,m.b.string,m.b.string,m.b.string,m.b.bool,m.b.bool,m.b.func,{file:null,origin:null,do24hrTime:!1,fileIsFetching:!1,reloadFile:d.a,userId:"",botId:"",ownerName:"",featureReactMemberProfileCard:!1,featureShipOrgAwareExternalSharedChannels:!1,clogFileClick:d.a}),YM=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["renderPreview","onNameClick","clogLinkClick","renderBody"]),n}return u()(t,e),o()(t,[{key:"onNameClick",value:function(e){if(!Object(WI.a)(e)){var t=this.props,n=t.userId,a=t.botId,r=t.featureReactMemberProfileCard;(n||a)&&(e.preventDefault(),e.persist(),r||(a?Object(oM.a)(e,a):Object(iM.a)(e,n)))}}},{key:"clogLinkClick",value:function(e){var t=this.props.file;this.props.clogFileClick({file:t,payload:e})}},{key:"isImage",value:function(){return"image"===Object(rM.q)(this.props.file)}},{key:"renderPreview",value:function(){return h.a.createElement(TM.a,{file:this.props.file,showActions:!1,forceExpanded:!0,largeImage:!0,clogLinkClick:this.clogLinkClick,channelId:"",ts:""})}},{key:"renderUserNameAndTimestamp",value:function(){var e=this.props,t=e.file,n=e.do24hrTime,a=e.ownerName,r=e.userId,i=e.botId,o=e.featureReactMemberProfileCard,s="";Object(rM.G)(t)||(s=h.a.createElement("div",{className:"p-file_details__private"},VM.t("Private file")));var l="";l=i?"/services/"+i:"/team/"+r;var c=void 0;return c=o?h.a.createElement(NM.a,{botId:i,userId:r,onClick:this.onNameClick},h.a.createElement(G.a,{href:l,className:"p-file_details__user_link"},a)):h.a.createElement(G.a,{href:l,className:"p-file_details__user_link",onClick:this.onNameClick},a),h.a.createElement("div",{className:"p-file_details__user_meta"},c,i&&h.a.createElement(SM.a,null),h.a.createElement("div",{className:"p-file_details__upload_date"},VM.t("{date} at {time}",{date:Object(Zt.l)(t.timestamp),time:Object(Zt.p)(t.timestamp,{do24hrTime:n})})),s)}},{key:"renderComments",value:function(){var e=this.props.file;return Object(sa.a)(e.comments)?null:h.a.createElement("div",{className:"p-file_details__comments"},h.a.createElement("hr",{className:"p-file_details__comment_separator"}),h.a.createElement(wM,{comments:e.comments,fileId:e.id}))}},{key:"renderFileDetails",value:function(){var e=this.props,t=e.file,n=e.fileIsFetching,a=e.reloadFile,r=e.featureShipOrgAwareExternalSharedChannels;if(n&&(!t||Object(zr.d)(t)&&!Object(zr.c)(t)))return null;if(!t||Object(zr.c)(t))return h.a.createElement(GM,{tryAgain:a});if(Object(rM.N)(t))return h.a.createElement(KM,null);var i=!Object(rM.I)(t),o={};this.isImage()&&(o.maxWidth=(t.thumb_480_w||t.thumb_360_w)+"px",o.maxHeight=(t.thumb_480_h||t.thumb_360_h)+"px");var s=Object(rM.q)(t),l="image"===s||"snippet"===s,c=f()("p-file_details__meta",{"p-file_details__meta--show_filename":l});return h.a.createElement(h.a.Fragment,null,i?h.a.createElement("div",{className:"p-file_details__meta_container","data-qa":"file_details-meta_container"},h.a.createElement("div",{className:c},l?h.a.createElement(sM.a,{file:t,className:"p-file_details__name"}):null,this.renderUserNameAndTimestamp()),h.a.createElement(IM.a,{file:t,clogLinkClick:this.clogLinkClick,inFileDetails:!0})):null,h.a.createElement("div",{className:"p-file_details__preview",style:o},this.renderPreview()),this.renderComments(),h.a.createElement(BM,{file:t,featureShipOrgAwareExternalSharedChannels:r}))}},{key:"renderBody",value:function(){var e=this;return h.a.createElement("div",{className:"p-file_flexpane__content"},h.a.createElement(Nu.a,null,function(t){var n=t.width,a=t.height;return h.a.createElement(e_.b,{width:n,height:a,fade:!0},h.a.createElement("div",{className:"p-file_details"},e.renderFileDetails()))}))}},{key:"render",value:function(){var e=this.props.origin,t={member_preview:VM.t("Member"),starred_items:VM.t("Starred Items"),search_results:VM.t("Search Results"),channel_page:VM.t("Channel Details"),group_page:VM.t("Channel Info"),im_page:VM.t("Conversation Details"),mentions:VM.t("Activity")},n=VM.t("Files"),a=t[e]||n,r=f()("p-file_flexpane","p-file_flexpane--detail");return h.a.createElement(qM.b,{flexOrigin:e,className:r,title:a,renderBody:this.renderBody,viewId:"file-details",kbNavOrder:Object(Me.a)()?void 0:4.9})}}]),t}(p.PureComponent);YM.displayName="FileDetails",YM.defaultProps=zM;var QM={clogFileClick:function(){return aM.a.apply(void 0,arguments)}},JM=Object(_.b)(function(e,t){var n=t.fileId;if(!n)return{};var a=Object(tM.h)(e,n);if(!a)return{};var r=Object(rM.l)(a),i=r.userId,o=r.botId,s=i?Object(Ue.c)(e,i):null,l=s?Object(ne.n)(s):null,c=o||l,u="";if(c){var d=Object(nM.c)(e,c);d&&d.name&&(u=d.name)}return!u&&s&&(u=Object(ne.P)(e,s)),u||(u=a.username),{file:Object(tM.h)(e,n),useGlobalNav:Object(hb.b)(e),do24hrTime:Object(ue.h)(e,"time24"),featureEmailWorkobjectUi:Object(y.i)(e,"feature_email_workobject_ui"),featureReactMemberProfileCard:Object(y.i)(e,"feature_react_member_profile_card"),featureShipOrgAwareExternalSharedChannels:Object(y.i)(e,"feature_ship_org_aware_external_shared_channels"),userId:i,botId:c,ownerName:u}},QM)(YM),XM=Object(lM.a)(JM,{alwaysFetchOnMount:!0}),ZM=n("iqxf"),$M=n("UuzP"),eD=n("b7Ww"),tD=n("1Uzj"),nD=n("fX3E"),aD=n("kX2h"),rD=new x.b("files"),iD=(m.b.object,m.b.func,m.b.func.isRequired,{member:null,onChange:d.a}),oD=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n.state={value:e.member?e.member.id:null,selectedOption:e.member?sD(e.member.id):null},n}return u()(t,e),o()(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(function(){return{value:e.member?e.member.id:null,selectedOption:e.member?sD(e.member.id):null}})}},{key:"onChange",value:function(e,t){this.setState(function(){return{value:e,selectedOption:{value:e,label:t}}}),this.props.onChange(e)}},{key:"render",value:function(){return h.a.createElement(aD.a,{className:"p-file_list__select p-file_list__members_select",placeholder:rD.t("Everyone",{fallbackHash:"c756f6af1f03c9ce381cb85934ffb274e2f54af3"}),onChange:this.onChange,value:this.state.value,selectedOption:this.state.selectedOption,optionsFetcher:this.props.searchMembers,optionsRowHeight:30})}}]),t}(p.PureComponent);function sD(e){return{value:e,label:h.a.createElement("div",{className:"p-file_list__select__member"},h.a.createElement(mk.b,{id:e,size:"small"}))}}oD.displayName="FilesFlexpaneMembersSelect",oD.defaultProps=iD;var lD=Object(_.b)(function(e,t){var n=t.userId;return{member:Object(Ue.c)(e,n)}},function(e){return{searchMembers:function(t){return e(Object(kE.a)({query:t,options:{entities:{members:{includeSelf:!0,onlyLocalTeam:!0}},sort:{selfFirst:!0},allowEmptyQuery:!0}})).then(function(e){return{options:e.map(function(e){return sD(e.id)})}})}}})(oD),cD=(n("vr4i"),new x.b("files")),uD=Object(tD.a)(eD.a),dD=(m.b.arrayOf(m.b.shape({id:m.b.string,ts:m.b.number})),m.b.string,m.b.string,m.b.shape({key:m.b.string,offset:m.b.number}),m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.object.isRequired,m.b.bool,m.b.func,m.b.bool,{files:[],filetype:"",user:"",scrollmark:void 0,fetchFilesPre:d.a,fetchFilesPost:d.a,saveScrollmark:d.a,setFiletype:d.a,setUser:d.a,previewFile:d.a,useGlobalNav:!1,clogFileClick:d.a,isInEnforceFileLimitTreatment:!1}),pD=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onFileClick","onScroll","fetchPre","fetchPost","fetchAround","renderRow","renderFile","clogFileClick","clogPricingLinkClick","renderBody","focus","isEmpty","onItemTabWithin"]),n.requestPre=null,n.requestPost=null,n.reachedStart=!1,n.reachedEnd=!1,n.keys=null,n.layout=new rd.a,n.list=h.a.createRef(),n.flexpane=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.scrollmark,n=e.clogger;if(t){var a=t.key,r=t.offset;this.layout.setAnchor(a,r),this.props.saveScrollmark(null)}this.shouldShowStorageWarningBanner()&&n.track(ve.k.GROWTH_PRICING,{contexts:{ui_context:{action:ve.v.IMPRESSION,step:ve.z.FILE_PANE,ui_component:ve.w.FILE_STORAGE_LIMIT_BANNER}}})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.filetype,a=t.user;e.filetype===n&&e.user===a||(this.requestPre&&this.requestPre.cancel(),this.requestPost&&this.requestPost.cancel(),this.requestPre=null,this.requestPost=null,this.reachedStart=!1,this.reachedEnd=!1,this.layout&&this.layout.setAnchor(!1))}},{key:"onFileClick",value:function(e){var t=e.id,n=this.list.current;n&&(t&&(this.props.clogger.track(ve.k.FLEXPANE_FILE_CLICKED,{click_file_id:t}),this.props.saveScrollmark({key:t,offset:this.layout.getOffsetForKey(t)-n.getScrollTop()}),this.props.previewFile({fileId:t,flexOrigin:"files"})))}},{key:"onScroll",value:function(){this.layout.anchor&&this.layout.setAnchor(!1)}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"fetchPre",value:function(){var e=this;if(this.requestPre)return!1;if(this.reachedStart)return!1;var t=this.props,n=t.filetype,a=t.user;return this.requestPre=this.props.fetchFilesPre({types:n,user:a}),this.requestPre.then(function(){1===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).paging.page&&(e.reachedStart=!0)}).finally(function(){e.requestPre=null})}},{key:"fetchPost",value:function(){var e=this;if(this.requestPost)return!1;if(this.reachedEnd)return!1;var t=this.props,n=t.filetype,a=t.user;return this.requestPost=this.props.fetchFilesPost({types:n,user:a}),this.requestPost.then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).paging;t.page>=t.pages&&(e.reachedEnd=!0)}).finally(function(){e.requestPost=null})}},{key:"fetchAround",value:function(){return(!this.requestPre||!this.requestPost)&&(this.reachedEnd?this.fetchPre():this.reachedStart?this.fetchPost():this.fetchPre())}},{key:"clogFileClick",value:function(e,t){this.props.clogFileClick({file:t,payload:e})}},{key:"clogPricingLinkClick",value:function(){this.props.clogger.track(ve.k.GROWTH_PRICING,{contexts:{ui_context:{action:ve.v.CLICK,step:ve.z.FILE_PANE,ui_element:ve.y.PRICING_LINK,ui_component:ve.w.FILE_STORAGE_LIMIT_BANNER}}})}},{key:"isEmpty",value:function(){return!this.props.files.length&&this.reachedStart&&this.reachedEnd}},{key:"shouldShowStorageWarningBanner",value:function(){return this.props.isInEnforceFileLimitTreatment}},{key:"renderRow",value:function(e){var t=this.keys[e];if(!t)return null;switch(t[0]){case"L":return h.a.createElement("div",{className:"p-file_list__loading"},cD.t("Loading\u2026"));case"P":return h.a.createElement("div",{className:"p-file_list__empty"},cD.t("No matching files were found."));default:return this.renderFile(e)}}},{key:"renderFile",value:function(e){var t=this.props.files[e]&&this.props.files[e].id;if(!t)return null;var n=e===this.props.files.length-1,a=f()("p-file_list__file",{"p-file_list__file--last":n});return h.a.createElement(uD,{fileId:t,className:a,clogLinkClick:this.clogFileClick,fullWidth:!0,useRowAction:!0})}},{key:"renderStorageWarningBanner",value:function(){var e=this;return h.a.createElement("div",{className:"p-file_flexpane__storage-warning-container"},h.a.createElement("div",{className:"display_flex"},h.a.createElement(se.b,{className:"p-message_limit_banner__graphic",type:"eye-closed"}),h.a.createElement("div",null,h.a.createElement("span",null,cD.rt("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit. <a>See paid plans</a>",null,function(t){var n=t.text;return h.a.createElement(G.a,{href:"/pricing?ui_step="+ve.z.FILE_PANE+"&ui_element="+ve.y.PRICING_LINK,onClick:e.clogPricingLinkClick,target:"new","data-qa":"file-flexpane__pricing-link"},n)})))))}},{key:"renderBody",value:function(){var e=this,t=this.props.files.map(function(e){return e.id});return this.keys=[].concat(Le()(t)),this.reachedEnd||this.keys.push("Loading"+this.keys.length),this.isEmpty()&&this.keys.push("Placeholder"),h.a.createElement(h.a.Fragment,null,this.shouldShowStorageWarningBanner()&&this.renderStorageWarningBanner(),h.a.createElement("div",{className:"p-file_list"},h.a.createElement(Nu.a,null,function(t){var n=t.width,a=t.height;return h.a.createElement(Xu.a,{width:n,height:a,keys:e.keys,layout:e.layout,rowRenderer:e.renderRow,onScroll:e.onScroll,ref:e.list,loadAround:e.fetchAround,loadPre:e.fetchPre,loadPost:e.fetchPost,onItemTabWithin:e.onItemTabWithin,onItemClick:e.onFileClick})})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.filetype,a=t.useGlobalNav,r=t.user;return h.a.createElement(qM.b,{ref:this.flexpane,focus:this.focus,isEmpty:this.isEmpty(),title:cD.t("Files"),className:f()("p-file_flexpane","p-file_flexpane--list"),bodyClassName:"p-file_flexpane__body",renderBody:this.renderBody,renderControls:function(){return h.a.createElement("div",{className:f()("p-file_list__filters",{"p-file_list__filters--global-nav":a})},h.a.createElement(nD.a,{filetype:n,onChange:e.props.setFiletype}),h.a.createElement(lD,{userId:r,onChange:function(t){e.props.setUser(t)}}))},viewId:"file-list",kbNavOrder:Object(Me.a)()?void 0:4.8})}}]),t}(p.PureComponent);pD.displayName="FileList",pD.defaultProps=dD;var hD={fetchFilesPre:function(){return ZM.c.apply(void 0,arguments)},fetchFilesPost:function(){return ZM.b.apply(void 0,arguments)},saveScrollmark:function(){return ZM.i.apply(void 0,arguments)},setFiletype:function(){return ZM.j.apply(void 0,arguments)},setUser:function(){return ZM.k.apply(void 0,arguments)},previewFile:function(){return Ke.c.apply(void 0,arguments)},clogFileClick:function(){return aM.a.apply(void 0,arguments)}},mD=Object(_.b)(function(e){return{files:Object(ZM.e)(e),scrollmark:Object(ZM.f)(e),filetype:Object(ZM.d)(e),user:Object(ZM.g)(e),useGlobalNav:Object(hb.b)(e),clogger:Object(ye.a)({state:e}),isInEnforceFileLimitTreatment:Object($M.a)(e)}},hD)(function(e){var t=e.forwardedRef,n=Be()(e,["forwardedRef"]);return h.a.createElement(pD,Z()({ref:t},n))}),bD=h.a.forwardRef(function(e,t){return h.a.createElement(mD,Z()({forwardedRef:t},e))}),fD=n("0rwR"),_D=n("VBRD"),gD=n("Xuqh"),vD=n("AgpX"),yD=n("WeBd"),kD=n("0DE1"),OD=n("8Sv9"),jD=n("3tRM"),CD=n("Cudy"),ED=n("kd6D"),wD=(n("A4tE"),{right:"right",bottom:"bottom"}),SD=(m.b.string,m.b.string.isRequired,m.b.node,m.b.oneOf(Object($v.a)(wD)),m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.object,m.b.string,m.b.string,m.b.bool,m.b.bool,{className:void 0,member:void 0,memberPrimaryName:void 0,memberSecondaryName:void 0,secondaryContent:void 0,secondaryContentPosition:wD.bottom,invert:!1,showAvatar:!0,showDraftIcon:!1,showPresence:!0,showStatus:!0,showTooltip:!0,isDeactivated:!1,useShortMode:!1});function ID(e){var t=e.className,n=e.id,a=e.invert,r=e.member,i=e.memberPrimaryName,o=e.memberSecondaryName,s=e.secondaryContent,l=e.secondaryContentPosition,c=e.showAvatar,u=e.showDraftIcon,d=e.showPresence,p=e.showStatus,m=e.showTooltip,b=e.isDeactivated,_=e.useShortMode,g=Object(ne.ab)(r),v=Object(ne.eb)(r),y=Object(ne.yb)(r),k=Object(zr.c)(n),O=Object(zr.d)(n),j=h.a.createElement(CD.a,{"data-qa":"member-entity__primary-name",name:i,invert:a&&!b,isAppOrBot:g,isDeleted:v,isSelf:y,isNonExistent:k,isUnknown:O}),C=h.a.createElement(jD.a,{className:"c-member__secondary-name","data-qa":"member-entity__secondary-name"},o),E=r&&h.a.createElement(OD.a,{className:"c-member__title","data-qa":"member-entity__title"},Object(ne.M)(r)),w=h.a.createElement(se.b,{type:"pencil",size:"inherit",className:"c-member__draft_icon","aria-hidden":!0,"data-qa":"member-entity__draft-icon"}),S=!v&&h.a.createElement(Te.a,{memberId:n,className:"c-member__presence",invert:a&&!b,"data-qa":"member-entity__presence"}),I=h.a.createElement(Ne.b,{memberId:n,tooltip:m,animated:_,className:"c-member__current-status c-member__current-status--medium","data-qa":"member-entity__status"}),T=l===wD.bottom&&s?h.a.createElement(kD.a,{"data-qa":"member-entity__metadata"},s):null,N=h.a.createElement("span",{className:"c-member__primary_content"},j,d&&S,!_&&C,p&&I),R=v||b?ED.c.dim:null,A=f()(t,"c-member","c-member--medium",{"c-member--with-presence":d});return h.a.createElement(Qw.a,{avatar:function(e){return c&&(u?w:h.a.createElement(Ye.b,Z()({},e,{size:ED.a.medium,userId:n,"data-qa":"member-entity__avatar",isInteractive:!1})))},className:A,size:"medium",style:R,text:N,subtext:E,metadata:!v&&T,"data-qa":"medium_member_entity"})}ID.displayName="MediumMemberEntity",ID.defaultProps=SD;var TD=Object(_.b)(function(e,t){var n=t.id,a=t.isDraftContext,r=t.showStatus,i=t.isUnknown,o=Object(Ue.c)(e,n),s=void 0;if(a){var l=Object(re.j)(e,n);s=!(!l||!Object(he.y)(e,l.id))}return{member:o,memberPrimaryName:Object(ne.P)(e,o,!1,!1),memberSecondaryName:Object(ne.G)(e,o),showDraftIcon:s,showStatus:r&&Object(ne.T)(o),isUnknown:Object(TR.a)(i)?i:Object(zr.d)(o)}})(ID),ND=(m.b.string,m.b.string.isRequired,m.b.bool,m.b.bool,m.b.bool,m.b.node,m.b.oneOf(Object($v.a)(wD)),m.b.bool,m.b.number,{className:void 0,isActive:!1,isDeactivated:!1,isDisabled:!1,secondaryContent:void 0,secondaryContentPosition:wD.right,showUnreadCount:!1,unreadCount:null}),RD=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.id,a=e.isActive,r=e.isDeactivated,i=e.isDisabled,o=e.secondaryContent,s=e.secondaryContentPosition,l=e.showUnreadCount,c=e.unreadCount,u=h.a.createElement(yD.b,{className:"c-member__unread_count",count:c,style:yD.a.red}),d=h.a.createElement("span",{className:"c-member__details","data-qa":"member-entity__secondary-content"},o),p=h.a.createElement("span",{className:"c-member__secondary_content"},o&&s===wD.right&&d,l&&c&&u),m=f()(t,"c-medium_member_list_entity"),b=void 0;return a?b=i||r?ED.c.highlightDim:ED.c.highlightLight:(i||r)&&(b=ED.c.dim),h.a.createElement(Jw.a,{"data-qa":"medium_member_list_entity",className:m,style:b,primaryContent:h.a.createElement(TD,Z()({id:n,isDeactivated:r},this.props,{secondaryContent:s===wD.right?null:o})),secondaryContent:p,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,size:"medium"})}}]),t}(p.Component);RD.displayName="MediumMemberListEntity",RD.defaultProps=ND;var AD=Object(_.b)(function(e,t){var n=t.id,a=Object(Ue.c)(e,n);return{member:a,unreadCount:Object(ne.p)(e,a)}})(RD),PD=(m.b.string.isRequired,m.b.func,m.b.shape({track:m.b.func.isRequired}).isRequired,m.b.func,{showMemberProfile:d.a,saveScrollmarkForKey:d.a}),MD=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this.props,t=e.id,n=e.clogger;this.props.showMemberProfile({memberId:t}),this.props.saveScrollmarkForKey(t),n.track("ORGANIZATION_DIRECTORY_CLICK",{})}},{key:"render",value:function(){var e=this.props.id;return h.a.createElement("div",{className:"p-member_directory__member_row","data-qa":"member_directory_show_profile","data-qa-member":e,role:"presentation",onClick:this.onClick},h.a.createElement(AD,{id:e}))}}]),t}(p.Component);MD.displayName="SearchableMemberListMember",MD.defaultProps=PD;var DD={showMemberProfile:function(){return Ke.j.apply(void 0,arguments)},saveScrollmark:function(){return fD.h.apply(void 0,arguments)}},xD=Object(_.b)(function(e){return{clogger:Object(ye.a)({state:e})}},DD)(MD),LD=(n("GhVE"),new x.b("member_directory")),FD=(m.b.arrayOf(m.b.string),m.b.shape({key:m.b.string,offset:m.b.number}),m.b.string,m.b.func,m.b.string,m.b.func,m.b.func,m.b.func,m.b.arrayOf(m.b.string),m.b.bool,m.b.bool,m.b.string,m.b.shape({track:m.b.func.isRequired}).isRequired,m.b.bool,m.b.func,{memberIds:[],scrollmark:void 0,searchQuery:void 0,setSearchQuery:d.a,filter:"people",setFilter:d.a,fetchMembersPost:d.a,saveScrollmark:d.a,nonExactMatchMemberIds:[],isEnterprise:!1,isFreeTeamAdmin:!1,ariaLabel:void 0,featureSonicMemberDirectory:!1,onItemTabWithin:d.a}),BD=100,qD=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onScroll","onClearSearch","onViewMatchesClick","onPricingClick","saveScrollmarkForKey","fetchPost","fetchAround","fetchMembers","fetchNonExactMatchMembers","renderRow","getListKeys","shouldFetchNonExactMembers","isFocusableItem","focus"]),n.requestPost=null,n.requestNonExactMatchMembers=null,n.keys=null,n.list=h.a.createRef(),n.layout=new rd.a,n.state={reachedEnd:!1},n.debouncedFetchPost=Object(Ll.a)(n.fetchPost,BD),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){if(this.props.scrollmark){var e=this.props.scrollmark,t=e.key,n=e.offset;this.layout.setAnchor(t,n),this.props.saveScrollmark(null)}}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.searchQuery,a=t.filter,r=t.clogger;e.searchQuery===n&&e.filter===a||(this.requestPost&&this.requestPost.cancel(),this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel(),this.requestPost=null,this.requestNonExactMatchMembers=null,this.layout&&this.layout.setAnchor(!1),this.setReachedEnd(!1,this.fetchAround),e.searchQuery!==n&&r.track("ORGANIZATION_DIRECTORY_KEYPRESS",{}),e.filter!==a&&r.track("ORGANIZATION_DIRECTORY_FILTER",{organization_directory_filter:a}))}},{key:"componentWillUnmount",value:function(){this.requestPost&&this.requestPost.cancel(),this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel()}},{key:"onScroll",value:function(){this.layout.anchor&&this.layout.setAnchor(!1)}},{key:"onClearSearch",value:function(){this.props.setSearchQuery(""),this.props.setFilter("people")}},{key:"onViewMatchesClick",value:function(){this.props.setFilter("people")}},{key:"onPricingClick",value:function(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{ui_element:"pricing_link",step:"team_directory",action:"click"}}})}},{key:"setReachedEnd",value:function(e,t){this.setState(function(){return{reachedEnd:e}},t)}},{key:"getListKeys",value:function(){return this.props.memberIds.filter(function(e){return"L"!==e[0]})}},{key:"getEmptyStateLabel",value:function(){if(!this.props.featureSonicMemberDirectory)return null;var e=this.props,t=e.filter,n=e.searchQuery,a=e.isEnterprise,r={query:h.a.createElement("strong",null,n)};switch(t){case"people":return n?LD.rt("No members found matching {query}",r):LD.t("No members found");case"admins":return n?a?LD.rt("No workspace admins found matching {query}",r):LD.rt("No admins found matching {query}",r):a?LD.t("No workspace admins found"):LD.t("No admins found");case"bots":return n?LD.rt("No bots found matching {query}",r):LD.t("No bots found");case"org_members":return n?LD.rt("No members found matching {query}",r):LD.t("No members found");case"org_admins":return n?LD.rt("No org admins found matching {query}",r):LD.t("No org admins found");case"guests":return n?LD.rt("No guests found matching {query}",r):LD.t("No guests found");case"deactivated":return n?LD.rt("No deactivated members found matching {query}",r):LD.t("No deactivated members found");default:return n?LD.rt("No members found matching {query}",r):LD.t("No members found")}}},{key:"getNonExactMatchEmptyStateLabel",value:function(){if(!this.props.featureSonicMemberDirectory)return null;var e=this.props,t=e.filter,n=e.isEnterprise,a=e.searchQuery,r={query:h.a.createElement("strong",null,a)};switch(t){case"admins":return n?LD.rt("No workspace admins match {query}, but there are other members who do.",r):LD.rt("No admins match {query}, but there are other members who do.",r);case"bots":return LD.rt("No bots match {query}, but there are other members who do.",r);case"org_members":return LD.rt("No members match {query}, but there are other members who do.",r);case"org_admins":return LD.rt("No org admins match {query}, but there are other members who do.",r);case"guests":return LD.rt("No guests match {query}, but there are other members who do.",r);case"deactivated":return LD.rt("No deactivated members match {query}, but there are other members who do.",r);default:return LD.rt("No members match {query}, but there are other members who do.",r)}}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"saveScrollmarkForKey",value:function(e){var t=this.list.current;t&&e&&this.props.saveScrollmark({key:e,offset:this.layout.getOffsetForKey(e)-t.getScrollTop()})}},{key:"fetchPost",value:function(){var e=this;return!this.requestPost&&(!this.state.reachedEnd&&(this.requestPost=this.fetchMembers(),this.requestPost.finally(function(){e.requestPost=null})))}},{key:"shouldFetchNonExactMembers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.props,n=t.filter,a=t.searchQuery;return!Object(sa.a)(a)&&"people"!==n&&0===e.length}},{key:"fetchMembers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.props.fetchMembersPost({isNonExactMatchMembersSearch:t}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.nextMarker,a=t.members;!e.props.searchQuery&&n||e.setReachedEnd(!0),e.shouldFetchNonExactMembers(a)&&e.fetchNonExactMatchMembers()})}},{key:"fetchAround",value:function(){return!this.requestPost&&!this.state.reachedEnd&&this.debouncedFetchPost()}},{key:"fetchNonExactMatchMembers",value:function(){var e=this;if(this.requestNonExactMatchMembers)return!1;return this.requestNonExactMatchMembers=this.fetchMembers(!0),this.requestNonExactMatchMembers.finally(function(){e.requestNonExactMatchMembers=null})}},{key:"isFocusableItem",value:function(e){return"L"!==e.key}},{key:"renderRow",value:function(e){if(!this.props.featureSonicMemberDirectory)return null;var t=this.keys[e];if(!t)return null;switch(t[0]){case"L":return h.a.createElement("div",{className:"p-member-directory__loading"},LD.t("Loading\u2026"));default:return this.renderMember(t)}}},{key:"renderMember",value:function(e){return h.a.createElement(xD,{id:e,saveScrollmarkForKey:this.saveScrollmarkForKey})}},{key:"renderEmptyListView",value:function(){var e=this;if(!this.props.featureSonicMemberDirectory)return null;var t=this.props,n=t.searchQuery,a=t.nonExactMatchMemberIds,r=t.filter,i=t.isFreeTeamAdmin,o=t.clogger,s=LD.t("Clear Search"),l=LD.t("View Matches");if(a.length)return h.a.createElement(gD.a,{className:"p-member-directory__empty_list",description:this.getNonExactMatchEmptyStateLabel(),primaryActionText:l,onClickPrimaryAction:this.onViewMatchesClick,secondaryActionText:s,onClickSecondaryAction:this.onClearSearch});if(!n&&"guests"===r&&i){var c=LD.rt("Workspaces on paid plans can invite guests, like contractors, vendors, or clients. <a>See pricing plans</a>",null,function(t){var n=t.key,a=t.text;return h.a.createElement(vD.a,{key:n,href:"/pricing?ui_step=86&ui_element=5",class:"no_underline",target:"_blank",onClick:e.onPricingClick},a)});return o.track("GROWTH_PRICING",{contexts:{ui_context:{step:"team_directory",action:"impression"}}}),h.a.createElement(gD.a,{className:"p-member-directory__empty_list",description:c,primaryActionText:s,onClickPrimaryAction:this.onClearSearch})}return h.a.createElement(gD.a,{className:"p-member-directory__empty_list",description:this.getEmptyStateLabel(),primaryActionText:s,onClickPrimaryAction:this.onClearSearch})}},{key:"render",value:function(){var e=this;return this.keys=this.getListKeys(),!this.keys.length&&this.state.reachedEnd?this.renderEmptyListView():(this.state.reachedEnd||this.keys.push("Loading"+this.keys.length),h.a.createElement(_D.a,null,function(t){var n=t.measureRef,a=t.width,r=t.height;return h.a.createElement("div",{className:"p-member_directory__member_list",ref:n},h.a.createElement(Xu.a,{width:a,height:r,keys:e.keys,layout:e.layout,rowRenderer:e.renderRow,onScroll:e.onScroll,ref:e.list,loadAround:e.fetchAround,loadPost:e.debouncedFetchPost,isFocusableItem:e.isFocusableItem,onItemTabWithin:e.props.onItemTabWithin,ariaLabel:e.props.ariaLabel}))}))}}]),t}(p.PureComponent);qD.displayName="SearchableMemberList",qD.defaultProps=FD;var UD=Object(_.b)(function(e){return{scrollmark:Object(fD.f)(e),searchQuery:Object(fD.g)(e),filter:Object(fD.c)(e),memberIds:Object(fD.d)(e),nonExactMatchMemberIds:Object(fD.e)(e),isEnterprise:Object(Qg.d)(e),isFreeTeamAdmin:!Object(te.B)(Object($.d)(e))&&Object(ne.X)(Object(Ue.b)(e)),clogger:Object(ye.a)({state:e}),featureSonicMemberDirectory:Object(y.i)(e,"feature_sonic_member_directory")}},{fetchMembersPost:fD.b,saveScrollmark:fD.h,setSearchQuery:fD.j,setFilter:fD.i})(function(e){var t=e.forwardedRef,n=Be()(e,["forwardedRef"]);return h.a.createElement(qD,Z()({ref:t},n))}),HD=h.a.forwardRef(function(e,t){return h.a.createElement(UD,Z()({forwardedRef:t},e))}),GD=(n("cYut"),new x.b("member_directory")),WD=(m.b.bool,m.b.bool,m.b.string,m.b.func,m.b.string,m.b.string,m.b.array,m.b.object,{featureSonicMemberDirectory:!1,isEnterprise:!1,selectedFilter:void 0,onMenuItemSelected:d.a,workspaceName:void 0,enterpriseOrgName:void 0,externalWorkspaces:[],menuProps:void 0}),KD="people",VD="org_members",zD="org_admins",YD="members",QD="admins",JD="bots",XD="guests",ZD="deactivated",$D=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.memberDirectoryStrings=n.props.featureSonicMemberDirectory?{people:GD.t("Everyone"),org_members:GD.t("All Members"),org_admins:GD.t("Org Admins"),members:GD.t("All Members"),admins:n.props.isEnterprise?GD.t("Workspace Admins"):GD.t("Admins"),bots:GD.t("Bots"),guests:GD.t("Guests"),deactivated:GD.t("Deactivated accounts")}:null,n}return u()(t,e),o()(t,null,[{key:"menuSeparator",value:function(){return{type:"separator"}}}]),o()(t,[{key:"getLabel",value:function(e){return this.memberDirectoryStrings[e]}},{key:"getWorkspaceSectionLabel",value:function(){var e=this.props,t=e.isEnterprise,n=e.externalWorkspaces,a=e.workspaceName;if(!e.featureSonicMemberDirectory)return null;var r=n.length>0;return t?GD.t("{workspaceName} (current workspace)",{workspaceName:a}):r?a:""}},{key:"buildMenuItemTemplate",value:function(e){var t=this.props,n=t.selectedFilter,a=t.onMenuItemSelected,r=h.a.createElement(se.b,{type:"check-small",className:"p-member_directory_menu--icon"});return{label:this.getLabel(e),click:function(){return a(e)},icon:n===e?r:null,className:n===e?"p-member_directory_menu--selected-item":""}}},{key:"maybeBuildOrgFilterSection",value:function(){var e=this.props,n=e.isEnterprise,a=e.enterpriseOrgName;if(!n)return[];var r={type:"header",label:a};return[t.menuSeparator(),r,this.buildMenuItemTemplate(VD),this.buildMenuItemTemplate(zD)]}},{key:"buildWorkspaceFilterSection",value:function(){var e={type:"header",label:this.getWorkspaceSectionLabel()};return[t.menuSeparator(),e,this.buildMenuItemTemplate(YD),this.buildMenuItemTemplate(QD),this.buildMenuItemTemplate(XD),this.buildMenuItemTemplate(JD)]}},{key:"maybeBuildExternalWorkspaceSection",value:function(){var e=this.props,n=e.externalWorkspaces,a=e.selectedFilter,r=e.onMenuItemSelected;if(!e.featureSonicMemberDirectory)return null;var i=n.length>0,o=h.a.createElement(se.b,{type:"check-small",className:"p-member_directory_menu--icon"});if(!i)return[];var s={type:"header",label:GD.t("External Organizations")},l=n.map(function(e){var t=Object(te.i)(e);return{label:Object(te.e)(e),click:function(){return r(t)},icon:a===t?o:null,className:a===t?"p-member_directory_menu--selected-item":""}});return[t.menuSeparator(),s].concat(Le()(l))}},{key:"render",value:function(){var e=this.props,n=e.featureSonicMemberDirectory,a=e.menuProps;if(!n)return null;var r=[this.buildMenuItemTemplate(KD)].concat(Le()(this.maybeBuildOrgFilterSection()),Le()(this.buildWorkspaceFilterSection()),Le()(this.maybeBuildExternalWorkspaceSection()),[t.menuSeparator(),this.buildMenuItemTemplate(ZD)]);return h.a.createElement(ie.a,Z()({},a,{template:r}))}}]),t}(p.PureComponent);$D.displayName="MemberDirectoryMenu";$D.defaultProps=WD;var ex=Object(_.b)(function(e,t){var n=t.externalTeams,a=Object($.d)(e),r=Object(y.l)(e),i={featureSonicMemberDirectory:Object(y.i)(e,"feature_sonic_member_directory"),workspaceName:Object(te.e)(a),isEnterprise:r,externalWorkspaces:n.map(function(t){return Object($.i)(e,t)})};return r&&(i.enterpriseOrgName=Object($.e)(e)),i})($D),tx=(n("5NHF"),new x.b("member_directory")),nx=(m.b.bool,m.b.bool,m.b.func,m.b.string,m.b.func,m.b.string,m.b.bool,m.b.bool,m.b.arrayOf(m.b.string),m.b.string,m.b.func,m.b.bool,{isEnterprise:!1,isAdmin:!1,isRestricted:!1,setSearchQuery:d.a,setFilter:d.a,searchQuery:"",filter:"people",featureSonicMemberDirectory:!1,isVisible:!1,flexParams:[],teamUrl:"/",fetchMemberCountsForTeam:d.a}),ax=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onSearchInputChange","onMenuItemSelected","renderMenu","renderBody","focus","onItemTabWithin"]),n.state={externalTeams:[]},n.list=h.a.createRef(),n.flexpane=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.fetchExternalTeams()}},{key:"onSearchInputChange",value:function(e){var t=e.target.value||"";this.props.setSearchQuery(t)}},{key:"onMenuItemSelected",value:function(e){this.props.setFilter(e)}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"getTitle",value:function(){var e=this.props,t=e.featureSonicMemberDirectory,n=e.isEnterprise;return t?n?tx.t("Organization Directory"):tx.t("Workspace Directory"):null}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"fetchExternalTeams",value:function(){var e=this;this.props.fetchMemberCountsForTeam().then(function(t){t&&t.external_teams&&e.setState(function(){return{externalTeams:Object.keys(t.external_teams)}})})}},{key:"renderSearch",value:function(){return this.props.featureSonicMemberDirectory?h.a.createElement("div",{className:"p-member_directory__search"},h.a.createElement(AE.a,{value:this.props.searchQuery,onChange:this.onSearchInputChange,placeholder:tx.t("Search by name or title"),icon:"search",autoFocus:!0,inputAriaLabel:tx.t("Search members by name or title",{fallbackHash:"4be82cb9b1458f2d26a012d16010b3630c49c611"})})):null}},{key:"renderMenu",value:function(e){return h.a.createElement(ex,{onMenuItemSelected:this.onMenuItemSelected,selectedFilter:this.props.filter,menuProps:e,externalTeams:this.state.externalTeams})}},{key:"renderFilterIconButton",value:function(){if(!this.props.featureSonicMemberDirectory)return null;if(this.props.isRestricted)return null;var e="people"!==this.props.filter,t=e?tx.t("Filter members (filter active)"):tx.t("Filter members");return h.a.createElement(ie.e,{renderMenu:this.renderMenu,position:"bottom-left"},h.a.createElement(Nd.a,{icon:"filters","data-qa":"p-member_directory_menu_trigger",showBadge:e,"aria-label":t}))}},{key:"renderBody",value:function(){return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"p-member_directory__search_filter_container","data-qa":"member_directory"},this.renderSearch(),this.renderFilterIconButton()),h.a.createElement(HD,{ref:this.list,onItemTabWithin:this.onItemTabWithin,ariaLabel:this.getTitle()}))}},{key:"render",value:function(){var e=this.props,t=e.isVisible,n=e.flexParams,a=e.teamUrl;return e.featureSonicMemberDirectory&&t?n.length?null:h.a.createElement(qM.b,{ref:this.flexpane,focus:this.focus,title:this.getTitle(),renderBody:this.renderBody,kbNavOrder:Object(Me.a)()?void 0:5,viewId:"member-directory",headerProps:{optionsHref:this.props.isAdmin?a+"admin":void 0,optionsIconType:"cog-o",optionsTooltipText:tx.t("Manage members")}}):null}}]),t}(p.Component);ax.displayName="MemberDirectoryFlexpane",ax.defaultProps=nx;var rx={setSearchQuery:function(){return fD.j.apply(void 0,arguments)},setFilter:function(){return fD.i.apply(void 0,arguments)},fetchMemberCountsForTeam:function(){return ug.b.apply(void 0,arguments)}},ix=Object(_.b)(function(e){var t=Object(O.h)(e),n=!Object(Me.a)()&&"team"===t||"directory"===t;return{featureSonicMemberDirectory:Object(y.i)(e,"feature_sonic_member_directory"),isEnterprise:Object(y.l)(e),isAdmin:Object(ne.X)(Object(Ue.b)(e)),isRestricted:Object(ne.xb)(Object(Ue.b)(e)),searchQuery:Object(fD.g)(e),filter:Object(fD.c)(e),flexParams:Object(O.c)(e),teamUrl:Object(te.o)(Object($.d)(e)),isVisible:n}},rx)(ax),ox=n("3JmS"),sx=n("kyN7"),lx=n("Ect7"),cx=n("YcId"),ux=n("RoDk"),dx=n("bkaq"),px=n("ICFZ"),hx=n("/K2e"),mx=new x.b("member_profile"),bx=(m.b.bool,m.b.object.isRequired,m.b.object.isRequired,m.b.func,m.b.func,m.b.object.isRequired,m.b.func,m.b.bool,{isPresenceActive:!1,openPrefsModal:d.a,showFileList:d.a,toggleUserPresence:d.a,userCanEditCustomResponses:!1});function fx(e){var t=e.isPresenceActive,n=e.member,a=e.menuProps,r=e.openPrefsModal,i=e.showFileList,o=e.team,s=e.toggleUserPresence,l=e.userCanEditCustomResponses;if(!Object(zw.a)().featureModernProfileFlexpane)return null;var c=void 0;if(Object(ne.yb)(n)){var u=void 0;u=t?mx.t("Set yourself away"):mx.t("[AWAY] Set yourself active"),c=[{label:mx.t("View preferences"),click:function(){return r()}},{label:mx.t("Account settings"),href:Object(te.o)(o,"/account/settings")},{type:"separator"},{label:mx.t("View your files"),click:function(){return i({user:n.id})}},{label:u,click:function(){return s()}}]}else c=[{label:mx.t("View files"),click:function(){return i({user:n.id})}}],Object(ne.zb)(n)&&l&&c.push({label:mx.t("Create/edit Slackbot responses"),href:Object(te.o)(o,"/customize/slackbot")});return Object(px.a)()&&(c.push({type:"separator"}),c.push({label:mx.t("Copy member ID"),description:n.id,click:function(){return Object(px.b)(n.id)}})),h.a.createElement(hx.a,Z()({},a,{template:c}))}fx.displayName="MemberProfileOverflowMenu",fx.defaultProps=bx;var _x={openPrefsModal:function(){return fe.a.apply(void 0,arguments)},showFileList:function(){return Ke.g.apply(void 0,arguments)},toggleUserPresence:function(){return He.h.apply(void 0,arguments)}},gx=Object(_.b)(function(e,t){var n=t.member;return{isPresenceActive:Object(He.f)(e,n.id)===He.a,userCanEditCustomResponses:Object(It.F)(e)}},_x)(fx),vx=n("G7w5"),yx=(n("UCMe"),m.b.string,m.b.object,m.b.object,m.b.object,{currentMemberId:void 0,member:void 0,memberTeam:void 0,team:void 0});function kx(e){var t=e.currentMemberId,n=e.member,a=e.memberTeam,r=e.team,i=Object(p.useMemo)(function(){var e=[vx.a.STATUS,vx.a.NAME,vx.a.TIME,vx.a.PHONE,vx.a.EMAIL,vx.a.CUSTOM,vx.a.GUEST,vx.a.SHARED_CHANNELS];return n.id!==t&&e.push(vx.a.SHARED_WORKSPACES),e},[t,n]),o=Object(zw.a)(),s=o.featureEscGridMigrationsClient;if(!o.featureModernProfileFlexpane)return null;var l=h.a.createElement(ox.a,{className:"p-member_profile__picture",member:n}),c=h.a.createElement(lx.a,{className:"p-member_profile__restriction",member:n,team:a}),u=h.a.createElement(dx.a,{className:"p-member_profile__name",member:n});return s&&Object(te.J)(a)?h.a.createElement(h.a.Fragment,null,l,c,u,h.a.createElement(cx.a,{memberTeam:a})):Object(ne.Ab)(n)?h.a.createElement(h.a.Fragment,null,l,c,u,h.a.createElement(ux.a,{member:n})):h.a.createElement(Nu.a,null,function(e){var t=e.width,o=e.height;return h.a.createElement(e_.b,{width:t,height:o,fade:!0},l,c,h.a.createElement(sx.a,{className:"p-member_profile__buttons",includeOverflow:!0,member:n,showCallButton:!0},h.a.createElement(ie.e,{offsetY:8,position:"bottom-right",renderMenu:function(e){return h.a.createElement(gx,{member:n,menuProps:e,team:a})}},h.a.createElement(Re.d,{className:"p-member_profile_buttons__button p-member_profile_buttons__button--overflow",type:"outline"},h.a.createElement(se.b,{type:"ellipsis"})))),u,h.a.createElement(vx.b,{member:n,team:r,types:i}))})}kx.displayName="MemberProfileDetails",kx.defaultProps=yx;var Ox=Object(_.b)(function(e,t){var n=t.memberId,a=Object(Ue.c)(e,n);return a?{currentMemberId:Object(y.b)(e),member:a,memberTeam:Object($.i)(e,Object(ne.J)(a)),team:Object($.d)(e)}:{}})(kx),jx=(n("20nV"),new x.b("menu")),Cx=(m.b.func,m.b.bool,m.b.string.isRequired,{fetchTeamProfile:d.a,isEnterprise:!1}),Ex=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoading:!0},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchTeamProfile({reason:"MemberProfileFlexpane"}).finally(function(){e.setState(function(){return{isLoading:!1}})})}},{key:"render",value:function(){var e=this,t=this.props.isEnterprise?jx.t("Organization Directory"):jx.t("Workspace Directory");return h.a.createElement(qM.b,{className:"p-member_profile_flexpane",dataQa:"member_profile_pane",flexOrigin:"directory",isLoading:this.state.isLoading,renderBody:function(){return h.a.createElement(Ox,{memberId:e.props.memberId})},title:t,viewId:hu.y.MEMBER_PROFILE_FLEXPANE,kbNavOrder:Object(Me.a)()?void 0:4.2})}}]),t}(p.PureComponent);Ex.displayName="MemberProfileFlexpane",Ex.defaultProps=Cx;var wx={fetchTeamProfile:function(){return en.e.apply(void 0,arguments)}},Sx=Object(_.b)(function(e){return{isEnterprise:Object(y.l)(e)}},wx)(Ex),Ix=n("iqWe");function Tx(e,t){return{appProfile:e,appId:Object(rA.l)(e),botId:Object(rA.p)(e),isPublished:Object(rA.F)(e),customIntegrationType:Object(rA.e)(e),dateCreated:Object(rA.f)(e),isUserRestricted:Object(ne.xb)(t)||Object(ne.Db)(t),installedUserId:Object(rA.w)(e),commands:Object(rA.d)(e),description:Object(rA.g)(e),formattedDescription:Object(rA.i)(e),hideDescriptionExpansion:Object(rA.I)(e)}}var Nx=n("VMwU"),Rx=n("yluG"),Ax=new x.b("app_profile");var Px=function(e){var t=e.appId,n=e.serviceId,a=e.appHomepageUrl,r=e.supportUrl,i=e.isSlackIntegration,o=e.dispatch,s=e.currentTeamId,l=e.currentUserId,c=e.locale,u=e.currentEnterpriseId,d=Object(ye.a)({userId:l,teamId:s,locale:c,enterpriseId:u}),p=Object($.d)(Object(g.getStateByTeamId)(s)),m={app_id:t,bot_id:n},b=function(){return d.track(ve.k.USER_PROFILE_CLICK,m)};return[{key:"app_homepage",label:Ax.t("App Homepage"),href:a,click:function(){b(),d.track(ve.k.APP_CLICK_APP_HOMEPAGE_IN_USER_PROFILE,{contexts:{ui_context:{step:ve.z.USER_PROFILE,action:ve.v.CLICK,ui_element:ve.y.APP_HOMEPAGE}}})},show:!!a,dataQa:"app_profile_overflow_homepage"},{key:"app_directory_page",label:Ax.t("View in App Directory"),href:Object(te.o)(p,"/apps/"+t+"?utm_source=in-prod&utm_medium=inprod-link_app_directory-user_profile-click"),click:function(){b(),d.track(ve.k.APP_CLICK_LINK_APP_DIRECTORY_IN_USER_PROFILE,{contexts:{ui_context:{step:ve.z.USER_PROFILE,action:ve.v.CLICK,ui_element:ve.y.LINK_APP_DIRECTORY}}})},show:!0,dataQA:"app_profile_app_directory_page"},{key:"support",label:Ax.t("Support for this app"),href:r||void 0,click:function(){b(),d.track(ve.k.APP_CLICK_LINK_APP_SUPPORT_IN_USER_PROFILE,{contexts:{ui_context:{step:ve.z.USER_PROFILE,action:ve.v.CLICK,ui_element:ve.y.LINK_APP_SUPPORT}}}),i&&o(Object(st.e)({element:h.a.createElement(Qr.a,{trigger:"app_support_profile_button"})}))},show:!0}].filter(function(e){return e.show})},Mx=(m.b.bool.isRequired,m.b.string,m.b.object,m.b.func,m.b.string,m.b.string,m.b.string,{customIntegrationType:"",appProfile:void 0,dispatch:m.b.noop,currentTeamId:"",currentUserId:"",currentEnterpriseId:""}),Dx=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["renderMenu"]),n}return u()(t,e),o()(t,[{key:"renderMenu",value:function(e){var t=this.props,n=t.dispatch,a=t.appProfile,r=t.currentTeamId,i=t.currentUserId,o=t.currentEnterpriseId,s=Px({appId:Object(rA.l)(a),serviceId:Object(rA.p)(a),appHomepageUrl:Object(rA.k)(a),supportUrl:Object(rA.q)(a),isSlackIntegration:Object(rA.G)(a),dispatch:n,currentTeamId:r,currentUserId:i,locale:Object(x.p)(),currentEnterpriseId:o});return s.length?h.a.createElement(ie.a,{template:s,stripTerminalSeparators:!0,onMenuItemSelected:e.onMenuItemSelected}):null}},{key:"render",value:function(){return this.props.isDistributed&&!this.props.customIntegrationType?h.a.createElement(ie.e,{renderMenu:this.renderMenu,position:"bottom-right"},h.a.createElement(Re.d,{"data-qa":"app_header_overflow_menu_button",className:"p-app_profile_flexpane_header__button p-app_profile_flexpane_header__button_container__button",icon:"chevron-large-down",size:"large"})):null}}]),t}(p.Component);Dx.displayName="AppProfileOverflowMenuButton",Dx.defaultProps=Mx;var xx=Object(_.b)(function(e,t){var n=t.appProfile;return{isDistributed:Object(rA.D)(n),customIntegrationType:Object(rA.e)(n),currentTeamId:Object(v.b)(e),currentUserId:Object(y.b)(e),currentEnterpriseId:Object(y.l)(e)?Object($.g)(e).id:void 0}})(Dx),Lx=(n("avbl"),new x.b("app_card")),Fx=(m.b.bool,m.b.bool.isRequired,m.b.bool.isRequired,m.b.object,m.b.string,m.b.string,m.b.string,m.b.string,m.b.string.isRequired,m.b.object,m.b.object,{appProfile:void 0,color:"",name:"",tagline:"",settingsUrl:"",clogger:{track:d.a},externalTeam:void 0,isAvatarEmoji:!1}),Bx=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["calculateStyle","renderSettingsButton","onSettingsButtonClick"]),n}return u()(t,e),o()(t,[{key:"onSettingsButtonClick",value:function(){this.props.clogger.track(ve.k.APP_CLICK_LINK_APP_SETTINGS_IN_USER_PROFILE,{contexts:{ui_context:{step:ve.z.USER_PROFILE,action:ve.v.CLICK,ui_element:ve.y.LINK_APP_SETTINGS}}})}},{key:"calculateStyle",value:function(){var e=this.props.color,t=Object(Nx.f)(e);if(t&&e){var n=No()(t,3);return{background:"linear-gradient(136.53deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.2) 100%), linear-gradient(312.01deg, "+e+" 0%, rgba("+n[0]+","+n[1]+","+n[2]+",0.75) 100%)",backgroundColor:e}}}},{key:"renderSettingsButton",value:function(){var e=this.props,t=e.isExternal,n=e.isUserRestricted,a=e.settingsUrl;return t||n||!a?null:h.a.createElement(Re.d,{"data-qa":"app_header_settings_button",href:a+"?utm_source=in-prod&utm_medium=inprod-link_app_settings-user_profile-click",className:"p-app_profile_flexpane_header__button p-app_profile_flexpane_header__button_container__button",onClick:this.onSettingsButtonClick},Lx.t("Settings"))}},{key:"render",value:function(){var e=this.props,t=e.avatarUrl,n=e.isAvatarEmoji,a=e.color,r=e.isExternal,i=e.name,o=e.tagline,s=e.appProfile,l=e.externalTeam;return h.a.createElement("div",{className:f()({"p-app_profile_flexpane_header":!r,"p-app_profile_flexpane_header--external":r}),style:this.calculateStyle(a)},!!r&&h.a.createElement(Rx.a,{externalTeam:l}),h.a.createElement("img",{className:f()("p-app_profile_flexpane_header__icon rounded",{"p-app_profile_flexpane_header__icon--emoji":n}),alt:"app avatar","data-qa":"app_header_icon",src:t}),h.a.createElement("div",{className:"p-app_profile_flexpane_header__text"},h.a.createElement("div",{className:"p-app_profile_flexpane_header__row"},h.a.createElement("span",{className:"p-app_profile_flexpane_header__app_name","data-qa":"app_header_name"},i),h.a.createElement("div",null,h.a.createElement("span",{className:"p-app_profile_flexpane_header__app_label rounded","data-qa":"app_header_app_label"},Lx.t("APP")))),!!o&&h.a.createElement("div",{className:"p-app_profile_flexpane_header__tagline overflow_hidden","data-qa":"app_header_tagline"},o),h.a.createElement("div",{className:"p-app_profile_flexpane_header__button_container"},this.renderSettingsButton(),h.a.createElement(xx,{appProfile:s}))))}}]),t}(p.Component);Bx.displayName="AppProfileHeader",Bx.defaultProps=Fx;var qx=Object(_.b)(function(e,t){var n=t.appProfile,a=Object(rA.h)(n),r=Object(rA.b)(e,n);return{clogger:Object(ye.a)({state:e}),avatarUrl:r,isAvatarEmoji:!!a,customIntegrationType:Object(rA.e)(n),color:Object(rA.c)(n),tagline:Object(rA.r)(n),isExternal:Object(rA.E)(e,n),isDistributed:Object(rA.D)(n),isUserRestricted:Object(ne.xb)(self)||Object(ne.Db)(self),settingsUrl:Object(rA.z)(e,n),name:Object(rA.n)(n),externalTeam:Object(rA.v)(e,n)}})(Bx),Ux=(n("W90I"),new x.b("app_profile"));m.b.string,m.b.bool;function Hx(e){var t=e.formattedDescription,n=e.hideExpandButton,a=Object(p.useState)(!1),r=No()(a,2),i=r[0],o=r[1];return t?h.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_how_to_use"},h.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},Ux.t("How to use this app")),h.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},h.a.createElement("div",{className:f()("p-app_profile_flexpane__description",{"p-app_profile_flexpane__description--collapse":!n&&!i})},h.a.createElement(bA,{formattedDescription:t}),!n&&h.a.createElement(p.Fragment,null,!i&&h.a.createElement("div",{className:"p-app_profile_flexpane__description__fade"}),h.a.createElement(Re.c,{className:f()("p-app_profile_flexpane__description__button",{"p-app_profile_flexpane__description__button--expand":!i,"p-app_profile_flexpane__description__button--collapse":i}),onClick:function(){o(!i)}},i?Ux.t("Collapse"):Ux.t("Expand"),h.a.createElement(se.b,{type:i?"arrow-up-medium":"arrow-down-medium"})))))):null}Hx.displayName="AppProfileDescription",Hx.defaultProps={formattedDescription:"",hideExpandButton:!1};var Gx=Object(ud.a)(Hx),Wx=(m.b.string.isRequired,m.b.shape({name:m.b.string,usage:m.b.string,description:m.b.string}).isRequired,m.b.func,m.b.object.isRequired,{autoFillSlashCommand:d.a}),Kx=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"autoFillSlashCommand",value:function(e){this.props.autoFillSlashCommand({commandName:e});var t=this.props,n=t.appId;t.clogger.track(ve.k.APP_PROFILE_SLASH_COMMAND_CLICK,{app_id:n,contexts:{core:{app_id:n}}})}},{key:"render",value:function(){var e=this,t=this.props.command,n=t.name,a=t.usage,r=t.description;return h.a.createElement(Re.c,{type:"outline","data-qa":n,onClick:function(){return e.autoFillSlashCommand(n)},className:"p-app_profile_flexpane__slash_command"},h.a.createElement("div",{className:"p-app_profile_flexpane__slash_command__title overflow_ellipsis"},h.a.createElement("span",{className:"bold"},n)," ",h.a.createElement("span",null,a)),h.a.createElement("div",{className:"p-app_profile_flexpane__slash_command__description overflow_ellipsis"},r))}}]),t}(p.PureComponent);Kx.displayName="AppProfileSlashCommandItem",Kx.defaultProps=Wx;var Vx=Object(_.b)(function(e){return{clogger:Object(ye.a)({state:e})}},function(e){return Object(Vr.b)({autoFillSlashCommand:MA.a},e)})(Kx),zx=new x.b("app_profile"),Yx=(m.b.bool,m.b.string,m.b.object,m.b.string,m.b.string,m.b.string,m.b.bool,m.b.number,m.b.arrayOf(m.b.object),m.b.string,m.b.bool,m.b.bool,{isPublished:!1,installedUserId:"",appProfile:void 0,appId:"",botId:"",customIntegrationType:"",isUserRestricted:!1,dateCreated:void 0,commands:[],formattedDescription:"",hideDescriptionExpansion:!1,showSettingsSection:!1}),Qx=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"getSectionHeaderText",value:function(){switch(this.props.customIntegrationType){case"incoming-webhook":return zx.t("About this Incoming Webhook");case"outgoing-webhook":return zx.t("About this Outgoing Webhook");case"bot":return zx.t("How to use this Bot");case"slash-commands":return zx.t("How to use this Slash Command");default:return null}}},{key:"getSectionText",value:function(){switch(this.props.customIntegrationType){case"outgoing-webhook":return null;case"bot":return zx.t("You can message bots and invite them to channels like other members.");case"slash-commands":return zx.t("Slash commands take actions when you post them in a conversation.");default:return null}}},{key:"renderAboutSection",value:function(){var e=this.props,t=e.customIntegrationType,n=e.dateCreated,a=e.isUserRestricted,r=e.installedUserId;if(t){var i=h.a.createElement(xy.a,{id:r,onClick:function(e){e.preventDefault(),Object(fu.i)(r)}});return h.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_about"},h.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},this.getSectionHeaderText(t)),h.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},this.getSectionText(t)," ",!a&&zx.rt("Created by {custom_integration_creator} on {date_created, date, long}.",{custom_integration_creator:i,date_created:1e3*n})))}return null}},{key:"renderSettingsSection",value:function(){var e=this.props,t=e.appProfile,n=e.customIntegrationType,a=e.showSettingsSection,r=Object(rA.m)(t),i=Object(rA.a)(t),o=i&&i.length>0,s=r>0;if(a&&(o||s)){var l=n?zx.t("This bot is in {bot_user_channel_count, plural, =1 {# channel} other {# channels} }.",{bot_user_channel_count:r}):zx.t("This app is in {bot_user_channel_count, plural, =1 {# channel} other {# channels} }.",{bot_user_channel_count:r});return h.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_settings"},h.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},zx.t("Settings")),h.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},!!o&&h.a.createElement("div",{className:"bottom_margin"},zx.t("{name} can:",{name:Object(rA.n)(t)}),h.a.createElement("ul",null,i.map(function(e){return h.a.createElement("li",{key:e},e)}))),!!s&&h.a.createElement("div",null,l)))}return null}},{key:"renderCommandsSection",value:function(){var e=this.props,t=e.appId,n=e.commands;return n&&n.length?h.a.createElement("section",{"data-qa":"app_profile_commands",className:"p-app_profile_flexpane__section"},h.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},zx.t("Responds to\u2026",{note:"Refers to slash commands the app responds to."})),n.map(function(e){return h.a.createElement(Vx,{key:e.name,command:e,appId:t})})):null}},{key:"renderMetaSection",value:function(){return this.props.isPublished?null:h.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_meta"},h.a.createElement("p",null,h.a.createElement("i",{className:"sk_dark_grey"},zx.t("This app has not been reviewed by Slack."))))}},{key:"render",value:function(){var e=this.props,t=e.appProfile,n=e.appId,a=e.botId,r=e.formattedDescription,i=e.hideDescriptionExpansion;return!t||Object(zr.e)(t)?null:h.a.createElement("div",{className:"p-app_profile_flexpane__container","data-qa":"app_profile_container","data-app_id":n,"data-bot_id":a},h.a.createElement(qx,{appProfile:t}),h.a.createElement("div",{className:"sk_black large_bottom_margin"},this.renderAboutSection(),h.a.createElement(Gx,{formattedDescription:r,hideExpandButton:i}),this.renderCommandsSection(),this.renderSettingsSection(),this.renderMetaSection()))}}]),t}(p.Component);Qx.displayName="BaseAppProfile",Qx.defaultProps=Yx;var Jx=Object(_.b)(function(e,t){var n=t.serviceId,a=Object(Jr.c)(e,{serviceId:n,showAuthSummary:!0});return Z()({},Tx(a,Object(Ue.b)(e)),{showSettingsSection:Object(rA.A)(e,a)})})(Qx),Xx=(m.b.string,m.b.object.isRequired,m.b.func,{appId:"",fetchLegacyAppProfile:void 0}),Zx=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={appProfile:void 0},n.getAppProfileProps=n.getAppProfileProps.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.appId&&this.fetchAppProfile()}},{key:"componentDidUpdate",value:function(e){this.props.appId!==e.appId&&this.fetchAppProfile()}},{key:"getAppProfileProps",value:function(){var e=this.state.appProfile,t=this.props.currentMember;return Z()({},Tx(e,t),{showSettingsSection:!1})}},{key:"fetchAppProfile",value:function(){var e=this;this.props.fetchLegacyAppProfile({appId:this.props.appId}).then(function(t){e.setState(function(){return{appProfile:Object(MA.c)(null,t)}})})}},{key:"render",value:function(){return h.a.createElement(Qx,this.getAppProfileProps())}}]),t}(p.Component);Zx.displayName="GenericAppProfile",Zx.defaultProps=Xx;var $x=Object(_.b)(function(e){return{currentMember:Object(Ue.b)(e)}},function(e){return Object(Vr.b)({fetchLegacyAppProfile:Ix.b},e)})(Zx),eL=(n("zbnt"),new x.b("app_profile")),tL=(m.b.string,m.b.string,m.b.string,{serviceId:void 0,appId:void 0,customIntegrationType:""}),nL=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this,t={"incoming-webhook":eL.t("About this Incoming Webhook"),"outgoing-webhook":eL.t("About this Outgoing Webhook"),bot:eL.t("About this Bot"),"slash-commands":eL.t("About this Slash Command")},n=eL.t("About this app"),a=t[this.props.customIntegrationType]||n;return h.a.createElement(qM.b,{className:"p-app_profile_flexpane",dataQa:"app_profile_pane",title:a,viewId:"app-profile-flepane",kbNavOrder:Object(Me.a)()?void 0:4.7,renderBody:function(){return h.a.createElement(Nu.a,null,function(t){var n=t.width,a=t.height;return h.a.createElement(e_.b,{width:n,height:a,fade:!0},e.props.serviceId?h.a.createElement(Jx,{serviceId:e.props.serviceId}):h.a.createElement($x,{appId:e.props.appId}))})}})}}]),t}(p.PureComponent);nL.displayName="AppProfilePane",nL.defaultProps=tL;var aL=Object(_.b)(function(e,t){var n=t.serviceId,a=n?Object(Jr.c)(e,{serviceId:n}):void 0;return{customIntegrationType:Object(rA.e)(a)}})(nL),rL=n("3Hq1"),iL=new x.b("a11y");n("Sqd7"),m.b.func.isRequired;function oL(e){var t=e.children;return h.a.createElement(_D.a,null,function(e){var n=e.width,a=e.height,r=e.measureRef;return h.a.createElement("div",{ref:r,className:"c-measure_container"},t({width:n,height:a}))})}oL.displayName="MeasureContainer";var sL=oL,lL=n("NqlN"),cL=new x.b("a11y");var uL=n("BA81"),dL=(m.b.string.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.object,m.b.func,{isDetailsView:!1,featureSonicUserGroups:!1,onEnableUserGroup:d.a,onDisableUserGroup:d.a,canEditUserGroups:d.a,canCreateAndDeleteUserGroups:d.a,openModal:d.a,menuProps:{},onClick:d.a}),pL=new x.b("user_groups"),hL=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onEnableUserGroup","onDisableUserGroup","onEditDetails","onEditMembers"]),n}return u()(t,e),o()(t,[{key:"onEnableUserGroup",value:function(){return this.props.onClick(),this.props.onEnableUserGroup()}},{key:"onDisableUserGroup",value:function(){this.props.openModal({element:this.renderConfirmationDialog({action:"disable_group",onSubmit:this.props.onDisableUserGroup})}),this.props.onClick()}},{key:"onEditDetails",value:function(){this.props.openModal({element:this.renderEditDialog(this.props.groupId)})}},{key:"onEditMembers",value:function(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"getEditMenuItems",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=this.props,t=e.isAutoGenerated,n=e.isDetailsView;if(t&&n)return null;var a=[];return n||t||a.push({key:"menu-edit-members",label:pL.t("Edit group members..."),onSelected:this.onEditMembers}),a.push({key:"menu-edit-details",label:pL.t("Edit group details..."),onSelected:this.onEditDetails}),a}},{key:"getMenuItems",value:function(){var e=this;if(!this.props.featureSonicUserGroups)return null;var t=[];if(this.userGroupIsEditable()){var n=this.getEditMenuItems();n&&t.push.apply(t,Le()(n))}return this.canEnableUserGroup()?t.push({key:"menu-enable",label:pL.t("Enable group"),onSelected:function(){return e.onEnableUserGroup()}}):this.canDisableUserGroup()&&t.push({key:"menu-disable",label:pL.t("Deactivate group"),danger:!0,onSelected:function(){return e.onDisableUserGroup()}}),t}},{key:"userGroupIsEditable",value:function(){return this.props.canEditUserGroups()&&this.props.isActive}},{key:"canDisableUserGroup",value:function(){return this.props.canCreateAndDeleteUserGroups()&&this.props.isActive}},{key:"canEnableUserGroup",value:function(){return this.props.canCreateAndDeleteUserGroups()&&!this.props.isActive}},{key:"renderConfirmationDialog",value:function(e){var t=e.action,n=e.onSubmit,a=this.props.groupId;return h.a.createElement(IL,{groupId:a,action:t,onSubmit:n})}},{key:"renderEditDialog",value:function(e){return h.a.createElement(XE,{userGroupId:e})}},{key:"renderEditMembersDialog",value:function(){var e=this.props.groupId;return h.a.createElement(JL,{groupId:e})}},{key:"render",value:function(){return this.props.featureSonicUserGroups?h.a.createElement(ie.f,Z()({},this.props.menuProps,{width:"auto"}),this.getMenuItems().map(function(e){return h.a.createElement(ie.b,e)})):null}}]),t}(p.PureComponent);hL.displayName="UserGroupContextMenu",hL.defaultProps=dL;var mL=Object(_.b)(function(e,t){var n=t.groupId,a=t.isDetailsView,r=Object(tE.e)(e,n);return{isActive:Object(aE.u)(r),isAutoGenerated:Object(aE.n)(r),isDetailsView:a,canEditUserGroups:function(){return Object(aE.c)(e)},canCreateAndDeleteUserGroups:function(){return Object(aE.b)(e)},featureSonicUserGroups:Object(y.i)(e,"feature_sonic_user_groups")}},function(e,t){var n=t.groupId;return{openModal:function(){return e(st.e.apply(void 0,arguments))},onLoad:function(){return e(Object(eE.i)({groupId:n}))},onDisableUserGroup:function(){e(Object(eE.g)({groupId:n})).then(function(){return e(Object(Ke.o)())})},onEnableUserGroup:function(){e(Object(eE.h)({groupId:n})).then(function(){return e(Object(Ke.n)({groupId:n}))})}}})(hL),bL=(n("sQIv"),new x.b("user_groups")),fL=(m.b.object,m.b.func.isRequired,m.b.func.isRequired,m.b.bool.isRequired,{userGroup:void 0}),_L=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderUserGroupOptionsMenu=n.renderUserGroupOptionsMenu.bind(n),n}return u()(t,e),o()(t,[{key:"renderUserGroupOptionsMenu",value:function(e){return h.a.createElement(mL,{menuProps:e,groupId:this.props.userGroup.id,isDetailsView:!0})}},{key:"renderUserGroupOptions",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=bL.t("More actions");return h.a.createElement(ie.e,{renderMenu:this.renderUserGroupOptionsMenu,position:"bottom-right"},h.a.createElement(le.c,{tip:e,delay:le.a,position:"top-right"},h.a.createElement(Re.d,{type:"outline",className:"p-user_group_details__button--options","data-qa-user-group-details-group-options-btn":!0,"aria-label":e,icon:"ellipsis"})))}},{key:"renderEditMembersButton",value:function(){return this.props.featureSonicUserGroups?h.a.createElement(Re.d,{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditMembers,"data-qa-user-group-details-edit-members-btn":!0},bL.t("Edit Members")):null}},{key:"renderEditDetailsButton",value:function(){return this.props.featureSonicUserGroups?h.a.createElement(Re.d,{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditDetails,"data-qa-user-group-details-edit-details-btn":!0},bL.t("Edit Details")):null}},{key:"renderPrimaryAction",value:function(){return Object(aE.n)(this.props.userGroup)?this.renderEditDetailsButton():this.renderEditMembersButton()}},{key:"render",value:function(){return this.props.featureSonicUserGroups?h.a.createElement("div",{className:"p-user_group_details__actions"},this.renderPrimaryAction(),this.renderUserGroupOptions()):null}}]),t}(p.Component);_L.displayName="UserGroupsDetailsActionBar";_L.defaultProps=fL;var gL=Object(_.b)(function(e,t){var n=t.groupId;return{userGroup:Object(tE.e)(e,n),featureSonicUserGroups:Object(y.i)(e,"feature_sonic_user_groups")}})(_L),vL="members",yL="channels",kL=new x.b("user_groups"),OL=(m.b.shape({created_by:m.b.string,date_create:m.b.number,date_delete:m.b.number,date_update:m.b.number,deleted_by:m.b.string,description:m.b.string,enterprise_subteam_id:m.b.string,handle:m.b.string,id:m.b.string,is_external:m.b.bool,is_subteam:m.b.bool,is_usergroup:m.b.bool,name:m.b.string,prefs:m.b.shape({channels:m.b.array,groups:m.b.array}),team_id:m.b.string,updated_by:m.b.string,user_count:m.b.number,users:m.b.array,_name_lc:m.b.string}),m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.string.isRequired,m.b.array,m.b.array,m.b.array,m.b.bool,m.b.bool,m.b.bool,{userGroup:{},fetchUserGroupMembers:d.a,onChannelSwitch:d.a,removeMember:d.a,removeChannel:d.a,openModal:d.a,openUserGroupList:d.a,enqueueToast:d.a,canEditUserGroups:d.a,canCreateAndDeleteUserGroups:d.a,userGroupMembers:[],newMembers:[],userGroupDefaultChannels:[],showMemberProfile:d.a,featureSonicUserGroups:!1,featureSonicUserGroupsA11yRefactor:!1,featureLabelsForCoreObjects:!1}),jL=Object(ut.b)(),CL=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onViewProfile","onRemoveFromGroup","onAddMembers","onAddChannels","renderMemberItem","renderChannelItem","renderChannelsList","renderMembersList","renderListItemOptionsMenu","renderConfirmationDialog","renderContent","focus","getAriaLabelForChannelRow","getAriaLabelForMemberRow","onItemTabWithin"]),n.memberList=h.a.createRef(),n.channelsList=h.a.createRef(),n.flexpane=h.a.createRef(),n.channelListKeys=null,n.memberListKeys=null,n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){Object(aE.u)(this.props.userGroup)&&this.props.fetchUserGroupMembers("user-group-details/componentDidMount")}},{key:"componentDidUpdate",value:function(e){var t=e.userGroup,n=(t.users,Be()(t,["users"])),a=this.props.userGroup,r=(a.users,Be()(a,["users"]));Object(Ny.a)(n,r)||this.props.fetchUserGroupMembers("user-group-details/componentDidUpdate")}},{key:"onRemoveMember",value:function(e){var t=this;this.props.featureSonicUserGroups&&this.props.openModal({element:this.renderConfirmationDialog({action:"remove_member",onSubmit:function(){t.props.removeMember(e).then(function(){t.props.enqueueToast({element:h.a.createElement(pt.b,null,kL.t("Member removed from group."))})}).catch(function(e){jL.error("Error removing member from user group: "+e),"no_users_provided"===e.data.error&&t.props.enqueueToast({element:h.a.createElement(pt.b,null,kL.t("User groups need to have at least one member."))})})},id:e})})}},{key:"onRemoveChannel",value:function(e){var t=this;this.props.featureSonicUserGroups&&this.props.openModal({element:this.renderConfirmationDialog({action:"remove_channel",onSubmit:function(){t.props.removeChannel(e).then(function(){t.props.enqueueToast({element:h.a.createElement(pt.b,null,kL.t("Channel removed from group."))})}).catch(function(e){jL.error("Error removing default channel from user group: "+e)})},id:e})})}},{key:"onAddMembers",value:function(){this.displayMemberManagementDialog()}},{key:"onAddChannels",value:function(){this.displayEditDetailsDialog()}},{key:"onRemoveFromGroup",value:function(e){var t=e.type,n=e.id;t===vL?this.onRemoveMember(n):t===yL&&this.onRemoveChannel(n)}},{key:"onViewProfile",value:function(e){var t=e.type,n=e.id;return t===vL?this.props.showMemberProfile({memberId:n}):t===yL?this.props.onChannelSwitch(n):null}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"getTabs",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=this.props,t=e.userGroup,n=e.userGroupDefaultChannels,a=void 0===n?[]:n,r=Object(aE.l)(t);return[{title:kL.rt("Members"),titleCount:r,id:"user-groups-members-tab",content:this.renderMembersList()},{title:kL.rt("Channels"),titleCount:a.length,id:"user-groups-channels-tab",content:this.renderChannelsList()}]}},{key:"getAriaLabelForChannelRow",value:function(e){if(!this.channelListKeys)return null;var t=this.props.userGroupDefaultChannels[e];return Object(O_.a)({type:Object(he.v)(t),displayName:Object(he.w)(t),isShared:Object(he.Y)(t),isOrgShared:Object(he.rb)(t),isArchived:Object(he.V)(t)})}},{key:"getAriaLabelForMemberRow",value:function(e){if(!this.memberListKeys)return null;var t=this.props,n=t.userGroupMembers,a=t.featureLabelsForCoreObjects,r=n[e];return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.isGuest,a=e.isSelf,r=e.isAppOrBot,i=e.isDeleted,o=e.isPrescenceAway,s=e.isPrescenceDND,l=e.statusEmojiCode,c=e.statusText,u=e.isCurrent,d=e.hasNotifications,p=e.isStarred,h=e.isMuted,m=e.hasDraft;if(!e.featureLabelsForCoreObjects)return null;var b=i?cL.t("deactivated"):r?cL.t("APP"):n&&!o&&s?cL.t("guest, do not disturb"):n&&o&&!s?cL.t("guest, away"):!n||o||s?a&&!o&&s?cL.t("you, do not disturb"):!a||o||s?n||o||!s?n||!o||s?"":cL.t("away"):cL.t("do not disturb"):cL.t("you"):cL.t("guest"),f=l&&Object(lL.a)(l),_=f&&!c?f:f&&c?cL.t("{statusEmoji} {statusText}",{statusEmoji:f,statusText:c,fallbackHash:"ad5c47c4aa7f1e2be1e151ea075d02eff6e54376"}):!f&&c?c:"",g=u&&d&&h&&p&&m?cL.t("current conversation, has notifications, muted, starred, has a draft message"):!u&&d&&h&&p&&m?cL.t("has notifications, muted, starred, has a draft message"):u&&!d&&h&&p&&m?cL.t("current conversation, muted, starred, has a draft message"):!u&&!d&&h&&p&&m?cL.t("muted, starred, has a draft message"):u&&d&&!h&&p&&m?cL.t("current conversation, has notifications, starred, has a draft message"):!u&&d&&!h&&p&&m?cL.t("has notifications, starred, has a draft message"):u&&!d&&!h&&p&&m?cL.t("current conversation, starred, has a draft message"):u||d||h||!p||!m?u&&d&&h&&!p&&m?cL.t("current conversation, has notifications, muted, has a draft message"):!u&&d&&h&&!p&&m?cL.t("has notifications, muted, has a draft message"):u&&!d&&h&&!p&&m?cL.t("current conversation, muted, has a draft message"):u||d||!h||p||!m?u&&d&&!h&&!p&&m?cL.t("current conversation, has notifications, has a draft message"):u||!d||h||p||!m?!u||d||h||p||!m?u||d||h||p||!m?u&&d&&h&&p&&!m?cL.t("current conversation, has notifications, muted, starred"):!u&&d&&h&&p&&!m?cL.t("has notifications, muted, starred"):u&&!d&&h&&p&&!m?cL.t("current conversation, muted, starred"):u||d||!h||!p||m?u&&d&&!h&&p&&!m?cL.t("current conversation, has notifications, starred"):u||!d||h||!p||m?!u||d||h||!p||m?u||d||h||!p||m?u&&d&&h&&!p&&!m?cL.t("current conversation, has notifications, muted"):u||!d||!h||p||m?!u||d||!h||p||m?u||d||!h||p||m?!u||!d||h||p||m?u||!d||h||p||m?!u||d||h||p||m?"":cL.t("current conversation"):cL.t("has notifications"):cL.t("current conversation, has notifications"):cL.t("muted"):cL.t("current conversation, muted"):cL.t("has notifications, muted"):cL.t("starred"):cL.t("current conversation, starred"):cL.t("has notifications, starred"):cL.t("muted, starred"):cL.t("has a draft message"):cL.t("current conversation, has a draft message"):cL.t("has notifications, has a draft message"):cL.t("muted, has a draft message"):cL.t("starred, has a draft message");return t&&b&&_&&g?cL.t("{name} ({userInfo}), status: {status} ({context})",{name:t,userInfo:b,status:_,context:g}):t&&!b&&_&&g?cL.t("{name}, status: {status} ({context})",{name:t,status:_,context:g}):t&&b&&!_&&g?cL.t("{name} ({userInfo}) ({context})",{name:t,userInfo:b,context:g}):t&&!b&&!_&&g?cL.t("{name} ({context})",{name:t,context:g}):t&&b&&_&&!g?cL.t("{name} ({userInfo}), status: {status}",{name:t,userInfo:b,status:_}):t&&!b&&_&&!g?cL.t("{name}, status: {status}",{name:t,status:_}):t&&b&&!_&&!g?cL.t("{name} ({userInfo})",{name:t,userInfo:b}):t||""}({name:Object(ne.E)(r),isDeleted:Object(ne.eb)(r),isAppOrBot:!1,isGuest:!1,featureLabelsForCoreObjects:a})}},{key:"focus",value:function(){var e=this.memberList.current||this.channelsList.current;e&&e.focus()}},{key:"displayMemberManagementDialog",value:function(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"displayEditDetailsDialog",value:function(){this.props.openModal({element:this.renderEditDetailsDialog()})}},{key:"userGroupIsEditable",value:function(){var e=this.props.userGroup;return this.props.canEditUserGroups()&&Object(aE.u)(e)}},{key:"canRemoveItem",value:function(e){var t=this.props.userGroup;return e!==vL||!Object(aE.n)(t)}},{key:"renderHeader",value:function(){var e=this.props.userGroup;return h.a.createElement("div",{className:"p-user_group_details__section"},h.a.createElement("div",{className:"p-user_group_details__name"},Object(aE.h)(e)),h.a.createElement("div",{className:"p-user_group_details__description"},Object(aE.e)(e)),h.a.createElement("div",{className:"p-user_group_details__handle"},Object(aE.f)(e,{includeAtSign:!0})))}},{key:"renderActions",value:function(){var e=this;return this.props.featureSonicUserGroups&&this.userGroupIsEditable()&&this.props.canCreateAndDeleteUserGroups()?h.a.createElement("div",{className:"p-user_group_details__section"},h.a.createElement(gL,{groupId:this.props.groupId,onEditMembers:function(){return e.displayMemberManagementDialog()},onEditDetails:function(){return e.displayEditDetailsDialog()}})):null}},{key:"renderTabs",value:function(){var e=this.getTabs();return h.a.createElement(uL.a,{tabs:e,defaultTabId:"user-groups-members-tab",fullHeight:!0,fullWidthMenu:!0})}},{key:"renderListItemOptionsMenu",value:function(e){var t=this,n=e.menuProps,a=e.id,r=e.type;if(!this.props.featureSonicUserGroups)return null;var i=r===yL?kL.t("Open channel"):kL.t("View profile"),o=[h.a.createElement(ie.b,{key:a,label:i,onSelected:function(){return t.onViewProfile({type:r,id:a})}})];return this.canRemoveItem(r)&&o.push(h.a.createElement(ie.b,{key:a,label:kL.t("Remove from group..."),onSelected:function(){return t.onRemoveFromGroup({type:r,id:a})},danger:!0})),h.a.createElement(ie.f,Z()({},n,{width:"auto"}),o)}},{key:"renderMemberItem",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.userGroupIsEditable(),a=Object(Ei.a)(this.props.newMembers,t),r={className:f()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":n,"p-user_group_base_row--active":a}),isContextButtonVisible:n,tooltip:this.renderTooltip(),onClick:function(){return e.onViewProfile({type:vL,id:t.id})},renderMenu:function(n){return e.renderListItemOptionsMenu({menuProps:n,id:t.id,type:vL})},customProps:{key:t.id,"data-qa-user-group-details-members-list-item":!0,"data-qa-user-group-details-members-list-item-id":t.id},id:t.id};return this.props.featureSonicUserGroupsA11yRefactor?h.a.createElement(zL,r):h.a.createElement(zL,r,h.a.createElement("div",{className:"full_width"},h.a.createElement(mk.b,{id:t.id,size:"medium",showTooltip:!1,forcedPrimary:"real_name",showPresence:!1,showStatus:!1,"data-qa-user-group-details-members-list-item-member":!0})))}},{key:"renderChannelItem",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.userGroupIsEditable(),a=f()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":n}),r=t.purpose?h.a.createElement("div",{className:"p-user_group_details__channel_purpose"},t.purpose.value):null,i={className:a,isContextButtonVisible:n,tooltip:this.renderTooltip(),onClick:function(){return e.onViewProfile({type:yL,id:t.id})},renderMenu:function(n){return e.renderListItemOptionsMenu({menuProps:n,id:t.id,type:yL})},customProps:{key:t.id,"data-qa-user-group-details-channels-list-item":!0,"data-qa-user-group-details-channels-list-item-id":t.id},id:t.id};return this.props.featureSonicUserGroupsA11yRefactor?h.a.createElement(zL,i):h.a.createElement(zL,i,h.a.createElement("div",{className:"p-user_group_details__list_item_info"},h.a.createElement(pe.a,{channel:t,className:"bold cursor_pointer"}),r))}},{key:"renderTooltip",value:function(){return this.props.featureSonicUserGroups?kL.t("More actions"):null}},{key:"renderMembersList",value:function(){var e=this,t=this.props,n=t.userGroupMembers,a=t.userGroup;if(!n||Object(sa.a)(n))return this.renderEmptyMemberState();this.memberListKeys=Object(bo.a)(n,"id");var r=Object(aE.h)(a);return h.a.createElement(_D.a,null,function(t){var a=t.width,i=t.height,o=t.measureRef;return h.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-members-list":!0,ref:o},h.a.createElement(Xu.a,{ref:e.memberList,width:a,height:i,keys:e.memberListKeys,rowRenderer:function(t){return e.renderMemberItem(n[t])},ariaLabel:kL.t("{userGroupName} Members",{userGroupName:r,fallbackHash:"1cb449c1126609b4b41e1d87f65f0d7cd19b49b9"}),getAriaLabelForRow:e.getAriaLabelForMemberRow,onItemTabWithin:e.onItemTabWithin}))})}},{key:"renderChannelsList",value:function(){var e=this,t=this.props,n=t.userGroupDefaultChannels,a=t.userGroup;if(!n||Object(sa.a)(n))return this.renderEmptyChannelState();this.channelListKeys=Object(bo.a)(n,"id");var r=Object(aE.h)(a);return h.a.createElement(_D.a,null,function(t){var a=t.width,i=t.height,o=t.measureRef;return h.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-channels-list":!0,ref:o},h.a.createElement(Xu.a,{ref:e.channelsList,width:a,height:i,keys:e.channelListKeys,rowRenderer:function(t){return e.renderChannelItem(n[t])},ariaLabel:kL.t("{userGroupName} Default Channels",{userGroupName:r,fallbackHash:"2ec0a5de1b2e256a3e6c96a289fdfe0abf7dc5d0"}),getAriaLabelForRow:e.getAriaLabelForChannelRow,onItemTabWithin:e.onItemTabWithin}))})}},{key:"renderEmptyMemberState",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=kL.t("Add Members"),t=this.userGroupIsEditable()?h.a.createElement(Re.d,{type:"outline",size:"small",onClick:this.onAddMembers},e):null,n=kL.t("No members");return this.props.featureSonicUserGroupsA11yRefactor?h.a.createElement("div",{className:"p-user_group_details__empty_list"},h.a.createElement(gD.a,{title:n,primaryActionText:e,onClickPrimaryAction:this.onAddMembers})):h.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-details-empty-list":!0,"data-qa-user-group-details-empty-list-type":vL},h.a.createElement("div",{className:"p-user_group_details__empty_list_header"},n),t)}},{key:"renderEmptyChannelState",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=kL.t("Add Default Channels"),t=this.userGroupIsEditable()?h.a.createElement(Re.d,{type:"outline",size:"small",onClick:this.onAddChannels},e):null,n=kL.t("No default channels"),a=kL.t("All members of a user group are automatically added to its default channels.");return this.props.featureSonicUserGroupsA11yRefactor?h.a.createElement("div",{className:"p-user_group_details__empty_list"},h.a.createElement(gD.a,{title:n,description:a,primaryActionText:e,onClickPrimaryAction:this.onAddChannels})):h.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-details-empty-list":!0,"data-qa-user-group-details-empty-list-type":yL},h.a.createElement("div",{className:"p-user_group_details__empty_list_header"},n),h.a.createElement("div",{className:"p-user_group_details__empty_list_subtext"},a),t)}},{key:"renderConfirmationDialog",value:function(e){var t=e.action,n=e.onSubmit,a=e.id,r=this.props.groupId;return h.a.createElement(IL,{action:t,onSubmit:n,id:a,groupId:r})}},{key:"renderEditMembersDialog",value:function(){var e=this.props.groupId;return h.a.createElement(JL,{groupId:e})}},{key:"renderEditDetailsDialog",value:function(){var e=this.props.groupId;return h.a.createElement(XE,{userGroupId:e})}},{key:"renderContent",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=this.props.userGroup;return h.a.createElement("div",{className:"p-user_group_details p-user_group__content","data-qa-user-group-details":!0,"data-qa-user-group-details-id":e.id},this.renderHeader(),this.renderActions(),this.renderTabs())}},{key:"render",value:function(){return this.props.featureSonicUserGroups?h.a.createElement(qM.b,{ref:this.flexpane,focus:this.focus,className:"p-user_groups_flexpane_container",onOptionsClick:this.onCreateUserGroup,renderBody:this.renderContent,title:kL.t("User Groups"),viewId:"user-group-details",kbNavOrder:Object(Me.a)()?void 0:7}):null}}]),t}(p.PureComponent);CL.displayName="UserGroupDetails",CL.defaultProps=OL;var EL=Object(_.b)(function(e,t){var n=t.groupId,a=Object(tE.e)(e,n),r=Object(y.i)(e,"feature_sonic_user_groups");if(Object(aE.t)(a))return{userGroup:a,featureSonicUserGroups:r};var i=Object(aE.g)(a),o=Object(bo.a)(i,function(t){return Object(Ue.c)(e,t)}),s=Object(aE.d)(e,a),l=Object(bo.a)(s,function(t){return Object(re.d)(e,t)});return{userGroup:a,featureSonicUserGroups:r,featureSonicUserGroupsA11yRefactor:Object(y.i)(e,"feature_sonic_user_groups_a11y_refactor"),userGroupMembers:o,userGroupDefaultChannels:l,canEditUserGroups:function(){return Object(aE.c)(e)},canCreateAndDeleteUserGroups:function(){return Object(aE.b)(e)},featureLabelsForCoreObjects:Object(y.i)(e,"feature_labels_for_core_objects")}},function(e,t){var n=t.groupId;return{openModal:function(){return e(st.e.apply(void 0,arguments))},fetchUserGroupMembers:function(t){return e(Object(eE.i)({groupId:n,reason:t}))},removeMember:function(t){return e(Object(eE.m)({groupId:n,memberId:t}))},removeChannel:function(t){return e(Object(eE.l)({groupId:n,channelId:t}))},onChannelSwitch:function(t){return e(Object(ej.a)({id:t}))},openUserGroupList:function(){return e(Object(Ke.o)())},enqueueToast:function(){return e(dt.c.apply(void 0,arguments))},showMemberProfile:function(){return e(Ke.j.apply(void 0,arguments))}}})(CL),wL=new x.b("user_groups"),SL=(m.b.oneOf(Object($v.a)({disable_group:"disable_group",remove_member:"remove_member",remove_channel:"remove_channel"})).isRequired,m.b.func.isRequired,m.b.string,m.b.string,m.b.bool,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onGo=n.onGo.bind(n),n}return u()(t,e),o()(t,[{key:"onGo",value:function(){return this.props.onSubmit()}},{key:"getTitle",value:function(){if(!this.props.featureSonicUserGroups)return"";var e=this.props,t=e.action,n=e.groupName;switch(t){case"disable_group":return wL.t("Deactivate {groupName}?",{groupName:n});case"remove_member":return wL.t("Remove from group?");case"remove_channel":return wL.t("Remove default channel?")}return""}},{key:"getButtonText",value:function(){if(!this.props.featureSonicUserGroups)return"";switch(this.props.action){case"disable_group":return wL.t("Deactivate");case"remove_member":case"remove_channel":return wL.t("Remove")}return""}},{key:"getDialogBody",value:function(){if(!this.props.featureSonicUserGroups)return"";var e=this.props,t=e.groupName,n=e.label;switch(e.action){case"disable_group":return wL.rt("If you deactivate this user group, you won\u2019t be able to use <strong>{groupName}</strong> or view a list of its members. You can reactivate this group at any time.",{groupName:t});case"remove_member":return wL.rt("Are you sure you want to remove <strong>{label}</strong> from the <strong>{groupName}</strong> user group?",{label:n,groupName:t});case"remove_channel":return wL.rt("Are you sure you want to remove <strong>{label}</strong> as a default channel for the <strong>{groupName}</strong> user group?",{label:n,groupName:t})}return""}},{key:"render",value:function(){return h.a.createElement(lr.a,{showHeader:!0,showGoButton:!0,title:this.getTitle(),goButtonText:this.getButtonText(),goButtonType:"danger",onGo:this.onGo},h.a.createElement("p",null,this.getDialogBody()))}}]),t}(p.Component));SL.displayName="UserGroupConfirmationDialog",SL.defaultProps={label:"",groupName:"",featureSonicUserGroups:!1};var IL=Object(_.b)(function(e,t){var n=t.id,a=t.groupId,r="",i=Object(tE.e)(e,a);if(Object(Go.a)(n)){var o=Object(re.d)(e,n);r=Object(he.x)(e,o)}else if(Object(Bb.a)(n)){var s=Object(Ue.c)(e,n);r=Object(ne.E)(s)}return{groupName:Object(aE.h)(i),label:r,featureSonicUserGroups:Object(y.i)(e,"feature_sonic_user_groups")}})(SL),TL=n("8pCN"),NL=n("A+cF"),RL=n("9mdM"),AL=(n("JfyJ"),new x.b("user_groups")),PL=(m.b.string,m.b.object,m.b.bool.isRequired,{className:void 0,userGroup:void 0}),ML={unknown:"unknown",nonexistent:"non-existent"},DL=function(e){var t=Object(aE.h)(e);return h.a.createElement(NL.c,{className:"c-user_group__name"},h.a.createElement(se.b,{type:"user_groups",inline:!0,className:"c-medium_user_group__icon"}),t)};DL.displayName="renderName";var xL=function(e){var t=Object(aE.e)(e);return h.a.createElement(NL.b,null,t)};xL.displayName="renderDescription";var LL=function(e,t){var n=Object(aE.f)(e),a=Object(aE.l)(e);return h.a.createElement(NL.a,null,h.a.createElement("span",{className:"c-medium_user_group__handle"},n),t?AL.rt("{count} {count, plural, =1 {member} other {members}}",{count:a}):void 0)};function FL(e){var t=e.className,n=e.userGroup,a=e.featureSonicUserGroups,r=!Object(aE.u)(n);if(Object(aE.s)(n)||Object(aE.r)(n))return h.a.createElement(RL.a,{type:Object(aE.s)(n)?ML.unknown:ML.nonexistent,size:"medium"});var i=r?ED.c.dim:null;return h.a.createElement(NL.d,{className:t,size:"medium",style:i,text:DL(n),subtext:xL(n),metadata:LL(n,a)})}LL.displayName="renderMetaData",FL.displayName="MediumUserGroupEntity",FL.defaultProps=PL;var BL=Object(_.b)(function(e,t){var n=t.id;return{userGroup:t.group||Object(tE.e)(e,n),featureSonicUserGroups:Object(y.i)(e,"feature_sonic_user_groups")}})(FL),qL=(m.b.string,m.b.string.isRequired,m.b.bool,m.b.bool,m.b.bool,m.b.node,{className:void 0,isActive:!1,isDeactivated:!1,isDisabled:!1,secondaryContent:void 0});function UL(e){var t=e.className,n=e.isActive,a=e.isDeactivated,r=e.isDisabled,i=e.secondaryContent,o=Be()(e,["className","isActive","isDeactivated","isDisabled","secondaryContent"]),s=void 0;return n?s=r||a?ED.c.highlightDim:ED.c.highlightLight:(r||a)&&(s=ED.c.dim),h.a.createElement(Jw.a,{className:t,primaryContent:h.a.createElement(BL,Z()({isDeactivated:a},o)),secondaryContent:i,size:"medium",style:s})}UL.displayName="MediumUserGroupListEntity",UL.defaultProps=qL;var HL=UL,GL=n("/foC"),WL=(n("/VNe"),m.b.string,m.b.func.isRequired,m.b.string,m.b.node,m.b.bool,m.b.func,m.b.string,m.b.object,m.b.bool,new x.b("user_groups")),KL={id:null,className:"",children:"",isContextButtonVisible:!1,onClick:d.a,customProps:{},tooltip:void 0,featureSonicUserGroupsA11yRefactor:null},VL=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"getTooltipLabel",value:function(){return this.props.tooltip||WL.t("Edit user groups")}},{key:"renderContextButton",value:function(){var e=this.props,t=e.isContextButtonVisible,n=e.renderMenu;if(!t)return null;var a={tooltip:this.getTooltipLabel(),icon:"ellipsis",tooltipPosition:"top-right",onClick:n,menuProps:{renderMenu:n,width:"auto"}};return h.a.createElement(TL.b,{customClasses:"p-user_group_base_row__list_item_option"},h.a.createElement(TL.a,a))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.customProps,a=e.children,r=e.id,i=e.featureSonicUserGroupsA11yRefactor,o=e.onClick,s=f()("p-user_group_base_row__list_item",{"p-user_group_base_row__entity":i},t);return i&&r?Object(Go.a)(r)?h.a.createElement(GL.a,{channelId:r,secondaryContent:this.renderContextButton(),showPurpose:!1,onClick:o,className:s}):Object(Bb.a)(r)?h.a.createElement(AD,{className:s,id:r,secondaryContent:this.renderContextButton()}):h.a.createElement(HL,{id:r,secondaryContent:this.renderContextButton(),className:s}):h.a.createElement("div",{className:"p-user_group_base_row"},h.a.createElement(Re.c,Z()({className:s},n),a),this.renderContextButton())}}]),t}(p.PureComponent);VL.displayName="UserGroupBaseRow",VL.defaultProps=KL;var zL=Object(_.b)(function(e){return{featureSonicUserGroupsA11yRefactor:Object(y.i)(e,"feature_sonic_user_groups_a11y_refactor")}})(VL),YL=new x.b("user_groups"),QL=(m.b.bool,m.b.string.isRequired,m.b.func.isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={searchResultMode:!1,disableGoButton:!1},Object(T.a)(n,["onSave","onUpsertSuccess","onToggleSearchResultsMode","setUserGroupMemberManagementRef","onSelectedItemsChange"]),n.userGroupMemberManagementRef=null,n}return u()(t,e),o()(t,[{key:"onSave",value:function(){if(!this.userGroupMemberManagementRef)return!1;if(!this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount())return!1;var e=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.bulkUpsertUserGroupMembers(e).then(this.onUpsertSuccess).catch(this.onUpsertFailure)}},{key:"onSelectedItemsChange",value:function(e){this.setState(function(){return{disableGoButton:!e.length}})}},{key:"onUpsertSuccess",value:function(){this.props.featureSonicUserGroups&&this.props.enqueueToast({element:h.a.createElement(pt.b,null,YL.t("Group has been updated."))})}},{key:"onUpsertFailure",value:function(e){Object(ut.b)().error("Error updating user group members: "+JSON.stringify(e))}},{key:"onToggleSearchResultsMode",value:function(){this.setState(function(e){return{searchResultMode:!e.searchResultMode}})}},{key:"setUserGroupMemberManagementRef",value:function(e){this.userGroupMemberManagementRef=e&&e.getWrappedInstance?e.getWrappedInstance():e}},{key:"render",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=YL.t("Edit members");return h.a.createElement(lr.a,{showHeader:!0,showGoButton:!0,showFooter:!0,bodyClassName:"p-user_group_member_management__dialog_body",title:e,contentLabel:e,goButtonText:YL.t("Save"),onGo:this.onSave,goOnEnterPressed:!1,goButtonIsDisabled:this.state.disableGoButton},h.a.createElement(HE,{groupId:this.props.groupId,ref:this.setUserGroupMemberManagementRef,onSelectedItemsChange:this.onSelectedItemsChange}))}}]),t}(p.PureComponent));QL.displayName="UserGroupMemberManagementDialog",QL.defaultProps={featureSonicUserGroups:!1};var JL=Object(_.b)(function(e){return{featureSonicUserGroups:Object(y.i)(e,"feature_sonic_user_groups")}},function(e,t){var n=t.groupId;return{bulkUpsertUserGroupMembers:function(t){return e(Object(eE.e)({groupId:n,users:t}))},enqueueToast:function(){return e(dt.c.apply(void 0,arguments))}}})(QL),XL=n("F3Uw"),ZL=(n("hZjP"),m.b.string,m.b.bool,m.b.array,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={newMembers:[],timeoutId:null,searchTerm:""},Object(T.a)(n,["onSearchInputChange","onClearSearch"]),n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){var t=this,n=[];if(e.userGroupMembers.length&&!Object(Ny.a)(e.userGroupMembers,this.props.userGroupMembers)&&(n=Object(XL.a)(this.props.userGroupMembers,e.userGroupMembers,"id")),n.length){this.setState(function(){return{newMembers:n}});var a=this.state.timeoutId;a&&clearTimeout(a);var r=setTimeout(function(){t.setState(function(){return{newMembers:[]}})},1050);this.setState(function(){return{timeoutId:r}})}}},{key:"onSearchInputChange",value:function(e){var t=e.target.value;this.setState(function(){return{searchTerm:t}})}},{key:"onClearSearch",value:function(){this.setState(function(){return{searchTerm:""}})}},{key:"render",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=this.props.groupId,t=this.state,n=t.newMembers,a=t.searchTerm;return e?h.a.createElement(EL,{groupId:e,newMembers:n}):h.a.createElement(TF,{searchTerm:a,onSearchInputChange:this.onSearchInputChange,onClearSearch:this.onClearSearch})}}]),t}(p.PureComponent));ZL.displayName="UserGroupsFlexpane",ZL.defaultProps={groupId:null,featureSonicUserGroups:!1,userGroupMembers:[]};Object(_.b)(function(e){var t=Object(O.c)(e)[0],n=Object(tE.e)(e,t),a=Object(aE.g)(n);return{groupId:t,userGroupMembers:Object(bo.a)(a,function(t){return Object(Ue.c)(e,t)}),featureSonicUserGroups:Object(y.i)(e,"feature_sonic_user_groups")}})(ZL),n("Oxmb"),m.b.string.isRequired,m.b.string.isRequired,m.b.string,m.b.bool,m.b.string,m.b.number.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.bool,m.b.func,m.b.func.isRequired;var $L={description:null,isActive:!1,handle:void 0,featureSonicUserGroups:!1,onClick:d.a},eF=new x.b("user_groups"),tF=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onMenuClick","renderContextMenu"]),n}return u()(t,e),o()(t,[{key:"onMenuClick",value:function(e){var t=this.props.id;this.props.onClick(e,t)}},{key:"renderName",value:function(){var e=this.props,t=e.name,n=e.isActive;if(!e.featureSonicUserGroups)return null;var a=f()("black",{sk_dark_gray:!n}),r=n?t:eF.t("{name} (Deactivated)",{name:t});return h.a.createElement("div",{className:a},r)}},{key:"renderDescription",value:function(){var e=this.props,t=e.description,n=e.isActive;if(!t)return null;var a=f()("overflow_ellipsis",{sk_dark_gray:!n});return h.a.createElement("div",{className:a},t)}},{key:"renderHandle",value:function(){var e=this.props.handle;return e?h.a.createElement("span",{className:"p-user_group_row__handle"},e):null}},{key:"renderContextMenu",value:function(e){return h.a.createElement(mL,{menuProps:e,groupId:this.props.id,onClick:this.onMenuClick})}},{key:"render",value:function(){var e=this.props,t=e.userCount,n=e.isActive;if(!e.featureSonicUserGroups)return null;var a=f()("p-user_group_row",{"p-user_group_row--inactive":!n}),r={renderMenu:this.renderContextMenu,className:a,isContextButtonVisible:this.props.canEditUserGroups()||this.props.canCreateAndDeleteUserGroups(),id:this.props.id,isActive:n};return h.a.createElement(zL,r,this.renderName(),this.renderDescription(),this.renderHandle(),h.a.createElement("span",{className:"p-user_group_row__count"},eF.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:t})))}}]),t}(p.PureComponent);tF.displayName="UserGroupRow",tF.defaultProps=$L;var nF={showUserGroupDetails:Ke.n},aF=Object(_.b)(function(e,t){var n=t.id,a=Object(tE.e)(e,n),r={canEditUserGroups:function(){return Object(aE.c)(e)},canCreateAndDeleteUserGroups:function(){return Object(aE.b)(e)},featureSonicUserGroups:Object(y.i)(e,"feature_sonic_user_groups")};return a?Z()({name:Object(aE.h)(a),description:Object(aE.e)(a),handle:Object(aE.f)(a),userCount:Object(aE.l)(a),isActive:Object(aE.u)(a)},r):r},nF)(tF),rF=n("sK36"),iF=n("uqAm"),oF=new x.b("user_groups"),sF=(m.b.object,m.b.arrayOf(m.b.string),m.b.bool,m.b.string,{userGroup:{},defaultChannelNames:void 0,showToggle:!1,creator:void 0}),lF=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onButtonClick=n.onButtonClick.bind(n),n}return u()(t,e),o()(t,[{key:"onButtonClick",value:function(e,t){var n=this.props.userGroup;Object(iF.c)({action:t,userGroup:n})}},{key:"maybeRenderDescription",value:function(e){var t=this.props.userGroup,n=Object(aE.e)(t);return n?h.a.createElement("p",{className:e},n):null}},{key:"maybeRenderHandle",value:function(){var e=this.props.userGroup,t=Object(aE.f)(e,{includeAtSign:!0});return t?h.a.createElement("span",{className:"subtle_silver"},t):null}},{key:"maybeRenderToggle",value:function(){var e=this;return this.props.showToggle?h.a.createElement(h.a.Fragment,null,h.a.createElement("a",{"data-action":"enable_user_group",className:"user_group_toggle_btn no_bottom_margin subtle_silver small small_right_padding",onClick:function(t){return e.onButtonClick(t,"enable")},role:"link",tabIndex:"0"},h.a.createElement(le.c,{position:"left",zIndex:"above_fs",tip:oF.t("Enable group")},h.a.createElement("i",{className:"ts_icon ts_icon_power_off"})))):null}},{key:"maybeRenderDefaultChannels",value:function(){var e=this.props.defaultChannelNames;if(!e||!e.length)return null;var t=Object(x.h)(e,{react:!0,noEscape:!0}).join("");return h.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},h.a.createElement("span",{className:"bold"},oF.t("Default channels: {channels}",{channels:t})))}},{key:"maybeRenderCreatedBy",value:function(){var e=this.props,t=e.userGroup,n=e.creator;if(!(t||t.created_by&&t.date_create))return null;var a=oF.rt("Created by <strong>{creator}</strong> on {creationDate}",{creator:n,creationDate:Ca()(1e3*t.date_create).format("MMMM Do, YYYY")});return h.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},a)}},{key:"maybeRenderDisableButton",value:function(){var e=this;return this.props.showToggle?h.a.createElement(le.c,{position:"bottom",zIndex:"above_fs",tip:oF.t("Disable group")},h.a.createElement(Re.d,{size:"large",type:"outline",icon:"disable",className:"user_group_toggle_btn",title:""+oF.t("Disable"),"data-action":"disable_user_group",onClick:function(t){return e.onButtonClick(t,"disable")}})):null}},{key:"renderDeactivatedRow",value:function(){var e=this.props.userGroup,t=Object(aE.h)(e);return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"col span_4_of_6 small_padding no_bottom_margin"},h.a.createElement("p",{className:"no_bottom_margin subtle_silver"},h.a.createElement("span",{className:"bold"},t),oF.t("(Disabled)"))),h.a.createElement("div",{className:"col span_2_of_6 small_padding no_bottom_margin float_right align_right"},this.maybeRenderToggle()))}},{key:"renderCount",value:function(){var e=this.props.userGroup,t=e.isExternal||Object(aE.n)(e)?h.a.createElement("i",{className:"ts_icon ts_icon_sync"}):null;return h.a.createElement("p",{className:"user_group_count no_bottom_margin float_right small subtle_silver"},t,h.a.createElement("i",{className:"ts_icon ts_icon_user"}),Object(aE.l)(e))}},{key:"renderSettingsButton",value:function(){var e=this;return h.a.createElement(le.c,{position:"bottom",tip:oF.t("Edit group info"),zIndex:"above_fs"},h.a.createElement(Re.d,{size:"large",type:"outline",icon:"cog_o",title:""+oF.t("Settings"),"data-action":"open_form",onClick:function(t){return e.onButtonClick(t,"editInfo")}}))}},{key:"renderMemberButton",value:function(){var e=this,t=this.props.userGroup,n=void 0;return n=Object(aE.n)(t||t.is_external)?oF.t("View group members"):oF.t("Edit group members"),h.a.createElement(le.c,{position:"bottom",tip:n,zIndex:"above_fs"},h.a.createElement(Re.d,{size:"large",type:"outline",icon:"user",title:""+oF.t("Members"),"data-action":"edit_members",onClick:function(t){return e.onButtonClick(t,"editMembers")}}))}},{key:"render",value:function(){var e=this.props.userGroup;if(!Object(aE.u)(this.props.userGroup))return this.renderDeactivatedRow();var t=Object(aE.h)(e);return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"col span_3_of_4 small_padding no_bottom_margin"},h.a.createElement("p",{className:"bold no_bottom_margin"},t," ",this.maybeRenderHandle()),this.maybeRenderDescription("small no_bottom_margin"),this.maybeRenderDefaultChannels(),this.maybeRenderCreatedBy()),h.a.createElement("div",{className:"float_right right_padding"},this.renderCount(),h.a.createElement("p",{className:"user_group_actions user_group_actions--modern small no_bottom_margin"},this.maybeRenderDisableButton(),this.renderSettingsButton(),this.renderMemberButton())))}}]),t}(p.Component);lF.displayName="LegacyUserGroupBrowserListItem",lF.defaultProps=sF;var cF=Object(_.b)(function(e,t){var n=t.id,a=Object(tE.e)(e,n),r=Object(aE.d)(e,a,{includePrivateChannels:!1}),i=r.map(function(t){if(!t)return null;var n=Object(re.d)(e,t);if(!n)return null;var a=Object(he.L)(n);return a?"#"+a:null});return{userGroup:a,defaultChannels:r,defaultChannelNames:i=Object(El.a)(i),creator:Object(ne.Q)(e,a.created_by),showDelete:!Object(aE.n)(a)&&!a.is_external,showToggle:Object(aE.b)(e)}},null,null,{areStatePropsEqual:function(e,t){return Object(bb.a)(e,t,2)}})(lF),uF=new x.b("user_groups"),dF=(m.b.string.isRequired,m.b.object,m.b.func,m.b.bool,{userGroup:{},onClick:d.a,isUserGroupBrowser:!1}),pF=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(e){return this.props.onClick(e,this.props.id),Object(rF.d)(e,this.props.id)}},{key:"maybeRenderDescription",value:function(){var e=this.props.userGroup,t=Object(aE.e)(e);return t?h.a.createElement("p",null,t):null}},{key:"maybeRenderCountOrHandle",value:function(){var e=this.props.userGroup,t=Object(aE.l)(e),n=Object(aE.f)(e,{includeAtSign:!1});if(!t&&!n)return null;var a=uF.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:t});return n&&(a=a+" - "+Object(aE.f)(e)),h.a.createElement("p",{className:"subtle_silver tiny_bottom_margin"},a)}},{key:"renderRow",value:function(){var e=this.props,t=e.userGroup,n=e.id;return e.isUserGroupBrowser?h.a.createElement(cF,{id:n}):h.a.createElement("div",{className:"col span_5_of_6 small_padding no_bottom_margin"},h.a.createElement(oe.a,{"data-user-group-id":""+n,onClick:this.onClick},h.a.createElement("h4",null,Object(aE.h)(t)),this.maybeRenderDescription(),this.maybeRenderCountOrHandle()))}},{key:"render",value:function(){var e=this.props.id;return h.a.createElement("div",{className:"user_group_item small_padding bottom_border clearfix","data-qa":"user_group_list_item","data-user-group-id":""+e},this.renderRow())}}]),t}(p.Component);pF.displayName="LegacyUserGroupListItem",pF.defaultProps=dF;var hF=Object(_.b)(function(e,t){var n=t.id;return{userGroup:Object(tE.e)(e,n)}})(pF),mF=n("ITcr"),bF=new x.b("user_groups"),fF=(m.b.bool,m.b.bool,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"computeAtLabel",value:function(e){var t=e;return"group"===t&&(t="channel"),"@"+Object(mF.b)({ms_name:t})}},{key:"renderContent",value:function(){var e=this.props.isFlexpane,t=e?null:f()("col","span_3_of_4"),n=f()("normal_padding",{dull_grey:e}),a=bF.rt('While commands like <span className="mention">{atEveryone}</span>, <span className="mention">{atChannel}</span>, and <span className="mention">{atHere}</span> call the attention of all members in a conversation, User Groups let you choose exactly who should get your message.',{atEveryone:this.computeAtLabel("everyone"),atChannel:this.computeAtLabel("channel"),atHere:this.computeAtLabel("here"),fallbackHash:"b74e7333e097c646698fe696052060665b263452"}),r=bF.rt('Choose a group name, like <span className="mention">@design</span> or <span className="mention">@marketing</span>, then select the group members. Now, when someone in your workspace mentions the User Group, only its members will be notified. You can even add those members to channels of your choice automatically!',{fallbackHash:"a7c79b0ec617bd1a98db5c6183b5e1f91d52cb31"});return h.a.createElement("div",{className:t},h.a.createElement("div",{className:n},h.a.createElement("p",{className:"user_groups_tip"},a),h.a.createElement("p",{className:"user_groups_tip"},r)))}},{key:"render",value:function(){var e=this.props,t=e.isFlexpane;if(e.featureSonicUserGroups)return null;var n=t?h.a.createElement("div",null,h.a.createElement("span",{className:"user_groups_img"})):null,a=t?null:h.a.createElement("div",{className:"col span_1_of_4 no_right_padding"},h.a.createElement("span",{className:"user_groups_img"}));return h.a.createElement(p.Fragment,null,n,this.renderContent(),a)}}]),t}(p.PureComponent));fF.displayName="LegacyUserGroupEmptyState",fF.defaultProps={isFlexpane:!1,featureSonicUserGroups:!1};var _F=Object(_.b)(function(e,t){var n=t.id;return{userGroup:Object(tE.e)(e,n),featureSonicUserGroups:Object(y.i)(e,"feature_sonic_user_groups")}})(fF),gF=(n("5g6K"),new x.b("user_groups")),vF=(m.b.arrayOf(m.b.object),m.b.shape({key:m.b.string,offset:m.b.number}),m.b.string,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.object.isRequired,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.func,{userGroups:[],scrollmark:void 0,searchQuery:void 0,setCursorMark:d.a,fetchUserGroupsPost:d.a,fetchDeactivatedUserGroupsPost:d.a,saveScrollmark:d.a,onItemClick:d.a,onCreateUserGroup:d.a,onClearSearch:d.a,isLegacy:!1,includeDeactivated:!1,isUserGroupBrowser:!1,featureSonicUserGroups:!1,featureLabelsForCoreObjects:!1,onItemTabWithin:d.a}),yF=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onGroupClick=n.onGroupClick.bind(n),n.onScroll=n.onScroll.bind(n),n.setListRef=n.setListRef.bind(n),n.fetchPost=n.fetchPost.bind(n),n.handleFetchDeactivatedGroupsResponse=n.handleFetchDeactivatedGroupsResponse.bind(n),n.handleFetchActiveGroupsResponse=n.handleFetchActiveGroupsResponse.bind(n),n.fetchAround=n.fetchAround.bind(n),n.renderRow=n.renderRow.bind(n),n.maybeRenderList=n.maybeRenderList.bind(n),n.focus=n.focus.bind(n),n.getAriaLabelForRow=n.getAriaLabelForRow.bind(n),n.requestPost=null,n.keys=null,n.list=null,n.layout=new rd.a,n.totalGroups=0,n.isFirstFetch=!e.userGroups.length&&!e.searchQuery,n.state={reachedEnd:!1,fetchingDeactivatedGroups:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){if(this.props.scrollmark){var e=this.props.scrollmark,t=e.key,n=e.offset;this.layout.setAnchor(t,n),this.props.saveScrollmark(null)}}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.searchQuery;e.searchQuery!==t&&(this.setState(function(){return{reachedEnd:!1,fetchingDeactivatedGroups:!1}}),this.requestPost&&this.requestPost.cancel(),this.requestPost=null,this.totalGroups=0,this.layout&&this.layout.setAnchor(!1))}},{key:"componentWillUnmount",value:function(){this.requestPost&&(this.requestPost.cancel(),this.requestPost=null)}},{key:"onGroupClick",value:function(e,t){this.list&&t&&this.props.saveScrollmark({key:t,offset:this.layout.getOffsetForKey(t)-this.list.getScrollTop()})}},{key:"onScroll",value:function(){this.layout.anchor&&this.layout.setAnchor(!1)}},{key:"setListRef",value:function(e){this.list=e}},{key:"getAriaLabelForRow",value:function(e){if(!this.keys)return null;var t=this.props,n=t.userGroups,a=t.featureLabelsForCoreObjects,r=n[e];return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.handle,a=e.purpose,r=e.isDeactivated,i=e.featureLabelsForCoreObjects,o=e.memberCount,s=void 0===o?void 0:o;if(!i)return null;if(!t)return"";var l=!Object(rL.a)(s);return n&&a&&r&&!l?iL.t("{name}, @{handle}, {purpose} (deactivated)",{name:t,handle:n,purpose:a}):n&&a&&r&&l?iL.t("{name}, @{handle}, {purpose} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:n,purpose:a,memberCount:s}):n&&a&&!r&&l?iL.t("{name}, @{handle}, {purpose} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:n,purpose:a,memberCount:s}):n&&!a&&!r&&l?iL.t("{name}, @{handle} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:n,memberCount:s}):!n&&a&&!r&&l?iL.t("{name}, {purpose} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,purpose:a,memberCount:s}):!n&&a&&r&&l?iL.t("{name}, {purpose} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,purpose:a,memberCount:s}):!n&&a&&r&&!l?iL.t("{name}, {purpose} (deactivated)",{name:t,purpose:a}):n||!a||r||l?!n&&!a&&r&&l?iL.t("{name} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,memberCount:s}):n||a||!r||l?n&&!a&&r&&!l?iL.t("{name}, @{handle} (deactivated)",{name:t,handle:n}):n&&!a&&r&&l?iL.t("{name}, @{handle} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:n,memberCount:s}):n||a||r||l?!n||a||r||l?n&&a&&!r&&!l?iL.t("{name}, @{handle}, {purpose}",{name:t,handle:n,purpose:a}):n||a||r||!l?t:iL.t("{name} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,memberCount:s}):iL.t("{name}, @{handle}",{name:t,handle:n}):t:iL.t("{name} (deactivated)",{name:t}):iL.t("{name}, {purpose}",{name:t,purpose:a})}({name:Object(aE.i)(r),handle:Object(aE.f)(r,!1),purpose:Object(aE.e)(r),isDeactivated:!Object(aE.u)(r),memberCount:Object(aE.l)(r),featureLabelsForCoreObjects:a})}},{key:"focus",value:function(){this.list&&this.list.focus()}},{key:"handleFetchActiveGroupsResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.items,n=e.num_found;this.totalGroups=n,(this.props.userGroups.length>=this.totalGroups||!t.length)&&(this.props.includeDeactivated?(this.props.setCursorMark(null),this.setState(function(){return{fetchingDeactivatedGroups:!0}})):this.setState(function(){return{reachedEnd:!0}}))}},{key:"handleFetchDeactivatedGroupsResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.items,n=e.num_found,a=this.totalGroups+n;(this.props.userGroups.length>=a||!t.length)&&this.setState(function(){return{reachedEnd:!0}})}},{key:"fetchPost",value:function(){var e=this;return!this.requestPost&&(!this.state.reachedEnd&&(this.requestPost=this.state.fetchingDeactivatedGroups?this.fetchDeactivatedGroups():this.fetchActiveGroups(),this.isFirstFetch&&this.props.telemeter.mark("start_user_group_list_show"),this.requestPost.bind(this).finally(function(){e.requestPost=null,e.isFirstFetch&&(e.props.telemeter.measureAndClear("start_user_group_list_show","user_group_list_show_lazy"),e.isFirstFetch=!1)})))}},{key:"fetchDeactivatedGroups",value:function(){return this.props.fetchDeactivatedUserGroupsPost({searchQuery:this.props.searchQuery}).then(this.handleFetchDeactivatedGroupsResponse)}},{key:"fetchActiveGroups",value:function(){return this.props.fetchUserGroupsPost({searchQuery:this.props.searchQuery}).then(this.handleFetchActiveGroupsResponse)}},{key:"fetchAround",value:function(){return!this.requestPost&&!this.state.reachedEnd&&this.fetchPost()}},{key:"maybeRenderList",value:function(e){var t=this;return!e.length&&this.state.reachedEnd?this.renderEmptyListView():(this.state.reachedEnd||e.push("Loading"+e.length),h.a.createElement(sL,null,function(n){var a=n.width,r=n.height;return h.a.createElement(Xu.a,{width:a,height:r,keys:e,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,onItemClick:t.props.onItemClick,ref:t.setListRef,loadAround:t.fetchAround,loadPost:t.fetchPost,onItemTabWithin:t.props.onItemTabWithin,ariaLabel:gF.t("User Groups"),getAriaLabelForRow:t.getAriaLabelForRow})}))}},{key:"renderRow",value:function(e){var t=this.keys[e];if(!t)return null;switch(t[0]){case"L":return h.a.createElement("div",{className:"margin_top_200"},h.a.createElement(Yr.a,{color:"white"}));default:return this.renderUserGroup(e)}}},{key:"renderUserGroup",value:function(e){var t=this.props,n=t.userGroups,a=t.isLegacy,r=t.isUserGroupBrowser,i=n[e].id;return i?a?h.a.createElement(hF,{id:i,isUserGroupBrowser:r,onClick:this.onGroupClick}):h.a.createElement(aF,{id:i,onClick:this.onGroupClick}):null}},{key:"renderEmptyListView",value:function(){var e=this.props,t=e.featureSonicUserGroups,n=e.searchQuery,a=e.onClearSearch,r=e.onCreateUserGroup,i=e.isLegacy,o=e.isUserGroupBrowser,s=void 0,l=void 0,c=void 0,u=void 0,d=!!n.length;if(d)l=gF.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:n}),c=gF.t("Clear Search"),u=a;else{if(i&&!t)return h.a.createElement(_F,{isFlexpane:!o});Object(Ij.a)()?(s=gF.t("Organize your team"),c=gF.t("Create a User Group"),u=r):s=gF.t("No user groups yet"),l=gF.t("User groups make it easy to get the attention of many members at once.")}var p=f()({"p-user_group_list__empty_list":!d,"p-user_group_list__empty_search_results":d});return h.a.createElement("div",{className:p,"data-qa":"searchable_ug_list_empty_state"},h.a.createElement(gD.a,{title:s,description:l,primaryActionText:c,onClickPrimaryAction:u}))}},{key:"render",value:function(){return this.keys=this.props.includeDeactivated?this.props.userGroups.map(function(e){return e.id}):this.props.userGroups.filter(function(e){return!e.isDeactivated}).map(function(e){return e.id}),h.a.createElement("div",{className:"p-user_group_list","aria-live":"polite"},this.maybeRenderList(this.keys))}}]),t}(p.PureComponent);yF.displayName="SearchableUserGroupsList",yF.defaultProps=vF;var kF=Object(Fb.createSelector)([tE.a,nE.e],function(e,t){var n=t.map(function(t){var n=e[t];return n?{id:n.id,_name_lc:n._name_lc,isDeactivated:!!n.date_delete,name:n.description,handle:n.handle,user_count:n.user_count}:null}).filter(function(e){return e});return Object(qp.a)(n,["isDeactivated","_name_lc"])}),OF={fetchUserGroupsPost:nE.d,saveScrollmark:nE.h,setSearchQuery:nE.j,setCursorMark:nE.i,fetchDeactivatedUserGroupsPost:nE.c},jF=Object(_.b)(function(e){return{userGroups:kF(e),scrollmark:Object(nE.f)(e),searchQuery:Object(nE.g)(e),featureSonicUserGroups:Object(y.i)(e,"feature_sonic_user_groups"),featureLabelsForCoreObjects:Object(y.i)(e,"feature_labels_for_core_objects"),useGlobalNav:Object(hb.b)(e),telemeter:Object(dn.c)({state:e})}},OF)(function(e){var t=e.forwardedRef,n=Be()(e,["forwardedRef"]);return h.a.createElement(yF,Z()({ref:t},n))}),CF=h.a.forwardRef(function(e,t){return h.a.createElement(jF,Z()({forwardedRef:t},e))}),EF=(m.b.object,m.b.bool,m.b.func,m.b.string,m.b.string,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.func,m.b.func,{userGroups:{},featureSonicUserGroups:!1,openModal:d.a,searchTerm:"",searchQuery:"",onSearchInputChange:d.a,onClearSearch:d.a,setSearchQuery:d.a,shouldDisplayCreateUserGroupOption:!1,isActive:d.a,showUserGroupDetails:d.a}),wF=new x.b("user_groups"),SF=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onCreateUserGroup","onSearchInputChange","renderRow","renderContent","onClearSearch","focus","onItemClick","onItemTabWithin"]),n.searchableGroupList=h.a.createRef(),n.groupList=h.a.createRef(),n.flexpane=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"onItemClick",value:function(e){var t=e.id;this.props.isActive(t)&&this.props.showUserGroupDetails({groupId:t})}},{key:"onCreateUserGroup",value:function(){this.props.openModal({element:this.renderCreateEditDialog()})}},{key:"onSearchInputChange",value:function(e){return this.props.setSearchQuery(e.target.value)}},{key:"onClearSearch",value:function(){return this.props.setSearchQuery("")}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"getGroupedUserGroups",value:function(e){var t=Object(Up.a)(e,function(e){return Object(aE.u)(e)?"active":"inactive"});return t.active=t.active||[],t.inactive=t.inactive||[],t.active.concat(t.inactive)}},{key:"getSearchResults",value:function(e,t){var n=this;return t?Object(El.a)(e,function(e){if(!e)return!1;var a=Object(aE.h)(e),r=Object(aE.f)(e)||"",i=Object(aE.e)(e)||"";return!!n.checkForMatch(a,t)||(!!n.checkForMatch(r,t)||!!n.checkForMatch(i,t,!1))}):Object.values(e)}},{key:"getSortedResults",value:function(e){return Object(qp.a)(e,function(e){return Object(aE.h)(e).toLocaleLowerCase()})}},{key:"focus",value:function(){var e=this.searchableGroupList.current||this.groupList.current;e&&e.focus()}},{key:"checkForMatch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.prepStringForSearch(e,n).includes(this.prepStringForSearch(t,n))}},{key:"prepStringForSearch",value:function(e,t){if(!e)return"";var n=e.toLocaleLowerCase();return t&&(n=n.replace(/[\s-_]/g,"")),Object(x.a)(n)}},{key:"renderSearch",value:function(){var e=this.props.searchQuery;return this.props.featureSonicUserGroups?h.a.createElement("div",{className:"p-user_group_list__search"},h.a.createElement(AE.a,{value:e,onChange:this.onSearchInputChange,placeholder:wF.t("Find by name..."),icon:"search"})):null}},{key:"renderRow",value:function(e){var t=this.keys[e];return h.a.createElement(aF,{id:t})}},{key:"renderEmptySearchResults",value:function(){return this.props.featureSonicUserGroups?h.a.createElement("div",{className:"p-user_group_list__empty_search_results"},h.a.createElement("div",{className:"p-user_group_list__empty_search_results_subtext"},wF.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:this.props.searchTerm})),h.a.createElement(Re.d,{type:"outline",size:"small",onClick:this.props.onClearSearch},wF.t("Clear Search"))):null}},{key:"renderSearchableList",value:function(){return h.a.createElement(CF,{ref:this.searchableGroupList,onCreateUserGroup:this.onCreateUserGroup,includeDeactivated:!0,onClearSearch:this.onClearSearch,onItemClick:this.onItemClick,onItemTabWithin:this.onItemTabWithin})}},{key:"renderContent",value:function(){return h.a.createElement("div",{className:"p-user_group__content"},this.renderSearch(),this.renderSearchableList())}},{key:"renderCreateEditDialog",value:function(){return h.a.createElement(XE,null)}},{key:"render",value:function(){var e=this.props,t=e.featureSonicUserGroups,n=e.shouldDisplayCreateUserGroupOption;if(!t)return null;var a={renderBody:this.renderContent,title:wF.t("User Groups"),viewId:"user-group-list"};return n&&(a.onOptionsClick=this.onCreateUserGroup,a.headerProps={optionsIconType:"compose-dm",optionsTooltipText:wF.t("Create a user group")}),h.a.createElement(qM.b,Z()({ref:this.flexpane,focus:this.focus,className:"p-user_groups_flexpane_container"},a,{kbNavOrder:Object(Me.a)()?void 0:7}))}}]),t}(p.PureComponent);SF.displayName="UserGroupList",SF.defaultProps=EF;var IF={openModal:st.e,setSearchQuery:nE.j,showUserGroupDetails:Ke.n},TF=Object(_.b)(function(e,t){var n=Object(tE.a)(e),a=Object(y.i)(e,"feature_sonic_user_groups"),r=Object(aE.b)(e);return Z()({userGroups:n,searchQuery:Object(nE.g)(e),featureSonicUserGroups:a,shouldDisplayCreateUserGroupOption:r,isActive:function(t){return Object(aE.u)(Object(tE.e)(e,t))}},t)},IF)(SF),NF=n("q2TN"),RF=n("hhak"),AF=Object(ot.b)("If All Threads is open and the thread is present, request it to be focused via the all-threads-store",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.threadTs,i=Object(Ho.c)(a,r),o=Object(ut.a)({getState:t,label:"MAYBE-JUMP-THREAD"}),s=t(),l=Object(k.a)(t()),c=Object(O.i)(t())||!Object(O.e)(t());if(l!==wh.a.allThreads||!c)return o.info("All Threads not open"),!1;var u=Object(yi.e)(s);return u?Object(Iu.a)(u,{threadKey:i})?(o.info("Requesting "+i),e(Object(yi.p)(i)),!0):(o.info("Thread not found"),!1):(o.info("No threads"),!1)});AF.propTypes={channelId:m.b.string,threadTs:m.b.string};var PF=AF,MF=(m.b.string,m.b.string,m.b.arrayOf(m.b.string).isRequired,m.b.func.isRequired,m.b.string,m.b.number,m.b.string,m.b.func,m.b.bool,m.b.bool,m.b.object,m.b.bool,{oldest:void 0,latest:void 0,startTs:void 0,startTsOffset:0,highlightKey:void 0,requestHistory:d.a,reachedStart:!0,reachedEnd:!0,layout:void 0,isFileExpanding:!1}),DF=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onScroll=n.onScroll.bind(n),n.setListRef=n.setListRef.bind(n),n.loadAround=n.loadAround.bind(n),n.loadPre=n.loadPre.bind(n),n.loadPost=n.loadPost.bind(n),n.focus=n.focus.bind(n),n.list=null,n.layout=e.layout||new rd.a,n.layout.setAnchor(e.startTs||!1),e.startTsOffset&&(n.layout.anchorOffset=e.startTsOffset),n.layout.setStickToBottom(e.reachedEnd),n.state={isLoading:!1},n}return u()(t,e),o()(t,[{key:"componentWillReceiveProps",value:function(e){if(!this.list)throw new Error("MessageList needs a ref to List");(e.startTs!==this.props.startTs||e.highlightKey&&e.highlightKey!==this.props.highlightKey)&&(e.timestamps===this.props.timestamps?this.list.scrollToKey(e.startTs,{lazy:!0}):this.layout.setAnchor(e.startTs))}},{key:"componentDidUpdate",value:function(e){!e.reachedEnd&&this.props.reachedEnd&&this.layout.setAnchor(!1),!!e.isFileExpanding&&!this.props.isFileExpanding?this.layout.setStickToBottom(!1):this.layout.setStickToBottom(this.props.reachedEnd)}},{key:"onScroll",value:function(){this.layout.setAnchor(!1)}},{key:"getScrollmark",value:function(){if(!this.list)return null;var e=this.list.getScrollTop(),t=this.layout.shouldStickToBottom(e),n=this.props.timestamps,a=this.layout.findAnchor(n,n,e);return{mark:a,offset:this.layout.getTop(a)-e,stickToBottom:t}}},{key:"setListRef",value:function(e){this.list=e}},{key:"loadAround",value:function(){var e=this;if(this.state.isLoading)return!1;var t=this.props,n=t.oldest,a=t.latest,r=t.reachedStart,i=t.reachedEnd,o=t.timestamps,s=t.startTs;if(i)return this.loadPre();if(r)return this.loadPost();var l=a||Object(_f.a)(o)||s,c=n||Object(Tu.a)(o)||s,u=this.props.requestHistory({latest:l,oldest:c});return u&&(u.finally(function(){return Promise.delay(250)}).then(function(){return e.setState(function(){return{isLoading:!1}})}),this.setState(function(){return{isLoading:"around"}})),u}},{key:"loadPre",value:function(){var e=this;if(this.state.isLoading)return!1;var t=this.props,n=t.oldest,a=t.reachedStart,r=t.timestamps,i=t.startTs;if(a)return!1;var o=n||Object(_f.a)(r)||i,s=this.props.requestHistory({latest:o});return s&&(s.finally(function(){return Promise.delay(250)}).then(function(){return e.setState(function(){return{isLoading:!1}})}),this.setState(function(){return{isLoading:"pre"}})),s}},{key:"loadPost",value:function(){var e=this;if(this.state.isLoading)return!1;var t=this.props,n=t.latest,a=t.reachedEnd,r=t.timestamps,i=t.startTs;if(a)return!1;this.isLoading=!0;var o=n||Object(Tu.a)(r)||i,s=this.props.requestHistory({oldest:o});return s&&(s.finally(function(){return Promise.delay(250)}).then(function(){return e.setState(function(){return{isLoading:!1}})}),this.setState(function(){return{isLoading:"pre"}})),s}},{key:"focus",value:function(){this.list&&this.list.focus()}},{key:"render",value:function(){var e=this.props,t=e.reachedStart,n=e.reachedEnd,a=e.timestamps;return this.props.listRenderer({reachedStart:t,reachedEnd:n,keys:a,layout:this.layout,onScroll:this.onScroll,loadAround:this.loadAround,loadPre:this.loadPre,loadPost:this.loadPost,ref:this.setListRef})}}]),t}(p.PureComponent);DF.displayName="MessageList";var xF=DF;DF.defaultProps=MF;n("XThT"),n("34TR");var LF=new x.b("message_kit"),FF=(m.b.object.isRequired,m.b.string,m.b.bool,m.b.func,m.b.bool,m.b.bool,m.b.bool,{className:void 0,highlight:void 0,clearHighlight:void 0,focused:!1,renderActionsOffscreen:!1,featureConsolidateContentRendering:!1}),BF=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderContent",value:function(e){var t=Fd.a.threads_flexpane;return e.blocks?h.a.createElement(Kd.a,{msg:e,blocksContainerContext:t}):h.a.createElement(Wd.a,{msg:e})}},{key:"render",value:function(){var e=this.props,t=e.msg,n=e.highlight,a=e.clearHighlight,r=e.focused,i=e.renderActionsOffscreen,o=e.featureConsolidateContentRendering,s=f()("c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className);return h.a.createElement($d.a,{msg:t},h.a.createElement(ep.a,{msg:t,className:s,highlight:n,clearHighlight:a},h.a.createElement(tp.a,{hovered:r},h.a.createElement(np.a,{msg:t,showComment:!1,showShare:!1,showJump:!0,messageContainerType:hu.y.THREADS_FLEXPANE,position:"inside",renderOffscreen:i},h.a.createElement(lp.a,{msg:t},h.a.createElement(cp.a,{msg:t},h.a.createElement(ap.a,{light:h.a.createElement(qd.a,{msg:t})},h.a.createElement(hp,{msg:t},h.a.createElement(Hd.a,{msg:t}),"\xa0",h.a.createElement(Gd.a,{msg:t,full:!0,clickable:!0},LF.t("Open in channel")),h.a.createElement("br",null),h.a.createElement(mp.a,null,o?h.a.createElement(h.a.Fragment,null,h.a.createElement(Wd.a,{msg:t}),h.a.createElement(Kd.a,{msg:t,blocksContainerContext:Fd.a.threads_flexpane})):this.renderContent(t),h.a.createElement(Ud.b,{msg:t}),h.a.createElement(Bd.a,{msg:t,blocksContainerContext:Fd.a.threads_flexpane}),h.a.createElement(Vd.a,{msg:t}))))))))))}}]),t}(p.PureComponent);BF.displayName="ThreadRootMessage";var qF=BF;BF.defaultProps=FF;m.b.object.isRequired,m.b.string,m.b.bool,m.b.func,m.b.bool,m.b.bool,m.b.bool;var UF={className:void 0,highlight:void 0,clearHighlight:void 0,focused:!1,renderActionsOffscreen:!1,featureConsolidateContentRendering:!1},HF=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderContent",value:function(e){var t=Fd.a.threads_flexpane;return e.blocks?h.a.createElement(Kd.a,{msg:e,blocksContainerContext:t}):h.a.createElement(Wd.a,{msg:e})}},{key:"render",value:function(){var e=this.props,t=e.msg,n=e.highlight,a=e.clearHighlight,r=e.focused,i=e.renderActionsOffscreen,o=e.featureConsolidateContentRendering,s=f()("c-message_kit__message","c-message_kit__thread_message",this.props.className);return h.a.createElement($d.a,{msg:t},h.a.createElement(ep.a,{msg:t,className:s,highlight:n,clearHighlight:a},h.a.createElement(tp.a,{hovered:r},h.a.createElement(np.a,{msg:t,showComment:!1,showShare:!1,messageContainerType:hu.y.THREADS_FLEXPANE,renderOffscreen:i},h.a.createElement(cp.a,{msg:t,showBroadcast:!0},h.a.createElement(ap.a,{light:h.a.createElement(qd.a,{msg:t})},h.a.createElement(hp,{msg:t},h.a.createElement(Hd.a,{msg:t}),"\xa0\xa0",h.a.createElement(Gd.a,{msg:t,relative:!0}),h.a.createElement("br",null),h.a.createElement(mp.a,null,h.a.createElement(MN,{msg:t},o?h.a.createElement(h.a.Fragment,null,h.a.createElement(Wd.a,{msg:t}),h.a.createElement(Kd.a,{msg:t,blocksContainerContext:Fd.a.threads_flexpane})):this.renderContent(t),h.a.createElement(Ud.b,{msg:t}),h.a.createElement(Bd.a,{msg:t,blocksContainerContext:Fd.a.threads_flexpane})),h.a.createElement(Vd.a,{msg:t})))))))))}}]),t}(p.PureComponent);HF.displayName="ThreadReplyMessage";var GF=HF;HF.defaultProps=UF;n("l31K");var WF=new x.b("flexpane");m.b.bool;function KF(e){if(!e.featureReactThreads)return null;var t=cdn_url+"/4f28/img/loading_hash_animation_@2x.gif",n=cdn_url+"/4f28/img/loading_hash_animation.gif",a=WF.t("loading\u2026"),r=n+" 1x, "+t+" 2x";return h.a.createElement("div",{className:"p-flexpane_loading","data-qa":"flexpane_loading"},h.a.createElement("img",{className:"p-flexpane_loading__spinner",src:t,alt:a,srcSet:r}),h.a.createElement("br",null),a)}KF.displayName="FlexpaneLoading",KF.defaultProps={featureReactThreads:!1};var VF=Object(Dt.a)("feature_react_threads")(KF),zF=(n("vOUN"),new x.b("threads")),YF=(m.b.string,m.b.string,m.b.bool,m.b.number,m.b.string,{channelId:void 0,threadTs:void 0,isMpim:!1,numMpimMembers:0,mpimName:void 0});function QF(e){var t=e.channelId,n=e.threadTs,a=e.isMpim,r=e.numMpimMembers,i=e.mpimName,o=void 0;return o=a?h.a.createElement("div",{className:"p-threads_flexpane__header_channel_name"},h.a.createElement(le.c,{tip:i},h.a.createElement("span",null,zF.t("Direct message with {count} others",{count:r})))):h.a.createElement(pe.a,{channelId:t,className:"p-threads_flexpane__header_channel_name",inline:!0,iconProps:{inherit:!0}}),h.a.createElement(G.a,{className:"p-threads_flexpane__header_permalink",href:Object(id.v)(t,n)},o)}QF.displayName="Header",QF.defaultProps=YF;var JF=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n),r={};if(a&&"mpim"===Object(he.v)(a)){r.isMpim=!0;var i=Object(he.H)(a)||[];r.numMpimMembers=i.length-1,r.mpimName=Object(he.x)(e,a)}return r})(QF),XF=(n("uS0p"),new x.b("threads"));m.b.number;function ZF(e){var t=e.replyCount,n=Math.max(1,t),a=XF.t("{count, plural, =1 {# reply} other {# replies}}",{count:n,fallbackHash:"45d5eeb729c4b8d8b91f810f9387e5a97b3e6ce5"});return h.a.createElement("div",{className:"p-threads_flexpane__separator"},h.a.createElement("span",{className:"p-threads_flexpane__separator_count"},a),h.a.createElement("hr",{className:"p-threads_flexpane__separator_line"}))}ZF.displayName="Separator",ZF.defaultProps={replyCount:0};var $F=Object(_.b)(function(e,t){var n=t.channelId,a=t.threadTs,r=Object(vo.a)(e,n,a);return{replyCount:Object(id.S)(r)}})(ZF),eB=(n("x++y"),new x.b("threads")),tB=(m.b.func,m.b.bool,{tryAgain:d.a,featureReactThreads:!0});function nB(e){var t=e.tryAgain;return e.featureReactThreads?h.a.createElement("div",{className:"p-threads_flexpane__error","data-qa":"threads_flexpane_error"},h.a.createElement("div",{className:"p-threads_flexpane__error_contents"},h.a.createElement("div",{className:"p-threads_flexpane__error_emoji"},h.a.createElement(Mn.b,{text:":mag:",emojiSize:Mn.a.LARGE})),h.a.createElement("p",{className:"p-threads_flexpane__error_header"},eB.t("Couldn't load thread")),h.a.createElement("p",{className:"p-threads_flexpane__error_body"},eB.rt("If the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text,n=e.key;return h.a.createElement(G.a,{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:n},t)})),h.a.createElement(Re.d,{type:"primary",onClick:t,"data-qa":"threads_flexpane_error_try_again"},eB.t("Try Again")))):null}nB.displayName="ThreadsError",nB.defaultProps=tB;var aB=Object(_.b)(function(e){return{featureReactThreads:Object(y.i)(e,"feature_react_threads")}})(nB),rB=function(){function e(){r()(this,e),this.historyRequests={}}return o()(e,[{key:"reset",value:function(){this.historyRequests={}}},{key:"logHistoryRequest",value:function(e){var t=e.oldest,n=e.latest,a=e.now,r=void 0===a?Date.now():a,i=t+"_"+n,o=this.historyRequests[i];o||(o={count:0,time:0},this.historyRequests[i]=o),r-1e4>o.time?(o.count=1,o.time=r):o.count+=1}},{key:"shouldPreventHistoryRequest",value:function(e){var t=e.oldest,n=e.latest,a=e.now,r=void 0===a?Date.now():a,i=this.historyRequests[t+"_"+n];return!!i&&(!(i.count<=3)&&!(i.time<r-1e4))}}]),e}(),iB=new x.b("threads"),oB=ld(qF),sB=ld(GF),lB=(m.b.string,m.b.string,m.b.bool,m.b.string,m.b.string,m.b.string,m.b.string,m.b.arrayOf(m.b.string),m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.string,m.b.array,m.b.string,m.b.string,m.b.string,m.b.bool,m.b.string,m.b.number,m.b.string,m.b.func,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.string,m.b.bool,m.b.string,m.b.bool,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.object,m.b.func,m.b.func,m.b.string,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.string,m.b.func,m.b.func,m.b.object,m.b.bool,m.b.bool,m.b.bool,m.b.number,m.b.bool,m.b.string,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.bool,m.b.func,{threadTs:void 0,channelId:void 0,subscribed:void 0,lastRead:void 0,maxMarkableTs:void 0,oldest:void 0,latest:void 0,timestamps:[],reachedStart:!1,reachedEnd:!1,prevReachedEnd:!1,userHasUnreadThreads:!1,fileId:void 0,comments:[],startTs:void 0,highlightTs:void 0,highlightKey:void 0,showDragOverlay:!1,scrollMarkTs:void 0,scrollMarkOffset:0,serializationKey:void 0,clearSerializedDataForKey:d.a,requestHistory:d.a,clearHighlight:d.a,markThread:d.a,useGlobalNav:!1,primaryView:void 0,windowFocused:!1,userAttention:"",featureReactThreads:!0,featureReactAllUnreads:!1,featureAriaApplicationMode:!1,logInfo:d.a,logError:d.a,clogger:{track:d.a},jumpToMessage:d.a,setFocusRequestedTs:d.a,focusRequested:void 0,setFocusRequested:d.a,maybeFocusThreadInAllThreads:function(){return!1},maybeFocusThreadInAllUnreads:d.a,featureReactAllThreads:!1,focusInput:null,setFocusInput:d.a,makeMessageSummary:d.a,channel:void 0,channelIsYou:!1,channelIsMuted:!1,channelHasDraft:!1,channelBadgeCount:0,isChannelUnavailable:!1,unavailableTeamId:"",readOnly:!1,featureAnnounceOnly:!1,isFileExpanding:!1,featureOfflineMode:!1,isOffline:!1,truncateThreadHistory:d.a}),cB=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.requestHistory=n.requestHistory.bind(n),n.renderRow=n.renderRow.bind(n),n.renderList=n.renderList.bind(n),n.tryAgain=n.tryAgain.bind(n),n.toggleComments=n.toggleComments.bind(n),n.isFocusableItem=n.isFocusableItem.bind(n),n.onFocusEnter=n.onFocusEnter.bind(n),n.onFocusLeave=n.onFocusLeave.bind(n),n.clogThreadEvent=n.clogThreadEvent.bind(n),n.onArrowKeyLeft=n.onArrowKeyLeft.bind(n),n.shouldIgnoreArrowKeys=n.shouldIgnoreArrowKeys.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.getAriaLabelForRow=n.getAriaLabelForRow.bind(n),n.renderBody=n.renderBody.bind(n),n.renderSubtitle=n.renderSubtitle.bind(n),n.focus=n.focus.bind(n),n.blur=n.blur.bind(n),n.onItemTabWithin=n.onItemTabWithin.bind(n),n.keys=null,n.rows=null,n.historyRateLimiter=new rB,n.listRef=h.a.createRef(),n.flexpane=h.a.createRef(),n.state={degraded:iO(),commentsExpanded:!1,hasKeyboardFocus:!1,errored:!1},e.scrollMarkTs||e.scrollMarkOffset?n.initialScrollMark={mark:e.scrollMarkTs,offset:e.scrollMarkOffset}:n.initialScrollMark={},n}return u()(t,e),o()(t,null,[{key:"getRowsAndKeys",value:function(e,t){var n=e.threadTs,a=e.reachedStart,r=e.reachedEnd,i=e.prevReachedEnd,o=e.timestamps,s=e.comments,l=t.commentsExpanded,c=t.degraded,u=[],d=[];if(Object(sa.a)(o))return{rows:d,keys:u};var p=Object(_f.a)(o)===n,h=Object(Hu.a)(o,n);return a||c||(u.push("loading-start-"+Object(_f.a)(h)),d.push({type:"loading"})),p&&(u.push(n),d.push({type:"root",ts:n}),Object(sa.a)(s)||(u.push("comments-toggle"),d.push({type:"comments-toggle"}),l&&s.forEach(function(e){u.push(e.id),d.push({type:"comment",comment:e})})),h.length&&(u.push("separator"),d.push({type:"separator"}))),h.forEach(function(e,t){u.push(e),d.push({type:"reply",ts:e,prevTs:h[t-1]})}),r||i?(u.push("input"),d.push({type:"input"})):c||(u.push("loading-end"),d.push({type:"loading"})),{rows:d,keys:u}}}]),o()(t,[{key:"componentDidMount",value:function(){this.checkUnreads(),Object(Me.a)()&&this.maybeFocus();var e=this.props,t=e.scrollMarkTs,n=e.scrollMarkOffset,a=e.serializationKey;(t||n)&&a&&this.props.clearSerializedDataForKey(a)}},{key:"componentWillReceiveProps",value:function(e){var t=Object(Ho.c)(this.props.channelId,this.props.threadTs),n=Object(Ho.c)(e.channelId,e.threadTs);this.state.errored&&t!==n&&this.setState(function(e){return Z()({},e,{errored:!1})})}},{key:"componentDidUpdate",value:function(e){this.checkUnreads();var t=this.props,n=t.threadTs,a=t.channelId,r=Object(Ho.c)(a,n),i=e.threadTs,o=e.channelId,s=Object(Ho.c)(o,i);r!==s&&this.historyRateLimiter.reset(),s&&r!==s&&this.props.truncateThreadHistory({threadKey:s}),this.maybeFocus()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.focusInput,n=e.channelId,a=e.threadTs;t===Object(Ho.c)(n,a)&&this.props.setFocusInput(null),this.props.truncateThreadHistory({threadKey:Object(Ho.c)(n,a)})}},{key:"onFocusEnter",value:function(e){this.setState(function(){return{hasKeyboardFocus:e.isKeyboardFocus}})}},{key:"onFocusLeave",value:function(){this.setState(function(){return{hasKeyboardFocus:!1}})}},{key:"onArrowKeyLeft",value:function(){var e=this,t=this.props,n=t.featureReactAllThreads,a=t.featureReactAllUnreads,r=t.channelId,i=t.threadTs,o=t.primaryView;if(a&&Object(Ei.a)([Wo.a.allUnreads,"Punreads"],o))return this.props.maybeFocusThreadInAllUnreads(Object(Ho.c)(r,i)),Promise.resolve();if(n&&o===Wo.a.allThreads&&this.props.maybeFocusThreadInAllThreads({channelId:r,threadTs:i}))return Promise.resolve();return this.props.jumpToMessage({channelId:this.props.channelId,ts:this.props.threadTs}).then(function(){e.props.setFocusRequestedTs(e.props.threadTs)})}},{key:"onKeyDown",value:function(e){var t=this;if(DT({e:e,isMenuVisible:Object(ie.g)()})){var n=Object(vf.a)({viewContext:hu.y.THREADS_FLEXPANE,channelId:this.props.channelId,threadTs:this.props.threadTs});if(n){var a=function(){t.blur(),n.focus()};Object(pw.c)()?setTimeout(a,0):a()}}}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"getAriaLabelForRow",value:function(e){if(!this.props.makeMessageSummary)return null;var t=this.rows[e];return t&&t.type?"root"!==t.type&&"reply"!==t.type?null:this.props.makeMessageSummary({channelId:this.props.channelId,ts:t.ts,hasFocus:this.state.hasKeyboardFocus,day:{ts:t.ts,isFirstDay:!1,isLastDay:!1}}):null}},{key:"shouldIgnoreArrowKeys",value:function(e){return!!Object(_u.a)(e.target)||(!this.checkUserAttentionIsOnChat()||!this.state.hasKeyboardFocus)}},{key:"checkUserAttentionIsOnChat",value:function(){return Object(Me.a)()?this.props.userAttention===De.a.MESSAGE_PANE:Object(fu.f)()}},{key:"componentDidCatch",value:function(e){this.setState(function(){return{errored:!0}}),this.props.logError("THREAD-FLEXPANE","ThreadsFlexpane componentDidCatch","threads_flexpane_did_catch",e)}},{key:"maybeFocus",value:function(){var e=this.props,t=e.focusRequested,n=e.timestamps,a=e.channelId,r=e.threadTs;t!==Object(Ho.c)(a,r)||Object(sa.a)(n)||(this.focus(),this.props.setFocusRequested(null))}},{key:"focus",value:function(){var e=this.listRef.current&&this.listRef.current.list;e&&e.focus()}},{key:"blur",value:function(){var e=this.listRef.current&&this.listRef.current.list;e&&e.blur()}},{key:"checkUnreads",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.subscribed,r=e.lastRead,i=e.reachedEnd,o=e.maxMarkableTs,s=e.userAttention,l=e.userHasUnreadThreads,c=e.logInfo;if(a&&i&&o){var u=Object(Ho.c)(t,n);if(!r||r<o){if(Object(Me.a)()){if(s!==De.a.MESSAGE_PANE)return void c("THREAD-FLEXPANE","Not marking "+u+" to "+o+" because "+s)}else if(!Object(fu.f)())return void c("THREAD-FLEXPANE","Not marking "+u+" to "+o+" because "+Object(fu.c)());if(!l)return void c("THREAD-FLEXPANE","Not marking "+u+" to "+o+" because no unread threads yet");c("THREAD-FLEXPANE","Marking "+Object(Ho.c)(t,n)+": "+o),this.props.markThread({channelId:t,ts:n,lastRead:o,reason:"mark-thread-as-read-from-flexpane"})}}}},{key:"requestHistory",value:function(e){var t=this,n=e.oldest,a=e.latest,r=this.props,i=r.channelId,o=r.threadTs,s=r.requestHistory,l=r.logError;if(this.historyRateLimiter.shouldPreventHistoryRequest({oldest:n,latest:a}))return l("THREAD-FLEXPANE","Rate-limited thread: "+Object(Ho.c)(i,o)),!1;var c=s({oldest:n,latest:a,channelId:i,threadTs:o});return c&&this.historyRateLimiter.logHistoryRequest({oldest:n,latest:a}),c.then(function(e){return t.setState(function(e){return Z()({},e,{errored:!1})}),e}).catch(function(e){return t.setState(function(e){return Z()({},e,{errored:!0})}),Promise.reject(e)})}},{key:"tryAgain",value:function(){this.setState(function(e){return Z()({},e,{errored:!1})})}},{key:"toggleComments",value:function(){var e=this.state.commentsExpanded;this.setState(function(){return{commentsExpanded:!e}})}},{key:"isFocusableItem",value:function(e){var t=e.index,n=this.rows[t];return!!n&&("loading"!==n.type&&("separator"!==n.type&&"input"!==n.type))}},{key:"isListScrollable",value:function(){var e=this.listRef.current&&this.listRef.current.list;return!(e&&e.layout.getHeightValidity("input"))||e.getContentHeight()>e.getContainerHeight()}},{key:"clogThreadEvent",value:function(e){var t=e.event,n=e.metadata,a=this.props,r=a.channelId,i=a.threadTs;a.clogger.track(t,Z()({parent_message_id:i,channel_id:r,is_threads_view:0,is_flexpane:1},n))}},{key:"renderRow",value:function(e,t){var n=t.hasFocus,a=this.props,r=a.channelId,i=a.highlightTs,o=a.threadTs,s=a.comments,l=a.fileId,c=a.featureReactThreads,u=a.focusInput,d=a.featureOfflineMode,p=a.isOffline;if(!c)return null;var m=this.state.commentsExpanded,b=this.rows[e];if(!b)return null;var f=this.state.hasKeyboardFocus;switch(b.type){case"separator":return h.a.createElement($F,{channelId:r,threadTs:o});case"root":return h.a.createElement(oB,{channelId:r,ts:b.ts,highlight:b.ts===i,clearHighlight:this.props.clearHighlight,focused:n,renderActionsOffscreen:f});case"reply":return h.a.createElement(sB,{channelId:r,ts:b.ts,highlight:b.ts===i,clearHighlight:this.props.clearHighlight,focused:n,renderActionsOffscreen:f});case"input":return h.a.createElement(aR,{channelId:r,threadTs:o,focusInputOnMount:u===Object(Ho.c)(r,o)&&!this.isListScrollable(),viewContext:hu.y.THREADS_FLEXPANE,clogThreadEvent:this.clogThreadEvent});case"comments-toggle":return h.a.createElement(OM,{commentCount:s.length,expanded:m,toggleList:this.toggleComments});case"comment":return h.a.createElement(vM,{comment:b.comment,fileId:l});case"loading":return d&&p?h.a.createElement(Od,null):h.a.createElement("div",{className:"p-threads_flexpane__loading"},iB.t("Loading messages..."));default:return null}}},{key:"renderList",value:function(e){var n=this,a=t.getRowsAndKeys(this.props,this.state),r=a.rows,i=a.keys;this.rows=r,this.keys=i;var o=this.state.degraded?nO:Xu.a,s=this.props,l=s.reachedEnd,c=s.reachedStart,u=s.featureAriaApplicationMode,d=s.channel,p=s.channelId,m=s.channelIsYou,b=s.channelIsMuted,f=s.channelHasDraft,_=s.channelBadgeCount,g=s.threadTs,v=s.readOnly,y=s.featureAnnounceOnly,k=s.featureOfflineMode,O=s.isOffline,j=[{keys:["left"],handler:this.onArrowKeyLeft,filter:this.shouldIgnoreArrowKeys}],C=Object(O_.a)({type:Object(he.v)(d),displayName:Object(he.w)(d),isShared:Object(he.Y)(d),isOrgShared:Object(he.rb)(d),hasUnreads:!!Object(he.S)(d),isArchived:Object(he.V)(d),unreadCount:Object(he.S)(d),isYou:m,isMuted:b,hasDraft:f,badgeCount:_,isSelected:!1,userActive:!1,isTyping:!1,isThread:!0,canPost:!v,featureAnnounceOnly:y}),E=function(){if(!n.rows.length)return null;var e=n.rows.filter(function(e){return"reply"===e.type})[0];return e?e.ts:g}(),w=Object(Ho.e)(Object(Ho.c)(p,g));return h.a.createElement(_D.a,null,function(t){var a=t.measureRef,r=t.width,s=t.height;return h.a.createElement("div",{className:"flex_one no_min_height",ref:a},h.a.createElement(o,Z()({},e,{id:w,keys:i,width:r,height:s,rowRenderer:n.renderRow,isFocusableItem:n.isFocusableItem,initialActiveItem:E,onFocusEnter:n.onFocusEnter,onItemTabWithin:n.onItemTabWithin,onFocusLeave:n.onFocusLeave,reachedEnd:l,reachedStart:c,ariaLabel:C,getAriaLabelForRow:n.getAriaLabelForRow,persistentKeys:["input"],keyCommands:j,useAriaApplicationMode:u,featureOfflineMode:k,isOffline:O})))})}},{key:"renderMessageList",value:function(){if(this.props.isChannelUnavailable){var e=this.props,t=e.unavailableTeamId,n=e.channelId;return h.a.createElement(AO,{unavailableTeamId:t,channelId:n,isThread:!0})}var a=this.props,r=a.channelId,i=a.threadTs,o=a.oldest,s=a.latest,l=a.timestamps,c=a.startTs,u=a.highlightTs,d=a.highlightKey,p=a.reachedStart,m=a.reachedEnd,b=a.comments;if(!r||!i)return null;var f={comments:b,commentsExpanded:this.state.commentsExpanded,highlightTs:u,highlightKey:d},_=this.initialScrollMark,g=_.mark,v=_.offset;return h.a.createElement(xF,Z()({oldest:o,latest:s,timestamps:l,listRenderer:this.renderList,startTs:g||c,startTsOffset:v,highlightKey:d,requestHistory:this.requestHistory,reachedStart:p,reachedEnd:m,isFileExpanding:this.props.isFileExpanding,ref:this.listRef},f,{key:Object(Ho.c)(r,i)}))}},{key:"renderBody",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.timestamps,r=e.showDragOverlay,i=e.featureOfflineMode,o=e.isOffline,s=this.state.errored;if(i&&o&&Object(sa.a)(a))return h.a.createElement("div",{className:"p-threads_flexpane"},h.a.createElement(du,null));if(s)return h.a.createElement("div",{className:"p-threads_flexpane"},h.a.createElement(aB,{tryAgain:this.tryAgain}));var l=h.a.createElement(p.Fragment,null,this.renderMessageList(),Object(sa.a)(a)&&h.a.createElement(VF,null),r&&h.a.createElement(DR,null));return Object(Me.a)()?h.a.createElement(BR,{location:xR.THREAD,channelId:t,threadTs:n,className:"p-threads_flexpane",viewContext:hu.y.THREADS_FLEXPANE,elementProps:{onKeyDown:this.onKeyDown}},l):h.a.createElement("div",{className:"p-threads_flexpane",onKeyDown:this.onKeyDown},l)}},{key:"renderSubtitle",value:function(){var e=this.props,t=e.channelId,n=e.threadTs;return h.a.createElement(JF,{channelId:t,threadTs:n})}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.threadTs;if(!t||!n)return null;var a=Object(Me.a)()?d.a:this.focus,r=Object(Me.a)()?d.a:this.blur;return h.a.createElement(qM.b,{ref:this.flexpane,focus:this.focus,title:iB.t("Thread"),renderSubtitle:this.renderSubtitle,renderBody:this.renderBody,flexName:"convo",viewId:hu.y.THREADS_FLEXPANE,kbNavOrder:Object(Me.a)()?void 0:4,bodyClassName:"p-threads_flexpane_container",onFocus:a,onBlur:r})}}]),t}(p.PureComponent);cB.displayName="ThreadsFlexpane",cB.defaultProps=lB;var uB=Object(kO.a)(cB,{getStateToSerialize:d.a,getDerivedProps:function(e){var t=e.instance;if(!t.listRef||!t.listRef.current)return{};var n=t.listRef.current.getScrollmark(),a=n.mark,r=n.offset,i=n.stickToBottom;return{scrollMarkTs:i?"input":a,scrollMarkOffset:i?0:r}}});var dB=Object(lM.a)(uB,{alwaysFetchOnMount:!0}),pB=Object(_.b)(function(e,t){var n=(Object(O.c)(e)[0]||"").split("-"),a=No()(n,2),r=a[0],i=a[1],o=t.threadTs||i,s=t.channelId||r,l=Object(re.d)(e,s);if(!o||!s)return{};var c=Object(Au.h)(e)||o,u=Object(Au.f)(e),d=u.highlightTs,p=u.highlightKey,h=Object(Ho.c)(s,o),m=Object(go.f)(e,h,c),b=m.start,f=m.end,_=m.timestamps,g=m.reachedStart,v=m.reachedEnd,j=m.prevReachedEnd,C=Object(cN.d)(e,{channelId:s,ts:o}),E=void 0,w=void 0,S=Object(vo.a)(e,s,o);if(S&&S.files&&1===S.files.length){w=S.files[0];var I=Object(tM.h)(e,w);I&&(E=I.comments)}var T={};Object(Me.a)()?T.userAttention=Object(De.c)(e):T.windowFocused=Object(sb.g)(e);var N=Object(ut.a)({state:e}),R=Object(ye.a)({state:e}),A=Object(gy.e)(e);return Z()({isFileExpanding:A,threadTs:o,channelId:s,channel:l,subscribed:C&&C.subscribed,lastRead:C&&C.lastRead,maxMarkableTs:dN(e,s,_),oldest:b,latest:f,timestamps:_,reachedStart:g,reachedEnd:v,prevReachedEnd:j,userHasUnreadThreads:Object(y.i)(e,"feature_incremental_unread_counts")?Object(zi.j)(e):Object(Vi.c)(e),fileId:w,comments:E,startTs:c,highlightTs:d,highlightKey:p,showDragOverlay:Object(Au.g)(e),useGlobalNav:Object(hb.b)(e),primaryView:Object(k.a)(e)},T,{featureReactThreads:Object(y.i)(e,"feature_react_threads"),featureAriaApplicationMode:Object(y.i)(e,"feature_aria_application_mode"),logInfo:N.info,logError:N.error,clogger:R,featureReactAllThreads:Object(y.i)(e,"feature_react_all_threads"),featureReactAllUnreads:Object(y.i)(e,"feature_react_all_unreads"),channelIsYou:Object(he.Qb)(e,l),channelIsMuted:Object(wn.c)(e,s),channelHasDraft:Object(he.y)(e,s),channelBadgeCount:Object(re.c)(e,l),focusRequested:Object(Au.e)(e),focusInput:Object(Au.d)(e),isChannelUnavailable:Object(he.Ib)(e,l),unavailableTeamId:Object(he.R)(e,l),readOnly:Object(he.Ab)(e,l),featureAnnounceOnly:Object(y.i)(e,"feature_announce_only"),featureOfflineMode:Object(y.i)(e,"feature_offline_mode"),isOffline:!Object(ee.c)(e)})},function(e){return{requestHistory:function(){return e(Au.j.apply(void 0,arguments))},clearHighlight:function(){return e(Au.a.apply(void 0,arguments))},markThread:function(){return e(cN.e.apply(void 0,arguments))},jumpToMessage:function(){return e(RF.a.apply(void 0,arguments))},setFocusRequestedTs:function(){return e(Ea.h.apply(void 0,arguments))},setFocusRequested:function(){return e(Au.l.apply(void 0,arguments))},setFocusInput:function(){return e(Au.k.apply(void 0,arguments))},makeMessageSummary:function(){return e(Bu.apply(void 0,arguments))},maybeFocusThreadInAllThreads:function(){return e(PF.apply(void 0,arguments))},maybeFocusThreadInAllUnreads:function(){return e(Ri.c.apply(void 0,arguments))},clearSerializedDataForKey:function(){return e(NF.b.apply(void 0,arguments))},truncateThreadHistory:function(){return e(Au.o.apply(void 0,arguments))}}})(dB),hB=n("tyNn"),mB=(n("5oz1"),function(){return h.a.createElement("div",{className:"p-flexpane__loader_item"},h.a.createElement(Yr.a,{noMargin:!0,size:"medium"}))});mB.displayName="FlexpaneLoaderItem";var bB=mB,fB=n("rUi3"),_B=n("Gq2+"),gB=36,vB=(m.b.string,m.b.object.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,{className:void 0});function yB(e){var t=e.className,n=e.message,a=e.renderAvatar,r=e.renderBody,i=e.renderHeader;return h.a.createElement(tp.a,{className:f()(t,"p-activity_flexpane__item")},h.a.createElement(lp.a,{msg:n},h.a.createElement(np.a,{jumpOrigin:"activity",msg:n,position:"inside",showComment:!1,showJump:!0,showMoreActions:!1,showReact:!1,showShare:!1,showStar:!1},h.a.createElement(ap.a,{className:"p-activity_flexpane__item_gutter",light:a({size:gB})},i(),h.a.createElement("br",null),r(),h.a.createElement(_B.a,{msg:n}),h.a.createElement(Ud.b,{msg:n}),h.a.createElement(Vd.a,{className:"p-activity_flexpane__item_reactions",msg:n}),h.a.createElement(fB.a,{flexOrigin:"activity",msg:n})))))}yB.displayName="ActivityItem",yB.defaultProps=vB;var kB=h.a.memo(yB),OB=(m.b.string,m.b.object.isRequired,m.b.bool,{className:void 0,featureConsolidateContentRendering:!1});function jB(e){var t=e.className,n=e.message,a=e.featureConsolidateContentRendering;return h.a.createElement(kB,{className:t,message:n,renderAvatar:function(e){var t=e.size;return h.a.createElement(qd.a,{msg:n,size:t})},renderBody:function(){return a?h.a.createElement(h.a.Fragment,null,h.a.createElement(Wd.a,{msg:n}),h.a.createElement(Kd.a,{msg:n,blockLimit:1,blocksContainerContext:Fd.a.activity})):Object(id.W)(n)?h.a.createElement(Kd.a,{msg:n,blockLimit:1,blocksContainerContext:Fd.a.activity}):h.a.createElement(Wd.a,{msg:n})},renderHeader:function(){return h.a.createElement(h.a.Fragment,null,h.a.createElement(Hd.a,{msg:n}),"\xa0\xa0",h.a.createElement(Gd.a,{msg:n,clickable:!0,full:!1,relative:!0}))}})}jB.displayName="ActivityMention",jB.defaultProps=OB;var CB=Object(_.b)(function(e,t){var n=t.channelId,a=t.messageTs;return{message:Object(vo.a)(e,n,a),featureConsolidateContentRendering:Object(y.i)(e,"feature_consolidate_content_rendering")}})(jB);CB.propTypes={channelId:m.b.string.isRequired,messageTs:m.b.string.isRequired};var EB=CB,wB=n("VlZM"),SB=new x.b("mentions");function IB(e,t){var n=Object(ny.a)(Object(v_.a)(e,"users"));return Object(Hu.a)(n,t)}m.b.string,m.b.string,m.b.bool,m.b.bool,m.b.object,m.b.arrayOf(m.b.object);var TB={className:void 0,currentUserId:void 0,featureSonicActivity:!1,featureConsolidateContentRendering:!1,message:void 0,reactions:void 0};function NB(e){var t=e.className,n=e.currentUserId,a=e.featureSonicActivity,r=e.message,i=e.reactions,o=e.featureConsolidateContentRendering,s=Object(p.useCallback)(function(e){var t=e.size,a=IB(i,n);return 1===a.length?h.a.createElement(Ye.b,{userId:a[0],size:t,showCard:!0}):h.a.createElement(wB.a,{primaryMemberId:a[0],secondaryMemberId:a[1]})},[n,i]),l=Object(p.useCallback)(function(){return o?h.a.createElement(h.a.Fragment,null,h.a.createElement(Wd.a,{msg:r,className:"sk_dark_grey",isSingleLine:!0}),h.a.createElement(Kd.a,{msg:r,blockLimit:1,blocksContainerContext:Fd.a.activity})):Object(id.W)(r)?h.a.createElement(Kd.a,{msg:r,blockLimit:1,blocksContainerContext:Fd.a.activity}):h.a.createElement(Wd.a,{className:"sk_dark_grey",isSingleLine:!0,msg:r})},[r,o]),c=Object(p.useCallback)(function(){if(!a)return!1;var e=IB(i,n);if(e.length<=2){var t=e.map(function(e){return h.a.createElement(uM.a,{className:"p-activity_flexpane__reaction_item_name",userId:e})});return SB.rt("{names} reacted to your message",{names:Object(x.h)(t,{react:!0})})}return SB.rt("<r1>Several people</r1> reacted to your message",null,function(e){var t=e.text;return h.a.createElement("span",{className:"black"},t)})},[n,a,i]);return!(!a||Object(sa.a)(i))&&h.a.createElement(kB,{className:t,message:r,renderAvatar:s,renderBody:l,renderHeader:c})}NB.displayName="ActivityReaction",NB.defaultProps=TB;var RB=Object(_.b)(function(e,t){var n=t.channelId,a=t.messageTs,r=Object(vo.a)(e,n,a),i=Object(uT.b)(r),o=Object(sT.f)(e,i);return{currentUserId:Object(y.b)(e),featureSonicActivity:Object(y.i)(e,"feature_sonic_activity"),message:r,reactions:o,featureConsolidateContentRendering:Object(y.i)(e,"feature_consolidate_content_rendering")}})(NB);RB.propTypes={channelId:m.b.string.isRequired,messageTs:m.b.string.isRequired};var AB=RB,PB=(m.b.func,m.b.bool,m.b.arrayOf(m.b.shape({channelId:m.b.string.isRequired,messageTs:m.b.string.isRequired,threadTs:m.b.string,ts:m.b.string.isRequired,type:m.b.string.isRequired})),m.b.func,{fetchActivity:d.a,isLoading:!1,items:[],onItemTabWithin:d.a}),MB=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(T.a)(n,["isFocusableItem","renderListItem","focus"]);var a=new rO.a({DEFAULT_HEIGHT:150});return n.layout=new rd.a({heightCache:a}),n.getItemKeys=Object(Fb.createSelector)(function(e){return e.items},function(e){return e.isLoading},function(e,t){var n=["top-anchor-hack"],a=e.map(function(e){return e.type+"-"+e.ts+"-"+e.messageTs});return n.push.apply(n,Le()(a)),t&&n.push("loader"),n}),n.list=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"isFocusableItem",value:function(e){var t=e.index,n=this.props,a=n.isLoading,r=n.items,i=this.getItemKeys({isLoading:a,items:r})[t];return i&&"top-anchor-hack"!==i&&"loader"!==i}},{key:"renderListItem",value:function(e){var t=this.props,n=t.isLoading,a=t.items,r=this.getItemKeys({isLoading:n,items:a});if("top-anchor-hack"===r[e])return h.a.createElement("div",{className:"p-activity_flexpane__top_anchor_hack_item"});if("loader"===r[e])return h.a.createElement(bB,null);var i=a[e-1];if(!i)return null;var o=i===a[a.length-1],s=f()({margin_bottom_0:o&&n});return"reaction"===i.type?h.a.createElement(AB,{key:i.ts,channelId:i.channelId,className:s,messageTs:i.messageTs}):h.a.createElement(EB,{key:i.ts,channelId:i.channelId,className:s,messageTs:i.messageTs})}},{key:"render",value:function(){var e=this,t=this.props,n=t.fetchActivity,a=t.isLoading,r=t.items,i=t.onItemTabWithin;return h.a.createElement(Nu.a,null,function(t){var o=t.width,s=t.height;return h.a.createElement(Xu.a,{ref:e.list,animateOnScroll:!1,height:s,isFocusableItem:e.isFocusableItem,keys:e.getItemKeys({isLoading:a,items:r}),layout:e.layout,loadPost:n,rowRenderer:e.renderListItem,width:o,onItemTabWithin:i})})}}]),t}(p.PureComponent);MB.displayName="ActivityList",MB.defaultProps=PB;var DB=MB,xB=new x.b("mentions"),LB=(m.b.bool,m.b.func,m.b.func,m.b.bool,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.arrayOf(m.b.object),{featureSonicActivity:!1,fetchActivityMentions:d.a,onGo:d.a,prefExcludeAtChannel:!1,prefExcludeReactions:!1,prefExcludeUserGroups:!1,removeActivityByType:d.a,setMultipleUserPrefsByApi:d.a,userGroups:void 0}),FB=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(T.a)(n,["handleSubmit","togglePref"]);var a=e.prefExcludeAtChannel,i=e.prefExcludeReactions,o=e.prefExcludeUserGroups;return n.state={nextPrefs:{prefExcludeAtChannel:a,prefExcludeReactions:i,prefExcludeUserGroups:o}},n}return u()(t,e),o()(t,[{key:"togglePref",value:function(e){var t=e.target.name,n=e.target.checked;this.setState(function(e){var a=e.nextPrefs;return{nextPrefs:Z()({},a,xl()({},t,!n))}})}},{key:"handleSubmit",value:function(){var e=this.props,t=e.onGo,n=e.prefExcludeAtChannel,a=e.prefExcludeReactions,r=e.prefExcludeUserGroups,i=this.state.nextPrefs;i.prefExcludeAtChannel===n&&i.prefExcludeReactions===a&&i.prefExcludeUserGroups===r||(!n&&i.prefExcludeAtChannel&&this.props.removeActivityByType("channel"),!a&&i.prefExcludeReactions&&this.props.removeActivityByType("reaction"),!r&&i.prefExcludeUserGroups&&this.props.removeActivityByType("user_group"),this.props.setMultipleUserPrefsByApi({mentions_exclude_at_channels:i.prefExcludeAtChannel,mentions_exclude_reactions:i.prefExcludeReactions,mentions_exclude_at_user_groups:i.prefExcludeUserGroups}),this.props.fetchActivityMentions({includeAtChannel:!i.prefExcludeAtChannel,includeReactions:!i.prefExcludeReactions,includeUserGroups:!i.prefExcludeUserGroups,limit:20}),t())}},{key:"renderUserGroupList",value:function(){var e=this.props,t=e.featureSonicActivity,n=e.userGroups;if(!t)return null;var a=n.filter(function(e){return Object(aE.u)(e)&&Object(aE.m)(e)});if(Object(sa.a)(a))return xB.t("User Groups are collections of individual members");var r=a.slice(0,3).map(function(e){return h.a.createElement("strong",null,Object(aE.f)(e))});return a.length<=3?xB.rt("You\u2019re a member of {groups}",{groups:Object(x.h)(r,{react:!0})}):xB.rt("You\u2019re a member of {group1}, {group2}, {group3}, and {numOthers, plural, =1 {# other} other {# others}}",{group1:r[0],group2:r[1],group3:r[2],numOthers:a.length-3})}},{key:"render",value:function(){var e=this.props.featureSonicActivity,t=this.state.nextPrefs;if(!e)return null;var n=t.prefExcludeAtChannel,a=t.prefExcludeReactions,r=t.prefExcludeUserGroups;return h.a.createElement(lr.a,{goButtonText:xB.t("Save"),onGo:this.handleSubmit,title:xB.t("Activity view options")},h.a.createElement("p",null,xB.rt("Your activity view will always include <r1>mentions</r1> and <r1>keywords</r1>. You can also choose to show or hide the following:",null,function(e){var t=e.text;return h.a.createElement("strong",null,t)})),h.a.createElement($l.a,{type:"inline",cursor:"pointer",text:xB.t("@channel mentions")},h.a.createElement(Xl.a,{onChange:this.togglePref,checked:!n,name:"prefExcludeAtChannel"})),h.a.createElement($l.a,{type:"inline",cursor:"pointer",text:xB.t("Reactions")},h.a.createElement(Xl.a,{onChange:this.togglePref,checked:!a,name:"prefExcludeReactions"})),h.a.createElement($l.a,{type:"inline",cursor:"pointer",text:xB.t("User Groups"),className:"margin_bottom_0",subtext:this.renderUserGroupList()},h.a.createElement(Xl.a,{onChange:this.togglePref,checked:!r,name:"prefExcludeUserGroups"})))}}]),t}(h.a.Component);FB.displayName="ActivityOptionsDialog",FB.defaultProps=LB;var BB={fetchActivityMentions:function(){return hB.c.apply(void 0,arguments)},removeActivityByType:function(){return hB.h.apply(void 0,arguments)},setMultipleUserPrefsByApi:function(){return D.e.apply(void 0,arguments)}},qB=Object(_.b)(function(e){return{prefExcludeAtChannel:Object(ue.h)(e,"mentions_exclude_at_channels"),prefExcludeReactions:Object(ue.h)(e,"mentions_exclude_reactions"),prefExcludeUserGroups:Object(ue.h)(e,"mentions_exclude_at_user_groups"),featureSonicActivity:Object(y.i)(e,"feature_sonic_activity"),userGroups:Object(tE.b)(e)}},BB)(FB),UB=(n("YjF7"),new x.b("mentions")),HB=(m.b.arrayOf(m.b.shape({channelId:m.b.string.isRequired,messageTs:m.b.string.isRequired,threadTs:m.b.string,ts:m.b.string.isRequired,type:m.b.string.isRequired})),m.b.func,m.b.bool,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.bool,m.b.bool,m.b.bool,{activityList:[],enqueueToast:d.a,featureSonicActivity:!1,hasMore:!1,isLoading:!1,fetchActivityMentions:d.a,openModal:d.a,prefExcludeAtChannel:!1,prefExcludeReactions:!1,prefExcludeUserGroups:!1}),GB=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["fetchMentions","fetchMoreMentions","openOptionsDialog","renderEmpty","focus","onItemTabWithin"]),n.list=h.a.createRef(),n.flexpane=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.fetchMentions()}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"fetchMentions",value:function(e){var t=this.props,n=t.prefExcludeAtChannel,a=t.prefExcludeReactions,r=t.prefExcludeUserGroups;this.props.fetchActivityMentions(Z()({includeAtChannel:!n,includeReactions:!a,includeUserGroups:!r,limit:20},e))}},{key:"fetchMoreMentions",value:function(){var e=this.props,t=e.activityList,n=e.hasMore;if(!e.isLoading&&n){var a=t[t.length-1].ts;this.fetchMentions({afterTs:a})}}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"openOptionsDialog",value:function(){var e=this;this.props.featureSonicActivity&&this.props.openModal({element:h.a.createElement(qB,{onGo:function(){return e.props.enqueueToast({element:h.a.createElement(pt.b,Z()({},qM.a,{position:"top-right",invert:!0}),UB.t("Activity view updated"))})}})})}},{key:"renderEmpty",value:function(e){var t=e.isOffline;return this.props.featureSonicActivity?t?h.a.createElement(gD.a,{title:UB.t("Couldn\u2019t load your recent activity"),description:UB.t("Try again when you\u2019re online"),primaryActionText:UB.t("Retry"),onClickPrimaryAction:this.fetchMentions}):h.a.createElement(gD.a,{imageUrl:cdn_url+"/c61f3/img/accent-bird.png",imageUrl2x:cdn_url+"/c61f3/img/accent-bird@2x.png",title:UB.t("Never miss a beat"),description:UB.t("When a team member mentions you or adds a reaction to your message, that message will appear here."),secondaryActionText:UB.t("View options"),onClickSecondaryAction:this.openOptionsDialog}):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.activityList,a=t.isLoading;return t.featureSonicActivity?h.a.createElement(qM.b,{ref:this.flexpane,focus:this.focus,className:"p-activity_flexpane",isEmpty:Object(sa.a)(n),isLoading:a,onOptionsClick:this.openOptionsDialog,renderBody:function(){return h.a.createElement(DB,{ref:e.list,fetchActivity:e.fetchMoreMentions,isLoading:a,items:n,onItemTabWithin:e.onItemTabWithin})},renderEmpty:this.renderEmpty,title:UB.t("Activity"),viewId:hu.y.ACTIVITY_FLEXPANE,kbNavOrder:Object(Me.a)()?void 0:4.1}):null}}]),t}(h.a.Component);GB.displayName="ActivityFlexpane",GB.defaultProps=HB;var WB={enqueueToast:function(){return dt.c.apply(void 0,arguments)},fetchActivityMentions:function(){return hB.c.apply(void 0,arguments)},openModal:function(){return st.e.apply(void 0,arguments)}},KB=Object(_.b)(function(e){return{activityList:Object(hB.d)(e),hasMore:Object(hB.e)(e),isLoading:Object(hB.f)(e),prefExcludeAtChannel:Object(ue.h)(e,"mentions_exclude_at_channels"),prefExcludeReactions:Object(ue.h)(e,"mentions_exclude_reactions"),prefExcludeUserGroups:Object(ue.h)(e,"mentions_exclude_at_user_groups"),featureSonicActivity:Object(y.i)(e,"feature_sonic_activity")}},WB)(GB),VB=new x.b("whats_new"),zB=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n}return u()(t,e),o()(t,[{key:"onChange",value:function(e){var t=this.props,n=t.clogger,a=t.latestNewsTimestamp,r=t.setUserPrefByApi;!!e.target.checked?(n.track(ve.k.WHATSNEW_ACTION,{action:"opt_in",trigger:"checkbox_whats_new",step:String(a)}),r({pref:"whats_new_read",value:a||Math.floor(Date.now()/1e3)})):(n.track(ve.k.WHATSNEW_ACTION,{action:"opt_out",trigger:"checkbox_whats_new",step:String(a)}),r({pref:"whats_new_read",value:-1}))}},{key:"render",value:function(){var e=-1!==this.props.whatsNewRead;return h.a.createElement($l.a,{text:VB.t("Notify me about updates"),type:"inline",cursor:"pointer"},h.a.createElement(Xl.a,{checked:e,onChange:this.onChange}))}}]),t}(p.PureComponent);zB.displayName="NotifyCheckbox",zB.defaultProps={latestNewsTimestamp:null};var YB={setUserPrefByApi:function(){return D.f.apply(void 0,arguments)}},QB=Object(_.b)(function(e){return{clogger:Object(ye.a)(e),latestNewsTimestamp:Object(qh.d)(e),whatsNewRead:Object(ue.h)(e,"whats_new_read")}},YB)(zB),JB=n("oUPN"),XB=(m.b.number,m.b.string,m.b.string,m.b.string,m.b.bool,m.b.bool,m.b.string,m.b.bool,m.b.bool,m.b.number,m.b.object,{timestamp:void 0,url:"",titleUrl:"",title:"",isTitleHtml:!1,isDescriptionHtml:!1,description:"",isLast:!1,isNew:!1,latestNewsTimestamp:void 0,clogger:void 0}),ZB=function(e){var t=e.url,n=e.isTitleHtml,a=e.title,r=e.onClick,i=n?h.a.createElement("span",{dangerouslySetInnerHTML:{__html:a}}):a;return h.a.createElement(a_.a,{href:t,target:"new",onClick:r,"data-qa":"whats_new_title_link"},i)};ZB.displayName="mkLinkedTitle";var $B=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["handleDescriptionLinkClick","handleTitleClick","handleMoreLinkClick"]),n}return u()(t,e),o()(t,[{key:"clogAction",value:function(e,t){var n=e.target;if(n&&n.href){var a=this.props,r=a.clogger,i=a.latestNewsTimestamp;r.track(ve.k.WHATSNEW_ACTION,{action:"view_update",trigger:t,page_url:n.href,step:String(i)})}}},{key:"handleDescriptionLinkClick",value:function(e){this.clogAction(e,"description_link")}},{key:"handleTitleClick",value:function(e){this.clogAction(e,"heading_link")}},{key:"handleMoreLinkClick",value:function(e){this.clogAction(e,"read_more_link")}},{key:"render",value:function(){var e=this.props,t=e.timestamp,n=e.url,a=e.title,r=e.titleUrl,i=e.isDescriptionHtml,o=e.isTitleHtml,s=e.description,l=e.isLast,c=e.isNew,u=Object(Zt.d)(t,"{date}"),d=n?ZB({url:n,isTitleHtml:o,title:a,onClick:this.handleTitleClick}):a,p=i?h.a.createElement("div",{role:"presentation",dangerouslySetInnerHTML:{__html:s},onClick:this.handleDescriptionLinkClick}):s,m=f()("p-whats_new__item",{"p-whats_new__item_last":l});return h.a.createElement("div",{className:m,"data-qa":"whats_new_item_"+t},h.a.createElement("h5",{className:"p-whats_new__date"},u),h.a.createElement("h3",{className:"p-whats_new__title"},c&&h.a.createElement(se.b,{type:"presence-online",size:"inherit",className:"p-whats_new__blue_dot"}),d),p,n&&r&&h.a.createElement(a_.a,{className:"p-whats_new__link",href:n,onClick:this.handleMoreLinkClick,target:"new","data-qa":"whats_new_more_link"},r,h.a.createElement(se.b,{type:"chevron-medium-right",className:"align_bottom",size:"inherit"})))}}]),t}(p.PureComponent);$B.displayName="Update",$B.defaultProps=XB,$B.displayName="Update";var eq=Object(_.b)(function(e){return{clogger:Object(ye.a)({state:e}),latestNewsTimestamp:Object(qh.d)(e)}})($B),tq=new x.b("whats_new"),nq=(m.b.arrayOf(Pu.a.WhatsNewUpdate.isRequired),m.b.func,m.b.number,{items:[],onItemTabWithin:d.a,whatsNewRead:-1}),aq=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["renderItem","focus"]),n.list=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"getItemKeys",value:function(){return this.props.items.map(function(e,t){return"update-"+t})}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"renderItem",value:function(e){var t=this.props,n=t.items,a=t.whatsNewRead,r=n[e],i=e===n.length-1,o=-1!==a&&a<r.timestamp;return h.a.createElement(eq,{isLast:i,timestamp:r.timestamp,url:r.url,titleUrl:r.url_title,title:r.title,isTitleHtml:r.html_title,isDescriptionHtml:r.html,description:r.description,isNew:o})}},{key:"render",value:function(){var e=this,t=this.getItemKeys(),n=tq.t("What\u2019s New");return h.a.createElement(Nu.a,null,function(a){var r=a.width,i=a.height;return h.a.createElement(JB.a,{ref:e.list,width:r,height:i,keys:t,rowRenderer:e.renderItem,animateOnScroll:!1,ariaLabel:n,onItemTabWithin:e.props.onItemTabWithin})})}}]),t}(p.PureComponent);aq.displayName="UpdatesList",aq.defaultProps=nq;var rq=aq,iq=(n("BfV3"),new x.b("whats_new")),oq=(m.b.bool,m.b.arrayOf(Pu.a.WhatsNewUpdate.isRequired),m.b.func,m.b.number.isRequired,{isLoading:!1,updates:[],setUserPrefByApi:d.a}),sq=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["renderBody","renderControls","focus","onItemTabWithin"]),n.list=h.a.createRef(),n.flexpane=h.a.createRef(),n.initialWhatsNewRead=e.whatsNewRead,n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.maybeUpdateWhatsReadPref()}},{key:"componentDidUpdate",value:function(){this.maybeUpdateWhatsReadPref()}},{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer),this.timer=null}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"maybeUpdateWhatsReadPref",value:function(){var e=this,t=this.props.updates;if(-1!==this.props.whatsNewRead&&!Object(sa.a)(t)){var n=t[0].timestamp;this.props.whatsNewRead>=n||(this.timer&&clearTimeout(this.timer),this.timer=null,this.timer=setTimeout(function(){e.props.setUserPrefByApi({pref:"whats_new_read",value:n})},1e3))}}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"renderBody",value:function(){var e=this.props.updates;return h.a.createElement(rq,{ref:this.list,items:e,whatsNewRead:this.initialWhatsNewRead,onItemTabWithin:this.onItemTabWithin})}},{key:"renderControls",value:function(){return h.a.createElement(QB,null)}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.updates,a=iq.t("What\u2019s New");return h.a.createElement(qM.b,{ref:this.flexpane,focus:this.focus,isEmpty:Object(sa.a)(n),isLoading:t,renderBody:this.renderBody,renderControls:this.renderControls,title:a,viewId:hu.y.WHATS_NEW,kbNavOrder:Object(Me.a)()?void 0:4.4})}}]),t}(p.PureComponent);sq.displayName="WhatsNew",sq.defaultProps=oq;var lq={setUserPrefByApi:function(){return D.f.apply(void 0,arguments)}},cq=Object(_.b)(function(e){return{updates:Object(qh.f)(e),isLoading:Object(qh.c)(e),whatsNewRead:Object(ue.h)(e,"whats_new_read")}},lq)(sq),uq=n("+Gfg"),dq=n("bsix"),pq=new x.b("files"),hq=Object(ot.b)("build file summary for aria labels",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.fileId,r=n.hasFocus,i=t();if(Object(y.i)(i,"feature_modern_starred_items")&&(Object(Lu.b)(i)||r)){var o=Object(tM.h)(i,a);if(o){var s=o.created,l=o.timestamp,c=o.user,u=s||l,d=Object(rM.C)(o)?Object(dq.a)(o):Object(rM.q)(o),p=Object(rM.k)(o),h=Object(ne.Q)(i,c),m=Object(Zt.k)(u,{shortenMonth:!1,excludeYear:Object(Zt.i)(u)}),b=Object(ue.h)(i,"time24"),f=Object(Zt.p)(u,{do24hrTime:b});return pq.t("{fileType} file {fileName} uploaded by {userName} on {dateStr} at {timeStr}",{fileType:d,fileName:p,userName:h,dateStr:m,timeStr:f})}}});hq.propTypes={fileId:m.b.string.isRequired,hasFocus:m.b.bool};var mq=hq,bq=n("BRQ/"),fq=n("0gqo"),_q=(m.b.object.isRequired,m.b.bool,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.hasReactionOrReplies,n=e.msg;return t?h.a.createElement("div",{className:"p-starred_item_message__reactions_and_replies","data-qa":"starred-item-reaction-reply-bar"},h.a.createElement(bq.a,{msg:n}),h.a.createElement(fq.a,{msg:n,flexOrigin:"starred_items"})):null}}]),t}(h.a.PureComponent));_q.displayName="StarredItemReactionReplyBar",_q.defaultProps={hasReactionOrReplies:!1};var gq=Object(_.b)(function(e,t){var n=t.msg,a=Object(uT.b)(n),r=Object(sT.f)(e,a);return{hasReactionOrReplies:!!(Object(id.S)(n)>0||r&&r.length)}})(_q),vq=(n("2FVR"),m.b.object.isRequired,m.b.string,m.b.string,m.b.bool,{className:void 0,"data-qa":void 0,featureConsolidateContentRendering:!1}),yq=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderContent",value:function(e){var t=Fd.a.starred_message;return e.blocks?h.a.createElement(Kd.a,{msg:e,blocksContainerContext:t}):h.a.createElement(Wd.a,{msg:e})}},{key:"render",value:function(){var e=this.props,t=e.msg,n=e["data-qa"],a=e.featureConsolidateContentRendering,r=f()("p-starred_item__message",this.props.className);return h.a.createElement(tp.a,{className:r,"data-qa":n},h.a.createElement(np.a,{msg:t,position:"inside",className:"p-starred_item__message_actions",showComment:!1,showShare:!1,showReact:!1,showJump:!0,showMoreActions:!1,jumpOrigin:"starred_items"},h.a.createElement(lp.a,{msg:t},h.a.createElement(ap.a,{light:h.a.createElement(qd.a,{msg:t,size:36})},h.a.createElement(Hd.a,{msg:t}),"\xa0\xa0",h.a.createElement(Gd.a,{msg:t,full:!0}),h.a.createElement("br",null),a?h.a.createElement(h.a.Fragment,null,h.a.createElement(Wd.a,{msg:t}),h.a.createElement(Kd.a,{msg:t,blocksContainerContext:Fd.a.starred_message})):this.renderContent(t),h.a.createElement(_B.a,{msg:t}),h.a.createElement(Ud.b,{msg:t}),h.a.createElement(Bd.a,{msg:t}),h.a.createElement(fB.a,{flexOrigin:"starred_items",msg:t}),h.a.createElement(gq,{msg:t})))))}}]),t}(p.PureComponent);yq.displayName="StarredItemMessage",yq.defaultProps=vq;var kq=yq,Oq=(m.b.object.isRequired,m.b.string.isRequired,m.b.string,m.b.bool,m.b.func,m.b.string,{className:void 0,useRowAction:!0,previewFile:d.a,"data-qa":void 0}),jq=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFileClick=n.onFileClick.bind(n),n}return u()(t,e),o()(t,[{key:"onFileClick",value:function(e,t){if(t){this.props.previewFile({fileId:t.id,flexOrigin:"starred_items"})}}},{key:"render",value:function(){var e=f()("p-starred_item__message",this.props.className),t=this.props["data-qa"];return this.props.file?h.a.createElement(eD.a,{file:this.props.file,className:e,key:this.props.id,useRowAction:this.props.useRowAction,includeRootDownloadAction:!1,includeRootStarAction:!0,fullWidth:!0,onClick:this.onFileClick,"data-qa":t}):null}}]),t}(p.PureComponent);jq.displayName="StarredItemFile",jq.defaultProps=Oq;var Cq=Object(_.b)(function(e,t){var n=t.id;return{file:Object(tM.h)(e,n)}},{previewFile:Ke.c})(jq),Eq=(m.b.object,m.b.string,m.b.string,m.b.string,{comment:void 0,fileId:void 0,className:void 0,"data-qa":void 0}),wq=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.comment,n=e.fileId,a=e.className,r=e["data-qa"];if(!t)return null;var i={user:t.user,ts:t.timestamp.toString(),subtype:"file_comment",comment:t,files:[n]};return h.a.createElement(kq,{msg:i,className:a,"data-qa":r})}}]),t}(p.PureComponent);wq.displayName="StarredItemFileComment",wq.defaultProps=Eq;var Sq=Object(_.b)(function(e,t){var n=t.fileId,a=t.commentId;return{comment:Object(tM.i)(e,n,a)}})(wq),Iq=new x.b("starred_items"),Tq=ld(kq),Nq=(m.b.func,m.b.bool,m.b.arrayOf(m.b.object.isRequired),m.b.func.isRequired,m.b.func.isRequired,m.b.bool.isRequired,m.b.func,{fetchMoreItems:d.a,isLoading:!1,items:void 0,onItemTabWithin:d.a}),Rq="message",Aq="file",Pq="file_comment",Mq=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["renderItem","isFocusableItem","getAriaLabelForRow","onFocusEnter","onFocusLeave"]),n.getItemKeys=Object(Fb.createSelector)(function(e){return e.items},function(e){return e.isLoading},function(e,t){var a=["top-anchor-hack"],r=e.map(function(e){return n.getStarredItemId(e)});return a.push.apply(a,Le()(r)),t&&a.push("loader"),a}),n.list=h.a.createRef(),n.state={hasKeyboardFocus:!1},n}return u()(t,e),o()(t,[{key:"onFocusEnter",value:function(e){this.setState(function(){return{hasKeyboardFocus:e.isKeyboardFocus}})}},{key:"onFocusLeave",value:function(){this.setState(function(){return{hasKeyboardFocus:!1}})}},{key:"getStarredItemId",value:function(e){switch(e.type){case Rq:return e.channel+e.ts;case Aq:case Pq:return e.id;default:return null}}},{key:"getAriaLabelForRow",value:function(e){var t=this.props.items,n=this.state.hasKeyboardFocus,a=t[e-1];return a&&a.type?a.type===Rq?this.props.makeMessageSummary({channelId:a.channel,ts:a.ts,hasFocus:n,day:{ts:a.ts,isFirstDay:!1,isLastDay:!1}}):this.props.makeFileSummary({fileId:a.id,hasFocus:n}):null}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"isFocusableItem",value:function(e){var t=e.index,n=this.props,a=n.isLoading,r=n.items,i=this.getItemKeys({isLoading:a,items:r})[t];return!!i&&("top-anchor-hack"!==i&&"loader"!==i)}},{key:"renderItem",value:function(e){var t=this.props,n=t.isLoading,a=t.items,r=this.getItemKeys({isLoading:n,items:a});if("top-anchor-hack"===r[e])return h.a.createElement("div",{className:"p-starred_item__top_anchor_item_hack"});if("loader"===r[e])return h.a.createElement(bB,null);var i=a[e-1],o={key:this.getStarredItemId(i),className:f()("p-starred_item",{"p-starred_item--first":i===a[0]}),"data-qa":"starred_item_"+i.type};switch(i.type){case Rq:return h.a.createElement(Tq,Z()({},o,{channelId:i.channel,ts:i.ts}));case Aq:return h.a.createElement(Cq,Z()({},o,{id:i.id}));case Pq:return h.a.createElement(Sq,Z()({},o,{fileId:i.fileId,commentId:i.id}));default:return null}}},{key:"render",value:function(){var e=this,t=this.props,n=t.isLoading,a=t.items,r=t.onItemTabWithin;return h.a.createElement(Nu.a,null,function(t){var i=t.width,o=t.height;return h.a.createElement(Xu.a,{ref:e.list,width:i,height:o,keys:e.getItemKeys({isLoading:n,items:a}),rowRenderer:e.renderItem,loadPost:e.props.fetchMoreItems,animateOnScroll:!1,ariaLabel:Iq.t("Starred Items"),getAriaLabelForRow:e.getAriaLabelForRow,isFocusableItem:e.isFocusableItem,onFocusEnter:e.onFocusEnter,onFocusLeave:e.onFocusLeave,onItemTabWithin:r})})}}]),t}(p.PureComponent);Mq.displayName="StarredItemsList",Mq.defaultProps=Nq;var Dq=Object(_.b)(function(e){return{featureModernStarredItems:Object(y.i)(e,"feature_modern_starred_items")}},function(e){return{makeMessageSummary:function(){return e(Bu.apply(void 0,arguments))},makeFileSummary:function(){return e(mq.apply(void 0,arguments))}}})(function(e){var t=e.forwardedRef,n=Be()(e,["forwardedRef"]);return h.a.createElement(Mq,Z()({ref:t},n))}),xq=h.a.forwardRef(function(e,t){return h.a.createElement(Dq,Z()({forwardedRef:t},e))}),Lq=new x.b("starred_items"),Fq=(m.b.number.isRequired,m.b.func,m.b.bool,m.b.arrayOf(m.b.object.isRequired),m.b.number.isRequired,m.b.string,m.b.bool.isRequired,m.b.bool.isRequired,{fetchStarsList:d.a,isLoading:!1,starredItems:void 0,cursorMark:void 0}),Bq=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["fetchMoreStarredItems","fetchStarredItems","renderEmpty","focus","onItemTabWithin"]),n.list=h.a.createRef(),n.flexpane=h.a.createRef(),n.requestStars=null,n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.starredItems,a=t.cursorMark;t.featureStarredItemsCursorPagination&&!Object(sa.a)(e.starredItems)&&Object(sa.a)(n)&&a&&this.fetchStarredItemsCursor(a)}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"fetchStarredItems",value:function(e){e&&e>this.props.totalPages||this.props.fetchStarsList({exclude:"Ch,Gh,Dh",count:20,page:e})}},{key:"fetchStarredItemsCursor",value:function(e){var t=this;return!this.requestStars&&(this.requestStars=this.props.fetchStarsList({exclude:"Ch,Gh,Dh",limit:20,cursor:e}),this.requestStars.finally(function(){t.requestStars=null}))}},{key:"fetchMoreStarredItems",value:function(){var e=this.props,t=e.isLoading,n=e.currentPage,a=e.cursorMark,r=e.featureStarredItemsCursorPagination;if(!t)if(r){if(!a)return;this.fetchStarredItemsCursor(a)}else this.fetchStarredItems(n+1)}},{key:"renderEmpty",value:function(e){var t=e.isOffline;return this.props.featureModernStarredItems?t?h.a.createElement(gD.a,{title:Lq.t("Couldn\u2019t load your Starred Items"),description:Lq.t("Try again when you\u2019re online"),primaryActionText:Lq.t("Retry"),onClickPrimaryAction:this.fetchStarredItems}):h.a.createElement(gD.a,{imageUrl:cdn_url+"/b83595/img/posts.png",imageUrl2x:cdn_url+"/b83595/img/posts@2x.png",title:Lq.t("No starred items",{fallbackHash:"d46c3b7fbafdaa0aee845d35ce59b0d5f6de8b70"}),description:Lq.t("Star a message or file to save it here. Mark your to-dos, or save something for later \u2014 only you can see your starred items, so use them however you like!",{fallbackHash:"02f88652fff0da938a523c5543e133eefa38b085"})}):null}},{key:"render",value:function(){var e=this;return this.props.featureModernStarredItems?h.a.createElement(qM.b,{ref:this.flexpane,focus:this.focus,className:"p-starred_items_flexpane",isEmpty:Object(sa.a)(this.props.starredItems),isLoading:this.props.isLoading,renderBody:function(){return h.a.createElement(xq,{ref:e.list,fetchMoreItems:e.fetchMoreStarredItems,isLoading:e.props.isLoading,items:e.props.starredItems,onItemTabWithin:e.onItemTabWithin})},renderEmpty:this.renderEmpty,title:Lq.t("Starred Items"),viewId:hu.y.STARS_FLEXPANE,kbNavOrder:Object(Me.a)()?void 0:4.3}):null}}]),t}(p.PureComponent);Bq.displayName="StarredItemsFlexpane",Bq.defaultProps=Fq;var qq={fetchStarsList:function(){return uq.c.apply(void 0,arguments)}},Uq=Object(_.b)(function(e){return{currentPage:Object(uq.e)(e),featureModernStarredItems:Object(y.i)(e,"feature_modern_starred_items"),featureStarredItemsCursorPagination:Object(y.i)(e,"feature_starred_items_cursor_pagination"),isLoading:Object(uq.g)(e),starredItems:Object(uq.d)(e),totalPages:Object(uq.h)(e),cursorMark:Object(uq.f)(e)}},qq)(Bq),Hq=n("0agN"),Gq=(n("WJwm"),m.b.bool.isRequired,m.b.string,m.b.func,m.b.func,m.b.node,m.b.node,m.b.string,m.b.string,m.b.bool,{sectionId:"",expand:d.a,collapse:d.a,header:null,children:null,sectionClasses:"",key:null,featureM11nChannelDetails:!1}),Wq=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onClick","focus","onAnimationTick","onAnimationEnd"]),n.headerButtonRef=h.a.createRef(),n.contentRef=h.a.createRef(),n.state={contentHeight:e.isExpanded?"auto":0,isAnimating:!1,isExpanding:!1},n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){var t=e.isExpanded,n=this.props.isExpanded,a=!t&&n;(a||t&&!n)&&this.startAnimation(a)}},{key:"componentWillUnmount",value:function(){this.animation&&this.animation.cancel()}},{key:"onClick",value:function(){var e=this.props,t=e.collapse,n=e.expand;return e.isExpanded?t():n()}},{key:"onAnimationTick",value:function(e){var t=e.value,n=e.nextTick;this.contentRef.current&&this.setState(function(){return{contentHeight:t}},n)}},{key:"onAnimationEnd",value:function(){this.animation=null,this.setState(function(e){return{isExpanding:!1,contentHeight:e.isExpanding?"auto":0,isAnimating:!1}})}},{key:"focus",value:function(){var e=this.headerButtonRef.current;e&&e.focus()}},{key:"startAnimation",value:function(e){var t=this;this.setState(function(){return{isExpanding:e,isAnimating:!0}},function(){if(t.contentRef.current){t.animation&&t.animation.cancel();var n=t.contentRef.current.scrollHeight,a=e?0:n,r=e?n:0;t.animation=Object($f.a)({fromValue:a,toValue:r,duration:160,easing:"easeInOutQuad",onTick:t.onAnimationTick,onComplete:t.onAnimationEnd})}else Object(ut.b)().warn("The element to animate was not rendered. Ensure that `this.state.isAnimating` is set to true")})}},{key:"render",value:function(){var e=this.props,t=e.isExpanded,n=e.header,a=e.children,r=e.sectionClasses,i=e.key;if(!e.featureM11nChannelDetails)return null;var o=f()("p-channel_details_section",r),s=this.state,l=s.contentHeight,c=s.isAnimating,u=0!==l||c,d=f()("p-channel_details_section__content",{"p-channel_details_section__content--active":u&&!c}),p=t?"caret-down":"caret-right";return h.a.createElement("div",{className:o,key:i},h.a.createElement(oe.a,{className:"p-channel_details_section__header",onClick:this.onClick,"aria-expanded":t,ref:this.headerButtonRef},n,h.a.createElement(se.b,{type:p,inline:!0,className:"p-channel_details_section__caret_icon"})),u&&h.a.createElement("div",{"data-qa":"section_container_content",className:d,ref:this.contentRef,style:{height:l}},a))}}]),t}(p.PureComponent);Wq.displayName="SectionContainer";Wq.defaultProps=Gq;var Kq=Object(_.b)(function(e,t){var n=Object(O.c)(e)[0];return{featureM11nChannelDetails:Object(y.i)(e,"feature_m11n_channel_details"),isExpanded:n===t.sectionId}},null,null,{withRef:!0})(Wq),Vq=(n("N5rH"),m.b.string,m.b.node.isRequired,m.b.bool,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"maybeRenderIcon",value:function(){var e=this.props.iconType;return e?h.a.createElement(se.b,{type:e,inline:!0,className:"p-channel_details_section__icon"}):null}},{key:"render",value:function(){var e=this.props,t=e.sectionTitle;return e.featureM11nChannelDetails?h.a.createElement("span",{className:"p-channel_details_section__title"},this.maybeRenderIcon(),h.a.createElement("span",{className:"p-channel_details_section__title-content"},t)):null}}]),t}(p.PureComponent));Vq.displayName="SectionHeader";Vq.defaultProps={iconType:null,featureM11nChannelDetails:!1};var zq=Object(_.b)(function(e){return{featureM11nChannelDetails:Object(y.i)(e,"feature_m11n_channel_details")}})(Vq),Yq=n("hQtm"),Qq=n("MYD1"),Jq=(n("zBLs"),new x.b("channel_details")),Xq=(m.b.object.isRequired,m.b.string.isRequired,m.b.func.isRequired,function(e){var t=e.pin,n=e.channelId,a=e.openModal,r=Object(p.useCallback)(function(){a({element:h.a.createElement(Qq.a,{pin:t,channelId:n})})},[t,n,a]);if(!Object(zw.a)().featureM11nChannelDetails)return null;var i=Jq.t("Un-pin this item");return h.a.createElement(Wn.c,{tip:i,delay:Wn.a,position:"bottom-right"},h.a.createElement(oe.a,{className:"p-pinned_items__remove_item",onClick:r,"aria-label":i},h.a.createElement(se.b,{type:"times-small"})))});Xq.displayName="PinnedItemRemove";var Zq={openModal:function(){return st.e.apply(void 0,arguments)}},$q=Object(_.b)(null,Zq)(Xq),eU=(n("W3Yc"),new x.b("channel_details")),tU=(m.b.string.isRequired,m.b.array.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.func.isRequired,m.b.func.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){this.props.channelId!==e.channelId&&this.props.maybeFetchPins(),this.props.isMember&&!e.isMember&&this.props.fetchPins()}},{key:"render",value:function(){var e=this.props.pinnedItemsToRender,t=this.props.channelId;if(!Object(yI.a)(e)||e.length<1){var n=null;return this.props.featureM11nChannelDetails&&(n=this.props.isImOrMpim?eU.rt("No items have been pinned yet! Open the context menu on important messages or files and choose <span>Pin to this conversation</span> to stick them here.",{},function(e){var t=e.text,n=e.key;return h.a.createElement("span",{key:n,className:"p-pinned_items__empty_list_action"},t)}):eU.rt("No items have been pinned yet! Open the context menu on important messages or files and choose <span>Pin to {channelName}</span> to stick them here.",{channelName:h.a.createElement(pe.a,{channelId:t,inline:!0})},function(e){var t=e.text,n=e.key;return h.a.createElement("span",{key:n,className:"p-pinned_items__empty_list_action"},t)})),h.a.createElement("p",{className:"p-pinned_items__empty_list"},n)}return h.a.createElement("ul",{className:"p-pinned_items no_bullets"},e.map(function(e){return h.a.createElement("li",{key:e.ts||e.id,className:"p-pinned_items__item"},h.a.createElement(Yq.a,{pin:e}),h.a.createElement($q,{pin:e,channelId:t}))}))}}]),t}(p.Component));tU.displayName="PinnedItemsList";var nU=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n),r=Object(ly.h)(e,n)||[],i=Object(y.i)(e,"feature_m11n_channel_details");return{pinnedItemsToRender:r,isImOrMpim:Object(he.eb)(a)||Object(he.lb)(a),isMember:Object(he.kb)(a),featureM11nChannelDetails:i}},function(e,t){var n={channelId:t.channelId};return{maybeFetchPins:function(){e(Object(ly.k)(n))},fetchPins:function(){e(Object(ly.e)(n))}}})(tU),aU=(m.b.string.isRequired,m.b.func.isRequired,m.b.bool.isRequired,m.b.number.isRequired,m.b.func.isRequired,m.b.bool.isRequired,m.b.func.isRequired,new x.b("channel_details")),rU=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.fetchPins(),this.focus=this.focus.bind(this),this.sectionContainerRef=h.a.createRef()}},{key:"componentDidUpdate",value:function(e){this.props.channelId!==e.channelId&&this.props.fetchPins()}},{key:"focus",value:function(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}},{key:"maybeRenderSpinner",value:function(){return this.props.isLoading?h.a.createElement(Yr.a,{size:"jumbo"}):null}},{key:"render",value:function(){var e=this.props,t=e.featureM11nChannelDetails,n=e.count,a=e.channelId,r=e.expandPinsSection,i=e.collapse;if(!t)return null;var o=0===n?aU.t("Pinned Items"):aU.t("{count, plural, =1 {# Pinned Item} other {# Pinned Items}}",{count:n}),s=h.a.createElement(zq,{iconType:"thumb-tack",sectionTitle:o});return h.a.createElement(Kq,{ref:this.sectionContainerRef,expand:r,collapse:i,sectionId:"pins",header:s,sectionClasses:"p-channel_details__pinned_items_section",key:"pins"},h.a.createElement(nU,{channelId:a}),this.maybeRenderSpinner())}}]),t}(p.Component);rU.displayName="PinnedItemsSection";var iU=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return{channelId:n,count:Object(he.N)(a)||0,featureM11nChannelDetails:Object(y.i)(e,"feature_m11n_channel_details"),isLoading:Object(ly.i)(e,n)===ly.b.LOADING}},function(e,t){var n={channelId:t.channelId};return{fetchPins:function(){e(Object(ly.e)(n))},expandPinsSection:function(){return e(Object(Ke.e)({sectionId:"pins"}))}}},null,{withRef:!0})(rU),oU=n("wBxZ"),sU=n("cZF4"),lU=n("X7d8"),cU=(n("zJYr"),new x.b("team")),uU=(m.b.string.isRequired,m.b.arrayOf(m.b.string).isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderRow=n.renderRow.bind(n),n.fetchPost=n.fetchPost.bind(n),n.onSearchInputChange=n.onSearchInputChange.bind(n),n.state={filteredTeamIds:[],searchQuery:"",marker:void 0,fullyLoaded:!1},n.loading=!1,n}return u()(t,e),o()(t,[{key:"onSearchInputChange",value:function(e){var t=this,n=e.target.value;this.setState(function(){return{searchQuery:n,filteredTeamIds:[],fullyLoaded:!1,marker:void 0}},function(){t.fetchTeams()})}},{key:"fetchPost",value:function(){this.fetchTeams()}},{key:"fetchTeams",value:function(){var e=this,t=this.props.teamIds,n=this.state,a=n.searchQuery,r=n.fullyLoaded,i=n.marker;return this.loading||r?null:(this.loading=!0,this.props.fetchAndUpsertTeamsWithQuery({query:a,ids:t,marker:i,count:50,reason:"enterprise-teams-dialog/fetchPost"}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.teams,a=t.next_cursor_mark;e.setState(function(e){return{filteredTeamIds:Object(sU.a)(e.filteredTeamIds,Object(bo.a)(n,"id")),marker:a,fullyLoaded:!a||Object(sa.a)(n)}},function(){e.loading=!1})}).catch(function(){e.loading=!1}))}},{key:"renderSearch",value:function(){return this.props.teamIds.length<=10?null:h.a.createElement("div",{className:"p-enterprise_teams_dialog__search"},h.a.createElement(AE.a,{value:this.state.searchQuery,onChange:this.onSearchInputChange,placeholder:cU.t("Search workspaces"),icon:"search",autoFocus:!0}))}},{key:"renderTeam",value:function(e){return h.a.createElement("div",{className:"p-enterprise_teams_dialog__team"},h.a.createElement(mt.b,{id:e,size:20,className:"p-enterprise_teams_dialog__team_icon"}),h.a.createElement("span",{className:"p-enterprise_teams_dialog__team_name"},h.a.createElement(Za.a,{id:e})))}},{key:"renderRow",value:function(e){var t=this.state.filteredTeamIds[e];return t?this.renderTeam(t):null}},{key:"renderList",value:function(){var e=this,t=this.state.filteredTeamIds;return h.a.createElement("div",{className:"p-enterprise_teams_dialog__list"},h.a.createElement(_D.a,null,function(n){var a=n.measureRef,r=n.width,i=n.height;return h.a.createElement("div",{className:"flex_one no_min_height",ref:a},h.a.createElement(Xu.a,{width:r,height:i,keys:t,rowRenderer:e.renderRow,loadAround:e.fetchPost,loadPost:e.fetchPost}))}))}},{key:"render",value:function(){var e=this.props.title;return h.a.createElement(lr.a,{title:e,showGoButton:!1,showCancelButton:!1,showFooter:!1},h.a.createElement("div",{className:"p-enterprise_teams_dialog__dialog"},this.renderSearch(),this.renderList()))}}]),t}(p.PureComponent));uU.displayName="EnterpriseTeamsDialog";var dU=Object(_.b)(null,function(e){return{fetchAndUpsertTeamsWithQuery:function(){return e(lU.c.apply(void 0,arguments))}}})(uU),pU=new x.b("teams"),hU=(m.b.string,m.b.arrayOf(m.b.string),m.b.object,{channelDisplayName:"",internalTeamIds:[],currentMember:void 0}),mU=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.channelDisplayName,n=e.internalTeamIds,a=e.currentMember;if(!a)return null;var r=n;Object(ne.xb)(a)&&(r=Object(ne.l)(a,n));var i=pU.t("{team_count, number} workspaces in {channel_name}",{team_count:r.length,channel_name:t});return h.a.createElement(dU,{title:i,teamIds:r})}}]),t}(p.PureComponent);mU.displayName="ChannelWorkspacesDialog",mU.defaultProps=hU;var bU=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n);return{channelDisplayName:Object(he.x)(e,a),internalTeamIds:Object(he.B)(e,a),currentMember:Object(Ue.b)(e)}})(mU),fU=new x.b("channel_details"),_U=(m.b.object.isRequired,m.b.string,m.b.object,m.b.array,m.b.object,m.b.func,{enterpriseName:"",enterpriseTeam:void 0,internalTeamIds:void 0,currentMember:void 0,openModal:d.a}),gU=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.seeAllWorkspaces=n.seeAllWorkspaces.bind(n),n}return u()(t,e),o()(t,[{key:"seeAllWorkspaces",value:function(){var e=this.props.channel;this.props.openModal({element:h.a.createElement(bU,{channelId:e.id})})}},{key:"renderHeading",value:function(){return h.a.createElement("h4",{className:"p-channel_details__heading p-channel_details__heading--workspaces"},fU.t("Workspaces",{fallbackHash:"205b4561ed36923d5a51de1b34c70044bf82e111",fallbackHashNs:"channel_pages"}))}},{key:"renderOrgWide",value:function(){var e=this.props,t=e.enterpriseName,n=e.enterpriseTeam;if(!n||!t)return null;var a=h.a.createElement(mt.b,{id:n.id,size:34,className:"p-channel_details__team_icon"});return h.a.createElement("p",{className:"p-channel_details__workspaces_row"},a,h.a.createElement("span",null,fU.t("Shared with all workspaces in the {enterprise_org_name} organization",{enterprise_org_name:t,fallbackHash:"e66187091a690d71cfc89449bb9c1436d1f3fe20",fallbackHashNs:"channel_pages"})))}},{key:"renderOrgShared",value:function(){var e=this.props,t=e.internalTeamIds,n=e.currentMember;if(!t||!n)return null;var a=t;Object(ne.xb)(n)&&(a=Object(ne.l)(n,t));var r=Object(oU.a)(a,10).map(function(e){var t=e;return h.a.createElement("div",{className:"p-channel_details__workspaces_row",key:t},h.a.createElement(mt.b,{id:e,size:34,className:"p-channel_details__team_icon"}),h.a.createElement(Za.a,{id:e}))}),i=void 0;return a.length>10&&(i=h.a.createElement(Re.d,{onClick:this.seeAllWorkspaces,type:"outline",size:"small"},fU.t("See all {total_teams_count, number} workspaces",{total_teams_count:a.length,fallbackHash:"e7958956b6e81d7b4d36988146dbe7ff402bbe38",fallbackHashNs:"channel_pages"}))),h.a.createElement("div",{className:"margin_bottom_100"},r,i)}},{key:"render",value:function(){var e=this.props.channel;if(!e||!Object(he.rb)(e))return null;var t=Object(he.tb)(e)?this.renderOrgWide():this.renderOrgShared();return t?h.a.createElement(h.a.Fragment,null,this.renderHeading(),t):null}}]),t}(p.PureComponent);gU.displayName="ChannelDetailsWorkspaces",gU.defaultProps=_U;var vU=Object(_.b)(function(e,t){var n=t.channel;return{enterpriseName:Object($.e)(e),enterpriseTeam:Object($.g)(e),internalTeamIds:Object(he.B)(e,n),currentMember:Object(Ue.b)(e)}},function(e){return{openModal:function(){return e(st.e.apply(void 0,arguments))}}})(gU),yU=n("fgg+"),kU=new x.b("channel_details"),OU=(m.b.object.isRequired,m.b.string,m.b.object,m.b.arrayOf(m.b.string),m.b.bool,{currentTeamId:void 0,memberCounts:void 0,pendingAndConnectedTeamIds:[],featureShipOrgAwareExternalSharedChannels:!0}),jU=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderHeading",value:function(){var e=kU.t("Organizations",{fallbackHash:"07605242f7a070b43bdc103189dccf6a5cc43506",fallbackHashNs:"channel_pages"});return h.a.createElement("h4",{className:"p-channel_details__heading p-channel_details__heading--workspaces"},e)}},{key:"renderMemberCount",value:function(e){var t=this.props,n=t.memberCounts,a=t.currentTeamId;if(!n||!n.counts)return null;var r=void 0;if(n.counts.teams_member_count&&!Object(rL.a)(n.counts.teams_member_count[e]))r=n.counts.teams_member_count[e];else if(e===a){var i=Object(fo.a)(Object($v.a)(n.counts.teams_member_count));r=n.counts.member_count-i}return kU.t("{count, plural, =1 {# member} other {# members}}",{count:r,fallbackHash:"03cd6f56ce61c03b5e511a02466ea71e50eab325",fallbackHashNs:"channel_pages"})}},{key:"renderTeams",value:function(){var e=this,t=this.props,n=t.pendingAndConnectedTeamIds,a=t.featureShipOrgAwareExternalSharedChannels,r=t.channel,i=n.map(function(t){var n=Object(he.vb)(r,t,{featureShipOrgAwareExternalSharedChannels:a});return h.a.createElement("div",{className:"p-channel_details__workspaces_row",key:t},h.a.createElement(mt.b,{id:t,size:34,className:"p-channel_details__team_icon",isPendingShared:n}),h.a.createElement("div",null,h.a.createElement(Za.a,{id:t}),h.a.createElement("div",{className:"p-channel_details__workspaces_row_member_count"},n?kU.t("Waiting for them to join\u2026",{fallbackHash:"d180f395db2335524b00cd84b96a7e075edf1694",fallbackHashNs:"channel_pages"}):e.renderMemberCount(t))))});return h.a.createElement("div",{className:"margin_bottom_100"},i)}},{key:"render",value:function(){var e=this.props,t=e.channel,n=e.pendingAndConnectedTeamIds;return!Object(he.Y)(t)||Object(sa.a)(n)?null:h.a.createElement(h.a.Fragment,null,this.renderHeading(),this.renderTeams(),!Object(he.rb)(t)&&h.a.createElement(yU.a,{channel:t}))}}]),t}(p.PureComponent);jU.displayName="ChannelDetailsExtShared",jU.defaultProps=OU;var CU=Object(_.b)(function(e,t){var n=t.channel;return{currentTeamId:Object(v.c)(e),memberCounts:Object(Xa.f)(e,n.id),pendingAndConnectedTeamIds:Object(he.M)(e,n,{includeSelfTeamId:!0}),featureShipOrgAwareExternalSharedChannels:Object(y.i)(e,"feature_ship_org_aware_external_shared_channels")}})(jU),EU=n("CXsT"),wU=n("Iq6W"),SU=n("IRiz"),IU=Object(ot.b)("Fetch highlights items list for channel",function(e,t,n){return e(Object(SU.c)(n)).then(function(t){var a=Object(aa.a)(t,"highlightMsgs.messages",[]);if(Object(sa.a)(a))return[];var r=e(Object(EU.a)({imsgs:a,channelId:n}));return e(Object(wU.a)(r)),r}).catch(function(e){throw Object(ut.a)({getState:t}).error("HIGHLIGHTS-STORE",e,{subtype:"error_fetching_channel_highlights"}),e})});IU.propTypes={channelId:m.b.string};var TU=Object(ot.b)("Fetch highlights items list for channel",function(e,t,n){return e(Object(SU.d)(n)).then(function(e){return{topContributors:Object(aa.a)(e,"resp.top_contributors.users",[]),similarChannels:Object(aa.a)(e,"resp.similar_channels.channels",[])}}).catch(function(e){throw Object(ut.a)({getState:t}).error("HIGHLIGHTS-STORE",e,{subtype:"error_fetching_top_contributors"}),e})});TU.propTypes={channelId:m.b.string};var NU=n("0++q"),RU=n("71a+"),AU=n("lkgS"),PU=n("B/i4"),MU=(m.b.string,m.b.number,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.memberCount,a=Object(PU.a)({channelId:t}),r=0===n?"\u2013":n;return h.a.createElement("div",{key:t,className:"p-channel_details__similar_channels_item"},h.a.createElement("div",{className:"p-channel_details__similar_channels_channel"},h.a.createElement(G.a,{className:"p-channel_details__similar_channels_channel_link",href:a,target:Object(AU.a)(a)},h.a.createElement(pe.a,{channelId:t}))),h.a.createElement("div",{className:"p-channel_details__member_count"},h.a.createElement(se.b,{type:"user",inline:!0,size:"inherit",className:"p-channel_details__member_count__icon"}),h.a.createElement("span",null,r)))}}]),t}(p.Component));MU.displayName="ChannelDetailsSimilarChannel";MU.defaultProps={channelId:"",memberCount:0};var DU=Object(_.b)(function(e,t){var n=Object(Xa.f)(e,t.channelId);return n.counts&&n.counts.member_count?{memberCount:n.counts.member_count}:{memberCount:0}},null)(MU),xU=new x.b("channel_details"),LU=(m.b.object.isRequired,m.b.bool,m.b.func,{featureM11nChannelDetails:!1,fetchTopContributorsAndRelatedChannels:d.a}),FU=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoading:!1,topContributors:[],similarChannels:[]},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.fetchTopContributorsAndRelatedChannels()}},{key:"componentDidUpdate",value:function(e){this.props.channel.id!==e.channel.id&&(this.resetState(),this.fetchTopContributorsAndRelatedChannels())}},{key:"componentWillUnmount",value:function(){this.pendingContributorsAndChannelsFetch&&this.pendingContributorsAndChannelsFetch.cancel()}},{key:"resetState",value:function(){this.setState(function(){return{topContributors:[],similarChannels:[]}})}},{key:"fetchTopContributorsAndRelatedChannels",value:function(){var e=this,t=this.props.channel;this.setState(function(){return{isLoading:!0}}),this.pendingContributorsAndChannelsFetch=this.props.fetchTopContributorsAndRelatedChannels(t.id).then(function(t){e.setState(function(){return{topContributors:t.topContributors,similarChannels:t.similarChannels,isLoading:!1}})}).catch(function(){e.setState(function(){return{topContributors:[],similarChannels:[],isLoading:!1}})}).finally(function(){e.pendingContributorsAndChannelsFetch=null})}},{key:"renderTopContributors",value:function(){var e=this.props.featureM11nChannelDetails,t=this.state.topContributors;if(t.length<1||!e)return null;var n=t.map(function(e){return h.a.createElement(RU.a,{key:e,userId:e},h.a.createElement("div",{className:"p-channel_detais__top_contributor_item"},h.a.createElement(NU.a,{id:e,size:"medium",showPresence:!0,showStatus:!0})," "))});return h.a.createElement("div",{className:"p-channel_details__subsection"},h.a.createElement("h4",{className:"p-channel_details__heading"},xU.rt("Questions? Try asking...",{fallbackHash:"0f6ef28a0f900aa53c3851aa2411634470e68586",fallbackHashNs:"highlights"})),n)}},{key:"renderSimilarChannels",value:function(){var e=this.state.similarChannels;if(e.length<1)return null;var t=e.map(function(e){return h.a.createElement(DU,{key:e,channelId:e})});return h.a.createElement("div",{className:"p-channel_details__subsection"},h.a.createElement("h4",{className:"p-channel_details__heading"},xU.rt("Related channels",{fallbackHash:"d8396f482fcfaa760ddc8eb1b3b36c193d53b70c",fallbackHashNs:"highlights"})),t)}},{key:"render",value:function(){return this.state.isLoading?h.a.createElement(Yr.a,{size:"jumbo"}):h.a.createElement("div",null,this.renderTopContributors(),this.renderSimilarChannels())}}]),t}(p.Component);FU.displayName="ChannelDetailsInsights";FU.defaultProps=LU;var BU=Object(_.b)(function(e){return{featureM11nChannelDetails:Object(y.i)(e,"feature_m11n_channel_details")}},function(e){return{fetchTopContributorsAndRelatedChannels:function(){return e(TU.apply(void 0,arguments))}}})(FU),qU=new x.b("channel_details"),UU=(m.b.object.isRequired,m.b.bool,m.b.func,m.b.bool,m.b.bool,m.b.bool,m.b.object,m.b.func,m.b.func.isRequired,m.b.func,m.b.bool,{collapse:d.a,featureM11nChannelDetails:!1,userIsChannelMember:!0,userCanPost:!0,userCanSetPurpose:!1,currentMember:null,openModal:d.a,jumpToMessage:d.a,featureChangePurposeToDescription:!1}),HU=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["focus","onPurposeLinkClick","onCreatedLinkClick"]),n.sectionContainerRef=h.a.createRef(),n.createdTime=null,n}return u()(t,e),o()(t,[{key:"onPurposeLinkClick",value:function(){this.props.userCanSetPurpose&&this.props.openModal({element:h.a.createElement(Hy,{channelId:this.props.channel.id})})}},{key:"onCreatedLinkClick",value:function(){return this.props.jumpToMessage({channelId:this.props.channel.id,ts:this.createdTime})}},{key:"focus",value:function(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}},{key:"renderWorkspaces",value:function(){var e=this.props.channel;return Object(he.rb)(e)?h.a.createElement(vU,{channel:e}):Object(he.Y)(e)?h.a.createElement(CU,{channel:e}):null}},{key:"renderNonEditablePurpose",value:function(e){var t=this.props,n=t.featureChangePurposeToDescription,a=t.channel,r=""===e,i=h.a.createElement(Ly.a,{channelId:a.id}),o=n?qU.rt("A description has not been set for {channel_name}.",{channel_name:i,fallbackHash:"b82c50c4275d22bf40adba6201f394c53a0e9d94",fallbackHashNs:"channel_pages"}):qU.rt("A purpose has not been set for {channel_name}.",{channel_name:i,fallbackHash:"a40d5e0c32239cb9c70163694d4dfeebda2e2491",fallbackHashNs:"channel_pages"});return h.a.createElement(p.Fragment,null,h.a.createElement("h4",{className:"p-channel_details__heading p-channel_details__heading--purpose"},n?qU.t("Description"):qU.t("Purpose")),h.a.createElement("div",{className:"p-channel_details__detail_purpose"},h.a.createElement("div",null,r&&o),h.a.createElement(Pn.a,{text:e})))}},{key:"renderPurpose",value:function(){var e=Object(he.P)(this.props.channel),t=this.props,n=t.featureChangePurposeToDescription,a=t.userCanPost,r=t.userCanSetPurpose,i=""===e;if(!t.userIsChannelMember||!a||!r)return this.renderNonEditablePurpose(e);var o=h.a.createElement(M.a,{"aria-label":n?qU.t("Edit channel description"):qU.t("Edit channel purpose",{fallbackHash:"7ff753625338e5788341fc682acb970c97b1d8e2",fallbackHashNs:"dialogs_purpose"}),className:"p-channel_details__edit_purpose",onClick:this.onPurposeLinkClick,"data-qa":"channel-details-edit-purpose"},qU.t("edit",{fallbackHash:"9ead47a82a0d25985f22f10651d1f93b3abba317",fallbackHashNs:"channel_pages"})),s=h.a.createElement(M.a,{className:"p-channel_details__set_purpose",onClick:this.onPurposeLinkClick,"data-qa":"channel-details-set-purpose"},n?qU.t("Set a channel description"):qU.t("Set a channel purpose",{fallbackHash:"947ff23f775a3d91b205763ca7b53a2da4279733",fallbackHashNs:"channel_pages"}));return h.a.createElement(p.Fragment,null,h.a.createElement("h4",{className:"p-channel_details__heading p-channel_details__heading--purpose"},n?qU.t("Description"):qU.t("Purpose"),!i&&o),h.a.createElement("p",{className:"p-channel_details__detail_purpose"},i&&s,h.a.createElement(Pn.a,{text:e})))}},{key:"renderCreated",value:function(){var e=this.props,t=e.channel,n=e.currentMember,a=Object(he.r)(t),r=Object(he.q)(t),i=r&&Object(Zt.n)(r);this.createdTime=r;var o=qU.rt("Created by {creator_name} {days_since_creation, select, 0 {today} 1 {yesterday} other {on {creation_date, date, long}}}",{creator_name:a?h.a.createElement(mk.a,{id:a}):h.a.createElement(Dy.a,null),days_since_creation:i&&Object(Zt.b)(new Date,i),creation_date:i&&i.getTime()});return n&&n.id===a&&(o=qU.rt("Created by you {days_since_creation, select, 0 {today} 1 {yesterday} other {on {creation_date, date, long}}}",{days_since_creation:i&&Object(Zt.b)(new Date,i),creation_date:i&&i.getTime(),fallbackHash:"20d8301c36c420754114799216822e21d87573a3",fallbackHashNs:"channel_pages"})),h.a.createElement("div",{className:"p-channel_details__subsection"},h.a.createElement("h4",{className:"p-channel_details__heading"},qU.t("Created")),h.a.createElement(M.a,{className:"p-channel_details__created_link",onClick:this.onCreatedLinkClick},o))}},{key:"render",value:function(){var e=this.props,t=e.featureM11nChannelDetails,n=e.channel,a=e.collapse,r=e.expandInfoSection;if(!t)return null;if(Object(he.eb)(n)||Object(he.lb)(n))return null;var i=h.a.createElement(zq,{iconType:"channel-info",sectionTitle:qU.t("Channel Details")});return h.a.createElement(Kq,{ref:this.sectionContainerRef,sectionId:"info",expand:r,collapse:a,header:i,sectionClasses:"p-channel_details__channel_details_section",key:$j.d+"_DETAILS_SECTION"},this.renderWorkspaces(),this.renderPurpose(),this.renderCreated(),h.a.createElement(BU,{channel:n}))}}]),t}(p.Component);HU.displayName="ChannelDetailsSection";HU.defaultProps=UU;var GU=Object(_.b)(function(e,t){var n=Object(y.i)(e,"feature_m11n_channel_details"),a=Object(y.i)(e,"feature_change_purpose_to_description");return{userIsChannelMember:Object(he.Ob)(t.channel),userCanPost:Object(It.q)(e,t.channel.id),userCanSetPurpose:Object(It.v)(e,t.channel.id).ok,currentMember:Object(Ue.b)(e),featureM11nChannelDetails:n,featureChangePurposeToDescription:a}},function(e){return{openModal:function(){return e(st.e.apply(void 0,arguments))},expandInfoSection:function(){return e(Object(Ke.e)({sectionId:"info"}))},jumpToMessage:function(){return e(RF.a.apply(void 0,arguments))}}},null,{withRef:!0})(HU),WU=n("OISv"),KU=(m.b.object,m.b.func,{msg:void 0,previewFile:d.a}),VU=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onFileClick"]),n}return u()(t,e),o()(t,[{key:"onFileClick",value:function(e,t){t&&this.props.previewFile({fileId:t.id,flexOrigin:"details",flexOriginId:"highlights"})}},{key:"render",value:function(){var e=this.props.msg;return e&&e.ts?h.a.createElement(WU.a,{msg:e,timestampClickable:!0,onFileClick:this.onFileClick,flexOrigin:"details",flexOriginId:"highlights"}):null}}]),t}(p.PureComponent);VU.displayName="HighlightsItem",VU.defaultProps=KU;var zU=Object(_.b)(function(e,t){var n=t.highlightMsg.ts;return{msg:Object(vo.a)(e,t.channelId,n)}},function(e){return{previewFile:function(){return e(Ke.c.apply(void 0,arguments))}}})(VU);var YU=new x.b("channel_details"),QU=(m.b.object.isRequired,m.b.string.isRequired,m.b.bool.isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoading:!1,highlightsMsgs:[]},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.fetchHighlights()}},{key:"componentDidUpdate",value:function(e){this.props.channelId!==e.channelId&&(this.resetState(),this.fetchHighlights())}},{key:"componentWillUnmount",value:function(){this.pendingHighlightsFetch&&this.pendingHighlightsFetch.cancel()}},{key:"getTitleText",value:function(e){if(!this.props.featureM11nChannelDetails)return null;switch(e){case"this-week-header":return YU.rt("This week",{fallbackHash:"7b72883e078a6858cf0c79bf3e93e72e765e9ada",fallbackHashNs:"channel_pages"});case"this-month-header":return YU.rt("This month",{fallbackHash:"1b4785331db3b08cd8e3cfa4bd36216731a79e54",fallbackHashNs:"channel_pages"});case"within-three-months-header":return YU.rt("More than a month ago",{fallbackHash:"89d5943beaee33befc436bdb3150890cc429cdf2",fallbackHashNs:"channel_pages"});case"within-six-months-header":return YU.rt("More than 3 months ago",{fallbackHash:"d78be90f6b3e1fa97548920440fd9a31bd4395cc",fallbackHashNs:"channel_pages"});case"older-header":return YU.rt("More than 6 months ago",{fallbackHash:"6707456354b81ac81d62b826dc37ccb8e017739b",fallbackHashNs:"channel_pages"});default:return null}}},{key:"resetState",value:function(){this.setState(function(){return{highlightsMsgs:[]}})}},{key:"fetchHighlights",value:function(){var e=this,t=this.props,n=t.channel,a=t.channelId;Object(he.eb)(n)||Object(he.lb)(n)||!a||(this.setState(function(){return{isLoading:!0}}),this.pendingHighlightsFetch=this.props.fetchHighlightsListForChannel(a).then(function(t){t?e.setState(function(){return{highlightsMsgs:t,isLoading:!1}}):e.setState(function(){return{highlightsMsgs:[],isLoading:!1}})}).catch(function(){e.setState(function(){return{highlightsMsgs:[],isLoading:!1}})}).finally(function(){e.pendingHighlightsFetch=null}))}},{key:"renderTitle",value:function(e){return e?h.a.createElement("div",{key:e,className:"p-highlights_section__group_title"},h.a.createElement("div",{className:"p-highlights_section__group_title_line"}),h.a.createElement("div",{className:"p-highlights_section__group_title_label bold"},this.getTitleText(e))):null}},{key:"renderEmptyState",value:function(){return h.a.createElement("p",{className:"p-channel_details__subtitle"}," ",YU.rt("<strong>Nothing yet.</strong> When this channel gets a bit more active, check back here.",{fallbackHash:"0312eef94042834b79371db2371832bb4f8b361f",fallbackHashNs:"channel_pages"})," ")}},{key:"render",value:function(){var e=this,t=this.props,n=t.channelId,a=t.featureM11nChannelDetails,r=this.state,i=r.isLoading,o=r.highlightsMsgs;if(!a)return null;if(i)return h.a.createElement(Yr.a,{size:"jumbo"});if(0===o.length)return this.renderEmptyState();var s=function(e){if(!e)return null;var t=[],n=!1,a=!1,r=!1,i=!1,o=!1,s=new Date/1e3,l=Object(qp.a)(e,"ts");return Object(Bp.a)(l),Object(jd.a)(l,function(e){e.ts>=s-604800?(n||(t.push({type:"header",content:"this-week-header"}),n=!0),t.push({type:"message",content:e})):e.ts>=s-2678400?(a||(t.push({type:"header",content:"this-month-header"}),a=!0),t.push({type:"message",content:e})):e.ts>=s-8035200?(r||(t.push({type:"header",content:"within-three-months-header"}),r=!0),t.push({type:"message",content:e})):e.ts>=s-16070400?(i||(t.push({type:"header",content:"within-six-months-header"}),i=!0),t.push({type:"message",content:e})):(o||(t.push({type:"header",content:"older-header"}),o=!0),t.push({type:"message",content:e}))}),t}(o),l=YU.rt("Below {count, plural, =1 {is the top message} other {are a few of the top messages}} in <strong>{channel_name}</strong>.",{count:o.length,channel_name:h.a.createElement(pe.a,{inline:!0,channelId:n}),fallbackHash:"1992d0038710cbd48278cc708a9ea5db8b4be72a",fallbackHashNs:"channel_pages"});return h.a.createElement("div",null,h.a.createElement("p",{className:"p-channel_details__subtitle"},l),h.a.createElement("ul",{className:"p-highlights_section no_bullets"},s.map(function(t){return"header"===t.type?e.renderTitle(t.content):h.a.createElement("li",{key:t.content.ts||t.content.id,className:"p-highlights_section__item"},h.a.createElement(zU,{highlightMsg:t.content,channelId:e.props.channelId}))})))}}]),t}(p.Component));QU.displayName="HighlightsList";var JU=Object(_.b)(function(e){return{featureM11nChannelDetails:Object(y.i)(e,"feature_m11n_channel_details")}},function(e){return{fetchHighlightsListForChannel:function(){return e(IU.apply(void 0,arguments))}}})(QU),XU=(n("6S4m"),new x.b("channel_details")),ZU=(m.b.object.isRequired,m.b.func,m.b.string.isRequired,m.b.bool,m.b.func.isRequired,{collapse:d.a,featureM11nChannelDetails:!1}),$U=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.focus=n.focus.bind(n),n.sectionContainerRef=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"focus",value:function(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}},{key:"renderHighlights",value:function(){return h.a.createElement(JU,{channel:this.props.channel,channelId:this.props.channelId})}},{key:"render",value:function(){var e=this.props,t=e.featureM11nChannelDetails,n=e.channel,a=e.collapse,r=e.expandHighlightsSection;if(!t)return null;if(Object(he.eb)(n)||Object(he.lb)(n))return null;var i=h.a.createElement(zq,{iconType:"sparkles",sectionTitle:XU.t("Highlights")});return h.a.createElement(Kq,{ref:this.sectionContainerRef,sectionId:"highlights",expand:r,collapse:a,header:i,sectionClasses:"p-channel_details__highlights_section",key:$j.d+"_DETAILS_SECTION"},this.renderHighlights())}}]),t}(p.Component);$U.displayName="HighlightsSection";$U.defaultProps=ZU;var eH=Object(_.b)(function(e,t){var n=Object(y.i)(e,"feature_m11n_channel_details");return{channelId:t.channel.id,featureM11nChannelDetails:n}},function(e){return{expandHighlightsSection:function(){return e(Object(Ke.e)({sectionId:"highlights"}))}}},null,{withRef:!0})($U),tH=n("PAPM"),nH=n("QEGb"),aH=new x.b("channel_details"),rH=(m.b.string.isRequired,m.b.number.isRequired,m.b.bool,m.b.object.isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["fetchPost","renderRow","onSearchInputChange","onScroll"]),n.keys=null,n.loading=!1,n.state={memberIds:[],searchQuery:"",fullyLoaded:!1,marker:void 0,showScrollIndicatorTop:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.fetchMembers()}},{key:"onSearchInputChange",value:function(e){var t=this,n=e.target.value;this.setState(function(){return{searchQuery:n,memberIds:[],fullyLoaded:!1,marker:void 0}},function(){t.fetchMembers()})}},{key:"onScroll",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).scrollTop,n=(void 0===t?0:t)>0;this.setState(function(){return{showScrollIndicatorTop:n}})}},{key:"getListKeys",value:function(){return this.state.memberIds}},{key:"fetchPost",value:function(){this.fetchMembers()}},{key:"fetchMembers",value:function(){var e=this;this.loading||this.state.fullyLoaded||(this.props.logger.info("CHANNEL-MEMBERS","Fetching more"),this.loading=!0,this.props.fetchAndUpsertMembersForChannel({channelId:this.props.channelId,count:50,marker:this.state.marker,searchQuery:this.state.searchQuery}).then(function(t){var n=t.members,a=t.nextMarker;e.setState(function(e){return{memberIds:Object(sU.a)(e.memberIds,Object(bo.a)(n,"id")),fullyLoaded:!a,marker:a}},function(){e.props.logger.info("CHANNEL-MEMBERS","Showing "+e.state.memberIds.length+" members"),e.state.fullyLoaded&&e.props.logger.info("CHANNEL-MEMBERS","Done fetching")})}).finally(function(){e.loading=!1}))}},{key:"renderSearch",value:function(){return this.props.featureM11nChannelDetails?h.a.createElement("div",{className:"p-channel_details__members_dialog__search"},h.a.createElement(AE.a,{value:this.state.searchQuery,onChange:this.onSearchInputChange,placeholder:aH.t("Search members"),icon:"search","data-qa":"members_dialog_filter",autoFocus:!0})):null}},{key:"renderRow",value:function(e){var t=this.keys[e];return t?this.renderMember(t):null}},{key:"renderMember",value:function(e){return h.a.createElement(NM.a,{userId:e,position:"left-bottom",includeRemoveFromChannelAction:!0},h.a.createElement(oe.a,{className:"p-members_dialog__member_list_btn","data-qa":"member_row_btn"},h.a.createElement(AD,{id:e,className:"p-members_dialog__member_list_entity",useShortMode:!0})))}},{key:"renderMemberList",value:function(){var e=this;this.keys=this.getListKeys();var t=this.state.showScrollIndicatorTop,n=f()("p-channel_details__members_dialog__list",{"p-channel_details__members_dialog__list--indicate-top":t});return h.a.createElement("div",{className:n},h.a.createElement(Nu.a,null,function(t){var n=t.width,a=t.height;return h.a.createElement(Xu.a,{width:n,height:a,keys:e.keys,rowRenderer:e.renderRow,loadAround:e.fetchPost,loadPost:e.fetchPost,onScroll:e.onScroll})}))}},{key:"render",value:function(){var e=this.props.channelId;if(!this.props.featureM11nChannelDetails)return null;var t=h.a.createElement(pe.a,{inline:!0,channelId:e}),n=aH.rt("{member_count, number} members in {channel_name}",{member_count:this.props.memberCount,channel_name:t,fallbackHash:"7be769e7cb0f1f771e7a14fb7b1b6c90eaedf0cb",fallbackHashNs:"channel_pages"}),a="members_dialog__title-bar";return h.a.createElement(nH.a,{labelledby:a,centered:!0},h.a.createElement(oh.a,null,h.a.createElement(sh.a,{id:a,title:n,"data-qa":"dialog_header"})),h.a.createElement("div",{className:"p-channel_details__members_dialog"},this.renderSearch(),this.renderMemberList()))}}]),t}(p.Component));rH.displayName="MembersDialog",rH.defaultProps={featureM11nChannelDetails:!1};var iH=Object(_.b)(function(e,t){var n=t.channelId,a=Object(ut.a)({state:e});return{channelId:n,featureM11nChannelDetails:Object(y.i)(e,"feature_m11n_channel_details"),logger:a}},function(e){return{fetchAndUpsertMembersForChannel:function(){return e(tH.a.apply(void 0,arguments))}}})(rH),oH=n("/Ikh");function sH(e){var t=e.memberId;return h.a.createElement(NM.a,{userId:t,position:"left-bottom",includeRemoveFromChannelAction:!0},h.a.createElement(oe.a,{className:"p-channel_details__member_list__member_btn","data-qa":"member_row_btn"},h.a.createElement(PE.a,{id:t,className:"p-channel_details__member_list_entity",useShortMode:!0})))}sH.displayName="MemberRow";var lH=sH,cH=(m.b.array,m.b.string.isRequired,m.b.func.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.fetchMembersAboveTheFold()}},{key:"componentDidUpdate",value:function(e){this.props.channelId!==e.channelId&&this.props.fetchMembersAboveTheFold()}},{key:"render",value:function(){var e=this.props.memberList;if(!e)return null;var t=e.slice(0,hu.w).map(function(e){return h.a.createElement("li",{key:e,className:"p-channel_details__member_list__member"},h.a.createElement(lH,{memberId:e}))});return h.a.createElement("ul",{className:"p-channel_details__member_list"},t)}}]),t}(p.Component));cH.displayName="MemberList",cH.defaultProps={memberList:[]};var uH=Object(_.b)(function(e,t){var n=t.channelId;return{memberList:Object(oH.c)(e,n)}},function(e,t){var n=t.channelId;return{fetchMembersAboveTheFold:function(){return e(Object(oH.b)({channelId:n,count:hu.w}))}}})(cH),dH=(n("SaAd"),new x.b("channel_details")),pH=(m.b.string.isRequired,m.b.func.isRequired,m.b.bool.isRequired,m.b.number,m.b.number,m.b.object.isRequired,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.func.isRequired,{memberCount:void 0,restrictedMemberCount:void 0,openDmBrowserModal:d.a,startChannelInviteModal:d.a,openModal:d.a,showInviteButton:!1,showSeeAllMembersButton:!1}),hH=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["handleSeeAllClick","handleInviteClick","focus"]),n.sectionContainerRef=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"focus",value:function(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}},{key:"handleSeeAllClick",value:function(){var e=this.props.memberCount;this.props.openModal({element:h.a.createElement(iH,{channelId:this.props.channelId,memberCount:e})})}},{key:"handleInviteClick",value:function(){if(Object(he.lb)(this.props.channel)){var e=Object(he.H)(this.props.channel);this.props.openDmBrowserModal({memberIds:e,source:$n.b.MPIM})}else this.props.startChannelInviteModal({channelId:this.props.channelId})}},{key:"renderSeeAllMembersButton",value:function(){var e=this.props.memberCount;if(!this.props.showSeeAllMembersButton)return null;if(!e||e<hu.w)return null;var t=dH.t("See All {total_member_count, number} Members",{total_member_count:e,fallbackHash:"20a6f972248d119a0e90fbfc724fd70f2d54cdd2",fallbackHashNs:"channel_pages"});return h.a.createElement(Re.d,{className:"margin_top_50",onClick:this.handleSeeAllClick,type:"outline"},t)}},{key:"renderHeader",value:function(){if(!this.props.featureM11nChannelDetails)return null;var e=this.props,t=e.memberCount,n=e.restrictedMemberCount,a=void 0;a=Object(Ja.a)(t)?dH.rt("{memberCount, plural, =1 {# Member} other {# Members}}",{memberCount:t}):dH.rt("\u2013 Members",{memberCount:t});var r=Object(Ja.a)(n)&&n>0,i=Object(Ja.a)(n)&&n>0?dH.rt("{restrictedMemberCount, plural, =1 {# Guest} other {# Guests}}",{restrictedMemberCount:n}):null,o=h.a.createElement(le.c,{tip:i,position:"top"},h.a.createElement("div",{className:"p-channel_details__member_list__guests"},h.a.createElement(se.b,{type:"lock-o",inline:!0,className:"p-channel_details__member_list__guests_icon"}),n)),s=h.a.createElement(p.Fragment,null,a,r&&o);return h.a.createElement(zq,{iconType:"user",sectionTitle:s})}},{key:"render",value:function(){var e=this.props,t=e.featureM11nChannelDetails,n=e.channel,a=e.channelId,r=e.memberCount,i=e.collapse,o=e.expandMembersSection,s=e.showInviteButton,l=e.showSeeAllMembersButton;if(Object(he.eb)(n)||!t)return null;var c=dH.t("Add People",{fallbackHash:"8d158f5400b7631734fdbff564885963c8b7b76d"}),u=f()("p-channel_details__members_list_buttons",{"p-channel_details__members_list_button":!l});return h.a.createElement(Kq,{ref:this.sectionContainerRef,sectionId:"members",expand:o,collapse:i,header:this.renderHeader(),sectionClasses:"p-channel_details__members_list_section",key:"members"},r>0&&h.a.createElement(uH,{memberCount:r,channelId:a}),h.a.createElement("div",{className:u},this.renderSeeAllMembersButton(),s&&h.a.createElement(Re.d,{onClick:this.handleInviteClick,type:"outline","data-qa":"members-list-invite-button"},c)))}}]),t}(p.PureComponent);hH.displayName="MemberListSection",hH.defaultProps=pH;var mH=Object(_.b)(function(e,t){var n=t.channelId,a=Object(Xa.f)(e,n),r=Object(re.d)(e,n),i=a&&a.counts?a.counts.member_count:void 0,o=a&&a.counts?a.counts.restricted_member_count:void 0;return{featureM11nChannelDetails:Object(y.i)(e,"feature_m11n_channel_details"),memberCount:i,restrictedMemberCount:o,channel:r,showInviteButton:Object(It.H)(e,n)||Object(he.lb)(r),showSeeAllMembersButton:i&&i>=hu.w}},function(e){return{openDmBrowserModal:function(){return e(Zn.a.apply(void 0,arguments))},startChannelInviteModal:function(){return e(ea.b.apply(void 0,arguments))},openModal:function(){return e(st.e.apply(void 0,arguments))},expandMembersSection:function(){return e(Object(Ke.e)({sectionId:"members"}))}}},null,{withRef:!0})(hH),bH=n("sRJn"),fH=(m.b.string.isRequired,m.b.string.isRequired,m.b.string,m.b.string,m.b.object.isRequired,m.b.bool.isRequired,{appId:void 0,botId:void 0}),_H=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["handleNameClick"]),n}return u()(t,e),o()(t,[{key:"trackClick",value:function(e){var t,n,a,r=this.props,i=r.appId,o=r.botId,s=r.channelId,l=r.clogger,c=(t={},xl()(t,ve.x.action,ve.v.CLICK),xl()(t,ve.x.ui_element,e),t);return l.track("APP_CHANNEL_DETAIL_LIST",{contexts:(a={},xl()(a,ve.c.ui_context,c),xl()(a,ve.c.core,(n={},xl()(n,ve.d.app_id,i),xl()(n,ve.d.bot_id,o),xl()(n,ve.d.channel_id,s),n)),a)}),c}},{key:"handleNameClick",value:function(){this.trackClick(ve.y.BTN_APP_NAME)}},{key:"render",value:function(){var e=this.props,t=e.featureM11nChannelDetails,n=e.userId;return t?h.a.createElement(RU.a,{position:"left-bottom",offsetX:0,onClick:this.handleNameClick,userId:n},h.a.createElement(Re.c,{"data-qa":"channel_apps_section_row",className:"p-channel_details_apps__row",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},h.a.createElement(PE.a,{id:n,className:"p-channel_details_apps__member_list_entity",forceRealName:!0,useShortMode:!0}))):null}}]),t}(p.PureComponent);_H.displayName="AppsSectionItem",_H.defaultProps=fH;var gH=Object(_.b)(function(e,t){var n=t.userId,a=Object(Ue.c)(e,n);return{appId:Object(ne.m)(a),botId:Object(ne.n)(a),clogger:Object(ye.a)({state:e}),featureM11nChannelDetails:Object(y.i)(e,"feature_m11n_channel_details")}})(_H),vH=new x.b("channel_details"),yH=(m.b.string.isRequired,m.b.object.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.arrayOf(m.b.string),m.b.bool.isRequired,m.b.func,m.b.bool,{userIds:[],openAppsBrowserModal:d.a,canAddAppsToChannel:!1}),kH=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleAddAppsClick=n.handleAddAppsClick.bind(n),n}return u()(t,e),o()(t,[{key:"handleAddAppsClick",value:function(){var e,t,n=this.props,a=n.clogger,r=n.channelId,i=(e={},xl()(e,ve.x.action,ve.v.CLICK),xl()(e,ve.x.ui_element,ve.y.BTN_ADD_APPS),e);a.track(ve.k.APP_CHANNEL_DETAIL_LIST,{contexts:(t={},xl()(t,ve.c.ui_context,i),xl()(t,ve.c.core,xl()({},ve.d.channel_id,r)),t)}),a.track(ve.k.APP_CLICK_BTN_ADD_APPS_IN_CHANNEL_DETAILS,{contexts:xl()({},ve.c.ui_context,Z()({},i,xl()({},ve.x.step,ve.z.CHANNEL_DETAILS)))}),this.props.featureM11nAppsBrowser&&this.props.openAppsBrowserModal({addAppsVariant:!0,referringEventId:ve.k.APP_CHANNEL_DETAIL_LIST,referringUiContext:i,channelId:r})}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.featureM11nChannelDetails,a=e.isLoading,r=e.userIds,i=e.canAddAppsToChannel;if(!n)return null;if(a)return h.a.createElement(Yr.a,{size:"jumbo"});var o=f()("p-channel_details_apps",{"p-channel_details_apps__button_only":r.length<1});return h.a.createElement("div",null,h.a.createElement("ul",{className:o},r.map(function(e){return h.a.createElement("li",{className:"no_margin",key:e},h.a.createElement(gH,{channelId:t,userId:e}))})),i&&h.a.createElement(Re.d,{className:"p-channel_details_apps__row--add",onClick:this.handleAddAppsClick,type:"outline","data-qa":"channel_apps_section_add"},vH.t("Add App",{fallbackHash:"1ae2c6ac44fb57fa370643de37789a2d84fa5202",fallbackHashNs:"channel_details"})))}}]),t}(p.PureComponent);kH.displayName="AppsSectionList",kH.defaultProps=yH;var OH=Object(_.b)(function(e,t){var n=t.channelId,a=Object(bH.b)(e,n);return{clogger:Object(ye.a)({state:e}),featureM11nChannelDetails:Object(y.i)(e,"feature_m11n_channel_details"),isLoading:Object(zr.d)(a),userIds:a.userIds,featureM11nAppsBrowser:Object(y.i)(e,"feature_m11n_apps_browser"),canAddAppsToChannel:Object(It.x)(e,n)}},function(e){return{openAppsBrowserModal:function(){return e(na.a.apply(void 0,arguments))}}})(kH),jH=(n("Q2Pv"),new x.b("channel_details")),CH=(m.b.string.isRequired,m.b.func.isRequired,m.b.number,m.b.object,m.b.bool.isRequired,m.b.bool,m.b.func.isRequired,{clogger:void 0,appCount:void 0,isImWithApp:!1}),EH=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.focus=n.focus.bind(n),n.sectionContainerRef=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(){var e,t,n=this.props,a=n.channelId,r=n.clogger;r&&(r.track(ve.k.APP_CHANNEL_DETAIL_LIST,{contexts:(e={},xl()(e,ve.c.ui_context,xl()({},ve.x.action,ve.v.EXPAND)),xl()(e,ve.c.core,xl()({},ve.d.channel_id,a)),e)}),r.track(ve.k.APP_CLICK_EXPAND_APP_LIST_IN_CHANNEL_DETAILS,{contexts:xl()({},ve.c.ui_context,(t={},xl()(t,ve.x.action,ve.v.CLICK),xl()(t,ve.x.step,ve.z.CHANNEL_DETAILS),xl()(t,ve.x.ui_element,ve.y.EXPAND_APP_LIST),t))}))}},{key:"focus",value:function(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}},{key:"render",value:function(){var e=this.props,t=e.featureM11nChannelDetails,n=e.channelId,a=e.isImWithApp,r=e.appCount,i=e.collapse,o=e.expandAppsSection;if(!t)return null;if(a)return null;var s=r?jH.t("{appCount, plural, =1 {# App} other {# Apps}}",{appCount:r}):jH.t("Apps"),l=h.a.createElement(zq,{iconType:"bolt",sectionTitle:s});return h.a.createElement(Kq,{ref:this.sectionContainerRef,sectionId:"apps",expand:o,collapse:i,header:l,sectionClasses:"p-channel_details__apps_section",key:"apps"},h.a.createElement(OH,{channelId:n}))}}]),t}(p.PureComponent);EH.displayName="AppsSection",EH.defaultProps=CH;var wH=Object(_.b)(function(e,t){var n=t.channelId,a=Object(Xa.f)(e,n);return{appCount:Object(aa.a)(a,"counts.app_count"),clogger:Object(ye.a)({state:e}),featureM11nChannelDetails:Object(y.i)(e,"feature_m11n_channel_details"),isImWithApp:Object(he.ib)(e,n)}},function(e){return{expandAppsSection:function(){return e(Object(Ke.e)({sectionId:"apps"}))}}},null,{withRef:!0})(EH),SH=Object(tD.a)(eD.a),IH=(m.b.string.isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showFile=n.showFile.bind(n),n}return u()(t,e),o()(t,[{key:"showFile",value:function(){this.props.previewFile({fileId:this.props.fileId,flexOrigin:"details",flexOriginId:"shared_files"})}},{key:"render",value:function(){var e=this.props.fileId;return h.a.createElement(SH,{className:"p-channel_details__shared_files__file",fileId:e,onClick:this.showFile})}}]),t}(p.PureComponent));IH.displayName="SharedFile";var TH=Object(_.b)(null,function(e){return{previewFile:function(){return e(Ke.c.apply(void 0,arguments))}}})(IH),NH=new x.b("channel_details"),RH=(m.b.object.isRequired,m.b.string.isRequired,m.b.bool,m.b.func.isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showMoreFiles=n.showMoreFiles.bind(n),n.state={isLoading:!0,fileIds:[],hasMore:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.fetchFiles()}},{key:"componentDidUpdate",value:function(e){e.channelId!==this.props.channelId&&this.fetchFiles()}},{key:"fetchFiles",value:function(){var e=this,t=this.props,n=t.channelId,a=t.logger;this.setState(function(){return{isLoading:!0}}),this.props.listAndUpsertFiles({channelId:n,count:10,reason:"shared-files-section/fetchFiles"}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.files,a=t.paging,r=Object(Bp.a)(Object(qp.a)(n,function(e){return Object(rM.p)(e)}));e.setState(function(){return{isLoading:!1,fileIds:Object(bo.a)(r,"id"),hasMore:a&&a.pages>1}})}).catch(function(t){e.setState(function(){return{isLoading:!1,fileIds:[]}}),a.logError("SHARED-FILES",t,{subtype:"shared_files_loading_failed"})})}},{key:"showMoreFiles",value:function(){this.props.openFromFilesMenu()}},{key:"renderEmptyState",value:function(){return this.props.featureM11nChannelDetails?h.a.createElement("div",{className:"p-channel_details__shared_files__empty"},NH.rt("There are no files to see here right now! But there could be \u2014 drag and drop any file into the message pane to add it to this conversation.",{fallbackHash:"32dfdcb3bc1f3bbe4a27120ff93d9d0a90312489",fallbackHashNs:"channel_pages"})):null}},{key:"renderFiles",value:function(){var e=this.state,t=e.fileIds,n=e.hasMore;if(!this.props.featureM11nChannelDetails)return null;var a=Object(bo.a)(t,function(e){return h.a.createElement(TH,{key:e,fileId:e})}),r=void 0;return n&&(r=h.a.createElement("div",{className:"p-channel_details__shared_files__more"},h.a.createElement(Re.d,{type:"outline",onClick:this.showMoreFiles},NH.rt("See All Files",{fallbackHash:"af3d09ab48b386df129640b14786b79264a4fa87",fallbackHashNs:"menu"})))),h.a.createElement(h.a.Fragment,null,a,r)}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.fileIds;return t?h.a.createElement(Yr.a,{size:"jumbo"}):n.length?this.renderFiles():this.renderEmptyState()}}]),t}(p.PureComponent));RH.displayName="SharedFilesList",RH.defaultProps={featureM11nChannelDetails:!1};var AH=Object(_.b)(function(e){var t=Object(y.i)(e,"feature_m11n_channel_details");return{logger:Object(ut.a)({state:e}),featureM11nChannelDetails:t}},function(e){return{listAndUpsertFiles:function(){return e(ZM.h.apply(void 0,arguments))},openFromFilesMenu:function(){return e(Hh.d.apply(void 0,arguments))}}})(RH),PH=(n("r/YP"),new x.b("channel_details")),MH=(m.b.string.isRequired,m.b.func,m.b.bool,m.b.func.isRequired,{collapse:d.a,featureM11nChannelDetails:!1}),DH=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.focus=n.focus.bind(n),n.sectionContainerRef=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"focus",value:function(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}},{key:"render",value:function(){var e=this.props,t=e.featureM11nChannelDetails,n=e.channelId,a=e.collapse,r=e.expandSharedFilesSection;if(!t||!n)return null;var i=h.a.createElement(zq,{iconType:"all-files",sectionTitle:PH.t("Shared Files")});return h.a.createElement(Kq,{ref:this.sectionContainerRef,sectionId:"shared_files",expand:r,collapse:a,header:i,sectionClasses:"p-channel_details__shared_files_section",key:$j.d+"_DETAILS_SECTION"},h.a.createElement(AH,{channelId:n}))}}]),t}(p.Component);DH.displayName="SharedFilesSection";DH.defaultProps=MH;var xH=Object(_.b)(function(e){return{featureM11nChannelDetails:Object(y.i)(e,"feature_m11n_channel_details")}},function(e){return{expandSharedFilesSection:function(){return e(Object(Ke.e)({sectionId:"shared_files"}))}}},null,{withRef:!0})(DH),LH=(n("o2sZ"),new x.b("channel_details")),FH=(m.b.string.isRequired,m.b.func.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.string,m.b.string,m.b.string,m.b.object.isRequired,m.b.func,m.b.func,m.b.func.isRequired,{desktopSetting:void 0,mobileSetting:void 0,notificationDisabledType:null,openChannelNotificationPrefsModal:d.a,openPrefsModal:d.a}),BH=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["handleEditPreferencesClick","focus"]),n.sectionContainerRef=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"getDisabledNotificationsText",value:function(){var e=this,t=LH.t("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.",{fallbackHash:"1a4db9df0870ea9d3249727659a462c79ca89790",fallbackHashNs:"prefs"}),n=LH.rt("You have not yet allowed desktop notifications. Open the <button>Preferences Dialog</button> and follow the instructions to set them up.",{fallbackHash:"19c9da8051d592482b03309bbfcae4f052791067",fallbackHashNs:"prefs"},function(t){var n=t.key,a=t.text;return h.a.createElement(M.a,{onClick:e.props.openPrefsModal,key:n},a)}),a=LH.rt("Your browser does not support desktop notifications. <a>Try using our app instead.</a>",{fallbackHash:"38d4c3b2088ba1759fed9615fb958c7a90fbfb4b",fallbackHashNs:"prefs"},function(e){var t=e.key,n=e.text;return h.a.createElement(a_.a,{target:"_blank",key:t,href:"/downloads"},n)});switch(this.props.notificationDisabledType){case"not_allowed":return t;case"not_yet_allowed":return n;case"impossible":return a;default:return null}}},{key:"focus",value:function(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}},{key:"handleEditPreferencesClick",value:function(){var e=this.props.channelId;this.props.openChannelNotificationPrefsModal({channelId:e})}},{key:"renderHeader",value:function(){return this.props.featureM11nChannelDetails?h.a.createElement(zq,{iconType:"bell-o",sectionTitle:LH.rt("Notification Preferences")}):null}},{key:"renderStandardNotificationPrefText",value:function(e){var t=LH.t("All new messages",{fallbackHash:"9b6c1f2aedfe68e695cee3b82fa493c77114ede1",fallbackHashNs:"channel_pages"}),n=LH.t("Mentions & keywords",{fallbackHash:"92a10c6a3a84448a8c091d6947909b8a0335f595",fallbackHashNs:"channel_pages"}),a=LH.t("Nothing",{fallbackHash:"4481948392a8846400c954e77f58d76cdaa73963",fallbackHashNs:"channel_pages"});switch(e){case"everything":return t;case"mentions_dms":return n;case"nothing":return a;default:return null}}},{key:"renderDesktopNotificationText",value:function(){var e=this.props,t=e.notificationsAllowed,n=e.notificationDisabledType;return!t&&n?h.a.createElement("div",{className:"p-channel_details__notification_prefs_section__notification_warning"},this.getDisabledNotificationsText()):this.renderStandardNotificationPrefText(this.props.desktopSetting)}},{key:"renderCurrentNotificationPreferences",value:function(){return this.props.isMuted?h.a.createElement("div",null,h.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref bold"},LH.t("This channel is muted",{fallbackHash:"cc1784b8b4d0f3f15c487e68c7ace48ce5d7dd7d",fallbackHashNs:"channel_pages"}))):h.a.createElement("div",null,h.a.createElement("div",null,h.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref_label bold"},LH.t("Desktop Notifications",{fallbackHash:"53a3505aad0eab70ba3cff84cca6f5cdcf527c25",fallbackHashNs:"channel_pages"})),h.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref"},this.renderDesktopNotificationText())),h.a.createElement("div",null,h.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref_label bold"},LH.t("Mobile Notifications",{fallbackHash:"872d1b49f956b8bd1bdd73f7e9a1595f7de35ab2",fallbackHashNs:"channel_pages"})),h.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref"},this.renderStandardNotificationPrefText(this.props.mobileSetting))))}},{key:"render",value:function(){var e=this.props,t=e.featureM11nChannelDetails,n=e.channel,a=e.collapse,r=e.expandNotificationPrefsSection;return Object(he.eb)(n)||!t?null:h.a.createElement(Kq,{ref:this.sectionContainerRef,sectionId:"notification_prefs",expand:r,collapse:a,header:this.renderHeader(),sectionClasses:"p-channel_details__notification_prefs_section",key:"notification_prefs"},this.renderCurrentNotificationPreferences(),h.a.createElement(Re.d,{className:"margin_top_50",onClick:this.handleEditPreferencesClick,type:"outline"},LH.t("Edit Preferences",{fallbackHash:"4cefcb344f3354ae347d4d8d62e31331cb72312f",fallbackHashNs:"channel_details"})))}}]),t}(p.Component);BH.displayName="NotificationPrefsSection",BH.defaultProps=FH;var qH=Object(_.b)(function(e,t){var n=t.channelId,a=Object(re.d)(e,n),r=void 0,i=void 0;Object(he.eb)(a)||(r=Object(R.g)(e,n),i=Object(R.h)(e,n));var o=Object(R.m)().notificationDisabledType;return{featureM11nChannelDetails:Object(y.i)(e,"feature_m11n_channel_details"),isMuted:Object(wn.c)(e,n),notificationsAllowed:Object(R.f)(),notificationDisabledType:o,desktopSetting:r,mobileSetting:i,channel:a}},function(e){return{openChannelNotificationPrefsModal:function(){return e(ge.a.apply(void 0,arguments))},openPrefsModal:function(){return e(Object(fe.a)())},expandNotificationPrefsSection:function(){return e(Object(Ke.e)({sectionId:"notification_prefs"}))}}},null,{withRef:!0})(BH),UH=n("whT2"),HH=(n("dutO"),new x.b("channel_details")),GH=(m.b.string,m.b.object,m.b.bool,m.b.bool.isRequired,{memberId:void 0,member:void 0,time24:!1}),WH=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.focus=n.focus.bind(n),n.memberRef=h.a.createRef(),n.state={tzUpdateCounter:0},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.scheduleNextTzUpdate()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.tzUpdater)}},{key:"focus",value:function(){var e=this.memberRef.current;e&&e.focus()}},{key:"scheduleNextTzUpdate",value:function(){var e=this,t=60-(new Date).getSeconds();t<5&&(t=5),this.tzUpdater=setTimeout(function(){e.setState(function(e){return{tzUpdateCounter:e.tzUpdateCounter+1}}),e.scheduleNextTzUpdate()},1e3*t)}},{key:"render",value:function(){var e=this.props,t=e.memberId,n=e.member,a=e.time24,r=e.featureM11nChannelDetails;if(!t||!n)return null;if(!r)return null;var i=Object(ne.K)(n),o=void 0;if(i&&!Object(ne.cb)(n)){var s=Object(UH.a)(Date.now(),{timeZone:i,timeZoneOffset:Object(ne.L)(n),do24hrTime:a});o=h.a.createElement("div",{className:"p-channel_details__dm_section__tz_section"},h.a.createElement("span",{className:"p-channel_details__dm_section__tz_label"},HH.t("Time zone"))," ",HH.t("{local_time} local time",{local_time:s}))}return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"p-channel_details__dm_section"},h.a.createElement(NU.a,{ref:this.memberRef,id:t,size:"large",showStatus:!Object(ne.Ab)(n),showPresence:!Object(ne.Ab)(n)})),o)}}]),t}(p.PureComponent);WH.displayName="DmSection",WH.defaultProps=GH;var KH=Object(_.b)(function(e,t){var n=t.channel,a=Object(he.G)(n);return{memberId:a,member:Object(Ue.c)(e,a),time24:Object(ue.h)(e,"time24"),featureM11nChannelDetails:Object(y.i)(e,"feature_m11n_channel_details")}},null,null,{withRef:!0})(WH),VH=(n("qTUc"),new x.b("channel_details")),zH={info:"detailsSectionRef",highlights:"highlightSectionRef",pins:"pinnedSectionRef",members:"memberListSectionRef",apps:"appsSectionRef",shared_files:"sharedFilesSectionRef",notification_prefs:"notificationSectionRef"},YH=(m.b.object,m.b.bool.isRequired,m.b.bool.isRequired,m.b.func.isRequired,m.b.string.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.focus=n.focus.bind(n),n.findFirstSectionRefName=n.findFirstSectionRefName.bind(n),n.detailsSectionRef=h.a.createRef(),n.highlightSectionRef=h.a.createRef(),n.pinnedSectionRef=h.a.createRef(),n.memberListSectionRef=h.a.createRef(),n.appsSectionRef=h.a.createRef(),n.sharedFilesSectionRef=h.a.createRef(),n.notificationSectionRef=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"findFirstSectionRefName",value:function(){var e=this;return zH[this.props.expandedSectionId]||Object.keys(zH).reduce(function(t,n){if(null!==t)return t;var a=zH[n];return e[a].current?a:null},null)}},{key:"focus",value:function(){var e=this.findFirstSectionRefName(),t=this[e]&&this[e].current;if(t){var n=t.getWrappedInstance();n&&n.focus()}}},{key:"renderTitle",value:function(){var e=this.props,t=e.channel,n=e.featureM11nChannelDetails,a=e.isImOrMpim;return n?a?VH.t("About this conversation"):VH.rt("About {channelName}",{channelName:h.a.createElement(pe.a,{channel:t,inline:!0})}):null}},{key:"renderBody",value:function(){var e=this,t=this.props,n=t.channel,a=t.collapse,r=t.isImOrMpim;return h.a.createElement(Nu.a,null,function(t){var i=t.width,o=t.height;return h.a.createElement(e_.b,{width:i,height:o},h.a.createElement(p.Fragment,null,Object(he.eb)(n)&&h.a.createElement(KH,{ref:e.detailsSectionRef,channel:n}),!r&&h.a.createElement(GU,{ref:e.detailsSectionRef,channel:n,collapse:a}),!r&&h.a.createElement(eH,{ref:e.highlightSectionRef,channel:n,collapse:a}),h.a.createElement(iU,{ref:e.pinnedSectionRef,channelId:n.id,collapse:a}),!Object(he.eb)(n)&&h.a.createElement(mH,{ref:e.memberListSectionRef,channelId:n.id,collapse:a}),h.a.createElement(wH,{ref:e.appsSectionRef,channelId:n.id,collapse:a}),h.a.createElement(xH,{ref:e.sharedFilesSectionRef,channelId:n.id,collapse:a}),h.a.createElement(qH,{ref:e.notificationSectionRef,channelId:n.id,collapse:a})))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.channel,a=t.featureM11nChannelDetails;if(!n||Object(he.Jb)(n)||!a)return null;var r=this.renderTitle();return h.a.createElement(qM.b,{className:"p-channel_details",focus:this.focus,title:r,renderBody:function(){return e.renderBody()},viewId:hu.y.CHANNEL_DETAILS_FLEXPANE,kbNavOrder:Object(Me.a)()?void 0:4.5})}}]),t}(p.PureComponent));YH.displayName="ChannelDetails",YH.defaultProps={channel:null};var QH=Object(_.b)(function(e){var t=Object(k.a)(e),n=Object(re.d)(e,t),a=Object(O.c)(e)[0];return{featureM11nChannelDetails:Object(y.i)(e,"feature_m11n_channel_details"),isImOrMpim:!(!Object(he.eb)(n)&&!Object(he.lb)(n)),expandedSectionId:a,channel:n}},function(e){return{collapse:function(){return e(Object(Ke.e)())}}})(YH),JH=n("533h"),XH=(n("oP4J"),new x.b("calendar")),ZH=(m.b.bool,m.b.bool,m.b.bool,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"focus",value:function(){return null}},{key:"blur",value:function(){return null}},{key:"renderBody",value:function(){var e=this.props,t=e.isLoading;return e.featureCalendarSimpleAgendaView?t?h.a.createElement("div",{className:"p-calendar_flexpane__loading"},XH.t("Loading\u2026")):h.a.createElement("div",null," This is user calendar "):null}},{key:"render",value:function(){var e=this.props,t=e.featureCalendarSimpleAgendaView,n=e.isGlobalNavEnabled;return t?h.a.createElement(vd.a,{component:this,order:4},h.a.createElement(rs.a,{id:hu.y.ACTIVITY_FLEXPANE},h.a.createElement("div",{className:"p-calendar_flexpane"},!n&&h.a.createElement(JH.a,null,h.a.createElement(GC.a,{size:"medium"}),h.a.createElement("div",null,XH.t("Your calendar"))),this.renderBody()))):null}}]),t}(h.a.Component));ZH.displayName="CalendarFlexpane",ZH.defaultProps={featureCalendarSimpleAgendaView:!0,isGlobalNavEnabled:!1,isLoading:!0};var $H=Object(_.b)(function(e){return{featureCalendarSimpleAgendaView:Object(y.i)(e,"feature_calendar_simple_agenda_view")}},{})(ZH);var eG=n("QLyv"),tG=n("Lnf+"),nG=(n("nfA0"),new x.b("downloads")),aG=(m.b.string.isRequired,m.b.string,m.b.string,m.b.number,m.b.number,m.b.string,m.b.string,m.b.string,m.b.string,m.b.number,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.func,m.b.func,{downloadPath:"",downloadState:"",startTime:0,progress:0,fileName:"",imageSource:"",fileType:"",prettyType:"",fileSize:0,highlight:!1,showDownload:d.a,cancelDownload:d.a,retryDownload:d.a,removeDownload:d.a,pauseDownload:d.a,resumeDownload:d.a,hasKeyboardFocusWithin:!1,onFocus:d.a,onBlur:d.a}),rG=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["onShowClick","onCancel","onRetry","onRemove","onPause","onResume"]),n}return u()(t,e),o()(t,null,[{key:"getEstimatedTimeRemaining",value:function(e){var t=e.downloadState,n=e.progress,a=e.startTime;if(!["progressing","paused"].includes(t))return"";if(n>=1)return"";if(-1===n)return"";if(!n)return"";var r=Date.now()-a,i=r*(1/n)-r;return nG.t("{duration} remaining",{duration:eG.a.duration(i,"milliseconds").humanize()})}}]),o()(t,[{key:"onShowClick",value:function(e){e.stopPropagation(),this.props.showDownload(this.props.id)}},{key:"onCancel",value:function(e){e.stopPropagation(),this.props.cancelDownload(this.props.id)}},{key:"onRetry",value:function(e){e.stopPropagation(),this.props.retryDownload(this.props.id)}},{key:"onRemove",value:function(e){e.stopPropagation(),this.props.removeDownload(this.props.id)}},{key:"onPause",value:function(e){e.stopPropagation(),this.props.pauseDownload(this.props.id)}},{key:"onResume",value:function(e){e.stopPropagation(),this.props.resumeDownload(this.props.id)}},{key:"renderDownloadIcon",value:function(){var e=this.props,t=e.fileType,n=e.imageSource,a=function(){return h.a.createElement(se.b,{type:t,file:!0})};return n?h.a.createElement(Yw.a,{src:n,renderPending:a,width:"32",height:"32",className:"p-download_item__image",alt:""}):a()}},{key:"renderExtraActions",value:function(){var e="paused"===this.props.downloadState?h.a.createElement(M.a,{className:"p-download_item__link--resume",onClick:this.onResume},nG.t("Resume")):h.a.createElement(M.a,{className:"p-download_item__link--pause",onClick:this.onPause},nG.t("Pause"));return h.a.createElement("span",{className:"p-download_item__extra_actions"},e,h.a.createElement(M.a,{className:"p-download_item__link--cancel",onClick:this.onCancel},nG.t("Cancel")))}},{key:"render",value:function(){var e=this.props,n=e.downloadPath,a=e.downloadState,r=e.fileName,i=e.imageSource,o=e.fileType,s=e.prettyType,l=e.fileSize,c=e.highlight,u=e.hasKeyboardFocusWithin,d=Math.max(this.props.progress,0),p=r||n.split(/\/|\\/).reverse()[0],m="completed"===a?100:100*d,b=["progressing","paused"].includes(a)&&d?d*l:void 0,_=void 0;_=b?nG.t("{partialSize} of {size} {prettyType}",{partialSize:Object(tG.a)(b,{decimalPlaces:2}),size:Object(tG.a)(l),prettyType:s}):Object(tG.a)(l)+" "+s;var g=t.getEstimatedTimeRemaining(this.props),v=f()("p-download_item",a,{highlight:c,"p-download_item--focus-within":u}),y=f()({"p-download_item__action_icon":!0,"p-download_item__action_icon--image":!!i,fileType:o}),k=Object(qe.p)()?nG.t("Show in Finder"):nG.t("Open containing folder"),O={width:m+"%"},j=nG.t("Remove {file}",{file:p,fallbackHash:"e963907dac5cd5c017869b4c96c18021c9bd058b",fallbackHashNs:"admin"});return h.a.createElement("div",{role:"presentation",className:v,onFocus:this.props.onFocus,onBlur:this.props.onBlur},h.a.createElement("div",{className:"p-download_item__icon_container"},this.renderDownloadIcon(),h.a.createElement(se.b,{className:y})),h.a.createElement("div",{className:"p-download_item__container"},h.a.createElement("div",{className:"p-download_item__name_row"},h.a.createElement("span",{className:"p-download_item__name overflow_ellipsis"},p),this.renderExtraActions()),h.a.createElement("div",{className:"p-download_item__size_row"},h.a.createElement("span",{className:"p-download_item__size overflow_ellipsis"},h.a.createElement("span",{className:"p-download_item__partial_size"},_)),h.a.createElement("span",{className:"p-download_item__actions"},h.a.createElement(M.a,{className:"p-download_item__link--show",onClick:this.onShowClick},k),h.a.createElement(M.a,{className:"p-download_item__link--retry",onClick:this.onRetry},nG.t("Retry"))),h.a.createElement("span",{className:"p-download_item__time_remaining"},g)),h.a.createElement("div",{className:"p-download_item__progress_row progress_bar"},h.a.createElement("div",{className:"p-download_item__progress progress_bar_progress",style:O}))),h.a.createElement(Nd.a,{"aria-label":j,icon:"times_circle",className:"p-download_item__link--remove",onClick:this.onRemove}))}}]),t}(h.a.Component);rG.displayName="DownloadItem",rG.defaultProps=aG;var iG={showDownload:C.q,cancelDownload:C.a,retryDownload:C.o,removeDownload:C.m,pauseDownload:C.l,resumeDownload:C.n},oG=Object(sr.a)(Object(_.b)(null,iG)(rG)),sG=new x.b("page_client"),lG=(m.b.arrayOf(m.b.object.isRequired),m.b.func,m.b.func,m.b.func,{items:void 0,onItemTabWithin:d.a,openDownload:d.a,retryDownload:d.a}),cG=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["renderItem","onFileClick","focus"]),n.list=h.a.createRef(),n}return u()(t,e),o()(t,[{key:"onFileClick",value:function(e){var t=e.id,n=this.getItemKeys(),a=Object(ff.a)(n,t),r=this.props.items[a];if(r){var i=r.downloadState;"completed"!==i?"cancelled"!==i&&"interrupted"!==i||this.props.retryDownload(t):this.props.openDownload(t)}}},{key:"getItemKeys",value:function(){return this.props.items.map(function(e){return e.id})}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"renderItem",value:function(e){var t=this.props.items[e];return h.a.createElement(oG,Z()({key:t.id},t))}},{key:"render",value:function(){var e=this,t=this.getItemKeys();return h.a.createElement(Nu.a,null,function(n){var a=n.width,r=n.height;return h.a.createElement(JB.a,{ref:e.list,width:a,height:r,keys:t,rowRenderer:e.renderItem,animateOnScroll:!1,ariaLabel:sG.t("Downloads"),onItemTabWithin:e.props.onItemTabWithin,onItemClick:e.onFileClick})})}}]),t}(p.PureComponent);cG.displayName="DownloadsList",cG.defaultProps=lG;var uG={openDownload:C.k,retryDownload:C.o},dG=Object(_.b)(null,uG)(function(e){var t=e.forwardedRef,n=Be()(e,["forwardedRef"]);return h.a.createElement(cG,Z()({ref:t},n))}),pG=h.a.forwardRef(function(e,t){return h.a.createElement(dG,Z()({forwardedRef:t},e))}),hG=(n("erm0"),m.b.array.isRequired,m.b.array.isRequired,m.b.func.isRequired,m.b.bool,m.b.func,{clearDownloads:d.a,isShowing:!0}),mG=new x.b("page_client"),bG=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(T.a)(n,["renderBody","focus","onItemTabWithin"]),n.list=h.a.createRef(),n.flexpane=h.a.createRef(),n}return u()(t,e),o()(t,null,[{key:"renderClearAllButton",value:function(e){return h.a.createElement(Re.c,{className:"p-downloads__clear_all",onClick:e},mG.t("Clear all"))}}]),o()(t,[{key:"componentWillUpdate",value:function(e){var t=e.fileIdsToFetch;this.props.fileIdsToFetch!==t&&0!==t.length&&(Object(Ny.a)(this.props.fileIdsToFetch,t)||this.props.fetchFileInfo({ids:t}))}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"renderBody",value:function(){var e=this.props,t=e.isShowing,n=e.downloads;return t?0===n.length?null:h.a.createElement(pG,{ref:this.list,ariaLabel:mG.t("Downloads"),items:n,onItemTabWithin:this.onItemTabWithin}):null}},{key:"renderTitle",value:function(){var e=this.props,n=e.downloads,a=e.clearDownloads,r=n.length>=2?t.renderClearAllButton(a):null;return h.a.createElement("div",{className:"p-downloads__header_items"},h.a.createElement("span",null,mG.t("Downloads")),r)}},{key:"render",value:function(){return h.a.createElement(qM.b,{isEmpty:Object(sa.a)(this.props.downloads),ref:this.flexpane,focus:this.focus,className:"p-downloads_list",title:this.renderTitle(),renderBody:this.renderBody,viewId:"downloads-list",kbNavOrder:Object(Me.a)()?void 0:6})}}]),t}(h.a.Component);bG.displayName="DownloadsFlexpane",bG.defaultProps=hG;var fG=bG,_G=function(e){return e.files},gG=function(e,t){return t.startTime-e.startTime},vG=Object(Fb.createSelector)([C.g,_G],function(e,t){return e.map(function(e){return function(e,t){var n=t||Object(Oo.e)(e.id)||{};return Z()({},e,{fileName:n.name,imageSource:n.thumb_160||n.thumb_80,fileType:n.filetype,prettyType:n.pretty_type,fileSize:n.size})}(e,t[e.id])}).sort(gG)}),yG=Object(Fb.createSelector)([C.f,_G],function(e,t){return e.filter(function(e){return!t[e]})}),kG={fetchFileInfo:C.d,clearDownloads:C.b},OG=Object(_.b)(function(e){var t=Object(O.h)(e);return{downloads:vG(e),fileIdsToFetch:yG(e),isShowing:"downloads"===t}},kG)(fG),jG=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.params;if(!t)return null;switch(t){case"files":if(n&&Object(XP.a)(n[0]))return h.a.createElement(XM,{fileId:n[0]});var a=n&&n[0]||"all",r=n&&n[1]||"all";return h.a.createElement(bD,{user:a,filetype:r});case"downloads":return h.a.createElement(OG,null);case"thread":if(!n)return null;var i=Object(Ho.a)(n[0]),o=i.channelId,s=i.threadTs,l="threads-flexpane-"+o+"-"+s;return h.a.createElement(pB,{threadTs:s,channelId:o,key:l,serializationKey:l});case"activity":return h.a.createElement(KB,null);case"directory":return h.a.createElement(ix,null);case"user_profile":return n&&Object(Bb.a)(n[0])?h.a.createElement(Sx,{memberId:n[0]}):null;case"app_profile":var c=n[0];return n&&Object($P.a)(c)?h.a.createElement(aL,{serviceId:c}):n&&Object(eM.a)(c)?h.a.createElement(aL,{appId:c}):null;case"user_groups":return n&&Object(ZP.a)(n[0])?h.a.createElement(EL,{groupId:n[0]}):h.a.createElement(TF,null);case"whats_new":return h.a.createElement(cq,null);case"starred_items":return h.a.createElement(Uq,null);case"shortcuts":return h.a.createElement(Hq.b,null);case"details":return h.a.createElement(QH,null);case"calendar":return h.a.createElement($H,null);default:throw new Error(t+" flexpane is not implemented!")}}}]),t}(p.PureComponent);jG.displayName="SecondaryView";var CG=jG;jG.defaultProps={id:null,params:null};n("tEVE"),m.b.string.isRequired,m.b.string,m.b.oneOf(j.a),m.b.bool,m.b.bool,m.b.bool,m.b.arrayOf(m.b.string),m.b.func,m.b.bool,m.b.object,m.b.bool,m.b.bool,m.b.bool,m.b.func,m.b.func,m.b.bool,m.b.bool,m.b.bool,m.b.bool;var EG={primaryView:void 0,secondaryView:void 0,isPage:!1,isAppSpace:!1,isAppSpaceOpen:!1,flexParams:void 0,renderSonicMenu:void 0,featureModernizeInvites:!1,featureClassicNav:!1,featureModernizeChannelCreateModal:!1,openInviteModal:d.a,openChannelCreateModal:d.a,usePrimarySearch:!1,featureReactAllUnreads:!1,featurePages:!1,isWindowFrameless:!1,inCreatorOnboarding:!1,clogger:void 0},wG=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={locale:Object(mu.a)({teamId:n.props.teamId})||x.b.DEFAULT_LOCALE},n.setLocaleState=n.setLocaleState.bind(n),n.onInviteClick=n.onInviteClick.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){Object(mu.b)({teamId:this.props.teamId,fn:this.setLocaleState})}},{key:"componentWillUnmount",value:function(){Object(mu.d)({teamId:this.props.teamId})}},{key:"onInviteClick",value:function(){this.props.featureModernizeInvites&&(this.props.clogger.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"invite_people"}}}}),this.props.openInviteModal())}},{key:"setLocaleState",value:function(e){var t=e.locale;this.setState(function(e){return e.locale===t?e:{locale:t}})}},{key:"render",value:function(){var e=Object(g.getStoreInstanceByTeamId)(this.props.teamId),t=f()("p-workspace",{"p-workspace--context-pane-collapsed":!this.props.secondaryView,"p-workspace--context-pane-expanded":this.props.secondaryView,"p-workspace--classic-nav":this.props.featureClassicNav,"p-workspace--classic-nav--frameless":this.props.isWindowFrameless,"p-workspace--primary-search":this.props.usePrimarySearch&&"Vsearch"===this.props.primaryView,"p-workspace--in-creator-onboarding":this.props.inCreatorOnboarding}),n=this.props.featureModernizeInvites?this.onInviteClick:d.a,a=this.props.featureModernizeChannelCreateModal?this.props.openChannelCreateModal:d.a,r=this.props.featureClassicNav?h.a.createElement(nb,{renderSonicMenu:this.props.renderSonicMenu}):h.a.createElement(J.c,{renderSonicMenu:this.props.renderSonicMenu}),i=!this.props.featureClassicNav&&h.a.createElement("header",{className:"p-workspace__sidebar_header"},h.a.createElement(Tf,null)),o=!this.props.featureClassicNav&&h.a.createElement("header",{className:"p-workspace__primary_view_header"},h.a.createElement(BC,null)),s=!this.props.featureClassicNav&&h.a.createElement("header",{className:"p-workspace__secondary_view_header"},h.a.createElement(cw,null));return h.a.createElement(_.a,{store:e,key:this.state.locale},h.a.createElement(LP,null,h.a.createElement(Hv.a,null),h.a.createElement(qR.a,null,h.a.createElement(XR,{store:e}),h.a.createElement(ZR.a,{store:e})),h.a.createElement(VA.a,{commands:IP}),h.a.createElement("div",{className:t},h.a.createElement("div",{className:"p-workspace__banner"},h.a.createElement(H,null),h.a.createElement(Q,null)),h.a.createElement("div",{className:"p-workspace__top_nav"},h.a.createElement(qR.b,null,r)),h.a.createElement(qR.b,null,h.a.createElement("div",{className:"p-workspace__sidebar"},i,h.a.createElement("div",{className:"p-workspace__channel_sidebar","data-qa":"ws_channel_sidebar"},h.a.createElement(Zv,{onInviteClick:n,onCreateChannelClick:a})))),h.a.createElement(qR.b,{id:this.props.primaryView},h.a.createElement("div",{className:"p-workspace__primary_view"},o,h.a.createElement("div",{className:"p-workspace__primary_view_contents"},"Vall_unreads"===this.props.primaryView&&this.props.featureReactAllUnreads&&!this.props.featurePages&&h.a.createElement("div",{className:"p-workspace__primary_view_body"},h.a.createElement(rh,null)),"Vall_threads"===this.props.primaryView&&h.a.createElement("div",{className:"p-workspace__primary_view_body"},h.a.createElement(SR,null)),this.props.usePrimarySearch&&"Vsearch"===this.props.primaryView&&h.a.createElement("div",{className:"p-workspace__primary_view_body"},h.a.createElement($R.a,null)),this.props.isPage&&h.a.createElement(nA,null),Object(Go.a)(this.props.primaryView)&&(!this.props.isAppSpace||!this.props.isAppSpaceOpen)&&h.a.createElement(BR,{location:xR.MESSAGE_PANE,channelId:this.props.primaryView,role:this.props.isAppSpace?"tabpanel":null},h.a.createElement("div",{className:"p-workspace__primary_view_body"},h.a.createElement(mj,{serializationKey:"message-pane"})),h.a.createElement("footer",{className:"p-workspace__primary_view_footer"},h.a.createElement(sN,null))),Object(Go.a)(this.props.primaryView)&&this.props.isAppSpace&&this.props.isAppSpaceOpen&&h.a.createElement("div",{className:"p-workspace__primary_view_body p-workspace__primary_view_body--with-scroll"},h.a.createElement(KA,null))))),h.a.createElement(qR.b,{id:this.props.secondaryView},h.a.createElement("div",{className:"p-workspace__secondary_view"},s,h.a.createElement("div",{className:"p-workspace__secondary_view_contents"},h.a.createElement(CG,{id:this.props.secondaryView,params:this.props.flexParams}))))),h.a.createElement(WR,null),h.a.createElement(bj.a,null),h.a.createElement(pt.a,null),!Object(qe.u)()&&h.a.createElement(KP,null),h.a.createElement(JP,null)))}}]),t}(p.PureComponent);wG.displayName="Workspace",wG.defaultProps=EG;t.a=Object(_.b)(function(e){var t=Object(k.a)(e),n=Th(e,t),a=Object(y.i)(e,"feature_pages")&&Object(Sh.e)(e,t),r=Object(O.c)(e);return{teamId:Object(v.b)(e),primaryView:t,secondaryView:Object(O.h)(e),isPage:a,isAppSpace:n,isAppSpaceOpen:Object(S.n)(e),flexParams:r&&r.length?r:g_.a,featureModernizeInvites:Object(y.i)(e,"feature_modernize_invites"),featureClassicNav:Object(y.i)(e,"feature_classic_nav"),usePrimarySearch:Object(I.a)(e),featureReactAllUnreads:Object(y.i)(e,"feature_react_all_unreads"),featureModernizeChannelCreateModal:Object(y.i)(e,"feature_modernize_channel_create_modal"),featurePages:Object(y.i)(e,"feature_pages"),isWindowFrameless:Object(C.j)(e),inCreatorOnboarding:Object(Ji.d)(e),clogger:Object(ye.a)({state:e})}},function(e){return{openInviteModal:function(){return e(E.a.apply(void 0,arguments))},openChannelCreateModal:function(){return e(w.a.apply(void 0,arguments))}}})(wG)},m0k8:function(e,t,n){},mNhP:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return u});var a=n("aK/h"),r=n("XfeM"),i=n("bYYE"),o=n("H9m0"),s=n("VjCB"),l=Object(r.b)("Handles window focus change events in the client",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).isFocused,a=t();if(Object(i.g)(a)!==n){e(Object(i.l)(n));var r=t(),l=Object(i.c)(r),c=Object(i.k)(l);if(e(Object(s.a)(c)),n){var u=Object(o.a)();e(Object(s.a)(u))}}});l.propTypes={isFocused:a.b.bool.isRequired};var c=Object(r.b)("Handles the window beforeunload event in the client",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).isUnloading,a=Object(i.j)(n);e(a),e(Object(s.a)(a))});c.propTypes={isUnloading:a.b.bool.isRequired};var u=Object(r.b)("Handles tickling the sockets on mouse down",function(e){var t=Object(o.a)();e(Object(s.a)(t))})},mqzt:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"b",function(){return p});var a=n("wd/R"),r=n.n(a),i=n("VyaM"),o=n("vwQE"),s=n("82mD"),l=new(n("nNoG").b)("do_not_disturb"),c=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).currentTime,n=void 0===t?r()().unix():t,a=Object(i.a)(n),s=Object(i.a)(e);return Math.ceil(Object(o.a)(s,a))},u=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).time,t=void 0===e?"09:00":e,n=r()().add(1,"days").format("YYYY-MM-DD"),a=r()(n+" "+t).unix();return c(a)},d=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).time,t=void 0===e?"09:00":e,n=r()().add(1,"week").startOf("isoWeek").format("YYYY-MM-DD"),a=r()(n+" "+t).unix();return c(a)},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.do24hrTime,a=void 0!==n&&n,i=t.today,o=void 0===i?r()().format("YYYY-MM-DD"):i,c=t.tomorrow,u=void 0===c?r()().add(1,"day").format("YYYY-MM-DD"):c;if(!e)return"";var d=Object(s.p)(e,{do24hrTime:a}),p=Object(s.m)(e,{omitTime:!0});return p===o?l.t("Notifications paused until {time}",{time:d}):p===u?l.t("Notifications paused until tomorrow at {time}",{time:d}):l.t("Notifications paused until {expires}",{expires:Object(s.d)(e,"{status_expiration}",{do24hrTime:a})})}},nTMe:function(e,t,n){},nfA0:function(e,t,n){},nvtG:function(e,t,n){e.exports=n.p+"they_left_call_v2-45185be.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},o2sZ:function(e,t,n){},o7tI:function(e,t,n){e.exports=n.p+"here_you_go_lighter-73d86db.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},"oE+f":function(e,t,n){},oHBb:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("Cfkr");t.a=r.a.createContext(new i.a)},oP4J:function(e,t,n){},"om+M":function(e,t,n){"use strict";var a=n("XfeM");t.a=function(e,t){var n=Object(a.b)(e,t,"Fetcher");return n.isFetcherCreator=!0,n}},oq3d:function(e,t,n){},oqAd:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("aK/h"),p=n("kxpR"),h=n.n(p),m=n("XHGt"),b=n("TSYQ"),f=n.n(b),_=n("zfae"),g=n("HO/Y"),v=n("K7CU"),y=n("nNoG"),k=n("PM8X"),O=n("yt6e"),j=n("Wofk"),C=n("ifKl"),E=n("XLFM"),w=n("od5y"),S=n("RAhH"),I=n("wMtF"),T=new y.b("emoji"),N=(d.b.func.isRequired,d.b.func,d.b.bool,{onEmojiSelected:C.a,featureSonicEmoji:!1});function R(e){var t=e.onClick,n=e.onEmojiSelected,a=e.featureSonicEmoji,r=h.a.createElement(S.c,{tip:T.t("Add reaction..."),delay:S.a},h.a.createElement(E.c,{className:"c-reaction_add",onClick:t,"aria-label":T.t("Add reaction..."),"data-qa":"add_reaction_button"},h.a.createElement("div",{className:"c-reaction_add__container"},h.a.createElement(w.b,{type:"small-reaction-bg",className:"c-reaction_add__icon c-reaction_add__icon--bg","aria-hidden":!0}),h.a.createElement(w.b,{type:"small-reaction",className:"c-reaction_add__icon c-reaction_add__icon--fg","aria-hidden":!0}))));return a?h.a.createElement(I.a,{onEmojiSelected:n,showHandyReactions:!0},r):r}R.defaultProps=N;n("LvkU");var A=new y.b("reactions"),P=(d.b.arrayOf(d.b.shape(j.b)),d.b.string,d.b.string,d.b.string,d.b.string,d.b.func.isRequired,d.b.bool,function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onAddReaction=e.onAddReaction.bind(e),e.onReactionClick=e.onReactionClick.bind(e),e.onReactionEmojiPickerSelected=e.onReactionEmojiPickerSelected.bind(e),e.onFocusEnter=e.onFocusEnter.bind(e),e.onFocusLeave=e.onFocusLeave.bind(e),e.state={hasKeyboardFocus:!1},e}return u()(t,e),o()(t,[{key:"onAddReaction",value:function(e){Object(k.a)({e:e,rxn_key:this.props.reactionKey})}},{key:"onReactionClick",value:function(e,t){var n=this.props.reactionKey;this.props.changeReactionFromUserAction({key:n,name:e,adding:!t})}},{key:"onReactionEmojiPickerSelected",value:function(e,t){this.onReactionClick(t)}},{key:"onFocusEnter",value:function(e){var t=e.relatedEvent;t&&"keydown"===t.type&&this.setState(function(){return{hasKeyboardFocus:!0}})}},{key:"onFocusLeave",value:function(){this.setState(function(){return{hasKeyboardFocus:!1}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.reactions,a=t.reactionKey,r=t.currentUser,i=t.emojiMode,o=t.featureSonicEmoji;if(!n||0===n.length)return null;var s=n.map(function(t){var n=t.count,o=t.name,s=t.users,l=t.url;return h.a.createElement(j.a,{name:o,count:n,users:s,url:l,currentUser:r,key:o,reactionKey:a,onClick:e.onReactionClick,emojiMode:i})}).concat(h.a.createElement(R,{onClick:this.onAddReaction,onEmojiSelected:this.onReactionEmojiPickerSelected,key:"reaction-add-button",featureSonicEmoji:o})),l=f()(this.props.className,"c-reaction_bar",{"c-reaction_bar--focus":this.state.hasKeyboardFocus}),c=A.t("Reactions",{note:"Screenreader: Label for blind users"});return h.a.createElement(O.a,{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},h.a.createElement("div",{className:l,role:"group","aria-label":c},s))}}]),t}(h.a.PureComponent));P.displayName="ReactionBar",P.defaultProps={reactions:null,reactionKey:null,currentUser:null,className:null,emojiMode:null,featureSonicEmoji:!1};var M={changeReactionFromUserAction:_.c},D=Object(m.b)(function(e,t){return{reactions:Object(_.f)(e,t.reactionKey),currentUser:Object(g.b)(e),emojiMode:Object(v.h)(e),featureSonicEmoji:Object(g.i)(e,"feature_sonic_emoji")}},M)(P);t.a=D},p6QP:function(e,t,n){},p9qW:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("g5qt"),r=n("vRZS"),i=n("Smdl"),o=n("KXvl"),s=function(e){var t=e.numTeams;return Object(i.a)()&&t>1&&(!Object(r.a)()||!!Object(a.cb)())&&Object(o.b)()}},pJ2S:function(e,t,n){"use strict";var a=n("hinm"),r=n.n(a);n.d(t,"a",function(){return r.a});var i=n("sB/w"),o=n.n(i);n.d(t,"b",function(){return o.a});var s=n("8oj5"),l=n.n(s);n.d(t,"c",function(){return l.a});var c=n("JLdd"),u=n.n(c);n.d(t,"k",function(){return u.a});var d=n("0Tme"),p=n.n(d);n.d(t,"j",function(){return p.a});var h=n("jUkS"),m=n.n(h);n.d(t,"o",function(){return m.a});var b=n("o7tI"),f=n.n(b);n.d(t,"d",function(){return f.a});var _=n("Ckp+"),g=n.n(_);n.d(t,"e",function(){return g.a});var v=n("gl8A"),y=n.n(v);n.d(t,"f",function(){return y.a});var k=n("B5am"),O=n.n(k);n.d(t,"p",function(){return O.a});var j=n("8laU"),C=n.n(j);n.d(t,"h",function(){return C.a});var E=n("ybzm"),w=n.n(E);n.d(t,"n",function(){return w.a});n("3K8Y");var S=n("TJOA"),I=n.n(S);n.d(t,"g",function(){return I.a});var T=n("jeUB"),N=n.n(T);n.d(t,"i",function(){return N.a});n("2QQA");var R=n("QwV3"),A=n.n(R);n.d(t,"l",function(){return A.a});var P=n("nvtG"),M=n.n(P);n.d(t,"m",function(){return M.a});var D=n("qny9"),x=n.n(D);n.d(t,"q",function(){return x.a});var L=n("w0jh"),F=n.n(L);n.d(t,"r",function(){return F.a});n("xU06")},pVvT:function(e,t,n){},pic6:function(e,t,n){},"plp+":function(e,t,n){},pmpI:function(e,t,n){},qGgp:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("jo6Y"),o=n.n(i),s=n("kxpR"),l=n.n(s),c=n("aK/h"),u=n("VMwU"),d=n("LpuC"),p=(n("RMJC"),function(e){return"linear-gradient(to right,rgba(0,0,0,0),#"+Object(u.j)(e,!1)+")"});c.b.string;function h(e){var t=e.color,n=o()(e,["color"]);return l.a.createElement("span",{className:"c-color_slider"},l.a.createElement("span",{className:"c-color_slider__opacity_checkerboard_track"}),l.a.createElement("span",{className:"c-color_slider__opacity_gradient_track",style:{background:p(t)}}),l.a.createElement("span",{className:"c-color_slider__opacity_right_fill_track",style:{background:"#"+t}}),l.a.createElement(d.a,r()({className:"c-color_slider__slider",min:0,max:1,step:.01},n)))}h.displayName="OpacitySlider",h.defaultProps={color:"FFFFFF"},t.a=h},qMiJ:function(e,t,n){},"qN/r":function(e,t,n){"use strict";var a=n("zmn3"),r=n("kxpR"),i=n.n(r),o=n("aK/h"),s=n("XfeM"),l=n("DTT0"),c=n("iCc5"),u=n.n(c),d=n("V7oC"),p=n.n(d),h=n("FYw3"),m=n.n(h),b=n("mRg0"),f=n.n(b),_=n("Z0Cl"),g=n("XHGt"),v=n("TSYQ"),y=n.n(v),k=n("tn36"),O=n("nNoG"),j=n("yHhI"),C=n("+Lv6"),E=n("HO/Y"),w=n("U/ze"),S=Object(w.b)(function(e){return e&&e.prefs&&e.prefs.uiState&&e.prefs.uiState.showOpenTransition}),I=Object(w.b)(function(e){return e&&e.prefs&&e.prefs.uiState&&e.prefs.uiState.lastActiveSection}),T=n("Ecd5"),N=n("D4L/"),R=n("5mKg"),A=n("KXvl"),P=n("rJQH"),M=n("aolG"),D=n("FXuT"),x=n("qAkX"),L=n("hbEN"),F=n("CpTu"),B=n("ifKl"),q=n("kOzZ"),U=n("VjHM"),H=n("FN36"),G=n("V/Wy"),W=n("AfrZ"),K=n("wuO/"),V=n("DtX9"),z=n("Fdc0"),Y=n("iqSe"),Q=n("7nxQ"),J=n("81nI"),X=n("9ToC"),Z=n("Fp75"),$=n("r31G"),ee=n("Smdl"),te=n("jUSB"),ne=n("n8ZX"),ae=n("jyiZ"),re=n("g5qt");var ie=n("rWF5"),oe=n("YEIV"),se=n.n(oe),le=n("0f2Y"),ce=n("O0RF"),ue=n("E4aE"),de=n("m1cH"),pe=n.n(de),he=n("fp5s"),me=n("nKoU"),be=n("mkut"),fe=n("1aDv"),_e=n("sk9p"),ge=n.n(_e),ve=n("3Hq1"),ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.time,n=e.time24;if(!t||Object(ve.a)(n))return"";if(n)return t;var a=t.split(":"),r=ge()(a,2),i=r[0],o=r[1],s=parseInt(i,10);return s>12?s-12+":"+o+" PM":s>9?t+" AM":0===s?"12:"+o+" AM":s+":"+o+" AM"},ke="every_day",Oe="weekdays",je="custom",Ce="all_day",Ee="disabled",we="partial",Se={DND_DAYS:"dnd_days",DND_ENABLED:"dnd_enabled",DND_START_HOUR:"dnd_start_hour",DND_END_HOUR:"dnd_end_hour",DND_BEFORE_MONDAY:"dnd_before_monday",DND_BEFORE_TUESDAY:"dnd_before_tuesday",DND_BEFORE_WEDNESDAY:"dnd_before_wednesday",DND_BEFORE_THURSDAY:"dnd_before_thursday",DND_BEFORE_FRIDAY:"dnd_before_friday",DND_BEFORE_SATURDAY:"dnd_before_saturday",DND_BEFORE_SUNDAY:"dnd_before_sunday",DND_AFTER_MONDAY:"dnd_after_monday",DND_AFTER_TUESDAY:"dnd_after_tuesday",DND_AFTER_WEDNESDAY:"dnd_after_wednesday",DND_AFTER_THURSDAY:"dnd_after_thursday",DND_AFTER_FRIDAY:"dnd_after_friday",DND_AFTER_SATURDAY:"dnd_after_saturday",DND_AFTER_SUNDAY:"dnd_after_sunday",DND_ENABLED_MONDAY:"dnd_enabled_monday",DND_ENABLED_TUESDAY:"dnd_enabled_tuesday",DND_ENABLED_WEDNESDAY:"dnd_enabled_wednesday",DND_ENABLED_THURSDAY:"dnd_enabled_thursday",DND_ENABLED_FRIDAY:"dnd_enabled_friday",DND_ENABLED_SATURDAY:"dnd_enabled_saturday",DND_ENABLED_SUNDAY:"dnd_enabled_sunday"},Ie=new O.b("prefs"),Te=(o.b.func.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.string,o.b.string,o.b.string,o.b.string,o.b.string,o.b.string,o.b.bool,{dndBaseBeforeTime:void 0,dndBaseAfterTime:void 0,dndBeforePref:void 0,dndBeforePrefValue:void 0,dndAfterPref:void 0,dndAfterPrefValue:void 0,featureGranularDnd:!1}),Ne=function(e){function t(){return u()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.featureGranularDnd,n=e.dndBaseBeforeTime,a=e.dndBaseAfterTime,r=e.dndBeforePref,o=e.dndAfterPref,s=e.dndBeforePrefValue,l=e.dndAfterPrefValue,c=e.time24,u=e.isDisabled,d=e.handleTimeChange;if(!t)return null;var p=Object(be.a)(fe.a).map(function(e){return{label:c?e:fe.a[e],value:e}}),h=[].concat(pe()(p),[{label:Ie.t("Midnight"),value:"23:59"}]),m=s||n,b=l||a,f=Object(me.a)(m,5,"0"),_=Object(me.a)(b,5,"0"),g=h.filter(function(e){return"23:59"!==e.value}),v=Object(F.a)(h,{value:f}),y=h.filter(function(e){return e.value>f}),k=Object(F.a)(h,{value:_}),O=void 0,j=void 0;return v||(O=ye({time:f,time24:c})),k||(j=ye({time:_,time24:c})),i.a.createElement("div",{className:"p-dnd_preferences__time_select_wrapper"},i.a.createElement(ue.a,{selectId:Object(he.a)("start_notifications_select"),ariaLabel:Ie.t("Select the time to start receiving notifications"),options:g,selectedOption:v,onOptionSelected:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;return d({value:e,type:"BEFORE",pref:r})},placeholderText:O,width:120,isDisabled:u}),i.a.createElement("span",{className:"p-dnd_preferences__time_select_to"},Ie.t("to")),i.a.createElement(ue.a,{selectId:Object(he.a)("end_notifications_select"),ariaLabel:Ie.t("Select the time to stop receiving notifications"),options:y,selectedOption:k,onOptionSelected:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;return d({value:e,type:"AFTER",pref:o})},key:y&&v.label,placeholderText:j,width:120,isDisabled:u}))}}]),t}(r.Component);Ne.displayName="DndTimeSelect",Ne.defaultProps=Te;var Re=Object(g.b)(function(e){return{featureGranularDnd:Object(E.i)(e,"feature_granular_dnd"),time24:Object(U.h)(e,"time24")}})(Ne),Ae=n("Rszm"),Pe=new O.b("prefs"),Me=(o.b.bool.isRequired,o.b.func.isRequired,o.b.string,o.b.bool,o.b.string,{dndEnabledPref:void 0,featureGranularDnd:!1,className:void 0}),De=function(e){function t(){return u()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.featureGranularDnd,n=e.className,a=e.isChecked,r=e.handleAllDayChange,o=e.dndEnabledPref;if(!t)return null;var s=Object(he.a)("all_day_checkbox"),l=y()("p-dnd_preferences__all_day_label",n);return i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:Pe.t("All day"),htmlFor:s,className:l},i.a.createElement(Ae.a,{id:s,checked:a,onChange:function(e){return r(e,{pref:o})}}))}}]),t}(r.Component);De.displayName="DndAllDayCheckbox",De.defaultProps=Me;var xe=De,Le=n("TGBA"),Fe=n("Fsnq"),Be=n("RAhH"),qe=new O.b("prefs"),Ue=(o.b.string.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.func.isRequired,o.b.string.isRequired,o.b.bool,function(e){function t(){return u()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.featureGranularDnd,n=e.day,a=e.isChecked,r=e.isDisabled,o=e.handleDayChange,s=e.dndEnabledPref;if(!t)return null;var l=Object(he.a)("day_checkbox"),c=i.a.createElement(Ae.a,{id:l,checked:a,disabled:r,onChange:function(e){return o(e,{pref:s})}}),u=i.a.createElement(Be.c,{tip:qe.t("To turn off notifications entirely, adjust your Notification Preferences."),zIndex:"above_fs"},i.a.createElement("span",null,c));return i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:n,htmlFor:l,className:"p-dnd_preferences__day_label",isDisabled:r},r?u:c)}}]),t}(r.Component));Ue.displayName="DndDayCheckbox",Ue.defaultProps={featureGranularDnd:!1};var He=Ue,Ge=new O.b("prefs"),We=(o.b.objectOf(o.b.string).isRequired,o.b.objectOf(o.b.string).isRequired,o.b.objectOf(o.b.string).isRequired,o.b.func.isRequired,o.b.func.isRequired,o.b.func.isRequired,o.b.bool,function(e){function t(){return u()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.featureGranularDnd,n=e.dndEnabledDays,a=e.dndBeforeDays,o=e.dndAfterDays,s=e.handleTimeChange,l=e.handleAllDayChange,c=e.handleDayChange;if(!t)return null;var u=[{day:Ge.t("Monday"),id:"monday",message:Ge.t("You won't receive notifications on Monday.")},{day:Ge.t("Tuesday"),id:"tuesday",message:Ge.t("You won't receive notifications on Tuesday.")},{day:Ge.t("Wednesday"),id:"wednesday",message:Ge.t("You won't receive notifications on Wednesday.")},{day:Ge.t("Thursday"),id:"thursday",message:Ge.t("You won't receive notifications on Thursday.")},{day:Ge.t("Friday"),id:"friday",message:Ge.t("You won't receive notifications on Friday.")},{day:Ge.t("Saturday"),id:"saturday",message:Ge.t("You won't receive notifications on Saturday.")},{day:Ge.t("Sunday"),id:"sunday",message:Ge.t("You won't receive notifications on Sunday.")}],d=Object(Fe.a)(Object(Le.a)(n).filter(function(e){return e===Ce}));return i.a.createElement(r.Fragment,null,u.map(function(e){var u=e.id,p=e.day,h=e.message,m=u.toUpperCase(),b=n[u]!==Ce,f=n[u]===Ee;return i.a.createElement("div",{key:u,className:"p-dnd_preferences__custom_day_section"},i.a.createElement(He,{day:p,isChecked:b,isDisabled:b&&6===d,handleDayChange:c,dndEnabledPref:Se["DND_ENABLED_"+m],featureGranularDnd:t}),!b&&i.a.createElement("p",{className:"p-dnd_preferences__notifs_disabled"},h),b&&i.a.createElement(r.Fragment,null,i.a.createElement(Re,{isDisabled:f,handleTimeChange:s,dndBeforePref:Se["DND_BEFORE_"+m],dndAfterPref:Se["DND_AFTER_"+m],dndBeforePrefValue:a[u],dndAfterPrefValue:o[u]}),i.a.createElement(xe,{isChecked:f,handleAllDayChange:l,dndEnabledPref:Se["DND_ENABLED_"+m],className:"p-dnd_preferences__checkbox_label",featureGranularDnd:t})))}))}}]),t}(r.Component));We.displayName="DndCustomPreferences",We.defaultProps={featureGranularDnd:!1};var Ke=We,Ve=n("m8R6"),ze=n("c8Bs"),Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dndDays,n=e.dndEnabledDays,a=void 0===n?{}:n,r=e.dndEnabledPrefValue;if(!t)return!1;if(t===ke)return Object(ze.a)(a,function(e){return e===Ee});if(t===Oe){var i=Object(Ve.a)(a,["saturday","sunday"]);return Object(ze.a)(i,function(e){return e===Ee})}return r===Ee},Qe=new O.b("prefs"),Je=(o.b.string.isRequired,o.b.objectOf(o.b.string).isRequired,o.b.objectOf(o.b.string).isRequired,o.b.objectOf(o.b.string).isRequired,o.b.string.isRequired,o.b.string.isRequired,o.b.func.isRequired,o.b.func.isRequired,o.b.func.isRequired,o.b.func.isRequired,o.b.bool,function(e){function t(){return u()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),p()(t,[{key:"renderDndDaysSelect",value:function(){var e=this.props,t=e.featureGranularDnd,n=e.dndDays,a=e.handleDndDaysChange;if(!t)return null;var r=[{label:Qe.t("Every day"),value:ke},{label:Qe.t("Weekdays"),value:Oe},{label:Qe.t("Custom"),value:je}],o=Object(F.a)(r,{value:n});return i.a.createElement(ce.a,{className:"p-dnd_preferences__dnd_days_label",text:Qe.t("Allow notifications:")},i.a.createElement(ue.a,{selectId:"dnd_days",options:r,selectedOption:o,onOptionSelected:a,width:160}))}},{key:"render",value:function(){var e=this.props,t=e.featureGranularDnd,n=e.dndDays,a=e.dndEnabledDays,o=e.dndBeforeDays,s=e.dndAfterDays,l=e.dndBaseBeforeTime,c=e.dndBaseAfterTime,u=e.handleTimeChange,d=e.handleAllDayChange,p=e.handleDayChange;if(!t)return null;var h=n===je,m=Ye({dndDays:n,dndEnabledDays:a});return i.a.createElement(r.Fragment,null,this.renderDndDaysSelect(),!h&&i.a.createElement(r.Fragment,null,i.a.createElement(Re,{isDisabled:m,handleTimeChange:u,dndBaseBeforeTime:l,dndBaseAfterTime:c}),i.a.createElement(xe,{isChecked:m,handleAllDayChange:d,featureGranularDnd:t}),n===Oe&&i.a.createElement("p",{className:"p-dnd_preferences__subtext"},Qe.t("You won't receive notifications on Saturday or Sunday."))),h&&i.a.createElement(Ke,{featureGranularDnd:t,dndEnabledDays:a,dndBeforeDays:o,dndAfterDays:s,handleTimeChange:u,handleAllDayChange:d,handleDayChange:p}))}}]),t}(r.Component));Je.displayName="DndPreferences",Je.defaultProps={featureGranularDnd:!1};var Xe=Je,Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.value,a=e.endTime;return"BEFORE"===t&&n>=Object(me.a)(a,5,"0")},$e=function(e){if(!e)return null;var t=Object.keys(fe.a);return Object(F.a)(t,function(t){return t>e})||"23:59"},et=(n("EAGK"),new O.b("prefs")),tt=(o.b.string.isRequired,o.b.objectOf(o.b.string).isRequired,o.b.objectOf(o.b.string).isRequired,o.b.objectOf(o.b.string).isRequired,o.b.string.isRequired,o.b.string.isRequired,o.b.func.isRequired,o.b.func.isRequired,o.b.string,o.b.func,o.b.bool,{tzLabel:"",changePrefsActiveSection:B.a,featureGranularDnd:!1}),nt=function(e){function t(e){u()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.openTzPreferences=n.openTzPreferences.bind(n),n.handleDndDaysChange=n.handleDndDaysChange.bind(n),n.handleTimeChange=n.handleTimeChange.bind(n),n.handleAllDayChange=n.handleAllDayChange.bind(n),n.handleDayChange=n.handleDayChange.bind(n),n}return f()(t,e),p()(t,[{key:"openTzPreferences",value:function(){(0,this.props.changePrefsActiveSection)({sectionId:"language_region",subsectionId:"prefs_timezone"})}},{key:"handleDndDaysChange",value:function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value,n=this.props,a=n.dndBaseBeforeTime,r=n.dndBaseAfterTime,i=n.dndEnabledDays;if(t!==je){var o=Ye({dndDays:t,dndEnabledDays:i})?Ee:we,s=t===Oe;this.props.setMultipleUserPrefsByApi((e={},se()(e,Se.DND_DAYS,t),se()(e,Se.DND_BEFORE_MONDAY,a),se()(e,Se.DND_BEFORE_TUESDAY,a),se()(e,Se.DND_BEFORE_WEDNESDAY,a),se()(e,Se.DND_BEFORE_THURSDAY,a),se()(e,Se.DND_BEFORE_FRIDAY,a),se()(e,Se.DND_BEFORE_SATURDAY,a),se()(e,Se.DND_BEFORE_SUNDAY,a),se()(e,Se.DND_AFTER_MONDAY,r),se()(e,Se.DND_AFTER_TUESDAY,r),se()(e,Se.DND_AFTER_WEDNESDAY,r),se()(e,Se.DND_AFTER_THURSDAY,r),se()(e,Se.DND_AFTER_FRIDAY,r),se()(e,Se.DND_AFTER_SATURDAY,r),se()(e,Se.DND_AFTER_SUNDAY,r),se()(e,Se.DND_ENABLED_MONDAY,o),se()(e,Se.DND_ENABLED_TUESDAY,o),se()(e,Se.DND_ENABLED_WEDNESDAY,o),se()(e,Se.DND_ENABLED_THURSDAY,o),se()(e,Se.DND_ENABLED_FRIDAY,o),se()(e,Se.DND_ENABLED_SATURDAY,s?Ce:o),se()(e,Se.DND_ENABLED_SUNDAY,s?Ce:o),e))}else this.props.setUserPrefByApi({pref:Se.DND_DAYS,value:t})}},{key:"handleTimeChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,n=e.type,a=e.pref,r=this.props,i=r.dndDays,o=r.dndBaseAfterTime,s=r.dndAfterDays;if(i!==je)if(Ze({type:n,value:t,endTime:o})){var l,c=$e(t);this.props.setMultipleUserPrefsByApi((l={},se()(l,Se.DND_BEFORE_MONDAY,t),se()(l,Se.DND_BEFORE_TUESDAY,t),se()(l,Se.DND_BEFORE_WEDNESDAY,t),se()(l,Se.DND_BEFORE_THURSDAY,t),se()(l,Se.DND_BEFORE_FRIDAY,t),se()(l,Se.DND_BEFORE_SATURDAY,t),se()(l,Se.DND_BEFORE_SUNDAY,t),se()(l,Se.DND_AFTER_MONDAY,c),se()(l,Se.DND_AFTER_TUESDAY,c),se()(l,Se.DND_AFTER_WEDNESDAY,c),se()(l,Se.DND_AFTER_THURSDAY,c),se()(l,Se.DND_AFTER_FRIDAY,c),se()(l,Se.DND_AFTER_SATURDAY,c),se()(l,Se.DND_AFTER_SUNDAY,c),l))}else{var u;this.props.setMultipleUserPrefsByApi((u={},se()(u,Se["DND_"+n+"_MONDAY"],t),se()(u,Se["DND_"+n+"_TUESDAY"],t),se()(u,Se["DND_"+n+"_WEDNESDAY"],t),se()(u,Se["DND_"+n+"_THURSDAY"],t),se()(u,Se["DND_"+n+"_FRIDAY"],t),se()(u,Se["DND_"+n+"_SATURDAY"],t),se()(u,Se["DND_"+n+"_SUNDAY"],t),u))}else{var d=function(e){return e?e.split("_")[2]:null}(a);if(Ze({type:n,value:t,endTime:s[d]})){var p,h=$e(t),m=Se["DND_AFTER_"+d.toUpperCase()];this.props.setMultipleUserPrefsByApi((p={},se()(p,a,t),se()(p,m,h),p))}else this.props.setUserPrefByApi({pref:a,value:t})}}},{key:"handleAllDayChange",value:function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).pref,a=this.props.dndDays,r=e.target.checked?Ee:we;if(a!==je){var i=a===Oe;this.props.setMultipleUserPrefsByApi((t={},se()(t,Se.DND_ENABLED_MONDAY,r),se()(t,Se.DND_ENABLED_TUESDAY,r),se()(t,Se.DND_ENABLED_WEDNESDAY,r),se()(t,Se.DND_ENABLED_THURSDAY,r),se()(t,Se.DND_ENABLED_FRIDAY,r),se()(t,Se.DND_ENABLED_SATURDAY,i?Ce:r),se()(t,Se.DND_ENABLED_SUNDAY,i?Ce:r),t))}else this.props.setUserPrefByApi({pref:n,value:r})}},{key:"handleDayChange",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).pref,n=e.target.checked?we:Ce;this.props.setUserPrefByApi({pref:t,value:n})}},{key:"render",value:function(){var e=this.props,t=e.featureGranularDnd,n=e.dndDays,a=e.dndEnabledDays,o=e.dndBeforeDays,s=e.dndAfterDays,l=e.dndBaseBeforeTime,c=e.dndBaseAfterTime,u=e.tzLabel;return t?i.a.createElement(r.Fragment,null,i.a.createElement("p",null,et.rt("Slack will only allow notifications during the times you choose. Outside those hours, you'll be in {doNotDisturb}.",{doNotDisturb:i.a.createElement(le.a,{href:"https://get.slack.help/hc/en-us/articles/214908388-Pause-notifications-with-Do-Not-Disturb"},et.t("Do Not Disturb"))})),i.a.createElement(Xe,{dndDays:n,dndEnabledDays:a,dndBeforeDays:o,dndAfterDays:s,dndBaseBeforeTime:l,dndBaseAfterTime:c,handleDndDaysChange:this.handleDndDaysChange,handleTimeChange:this.handleTimeChange,handleAllDayChange:this.handleAllDayChange,handleDayChange:this.handleDayChange,featureGranularDnd:t}),i.a.createElement("p",null,u+" | ",i.a.createElement(le.a,{onClick:this.openTzPreferences},et.t("Change")))):null}}]),t}(r.Component);nt.displayName="DndUserPreferences",nt.defaultProps=tt;var at=Object(g.b)(function(e){var t=Object(E.b)(e),n=Object(V.c)(e,t);return{featureGranularDnd:Object(E.i)(e,"feature_granular_dnd"),tzLabel:Object(z.N)(n),dndDays:Object(U.h)(e,"dnd_days"),dndEnabledDays:{monday:Object(U.h)(e,"dnd_enabled_monday"),tuesday:Object(U.h)(e,"dnd_enabled_tuesday"),wednesday:Object(U.h)(e,"dnd_enabled_wednesday"),thursday:Object(U.h)(e,"dnd_enabled_thursday"),friday:Object(U.h)(e,"dnd_enabled_friday"),saturday:Object(U.h)(e,"dnd_enabled_saturday"),sunday:Object(U.h)(e,"dnd_enabled_sunday")},dndBeforeDays:{monday:Object(U.h)(e,"dnd_before_monday"),tuesday:Object(U.h)(e,"dnd_before_tuesday"),wednesday:Object(U.h)(e,"dnd_before_wednesday"),thursday:Object(U.h)(e,"dnd_before_thursday"),friday:Object(U.h)(e,"dnd_before_friday"),saturday:Object(U.h)(e,"dnd_before_saturday"),sunday:Object(U.h)(e,"dnd_before_sunday")},dndAfterDays:{monday:Object(U.h)(e,"dnd_after_monday"),tuesday:Object(U.h)(e,"dnd_after_tuesday"),wednesday:Object(U.h)(e,"dnd_after_wednesday"),thursday:Object(U.h)(e,"dnd_after_thursday"),friday:Object(U.h)(e,"dnd_after_friday"),saturday:Object(U.h)(e,"dnd_after_saturday"),sunday:Object(U.h)(e,"dnd_after_sunday")},dndBaseBeforeTime:Object(U.h)(e,"dnd_before_monday"),dndBaseAfterTime:Object(U.h)(e,"dnd_after_monday")}},function(e){return{setUserPrefByApi:function(t){return e(Object(W.f)(t))},setMultipleUserPrefsByApi:function(t){return e(Object(W.e)(t))}}})(nt),rt=new O.b("prefs"),it=(o.b.bool.isRequired,o.b.string.isRequired,o.b.string.isRequired,o.b.bool.isRequired,o.b.func.isRequired,o.b.func.isRequired,o.b.string.isRequired,o.b.object.isRequired,function(e){function t(e){u()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChangeDndEnabled=n.onChangeDndEnabled.bind(n),n.handleTimeChange=n.handleTimeChange.bind(n),n.openTzPreferences=n.openTzPreferences.bind(n),n}return f()(t,e),p()(t,[{key:"onChangeDndEnabled",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed dnd_enabled: "+n),this.props.setUserPrefByApi({pref:"dnd_enabled",value:n})}},{key:"handleTimeChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,n=e.pref;this.props.logger.action("Changed "+n+": "+t),this.props.setUserPrefByApi({pref:n,value:t})}},{key:"openTzPreferences",value:function(){(0,this.props.changePrefsActiveSection)({sectionId:"language_region",subsectionId:"prefs_timezone"})}},{key:"renderTimeSelects",value:function(){var e=this,t=this.props,n=t.dndEnabled,a=t.dndStartHour,r=t.dndEndHour,o=t.time24,s=Object.keys(fe.a).map(function(e){return{label:o?e:fe.a[e],value:e}}),l=s.filter(function(e){return e.value!==r}),c=s.filter(function(e){return e.value!==a}),u=Object(F.a)(s,{value:a}),d=Object(F.a)(s,{value:r}),p=void 0,h=void 0;return u||(p=ye({time:a,time24:o})),d||(h=ye({time:r,time24:o})),i.a.createElement("div",{className:"p-dnd_preferences__time_select_wrapper margin_top_50"},i.a.createElement(ue.a,{selectId:"dnd_start_hour_select",ariaLabel:rt.t("Select the time you want Do Not Disturb to begin"),options:l,selectedOption:u,onOptionSelected:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;return e.handleTimeChange({value:t,pref:"dnd_start_hour"})},key:d&&d.label||h,placeholderText:p,width:120,isDisabled:!n}),i.a.createElement("span",{className:"p-dnd_preferences__time_select_to"},rt.t("to")),i.a.createElement(ue.a,{selectId:"dnd_end_hour_select",ariaLabel:rt.t("Select the time you want Do Not Disturb to end"),options:c,selectedOption:d,onOptionSelected:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;return e.handleTimeChange({value:t,pref:"dnd_end_hour"})},key:u&&u.label||p,placeholderText:h,width:120,isDisabled:!n}))}},{key:"render",value:function(){var e=this.props,t=e.dndEnabled,n=e.tzLabel;return i.a.createElement(r.Fragment,null,i.a.createElement("p",null,rt.rt("When {doNotDisturb} is turned on, Slack won't send you any notifications. Your fellow Slack users can override this if necessary.",{doNotDisturb:i.a.createElement(le.a,{href:"https://get.slack.help/hc/en-us/articles/214908388-Pause-notifications-with-Do-Not-Disturb"},rt.t("Do Not Disturb"))})),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:rt.t("Automatically disable notifications from:"),htmlFor:"dnd_enabled_checkbox"},i.a.createElement(Ae.a,{id:"dnd_enabled_checkbox",checked:t,onChange:this.onChangeDndEnabled})),this.renderTimeSelects(),i.a.createElement("p",{className:"p-dnd_preferences__tz_label"},n+" ","(",i.a.createElement(le.a,{onClick:this.openTzPreferences},rt.t("change")),")"))}}]),t}(r.Component));it.displayName="BasicDndUserPreferences";var ot=Object(g.b)(function(e){var t=Object(E.b)(e),n=Object(V.c)(e,t),a=Object(U.h)(e,"dnd_start_hour"),r=Object(U.h)(e,"dnd_end_hour");return{dndEnabled:Object(U.h)(e,"dnd_enabled"),dndStartHour:Object(me.a)(a,5,"0"),dndEndHour:Object(me.a)(r,5,"0"),time24:Object(U.h)(e,"time24"),tzLabel:Object(z.N)(n),logger:Object(j.a)({state:e,label:"PREFS"})}},function(e){return{setUserPrefByApi:function(t){return e(Object(W.f)(t))}}})(it),st=(o.b.string.isRequired,o.b.node.isRequired,o.b.bool.isRequired,o.b.node.isRequired,function(e){function t(){return u()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.description,a=e.selected,o=e.children,s=i.a.createElement(r.Fragment,null,i.a.createElement("p",{className:"margin_bottom_0 bold"},t),i.a.createElement("p",{className:"margin_bottom_0"},n));return i.a.createElement(ce.a,{text:s,type:"inline",cursor:"pointer",className:a?"p-prefs_modal__radiogroup--selected":""},o)}}]),t}(r.PureComponent));st.displayName="PrefsRadioLabel";var lt=st,ct=n("qkTT"),ut=n("EetU"),dt=n("od5y"),pt=n("WD4z"),ht=n("KEK+"),mt=n("nWao"),bt=n("P3Po"),ft=n("XLFM"),_t=n("ynxK"),gt=n("QbLZ"),vt=n.n(gt),yt=new O.b("desktop"),kt=(o.b.string.isRequired,Object(j.b)({label:"NOTIF_WARNINGS"})),Ot=function(e){function t(){return u()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),p()(t,[{key:"render",value:function(){var e=this.props.id,t=Object(J.b)({articleId:201355156,zdLocale:Object(Q.a)(),hash:"windows-1"}),n=void 0;switch(e){case"QUIET_TIME":n=yt.t("During your first hour using a new Windows operating system, you won\u2019t receive any notifications.");break;case"AC_USER":n=yt.rt("You\u2019ve disabled notifications for Slack from the Windows Action Center. <a>Visit our Help Center to learn how to enable them.</a>",null,function(e){var n=e.text;return i.a.createElement(le.a,{href:t},n)});break;case"AC_GROUP":n=yt.t("Your system administrator has disabled Windows Action Center notifications for Slack.");break;case"CORRUPTION":n=yt.rt("Your system\u2019s notification settings seem to be corrupt. To fix the issue, <a>please contact us</a>.",null,function(e){var t=e.text;return i.a.createElement(le.a,{href:"https://my.slack.com/help/requests/new"},t)});break;case"FULL_SCREEN":n=yt.t("If you currently have a full-screen application running, you\u2019ll have to close it to receive notifications.");break;case"AERO_GLASS_UNAVAILABLE":n=yt.rt("The Desktop Window Manager has been disabled because you\u2019re using a Windows Classic Theme. This means that Slack is delivering notifications through a secondary system, which might not look that great. To learn how to enable better notifications from Slack, <a>visit our Help Center</a>.",null,function(e){var n=e.text;return i.a.createElement(le.a,{href:t},n)});break;case"GPU_COMPOSITION_UNAVAILABLE":n=yt.t("Since built-in notifications cannot be supported, you\u2019re seeing a version of notifications that can be displayed with your current graphics card driver.");break;case"QUIET_HOURS":n=yt.t("You\u2019ve turned on \u201cFocus Assist\u201d in your Windows settings, meaning you won\u2019t receive notifications from any application. If you turn this feature off, you\u2019ll receive notifications again.");break;case"FAILOVER_WITHIN_LAST_WEEK":n=yt.t("Some time in the past week, the Windows Action Center was unable to deliver your notifications. To ensure that you still receive notifications, Slack automatically switched to its built-in notifications.");break;default:kt.warn("Unable to match Desktop Notification Warning with id:",e),n=null}return n}}]),t}(r.PureComponent);Ot.displayName="NotificationWarning";var jt=n("clTI"),Ct=n("6kok"),Et=n("4Twu"),wt=n("18Pa"),St=n("ITcr"),It=new O.b("prefs"),Tt=(o.b.string.isRequired,o.b.bool,o.b.func,o.b.string,o.b.bool,o.b.bool,o.b.string,o.b.string,o.b.string,o.b.string,o.b.func,{last:!1,changePrefsActiveSection:B.a,channelName:void 0,isMuted:!1,isSuppressed:!1,desktopSetting:void 0,mobileSetting:void 0,desktopDefault:void 0,mobileDefault:void 0,resetChannelNotificationOverrideAndCallApi:B.a}),Nt=function(e){function t(e){u()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.openChannelSettings=n.openChannelSettings.bind(n),n.resetToDefaults=n.resetToDefaults.bind(n),n}return f()(t,e),p()(t,[{key:"openChannelSettings",value:function(){var e=this.props;(0,e.changePrefsActiveSection)({sectionId:"channel",channelId:e.channelId})}},{key:"resetToDefaults",value:function(){var e=this.props.channelId;this.props.resetChannelNotificationOverrideAndCallApi({channelId:e})}},{key:"renderReadableSetting",value:function(){var e=this.props,t=e.desktopSetting,n=e.mobileSetting,a=e.desktopDefault,r=e.mobileDefault;if(!t&&!n)return null;if(t===n)return"everything"===t?It.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Desktop and Mobile:</span> All new messages'):"mentions_dms"===t?It.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Desktop and Mobile:</span> Direct messages, mentions & keywords'):It.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Desktop and Mobile:</span> Nothing');var o=void 0,s=void 0;return t!==a&&(o="everything"===t?It.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Desktop:</span> All new messages'):"mentions_dms"===t?It.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Desktop:</span> Direct messages, mentions & keywords'):It.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Desktop:</span> Nothing')),n!==r&&(s="everything"===n?It.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Mobile:</span> All new messages'):"mentions_dms"===n?It.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Mobile:</span> Direct messages, mentions & keywords'):It.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Mobile:</span> Nothing')),o&&s?i.a.createElement(i.a.Fragment,null,o,i.a.createElement("br",null),s):o||s}},{key:"render",value:function(){var e=this.props,t=e.isMuted,n=e.isSuppressed,a=e.last,r=e.channelName,o=y()("p-prefs_modal__channel_overrides_row",{"p-prefs_modal__channel_overrides_row--last":a}),s=y()("p-prefs_modal__channel_overrides_row__name",{"p-prefs_modal__channel_overrides_row__name--muted":t}),l=It.t("Reset {channelName} to default settings",{channelName:Object(O.n)(r)});return i.a.createElement("div",{className:o,role:"listitem"},i.a.createElement(ft.c,{className:"p-prefs_modal__channel_overrides_row__details",onClick:this.openChannelSettings},i.a.createElement("div",{className:s},i.a.createElement(Et.a,{channelId:this.props.channelId,iconProps:{inherit:!0,align:"baseline"}})," ",t?i.a.createElement(dt.b,{type:"bell-slash",size:"inherit"}):null),t?i.a.createElement("div",{className:"p-prefs_modal__channel_overrides_row__setting"},It.t("Muted")):i.a.createElement("div",{className:"p-prefs_modal__channel_overrides_row__setting"},this.renderReadableSetting()),n?i.a.createElement("div",{className:"p-prefs_modal__channel_overrides_row__setting"},It.rt('No notifications for <span className="p-prefs_modal__channel_overrides_row__keyword">{atChannel}</span> and <span className="p-prefs_modal__channel_overrides_row__keyword">{atHere}</span>',{atChannel:"@"+Object(St.b)({ms_name:"channel"}),atHere:"@"+Object(St.b)({ms_name:"here"})})):null),i.a.createElement("div",{className:"p-prefs_modal__channel_overrides_row__reset"},i.a.createElement(Be.c,{tip:l},i.a.createElement("span",null,i.a.createElement(wt.a,{className:"p-prefs_modal__channel_overrides_row__reset_button",icon:"times-circle",onClick:this.resetToDefaults,"aria-label":l})))))}}]),t}(r.Component);Nt.displayName="ChannelOverridesRow",Nt.defaultProps=Tt;var Rt=Object(g.b)(function(e,t){var n=t.channelId,a=Object(jt.d)(e,n);return{channelName:Object(Ct.x)(e,a),isMuted:Object(G.c)(e,n,"muted"),isSuppressed:Object(G.c)(e,n,"suppress_at_channel"),desktopSetting:Object(G.c)(e,n,"desktop"),mobileSetting:Object(G.c)(e,n,"mobile"),desktopDefault:Object(Z.j)(e,n),mobileDefault:Object(Z.k)(e,n)}},function(e){return{resetChannelNotificationOverrideAndCallApi:function(){return e(K.a.apply(void 0,arguments))}}})(Nt),At=n("fujP"),Pt=n("yU6Y"),Mt=n.n(Pt),Dt=new O.b("prefs"),xt="idle",Lt=function(){return"Windows"===Mt.a.osname&&"10"===Mt.a.osversion?Object(At.a)(Object(re.A)())||Object(re.A)().isGpuCompositionAvailable?"winrt":null:"html"},Ft={corner:"bottom_right",display:"same_as_app"},Bt=[{value:"html",label:function(){return Dt.t("Slack\u2019s built-in notifications")},enabled:Object(At.a)(Object(re.A)())?"Windows"===Mt.a.osname:Object(re.A)().isGpuCompositionAvailable},{value:"winrt",label:function(){return Dt.t("Windows Action Center")},enabled:"Windows"===Mt.a.osname&&"10"===Mt.a.osversion},{value:"window",label:function(){return Dt.t("Windows Action Center (abbreviated)")},enabled:"Windows"===Mt.a.osname&&"10"===Mt.a.osversion},{value:"window",label:function(){return Dt.t("Windows Action Center")},enabled:"Windows"===Mt.a.osname&&("8"===Mt.a.osversion||"8.1"===Mt.a.osversion)},{value:"window",label:function(){return Dt.t("Windows\u2019 notifications")},enabled:"Windows"===Mt.a.osname&&"7"===Mt.a.osversion}],qt=[{value:"bottom_right",label:function(){return Dt.t("bottom-right")}},{value:"top_right",label:function(){return Dt.t("top-right")}},{value:"top_left",label:function(){return Dt.t("top-left")}},{value:"bottom_left",label:function(){return Dt.t("bottom-left")}}],Ut=[{value:"same_as_app",label:function(){return Dt.t("same display as app")}},{value:"primary",label:function(){return Dt.t("primary display")}}],Ht=[],Gt=new O.b("prefs"),Wt=1e3,Kt=100,Vt="instant",zt=["0","1","2","5","10","15","20","30"],Yt=(o.b.object.isRequired,o.b.object.isRequired,o.b.string.isRequired,o.b.string.isRequired,o.b.string.isRequired,o.b.bool.isRequired,o.b.arrayOf(o.b.string).isRequired,o.b.string,o.b.string.isRequired,o.b.string.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.string.isRequired,o.b.objectOf(o.b.shape({display:o.b.func.isRequired,url:o.b.oneOfType([o.b.object,o.b.string]).isRequired})).isRequired,o.b.oneOf(zt).isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.oneOf(["none","instant","hourly"]).isRequired,o.b.bool,o.b.oneOf(["","short","long"]),o.b.func.isRequired,o.b.func.isRequired,o.b.func.isRequired,o.b.func,o.b.func.isRequired,o.b.bool,o.b.bool,{globalKeywords:"",macSSBBullet:!0,macSSBBounce:"",changePrefsActiveSection:B.a,featureGranularDnd:!1,hasHipaaCompliance:!1}),Qt=function(e){function t(e){u()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k.a)(n,["onChangeThreadsEverything","onChangeNotificationsBehaviorGlobalDesktop","onChangeNotificationsBehaviorGlobalMobile","onChangeSyncGlobalMobileDesktop","onChangeGlobalKeywords","onChangeNoTextInNotifications","onChangePlaySounds","onChangeMuteSounds","onChangeNewMsgSnd","onChangeWindowFlashBehavior","onChangeWindowFlashBehaviorOnlyInactive","onChangeNotificationMethod","onChangeNotifyPositionCorner","onChangeNotifyPositionDisplay","onChangeEmailAlerts","onChangeEmailAlertsDelay","onChangePushIdleWait","onChangeMacDockBadge","onChangeMacDockBounce","onChangeMacDockBounceDuration","onClickShowExampleNotification","onClickPromptForPermission","onClickJumpToOverrides"]);var a=n.props,r=a.notificationsBehaviorGlobalDesktop,o=a.notificationsBehaviorGlobalMobile,s=a.globalKeywords,l=a.newMsgSnd,c=a.emailAlerts,d=a.macSSBBounce,p=Object(re.Q)("notificationMethod")&&Object(re.I)("notificationMethod")||Lt(),h=Object(X.b)({csv:s,max:Kt});return n.state={syncGlobalMobileDesktop:r===o,globalKeywords:s.replace(/,/g,", "),globalKeywordsMaxReached:h.maxViolation,lastNewMsgSnd:"none"===l?ae.a:l,lastEmailAlertsDelay:"none"===c?Vt:c,macSSBBounceDuration:""===d?"short":d,promptForPermissionActive:!1,windowFlashBehavior:Object(re.Q)("windowFlashBehavior")&&Object(re.I)("windowFlashBehavior")||xt,initialNotificationMethod:p,notificationMethod:p,notifyPosition:Object(re.Q)("notifyPosition")&&Object(re.I)("notifyPosition")||Ft},n.zdLocale=Object(Q.a)(),n.setGlobalKeywordsByApi=Object(L.a)(n.setGlobalKeywordsByApi,Wt),n.overridesListRef=i.a.createRef(),n}return f()(t,e),p()(t,[{key:"componentDidMount",value:function(){new Promise(function(e){return Object(re.H)().then(function(t){return e(t)}).catch(function(t){return Object(j.b)().error("Tried to grab notification warnings, but failed"),Object(j.b)().error(t.message),Object(j.b)().error(t.stack),e([])})}).then(function(e){var t,n,a=(t={QUIET_TIME:i.a.createElement(Ot,{id:"QUIET_TIME"}),AC_USER:i.a.createElement(Ot,{id:"AC_USER"}),AC_GROUP:i.a.createElement(Ot,{id:"AC_GROUP"}),FULL_SCREEN:i.a.createElement(Ot,{id:"FULL_SCREEN"}),CORRUPTION:i.a.createElement(Ot,{id:"CORRUPTION"}),AERO_GLASS_UNAVAILABLE:i.a.createElement(Ot,{id:"AERO_GLASS_UNAVAILABLE"}),GPU_COMPOSITION_UNAVAILABLE:i.a.createElement(Ot,{id:"GPU_COMPOSITION_UNAVAILABLE"}),QUIET_HOURS:i.a.createElement(Ot,{id:"QUIET_HOURS"}),FAILOVER_WITHIN_LAST_WEEK:i.a.createElement(Ot,{id:"FAILOVER_WITHIN_LAST_WEEK"})},n={UNKNOWN_HTML_STYLE:t.CORRUPTION,UNKNOWN_METHOD:t.CORRUPTION,ZERO_MAX_NOTIFICATIONS:t.CORRUPTION,ZERO_TIMEOUT:t.CORRUPTION},Object(ie.B)()?vt()({},n,{AC_DISABLED_BY_GROUP_POLICY:t.AC_GROUP,AC_DISABLED_BY_MANIFEST:t.AC_USER,AC_DISABLED_FOR_APPLICATION:t.AC_GROUP,AC_DISABLED_FOR_USER:t.AC_GROUP,AERO_GLASS_UNAVAILABLE:t.AERO_GLASS_UNAVAILABLE,FAILOVER_WITHIN_LAST_WEEK:t.FAILOVER_WITHIN_LAST_WEEK,PRESENTATION_BUSY:t.FULL_SCREEN,PRESENTATION_D3D_FULL_SCREEN:t.FULL_SCREEN,PRESENTATION_MODE:t.FULL_SCREEN,PRESENTATION_QUIET_TIME:t.QUIET_TIME,QUIET_HOURS:t.QUIET_HOURS}):n);Ht=e.filter(function(e){return!!a[e]}).map(function(e){return a[e]})})}},{key:"onChangeNotificationsBehaviorGlobalDesktop",value:function(e){var t=this.props.logger,n=e.target.value;t.action("Changed notificationsBehaviorGlobalDesktop: "+n),this.setGlobalDesktopNotificationByApi(n,this.state.syncGlobalMobileDesktop),this.clogDesktopNotificationsChange(n)}},{key:"onChangeNotificationsBehaviorGlobalMobile",value:function(e){var t=this.props.logger,n=e.value;t.action("Changed notificationsBehaviorGlobalMobile: "+n),this.props.setNotificationsGlobalPrefByApi({name:"global_mobile",value:n,sync:!1,reason:"prefs_dialog_open"})}},{key:"onChangeThreadsEverything",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed threads_everything: "+n),this.props.setNotificationsGlobalPrefByApi({name:"threads_everything",value:n})}},{key:"onChangeSyncGlobalMobileDesktop",value:function(e){var t=!e.target.checked,n=this.props.notificationsBehaviorGlobalDesktop;this.setState(function(){return{syncGlobalMobileDesktop:t}}),t&&this.setGlobalDesktopNotificationByApi(n,t)}},{key:"onChangeGlobalKeywords",value:function(e){var t=Object(X.b)({csv:e,max:Kt});this.setState(function(){return{globalKeywords:e,globalKeywordsMaxReached:t.maxViolation}}),t.maxViolation||this.setGlobalKeywordsByApi(e.replace(/, /g,","))}},{key:"onChangeNoTextInNotifications",value:function(e){var t=this.props.logger,n=!e.target.checked;t.action("Changed no_text_in_notifications: "+n),this.props.setNotificationsGlobalPrefByApi({name:"no_text_in_notifications",value:n})}},{key:"onChangePlaySounds",value:function(e){var t=this.props.logger,n=e.target.checked?this.state.lastNewMsgSnd:"none";t.action("Changed desktop_sound: "+n),this.props.setNotificationsGlobalPrefByApi({name:"desktop_sound",value:n})}},{key:"onChangeMuteSounds",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed mute_sounds: "+n),this.props.setUserPrefByApi({pref:"mute_sounds",value:n})}},{key:"onChangeNewMsgSnd",value:function(e){var t=this.props.logger,n=e.target.value;t.action("Changed desktop_sound: "+n),Object(ee.a)()?Object(te.a)(this.props.allNotificationSounds[n].url):Object(ne.c)(n,{ignore_mute:!0}),this.setState(function(){return{lastNewMsgSnd:n}}),this.props.setNotificationsGlobalPrefByApi({name:"desktop_sound",value:n})}},{key:"onChangeWindowFlashBehavior",value:function(e){var t=this.props.logger,n=e.target.checked?"always":"never";t.action("Changed windowFlashBehavior: "+n),Object(re.ub)({name:"windowFlashBehavior",value:n}),this.setState(function(){return{windowFlashBehavior:n}})}},{key:"onChangeWindowFlashBehaviorOnlyInactive",value:function(e){var t=this.props.logger,n=e.target.checked?"idle":"always";t.action("Changed windowFlashBehavior: "+n),Object(re.ub)({name:"windowFlashBehavior",value:n}),this.setState(function(){return{windowFlashBehavior:n}})}},{key:"onChangeNotificationMethod",value:function(e){var t=this.props.logger,n=e.value;t.action("Changed notificationMethod: "+n),Object(re.ub)({name:"notificationMethod",value:n}),this.setState(function(){return{notificationMethod:n}})}},{key:"onChangeNotifyPositionCorner",value:function(e){var t=this.props.logger,n=e.value;t.action("Changed notifyPosition.corner: "+n);var a={corner:n,display:this.state.notifyPosition.display};Object(re.ub)({name:"notifyPosition",value:a}),this.setState(function(){return{notifyPosition:a}})}},{key:"onChangeNotifyPositionDisplay",value:function(e){var t=this.props.logger,n=e.value;t.action("Changed notifyPosition.display: "+n);var a={corner:this.state.notifyPosition.corner,display:n};Object(re.ub)({name:"notifyPosition",value:a}),this.setState(function(){return{notifyPosition:a}})}},{key:"onChangeEmailAlerts",value:function(e){var t=this.props.logger,n=e.target.checked?this.state.lastEmailAlertsDelay:"none";t.action("Changed emailAlerts: "+n),this.props.setUserPrefByApi({pref:"email_alerts",value:n})}},{key:"onChangeEmailAlertsDelay",value:function(e){var t=this.props.logger,n=e.target.value;t.action("Changed emailAlerts: "+n),this.setState(function(){return{lastEmailAlertsDelay:n}}),this.props.setUserPrefByApi({pref:"email_alerts",value:n})}},{key:"onChangePushIdleWait",value:function(e){var t=this.props.logger,n=e.value;t.action("Changed push_idle_wait: "+n),this.props.setNotificationsGlobalPrefByApi({name:"push_idle_wait",value:n})}},{key:"onChangeMacDockBadge",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed mac_ssb_bullet: "+n),this.props.setUserPrefByApi({pref:"mac_ssb_bullet",value:n})}},{key:"onChangeMacDockBounce",value:function(e){var t=this.props.logger,n=this.state.macSSBBounceDuration,a=e.target.checked?n:"";t.action("Changed mac_ssb_bounce: "+a),this.props.setUserPrefByApi({pref:"mac_ssb_bounce",value:a})}},{key:"onChangeMacDockBounceDuration",value:function(e){var t=this.props.logger,n=e.target.checked?"short":"long";t.action("Changed mac_ssb_bounce: "+n),this.setState(function(){return{macSSBBounceDuration:n}}),this.props.setUserPrefByApi({pref:"mac_ssb_bounce",value:n})}},{key:"onClickShowExampleNotification",value:function(){this.props.sendTestNotification({text:Gt.t("What do you know, it works?")})}},{key:"onClickPromptForPermission",value:function(){var e=this,t=this.props.logger;this.setState(function(){return{promptForPermissionActive:!0}}),this.props.promptForPermission({callback:function(n,a){e.setState(function(){return{promptForPermissionActive:!1}}),n&&"granted"===a?(t.action("Enabled desktop notifications"),e.props.setUserPrefByApi({pref:"growls_enabled",value:!0})):(t.action("Disabled desktop notifications"),e.props.setUserPrefByApi({pref:"growls_enabled",value:!1}))}})}},{key:"onClickJumpToOverrides",value:function(){var e=this.overridesListRef.current;e&&e.scrollIntoView({behavior:"smooth"})}},{key:"setGlobalKeywordsByApi",value:function(e){this.props.logger.action("Changed global_keywords"),this.props.setNotificationsGlobalPrefByApi({name:"global_keywords",value:e})}},{key:"setGlobalDesktopNotificationByApi",value:function(e,t){this.props.setNotificationsGlobalPrefByApi({name:"global_desktop",value:e,sync:t,reason:"prefs_dialog_open"})}},{key:"clogDesktopNotificationsChange",value:function(e){var t="never";"everything"===e?t="all":"mentions_dms"===e&&(t="mentions"),this.props.clogger.track("PREF_USER_CLIENT_UPDATE",{updated_user_client_prefs:{desktop_notifications:t}})}},{key:"renderNotificationExample",value:function(e){var t=this.props,n=t.teamName,a=t.memberName,r=y()("p-prefs_modal__notification_example",{"p-prefs_modal__notification_example--mac":Object(ie.p)(),"p-prefs_modal__notification_example--windows":Object(ie.B)(),"p-prefs_modal__notification_example--linux":Object(ie.o)(),"p-prefs_modal__notification_example--none":"nothing"===e}),o=n;Object(ie.p)()||(o=Gt.t("from {team_name}",{team_name:n}));var s=void 0;return"nothing"===e&&(s=Gt.t("Hi!")),"everything"===e&&(s=Gt.t("Good morning everyone!")),"mentions_dms"===e&&(s=i.a.createElement("span",null,Gt.rt("{wave_emoji} Hi <strong>@{username}</strong>",{wave_emoji:i.a.createElement(ct.b,{text:":wave:",emojiSize:ct.a.SMALL}),username:a}))),i.a.createElement("div",{className:r},i.a.createElement("div",{className:"p-prefs_modal__notification_example__slack_app_icon"}),i.a.createElement("div",{className:"bold overflow_ellipsis"},o),s)}},{key:"renderNotificationsPrompt",value:function(){var e=this.state.promptForPermissionActive,t=i.a.createElement("h3",{className:"margin_bottom_50 inline_block"},Gt.t("Desktop notifications are currently disabled"));return Object(Z.r)()?i.a.createElement(r.Fragment,null,t,e?i.a.createElement(pt.a,{level:"info",icon:"info-circle",className:"margin_bottom_100"},Gt.rt("Click <strong>Allow</strong> in your browser's pop-up to enable notifications.")):i.a.createElement(r.Fragment,null,i.a.createElement("p",null,Gt.t("We strongly recommend enabling notifications so that you'll know when important activity happens in your Slack workspace.")),i.a.createElement(ft.d,{onClick:this.onClickPromptForPermission,className:"margin_bottom_100"},i.a.createElement(dt.b,{type:"bell",className:"margin_right_50"}),Gt.t("Enable desktop notifications")))):i.a.createElement(r.Fragment,null,t,i.a.createElement(pt.a,{level:"error",icon:"warning",className:"margin_bottom_100"},Gt.t("You've disallowed notifications in your browser. You'll need to open your browser preferences to change that.")))}},{key:"renderGlobalPrefs",value:function(){var e=this,t=this.props,n=t.helpCenterTrackingToken,a=t.notificationsBehaviorGlobalDesktop,o=t.notificationsBehaviorGlobalMobile,s=t.threadsEverything,l=t.globalNotificationsDisabled,c=t.channelsWithOverrides,u=this.state.syncGlobalMobileDesktop,d=Object(J.a)("https://get.slack.help/hc/"+this.zdLocale+"/articles/201355156-Desktop-notifications",n),p=[{label:Gt.t("All new messages"),value:"everything"},{label:Gt.t("Direct messages, mentions and keywords"),value:"mentions_dms"},{label:Gt.t("Nothing"),value:"nothing"}],h=Object(F.a)(p,["value",o]),m=c.length,b=m>0;return i.a.createElement(r.Fragment,null,i.a.createElement(le.a,{href:d,target:"_blank",className:"float_right sk_light_gray"},Gt.t("About notifications")," ",i.a.createElement(dt.b,{type:"question_circle"})),Object(Z.f)()?i.a.createElement(r.Fragment,null,i.a.createElement("h3",{className:"margin_bottom_50 inline_block"},Gt.t("Notify me about\u2026")),i.a.createElement(mt.a,{className:"p-prefs_modal__radiogroup"},i.a.createElement(lt,{text:Gt.t("All new messages"),description:Gt.t("You'll be notified for every new message"),selected:"everything"===a},i.a.createElement(ht.a,{name:"notifications",value:"everything",checked:"everything"===a,onChange:this.onChangeNotificationsBehaviorGlobalDesktop}),i.a.createElement("div",{className:"p-prefs_modal__radio_decorator"},this.renderNotificationExample("everything"))),i.a.createElement(lt,{text:Gt.t("Direct messages, mentions & keywords"),description:Gt.t("You'll be notified when a teammate mentions you, sends you a direct message, or uses one of your keywords"),selected:"mentions_dms"===a},i.a.createElement(ht.a,{name:"notifications",value:"mentions_dms",checked:"mentions_dms"===a,onChange:this.onChangeNotificationsBehaviorGlobalDesktop}),i.a.createElement("div",{className:"p-prefs_modal__radio_decorator"},this.renderNotificationExample("mentions_dms"))),i.a.createElement(lt,{text:Gt.t("Nothing"),description:Gt.rt("You won't receive notifications from Slack. Note: you will still see badges ({mentionBadge}) within Slack",{mentionBadge:i.a.createElement(ut.b,{count:1,className:"margin_left_0"})}),selected:"nothing"===a},i.a.createElement(ht.a,{name:"notifications",value:"nothing",checked:"nothing"===a,onChange:this.onChangeNotificationsBehaviorGlobalDesktop}),i.a.createElement("div",{className:"p-prefs_modal__radio_decorator"},this.renderNotificationExample("nothing"))))):this.renderNotificationsPrompt(),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:Gt.t("Notify me about replies to threads I'm following"),isDisabled:l,id:"prefs_threads_everything"},i.a.createElement(Ae.a,{onChange:this.onChangeThreadsEverything,name:"threads_everything",checked:s&&!l,disabled:l})),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:Gt.t("Use different settings for my mobile devices")},i.a.createElement(Ae.a,{onChange:this.onChangeSyncGlobalMobileDesktop,name:"sync_global_mobile_desktop",checked:!u})),u?null:i.a.createElement(ue.a,{selectId:"keyboard",selectedOption:h,onOptionSelected:this.onChangeNotificationsBehaviorGlobalMobile,options:p,width:345}),b?i.a.createElement("p",{className:"margin_top_100"},Gt.rt("You've also set notification preferences for <a>{allNotificationOverridesCount, plural, =1 {# channel} other {# channels}}</a>.",{allNotificationOverridesCount:m},function(t){var n=t.text;return i.a.createElement(_t.a,{onClick:e.onClickJumpToOverrides},n)})):null)}},{key:"renderKeywords",value:function(){var e=this.state,t=e.globalKeywords,n=e.globalKeywordsMaxReached;return i.a.createElement(r.Fragment,null,i.a.createElement("h3",{className:"margin_top_200 margin_bottom_50"},Gt.t("My keywords")),i.a.createElement("p",null,Gt.rt("Show a badge ({mentionBadge}) in my channel list when someone uses one of my keywords:",{mentionBadge:i.a.createElement(ut.b,{count:1,className:"margin_left_0"})})),i.a.createElement(bt.a,{name:"global_keywords",id:"global_keywords",value:t,hintText:Gt.t("Use commas to separate each keyword. Keywords are not case sensitive."),errorLevel:"error",errorText:n?Gt.t("A maximum of {MAX_KEYWORDS_COUNT} keywords are allowed.",{MAX_KEYWORDS_COUNT:Kt,fallbackHash:"92c404bc05c04cc6c63491f463f0ec39688f741a",fallbackHashNs:"client"}):"",onChange:this.onChangeGlobalKeywords}))}},{key:"renderNotificationWarnings",value:function(){return 0===Ht.length?null:i.a.createElement(pt.a,{level:"warning",type:"boxed",icon:"warning",heading:Gt.t("Looks like there might be an issue with your notifications"),className:"margin_bottom_100"},i.a.createElement("p",{className:"margin_bottom_50"},Gt.t("The following conditions might be preventing them from appearing how they should:")),i.a.createElement("ul",{className:"margin_bottom_50"},Ht.map(function(e,t){return i.a.createElement("li",{key:"warning_"+t},e)})))}},{key:"renderSoundPrefs",value:function(){var e=this,t=this.props,n=t.noTextInNotifications,o=t.muteSounds,s=t.allNotificationSounds,l=t.newMsgSnd,c=t.globalDesktopNotificationsDisabled,u=Object(a.a)(s,function(t,n){return i.a.createElement(ce.a,{text:t.display(),type:"inline",cursor:"pointer",className:"p-prefs_modal__sound_label",key:n},i.a.createElement(ht.a,{name:"desktop_sound",value:n,checked:n===l,onChange:e.onChangeNewMsgSnd}))}),d=i.a.createElement(mt.a,{className:"p-prefs_modal__inset_radiogroup nudge_left_3"},u);return i.a.createElement(r.Fragment,null,i.a.createElement("h3",{className:"margin_top_200 margin_bottom_50"},Gt.t("Sound & appearance")),Object(ie.v)("3.3")?this.renderNotificationWarnings():null,i.a.createElement("p",null,Gt.t("Choose how notifications look, sound, and behave.")," ",Object(Z.f)()?i.a.createElement(_t.a,{onClick:this.onClickShowExampleNotification},Gt.t("Show me an example notification.")):null),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:Gt.rt('<strong>Include a preview of the message in each notification</strong> <span class="sk_light_gray">(disable this for extra privacy)</span>'),isDisabled:c},i.a.createElement(Ae.a,{onChange:this.onChangeNoTextInNotifications,name:"no_text_in_notifications",checked:!n,disabled:c})),i.a.createElement("div",null,i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:Gt.t("Play a sound when receiving a notification"),isDisabled:o||c||Object(Z.r)(),className:"inline_flex"},i.a.createElement(Ae.a,{onChange:this.onChangePlaySounds,name:"play_sound",checked:"none"!==l,disabled:o||c||Object(Z.r)()})),"none"===l||o||c||Object(Z.r)()?null:d),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:Gt.t("Mute all sounds from Slack")},i.a.createElement(Ae.a,{onChange:this.onChangeMuteSounds,name:"mute_sounds",checked:o})))}},{key:"renderMobileEmailPrefs",value:function(){var e=this.props,t=e.pushIdleWait,n=e.emailAlerts,o=e.globalMobileNotificationsDisabled,s=e.hasHipaaCompliance,l=Object(a.a)(zt,function(e){return{label:"0"===e?Gt.t("as soon as I'm inactive"):Gt.t("after I've been inactive for {value, plural, =1 {# minute} other {# minutes}}",{value:e}),value:e}}),c=Object(F.a)(l,["value",t])||Object(F.a)(l,["value","2"]),u=i.a.createElement(r.Fragment,null,i.a.createElement("h3",{className:"margin_top_200 margin_bottom_50"},Gt.t("When I'm not active on desktop ...")),i.a.createElement(ce.a,{text:Gt.t("Send notifications to my mobile devices:"),className:"margin_bottom_100",isDisabled:o},i.a.createElement(ue.a,{selectId:"push_idle_wait",selectedOption:c,onOptionSelected:this.onChangePushIdleWait,options:l,width:300,isDisabled:o}))),d=s?null:i.a.createElement(r.Fragment,null,i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:Gt.t("Send me email notifications for mentions and direct messages")},i.a.createElement(Ae.a,{onChange:this.onChangeEmailAlerts,name:"email_alerts",checked:"none"!==n})),"none"===n?null:i.a.createElement(mt.a,{className:"p-prefs_modal__inset_radiogroup nudge_left_3"},i.a.createElement(ce.a,{text:Gt.t("once every 15 minutes"),type:"inline",cursor:"pointer"},i.a.createElement(ht.a,{name:"email_alerts_delay",value:"instant",checked:"instant"===n,onChange:this.onChangeEmailAlertsDelay})),i.a.createElement(ce.a,{text:Gt.t("once an hour"),type:"inline",cursor:"pointer"},i.a.createElement(ht.a,{name:"email_alerts_delay",value:"hourly",checked:"hourly"===n,onChange:this.onChangeEmailAlertsDelay}))));return i.a.createElement(r.Fragment,null,u,d)}},{key:"renderMacAppearancePrefs",value:function(){var e=this.props,t=e.macSSBBullet,n=e.macSSBBounce,a=e.globalDesktopNotificationsDisabled,o=this.state.macSSBBounceDuration;return i.a.createElement(r.Fragment,null,i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:Gt.rt("<strong>Show a badge {imgMacDockBadge} on Slack's icon to indicate new activity</strong>",{imgMacDockBadge:i.a.createElement("img",{src:cdn_url+"/9135/img/prefs_mac_dock_badge@2x.png",alt:Gt.t("A dock badge on Mac"),className:"p-prefs_modal__img_mac_dock_badge"})})},i.a.createElement(Ae.a,{onChange:this.onChangeMacDockBadge,name:"mac_ssb_bullet",checked:t})),i.a.createElement("div",{className:"inline_flex margin_right_150"},i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:Gt.t("Bounce Slack's icon when receiving a notification"),isDisabled:a},i.a.createElement(Ae.a,{onChange:this.onChangeMacDockBounce,name:"mac_ssb_bounce",checked:""!==n,disabled:a}))),i.a.createElement("div",{className:"inline_flex"},i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:Gt.rt('<span className="sk_light_gray normal">Only bounce it once</span>'),isDisabled:""===n||a},i.a.createElement(Ae.a,{onChange:this.onChangeMacDockBounceDuration,name:"mac_ssb_bounce_short",checked:"short"===o,disabled:""===n||a}))))}},{key:"renderWindowsAppearancePrefs",value:function(){var e=this.state,t=e.windowFlashBehavior,n=e.initialNotificationMethod,o=e.notificationMethod,s=e.notifyPosition,l=i.a.createElement(r.Fragment,null,i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:Gt.t("Flash window when receiving a notification")},i.a.createElement(Ae.a,{onChange:this.onChangeWindowFlashBehavior,name:"winssb_window_flash_behavior",checked:"never"!==t})),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",className:"margin_left_150",text:Gt.t("Only flash window when I'm not actively using my computer"),isDisabled:"never"===t},i.a.createElement(Ae.a,{onChange:this.onChangeWindowFlashBehaviorOnlyInactive,name:"winssb_window_flash_behavior",checked:"idle"===t,disabled:"never"===t}))),c=Object(a.a)(Object(_.a)(Bt,{enabled:!0}),function(e){return{label:e.label(),value:e.value}}),u=Object(F.a)(c,["value",o]),d=n!==o?i.a.createElement("p",{className:"margin_top_50"},Gt.t("You'll need to restart Slack for this to take effect.")):null,p=i.a.createElement(r.Fragment,null,i.a.createElement(ce.a,{text:Gt.t("Deliver notifications via..."),className:"margin_top_100"},i.a.createElement(ue.a,{selectId:"winssb_notification_method",selectedOption:u,onOptionSelected:this.onChangeNotificationMethod,options:c,width:400})),d),h=null;if("html"===o){var m=Object(a.a)(qt,function(e){return{label:e.label(),value:e.value}}),b=Object(F.a)(m,["value",s.corner]),f=Object(a.a)(Ut,function(e){return{label:e.label(),value:e.value}}),g=Object(F.a)(f,["value",s.display]);h=i.a.createElement(r.Fragment,null,i.a.createElement(ce.a,{text:Gt.t("Notification position"),className:"inline_block margin_right_100 margin_top_100"},i.a.createElement(ue.a,{selectId:"winssb_notify_corner",selectedOption:b,onOptionSelected:this.onChangeNotifyPositionCorner,options:m,width:300})),i.a.createElement(ce.a,{text:Gt.t("Display"),className:"inline_block margin_top_100"},i.a.createElement(ue.a,{selectId:"winssb_notify_display",selectedOption:g,onOptionSelected:this.onChangeNotifyPositionDisplay,options:f,width:300})))}return i.a.createElement(r.Fragment,null,l,p,h)}},{key:"renderChannelOverridesList",value:function(){var e=this.props,t=e.channelsWithOverrides,n=e.changePrefsActiveSection;if(!t||!t.length)return null;var a=Object(x.a)(t),o=t.map(function(e){return i.a.createElement(Rt,{channelId:e,key:e,last:e===a,changePrefsActiveSection:n})});return i.a.createElement(r.Fragment,null,i.a.createElement("h3",{className:"margin_top_200 margin_bottom_50",ref:this.overridesListRef},Gt.t("Channel-specific notifications")),i.a.createElement("div",{role:"list","aria-label":Gt.t("Channel-specific notifications")},o))}},{key:"renderDndPreferences",value:function(){var e=this.props,t=e.featureGranularDnd,n=e.changePrefsActiveSection;return t?i.a.createElement("div",{id:"prefs_dnd"},i.a.createElement("h3",{className:"margin_top_200 margin_bottom_50"},Gt.t("Notification schedule")),i.a.createElement(at,{changePrefsActiveSection:n})):i.a.createElement("div",{id:"prefs_dnd"},i.a.createElement("h3",{className:"margin_top_200 margin_bottom_50"},Gt.t("Do Not Disturb")),i.a.createElement(ot,{changePrefsActiveSection:n}))}},{key:"render",value:function(){return i.a.createElement("section",null,i.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},Gt.t("Notifications")),this.renderGlobalPrefs(),this.renderKeywords(),this.renderDndPreferences(),this.renderSoundPrefs(),re.V&&Object(ie.p)()?this.renderMacAppearancePrefs():null,re.V&&Object(ie.B)()?this.renderWindowsAppearancePrefs():null,this.renderMobileEmailPrefs(),this.renderChannelOverridesList())}}]),t}(r.Component);Qt.displayName="BasePrefsSectionNotifications",Qt.defaultProps=Yt;var Jt={setNotificationsGlobalPrefByApi:K.c,setUserPrefByApi:W.f,sendTestNotification:$.c,promptForPermission:$.b},Xt=Object(g.b)(function(e){var t=Object(V.b)(e),n=Object(G.d)(e,"push_idle_wait");return{featureGranularDnd:Object(E.i)(e,"feature_granular_dnd"),clogger:Object(q.a)({state:e}),logger:Object(j.a)({state:e,label:"PREFS"}),notificationsBehaviorGlobalDesktop:Object(G.d)(e,"global_desktop"),notificationsBehaviorGlobalMobile:Object(G.d)(e,"global_mobile"),helpCenterTrackingToken:Object(Y.b)(e),threadsEverything:Object(G.d)(e,"threads_everything"),globalKeywords:Object(G.d)(e,"global_keywords"),teamName:Object(R.e)(Object(N.d)(e)),memberName:Object(z.P)(e,t),noTextInNotifications:Object(G.d)(e,"no_text_in_notifications"),muteSounds:Object(U.h)(e,"mute_sounds"),newMsgSnd:Object(G.d)(e,"desktop_sound"),allNotificationSounds:Object(ae.b)(),pushIdleWait:null==n?"2":n.toString(),globalNotificationsDisabled:Object(Z.d)(e),globalDesktopNotificationsDisabled:Object(Z.b)(e),globalMobileNotificationsDisabled:Object(Z.c)(e),emailAlerts:Object(U.h)(e,"email_alerts"),macSSBBullet:Object(U.h)(e,"mac_ssb_bullet"),macSSBBounce:Object(U.h)(e,"mac_ssb_bounce"),channelsWithOverrides:Object(Z.i)(e),hasHipaaCompliance:Object(H.a)(e,"has_hipaa_compliance")}},Jt)(Qt),Zt=n("1myf"),$t=n("x3CK"),en=n("vKOW"),tn=n("K+2G"),nn=new O.b("prefs"),an=(o.b.string,o.b.string.isRequired,o.b.string.isRequired,o.b.string.isRequired,o.b.func.isRequired,o.b.func.isRequired,o.b.func.isRequired,o.b.func.isRequired,o.b.object.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,function(e){function t(e){u()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(k.a)(n,["onChangeLocale","onChangeTZ","onChangeAutoTZ","onChangeKeyboard","renderLocalePref","renderTZPref","renderAutoTZPref","maybeRenderKeyboardPref"]),n}return f()(t,e),p()(t,[{key:"onChangeLocale",value:function(e){var t=this.props,n=t.teamId,a=t.logger,r=e.value;a.action("Changed locale: "+r),Object(ee.a)()?(this.props.setShowOpenTransition(!1),this.props.setLocaleForTeam({locale:r,teamId:n})):this.props.openChangeLanguageDialog({locale:r})}},{key:"onChangeTZ",value:function(e){var t=this.props.logger,n=e.value;t.action("Changed tz: "+n),this.props.setUserPrefByApi({pref:"tz",value:n})}},{key:"onChangeAutoTZ",value:function(e){var t=this.props.logger,n=e.target.checked;if(t.action("Changed auto tz: "+n),this.props.setUserPrefByApi({pref:"set_tz_automatically",value:n}),n)try{var a=Intl.DateTimeFormat().resolvedOptions().timeZone;this.props.setUserPrefByApi({pref:"tz",value:a})}catch(e){t.error("Cannot set timezone automatically",e)}}},{key:"onChangeKeyboard",value:function(e){var t=this.props.logger,n=e.value;t.action("Changed keyboard: "+n),this.props.setUserPrefByApi({pref:"keyboard",value:n})}},{key:"maybeRenderKeyboardPref",value:function(){if(Object(re.e)())return null;var e=this.props.keyboard,t=Object(a.a)(Object($t.e)(),function(e,t){return{label:e,value:t}}),n=Object(F.a)(t,["value",e])||Object(F.a)(t,["value",$t.a]);return i.a.createElement(ce.a,{text:nn.t("Keyboard layout")},i.a.createElement(ue.a,{selectId:"keyboard",selectedOption:n,onOptionSelected:this.onChangeKeyboard,options:t,size:"large",width:"100%"}))}},{key:"renderLocalePref",value:function(){var e=this.props.locale,t=Object(a.a)(Object(Q.e)(),function(e,t){return{label:e,value:t}}),n=Object(Zt.a)(t,"label"),o=Object(F.a)(t,["value",e])||Object(F.a)(t,["value",O.b.DEFAULT_LOCALE]);return i.a.createElement(r.Fragment,null,i.a.createElement(ce.a,{text:nn.t("Language"),className:"margin_bottom_50"},i.a.createElement(ue.a,{selectId:"locale",selectedOption:o,onOptionSelected:this.onChangeLocale,options:n,size:"large",width:"100%",selectDataQa:"locale"})),i.a.createElement("p",{className:"sk_dark_gray margin_bottom_200"},nn.t("Choose the language you\u2019d like to use with Slack.")))}},{key:"renderTZPref",value:function(){var e=this.props,t=e.tz,n=e.locale,r=e.setTzAutomatically,o=e.featureSetTzAutomatically,s=Object(en.a)(n),l=Object(a.a)(s,function(e){return{label:e[0],value:e[1]}}),c=Object(F.a)(l,["value",t])||Object(F.a)(l,["value",O.b.DEFAULT_TZ]),u=r&&o;return i.a.createElement(ce.a,{text:nn.t("Time zone"),className:"margin_bottom_50",id:"prefs_timezone"},this.renderAutoTZPref(),i.a.createElement(ue.a,{selectId:"tz",isDisabled:u,selectedOption:c,onOptionSelected:this.onChangeTZ,options:l,size:"large",width:"100%"}))}},{key:"renderAutoTZPref",value:function(){var e=this.props,t=e.setTzAutomatically;return e.featureSetTzAutomatically?i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:nn.t("Set timezone automatically")},i.a.createElement(Ae.a,{name:"set_tz_automatically",checked:t,onChange:this.onChangeAutoTZ})):null}},{key:"render",value:function(){return i.a.createElement("section",null,i.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},nn.t("Language & Region")),this.renderLocalePref(),this.renderTZPref(),this.maybeRenderKeyboardPref())}}]),t}(r.Component));an.displayName="PrefsSectionLanguageRegion",an.defaultProps={keyboard:null};var rn={setUserPrefByApi:function(){return W.f.apply(void 0,arguments)},setShowOpenTransition:function(){return T.b.apply(void 0,arguments)},openChangeLanguageDialog:function(){return tn.a.apply(void 0,arguments)},setLocaleForTeam:function(){return W.d.apply(void 0,arguments)}},on=Object(g.b)(function(e){var t=Object(N.d)(e).id;return{featureSetTzAutomatically:Object(E.i)(e,"feature_set_tz_automatically"),keyboard:Object(U.h)(e,"keyboard"),tz:Object(U.h)(e,"tz"),locale:Object(U.a)(e),teamId:t,logger:Object(j.a)({state:e,label:"PREFS"}),setTzAutomatically:Object(U.h)(e,"set_tz_automatically")}},rn)(an),sn=n("K7CU"),ln=n("om+M"),cn=n("4zXV"),un=Object(ln.a)("Get the user's email token, if it exists.",function(e){return e(Object(cn.a)({method:"users.emailtoken.get",reason:"users.emailtoken.get"}))}),dn=Object(ln.a)("Create a new token, replacing an existing one if it exists.",function(e){return e(Object(cn.a)({method:"users.emailtoken.create",reason:"users.emailtoken.create"}))}),pn=Object(ln.a)("Delete the user's email token",function(e){return e(Object(cn.a)({method:"users.emailtoken.delete",reason:"users.emailtoken.delete"}))}),hn=n("jK7E"),mn=n("ICFZ"),bn=n("CSaH"),fn=n("qEEt"),_n=n("fL8H"),gn=new O.b("prefs"),vn=(o.b.string.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.string.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.func.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.func,o.b.func,o.b.func,o.b.func,o.b.func.isRequired,o.b.object.isRequired,{getEmailToken:B.a,createEmailToken:B.a,deleteEmailToken:B.a,openModal:B.a}),yn=function(e){function t(e){u()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k.a)(n,["onChangeMessagesTheme","onChangeDisplayRealNamesOverride","onChangeShowTyping","onChangeTime24","onChangeHideHexSwatch","onChangeEmojiMode","onChangeJumbomoji","onChangeConvertEmoticons","onChangeExpandInternalInlineImgs","onChangeExpandInlineImgs","onChangeObeyInlineImageLimit","onClickProfileLink","onClickCreateEmailForwardingAddress","onClickCopyEmailForwardingAddress","onClickDeleteEmailForwardingAddress","onConfirmDeleteEmailForwardingAddress","onLeaveCopyButton","onChangeExpandNonMediaAttachments"]),n.state={emailForwardingAddress:"",emailAddressCopied:!1};var a=Date.now();return n.currentTimestamp=Math.floor(a/1e3),n}return f()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getEmailToken().then(function(t){if(t.email_address){var n=t.email_address;e.setState(function(){return{emailForwardingAddress:n}})}}).catch(function(t){t&&t.data&&"no_emailtoken"===t.data.error||e.props.logger.error("Unable to get email token",t)})}},{key:"onChangeMessagesTheme",value:function(e){var t=this.props.logger,n=e.target.value;t.action("Changed messages_theme: "+n),this.props.setUserPrefByApi({pref:"messages_theme",value:n})}},{key:"onChangeDisplayRealNamesOverride",value:function(e){var t=this.props,n=t.displayRealNames,a=t.logger,r="real_names"===e.target.value,i=void 0;i=n?r?0:-1:r?1:0,a.action("Changed display_real_names_override: "+i),this.props.setUserPrefByApi({pref:"display_real_names_override",value:i})}},{key:"onChangeShowTyping",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed show_typing: "+n),this.props.setUserPrefByApi({pref:"show_typing",value:n})}},{key:"onChangeTime24",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed time24: "+n),this.props.setUserPrefByApi({pref:"time24",value:n})}},{key:"onChangeHideHexSwatch",value:function(e){var t=this.props.logger,n=!e.target.checked;t.action("Changed hide_hex_swatch: "+n),this.props.setUserPrefByApi({pref:"hide_hex_swatch",value:n})}},{key:"onChangeEmojiMode",value:function(e){var t=this.props.logger,n=e.target.checked?"as_text":"default";t.action("Changed emoji_mode: "+n),this.props.setUserPrefByApi({pref:"emoji_mode",value:n})}},{key:"onChangeJumbomoji",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed jumbomoji: "+n),this.props.setUserPrefByApi({pref:"jumbomoji",value:n})}},{key:"onChangeConvertEmoticons",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed convert_emoticons: "+n),this.props.setUserPrefByApi({pref:"convert_emoticons",value:n})}},{key:"onChangeExpandInternalInlineImgs",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed expand_internal_inline_imgs: "+n),this.props.setUserPrefByApi({pref:"expand_internal_inline_imgs",value:n})}},{key:"onChangeExpandInlineImgs",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed expand_inline_imgs: "+n),this.props.setUserPrefByApi({pref:"expand_inline_imgs",value:n})}},{key:"onChangeObeyInlineImageLimit",value:function(e){var t=this.props.logger,n=!e.target.checked;t.action("Changed obey_inline_img_limit: "+n),this.props.setUserPrefByApi({pref:"obey_inline_img_limit",value:n})}},{key:"onChangeExpandNonMediaAttachments",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed expand_non_media_attachments: "+n),this.props.setUserPrefByApi({pref:"expand_non_media_attachments",value:n})}},{key:"onClickProfileLink",value:function(e){e.preventDefault(),this.props.closeModal(),Object(ee.a)()||Object(hn.a)()}},{key:"onClickCreateEmailForwardingAddress",value:function(){var e=this,t=this.props.logger;this.props.createEmailToken().then(function(n){var a=n.email_address;e.setState(function(){return{emailForwardingAddress:a}}),t.action("Created email forwarding address")}).catch(function(e){t.error("Unable to create email token",e)})}},{key:"onClickCopyEmailForwardingAddress",value:function(){var e=this.props.logger,t=this.state.emailForwardingAddress;Object(mn.b)(gn.t("Send to Slack <{emailForwardingAddress}>",{emailForwardingAddress:t})),e.action("Copied email forwarding address"),this.setState(function(){return{emailAddressCopied:!0}})}},{key:"onLeaveCopyButton",value:function(){this.state.emailAddressCopied&&this.setState(function(){return{emailAddressCopied:!1}})}},{key:"onClickDeleteEmailForwardingAddress",value:function(){var e=this.state.emailForwardingAddress;this.props.openModal({element:i.a.createElement(_n.a,{title:gn.t("This address will be permanently deleted"),goButtonType:"danger",goButtonText:gn.t("Disable Address"),onGo:this.onConfirmDeleteEmailForwardingAddress,showCancelButton:!0},i.a.createElement("p",null,gn.rt("The address <strong>{emailForwardingAddress}</strong> will no longer work. If you'd like, you can always request a new forwarding address.",{emailForwardingAddress:e}))),isStackable:!0})}},{key:"onConfirmDeleteEmailForwardingAddress",value:function(){var e=this,t=this.props.logger;this.props.deleteEmailToken().then(function(){e.setState(function(){return{emailForwardingAddress:""}}),t.action("Deleted email forwarding address")}).catch(function(e){t.error("Unable to delete email token",e)})}},{key:"renderEmailForwarding",value:function(){var e=this.state,t=e.emailForwardingAddress,n=e.emailAddressCopied;return i.a.createElement(r.Fragment,null,i.a.createElement("hr",{className:"margin_top_150 margin_bottom_150"}),i.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},gn.t("Bring Emails into Slack")),i.a.createElement("p",null,gn.t("You can upload any important email to Slack by forwarding it to a unique email address. Slackbot will deliver the email, and you can keep it private or share it with your team.")),t?i.a.createElement(r.Fragment,null,i.a.createElement("p",null,i.a.createElement(fn.b,{id:"email_forwarding_address",name:"email_forwarding_address",value:t,className:"p-prefs_modal__email_forwarding_address_input"}),i.a.createElement(Be.c,{tip:n?gn.t("Copied!"):gn.t("Copy email address"),onMouseLeave:this.onLeaveCopyButton},i.a.createElement(ft.d,{type:"outline",onClick:this.onClickCopyEmailForwardingAddress},gn.t("Copy")))),i.a.createElement("p",null,i.a.createElement(_t.a,{onClick:this.onClickDeleteEmailForwardingAddress},gn.t("Disable this address")))):i.a.createElement("p",null,i.a.createElement(ft.d,{type:"outline",onClick:this.onClickCreateEmailForwardingAddress},gn.t("Get a Forwarding Address"))))}},{key:"renderAvatar",value:function(e){var t=cdn_url+"/2b909/img/name_pref/avatar_meg@2x.png";return"slackbot"===e&&(t=cdn_url+"/16510/img/slackbot_72.png"),i.a.createElement("div",{className:"p-prefs_modal__message_example__avatar"},i.a.createElement("img",{className:"c-avatar__image",src:t,alt:"user avatar"}))}},{key:"renderMessage",value:function(e,t){return i.a.createElement("div",{className:"p-prefs_modal__message_example"},this.renderAvatar(e),i.a.createElement("div",{className:"p-prefs_modal__message_example__message_body"},i.a.createElement("span",{className:"c-message__sender"},e),i.a.createElement("span",{className:"c-timestamp"},Object(bn.a)(this.currentTimestamp,"{time}")),i.a.createElement("br",null),i.a.createElement("span",null,t)))}},{key:"renderCompactMessage",value:function(e,t){return i.a.createElement("div",{className:"p-prefs_modal__message_example p-prefs_modal__message_example--compact"},i.a.createElement("div",{className:"p-prefs_modal__message_example__gutter"},i.a.createElement("span",{className:"c-timestamp"},Object(bn.a)(this.currentTimestamp,"{time}"))),i.a.createElement("div",{className:"p-prefs_modal__message_example__message_content"},i.a.createElement("span",{className:"c-message__sender"},e),i.a.createElement("span",{className:""},t)))}},{key:"renderMessageThemeExample",value:function(e){var t=gn.t("Feeling great!");return"dense"===e?this.renderCompactMessage("slackbot",t):this.renderMessage("slackbot",t)}},{key:"renderMessageExampleForNames",value:function(e){var t=this.props,n=t.messagesTheme,a=t.shouldRenderEmojiAsText,r=gn.t("Meg");"real_names"===e&&(r=gn.t("Megan Anne"));var o=gn.rt("{wave_emoji} Hi, I'm <span>{name}</span>",{wave_emoji:i.a.createElement(ct.b,{text:":wave:",emojiSize:ct.a.MEDIUM,emojiMode:a?"as_text":"default"}),name:"@Meg"},function(e){var t=e.text;return i.a.createElement("span",{className:"c-member_slug c-member_slug--link"},t)});return"dense"===n?this.renderCompactMessage(r,o):this.renderMessage(r,o)}},{key:"render",value:function(){var e=this.props,t=e.messagesTheme,n=e.showTyping,a=e.time24,o=e.locale,s=e.hideHexSwatch,l=e.jumbomoji,c=e.convertEmoticons,u=e.expandInternalInlineImgs,d=e.expandInlineImgs,p=e.obeyInlineImgLimit,h=e.expandNonMediaAttachments,m=e.displayRealNames,b=e.shouldDisplayRealNames,f=e.shouldRenderEmojiAsText,_=e.emailForwardingEnabled,g=i.a.createElement(ct.b,{text:":smile:",emojiMode:f?"as_text":"default"}),v=i.a.createElement(_t.a,{onClick:this.onClickProfileLink},gn.t("your profile")),y=i.a.createElement(r.Fragment,null,i.a.createElement("p",{className:"margin_bottom_0"},i.a.createElement("strong",null,gn.t("Show JUMBOMOJI"))),i.a.createElement("p",{className:"normal margin_bottom_0"},gn.t("Display the jumbo versions of emoji (up to 23 at a time!) in messages without text."))),k=o===O.b.DEFAULT_LOCALE;return i.a.createElement("section",null,i.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},gn.t("Messages")),i.a.createElement("h3",{className:"margin_bottom_50"},gn.t("Theme")),i.a.createElement(mt.a,{className:"p-prefs_modal__radiogroup"},i.a.createElement(lt,{text:gn.t("Clean"),description:gn.t("Clear, friendly, and focused"),selected:"light_with_avatars"===t||"default"===t},i.a.createElement(ht.a,{name:"messages_theme_set",value:"light_with_avatars",checked:"light_with_avatars"===t||"default"===t,onChange:this.onChangeMessagesTheme}),i.a.createElement("div",{className:"p-prefs_modal__radio_decorator"},this.renderMessageThemeExample("clean"))),i.a.createElement(lt,{text:gn.t("Compact"),description:gn.t("The most messages you can fit on screen at once"),selected:"dense"===t},i.a.createElement(ht.a,{name:"messages_theme_set",value:"dense",checked:"dense"===t,onChange:this.onChangeMessagesTheme}),i.a.createElement("div",{className:"p-prefs_modal__radio_decorator"},this.renderMessageThemeExample("dense")))),i.a.createElement("h3",{className:"margin_bottom_50"},gn.t("Names")),i.a.createElement(mt.a,{className:"p-prefs_modal__radiogroup margin_bottom_50"},i.a.createElement(lt,{text:gn.t("Full & display names"),description:gn.rt("Show display names in conversation and full names everywhere else <strong>{workspaceDefault}</strong>",{workspaceDefault:m?"(workspace default)":""}),selected:b},i.a.createElement(ht.a,{name:"display_real_names_override_set",value:"real_names",checked:b,onChange:this.onChangeDisplayRealNamesOverride}),i.a.createElement("div",{className:"p-prefs_modal__radio_decorator"},this.renderMessageExampleForNames("real_names"))),i.a.createElement(lt,{text:gn.t("Just display names"),description:gn.rt("Always show display names <strong>{workspaceDefault}</strong>",{workspaceDefault:m?"":"(workspace default)"}),selected:!b},i.a.createElement(ht.a,{name:"display_real_names_override_set",value:"display_names",checked:!b,onChange:this.onChangeDisplayRealNamesOverride}),i.a.createElement("div",{className:"p-prefs_modal__radio_decorator"},this.renderMessageExampleForNames("display_names")))),i.a.createElement("p",null,gn.rt("To change your full or display name, head to {profileLink}.",{profileLink:v})),i.a.createElement("h3",{className:"margin_bottom_50"},gn.t("Additional options")),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:gn.t("Display information about who is currently typing a message")},i.a.createElement(Ae.a,{onChange:this.onChangeShowTyping,name:"show_typing",checked:n})),k?i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:gn.rt('<strong>Show times with 24-hour clock</strong> <span class="normal">(16:00 rather than 4:00 PM)</span>')},i.a.createElement(Ae.a,{onChange:this.onChangeTime24,name:"time24",checked:a})):null,i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:gn.t("Display color swatches next to hexadecimal values"),className:"margin_bottom_100"},i.a.createElement(Ae.a,{onChange:this.onChangeHideHexSwatch,name:"hide_hex_swatch",checked:!s})),i.a.createElement("h3",{className:"margin_bottom_50"},gn.t("Emoji")),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:gn.t("Display emoji as plain text")},i.a.createElement(Ae.a,{onChange:this.onChangeEmojiMode,name:"emoji_mode",checked:f})),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:y,isDisabled:f||"dense"===t},i.a.createElement(Ae.a,{onChange:this.onChangeJumbomoji,name:"jumbomoji",checked:l,disabled:f||"dense"===t})),"dense"===t?gn.rt('<p className="margin_bottom_50 margin_left_150"><strong>Note:</strong> In compact mode, all emoji remain at a smaller, more sensible size.</p>'):"",i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:gn.rt("Convert my typed emoticons to emoji, so :D becomes {smileEmoji}",{smileEmoji:g}),isDisabled:f,className:"margin_bottom_150 bold"},i.a.createElement(Ae.a,{onChange:this.onChangeConvertEmoticons,name:"convert_emoticons",checked:c,disabled:f})),i.a.createElement("hr",{className:"margin_bottom_150"}),i.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},gn.t("Inline Media & Links")),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:gn.t("Show images and files uploaded to Slack")},i.a.createElement(Ae.a,{onChange:this.onChangeExpandInternalInlineImgs,name:"expand_internal_inline_imgs",checked:u})),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:gn.t("Show images and files from linked websites")},i.a.createElement(Ae.a,{onChange:this.onChangeExpandInlineImgs,name:"expand_inline_imgs",checked:d})),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:gn.t("Even if they're larger than 2MB"),className:"margin_left_150",isDisabled:!d,id:"prefs_inline_media"},i.a.createElement(Ae.a,{onChange:this.onChangeObeyInlineImageLimit,name:"obey_inline_img_limit",checked:!p,disabled:!d})),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:gn.t("Show text previews of linked websites")},i.a.createElement(Ae.a,{onChange:this.onChangeExpandNonMediaAttachments,name:"expand_non_media_attachments",checked:h})),_?this.renderEmailForwarding():null)}}]),t}(r.Component);yn.displayName="PrefsSectionMessagesMedia",yn.defaultProps=vn;var kn={setUserPrefByApi:W.f,openModal:l.e,closeModal:l.a,getEmailToken:un,createEmailToken:dn,deleteEmailToken:pn},On=Object(g.b)(function(e){return{messagesTheme:Object(U.h)(e,"messages_theme"),showTyping:Object(U.h)(e,"show_typing"),time24:Object(U.h)(e,"time24"),locale:Object(U.a)(e),hideHexSwatch:Object(U.h)(e,"hide_hex_swatch"),jumbomoji:Object(U.h)(e,"jumbomoji"),convertEmoticons:Object(U.h)(e,"convert_emoticons"),expandInternalInlineImgs:Object(U.h)(e,"expand_internal_inline_imgs"),expandInlineImgs:Object(U.h)(e,"expand_inline_imgs"),expandNonMediaAttachments:Object(U.h)(e,"expand_non_media_attachments"),obeyInlineImgLimit:Object(U.h)(e,"obey_inline_img_limit"),displayRealNames:Object(H.a)(e,"display_real_names"),shouldDisplayRealNames:Object(U.i)(e),shouldRenderEmojiAsText:Object(sn.m)(e),emailForwardingEnabled:Object(z.gb)(e),logger:Object(j.a)({state:e,label:"PREFS"})}},kn)(yn),jn=n("W+QA"),Cn=n("VMwU"),En=n("tVnY"),wn=n("hW7K"),Sn=n("Dpde"),In=n("udbT"),Tn=new O.b("prefs"),Nn=150,Rn=[{name:"default_theme",label:function(){return Tn.t("Aubergine")},thumb:cdn_url+"/d65d3/img/themes/aubergine.png"},{name:"aubergine_classic_theme",label:function(){return Tn.t("Aubergine Classic")},thumb:cdn_url+"/d65d3/img/themes/aubergine_classic.png"},{name:"hoth_theme",label:function(){return Tn.t("Hoth")},thumb:cdn_url+"/c41f9/img/themes/hoth.png"},{name:"monument_theme",label:function(){return Tn.t("Monument")},thumb:cdn_url+"/c41f9/img/themes/monument.png"},{name:"chocolate_theme",label:function(){return Tn.t("Choco Mint")},thumb:cdn_url+"/c41f9/img/themes/chocolate.png"},{name:"ocean_theme",label:function(){return Tn.t("Ochin")},thumb:cdn_url+"/c41f9/img/themes/ocean.png"},{name:"workhard_theme",label:function(){return Tn.t("Work Hard")},thumb:cdn_url+"/c41f9/img/themes/workhard.png"},{name:"nocturne_theme",label:function(){return Tn.t("Nocturne")},thumb:cdn_url+"/c1d2/img/themes/nocturne.png"}],An=[{name:"midnight_theme",label:function(){return Tn.t("Midnight")},thumb:cdn_url+"/33aef/img/themes/midnight.png"},{name:"stark_theme",label:function(){return Tn.t("Stark")},thumb:cdn_url+"/af3644/img/themes/stark.png"},{name:"cloud_theme",label:function(){return Tn.t("Cloud")},thumb:cdn_url+"/cbe92/img/themes/cloud.png"},{name:"kaiyo_theme",label:function(){return Tn.t("Kaiyo")},thumb:cdn_url+"/cbe92/img/themes/kaiyo.png"}],Pn=[{name:"brinjal_theme",label:function(){return Tn.t("Tritanopia")},thumb:cdn_url+"/c41f9/img/themes/brinjal.png"},{name:"solanum_theme",label:function(){return Tn.t("Protanopia & Deuteranopia",{fallbackHash:"fc1efd15a53303d74c9c5f779ced7e1d47a756d6"})},thumb:cdn_url+"/c41f9/img/themes/solanum.png"}],Mn=[{id:"column_bg",label:function(){return Tn.t("Column BG")}},{id:"nav_bar_bg",label:function(){return Tn.t("Nav Bar BG")}},{id:"nav_bar_text",label:function(){return Tn.t("Nav Bar Text")}},{id:"menu_bg",label:function(){return Tn.t("Menu BG Hover")}},{id:"active_item",label:function(){return Tn.t("Active Item")}},{id:"active_item_text",label:function(){return Tn.t("Active Item Text")}},{id:"hover_item",label:function(){return Tn.t("Hover Item")}},{id:"text_color",label:function(){return Tn.t("Text Color")}},{id:"active_presence",label:function(){return Tn.t("Active Presence")}},{id:"badge",label:function(){return Tn.t("Mention Badge")}}],Dn=(o.b.bool.isRequired,o.b.string.isRequired,o.b.string,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool,o.b.bool.isRequired,o.b.bool.isRequired,o.b.string,o.b.shape({column_bg:o.b.string.isRequired,nav_bar_bg:o.b.string,nav_bar_text:o.b.string,menu_bg:o.b.string,active_item:o.b.string.isRequired,active_item_text:o.b.string.isRequired,hover_item:o.b.string.isRequired,text_color:o.b.string.isRequired,active_presence:o.b.string.isRequired,badge:o.b.string.isRequired}),o.b.bool.isRequired,o.b.string.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.func.isRequired,o.b.func.isRequired,o.b.object.isRequired,o.b.bool,{channelSort:"default",separateOrgChannels:!0,sidebarTheme:"default_theme",customTheme:Cn.a,historyNavigationEnabled:!1}),xn=function(e){function t(e){u()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(k.a)(n,["onChangeSidebarBehavior","onChangeChannelSort","onChangeSeparatePrivateChannels","onChangeSeparateOrgChannels","onChangeSeparateSharedChannels","onChangeEnableAllUnreadView","onChangeShowSidebarQuickswitcherButton","onChangeSidebarTheme","onClickOpenCustomThemes","onChangeCustomThemePicker","onChangeCustomThemeValues","onClickCopyCustomTheme"]),n.state={customThemesOpen:"custom_theme"===n.props.sidebarTheme,customTheme:n.props.customTheme},n.setCustomThemeByAPI=Object(L.a)(n.setCustomThemeByAPI,Nn),n}return f()(t,e),p()(t,[{key:"onChangeSidebarBehavior",value:function(e){var t=this.props.logger,n=e.target.value;t.action("Changed sidebar_behavior: "+n),this.props.setUserPrefByApi({pref:"sidebar_behavior",value:n})}},{key:"onChangeChannelSort",value:function(e){var t=this.props.logger,n=e.target.value;t.action("Changed channel_sort: "+n),this.props.setUserPrefByApi({pref:"channel_sort",value:n})}},{key:"onChangeSeparatePrivateChannels",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed separate_private_channels: "+n),this.props.setUserPrefByApi({pref:"separate_private_channels",value:n})}},{key:"onChangeSeparateSharedChannels",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed separate_shared_channels: "+n),this.props.setUserPrefByApi({pref:"separate_shared_channels",value:n})}},{key:"onChangeSeparateOrgChannels",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed ent_org_wide_channels_sidebar: "+n),this.props.setUserPrefByApi({pref:"ent_org_wide_channels_sidebar",value:n})}},{key:"onChangeEnableAllUnreadView",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed enable_unread_view: "+n),this.props.setUserPrefByApi({pref:"enable_unread_view",value:n})}},{key:"onChangeShowSidebarQuickswitcherButton",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed show_sidebar_quickswitcher_button: "+n),this.props.setUserPrefByApi({pref:"show_sidebar_quickswitcher_button",value:n})}},{key:"onChangeSidebarTheme",value:function(e){var t=this.props,n=t.useGlobalNav,a=t.logger,r=e.target.value;a.action("Changed sidebarTheme: "+r);var i=Object(jn.e)(r,null,{useGlobalNav:n});this.setState(function(){return{customTheme:vt()({},i)}}),this.props.setMultipleUserPrefsByApi({sidebar_theme:r,sidebar_theme_custom_values:JSON.stringify(i)})}},{key:"onClickOpenCustomThemes",value:function(){this.setState(function(){return{customThemesOpen:!0}})}},{key:"onChangeCustomThemePicker",value:function(e,t){var n=this.state.customTheme;n[e]="#"+t,this.setCustomTheme(n)}},{key:"onChangeCustomThemeValues",value:function(e){var t=this.props.useGlobalNav,n=Object(jn.c)(t,e.replace(/ /g,"").split(","));n&&this.setCustomTheme(n)}},{key:"onClickCopyCustomTheme",value:function(){var e=this.state.customTheme,t=this.props.useGlobalNav,n=Object(jn.d)(e,t);Object(mn.b)(n)}},{key:"setCustomTheme",value:function(e){this.setState(function(){return{customTheme:e}}),this.setCustomThemeByAPI(e)}},{key:"setCustomThemeByAPI",value:function(e){var t=this.props.logger,n=JSON.stringify(e);t.action("Changed customTheme: "+n),this.props.setMultipleUserPrefsByApi({sidebar_theme:"custom_theme",sidebar_theme_custom_values:n})}},{key:"renderSidebarBehavior",value:function(){var e=this.props.sidebarBehavior,t=i.a.createElement(r.Fragment,null,i.a.createElement("p",{className:"margin_bottom_0"},i.a.createElement("strong",null,Tn.t("Everything"))),i.a.createElement("p",{className:"margin_bottom_0"},Tn.t("All of your conversations."))),n=i.a.createElement(r.Fragment,null,i.a.createElement("p",{className:"margin_bottom_0"},i.a.createElement("strong",null,Tn.t("Unreads and starred conversations"))),i.a.createElement("p",{className:"margin_bottom_0"},Tn.t("Your unread conversations and conversations you've starred."))),a=i.a.createElement(r.Fragment,null,i.a.createElement("p",{className:"margin_bottom_0"},i.a.createElement("strong",null,Tn.t("Unreads only"))),i.a.createElement("p",{className:"margin_bottom_0"},Tn.t("Only your unread conversations.")));return i.a.createElement(r.Fragment,null,i.a.createElement("h3",{className:"margin_bottom_50"},Tn.t("Appearance")),i.a.createElement("p",null,Tn.t("Choose what is visible in your sidebar.")),i.a.createElement(mt.a,null,i.a.createElement(ce.a,{text:t,type:"inline",cursor:"pointer"},i.a.createElement(ht.a,{name:"sidebar_behavior_set",value:"",checked:""===e,onChange:this.onChangeSidebarBehavior})),i.a.createElement(ce.a,{text:n,type:"inline",cursor:"pointer"},i.a.createElement(ht.a,{name:"sidebar_behavior_set",value:"hide_read_channels_unless_starred",checked:"hide_read_channels_unless_starred"===e,onChange:this.onChangeSidebarBehavior})),i.a.createElement(ce.a,{text:a,type:"inline",cursor:"pointer"},i.a.createElement(ht.a,{name:"sidebar_behavior_set",value:"hide_read_channels",checked:"hide_read_channels"===e,onChange:this.onChangeSidebarBehavior}))))}},{key:"renderChannelSort",value:function(){var e=this.props.channelSort,t=i.a.createElement(r.Fragment,null,i.a.createElement("p",{className:"margin_bottom_0"},i.a.createElement("strong",null,Tn.t("Alphabetical"))),i.a.createElement("p",{className:"margin_bottom_0"},Tn.t("Sort conversations alphabetically (default)"))),n=i.a.createElement(r.Fragment,null,i.a.createElement("p",{className:"margin_bottom_0"},i.a.createElement("strong",null,Tn.t("Priority"))),i.a.createElement("p",{className:"margin_bottom_0"},Tn.t("Sort conversations scientifically (based on how you use Slack)")));return i.a.createElement(r.Fragment,null,i.a.createElement("h3",{className:"margin_bottom_50"},Tn.t("Sorting and grouping")),i.a.createElement("p",null,Tn.t("Choose how channels in your sidebar are sorted.")),i.a.createElement(mt.a,null,i.a.createElement(ce.a,{text:t,type:"inline",cursor:"pointer"},i.a.createElement(ht.a,{name:"channel_sort_set",value:"default",checked:"default"===e,onChange:this.onChangeChannelSort})),i.a.createElement(ce.a,{text:n,type:"inline",cursor:"pointer"},i.a.createElement(ht.a,{name:"channel_sort_set",value:"priority",checked:"priority"===e,onChange:this.onChangeChannelSort}))))}},{key:"renderChannelGroupings",value:function(){var e=this.props,t=e.featureChannelIsRemoveCreateSharedChannel,n=e.separatePrivateChannels,a=e.separateSharedChannels,o=e.sharedChannelsEnabled,s=e.enterpriseTeam,l=e.separateOrgChannels,c=i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:Tn.t("List organization channels separately")},i.a.createElement(Ae.a,{onChange:this.onChangeSeparateOrgChannels,name:"ent_org_wide_channels_sidebar",checked:l})),u=i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:Tn.t("List shared channels separately")},i.a.createElement(Ae.a,{onChange:this.onChangeSeparateSharedChannels,name:"separate_shared_channels",checked:a})),d=!t&&o;return i.a.createElement(r.Fragment,null,i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:Tn.t("List private channels separately")},i.a.createElement(Ae.a,{onChange:this.onChangeSeparatePrivateChannels,name:"separate_private_channels",checked:n})),d?u:null,s?c:null)}},{key:"renderAdditionalOptions",value:function(){var e=this.props,t=e.enableUnreadView,n=e.showSidebarQuickswitcherButton,a=e.historyNavigationEnabled,o=i.a.createElement(r.Fragment,null,i.a.createElement("p",{className:"margin_bottom_0"},i.a.createElement("strong",null,Tn.t("Show All Unreads"))),i.a.createElement("p",{className:"margin_bottom_0"},Tn.t("This collects all the messages you've missed in one handy place."))),s=i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:o},i.a.createElement(Ae.a,{onChange:this.onChangeEnableAllUnreadView,name:"enable_unread_view",checked:t})),l=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(ie.p)()?Tn.t("Cmd"):Tn.t("Ctrl")),c=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"K"),u=i.a.createElement(r.Fragment,null,i.a.createElement("p",{className:"margin_bottom_0"},i.a.createElement("strong",null,Tn.t("Show the Quick Switcher"))),i.a.createElement("p",{className:"margin_bottom_0"},Tn.t("This lets you jump to conversations in a snap.")),i.a.createElement("p",{className:"margin_bottom_0"},Tn.rt("(You can also use {modKey}{kKey})",{modKey:l,kKey:c}))),d=i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:u},i.a.createElement(Ae.a,{onChange:this.onChangeShowSidebarQuickswitcherButton,name:"show_sidebar_quickswitcher_button",checked:n}));return i.a.createElement(r.Fragment,null,i.a.createElement("h3",{className:"margin_bottom_50 margin_top_200"},Tn.t("Additional Options")),s,!a&&d)}},{key:"renderThemeOption",value:function(e){var t=this.props.sidebarTheme,n=i.a.createElement(r.Fragment,null,e.label(),i.a.createElement("br",null),i.a.createElement("img",{alt:Tn.t("Switch to the {themeName} theme",{themeName:e.label()}),src:e.thumb,className:"p-prefs_modal__theme_thumb"}));return i.a.createElement(ce.a,{text:n,type:"inline",cursor:"pointer",key:e.name,className:"p-prefs_modal__theme_label"},i.a.createElement(ht.a,{name:"sidebar_theme",value:e.name,checked:t===e.name,onChange:this.onChangeSidebarTheme}))}},{key:"renderThemeSection",value:function(){var e=this,t=this.props,n=t.teamName,a=t.useGlobalNav,o=a&&An.map(function(t){return e.renderThemeOption(t)}),s=Rn.map(function(t){return e.renderThemeOption(t)}),l=Pn.map(function(t){return e.renderThemeOption(t)});return i.a.createElement(r.Fragment,null,i.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},Tn.t("Theme")),i.a.createElement("p",null,Tn.rt("Customize the look of the <strong>{teamName}</strong> workspace. Only you will see this.",{teamName:n})),i.a.createElement(mt.a,null,a?i.a.createElement(r.Fragment,null,i.a.createElement("h3",{className:"margin_bottom_100"},Tn.t("Fresh New Themes")),o,i.a.createElement("h3",{className:"margin_top_100 margin_bottom_100"},Tn.t("Classic Themes"))):null,s,i.a.createElement("h3",{className:"margin_top_100 margin_bottom_100"},Tn.t("Accessible Themes")),l))}},{key:"renderCustomThemePickers",value:function(){var e=this,t=this.props,n=t.useGlobalNav,a=t.sidebarTheme,r=this.state.customTheme,o=Object(jn.e)(a,vt()({},r),{useGlobalNav:n});return n&&(o=Object(En.a)(o)),Mn.map(function(t){if(!n&&jn.a.includes(t.id))return null;if(n&&jn.b.includes(t.id))return null;var a=o[t.id]?o[t.id].replace(/#/,""):"FFFFFF";return i.a.createElement("div",{className:"p-prefs_modal__custom_theme_picker",key:t.id},i.a.createElement("span",{className:"bold"},t.label()),i.a.createElement("br",null),i.a.createElement(In.a,{value:a,onChange:function(n){return e.onChangeCustomThemePicker(t.id,n)}}))})}},{key:"renderCustomThemeSection",value:function(){var e=this.props,t=e.sidebarTheme,n=e.useGlobalNav,a=this.state,o=a.customThemesOpen,s=a.customTheme,l=Object(jn.d)(s,n);return o||"custom_theme"===t?i.a.createElement("div",{className:"margin_bottom_400"},i.a.createElement("h3",{className:"margin_bottom_100"},Tn.t("Custom Theme")),this.renderCustomThemePickers(),i.a.createElement(ce.a,{text:Tn.t("Copy and paste these values to share your custom theme with others"),htmlFor:"custom_theme_input",cursor:"pointer",className:"clear_left"},i.a.createElement(fn.b,{name:"custom_theme_input",id:"custom_theme_input",className:"p-prefs_modal__custom_theme_input",value:l,onChange:this.onChangeCustomThemeValues}),i.a.createElement(ft.d,{type:"outline",onClick:this.onClickCopyCustomTheme},Tn.t("Copy")))):i.a.createElement(r.Fragment,null,i.a.createElement("p",{className:"margin_bottom_0"},Tn.t("Feeling adventurous?")),i.a.createElement("p",null,i.a.createElement(_t.a,{onClick:this.onClickOpenCustomThemes,className:"bold"},Tn.t("Customize your theme and share it with others"))))}},{key:"render",value:function(){var e=this.props.paidTeam;return i.a.createElement("section",null,i.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},Tn.t("Sidebar Settings")),this.renderSidebarBehavior(),e?this.renderChannelSort():null,this.renderChannelGroupings(),this.renderAdditionalOptions(),i.a.createElement("hr",{className:"margin_top_200 margin_bottom_200"}),this.renderThemeSection(),this.renderCustomThemeSection())}}]),t}(r.Component);xn.displayName="PrefsSectionSidebar",xn.defaultProps=Dn;var Ln={setUserPrefByApi:function(){return W.f.apply(void 0,arguments)},setMultipleUserPrefsByApi:function(){return W.e.apply(void 0,arguments)}},Fn=Object(g.b)(function(e){var t=Object(N.d)(e),n=Object(En.b)(e),a=Object(U.h)(e,"sidebar_theme");"default"===a&&(a="default_theme");var r=Object(U.h)(e,"sidebar_theme_custom_values"),i=Object(wn.a)(r);return""===r&&(i=Object(jn.e)(a,null,{useGlobalNav:n})),{featureChannelIsRemoveCreateSharedChannel:Object(E.i)(e,"feature_channel_is_remove_create_shared_channel"),sidebarBehavior:Object(U.h)(e,"sidebar_behavior"),channelSort:Object(U.h)(e,"channel_sort"),separatePrivateChannels:Object(U.h)(e,"separate_private_channels"),separateSharedChannels:Object(U.h)(e,"separate_shared_channels"),sharedChannelsEnabled:Object(R.C)(e,t),separateOrgChannels:Object(U.h)(e,"ent_org_wide_channels_sidebar"),enableUnreadView:Object(U.h)(e,"enable_unread_view"),showSidebarQuickswitcherButton:Object(U.h)(e,"show_sidebar_quickswitcher_button"),sidebarTheme:a,customTheme:i,useGlobalNav:n,teamName:Object(R.e)(t),paidTeam:Object(R.B)(t),enterpriseTeam:Object(R.q)(t),logger:Object(j.a)({state:e,label:"PREFS"}),historyNavigationEnabled:Object(Sn.a)(e)}},Ln)(xn),Bn=function(e){return Object(U.h)(e,"mark_msgs_read_immediately")&&Object(U.h)(e,"start_scroll_at_oldest")?"immediate_scroll":Object(U.h)(e,"mark_msgs_read_immediately")?"immediate":"default"},qn=new O.b("prefs"),Un=(o.b.bool.isRequired,o.b.bool.isRequired,o.b.string.isRequired,o.b.func.isRequired,o.b.func.isRequired,o.b.object.isRequired,function(e){function t(e){u()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(k.a)(n,["onChangeReadStateTracking","onChangeConfirmClearAllUnreads"]),n}return f()(t,e),p()(t,[{key:"onChangeReadStateTracking",value:function(e){var t=this.props.logger,n=e.target.value;t.action("Changed read_state_tracking: "+n),this.props.setMultipleUserPrefsByApi({mark_msgs_read_immediately:"immediate_scroll"===n||"immediate"===n,start_scroll_at_oldest:"immediate_scroll"===n})}},{key:"onChangeConfirmClearAllUnreads",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed confirm_clear_all_unreads: "+n),this.props.setUserPrefByApi({pref:"confirm_clear_all_unreads",value:n})}},{key:"renderConfirmClearAllUnreadsPref",value:function(){var e=this.props,t=e.confirmClearAllUnreads;return e.featureConfirmClearAllUnreadsPref?i.a.createElement(r.Fragment,null,i.a.createElement("h3",{className:"margin_bottom_50"},qn.t("When I mark everything as read:")),i.a.createElement(ce.a,{className:"margin_bottom_100",type:"inline",cursor:"pointer",text:qn.t("Prompt to confirm")},i.a.createElement(Ae.a,{name:"confirm_clear_all_unreads",checked:t,onChange:this.onChangeConfirmClearAllUnreads}))):null}},{key:"render",value:function(){var e=this.props.readStateTrackingPref,t=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},qn.t("Esc")),n=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},qn.t("Shift")),a=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(ie.p)()?qn.t("Option",{fallbackHash:"e31d972229de381b461860014dd710856361917a",fallbackHashNs:"keys"}):qn.t("Alt",{fallbackHash:"e30eff925100b7c3e119ed678e39009e962455b0",fallbackHashNs:"keys"}));return i.a.createElement("section",null,i.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},qn.t("Mark as Read")),i.a.createElement("p",null,qn.t("Slack marks a channel read as soon as you view it. You can change this if you\u2019d like.")),i.a.createElement("h3",{className:"margin_bottom_50"},qn.t("When I view a channel:")),i.a.createElement(mt.a,{className:"margin_bottom_100"},i.a.createElement(ce.a,{text:qn.t("Start me where I left off, and mark the channel read"),type:"inline",cursor:"pointer"},i.a.createElement(ht.a,{name:"read_state_tracking",value:"immediate_scroll",checked:"immediate_scroll"===e,onChange:this.onChangeReadStateTracking})),i.a.createElement(ce.a,{text:qn.t("Start me at the newest message, and mark the channel read"),type:"inline",cursor:"pointer"},i.a.createElement(ht.a,{name:"read_state_tracking",value:"immediate",checked:"immediate"===e,onChange:this.onChangeReadStateTracking})),i.a.createElement(ce.a,{text:qn.t("Start me at the newest message, but leave unseen messages unread"),type:"inline",cursor:"pointer"},i.a.createElement(ht.a,{name:"read_state_tracking",value:"default",checked:"default"===e,onChange:this.onChangeReadStateTracking}))),this.renderConfirmClearAllUnreadsPref(),i.a.createElement("h3",{className:"margin_bottom_50"},qn.t("Shortcuts")),i.a.createElement("p",{className:"margin_bottom_50"},i.a.createElement(ct.b,{text:":information_desk_person::skin-tone-2:",className:"margin_right_50"}),qn.rt("<strong>Mark a channel as read</strong> by hitting the {escKey} key.",{escKey:t})),i.a.createElement("p",{className:"margin_bottom_50"},i.a.createElement(ct.b,{text:":ok_woman::skin-tone-4:",className:"margin_right_50"}),qn.rt("<strong>Mark everything as read</strong> by pressing {shiftKey}{escKey}.",{shiftKey:n,escKey:t})),i.a.createElement("p",{className:"margin_bottom_50"},i.a.createElement(ct.b,{text:":raising_hand::skin-tone-6:",className:"margin_right_50 float_left margin_bottom_100"}),qn.rt("<strong>Mark a message unread</strong> by selecting \u201cMark unread\u201d from the message's menu. Or simply hold down the {modifierKey} key and click on it.",{modifierKey:a})))}}]),t}(r.Component));Un.displayName="PrefsSectionMarkAsRead";var Hn={setUserPrefByApi:W.f,setMultipleUserPrefsByApi:W.e},Gn=Object(g.b)(function(e){return{featureConfirmClearAllUnreadsPref:Object(E.i)(e,"feature_confirm_clear_all_unreads_pref"),readStateTrackingPref:Bn(e),confirmClearAllUnreads:Object(U.h)(e,"confirm_clear_all_unreads"),logger:Object(j.a)({state:e,label:"PREFS"})}},Hn)(Un),Wn=n("HvGc"),Kn=n("KDee"),Vn=n("RMmo"),zn=new O.b("prefs"),Yn=(o.b.bool.isRequired,o.b.func.isRequired,o.b.func.isRequired,o.b.func.isRequired,o.b.object.isRequired,function(e){function t(e){u()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(k.a)(n,["onChangeZoom","onChangeA11yAnimations","onClickKeyboardShortcutsLink","onKeyPressCmdPlus","onKeyPressCmdMinus"]),n.state={currentZoomLevel:Object(re.O)()},n}return f()(t,e),p()(t,[{key:"componentDidMount",value:function(){re.V&&(this.keyCommands=new Vn.a,this.keyCommands.bindAll([{keys:["mod+="],handler:this.onKeyPressCmdPlus},{keys:["mod+-"],handler:this.onKeyPressCmdMinus}]))}},{key:"componentWillUnmount",value:function(){re.V&&this.keyCommands.reset()}},{key:"onKeyPressCmdPlus",value:function(){var e=this.state.currentZoomLevel;e<3&&this.setState(function(){return{currentZoomLevel:e+1}})}},{key:"onKeyPressCmdMinus",value:function(){var e=this.state.currentZoomLevel;e>-3&&this.setState(function(){return{currentZoomLevel:e-1}})}},{key:"onChangeZoom",value:function(e){var t=this.props.logger,n=e.target.value;t.action("Changed zoomLevel: "+n),Object(re.wb)(n),this.setState(function(){return{currentZoomLevel:n}})}},{key:"onChangeA11yAnimations",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed a11y_animations: "+n),this.props.setUserPrefByApi({pref:"a11y_animations",value:n})}},{key:"onClickKeyboardShortcutsLink",value:function(e){e.preventDefault(),this.props.closeModal(),Object(ee.a)()?this.props.showKeyboardShortcuts():Object(Kn.c)("shortcuts")}},{key:"getZoomOptions",value:function(){return[{value:-3,label:function(){return zn.t("70%")}},{value:-2,label:function(){return zn.t("80%")}},{value:-1,label:function(){return zn.t("90%")}},{value:0,label:function(){return zn.rt("<strong>100%</strong> Default")}},{value:1,label:function(){return zn.t("110%")}},{value:2,label:function(){return zn.t("125%")}},{value:3,label:function(){return zn.t("150%")}}]}},{key:"renderZoomSection",value:function(){var e=this;if(!re.V)return null;var t=Object(ie.p)()?zn.t("Cmd"):zn.t("Ctrl"),n=parseInt(this.state.currentZoomLevel,10),a=this.getZoomOptions().map(function(t){return i.a.createElement(ce.a,{text:t.label(),type:"inline",cursor:"pointer",key:"zoom_option_"+t.value},i.a.createElement(ht.a,{name:"zoom_set",value:t.value,checked:n===t.value,onChange:e.onChangeZoom}))});return i.a.createElement(r.Fragment,null,i.a.createElement("h3",{className:"margin_bottom_50"},zn.t("Zoom")),i.a.createElement(mt.a,null,a),i.a.createElement("p",{className:"sk_dark_gray margin_bottom_200"},zn.t("You can also change the zoom level by pressing {cmdKey} +/-",{cmdKey:t})))}},{key:"render",value:function(){var e=this.props.a11yAnimations,t=i.a.createElement(_t.a,{onClick:this.onClickKeyboardShortcutsLink},zn.t("handy keyboard shortcuts"));return i.a.createElement("section",null,i.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},zn.t("Accessibility")),this.renderZoomSection(),i.a.createElement("h3",{className:"margin_bottom_50"},zn.t("Animation")),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:zn.t("Allow animated images and emoji"),className:"margin_bottom_200"},i.a.createElement(Ae.a,{onChange:this.onChangeA11yAnimations,name:"a11y_animations",checked:e})),i.a.createElement("h3",{className:"margin_bottom_50"},zn.t("Keyboard")),i.a.createElement("p",null,zn.rt("You can improve the way you use Slack by learning our {keyboardShortcutsLink}.",{keyboardShortcutsLink:t})))}}]),t}(r.Component));Yn.displayName="PrefsSectionAccessibility";var Qn={setUserPrefByApi:W.f,closeModal:l.a,showKeyboardShortcuts:function(){return Wn.h.apply(void 0,arguments)}},Jn=Object(g.b)(function(e){return{a11yAnimations:Object(U.h)(e,"a11y_animations"),logger:Object(j.a)({state:e,label:"PREFS"})}},Qn)(Yn),Xn=n("1zbP"),Zn=n("g9w/"),$n=n("20gP"),ea=n("WqN+"),ta=n("+6YQ"),na=new O.b("prefs"),aa="automatic",ra=!1,ia=(o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.array.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.func.isRequired,o.b.object.isRequired,function(e){function t(e){u()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(k.a)(n,["onChangeWebappSpellCheck","onChangeWebappSpellCheckLanguage","onChangeEnterIsSpecial","onChangeArrowHistory","onChangeMsgInputSendBtn","onChangePageKeysHandled","onChangeFKeySearch","onChangeKKeyOmnibox","onChangeSearchExcludeChannels","onClickAppDownloadPathBtn","onChangeConfirmUserMarkedAway","onChangeOverloadedMessageEnabled","onChangeInProdSurveysEnabled","onChangeAllowCallsToSetCurrentStatus","onChangeUseHwAcceleration","onChangeLaunchOnStartup","onChangeRunFromTray"]),n.state={appDownloadPath:Object(re.Q)("PrefSSBFileDownloadPath")&&Object(re.I)("PrefSSBFileDownloadPath")||null,launchOnStartup:Object(re.I)("launchOnStartup"),runFromTray:Object(re.I)("runFromTray"),useHwAcceleration:Object(re.Q)("useHwAcceleration")&&Object(re.I)("useHwAcceleration")||ra,spellcheckerLanguage:Object(re.Q)("spellcheckerLanguage")&&Object(re.I)("spellcheckerLanguage")||aa},n}return f()(t,e),p()(t,[{key:"onChangeWebappSpellCheck",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed webapp_spellcheck: "+n),this.props.setUserPrefByApi({pref:"webapp_spellcheck",value:n})}},{key:"onChangeWebappSpellCheckLanguage",value:function(e){var t=this.props.logger,n=e.value===aa?null:e.value;t.action("Changed spellcheckerLanguage: "+n),Object(re.ub)({name:"spellcheckerLanguage",value:n}),this.setState(function(t){return vt()({},t,{spellcheckerLanguage:e.value})})}},{key:"onChangeEnterIsSpecial",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed enter_is_special_in_tbt: "+n),this.props.setUserPrefByApi({pref:"enter_is_special_in_tbt",value:n})}},{key:"onChangeArrowHistory",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed arrow_history: "+n),this.props.setUserPrefByApi({pref:"arrow_history",value:n})}},{key:"onChangeMsgInputSendBtn",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed msg_input_send_btn: "+n),this.props.setUserPrefByApi({pref:"msg_input_send_btn",value:n})}},{key:"onChangePageKeysHandled",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed pagekeys_handled: "+n),this.props.setUserPrefByApi({pref:"pagekeys_handled",value:n})}},{key:"onChangeFKeySearch",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed f_key_search: "+n),this.props.setUserPrefByApi({pref:"f_key_search",value:n})}},{key:"onChangeKKeyOmnibox",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed k_key_omnibox: "+n),this.props.setUserPrefByApi({pref:"k_key_omnibox",value:n})}},{key:"onChangeSearchExcludeChannels",value:function(e){var t=this.props.logger,n=Object(a.a)(e,function(e){return e.value}).join(",");t.action("Changed search_exclude_channels: "+n),this.props.setUserPrefByApi({pref:"search_exclude_channels",value:n})}},{key:"onClickAppDownloadPathBtn",value:function(){var e=this,t=this.props.logger,n=Object(re.I)("PrefSSBFileDownloadPath")||"",a={type:"openDirectory",title:na.t("Select a download location"),defaultPath:n};Object(re.Bb)(a,function(n){if(n){var a=n[0];t.action("Changed PrefSSBFileDownloadPath"),Object(re.ub)({name:"PrefSSBFileDownloadPath",value:a}),e.setState(function(e){return vt()({},e,{appDownloadPath:a})})}})}},{key:"onChangeConfirmUserMarkedAway",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed confirm_user_marked_away: "+n),this.props.setUserPrefByApi({pref:"confirm_user_marked_away",value:n})}},{key:"onChangeOverloadedMessageEnabled",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed overloaded_message_enabled: "+n),this.props.setUserPrefByApi({pref:"overloaded_message_enabled",value:n})}},{key:"onChangeInProdSurveysEnabled",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed in_prod_surveys_enabled: "+n),this.props.setUserPrefByApi({pref:"in_prod_surveys_enabled",value:n})}},{key:"onChangeAllowCallsToSetCurrentStatus",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed allow_calls_to_set_current_status: "+n),this.props.setUserPrefByApi({pref:"allow_calls_to_set_current_status",value:n})}},{key:"onChangeUseHwAcceleration",value:function(e){var t=this.props.logger,n=!e.target.checked;t.action("Changed useHwAcceleration: "+n),Object(re.ub)({name:"useHwAcceleration",value:n}),this.setState(function(e){return vt()({},e,{useHwAcceleration:n})})}},{key:"onChangeLaunchOnStartup",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed launchOnStartup: "+n),Object(re.ub)({name:"launchOnStartup",value:n}),this.setState(function(e){return vt()({},e,{launchOnStartup:n})})}},{key:"onChangeRunFromTray",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed runFromTray: "+n),Object(re.ub)({name:"runFromTray",value:n}),this.setState(function(e){return vt()({},e,{runFromTray:n})})}},{key:"renderSpellCheckLanguages",value:function(){var e=this.props.webappSpellcheck,t=this.state.spellcheckerLanguage;if(!window.desktop||!window.desktop.spellCheckingHelper||!window.desktop.spellCheckingHelper.getDictionaries)return null;var n=window.desktop.spellCheckingHelper.getDictionaries(),r=Object(a.a)(n,function(e){return{label:e.label,value:e.key}});r.unshift({label:na.t("Automatic by language"),value:aa});var o=Object(F.a)(r,["value",t]);return i.a.createElement("div",{className:"margin_bottom_100"},i.a.createElement(Zn.a,{selectId:"spellchecker_languages",selectedOption:o,onOptionSelected:this.onChangeWebappSpellCheckLanguage,options:r,isDisabled:!e}))}},{key:"renderKeyboardShortcutPrefs",value:function(){var e=this.props,t=e.fKeySearch,n=e.kKeyOmnibox,a=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(ie.p)()?na.t("Cmd"):na.t("Ctrl")),o=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"F"),s=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"K"),l=i.a.createElement(r.Fragment,null,na.rt("<strong>{modKey}{fKey} starts a Slack search</strong>",{modKey:a,fKey:o}),i.a.createElement("br",null),i.a.createElement("span",{className:"sk_light_gray"},na.t("Overrides normal browser search behavior"))),c=i.a.createElement(r.Fragment,null,na.rt("<strong>{modKey}{kKey} starts the Quick Switcher</strong>",{modKey:a,kKey:s}),i.a.createElement("br",null),i.a.createElement("span",{className:"sk_light_gray"},na.t("Overrides normal behavior in some browsers")));return i.a.createElement(r.Fragment,null,i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:l},i.a.createElement(Ae.a,{onChange:this.onChangeFKeySearch,checked:t})),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:c},i.a.createElement(Ae.a,{onChange:this.onChangeKKeyOmnibox,checked:n,"data-qa":"quickswitcher_checkbox"})))}},{key:"renderSearchPrefs",value:function(){var e=this.props.excludedChannels;return i.a.createElement(r.Fragment,null,i.a.createElement("h2",{className:"margin_bottom_100"},na.t("Search Options")),re.V?null:this.renderKeyboardShortcutPrefs(),i.a.createElement(ce.a,{text:na.t("Exclude these channels from search results:"),cursor:"pointer",className:"margin_top_50"},i.a.createElement($n.b,{selectedOptions:e,renderOption:function(e){return i.a.createElement(ea.a,{channelId:e.value,size:"small"})},width:"100%",onSelectedItemsChange:this.onChangeSearchExcludeChannels,selectId:"search_exclude_channels_picker",placeholderText:na.t("Type a channel name ..."),searcherOptions:{entities:{channels:{includePrivate:!1},members:!1,userGroups:!1},limit:24,sort:{frecency:!1,preferChannelsUserBelongsTo:!1}}})))}},{key:"renderDownloadLocationPref",value:function(){var e=this.state.appDownloadPath;return i.a.createElement(r.Fragment,null,i.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},na.t("Download Location")),i.a.createElement("p",null,na.t("Note: this setting is for this computer only and affects all workspaces you are signed in to.")),i.a.createElement(fn.b,{name:"app_download_path",id:"app_download_path_input",type:"text",value:e,isDisabled:!0,className:"p-prefs_modal__downloads_input"}),i.a.createElement(ta.a,{onClick:this.onClickAppDownloadPathBtn,type:"outline",className:"p-prefs_modal__downloads_button"},na.t("Change ...")),i.a.createElement("hr",{className:"margin_top_150 margin_bottom_150"}))}},{key:"renderDesktopPrefs",value:function(){var e=this.state,t=e.launchOnStartup,n=e.runFromTray,a=e.useHwAcceleration,o=null,s=null,l=null;if(Object(re.Q)("useHwAcceleration")){var c=i.a.createElement(r.Fragment,null,i.a.createElement("strong",null,na.t("Disable hardware acceleration")),i.a.createElement("br",null),i.a.createElement("span",{className:"sk_light_gray"},na.t("Restart Slack for this preference to take effect.")));o=i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:c},i.a.createElement(Ae.a,{onChange:this.onChangeUseHwAcceleration,checked:!a}))}return(Object(ie.B)()||Object(ie.o)())&&(s=i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:na.t("Launch app on login")},i.a.createElement(Ae.a,{onChange:this.onChangeLaunchOnStartup,checked:t})),l=i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:na.t("Leave app running in notification area when the window is closed")},i.a.createElement(Ae.a,{onChange:this.onChangeRunFromTray,checked:n}))),i.a.createElement(r.Fragment,null,o,s,l)}},{key:"render",value:function(){var e=this.props,t=e.featureSonicInputs,n=e.webappSpellcheck,a=e.enterIsSpecialInTbt,o=e.arrowHistory,s=e.msgInputSendBtn,l=e.pagekeysHandled,c=e.confirmUserMarkedAway,u=e.overloadedMessageEnabled,d=e.inProdSurveysEnabled,p=e.allowCallsToSetCurrentStatus,h=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},na.t("Shift")),m=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(ie.p)()?na.t("Cmd"):na.t("Ctrl")),b=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},na.t("Enter")),f=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},na.t("Page Up")),_=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},na.t("Page Down")),g=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"\u2191"),v=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"\u2193"),y=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},na.t("Home")),k=i.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},na.t("End")),O=i.a.createElement(r.Fragment,null,na.rt("<strong>When typing code with ```, {enterKey} should not send the message.</strong>",{enterKey:b}),i.a.createElement("br",null),na.rt('<span className="sk_light_gray">With this checked use {shiftKey}{enterKey} to send.</span>',{shiftKey:h,enterKey:b})),j=i.a.createElement(r.Fragment,null,na.rt("<strong>Use {upKey} and {downKey} to cycle through your typed history.</strong>",{upKey:g,downKey:v}),i.a.createElement("br",null),na.rt('<span className="sk_light_gray">With this checked use {modKey}{upKey} to edit your last message.</span>',{modKey:m,upKey:g})),C=i.a.createElement(r.Fragment,null,na.rt("<strong>Show send button</strong>"),i.a.createElement("br",null),na.rt('<span className="sk_light_gray">Press {enterKey} to add a new line.</span>',{enterKey:b})),E=i.a.createElement(r.Fragment,null,i.a.createElement("strong",null,na.t("Send me occasional surveys via Slackbot")),i.a.createElement("br",null),i.a.createElement("span",{className:"sk_light_gray"},na.t("We\u2019re always working to make Slack better, and we\u2019d love your thoughts."))),w=i.a.createElement(r.Fragment,null,na.rt("<strong>Set my status to \u201c{callEmoji} On a call\u201d when I join a Slack call</strong>",{callEmoji:i.a.createElement(ct.b,{text:":telephone_receiver:"})}),i.a.createElement("br",null),na.rt('<span className="sk_light_gray">If you already have a status set, Slack won\u2019t change it.</span>'));return i.a.createElement("section",null,i.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},na.t("Input Options")),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:na.t("Enable spellcheck on your messages")},i.a.createElement(Ae.a,{onChange:this.onChangeWebappSpellCheck,checked:n})),re.V?this.renderSpellCheckLanguages():null,i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:O},i.a.createElement(Ae.a,{onChange:this.onChangeEnterIsSpecial,checked:a})),t?null:i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:j},i.a.createElement(Ae.a,{onChange:this.onChangeArrowHistory,checked:o})),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:C,className:"margin_bottom_150",id:"msg_input_send_btn_label"},i.a.createElement(Ae.a,{onChange:this.onChangeMsgInputSendBtn,checked:s})),i.a.createElement("hr",{className:"margin_bottom_150 margin_top_150"}),this.renderSearchPrefs(),i.a.createElement("hr",{className:"margin_bottom_150 margin_top_150"}),re.V&&Object(re.Q)("PrefSSBFileDownloadPath")?this.renderDownloadLocationPref():null,i.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},na.t("Other Options")),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:na.rt("<strong>{pageUpKey}, {pageDownKey}, {homeKey}, and {endKey} keys always scroll messages</strong>",{pageUpKey:f,pageDownKey:_,homeKey:y,endKey:k})},i.a.createElement(Ae.a,{onChange:this.onChangePageKeysHandled,checked:l})),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:na.t("Ask if I want to toggle my away status when I log in after having set myself away")},i.a.createElement(Ae.a,{onChange:this.onChangeConfirmUserMarkedAway,checked:c})),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:na.t("Send me occasional channel suggestions via Slackbot")},i.a.createElement(Ae.a,{onChange:this.onChangeOverloadedMessageEnabled,checked:u})),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:E},i.a.createElement(Ae.a,{onChange:this.onChangeInProdSurveysEnabled,checked:d})),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:w},i.a.createElement(Ae.a,{onChange:this.onChangeAllowCallsToSetCurrentStatus,checked:p})),re.V?this.renderDesktopPrefs():null)}}]),t}(r.Component));ia.displayName="PrefsSectionAdvanced";var oa={setUserPrefByApi:W.f},sa=Object(g.b)(function(e){var t=Object(U.h)(e,"search_exclude_channels"),n=[];return t&&(n=t.split(",").map(function(t){return Object(jt.d)(e,t)}).filter(function(e){return Object(Xn.b)(e)}).map(function(t){return{label:Object(Ct.x)(e,t),value:t.id}})),{featureSonicInputs:Object(E.i)(e,"feature_sonic_inputs"),webappSpellcheck:Object(U.h)(e,"webapp_spellcheck"),arrowHistory:Object(U.h)(e,"arrow_history"),fKeySearch:Object(U.h)(e,"f_key_search"),kKeyOmnibox:Object(U.h)(e,"k_key_omnibox"),excludedChannels:n,enterIsSpecialInTbt:Object(U.h)(e,"enter_is_special_in_tbt"),msgInputSendBtn:Object(U.h)(e,"msg_input_send_btn"),pagekeysHandled:Object(U.h)(e,"pagekeys_handled"),confirmUserMarkedAway:Object(U.h)(e,"confirm_user_marked_away"),overloadedMessageEnabled:Object(U.h)(e,"overloaded_message_enabled"),inProdSurveysEnabled:Object(U.h)(e,"in_prod_surveys_enabled"),allowCallsToSetCurrentStatus:Object(U.h)(e,"allow_calls_to_set_current_status"),logger:Object(j.a)({state:e,label:"PREFS"})}},oa)(ia),la=n("XzsM"),ca=new O.b("prefs"),ua=(o.b.bool.isRequired,o.b.bool.isRequired,o.b.object.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,o.b.func.isRequired,o.b.object.isRequired,function(e){function t(e){u()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(k.a)(n,["onChangeFoldersEnabled","onChangeAppActionPickerEnabled","onChangeMemoryInstrument","onChangeBootSonic"]),n.state={bootSonic:Object(re.E)("bootSonic")||"unset"},n}return f()(t,e),p()(t,[{key:"onChangeFoldersEnabled",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed folders_enabled: "+n),this.props.setUserPrefByApi({pref:"folders_enabled",value:n})}},{key:"onChangeAppActionPickerEnabled",value:function(e){var t=this.props,n=t.logger,a=t.appActionPickerPrefs,r=e.target.checked;n.action("Changed app_action_picker.enabled: "+r),this.props.setUserPrefByApi({pref:"app_action_picker",value:JSON.stringify(vt()({},a,{enabled:r}))})}},{key:"onChangeMemoryInstrument",value:function(e){var t=this.props.logger,n=e.target.checked;t.action("Changed show_memory_instrument: "+n),this.props.setUserPrefByApi({pref:"show_memory_instrument",value:n})}},{key:"onChangeBootSonic",value:function(e){var t=this.props.logger,n=e.value;t.action("Changed bootSonic: "+n),this.setState(function(e){return vt()({},e,{bootSonic:n})}),Object(re.tb)({name:"bootSonic",value:n})}},{key:"renderFoldersEnabledPref",value:function(){var e=this.props,t=e.foldersExperimentOn,n=e.foldersEnabled;return t?i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:ca.t("Make custom collections of channels in your sidebar")},i.a.createElement(Ae.a,{onChange:this.onChangeFoldersEnabled,checked:n})):null}},{key:"renderAppActionPickerPrefs",value:function(){var e=this.props,t=e.appActionPickerPrefs;return e.featureChannelActionsClient&&Object(ee.a)()?i.a.createElement("div",null,i.a.createElement("h3",null,ca.t("App Paths")),i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:ca.t("Use the new app actions picker.")},i.a.createElement(Ae.a,{onChange:this.onChangeAppActionPickerEnabled,checked:t.enabled}))):null}},{key:"renderMemoryInstrumentPref",value:function(){var e=this.props,t=e.featureElectronMemoryLogging,n=e.showMemoryInstrument;return t&&re.V&&!Object(ee.a)()?i.a.createElement(ce.a,{type:"inline",cursor:"pointer",text:ca.t("Output memory usage in lower right corner")},i.a.createElement(Ae.a,{onChange:this.onChangeMemoryInstrument,checked:n})):null}},{key:"renderBootSonicPref",value:function(){if(!Object(re.d)())return null;var e=Object(ie.f)();if(4!==e.desktopAppVersion.major||0!==e.desktopAppVersion.minor)return null;var t=this.state.bootSonic,n=[{label:"Sonic",value:"always"},{label:"Legacy",value:"never"},{label:"Default",value:"unset"}],a=Object(F.a)(n,["value",t])||Object(F.a)(n,["value","unset"]);return i.a.createElement(r.Fragment,null,i.a.createElement(ce.a,{text:"Client Version",className:"margin_top_200 margin_bottom_50"},i.a.createElement(ue.a,{selectId:"bootSonic",options:n,selectedOption:a,onOptionSelected:this.onChangeBootSonic,size:"large",width:"100%"})),i.a.createElement("p",{className:"sk_dark_gray margin_bottom_200"},ca.t("Restart Slack for this preference to take effect.")))}},{key:"render",value:function(){return i.a.createElement("section",null,i.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},ca.t("Labs")),i.a.createElement("p",null,ca.t("These prefs are internal to Slack Corp. They are not available to customers.")),this.renderFoldersEnabledPref(),this.renderAppActionPickerPrefs(),this.renderMemoryInstrumentPref(),this.renderBootSonicPref())}}]),t}(r.Component));ua.displayName="PrefsSectionLabs";var da={setUserPrefByApi:W.f},pa=Object(g.b)(function(e){return{foldersEnabled:Object(U.h)(e,"folders_enabled"),foldersExperimentOn:"enabled"===Object(la.c)(e,"folders_sidebar"),appActionPickerPrefs:Object(U.b)(e),showMemoryInstrument:Object(U.h)(e,"show_memory_instrument"),featureElectronMemoryLogging:Object(E.i)(e,"feature_electron_memory_logging"),featureChannelActionsClient:Object(E.i)(e,"feature_channel_actions_client"),logger:Object(j.a)({state:e,label:"PREFS"})}},da)(ua),ha=n("D3dR"),ma=new O.b("prefs"),ba=(o.b.string.isRequired,o.b.func.isRequired,o.b.func.isRequired,function(e){function t(e){u()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onReset=n.onReset.bind(n),n.onGo=n.onGo.bind(n),n}return f()(t,e),p()(t,[{key:"onReset",value:function(){this.props.resetChannelNotificationOverrideAndCallApi({channelId:this.props.channelId})}},{key:"onGo",value:function(){this.props.changePrefsActiveSection({sectionId:"notifications"})}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(ha.a,{channelId:this.props.channelId,openPrefsModal:this.onGo}),i.a.createElement("div",{className:"p-prefs_modal__channel_prefs_footer"},i.a.createElement(_t.a,{onClick:this.onReset},ma.t("Reset to your default notification settings")),i.a.createElement(ta.a,{type:"primary",onClick:this.onGo},ma.t("Done"))))}}]),t}(r.Component));ba.displayName="ChannelNotifications";var fa=Object(g.b)(null,function(e){return{resetChannelNotificationOverrideAndCallApi:function(){return e(K.a.apply(void 0,arguments))}}})(ba),_a=n("Uj4I"),ga=(n("P+5D"),new O.b("prefs")),va=(o.b.bool.isRequired,o.b.string.isRequired,o.b.string.isRequired,o.b.oneOf(Object(a.a)(_a.a,"id")),o.b.string,o.b.func.isRequired,o.b.bool.isRequired,o.b.bool.isRequired,function(e){function t(e){u()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={activeSection:e.activeSection,activeSubsection:e.activeSubsection,channelId:null},n.savedScrollTop=0,n.bodyRef=null,Object(k.a)(n,["renderActiveSection","renderSidebarItems","setActiveSection","onBack","setBodyRef"]),n}return f()(t,e),p()(t,[{key:"componentDidMount",value:function(){this.maybeHighlightSubsection()}},{key:"componentDidUpdate",value:function(){this.maybeHighlightSubsection()}},{key:"onBack",value:function(){this.setActiveSection({sectionId:"notifications"})}},{key:"setBodyRef",value:function(e){this.bodyRef=e}},{key:"setActiveSection",value:function(e){var t=this,n=e.sectionId,a=e.subsectionId,r=e.channelId,i=this.state.activeSection;n&&n!==i&&("channel"===n?this.bodyRef&&(this.savedScrollTop=this.bodyRef.scrollTop):this.props.setLastActiveSection(n),this.setState(function(){return{activeSection:n,activeSubsection:a,channelId:r}},function(){"channel"===i&&"notifications"===n&&t.bodyRef&&t.savedScrollTop&&(t.bodyRef.scrollTop=t.savedScrollTop,t.savedScrollTop=0)}))}},{key:"maybeHighlightSubsection",value:function(){var e=this;if(this.state.activeSubsection){var t=this.state,n=t.activeSection,a=t.activeSubsection,r=this.props.teamId;requestAnimationFrame(function(){var t=e.bodyRef.querySelector("#"+a);t?(t.scrollIntoView({behavior:"smooth"}),t.classList.add("c-highlight"),e.setState(function(){return{activeSubsection:""}})):Object(j.a)({teamId:r}).warn("Unable to scroll to element #"+a+" in section "+n+". This is a programming error.")})}}},{key:"renderActiveSection",value:function(){switch(this.state.activeSection){case"notifications":return i.a.createElement(Xt,{changePrefsActiveSection:this.setActiveSection});case"language_region":return i.a.createElement(on,null);case"messages_media":return i.a.createElement(On,null);case"sidebar":return i.a.createElement(Fn,null);case"mark_as_read":return i.a.createElement(Gn,null);case"accessibility":return i.a.createElement(Jn,null);case"advanced":return i.a.createElement(sa,null);case"labs":return i.a.createElement(pa,null);case"channel":return i.a.createElement(fa,{channelId:this.state.channelId,changePrefsActiveSection:this.setActiveSection});default:return i.a.createElement(Xt,null)}}},{key:"renderSidebarItems",value:function(){var e=this,t=this.props.featureTinyspeck;return Object(_.a)(_a.a,function(e){return(!e.tsOnly||e.tsOnly&&t)&&"channel"!==e.id}).map(function(t){return i.a.createElement(P.a,{itemId:t.id,onClick:function(){return e.setActiveSection({sectionId:t.id})},key:t.id,"data-qa":"prefs_modal_"+t.id},t.name())})}},{key:"render",value:function(){var e=this.props,t=e.teamName,n=e.showOpenTransition,a=e.teamSidebarVisible,r=this.state,o=r.activeSection,s=r.channelId,l="channel"===o?ga.rt("Notification Preferences: {channelName}",{channelName:i.a.createElement(D.a,{channelId:s,inline:!0})}):ga.rt("Your preferences for {teamName}",{teamName:t});return i.a.createElement(M.a,{title:l,withHeader:!0,showGoButton:!1,showCancelButton:!1,showOpenTransition:n,modalClasses:y()("p-prefs_modal",{"p-prefs_modal--sidebar-open":"sidebar"===o&&!a,"p-prefs_modal--sidebar-open-multi-team":"sidebar"===o&&a}),contentLabel:"prefs-modal","data-qa":"prefs_modal",fullBleedModalBodyContent:!0,showBackButton:"channel"===o,onBack:this.onBack,setBodyRef:this.setBodyRef},i.a.createElement("div",{className:"p-prefs_modal__sidebar_overlay"}),"channel"===o?null:i.a.createElement("div",{className:"p-prefs_modal__sidebar_container"},i.a.createElement(P.b,{activeItemId:o},this.renderSidebarItems())),i.a.createElement("div",{className:"p-prefs_modal__content_container"},i.a.createElement(C.b,{key:this.state.activeSection,subtype:"prefs_modal"},this.renderActiveSection())))}}]),t}(r.Component));va.displayName="PrefsModal",va.defaultProps={activeSection:null,activeSubsection:null};var ya={setLastActiveSection:function(){return T.a.apply(void 0,arguments)}},ka=Object(g.b)(function(e,t){var n=Object(N.d)(e);return{featureTinyspeck:Object(E.i)(e,"feature_tinyspeck"),teamId:n.id,teamName:Object(R.e)(n),showOpenTransition:S(e),activeSection:t.activeSection||I(e),teamSidebarVisible:Object(A.b)(e)}},ya)(va),Oa=Object(s.b)("Opens the prefs modal",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(l.e)({element:i.a.createElement(ka,n)}))});Oa.propTypes={activeSection:o.b.oneOf(Object(a.a)(_a.a,"id")),activeSubsection:o.b.string};t.a=Oa},qOjI:function(e,t,n){"use strict";var a=n("UXvI"),r=n("yHhI"),i=n("lhZz"),o=n("Smdl"),s=n("lDGG");function l(e){var t=Object(o.a)()?Object(i.getClientStoreInstance)():Object(i.getStoreInstanceByTeamId)(e),n=Object(o.a)()?Object(r.b)():Object(r.a)({teamId:e});t?(n.info("NETWORK-CONNECTIVITY","Received offline event! Upserting that the client is offline."),t.dispatch(Object(s.a)(!1))):n.warn("NETWORK-CONNECTIVITY","Received offline event, but no store found.")}function c(e){var t=Object(o.a)()?Object(i.getClientStoreInstance)():Object(i.getStoreInstanceByTeamId)(e),n=Object(o.a)()?Object(r.b)():Object(r.a)({teamId:e});t?(n.info("NETWORK-CONNECTIVITY","Received online event! Upserting that the client is online."),t.dispatch(Object(s.a)(!0))):n.warn("NETWORK-CONNECTIVITY","Received online event, but no store found.")}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(a.a)(l.bind(null,e),500,{leading:!1});window.addEventListener("offline",t),window.addEventListener("online",function(){return t.cancel(),c(e)})}},qSXi:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("negh"),o=n("n2GJ");function s(e){return r()({id:e.id,appId:e.app.id,name:e.name,description:e.app.name,iconSet:e.app.icons||{},uiElement:i.y.APP_ACTION_BUTTON,"data-qa":"app_action_"+e.id},Object(o.e)(e))}var l=n("NFsq"),c=n("c8Bs"),u=n("/X+W");function d(e,t){if(!e)return!1;var n=Object(u.a)(e.name);if(!n)return!1;var a=Object(u.a)(e.description),r=t.split(/\s+/);return Object(c.a)(r,function(e){return Object(l.a)(n,e)||Object(l.a)(a,e)})}n.d(t,"a",function(){return s}),n.d(t,"b",function(){return d})},qTUc:function(e,t,n){},qYtJ:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("wBxZ"),p=n("GxtX"),h=n("zmn3"),m=n("BeL+"),b=n("uXhx"),f=n("qAkX"),_=n("ifKl"),g=n("aK/h"),v=n("kxpR"),y=n.n(v),k=n("XHGt"),O=n("TSYQ"),j=n.n(O),C=n("HO/Y"),E=n("VjHM"),w=n("nNoG"),S=n("yt6e"),I=n("qc8s"),T=n("oW4N"),N=n("/k8D"),R=n("VyaM"),A=new w.b("threads");var P=n("3dqR"),M=n("od5y"),D=n("lwWk"),x=n("Fdc0"),L=n("2Zgd"),F=n("J9z2"),B=new w.b("threads"),q=(g.b.array,g.b.number.isRequired,g.b.arrayOf(g.b.string),g.b.number,g.b.string,g.b.string.isRequired,g.b.string.isRequired,g.b.bool,g.b.func,g.b.bool,g.b.bool,g.b.string,g.b.string,{replies:null,do24hrTime:!1,replyUsers:[],replyUsersCount:0,latestReply:null,showThreadIfThreadable:_.a,featureNewRepliesAfterBcast:!1,isThreadExpanded:void 0,threadListId:void 0,className:void 0}),U=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.openThread=n.openThread.bind(n),n.onFocusEnter=n.onFocusEnter.bind(n),n.onFocusLeave=n.onFocusLeave.bind(n),n.state={hasKeyboardFocus:!1},n}return u()(t,e),o()(t,[{key:"onFocusEnter",value:function(e){var t=e.relatedEvent;t&&"keydown"===t.type&&this.setState(function(){return{hasKeyboardFocus:!0}})}},{key:"onFocusLeave",value:function(){this.setState(function(){return{hasKeyboardFocus:!1}})}},{key:"getLastReplyTs",value:function(){if(this.props.latestReply)return this.props.latestReply;if(this.props.replies){var e=Object(f.a)(this.props.replies);if(e)return e.ts}return null}},{key:"openThread",value:function(e){e.preventDefault(),this.props.showThreadIfThreadable({channelId:this.props.channelId,threadTs:this.props.threadTs,requestFocus:this.state.hasKeyboardFocus})}},{key:"renderFaces",value:function(){var e=this,t=void 0;t=this.props.replyUsers&&this.props.replyUsers.length?Object(b.a)(this.props.replyUsers,function(e){return"B00"===e}):Object(m.a)(Object(b.a)(Object(h.a)(this.props.replies,"user"),function(e){return"B00"===e}));var n=this.props.replyUsersCount?this.props.replyUsersCount:t.length;return t.length>5?Object(p.a)(Object(h.a)(Object(d.a)(t,4),function(t){return e.renderSingleAvatar(t)}),this.renderSingleAvatar(t[4],n-5)):Object(h.a)(t,function(t){return e.renderSingleAvatar(t)})}},{key:"renderSingleAvatar",value:function(e,t){var n=Object(F.a)(e),a=!Object(x.fb)({id:e});return y.a.createElement(P.b,{key:e,userId:n?null:e,botId:n?e:null,size:24,additionalOverlay:t,showCard:!0,isInteractive:a})}},{key:"render",value:function(){var e=this.props,t=e.replyCount,n=e.channelId,a=e.threadTs,r=e.do24hrTime,i=e.featureNewRepliesAfterBcast,o=e.isThreadExpanded,s=B.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:t}),l=Object(L.b)(n,a),c=this.getLastReplyTs(),u="";u=i?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.latestReply,n=e.replyCount,a=e.do24hrTime;return Object(N.a)(Object(R.a)(t),new Date)?1===n?A.t("Today at {time}",{time:Object(I.a)(t,{do24hrTime:a})}):A.t("Last reply today at {time}",{time:Object(I.a)(t,{do24hrTime:a})}):1===n?Object(T.a)(t):A.t("Last reply {time_ago}",{time_ago:Object(T.a)(t)})}({latestReply:c,replyCount:t,do24hrTime:r}):Object(N.a)(Object(R.a)(c),new Date)?1===t?B.t("Today at {time}",{time:Object(I.a)(c,{do24hrTime:r})}):B.t("Last reply today at {time}",{time:Object(I.a)(c,{do24hrTime:r})}):1===t?Object(T.a)(c):B.t("Last reply {time_ago}",{time_ago:Object(T.a)(c)});var d=j()("c-message__reply_bar",this.props.className,{"c-message__reply_bar--focus":this.state.hasKeyboardFocus}),p=!0===o?this.props.threadListId:void 0;return y.a.createElement(S.a,{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},y.a.createElement("div",{role:"presentation",className:d,onClick:this.openThread,"data-qa":"reply_bar"},this.renderFaces(),y.a.createElement(D.a,{className:"c-message__reply_count",href:l,target:"_blank",rel:"noopener noreferrer","aria-expanded":o,"aria-controls":p},s),y.a.createElement("div",{className:"c-message__reply_bar_description"},y.a.createElement("span",{className:"c-message__reply_bar_last_reply"},u),y.a.createElement("span",{className:"c-message__reply_bar_view_thread"},B.t("View thread"))),y.a.createElement(M.a,{type:"chevron_right",className:"c-message__reply_bar_arrow",align:"baseline","aria-hidden":!0})))}}]),t}(y.a.PureComponent);U.displayName="ReplyBar",U.defaultProps=q;t.a=Object(k.b)(function(e){return{do24hrTime:Object(E.h)(e,"time24"),featureNewRepliesAfterBcast:Object(C.i)(e,"feature_new_replies_after_bcast")}})(U)},qcAq:function(e,t,n){"use strict";var a=n("aK/h"),r=n("XfeM"),i=n("mly0"),o=n("HO/Y"),s=n("rtjy"),l=n("yPgC"),c=Object(r.b)("Record a frecency event for some message action + maybe a query",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.action,r=n.query,l=void 0===r?"":r,c=a.frecencyId;Object(o.i)(t(),"feature_app_actions_fe_refactor")?e(Object(s.c)({id:c,text:l})):Object(i.c)({id:c},l)});c.propTypes={action:l.a.MessageAction.isRequired,query:a.b.string},t.a=c},qfOp:function(e,t,n){},qiqk:function(e,t,n){},qnZ7:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("0wDQ"),r=n("XRnC"),i=n("smxp"),o=n("PxLB");function s(e,t){return function(n,s){var l=Object(i.a)(s(),e,t);if(l){n(Object(a.a)({channelId:e,ts:t})),n(Object(r.d)(l,t));n(Object(o.a)({channelId:e,msg:l,resent:!0}))}}}},qny9:function(e,t,n){e.exports=n.p+"you_joined_call_v2-ad7fd07.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},"r/YP":function(e,t,n){},r6UO:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),h=(n("aK/h"),n("O0RF")),m=n("Rszm"),b=n("nNoG"),f=(n("yWse"),new b.b("file-upload")),_=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=n.handleChange.bind(n),n}return u()(t,e),o()(t,[{key:"handleChange",value:function(e){var t=e.target.checked;this.props.onChange(t)}},{key:"render",value:function(){var e=this.props,t=e.channelType,n=e.selectedChannelName,a=e.value,r="";return r="mpim"===t?f.t("Also send to the group"):"im"===t?f.t("Also send as direct message"):f.rt("Also send to <span></span>",null,function(){return p.a.createElement("span",{className:"p-file_upload_dialog__broadcast_channel_name"},n)}),p.a.createElement(h.a,{text:r,className:"p-file_upload_dialog__broadcast_label",htmlFor:"file-upload-broadcast-to-channel",type:"inline"},p.a.createElement(m.a,{className:"p-file_upload_dialog__broadcast_checkbox","data-qa":"file_upload_broadcast_checkbox",id:"file-upload-broadcast-to-channel",checked:a,onChange:this.handleChange}))}}]),t}(d.PureComponent);_.displayName="FileUploadBroadcastCheckbox",t.a=_},rCFu:function(e,t,n){"use strict";n.d(t,"c",function(){return m}),n.d(t,"b",function(){return b}),n.d(t,"a",function(){return f}),n.d(t,"f",function(){return _}),n.d(t,"g",function(){return g}),n.d(t,"i",function(){return v}),n.d(t,"j",function(){return y}),n.d(t,"h",function(){return k}),n.d(t,"d",function(){return C}),n.d(t,"e",function(){return w});var a=n("QbLZ"),r=n.n(a),i=n("kOzZ"),o=n("Smdl"),s=n("Zr7G"),l=n("lhZz"),c=n("U28S"),u=n("Z7Ay"),d=n("eK5+"),p=n("negh"),h=n("nNoG"),m=0,b=1,f=2;function _(e,t,n,a,u,d,_,g){var v=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(w(u,d,p.k.PRQ_CHANNEL_SWITCH_USABLE)){var y=void 0,k=void 0;switch(a){case m:default:y=p.u.COMPLETED,k=!1;break;case b:y=p.u.ABANDONED,k=!0;break;case f:y=p.u.COMPLETED,k=!0}var j=Object(c.b)(1e3*e*1e3,0),C=r()({elapsed_time:j,target_channel_id:n,required_sync:k,end_state:y},O(_,t,g,v)),E={userId:g,teamId:u,enterpriseId:d,locale:Object(h.p)()};Object(i.a)(E).track(p.k.PRQ_CHANNEL_SWITCH_USABLE,C);var S=Object(l.getStoreInstanceByTeamId)(u),I=S&&S.getState(),T=Object(o.a)()?"channel_switch_usable_sonic":"channel_switch_usable_legacy";Object(s.c)({state:I}).store(T,Math.round(e))}}function g(e,t,n,a,u,d,_,g){var v=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(w(u,d,p.k.PRQ_CHANNEL_SWITCH_VISIBLE)){var y=void 0,k=void 0;switch(a){case m:default:y=p.u.COMPLETED,k=!1;break;case b:y=p.u.ABANDONED,k=!0;break;case f:y=p.u.COMPLETED,k=!1}var j=Object(c.b)(1e3*e*1e3,0),C=r()({elapsed_time:j,target_channel_id:n,required_sync:k,end_state:y},O(_,t,g,v)),E={userId:g,teamId:u,enterpriseId:d,locale:Object(h.p)()};Object(i.a)(E).track(p.k.PRQ_CHANNEL_SWITCH_VISIBLE,C);var S=Object(l.getStoreInstanceByTeamId)(u),I=S&&S.getState(),T=Object(o.a)()?"channel_switch_visible_sonic":"channel_switch_visible_legacy";Object(s.c)({state:I}).store(T,Math.round(e))}}function v(e,t,n,a,o,s,l,u){var d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(w(a,o,p.k.PRQ_TIME_TO_USABLE)){var m=Object(c.b)(1e3*e*1e3,0),b=j(d),f=r()({elapsed_time:m+b,desktop_elapsed_time:b,required_sync:n,end_state:u,start_type:p.o.COLD,target_type:p.p.CHANNEL},O(s,t,l,d)),_={userId:l,teamId:a,enterpriseId:o,locale:Object(h.p)()};Object(i.a)(_).track(p.k.PRQ_TIME_TO_USABLE,f)}}function y(e,t,n,a,o,s,l){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(w(a,o,p.k.PRQ_TIME_TO_VISIBLE)){var d=Object(c.b)(1e3*e*1e3,0),m=j(u),b=r()({elapsed_time:d+m,desktop_elapsed_time:m,required_sync:n,end_state:p.u.COMPLETED,start_type:p.o.COLD,target_type:p.p.CHANNEL},O(s,t,l,u)),f={userId:l,teamId:a,enterpriseId:o,locale:Object(h.p)()};Object(i.a)(f).track(p.k.PRQ_TIME_TO_VISIBLE,b)}}function k(e,t,n,a,o,s,l){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(w(a,o,p.k.PRQ_SESSION_FRAME_STATS)){var u=r()({duration_ms:e,sample_filter:"entire_session",hist_frame_render_time:t,hist_janky_windows:n},O(s,void 0,l,c)),d={userId:l,teamId:a,enterpriseId:o,locale:Object(h.p)()};Object(i.a)(d).track(p.k.PRQ_SESSION_FRAME_STATS,u)}}function O(e,t,n,a){var i="string"==typeof n&&n.startsWith("W"),s=null!=a&&a.stats&&a.stats.Id&&a.stats.Id.sessionId,l={device:{id:"",make:navigator.platform,model:navigator.platform,os:s?"electron":"webapp",os_version:s?a.stats.Id.sessionId:""}},c=void 0;if(t)switch(l.ui_context={action:"QUICK_SWITCH"===t?"keydown":"click",ui_component:t},t.toUpperCase()){case"APP_ICON":c=p.q.APP_ICON;break;case"MSG_PANE":c=p.q.MSG_PANE;break;case"SIDE_BAR":c=p.q.SIDE_BAR;break;case"QUICK_SWITCH":c=p.q.QUICK_SWITCH;break;default:c=p.q.UNKNOWN}var u=r()({contexts:l,session_id:e,time:Date.now(),app_id:Object(o.a)()?"web_sonic":"web",is_tablet:!1,user_id:i?void 0:n,external_id:i?n:void 0},E(a));return t&&(u.trigger=c),u}function j(e){if(null!=e&&e.stats&&e.stats.performance&&e.stats.performance.getPerformanceRecord&&e.stats.performance.calcHrTime){var t=e.stats.performance.getPerformanceRecord();if(void 0!==t.numTeamsAtLaunch&&void 0!==t.isInitialTeamBooted&&t.numTeamsAtLaunch>0&&t.isInitialTeamBooted){var n=t.BOOT,a=t.PRELOAD_READY,r=e.stats.performance.calcHrTime(n,a);return r>0?1e6*r:0}}return 0}function C(e){if(null!=e&&e.stats&&e.stats.performance&&e.stats.performance.getPerformanceRecord&&e.stats.performance.calcHrTime){var t=e.stats.performance.getPerformanceRecord();if(void 0!==t.numTeamsAtLaunch&&void 0!==t.isInitialTeamBooted&&t.numTeamsAtLaunch>0){var n=t.PRELOAD_STARTED,a=t.PRELOAD_READY,r=e.stats.performance.calcHrTime(n,a);return Math.floor(r)}}return 0}function E(e){if(null!=e&&e.app&&e.app.version){var t=e.app.version(),n=t.prerelease?" ("+t.prerelease+")":"",a=void 0;switch("string"==typeof t.prerelease?t.prerelease.match(/(alpha|beta|electron3|sonic)/i)&&t.prerelease.match(/(alpha|beta|electron3|sonic)/i)[1]:"production"){case"alpha":case"electron3":a=p.b.ALPHA;break;case"beta":a=p.b.BETA;break;default:a=p.b.PRODUCTION}return{app_version:t.major+"."+t.minor+"."+t.patch+n,release_version:t.major+"."+t.minor+"."+t.patch,build_type:a}}return{app_version:"",release_version:"",build_type:p.b.PRODUCTION}}function w(e,t,n){return!(!["E12KS1G65"].includes(t)&&!["T024BE7LD","T5J4Q04QG"].includes(e))||(!(!["E27SFGS2W","E655JKQRX","E7RBBBXHB","E23RHNDU5","E5BRU6WAE","E4XV0NYS0","E7AN7J5RP","E3T9KQULR","E23RE8G4F","E46RWAPHC","E6GDLMBCM","E3U2DUYG4","E783C7HT4","E8YCM8N9L","E30MTJF0C","E4BGDDU1H","E56KHGV6G","E7U335QS3","E8RLKB40H","E61V1AN6R","E7SV3P9PU","E3ZLD3D42"].includes(t)||!Object(d.a)(10))||(!(!["E27SFGS2W"].includes(t)||![p.k.PRQ_TIME_TO_USABLE,p.k.PRQ_TIME_TO_VISIBLE].includes(n))||(!![p.k.PRQ_TIME_TO_USABLE,p.k.PRQ_TIME_TO_VISIBLE].includes(n)||(p.k.PRQ_SESSION_FRAME_STATS,Object(d.a)(10)))))}Object(u.a)("prq",{getDesktopElapsedTime:j,getDesktopPreloadTime:C,getElectronInfo:E})},rqkC:function(e,t,n){},"s/YD":function(e,t,n){"use strict";n.d(t,"a",function(){return M});var a=n("jo6Y"),r=n.n(a),i=n("QbLZ"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),h=n("mRg0"),m=n.n(h),b=n("vJtL"),f=n("ifKl"),_=n("kxpR"),g=n.n(_),v=n("XHGt"),y=n("TSYQ"),k=n.n(y),O=n("tn36"),j=n("aK/h"),C=n("13mM"),E=n("tbBR"),w=n("4EIq"),S=n("cD5Y"),I=n("533h"),T=n("SAUz"),N=n("VymY"),R=n("/Rx2"),A=n("2jER"),P=n("Smdl"),M=(n("JlHJ"),{offsetX:24,offsetY:134}),D=function(e){var t=e&&e.current||e;if(t){var n=Object(b.a)(t.getWrappedInstance)?t.getWrappedInstance():t;if(n)return Object(b.a)(n.focus)?n:void 0}},x=(j.b.string,j.b.string,j.b.string,j.b.bool,j.b.bool,j.b.bool,j.b.func,j.b.func,j.b.func.isRequired,j.b.func,j.b.func,j.b.func,j.b.func,j.b.node.isRequired,j.b.string.isRequired,j.b.number,j.b.string,j.b.object,j.b.bool,j.b.func,j.b.func,j.b.func,j.b.func,{className:void 0,bodyClassName:void 0,flexOrigin:void 0,isEmpty:!1,isOffline:!1,isLoading:!1,onBlur:f.a,onFocus:f.a,renderEmpty:f.a,renderControls:f.a,renderSubtitle:f.a,onOptionsClick:void 0,kbNavOrder:void 0,dataQa:void 0,headerProps:{},userAttentionIsOnChat:!1,focus:void 0,removeFromSectionNavigation:f.a,addToSectionNavigation:f.a,setInitialActiveSection:f.a}),L=function(e){function t(e){l()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(O.a)(n,["focus","blur","setInitialActiveSection"]),n.flexpaneBodyRef=g.a.createRef(),n.flexpaneHeaderRef=g.a.createRef(),n}return m()(t,e),u()(t,[{key:"componentDidUpdate",value:function(e){!e.userAttentionIsOnChat&&this.props.userAttentionIsOnChat&&this.props.addToSectionNavigation(),!this.props.userAttentionIsOnChat&&e.userAttentionIsOnChat&&this.props.removeFromSectionNavigation()}},{key:"setInitialActiveSection",value:function(){this.props.setInitialActiveSection()}},{key:"focusCloseButton",value:function(){var e=D(this.flexpaneHeaderRef);e&&e.focus()}},{key:"focusItemInBody",value:function(){var e=D(this.flexpaneBodyRef);if(e){var t=Object(N.a)(e)[0];t&&t.focus()}}},{key:"focus",value:function(){var e=this.props,t=e.isEmpty,n=e.focus,a=e.onFocus;t?this.focusCloseButton():(n?n():this.focusItemInBody(),Object(P.a)()||a())}},{key:"blur",value:function(){document.activeElement.blur(),Object(P.a)()||this.props.onBlur()}},{key:"isLoading",value:function(){var e=this.props,t=e.isLoading,n=e.isOffline;return t&&!n}},{key:"renderBody",value:function(){var e=this.props,t=e.isEmpty,n=e.isOffline,a=e.renderBody,r=e.renderEmpty;return t?this.isLoading()?null:r({isOffline:n}):a()}},{key:"renderSubtitle",value:function(){var e=this.props.renderSubtitle,t=e();return t?g.a.createElement("div",{className:"p-flexpane__subtitle","data-qa":"subtitle"},t):null}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.bodyClassName,a=e.flexOrigin,r=e.isEmpty,i=e.onOptionsClick,s=e.title,l=e.viewId,c=e.kbNavOrder,u=e.dataQa,d=e.renderControls,p=e.headerProps,h=g.a.createElement(E.a,{id:l},g.a.createElement("div",{"data-qa":u,className:k()("p-flexpane",t)},g.a.createElement(I.a,o()({ref:this.flexpaneHeaderRef,onOptionsClick:i,renderSecondary:d},p),g.a.createElement(T.a,{flexOrigin:a,size:"medium"}),g.a.createElement("div",{className:"p-flexpane__title_container"},s,this.renderSubtitle())),g.a.createElement("div",{ref:this.flexpaneBodyRef,className:k()("p-flexpane__body",n,{"p-flexpane__body--empty":r&&!this.isLoading(),"p-flexpane__body--empty_loading":r&&this.isLoading()})},this.isLoading()&&g.a.createElement("div",{className:"p-flexpane__floating_loader","data-qa":"floating_loader"},g.a.createElement(S.a,{size:"medium",noMargin:!0})),this.renderBody())));return Object(P.a)()?h:g.a.createElement(w.a,{component:this,order:c},h)}}]),t}(g.a.Component);L.displayName="Flexpane",L.defaultProps=x;var F=Object(P.a)()?Object(A.a)(L,"Flexpane",{index:1}):L,B=Object(v.b)(function(e){return{isOffline:!Object(C.c)(e),userAttentionIsOnChat:Object(R.e)(e)}},null,null,{pure:!1})(function(e){var t=e.forwardedRef,n=r()(e,["forwardedRef"]);return g.a.createElement(F,o()({ref:t},n))});t.b=g.a.forwardRef(function(e,t){return g.a.createElement(B,o()({forwardedRef:t},e))})},"sB/w":function(e,t,n){e.exports=n.p+"b2-67a4126.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},sQIv:function(e,t,n){},sUzI:function(e,t,n){},t5GV:function(e,t,n){},tEVE:function(e,t,n){},tFl5:function(e,t,n){},tLal:function(e,t,n){},tMdt:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("zmn3"),p=n("fujP"),h=n("ifKl"),m=n("aK/h"),b=n("kxpR"),f=n.n(b),_=n("XHGt"),g=n("TSYQ"),v=n.n(g),y=n("FLa3"),k=n("RAhH"),O=n("nNoG"),j=n("od5y"),C=n("XLFM"),E=n("lek6"),w=n("MREy"),S=new O.b("message"),I=(m.b.string.isRequired,m.b.string.isRequired,m.b.bool,m.b.shape({loading:m.b.bool,isHighlight:m.b.bool,feedbackOptions:m.b.object,justification:m.b.string,feedback:m.b.string}),m.b.func,m.b.func,{isHovered:!1,sliHighlight:null,onSliHighlightsDefaultFeedback:h.a,onSliHighlightsSecondaryFeedbackOption:h.a}),T=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSliHighlightsFeedbackDefaultPositive=n.onSliHighlightsFeedbackDefaultPositive.bind(n),n.onSliHighlightsFeedbackDefaultNegative=n.onSliHighlightsFeedbackDefaultNegative.bind(n),n.renderNegativeFeedbackMenu=n.renderNegativeFeedbackMenu.bind(n),n}return u()(t,e),o()(t,[{key:"onSliHighlightsFeedbackDefaultPositive",value:function(){this.props.sliHighlight.feedback||this.props.onSliHighlightsDefaultFeedback(!0)}},{key:"onSliHighlightsFeedbackDefaultNegative",value:function(){this.props.sliHighlight.feedback||this.props.onSliHighlightsDefaultFeedback(!1)}},{key:"renderPositiveHighlightLabel",value:function(){return f.a.createElement("span",null,f.a.createElement("span",{className:"c-message__label__highlight_title"},S.t("Highlight")),(this.props.sliHighlight.justification||this.props.isHovered)&&" \u2014 ",this.renderFeedbackControls())}},{key:"renderFeedbackControls",value:function(){var e=this.props,t=e.isHovered,n="default_positive"===e.sliHighlight.feedback;if(t){var a=v()({"c-message__label__highlight_positive":!0,"c-message__label__highlight_positive--active":n}),r=v()({"c-message__label__highlight_negative":!0,"c-message__label__highlight_negative--inactive":n});return f.a.createElement("span",null,S.t("Is this helpful?"),f.a.createElement(k.c,{tip:n?S.t("Thank you!"):S.t("This was helpful")},f.a.createElement(C.c,{className:a,onClick:this.onSliHighlightsFeedbackDefaultPositive},f.a.createElement(j.b,{type:"thumbs-up",size:"inherit",inline:!0}))),f.a.createElement(k.c,{tip:S.t("This wasn\u2019t helpful")},f.a.createElement(C.c,{className:r,onClick:this.onSliHighlightsFeedbackDefaultNegative},f.a.createElement(j.b,{type:"thumbs-down",size:"inherit",inline:!0}))))}return f.a.createElement(E.a,{text:this.props.sliHighlight.justification})}},{key:"renderNegativeHighlightLabel",value:function(){return f.a.createElement("span",null,f.a.createElement("strong",null,S.t("What\u2019s not working about this highlight?"))," ",S.t("Let us know, and we\u2019ll adjust."),"\xa0",f.a.createElement(w.e,{renderMenu:this.renderNegativeFeedbackMenu,position:"right",offsetX:0,offsetY:0},f.a.createElement(C.c,{className:"c-message__label__feedback_dropdown btn_unstyle sk_fill_blue"},S.t("Give Feedback")," ",f.a.createElement(j.b,{type:"chevron-down",inline:!0}))))}},{key:"renderNegativeFeedbackMenu",value:function(e){var t=this,n=this.props.sliHighlight.feedbackOptions;return Object(p.a)(n)?null:f.a.createElement(w.f,e,Object(d.a)(n.negative,function(e){return f.a.createElement(w.b,{key:e.args.ts,label:f.a.createElement(E.a,{text:e.text,noLinking:!0,showTooltips:!1}),onSelected:function(){return t.props.onSliHighlightsSecondaryFeedbackOption(e.args)}})}))}},{key:"render",value:function(){var e=this.props.sliHighlight;return e.feedback&&"default_positive"!==e.feedback?this.renderNegativeHighlightLabel():this.renderPositiveHighlightLabel()}}]),t}(b.PureComponent);T.displayName="SliHighlightsMessageLabel",T.defaultProps=I,t.a=Object(_.b)(null,function(e,t){var n=t.channelId,a=t.ts,r=t.sliHighlight;return{onSliHighlightsDefaultFeedback:function(t){return e(Object(y.g)({channelId:n,ts:a,feedback:t?"default_positive":"default_negative",leftFeedback:t,args:r.feedbackOptions[t?"default_positive":"default_negative"].args,requestId:r.requestId}))},onSliHighlightsSecondaryFeedbackOption:function(t){return e(Object(y.g)({channelId:n,ts:a,feedback:"negative",leftFeedback:!0,args:t,requestId:r.requestId}))}}})(T)},tn36:function(e,t,n){"use strict";function a(e,t){if(!t||!Array.isArray(t))throw new Error("bindAll: methodNames must be an array of method name strings to bind to the object");for(var n=0;n<t.length;n++){var a=e[t[n]];"function"==typeof a&&(e[t[n]]=a.bind(e))}return e}n.d(t,"a",function(){return a})},uC0n:function(e,t,n){},uS0p:function(e,t,n){},udbT:function(e,t,n){"use strict";var a=n("jo6Y"),r=n.n(a),i=n("QbLZ"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("V7oC"),p=n.n(d),h=n("mRg0"),m=n.n(h),b=n("ifKl"),f=n("aK/h"),_=n("kxpR"),g=n.n(_),v=n("tn36"),y=n("TSYQ"),k=n.n(y),O=n("llxT"),j=n("vakV"),C=n("ohM/"),E=n("VMwU"),w=n("i7LB"),S=n("sk9p"),I=n.n(S),T=n("vht4"),N=n("frt6"),R=n("qGgp"),A=(f.b.string,f.b.string.isRequired,f.b.bool,f.b.func.isRequired,function(e){function t(e){l()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStateFromHex(e.value),Object(v.a)(n,["handleSVChange","handleHueChange","handleOpacityChange"]),n}return m()(t,e),p()(t,[{key:"getStateFromHex",value:function(e){var t=this.props.alpha,n=Object(E.e)(e),a=I()(n,4),r=a[0],i=a[1],o=a[2],s=a[3];return{hue:r,saturation:i,brightness:o,opacity:t?s:1}}},{key:"getHexFromState",value:function(e){var t=this.props.alpha,n=e.hue,a=e.saturation,r=e.brightness,i=e.opacity,o=[n,a,r];return Object(E.g)(t?[].concat(o,[i]):o).substr(1)}},{key:"handleChange",value:function(e){var t=this;this.setState(function(t){return o()({},t,e)},function(){var e=t.getHexFromState(t.state);t.props.onChange(e)})}},{key:"handleSVChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.saturation,n=e.brightness;this.handleChange({saturation:t,brightness:n})}},{key:"handleHueChange",value:function(e){this.handleChange({hue:e})}},{key:"handleOpacityChange",value:function(e){this.handleChange({opacity:e})}},{key:"maybeRenderOpacitySlider",value:function(){if(!this.props.alpha)return null;var e=this.state,t=e.hue,n=e.saturation,a=e.brightness,r=e.opacity,i=Object(E.g)([t,n,a]).slice(1);return g.a.createElement(R.a,{color:i,value:r,onChange:this.handleOpacityChange})}},{key:"render",value:function(){var e=this.props.className,t=this.state,n=t.hue,a=t.saturation,r=t.brightness;return g.a.createElement("div",{className:e},g.a.createElement(T.a,{hue:n,value:{saturation:a,brightness:r},onChange:this.handleSVChange}),g.a.createElement(N.a,{value:n,onChange:this.handleHueChange}),this.maybeRenderOpacitySlider())}}]),t}(_.PureComponent));A.displayName="HSVPicker",A.defaultProps={className:"",alpha:!1};var P=A,M=(n("yhoe"),"FFFFFF00"),D=-4,x=-4,L=(f.b.string.isRequired,f.b.bool,f.b.func,f.b.func,f.b.func,f.b.func,f.b.string,f.b.string,{alpha:!1,onChange:b.a,onClose:b.a,onBlur:b.a,onFocus:b.a,"data-qa":"color_picker",position:"bottom-left"}),F=function(e){return e&&e.stopPropagation()},B=function(e){function t(e){l()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=e.value,r=e.alpha,i=Object(E.j)(a,r)||Object(E.j)(M,r);return n.state={inputValue:i,lastNormalizedValue:i,invalid:!1,focused:!1},n.inputRef=g.a.createRef(),Object(v.a)(n,["focus","handleContainerClick","handleInputFocus","handleInputBlur","handleInputChange","handleHSVChange","renderPopover"]),n}return m()(t,e),p()(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.value,a=e.alpha;if(t.focused)return null;var r=Object(E.j)(n,a);return r?{inputValue:r,lastNormalizedValue:r}:null}}]),p()(t,[{key:"focus",value:function(){this.inputRef.current&&this.inputRef.current.focus()}},{key:"maybeTriggerOnChange",value:function(e){var t=this.props.value;e&&t!==e&&this.props.onChange(e)}},{key:"handleContainerClick",value:function(){this.state.focused||this.setState(function(){return{focused:!0}},this.focus)}},{key:"handleInputFocus",value:function(e){this.state.focused||(this.setState(function(){return{focused:!0}}),this.props.onFocus&&(e.persist(),this.props.onFocus(e)))}},{key:"handleInputBlur",value:function(e){this.setState(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).lastNormalizedValue;return{inputValue:e,invalid:!e,focused:!1}}),this.props.onBlur&&(e.persist(),this.props.onBlur(e))}},{key:"handleInputChange",value:function(e){var t=e.target.value,n=Object(E.j)(t);this.setState(function(e){return{inputValue:t,lastNormalizedValue:n||e.lastNormalizedValue,invalid:!n}}),this.maybeTriggerOnChange(n)}},{key:"handleHSVChange",value:function(e){var t=Object(E.j)(e);this.setState(function(){return{lastNormalizedValue:t,inputValue:t,invalid:!t}}),this.maybeTriggerOnChange(t)}},{key:"renderPopover",value:function(e){var t=this.props,n=t.alpha,a=t.value,r=this.props.position.includes("top")?-x:x;return g.a.createElement(j.a,o()({},e,{position:this.props.position,offsetX:D,offsetY:r}),g.a.createElement(P,{className:"c-color_picker__popover",value:a,alpha:n,onChange:this.handleHSVChange}))}},{key:"renderColorBlock",value:function(){var e={background:"#"+this.state.lastNormalizedValue},t=this.props["data-qa"]&&this.props["data-qa"]+"_color_block";return g.a.createElement("span",{className:"c-color_picker__color_block_container",role:"presentation",onClick:F},g.a.createElement(C.a,{onClose:this.props.onClose,renderPopover:this.renderPopover,onClick:this.setHSVFromValue},g.a.createElement(O.a,{className:"c-color_picker__color_block",style:e,"data-qa":t})))}},{key:"render",value:function(){var e=this.props,t=(e["data-qa"],e.value,e.alpha),n=(e.onChange,e.onClose,e.onBlur,e.onFocus,e.position,r()(e,["data-qa","value","alpha","onChange","onClose","onBlur","onFocus","position"])),a=this.state,i=a.focused,s=a.invalid,l=k()("c-color_picker__container",{"c-color_picker__container--alpha":t,"c-color_picker__container--focus-within":i,"c-color_picker__container--invalid":s});return g.a.createElement("div",{className:l,"data-qa":this.props["data-qa"],onClick:this.handleContainerClick,role:"presentation"},this.renderColorBlock(),g.a.createElement("span",{className:"c-color_picker__hex_hash"},"#"),g.a.createElement("input",o()({className:"c-color_picker__input","data-qa":this.props["data-qa"]?this.props["data-qa"]+"_input":void 0,ref:this.inputRef,onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onChange:this.handleInputChange,type:"text",value:this.state.inputValue,"aria-invalid":!!this.state.invalid},Object(w.a)(n))))}}]),t}(_.PureComponent);B.displayName="ColorPicker",B.defaultProps=L;t.a=B},"v+20":function(e,t,n){},v47e:function(e,t,n){"use strict";var a=n("9oTK"),r=n("aK/h"),i=n("XfeM"),o=n("ZAxE"),s=n("AfrZ"),l=n("om+M"),c=n("4zXV"),u=Object(l.a)("Get Welcome Place data for this user",function(e){return e(Object(c.a)({method:"onboarding.welcome",args:{},reason:"fetch-welcome-place-data"})).then(function(e){return{items:e.items}})});u.propTypes={};var d=n("P2LY"),p=n("7EGn"),h=n("wd/R"),m=n.n(h),b=n("j04V");n.d(t,"a",function(){return f}),n.d(t,"b",function(){return k});var f=Object(i.b)("Dismiss Welcome Place page",function(e){return e(Object(s.f)({pref:"welcome_place_state",value:"disabled"}))}),_=Object(i.b)("Mark Welcome Place as decayed",function(e){return e(Object(s.f)({pref:"welcome_place_state",value:"decayed"}))});Object(i.b)("Fetch messages for channel overview",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.messageTimestamps;if(!a||!r)return Promise.resolve();var i=r.map(function(t){return e(Object(o.b)({channelId:a,oldest:t,latest:t,limit:1}))});return Promise.all(i).then(function(t){var n={};t.forEach(function(e){(e&&e.msgs||[]).forEach(function(e){n[e.ts]=e})}),e(Object(d.b)({channelId:a,messages:n}))})}).propTypes={channelId:r.b.string.isRequired,messageTimestamps:r.b.arrayOf(r.b.string).isRequired};var g,v=Object(i.b)("Decay Welcome Place page if needed",(g=Object(a.method)(function(e,t){var n=t();return function(e){var t=e.find(function(e){return"workflow"===e.type}),n=Object(p.a)(t,"content.workflow",null);if(!n)return!1;if("in_progress"===n.state&&n.date_start&&m()().diff(1e3*n.date_start,"days")>=14)return!0;if("completed"===n.state&&n.date_complete&&m()().diff(1e3*n.date_complete,"days")>=3)return!0;return!1}(Object(b.a)(n))?e(_()):Promise.resolve()}),function(e,t){return g.apply(this,arguments)}));v.propTypes={};var y,k=Object(i.b)("Fetch and set welcome place data",(y=Object(a.coroutine)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.resolve)(t(u()));case 2:return n=e.sent,e.next=5,Object(a.resolve)(t(Object(d.c)(n)));case 5:return e.next=7,Object(a.resolve)(t(v()));case 7:case"end":return e.stop()}},e,void 0)})),function(e){return y.apply(this,arguments)}));k.propTypes={}},vKzi:function(e,t,n){},vOUN:function(e,t,n){},vRZS:function(e,t,n){"use strict";function a(){return window&&window.desktop}n.d(t,"a",function(){return a})},vVZ5:function(e,t,n){"use strict";var a=n("CpTu"),r=n("kxpR"),i=n.n(r),o=n("XfeM"),s=n("DTT0"),l=n("sk9p"),c=n.n(l),u=n("iCc5"),d=n.n(u),p=n("V7oC"),h=n.n(p),m=n("FYw3"),b=n.n(m),f=n("mRg0"),_=n.n(f),g=n("OZf9"),v=n("7EGn"),y=n("HI9p"),k=n("S1sa"),O=n("Z0Cl"),j=n("zmn3"),C=n("ifKl"),E=n("aK/h"),w=n("tn36"),S=n("TSYQ"),I=n.n(S),T=n("XHGt"),N=n("uPpK"),R=n("nNoG"),A=n("bmfP"),P=n("U3Q0"),M=n("eK0w"),D=n("4aLn"),x=n("a69O"),L=n("XLFM"),F=n("od5y"),B=n("jYCR"),q=n("HO/Y"),U=n("clTI"),H=n("uf9I"),G=n("cTgs"),W=n("RMmo"),K=n("6kok"),V=n("Fdc0"),z=n("5mKg"),Y=n("Zr7G"),Q=n("rtjy"),J=n("k2C/"),X=n("toaU"),Z=n("kLJo"),$=n("V2L1"),ee=n("hXpn"),te=n("kd6D"),ne=n("QbLZ"),ae=n.n(ne),re=n("A+cF"),ie=n("1zbP"),oe=n("6GV3"),se=n("D4L/"),le=n("/3PZ"),ce=[230,132,102,88,68,44,34],ue=(E.b.string,E.b.number.isRequired,E.b.object,E.b.bool,{className:void 0,team:void 0,invert:!1});function de(e){var t=e.className,n=e.invert,a=e.size,r=e.team,o=Object(ie.c)(r),s=Object(ie.d)(r);if(o||s)return i.a.createElement(le.a,{className:I()(t,"c-team_entity__icon"),isNonExistent:o,size:a,invert:n});var l=function(e){var t=e.size,n=e.team,a=Object(z.h)(n);if(!a||a.image_default)return null;var r=2*t;return a["image_"+Object(oe.a)(r,ce)]}({size:a,team:r}),c=!l&&function(e){var t=Object(z.e)(e);return Object(z.j)(t,{limit:2})}(r);return i.a.createElement("span",{"aria-hidden":"true",className:I()(t,"c-team_entity__icon",{"c-team_entity__icon--default":!l}),style:{backgroundImage:l&&"url("+l+")",fontSize:Math.round(a/1.8)+"px",height:a,lineHeight:a+"px",width:a}},c)}de.displayName="TeamIcon",de.defaultProps=ue;var pe=Object(T.b)(function(e,t){var n=t.id;return{team:Object(se.i)(e,n)}})(de);pe.propTypes={id:E.b.string.isRequired};var he=pe,me=n("hUMe"),be=(n("HAG/"),E.b.string,E.b.string.isRequired,E.b.bool,E.b.bool,{className:void 0,isDeactivated:!1,invert:!1});function fe(e){var t=e.className,n=e.id,a=e.invert,r=e.isDeactivated?te.c.dim:null;return a&&(r=te.c.highlightDark),i.a.createElement(re.d,{avatar:function(e){return i.a.createElement(he,ae()({},e,{id:n,size:te.a.small,invert:a}))},className:t,size:"small",style:r,text:i.a.createElement(me.a,{id:n,invert:a})})}fe.displayName="SmallTeamEntity",fe.defaultProps=be;var _e=fe,ge=(E.b.string,E.b.string.isRequired,E.b.bool,E.b.bool,E.b.bool,E.b.node,{className:void 0,isActive:!1,isDeactivated:!1,isDisabled:!1,secondaryContent:void 0});function ve(e){var t=e.className,n=e.id,a=e.isActive,r=e.isDeactivated,o=e.isDisabled,s=e.secondaryContent,l=void 0;return a?l=o||r?te.c.highlightDim:te.c.highlightDark:(o||r)&&(l=te.c.dim),i.a.createElement(ee.a,{className:t,style:l,primaryContent:i.a.createElement(_e,{id:n,isDeactivated:r,invert:l===te.c.highlightDark}),secondaryContent:s,size:"small"})}ve.displayName="SmallTeamListEntity",ve.defaultProps=ge;var ye=ve,ke=n("5tH5");n("/7Bh");function Oe(e,t){var n=[];return Object(g.a)(e,function(e){var a=e.item;if(!Object(J.b)(a.id)){if(Object(J.a)(a.id)){if(a.id===t)return;if(!Object(z.H)(a))return}n.push(a)}}),n}var je=new R.b("quick_switcher"),Ce=(E.b.bool,E.b.func,E.b.func.isRequired,E.b.func.isRequired,E.b.func.isRequired,E.b.string.isRequired,E.b.func.isRequired,E.b.bool.isRequired,E.b.object.isRequired,E.b.func.isRequired,E.b.func.isRequired,{featureSonicQuickSwitcher:!1,search:C.a}),Ee={open:!1,searchQuery:"",results:[],index:0,deletedResults:[],initialFocusSet:!1,searchMetaData:[]},we={entities:{channels:{includePublic:!0,includePrivate:!0,includeFromAnotherTeam:!0,includeMpims:!0,includeArchived:!0,onlyIfMember:!1,searchPreviousNames:!0,onlyVisibleMpims:!1},members:{includeSelf:!0,includeSlackbot:!0,includeBots:!0,onlyLocalTeam:!1,onlyAdmins:!1,includeDeleted:!0},teams:!0,userGroups:!1,views:!1},limit:24,sort:{preferExactMatch:!0,frecency:!0,preferChannelsUserBelongsTo:!0,selfFirst:!0},allowEmptyQuery:!0,returnMetadata:!0,tiered:!0},Se=function(e){function t(e){d()(this,t);var n=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(w.a)(n,["onInput","renderResult","onShowDeactivatedClick","onItemClick","handleUpOrShiftTabKey","handleDownOrTabKey","handleEnterKey","getBestFormerName"]),n.state=Ee,n.searchInputRef=i.a.createRef(),n}return _()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.bindKeyCommands(),this.setResultsToUnreadsAndDrafts()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.telemeter;n.getLatestMark("qs_input_change")&&n.measureAndClear("qs_input_change","qs_result_rendering_ms"),!t.initialFocusSet&&this.searchInputRef.current&&(this.setInitialFocus(),this.searchInputRef.current.focus())}},{key:"componentWillUnmount",value:function(){this.unbindKeyCommands()}},{key:"onItemClick",value:function(){this.openChannelOrDm()}},{key:"onItemHover",value:function(e){this.state.index!==e&&this.setState(function(){return{index:e}})}},{key:"onShowDeactivatedClick",value:function(){var e=Object(O.a)(this.state.results,function(e){return"hasDeactivated"!==e.id});e=e.concat(this.state.deletedResults),this.setState(function(){return{results:e,deletedResults:[]}})}},{key:"onInput",value:function(e){this.props.telemeter.mark("qs_input_change");var t=e.target.value;this.setState(function(){return{searchQuery:t}}),this.search(t)}},{key:"setResultsToUnreadsAndDrafts",value:function(){this.resetResultsState(this.props.getDraftAndUnreadChannels())}},{key:"setInitialFocus",value:function(){this.setState(function(){return{initialFocusSet:!0}})}},{key:"setSearchMetaData",value:function(e){this.setState(function(){return{searchMetaData:e}})}},{key:"getBestFormerName",value:function(e){var t=this.state.searchMetaData,n=Object(a.a)(t,["item.id",e]);if(!n)return null;var r=Object(v.a)(n,"bestPreviousNameMatch");return r||null}},{key:"handleUpOrShiftTabKey",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.state,n=t.index,a=t.results;this.setState(function(){return{index:0===n?a.length-1:n-1}})}},{key:"handleDownOrTabKey",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.state,n=t.index,a=t.results;this.setState(function(){return{index:(n+1)%a.length}})}},{key:"handleEnterKey",value:function(e){e.preventDefault(),this.openChannelOrDm()}},{key:"bindKeyCommands",value:function(){var e=[{keys:["up","shift+tab"],handler:this.handleUpOrShiftTabKey},{keys:["down","tab"],handler:this.handleDownOrTabKey},{keys:["enter"],handler:this.handleEnterKey}];this.keyCommands||(this.keyCommands=new W.a(document.body)),this.keyCommands.bindAll(e)}},{key:"unbindKeyCommands",value:function(){this.keyCommands&&this.keyCommands.reset()}},{key:"openChannelOrDm",value:function(){var e=this.state,t=e.results,n=e.index,a=e.searchQuery,r=this.props,i=r.currentTeamId,o=r.getTeamIdForChannelFromAnotherTeam,s=t[n],l=s.id;if(Object(J.a)(l))Object(Z.g)(X.a,{teamId:l},{reason:"quickswitcher:openChannelOrDm"});else{var c=Object(K.ab)(s)?o(s):i;this.props.recordFrecencyEvent({id:l,text:a}),this.props.setPrimaryView({id:l,teamId:c}),this.setState(function(){return Ee}),this.props.closeModal()}}},{key:"search",value:function(e){var t=this;return this.remoteSearchPromise&&this.remoteSearchPromise.isPending()&&this.remoteSearchPromise.cancel(),e?this.props.search({query:e,options:we}).then(function(e){t.remoteSearchPromise=e.promise,t.setSearchMetaData(e);var n=Oe(e,t.props.currentTeamId);return t.resetResultsState(n),t.remoteSearchPromise.then(function(e){t.setSearchMetaData(e);var n=Oe(e,t.props.currentTeamId);t.resetResultsState(n,!1)})}):(this.setResultsToUnreadsAndDrafts(),null)}},{key:"resetResultsState",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=Object(k.a)(e,function(e){return Object(V.eb)(e)||t.props.isChannelDeletedMember(e)}),r=c()(a,2),i=r[0],o=r[1],s=void 0,l=void 0;i.length>1&&o.length?(s=o.concat({id:"hasDeactivated"}),l=i):(s=o.concat(i),l=[]);var u=this.state,d=u.index,p=u.results,h=0;if(!n&&p.length){var m=p[d];m&&m.id&&(h=Object(y.a)(s,function(e){return m.id===e.id}))}this.setState(function(){return{results:s,deletedResults:l,index:-1===h?0:h}})}},{key:"renderResult",value:function(e){var t=this;if(!this.props.featureSonicQuickSwitcher)return null;var n=this.state.results[e].id,a=this.getBestFormerName(n),r=e===this.state.index;if("hasDeactivated"===n)return this.renderDeletedOptionRow();var o=I()("p-quick_switcher__searcher_result",{"p-quick_switcher__searcher_result--selected":e===this.state.index}),s=void 0;return s=n===ke.a.allThreads?i.a.createElement(x.a,{invert:r,label:je.t("Threads"),prefix:i.a.createElement(F.b,{type:"comment-alt",size:"inherit"}),"data-qa":"quick_switcher_result_threads"}):Object(J.a)(n)?i.a.createElement(ye,{id:n,isActive:r}):i.a.createElement(D.a,{channelId:n,showMemberAvatar:!0,invert:r,"data-qa":"quick_switcher_result_channel",displayBestFormerNameOnly:!0,bestFormerName:a}),i.a.createElement(L.c,{onClick:this.onItemClick,onMouseMove:function(){return t.onItemHover(e)},className:o,"data-qa":"quick_switcher_result"},s)}},{key:"renderEmptyResults",value:function(){if(!this.props.featureSonicQuickSwitcher)return null;var e=this.state.searchQuery,t=je.t("Create a channel named #{channelName}",{channelName:e}),n=je.t("No matches found. Did you spell it correctly?");return i.a.createElement("div",{className:"p-quick_switcher__empty_results_container","data-qa":"quick_switcher_empty_results"},i.a.createElement("span",{className:"p-quick_switcher__empty_results_label"},n),i.a.createElement($.a,null,i.a.createElement(L.d,{type:"outline",size:"small"},t)))}},{key:"renderDeletedOptionRow",value:function(){var e=I()("p-quick_switcher__show_deactivated"),t=je.t("Show { deletedLength, plural, =1 { # deactivated account } other { # deactivated accounts }}",{deletedLength:this.state.deletedResults.length,fallbackHash:"feba4c19a527da3284a69be904d33a90e6fb3f17",fallbackHashNs:"jumper"});return i.a.createElement(L.c,{onClick:this.onShowDeactivatedClick,className:e},t)}},{key:"renderResultsFromSearcher",value:function(){var e=this,t=this.state,n=t.results,a=t.index;this.keys=Object(j.a)(n,"id");var r=this.keys[a],o=Math.min(38*n.length,300);return i.a.createElement("div",{"data-qa":"quick_switcher_results"},i.a.createElement(N.a,{disableHeight:!0},function(t){var n=t.width;return i.a.createElement(M.a,{width:n,height:o,keys:e.keys,rowRenderer:e.renderResult,itemToScroll:r,animateOnScroll:!1})}))}},{key:"renderResults",value:function(){return this.state.results.length?this.renderResultsFromSearcher():this.state.searchQuery?this.renderEmptyResults():null}},{key:"renderFooter",value:function(){var e=je.rt('{iconUpArrow}{iconDownArrow} to navigate {iconEnter} to select <strong className="margin_left_150">esc</strong> to dismiss',{iconUpArrow:i.a.createElement(F.b,{type:"arrow-large-up",size:"inherit",className:"p-quick_switcher__footer_icon"}),iconDownArrow:i.a.createElement(F.b,{type:"arrow-large-down",size:"inherit",className:"p-quick_switcher__footer_icon"}),iconEnter:i.a.createElement(F.b,{type:"enter",size:"inherit",className:"p-quick_switcher__footer_icon margin_left_150"}),fallbackHash:"6073ad556716a850199fe235793ca2e2a12dc636",fallbackHashNs:"jumper"});if(!this.props.featureOfflineMode)return i.a.createElement("div",{className:"t-display-as-micro"},e);var t=je.rt("{iconOffline} No connection \u2014\xa0some results may not be available.",{iconOffline:i.a.createElement(F.b,{type:"cloud-offline",size:"inherit",className:"p-quick_switcher__footer_icon p-quick_switcher__footer_icon_offline"})});return i.a.createElement("div",{className:"t-display-as-micro"},i.a.createElement(A.b,null,e),i.a.createElement(A.a,null,t))}},{key:"render",value:function(){return this.props.featureSonicQuickSwitcher?i.a.createElement(P.a,{showHeader:!1,showFooter:!0,className:"p-quick_switcher","data-qa":"quick_switcher",showCancelButton:!1,showCloseButton:!1,showGoButton:!1,footerText:this.renderFooter(),overlayClassName:"p-quick_swticher_overlay",titleAria:je.t("Quick Switcher")},i.a.createElement("input",{placeholder:je.t("Jump to..."),className:"p-quick_switcher__input","data-qa":"quick_switcher_input",onChange:this.onInput,value:this.state.searchQuery,ref:this.searchInputRef,spellCheck:!1}),this.renderResults()):null}}]),t}(r.PureComponent);Se.displayName="QuickSwitcher",Se.defaultProps=Ce;var Ie={search:B.a,setPrimaryView:G.a,closeModal:s.a,recordFrecencyEvent:Q.c},Te=Object(T.b)(function(e){return{featureSonicQuickSwitcher:Object(q.i)(e,"feature_sonic_quick_switcher"),getDraftAndUnreadChannels:function(){return Object(U.h)(e)},getTeamIdForChannelFromAnotherTeam:function(t){return Object(K.Xb)(e,t)},isChannelDeletedMember:function(t){return Object(K.jb)(e,t)},currentTeamId:Object(H.b)(e),featureOfflineMode:Object(q.i)(e,"feature_offline_mode"),telemeter:Object(Y.c)({state:e})}},Ie)(Se),Ne=n("3zPy"),Re=n("jeHR"),Ae=n("Rmtr"),Pe=n("iH/p"),Me=n("1F8+"),De=Object(o.b)("toggle the omniswitcher using command+k",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).key;Object(Ae.e)(t())?e(Object(Me.a)()):e(Object(Pe.e)({key:n}))});De.propTypes={key:E.b.string.isRequired},n.d(t,"b",function(){return Le});var xe="quick-switcher";function Le(e){var t=Object(s.c)(e);return!!Object(a.a)(t,{name:xe})}var Fe=Object(o.b)("maybe shows quick switcher modal",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.event,o=n.keyCode;if(r&&r.preventDefault(),Object(Re.b)(t())){var l=void 0;return o&&o===Ne.codes.k?l="k":o&&o===Ne.codes.t&&(l="t"),e(De({key:l||"button"})),!0}return!!function(e,t){var n=Object(s.c)(t());Object(a.a)(n,{name:xe})?e(Object(s.a)()):e(Object(s.e)({element:i.a.createElement(Te,null),name:xe}))}(e,t)});Fe.propTypes={event:E.b.object,keyCode:E.b.number};t.a=Fe},vht4:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("tn36"),h=n("kxpR"),m=n.n(h),b=n("TSYQ"),f=n.n(b),_=n("aK/h"),g=n("ubOb"),v=n("VMwU"),y=n("nNoG"),k=(n("xMP7"),new y.b("color_picker")),O=(_.b.number,_.b.shape({saturation:_.b.number.isRequired,brightness:_.b.number.isRequired}),_.b.func,_.b.func,_.b.func,_.b.bool.isRequired,{hue:0,value:{saturation:0,brightness:1},onChange:d.a,onFocus:d.a,onBlur:d.a}),j=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={width:160,height:160},n.top=0,n.left=0,n.isMouseDown=!1,n.gradientBoxRef=m.a.createRef(),Object(p.a)(n,["handleKeyDown","handleMouseDown","handleMouseUp","handleMouseMove","updateDimensions"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){requestAnimationFrame(this.updateDimensions)}},{key:"componentDidUpdate",value:function(){requestAnimationFrame(this.updateDimensions)}},{key:"componentWillUnmount",value:function(){this.removeDragListeners()}},{key:"getAriaValue",value:function(){var e=this.props,t=e.hue,n=e.value,a=n.saturation,r=n.brightness,i=Object(v.h)([t,a,r]);return Object(v.k)(i)}},{key:"updateDimensions",value:function(){if(this.gradientBoxRef.current){var e=this.gradientBoxRef.current.getBoundingClientRect(),t=e.top,n=e.left,a=e.width,r=e.height;this.top=t,this.left=n,this.setState(function(){return{width:a,height:r}})}}},{key:"addDragListeners",value:function(){window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("mousemove",this.handleMouseMove)}},{key:"removeDragListeners",value:function(){window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("mousemove",this.handleMouseMove)}},{key:"updateValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.saturation,n=e.brightness;this.props.onChange({saturation:Number(Math.min(1,Math.max(0,t)).toFixed(2)),brightness:Number(Math.min(1,Math.max(0,n)).toFixed(2))})}},{key:"handleKeyDown",value:function(e){var t={ArrowUp:{saturationDelta:0,brightnessDelta:.01},ArrowDown:{saturationDelta:0,brightnessDelta:-.01},ArrowLeft:{saturationDelta:-.01,brightnessDelta:0},ArrowRight:{saturationDelta:.01,brightnessDelta:0}}[{Up:"ArrowUp",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight"}[e.key]||e.key];if(t){e.stopPropagation(),e.preventDefault();var n=t.saturationDelta,a=t.brightnessDelta,r=this.props.value,i=r.saturation,o=r.brightness;this.updateValue({saturation:i+n,brightness:o+a})}}},{key:"handleMouseEvent",value:function(e){var t=e.clientX,n=e.clientY,a=this.state,r=a.width,i=a.height,o=(t-this.left)/r,s=1-(n-this.top)/i;this.updateValue({saturation:o,brightness:s})}},{key:"handleMouseDown",value:function(e){this.isMouseDown=!0,this.addDragListeners(),this.handleMouseEvent(e)}},{key:"handleMouseUp",value:function(){this.isMouseDown=!1,this.removeDragListeners()}},{key:"handleMouseMove",value:function(e){this.isMouseDown&&this.handleMouseEvent(e)}},{key:"renderThumb",value:function(){var e=this.state,t=e.width,n=e.height,a=this.props.value,r=a.saturation,i=a.brightness,o={left:Math.min(1,Math.max(0,r))*t,top:(1-Math.min(1,Math.max(0,i)))*n},s=f()("c-sv_picker__thumb",{"c-sv_picker__thumb--focus-visible":this.props.hasKeyboardFocus}),l=k.t("color wheel"),c=this.getAriaValue();return m.a.createElement("span",{className:s,style:o,role:"slider",tabIndex:0,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onKeyDown:this.handleKeyDown,"aria-describedby":"sv-picker-description","aria-label":l,"aria-valuenow":c,"aria-valuetext":c})}},{key:"renderAriaDescription",value:function(){var e=k.t("Use up and down to move the slider along the Y axis, left and right to move along the X axis.");return m.a.createElement("div",{id:"sv-picker-description",className:"offscreen"},e)}},{key:"render",value:function(){var e=this.props.hue,t="linear-gradient(hsla("+e+", 100%, 100%, 0), hsla("+e+", 100%, 0%, 1)), linear-gradient(90deg, hsla("+e+", 0%, 100%), hsla("+e+", 100%, 50%))";return m.a.createElement("div",{ref:this.gradientBoxRef,className:"c-sv_picker__gradient_box",style:{background:t},role:"presentation",onMouseDown:this.handleMouseDown,"data-qa":"sv_picker_gradient_box"},this.renderThumb(),this.renderAriaDescription())}}]),t}(h.PureComponent);j.displayName="SVPicker",j.defaultProps=O,t.a=Object(g.a)(j)},vr4i:function(e,t,n){},w0jh:function(e,t,n){e.exports=n.p+"you_left_call_v2-7994bfa.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},wb76:function(e,t,n){},"wuO/":function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return d});var a=n("aK/h"),r=n("XfeM"),i=n("yHhI"),o=n("+cPl"),s=n("V/Wy"),l=n("CzFX"),c=Object(r.b)("Set channel notification override, and call API",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.name,r=n.value,c=n.channelId,u=n.sync;if(u&&"desktop"!==a)throw new Error("Cannot use sync arg with "+a+", can only be applied when name is 'desktop'");var d=Object(s.c)(t(),c,a);return e(Object(l.c)({name:a,value:r,channelId:c,sync:u})),e(Object(o.c)({name:a,value:r,channelId:c,sync:u,reason:"prefs-store/setChannelNotificationOverride"})).catch(function(n){e(Object(l.c)({name:a,value:d,channelId:c,sync:u}));var r=n&&n.data&&n.data.error||"unknown error";Object(i.a)({getState:t}).error("PREFS","users.prefs.setNotifications failed to set "+c+": "+r)})});c.propTypes={name:a.b.string.isRequired,value:a.b.any.isRequired,channelId:a.b.string.isRequired,sync:a.b.bool};var u=Object(r.b)("Resets a channel's notification overrides",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).channelId,a=Object(s.b)(t(),n);return a?(e(Object(l.a)({channelId:n})),e(Object(o.c)({channelId:n,name:"reset",value:"default",reason:"prefs-store/resetChannelNotificationOverride"})).catch(function(r){e(Object(l.b)({channelId:n,override:a}));var o=r&&r.data&&r.data.error||"unknown error";Object(i.a)({getState:t}).error("PREFS","users.prefs.setNotifications failed to reset "+n+": "+o)})):Promise.resolve()});u.propTypes={channelId:a.b.string.isRequired};var d=Object(r.b)("Set a global notification pref via the users.prefs.setNotifications API, updating local prefs optimistically first",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.name,r=n.value,i=n.sync,c=void 0!==i&&i,u=n.reason;if(!a||null==r)return Promise.reject(new Error("setNotificationsGlobalPrefByApi requires a name and value to be passed."));var d=t(),p=Object(s.d)(d,a);return e(Object(l.d)({name:a,value:r,sync:c})),e(Object(o.d)({name:a,value:r,sync:c,reason:u})).catch(function(){e(Object(l.d)({name:a,value:p,sync:c}))})});d.propTypes={name:a.b.oneOf(["global_mobile","global_mpdm_mobile","global_desktop","global_mpdm_desktop","global_keywords","mobile_sound","desktop_sound","no_text_in_notifications","push_show_preview","push_idle_wait","threads_everything"]).isRequired,value:a.b.oneOfType([a.b.string,a.b.number,a.b.bool]).isRequired,sync:a.b.bool,reason:a.b.string}},"x++y":function(e,t,n){},xMP7:function(e,t,n){},xRgT:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),h=n("sk9p"),m=n.n(h),b=n("m1cH"),f=n.n(b),_=n("ifKl"),g=n("kxpR"),v=n.n(g),y=n("XHGt"),k=n("aK/h"),O=n("nNoG"),j=n("TSYQ"),C=n.n(j),E=n("ngQI"),w=n("tn36"),S=n("g5qt"),I=n("lhZz"),T=n("kLJo"),N=n("toaU"),R=n("KQjq"),A=n("HO/Y"),P=n("9/DQ"),M=n("rWF5"),D=n("RQI5"),x=n("2jER"),L=n("/Rx2"),F=n("Smdl"),B=n("yHhI"),q=n("od5y"),U=n("RAhH"),H=n("llxT"),G=n("ISfF"),W=new O.b("team_picker"),K=(k.b.func.isRequired,k.b.bool,k.b.bool,function(e){function t(){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.featureClassicNav,n=e.isDragInProgress,a={onClick:this.props.addWorkspace},i=C()("p-team_sidebar__add_button",{"p-team_sidebar__add_button--mac":t&&Object(M.p)()}),o={opacity:n?0:1},s=W.t("Add a new workspace");return v.a.createElement(U.c,{tip:s,position:t?"right":"bottom-left",delay:U.a,offsetX:t?5:0,offsetY:t?0:G.b,style:o},v.a.createElement(H.a,r()({"aria-label":s},a,{className:i}),v.a.createElement(q.b,{type:"plus-thick",className:"p-team_sidebar__add_button_icon"})))}}]),t}(g.PureComponent));K.displayName="AddTeamButton",K.defaultProps={featureClassicNav:!1,isDragInProgress:!1};var V,z={addWorkspace:R.a},Y=Object(y.b)(null,z)(K),Q=n("9oTK"),J=n("vJtL"),X=n("eD8c"),Z=n("0NgK"),$=n("D4L/"),ee=n("5mKg"),te=n("XLFM"),ne=n("derf"),ae=(V=Object(Q.coroutine)(regeneratorRuntime.mark(function e(t){var a,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.resolve)(Promise.resolve().then(n.bind(null,"HuaI")));case 2:return a=e.sent,r=a.removeWorkspaceFromPreviousWorkspaces,e.next=6,Object(Q.resolve)(Promise.resolve().then(n.bind(null,"lhZz")));case 6:i=e.sent,o=i.getClientStoreInstance,o().dispatch(r(t));case 10:case"end":return e.stop()}},e,this)})),function(e){return V.apply(this,arguments)}),re=new O.b("team_picker"),ie=(k.b.string.isRequired,k.b.func.isRequired,k.b.string.isRequired,k.b.func.isRequired,k.b.bool.isRequired,k.b.shape({image_default:k.b.bool,image_34:k.b.string,image_44:k.b.string,image_68:k.b.string,image_88:k.b.string,image_102:k.b.string,image_132:k.b.string,image_230:k.b.string}),k.b.number,k.b.bool,k.b.bool,k.b.number,k.b.bool,k.b.number,k.b.bool,k.b.bool,k.b.oneOfType([k.b.object,k.b.func]),k.b.bool,k.b.object,k.b.object,k.b.func,{order:0,isActive:!1,failedToBoot:!1,shadow:1,hasUnreads:!1,mentionCount:0,icon:null,shouldShowKeyboardShortcut:!1,hasSessionExpired:!1,forwardedRef:void 0,isDragging:!1,draggableProps:{},dragHandleProps:{},onItemActive:_.a}),oe=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(w.a)(n,["getContextMenuTemplate","renderShortcutHint","renderBadge","setRef"]),n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.props.isActive&&this.props.onItemActive(this.ref)}},{key:"componentDidUpdate",value:function(e){this.props.isActive&&!e.isActive&&this.props.onItemActive(this.ref)}},{key:"getTooltip",value:function(){var e=this.props,t=e.teamName,n=e.order+1;if(!S.V||n>9)return t;var a=Object(M.p)()?"\u2318"+n:"Ctrl+"+n,r=re.t("Press {shortcut} to switch",{shortcut:a});return v.a.createElement("span",null,t," ",v.a.createElement("span",{className:"sk_light_grey"},r))}},{key:"getContextMenuTemplate",value:function(){var e=this.props,t=e.teamId,n=e.teamName,a=e.signOutFromTeam,r=e.hasTeamBooted,i=e.hasSessionExpired,o=n.replace("&","&&");return[{label:re.t("&Sign out of")+" "+o,enabled:i||r,click:function(){i?ae(t):a(t)}}]}},{key:"setRef",value:function(e){if(e){this.ref=e;var t=this.props.forwardedRef;t&&(Object(J.a)(t)?t(e):t.current=e)}}},{key:"renderShortcutHint",value:function(){var e=this.props,t=e.order,n=e.shouldShowKeyboardShortcut,a=t+1,r=C()("p-team_sidebar__shortcut_hint",{"p-team_sidebar__shortcut_hint--visible":n});return a<=9?v.a.createElement("div",{className:r},a):null}},{key:"renderBadge",value:function(){var e=this.props,t=e.hasUnreads,n=e.mentionCount,a="";return e.hasSessionExpired?a=v.a.createElement("div",{className:"p-team_sidebar__signed_out_badge"},v.a.createElement(q.b,{type:"warning",className:"p-team_sidebar__signed_out_badge__stroke"}),v.a.createElement(q.b,{type:"warning-filled"})):n?a=v.a.createElement("div",{className:"p-team_sidebar__mentions_badge"},v.a.createElement("span",null,n>99?"99+":n)):t&&(a=v.a.createElement("div",{className:"p-team_sidebar__unread_dot"})),a}},{key:"render",value:function(){var e=this.props,t=e.icon,n=e.isActive,a=e.teamName,i=e.hasTeamBooted,o=e.draggableProps,s=e.dragHandleProps,l=e.isDragging,c=e.onClick,u=e.teamId,d=C()("p-team_sidebar__item",{"p-team_sidebar__item--active":n,"p-team_sidebar__item--is_dragging":l,"p-team_sidebar__item--mac":Object(M.p)()}),p=C()("p-team_sidebar__icon",{"p-team_sidebar__icon--active":n,"p-team_sidebar__icon--is_dragging":l}),h=i?ne.b:ne.a;return v.a.createElement(U.c,{position:"right",offsetX:5,tip:this.getTooltip()},v.a.createElement(te.c,r()({},o,s,{ref:this.setRef,onClick:function(){return c(u)},className:d,"data-qa":"team_sidebar_item","aria-label":a}),v.a.createElement(X.a,{getTemplate:this.getContextMenuTemplate,overrideDefaultMenu:!0},v.a.createElement("div",{className:p},v.a.createElement(h,{icon:t,size:36,teamName:a,className:"p-team_sidebar__image"}))),this.renderBadge(),this.renderShortcutHint()))}}]),t}(g.Component);oe.displayName="TeamSidebarItem",oe.defaultProps=ie;var se=Object(y.b)(function(e,t){if(function(e){return e&&e.workspaces}(e)||t.failedToBoot)return r()({},t,{hasTeamBooted:!1});var n=Object($.d)(e),a=Object(ee.h)(n);return{hasTeamBooted:!0,hasUnreads:Object(Z.o)(e),mentionCount:Object(Z.f)(e),icon:a,teamName:n.name}})(oe),le=v.a.forwardRef(function(e,t){return v.a.createElement(se,r()({},e,{forwardedRef:t}))}),ce=n("VjHM"),ue=n("W+QA"),de=n("VMwU"),pe=(k.b.string.isRequired,k.b.string.isRequired,k.b.bool,function(e){var t=e.sidebarTheme,n=e.sidebarThemeCustomValues,a=e.featureClassicNav,r=void 0;try{r=JSON.parse(n)}catch(e){r=de.a}var i,o,s,l=Object(ue.e)(t,r,{useGlobalNav:!0})||de.a,c=l.text_color,u=Object(de.c)(l.column_bg,20),d=a?u:l.column_bg,p="\n\t\t.p-team_sidebar,\n\t\t.p-team_sidebar--frameless::before {\n\t\t\tbackground: "+d+";\n\t\t}\n\n\t\t.p-team_sidebar__item {\n\t\t\tcolor: "+l.text_color+";\n\t\t}\n\n\t\t.p-team_sidebar__add_button,\n\t\t.p-team_sidebar__add_button:hover,\n\t\t.p-team_sidebar__add_button:focus,\n\t\t.p-team_sidebar__add_button:active {\n\t\t\tcolor: "+Object(de.i)(l.text_color,50)+";\n\t\t}\n\n\t\t.p-team_sidebar__add_button {\n\t\t\tbackground: "+d+";\n\t\t\tborder-color: "+Object(de.l)(l.text_color,.3)+";\n\t\t}\n\n\t\t.p-team_sidebar__add_button:hover,\n\t\t.p-team_sidebar__add_button:focus,\n\t\t.p-team_sidebar__add_button:active {\n\t\t\tborder-color: "+l.text_color+";\n\t\t\tbackground: "+Object(de.c)(l.column_bg,60)+";\n\t\t\tbox-shadow: 0 0 0 3px "+d+",\n\t\t\t0 0 0 6px "+Object(de.l)(l.text_color,.3)+";\n\t\t}\n\n\t\t.p-team_sidebar__unread_dot,\n\t\t.p-team_sidebar__mentions_badge {\n\t\t\tborder-color: "+d+";\n\t\t}\n\n\t\t.p-team_sidebar__mentions_badge {\n\t\t\tbackground: "+l.badge+";\n\t\t}\n\n\t\t.p-team_sidebar__unread_dot {\n\t\t\tbackground: "+l.text_color+"\n\t\t}\n\n\t\t.p-team_sidebar__item.c-button--focus-visible:focus,\n\t\t.p-team_sidebar__add_button.c-link--focus-visible:focus {\n\t\t\tbox-shadow: "+(i=c,o=d,s=Object(de.l)(c,.3),"0 0 0 3px "+o+", 0 0 0 4px "+i+", 0 0 0 6px "+s)+";\n\t\t}\n\n\t\t.c-button--focus-visible:focus .p-team_sidebar__icon--active {\n\t\t\tbox-shadow: none;\n\t\t}\n\n\t\t.p-team_sidebar__signed_out_badge__stroke {\n\t\t\t-webkit-text-stroke: 6px "+d+";\n\t\t\tcolor: "+d+";\n\t\t}\n\n\t\t.p-team_sidebar__icon:hover {\n\t\t\tbox-shadow: 0 0 0 3px "+d+",\n\t\t\t0 0 0 6px "+Object(de.l)(l.text_color,.3)+";\n\t\t}\n\n\t\t.p-team_sidebar__icon--active,\n\t\t.p-team_sidebar__icon--active:hover {\n\t\t\tbox-shadow: 0 0 0 3px "+d+",\n\t\t\t0 0 0 6px "+l.text_color+";\n\t\t}\n\t";return v.a.createElement("style",{className:"p-team_sidebar__theme"},p)});pe.displayName="TeamSidebarTheme",pe.defaultProps={featureClassicNav:!1};var he=Object(y.b)(function(e){return{sidebarTheme:Object(ce.h)(e,"sidebar_theme"),sidebarThemeCustomValues:Object(ce.h)(e,"sidebar_theme_custom_values"),featureClassicNav:Object(A.i)(e,"feature_classic_nav")}})(pe),me=n("YEIV"),be=n.n(me),fe=n("TGBA"),_e=n("kiPk"),ge=n("MIIS"),ve=(k.b.arrayOf(k.b.string).isRequired,function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onWorkspaceBadgeUpdated=n.onWorkspaceBadgeUpdated.bind(n),n.updateAggregatedBadge=n.updateAggregatedBadge.bind(n),n}return p()(t,e),l()(t,[{key:"onWorkspaceBadgeUpdated",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.unreadCnt,a=e.unreadHighlightCnt,i=e.badgeDockIcon;this.setState(function(e){return r()({},e,be()({},t,{unreadHighlightCnt:a,unreadCnt:n,badgeDockIcon:i}))},this.updateAggregatedBadge)}},{key:"updateAggregatedBadge",value:function(){var e=Object(fe.a)(this.state),t=Object(_e.a)(e,function(e){return e.unreadHighlightCnt}),n=Object(_e.a)(e.filter(function(e){return e.badgeDockIcon}),function(e){return e.unreadCnt}),a=e.some(function(e){return e.badgeDockIcon});Object(S.rb)(t,n,a)}},{key:"render",value:function(){var e=this;return this.props.workspaces.map(function(e){return{teamId:e,store:Object(I.getStoreInstanceByTeamId)(e)}}).map(function(t){var n=t.teamId,a=t.store;return v.a.createElement(ge.a,{store:a,key:n,render:function(t){return v.a.createElement(ke,{id:n,onBadgeUpdated:e.onWorkspaceBadgeUpdated,unreadHighlightCnt:Object(Z.f)(t),unreadCnt:Object(Z.g)(t),badgeDockIcon:Object(ce.h)(t,"mac_ssb_bullet")})}})})}}]),t}(v.a.PureComponent));ve.displayName="DockBadgeListener";var ye=ve,ke=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"componentDidUpdate",value:function(){this.props.onBadgeUpdated({id:this.props.id,unreadCnt:this.props.unreadCnt,unreadHighlightCnt:this.props.unreadHighlightCnt,badgeDockIcon:this.props.badgeDockIcon})}},{key:"render",value:function(){return null}}]),t}(v.a.PureComponent);ke.displayName="WorkspaceBadgeItem",ke.defaultProps={unreadCnt:!1,unreadHighlightCnt:0,badgeDockIcon:!0};n("3dej");var Oe=new O.b("sonic-toolbar"),je=(k.b.object.isRequired,k.b.string.isRequired,k.b.string,k.b.func.isRequired,k.b.func.isRequired,k.b.func.isRequired,k.b.object,k.b.arrayOf(k.b.string),k.b.arrayOf(k.b.string),k.b.string,k.b.bool,k.b.array,k.b.bool,k.b.bool,k.b.func,k.b.func,{selectedTeamStore:void 0,bootedWorkspaces:{},failedToBootWorkspaces:[],className:void 0,featureClassicNav:!1,allWorkspaces:[],isWindowFrameless:!1,willNavigateToUnbootedWorkspaceId:void 0,userAttentionIsOnChat:!1,removeFromSectionNavigation:_.a,addToSectionNavigation:_.a}),Ce=49,Ee=57,we=97,Se=105,Ie=function(e,t,n){var a=[].concat(f()(e)),r=a.splice(t,1),i=m()(r,1)[0];return a.splice(n,0,i),a},Te=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={allWorkspaces:e.allWorkspaces,isModifierPressed:!1},n.currentActiveTeamIndex=null,Object(w.a)(n,["onKeyDown","onKeyUp","onWindowBlur","selectTeamByIndex","onDragEnd","onItemActive","focus","selectTeam"]),n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){S.V&&(window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),window.addEventListener("blur",this.onWindowBlur))}},{key:"componentDidUpdate",value:function(e){!e.userAttentionIsOnChat&&this.props.userAttentionIsOnChat&&this.props.addToSectionNavigation(),!this.props.userAttentionIsOnChat&&e.userAttentionIsOnChat&&this.props.removeFromSectionNavigation()}},{key:"componentWillUnmount",value:function(){S.V&&(window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),window.removeEventListener("blur",this.onWindowBlur))}},{key:"onWindowBlur",value:function(){this.state.isModifierPressed&&this.setState(function(){return{isModifierPressed:!1}})}},{key:"onKeyDown",value:function(e){var t=Object.keys(this.props.teams).length,n=Object(M.p)()?e.metaKey:e.ctrlKey;if(!e.shiftKey&&n&&t>0){var a=this.keyCodeInRange(e,Ce,Ee),r=this.keyCodeInRange(e,we,Se);if(a||r){e.preventDefault();var i=e.keyCode-(a?Ce:we);t>i&&this.selectTeamByIndex(i)}}n&&!e.shiftKey?this.setState(function(){return{isModifierPressed:!0}}):this.state.isModifierPressed&&this.setState(function(){return{isModifierPressed:!1}}),!e.shiftKey&&e.ctrlKey&&"Tab"===e.key?(e.preventDefault(),this.currentActiveTeamIndex>=this.state.allWorkspaces.length-1?this.selectTeamByIndex(0):this.selectTeamByIndex(this.currentActiveTeamIndex+1)):e.shiftKey&&e.ctrlKey&&"Tab"===e.key&&(e.preventDefault(),this.currentActiveTeamIndex<1?this.selectTeamByIndex(this.state.allWorkspaces.length-1):this.selectTeamByIndex(this.currentActiveTeamIndex-1))}},{key:"onKeyUp",value:function(e){!(Object(M.p)()?e.metaKey:e.ctrlKey)&&this.state.isModifierPressed&&this.setState(function(){return{isModifierPressed:!1}})}},{key:"onItemActive",value:function(e){this.activeItemRef=e}},{key:"onDragEnd",value:function(e){var t=e.destination,n=e.source;if(t){var a=this.props,r=a.allWorkspaces,i=a.setTeamOrder;n.index>=r.length||(this.setState(function(e){return{allWorkspaces:Ie(e.allWorkspaces,n.index,t.index)}}),i(Ie(r,n.index,t.index)))}}},{key:"focus",value:function(){this.activeItemRef&&this.activeItemRef.focus()}},{key:"keyCodeInRange",value:function(e,t,n){var a=e.keyCode;return a>=t&&a<=n}},{key:"selectTeam",value:function(e){var t=this.props,n=t.bootedWorkspaces,a=t.failedToBootWorkspaces,r=t.teams,i=t.selectedTeamStore;if(Object(L.b)(i.getState())){var o=n.includes(e),s=a.includes(e),l=r[e]&&r[e].isExpired;!o&&!s&&!l?this.props.setWillNavigateToUnbootedWorkspaceId(e):(this.props.setWillNavigateToUnbootedWorkspaceId(null),Object(T.g)(N.a,{teamId:e},{reason:"team-sidebar/selectTeam"}))}else Object(B.b)().info("TEAM-SIDEBAR","Cannot switch workspaces because canUserSwitchWorkspaces returned false.")}},{key:"selectTeamByIndex",value:function(e){var t=this.props.allWorkspaces;t[e]&&this.selectTeam(t[e])}},{key:"renderSidebarItem",value:function(e,t){var n=this,a=this.props,i=a.signOutFromTeam,o=a.teams,s=a.bootedWorkspaces,l=a.selectedTeamId,c=a.failedToBootWorkspaces,u=a.willNavigateToUnbootedWorkspaceId,d=this.state.isModifierPressed,p=o[e],h=p.icon,m=p.name,b=p.isExpired,f=s.includes(e),_=c.includes(e),g=function(e){var t=e.teamId,n=e.selectedTeamId,a=e.willNavigateToUnbootedWorkspaceId;return t===a||!a&&t===n}({teamId:e,selectedTeamId:l,willNavigateToUnbootedWorkspaceId:u});e===l&&this.currentActiveTeamIndex!==t&&(this.currentActiveTeamIndex=t);var k={teamId:e,teamName:m,icon:h,order:t,isActive:g,onClick:this.selectTeam,signOutFromTeam:function(){return i(e)},key:e,shouldShowKeyboardShortcut:d,hasSessionExpired:b,failedToBoot:_};return v.a.createElement(E.b,{draggableId:e,key:e,index:t,disableInteractiveElementBlocking:!0},function(t,a){var i=a.isDragging,o=v.a.createElement(le,r()({ref:t.innerRef},k,{draggableProps:t.draggableProps,dragHandleProps:t.dragHandleProps,isDragging:i,onItemActive:n.onItemActive}));return f?v.a.createElement(y.a,{store:Object(I.getStoreInstanceByTeamId)(e),key:e},o):o})}},{key:"renderTeamSidebarContents",value:function(e,t){var n=this,a=t.isDraggingOver,i=this.props.featureClassicNav,o=this.state.allWorkspaces.map(function(e,t){return n.renderSidebarItem(e,t)});return i?v.a.createElement(g.Fragment,null,v.a.createElement("div",r()({role:"presentation",ref:e.innerRef},e.droppableProps,{className:"p-team_sidebar__teams"}),o,e.placeholder),v.a.createElement(Y,{featureClassicNav:!0,isDragInProgress:a})):v.a.createElement(g.Fragment,null,v.a.createElement(Y,null),v.a.createElement("div",{ref:e.innerRef,className:"p-team_sidebar__teams"},o,e.placeholder))}},{key:"renderDesktopComponents",value:function(){var e=this.props.bootedWorkspaces;return v.a.createElement(v.a.Fragment,null,v.a.createElement(ye,{workspaces:e}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.selectedTeamId,a=t.selectedTeamStore,i=t.featureClassicNav,o=t.isWindowFrameless,s=a&&v.a.createElement(y.a,{store:a,key:n},v.a.createElement(he,null)),l=C()(this.props.className,"p-team_sidebar",{"p-team_sidebar--classic_nav":i,"p-team_sidebar--frameless":o});return v.a.createElement(g.Fragment,null,s,S.V?this.renderDesktopComponents():null,v.a.createElement(E.a,{onDragEnd:this.onDragEnd},v.a.createElement(E.c,{droppableId:"droppable"},function(t,n){var a=n.isDraggingOver;return v.a.createElement("div",r()({role:"toolbar","aria-label":Oe.t("Teams"),ref:t.innerRef},t.droppableProps,{"data-qa":"team_sidebar_scroll_container",className:l}),e.renderTeamSidebarContents(t,{isDraggingOver:a}))})))}}]),t}(g.Component);Te.displayName="TeamSidebar",Te.defaultProps=je;var Ne,Re={signOutFromTeam:R.u,setTeamOrder:R.B,setWillNavigateToUnbootedWorkspaceId:R.w},Ae=Object(F.a)()?Object(x.a)(Te,"TeamSidebar",{order:4}):Te,Pe=Object(y.b)(function(e,t){var n=Object(I.getStoreInstanceByTeamId)(t.selectedTeamId),a=Object(R.e)(e),r=Object(R.l)(e),i=Object(R.h)(e),o=Object(R.o)(e,t.selectedTeamId);return{teams:Object(R.n)(e),willNavigateToUnbootedWorkspaceId:r,selectedTeamStore:n,allWorkspaces:a,bootedWorkspaces:Object(R.f)(e),failedToBootWorkspaces:i,isWindowFrameless:Object(P.j)(e),featureClassicNav:o||n&&Object(A.i)(n.getState(),"feature_classic_nav")}},Re)((Ne=Ae,v.a.forwardRef(function(e,t){return v.a.createElement(D.a.Consumer,null,function(n){return v.a.createElement(Ne,r()({ref:t},e,{userAttentionIsOnChat:n}))})})));t.a=Pe},xU06:function(e,t,n){e.exports=n.p+"channel_message-d11d14d.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},y5qN:function(e,t,n){},yWse:function(e,t,n){},yZHI:function(e,t,n){"use strict";function a(e,t){return!(!e||!t)&&(!!t(e)||a(e.parentElement,t))}n.d(t,"a",function(){return a})},ybzm:function(e,t,n){e.exports=n.p+"save_and_checkout-adbd5c9.cache-gantry-1562960207.mp3?cache=gantry-1562960207"},yhoe:function(e,t,n){},yqYT:function(e,t,n){},yw6X:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("aK/h"),p=n("kxpR"),h=n.n(p),m=n("TSYQ"),b=n.n(m),f=n("XLFM"),_=n("od5y"),g=n("nNoG"),v=(n("C8Zo"),new g.b("migration_blocker_page")),y=(d.b.string,d.b.bool,d.b.string,d.b.string,d.b.bool,d.b.bool,d.b.bool,d.b.bool,d.b.string,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderMigrationTitle",value:function(){var e=this.props,t=e.teamName,n=e.enterpriseName;return h.a.createElement("h3",{className:"p-migration_blocker_page__title"},v.t("The {teamName} workspace is joining {enterpriseName}!",{teamName:t,enterpriseName:n}))}},{key:"renderMigrationMessage",value:function(){var e=this.props,t=e.enterpriseName,n=e.sendEmail,a=v.rt("It\u2019s moving day! Your workspace is being migrated into the <b>{enterpriseName}</b> Enterprise Grid organization, and will be temporarily unavailable until the process is complete.",{enterpriseName:t,fallbackHash:"f805600b955705eefe22feb6f32b1871508f03bd"});return h.a.createElement("div",{className:"p-migration_blocker_page__description"},a,n?v.t(" You\u2019ll receive an email when it\u2019s all done."):"")}},{key:"renderMigrationButton",value:function(){var e=this.props,t=e.migrationID,n=e.isOrgOwner,a=e.isWorkspaceOwner,r=e.isOrgAdmin,i=e.isWorkspaceAdmin,o=e.teamURL;return n||a||r||i?h.a.createElement(f.c,{className:"p-migration_blocker_page__button",href:o+"migrations/"+t+"/status"},h.a.createElement("div",{className:"p-migration_blocker_page__button__text"},h.a.createElement("span",{className:"p-migration_blocker_page__button__title"},v.t("View migration status")),h.a.createElement("span",{className:"p-migration_blocker_page__button__subtitle"},v.t("Migration status is only visible to owners and admins."))),h.a.createElement("span",{className:"p-migration_blocker_page__button_icon"},h.a.createElement(_.b,{type:"chevron-large-right"}))):null}},{key:"render",value:function(){var e=b()("p-migration_blocker_page","p-migration_blocker_page--large");return h.a.createElement("div",{className:e,role:"button",tabIndex:"0"},h.a.createElement("div",{className:"p-migration_blocker_text"},h.a.createElement("div",{className:"p-migration_blocker_icon"}),this.renderMigrationTitle(),this.renderMigrationMessage()),this.renderMigrationButton())}}]),t}(p.Component));y.displayName="MigrationBlockerPage",y.defaultProps={isOrgOwner:!1,isWorkspaceOwner:!1,isOrgAdmin:!1,isWorkspaceAdmin:!1,enterpriseName:null,teamURL:null,migrationID:null,sendEmail:!1,teamName:null},t.a=y},zA5J:function(e,t,n){"use strict";var a=n("m1cH"),r=n.n(a),i=n("yHhI"),o=n("k0uR"),s=n("KXAH"),l=n("MvLI"),c=n("iCc5"),u=n.n(c),d=n("V7oC"),p=n.n(d),h=n("kFZb"),m=function(){function e(t,n){u()(this,e),this.logger=t,this.watchFunc=n,this.action=this.watch(this.logger.action),this.debug=this.watch(this.logger.debug),this.error=this.watch(this.logger.error),this.info=this.watch(this.logger.info),this.warn=this.watch(this.logger.warn),this.timeStamp=this.watch(this.logger.timeStamp)}return p()(e,[{key:"watch",value:function(e){return Object(h.a)(e,this.watchFunc)}}]),e}();function b(e){var t=Object(l.a)(),n=Object(i.a)({getState:t&&t.getState,label:e});return new m(n,function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return o.a.store.apply(o.a,[Object(s.a)()].concat(r()((e?[e]:[]).concat(n))))})}n.d(t,"a",function(){return b})},zBLs:function(e,t,n){},zG9j:function(e,t,n){},zJYr:function(e,t,n){},zbnt:function(e,t,n){},ztz9:function(e,t,n){},zzVd:function(e,t,n){}}]);